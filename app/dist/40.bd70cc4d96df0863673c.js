webpackJsonp([40],{2150:function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),n=o(s),d=a(4),u=o(d),i=a(5),l=o(i),f=a(7),c=o(f),p=a(8),v=o(p),h=a(0),m=o(h),w=a(2),C=o(w),y=a(1),b=o(y),_=a(2089),g=a(56),k=r(g),L=a(314),E=r(L);a(137);var U=a(25),x=o(U),B=a(87),j=r(B),F=a(16),O=r(F),M=a(236),S=o(M),D=function(e){function t(e){(0,u.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.onUserChanged=a.onUserChanged.bind(a),(0,m.default)("#root").attr("class","channel-view"),j.isIos()?(0,m.default)("body").addClass("ios"):j.isAndroid()&&(0,m.default)("body").addClass("android"),a.state={user:x.default.getCurrentUser()},a.state.user||k.emitUserLoggedOutEvent("/login"),a}return(0,v.default)(t,e),(0,l.default)(t,[{key:"isValidState",value:function(){return null!=this.state.user}},{key:"onUserChanged",value:function(){var e=x.default.getCurrentUser();O.areObjectsEqual(this.state.user,e)||this.setState({user:e})}},{key:"componentDidMount",value:function(){E.initialize(),x.default.addChangeListener(this.onUserChanged),window.addEventListener("focus",this.onFocusListener),window.addEventListener("blur",this.onBlurListener),(0,m.default)("body").on("mouseenter mouseleave",".post",function(e){"mouseenter"===e.type?((0,m.default)(this).parent("div").prev(".date-separator, .new-separator").addClass("hovered--after"),(0,m.default)(this).parent("div").next(".date-separator, .new-separator").addClass("hovered--before")):((0,m.default)(this).parent("div").prev(".date-separator, .new-separator").removeClass("hovered--after"),(0,m.default)(this).parent("div").next(".date-separator, .new-separator").removeClass("hovered--before"))}),(0,m.default)("body").on("mouseenter mouseleave",".search-item__container .post",function(e){"mouseenter"===e.type?((0,m.default)(this).closest(".search-item__container").find(".date-separator").addClass("hovered--after"),(0,m.default)(this).closest(".search-item__container").next("div").find(".date-separator").addClass("hovered--before")):((0,m.default)(this).closest(".search-item__container").find(".date-separator").removeClass("hovered--after"),(0,m.default)(this).closest(".search-item__container").next("div").find(".date-separator").removeClass("hovered--before"))}),(0,m.default)("body").on("mouseenter mouseleave",".post.post--comment.same--root",function(e){"mouseenter"===e.type?((0,m.default)(this).parent("div").prev(".date-separator, .new-separator").addClass("hovered--comment"),(0,m.default)(this).parent("div").next(".date-separator, .new-separator").addClass("hovered--comment")):((0,m.default)(this).parent("div").prev(".date-separator, .new-separator").removeClass("hovered--comment"),(0,m.default)(this).parent("div").next(".date-separator, .new-separator").removeClass("hovered--comment"))}),(0,m.default)(window).on("keydown.preventBackspace",function(e){8!==e.which||(0,m.default)(e.target).is("input, textarea")||e.preventDefault()}),"true"===window.mm_config.EnableCustomEmoji&&(0,_.loadEmoji)(!1)}},{key:"componentWillUnmount",value:function(){(0,m.default)("#root").attr("class",""),E.close(),x.default.removeChangeListener(this.onUserChanged),(0,m.default)("body").off("click.userpopover"),(0,m.default)("body").off("mouseenter mouseleave",".post"),(0,m.default)("body").off("mouseenter mouseleave",".post.post--comment.same--root"),(0,m.default)(".modal").off("show.bs.modal"),(0,m.default)(window).off("keydown.preventBackspace"),window.removeEventListener("focus",this.onFocusListener),window.removeEventListener("blur",this.onBlurListener)}},{key:"render",value:function(){return this.isValidState()?b.default.cloneElement(this.props.children,{user:this.state.user}):b.default.createElement(S.default,null)}},{key:"onFocusListener",value:function(){k.emitBrowserFocus(!0)}},{key:"onBlurListener",value:function(){k.emitBrowserFocus(!1)}}]),t}(b.default.Component);t.default=D,D.propTypes={children:C.default.object}}});
//# sourceMappingURL=40.bd70cc4d96df0863673c.js.map