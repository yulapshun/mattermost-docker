webpackJsonp([29],{2142:function(e,t,a){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(6),r=n(l),i=a(4),s=n(i),o=a(5),u=n(o),d=a(7),c=n(d),m=a(8),f=n(m),g=a(2),p=n(g),h=a(1),E=n(h),v=a(17),w=a(44),_=a(29),b=a(56),M=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(b),y=a(435),N=a(69),S=a(135),k=n(S),I=a(25),F=n(I),L=a(2081),C=n(L),O=a(2083),q=n(O),A=a(2082),U=n(A),T=a(238),P=n(T),G=a(236),x=n(G),W=function(t){function a(t){(0,s.default)(this,a);var n=(0,c.default)(this,(a.__proto__||(0,r.default)(a)).call(this,t));B.call(n),n.renderSignupControls=n.renderSignupControls.bind(n);var l=!1,i="",o=!1,u=!1;if(t.location.query){var d=t.location.query.h,m=t.location.query.id;m?l=!0:d&&!F.default.getCurrentUser()?u=k.default.getGlobalItem(d):m||"true"===e.window.mm_config.EnableOpenServer||F.default.getNoAccounts()||(o=!0,i=E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.no_open_server",defaultMessage:"This server does not allow open signups.  Please speak with your Administrator to receive an invitation."}))}return n.state={loading:l,serverError:i,noOpenServerError:o,usedBefore:u},n}return(0,f.default)(a,t),(0,u.default)(a,[{key:"componentDidMount",value:function(){var e=this;if(k.default.removeGlobalItem("team"),this.props.location.query){var t=this.props.location.query.h,a=this.props.location.query.d,n=this.props.location.query.id,l=null!=F.default.getCurrentUser();if((n||t)&&l)return void(0,y.addUserToTeamFromInvite)(a,t,n,function(e){(0,N.loadMe)().then(function(){w.browserHistory.push("/"+e.name+"/channels/town-square")})},this.handleInvalidInvite);if(n)return void(0,y.getInviteInfo)(n,function(t){t&&e.setState({serverError:"",loading:!1})},this.handleInvalidInvite);l&&M.redirectUserToDefaultTeam()}}},{key:"renderSignupControls",value:function(){var t=[];if("true"===e.window.mm_config.EnableSignUpWithEmail&&t.push(E.default.createElement(w.Link,{className:"btn btn-custom-login btn--full email",key:"email",to:"/signup_email"+window.location.search},E.default.createElement("span",null,E.default.createElement("span",{className:"icon fa fa-envelope"}),E.default.createElement(v.FormattedMessage,{id:"signup.email",defaultMessage:"Email and Password"})))),"true"===e.window.mm_config.EnableSignUpWithGitLab&&t.push(E.default.createElement("a",{className:"btn btn-custom-login btn--full gitlab",key:"gitlab",href:_.Client4.getOAuthRoute()+"/gitlab/signup"+window.location.search},E.default.createElement("span",null,E.default.createElement("span",{className:"icon"}),E.default.createElement("span",null,E.default.createElement(v.FormattedMessage,{id:"signup.gitlab",defaultMessage:"GitLab Single Sign-On"}))))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSignUpWithGoogle&&t.push(E.default.createElement("a",{className:"btn btn-custom-login btn--full google",key:"google",href:_.Client4.getOAuthRoute()+"/google/signup"+window.location.search},E.default.createElement("span",null,E.default.createElement("span",{className:"icon"}),E.default.createElement("span",null,E.default.createElement(v.FormattedMessage,{id:"signup.google",defaultMessage:"Google Account"}))))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSignUpWithOffice365&&t.push(E.default.createElement("a",{className:"btn btn-custom-login btn--full office365",key:"office365",href:_.Client4.getOAuthRoute()+"/office365/signup"+window.location.search},E.default.createElement("span",null,E.default.createElement("span",{className:"icon"}),E.default.createElement("span",null,E.default.createElement(v.FormattedMessage,{id:"signup.office365",defaultMessage:"Office 365"}))))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableLdap&&t.push(E.default.createElement(w.Link,{className:"btn btn-custom-login btn--full ldap",key:"ldap",to:"/signup_ldap"+window.location.search},E.default.createElement("span",null,E.default.createElement("span",{className:"icon fa fa-folder-open fa--margin-top"}),E.default.createElement("span",null,E.default.createElement(v.FormattedMessage,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"}))))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSaml){var a="";a=window.location.search?"&action=signup":"?action=signup",t.push(E.default.createElement("a",{className:"btn btn-custom-login btn--full saml",key:"saml",href:"/login/sso/saml"+window.location.search+a},E.default.createElement("span",null,E.default.createElement("span",{className:"icon fa fa-lock fa--margin-top"}),E.default.createElement("span",null,e.window.mm_config.SamlLoginButtonText))))}if(0===t.length){var n=E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.none",defaultMessage:"No user creation method has been enabled. Please contact an administrator for access."});t=E.default.createElement(P.default,{error:n,margin:!0})}else if(1===t.length){if("true"===e.window.mm_config.EnableSignUpWithEmail)return w.browserHistory.push("/signup_email"+window.location.search);if("true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableLdap)return w.browserHistory.push("/signup_ldap"+window.location.search)}return t}},{key:"render",value:function(){if(this.state.loading)return E.default.createElement(x.default,null);if(this.state.usedBefore)return E.default.createElement("div",null,E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.expired",defaultMessage:"You've already completed the signup process for this invitation or this invitation has expired."}));var t=null;this.state.serverError&&(t=E.default.createElement("div",{className:"form-group has-error"},E.default.createElement("label",{className:"control-label"},this.state.serverError)));var a=void 0;return a=this.state.noOpenServerError||this.state.usedBefore?null:this.renderSignupControls(),E.default.createElement("div",null,E.default.createElement(q.default,null),E.default.createElement(U.default,null),E.default.createElement("div",{className:"col-sm-12"},E.default.createElement("div",{className:"signup-team__container"},E.default.createElement("img",{className:"signup-team-logo",src:C.default}),E.default.createElement("div",{className:"signup__content"},E.default.createElement("h1",null,e.window.mm_config.SiteName),E.default.createElement("h4",{className:"color--light"},E.default.createElement(v.FormattedMessage,{id:"web.root.signup_info"})),E.default.createElement("div",{className:"margin--extra"},E.default.createElement("h5",null,E.default.createElement("strong",null,E.default.createElement(v.FormattedMessage,{id:"signup.title",defaultMessage:"Create an account with:"})))),a,t),E.default.createElement("span",{className:"color--light"},E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.haveAccount",defaultMessage:"Already have an account?"})," ",E.default.createElement(w.Link,{to:"/login",query:this.props.location.query},E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.signIn",defaultMessage:"Click here to sign in."}))))))}}]),a}(E.default.Component),B=function(){var e=this;this.handleInvalidInvite=function(t){var a=void 0;a="store.sql_user.save.max_accounts.app_error"===t.server_error_id?t.message:E.default.createElement(v.FormattedMessage,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."}),e.setState({noOpenServerError:!0,loading:!1,serverError:a})}};t.default=W,W.propTypes={location:p.default.object}}).call(t,a(22))}});
//# sourceMappingURL=29.78996f5173be9e4224b4.js.map