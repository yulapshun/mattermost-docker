webpackJsonp([11],{2153:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return(0,s.default)({},t)}function r(e){return{actions:(0,u.bindActionCreators)({getTeams:d.getTeams},e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(19),s=n(i),o=a(31),u=a(20),d=a(122),m=a(2709),c=n(m);t.default=(0,o.connect)(l,r)(c.default)},2709:function(e,t,a){"use strict";(function(e){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(48),i=l(r),s=a(156),o=l(s),u=a(6),d=l(u),m=a(4),c=l(m),f=a(5),p=l(f),g=a(7),h=l(g),_=a(8),v=l(_),y=a(2),E=l(y),C=a(1),T=l(C),M=a(17),w=a(44),b=a(56),k=n(b),N=a(35),S=l(N),F=a(25),L=l(F),O=a(87),A=n(O),j=a(16),I=n(j),P=a(2081),q=l(P),x=a(2083),R=l(x),U=a(2082),B=l(U),D=a(236),G=l(D),H=a(2710),J=l(H),V=function(t){function a(e){(0,c.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,d.default)(a)).call(this,e));t.onTeamChange=t.onTeamChange.bind(t),t.handleTeamClick=t.handleTeamClick.bind(t),t.teamContentsCompare=t.teamContentsCompare.bind(t);var n=t.getStateFromStores(!1);return n.loadingTeamId="",t.state=n,t}return(0,v.default)(a,t),(0,p.default)(a,[{key:"componentDidMount",value:function(){S.default.addChangeListener(this.onTeamChange),this.props.actions.getTeams(0,200)}},{key:"componentWillUnmount",value:function(){S.default.removeChangeListener(this.onTeamChange)}},{key:"onTeamChange",value:function(){this.setState(this.getStateFromStores(!0))}},{key:"getStateFromStores",value:function(e){return{teams:S.default.getAll(),teamMembers:S.default.getMyTeamMembers(),teamListings:S.default.getTeamListings(),loaded:e}}},{key:"handleTeamClick",value:function(e){this.setState({loadingTeamId:e.id})}},{key:"teamContentsCompare",value:function(e,t){return e.props.team.display_name.localeCompare(t.props.team.display_name)}},{key:"render",value:function(){var t=[],a=new o.default,n=I.isSystemAdmin(L.default.getCurrentUser().roles),l=!0,r=!1,s=void 0;try{for(var u,d=(0,i.default)(this.state.teamMembers);!(l=(u=d.next()).done);l=!0){a[u.value.team_id]=!0}}catch(e){r=!0,s=e}finally{try{!l&&d.return&&d.return()}finally{if(r)throw s}}for(var m in this.state.teamListings)if(this.state.teamListings.hasOwnProperty(m)&&!a[m]){var c=this.state.teamListings[m];t.push(T.default.createElement(J.default,{key:"team_"+c.name,team:c,onTeamClick:this.handleTeamClick,loading:this.state.loadingTeamId===c.id}))}0!==t.length||"true"!==e.window.mm_config.EnableTeamCreation&&!n?0===t.length&&(t=T.default.createElement("div",{className:"signup-team-dir-err"},T.default.createElement("div",null,T.default.createElement(M.FormattedMessage,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."})))):t=T.default.createElement("div",{className:"signup-team-dir-err"},T.default.createElement("div",null,T.default.createElement(M.FormattedMessage,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."}))),Array.isArray(t)&&(t=t.sort(this.teamContentsCompare));var f=T.default.createElement("div",{className:"signup__content"},T.default.createElement("h4",null,T.default.createElement(M.FormattedMessage,{id:"signup_team.join_open",defaultMessage:"Teams you can join: "})),T.default.createElement("div",{className:"signup-team-all"},t));this.state.loaded&&""===this.state.loadingTeamId||(f=T.default.createElement(G.default,null));var p=null;n&&"false"===e.window.mm_config.EnableTeamCreation&&(p=T.default.createElement(M.FormattedMessage,{id:"login.createTeamAdminOnly",defaultMessage:"This option is only available for System Administrators, and does not show up for other users."}));var g=void 0;(n||"true"===e.window.mm_config.EnableTeamCreation)&&(g=T.default.createElement("div",{className:"margin--extra"},T.default.createElement(w.Link,{to:"/create_team",className:"signup-team-login"},T.default.createElement(M.FormattedMessage,{id:"login.createTeam",defaultMessage:"Create a new team"})),T.default.createElement("div",null,p)));var h=void 0;n&&!A.isMobileApp()&&(h=T.default.createElement("div",{className:"margin--extra hidden-xs"},T.default.createElement(w.Link,{to:"/admin_console",className:"signup-team-login"},T.default.createElement(M.FormattedMessage,{id:"signup_team_system_console",defaultMessage:"Go to System Console"}))));var _=null;_="true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_license.CustomBrand&&"true"===e.window.mm_config.EnableCustomBrand?e.window.mm_config.CustomDescriptionText:T.default.createElement(M.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"});var v=void 0;return v=this.state.teamMembers.length?T.default.createElement(B.default,null):T.default.createElement("div",{className:"signup-header"},T.default.createElement("a",{href:"#",onClick:function(){return k.emitUserLoggedOutEvent()}},T.default.createElement("span",{className:"fa fa-chevron-left"}),T.default.createElement(M.FormattedMessage,{id:"web.header.logout"}))),T.default.createElement("div",null,T.default.createElement(R.default,null),v,T.default.createElement("div",{className:"col-sm-12"},T.default.createElement("div",{className:"signup-team__container"},T.default.createElement("img",{className:"signup-team-logo",src:q.default}),T.default.createElement("h1",null,e.window.mm_config.SiteName),T.default.createElement("h4",{className:"color--light"},_),f,g,h)))}}]),a}(T.default.Component);V.propTypes={actions:E.default.shape({getTeams:E.default.func.isRequired}).isRequired},t.default=V}).call(t,a(22))},2710:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(6),r=n(l),i=a(4),s=n(i),o=a(5),u=n(o),d=a(7),m=n(d),c=a(8),f=n(c),p=a(2),g=n(p),h=a(1),_=n(h),v=a(40),y=a(44),E=a(435),C=a(9),T=a(16),M=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(T),w=function(e){function t(){var e,a,n,l;(0,s.default)(this,t);for(var i=arguments.length,o=Array(i),u=0;u<i;u++)o[u]=arguments[u];return a=n=(0,m.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),n.handleTeamClick=function(){(0,E.addUserToTeamFromInvite)("","",n.props.team.invite_id,function(){y.browserHistory.push("/"+n.props.team.name+"/channels/town-square")}),n.props.onTeamClick(n.props.team)},l=a,(0,m.default)(n,l)}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=void 0,t=C.Constants.TEAM_INFO_SVG;e=this.props.loading?_.default.createElement("span",{className:"fa fa-refresh fa-spin right signup-team__icon"}):_.default.createElement("span",{className:"fa fa-angle-right right signup-team__icon"});var a="",n="";return this.props.team.description&&(a=_.default.createElement(v.Tooltip,{id:"team-description__tooltip"},this.props.team.description),n=_.default.createElement(v.OverlayTrigger,{trigger:["hover","focus","click"],delayShow:1e3,placement:"top",overlay:a,ref:"descriptionOverlay"},_.default.createElement("span",{className:"icon icon--info",dangerouslySetInnerHTML:{__html:t}}))),_.default.createElement("div",{className:"signup-team-dir"},n,_.default.createElement(y.Link,{id:M.createSafeId(this.props.team.display_name),onClick:this.handleTeamClick},_.default.createElement("span",{className:"signup-team-dir__name"},this.props.team.display_name),e))}}]),t}(_.default.PureComponent);w.propTypes={team:g.default.object.isRequired,onTeamClick:g.default.func.isRequired,loading:g.default.bool.isRequired},t.default=w}});
//# sourceMappingURL=11.f06157c3c386dc9f83f6.js.map