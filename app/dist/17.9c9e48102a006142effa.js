webpackJsonp([17],{2121:function(e,t,a){"use strict";(function(e){function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(183),n=s(i),r=a(48),o=s(r),u=a(6),d=s(u),m=a(4),f=s(m),c=a(7),h=s(c),g=a(5),p=s(g),_=a(8),j=s(_),E=a(2),y=s(E),v=a(1),b=s(v),M=a(17),k=a(437),C=a(2089),N=l(C),F=a(137),w=s(F),D=a(25),T=s(D),S=a(16),O=l(S),L=a(236),U=s(L),P=a(2358),x=s(P),q=function(t){function a(e){(0,f.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,d.default)(a)).call(this,e));return t.updateTitle=t.updateTitle.bind(t),t.handleEmojiChange=t.handleEmojiChange.bind(t),t.handleUserChange=t.handleUserChange.bind(t),t.deleteEmoji=t.deleteEmoji.bind(t),t.updateFilter=t.updateFilter.bind(t),t.state={emojis:w.default.getCustomEmojiMap(),loading:!0,filter:"",users:T.default.getProfiles()},t}return(0,j.default)(a,t),(0,p.default)(a,null,[{key:"propTypes",get:function(){return{team:y.default.object,user:y.default.object}}}]),(0,p.default)(a,[{key:"componentDidMount",value:function(){var e=this;w.default.addChangeListener(this.handleEmojiChange),T.default.addChangeListener(this.handleUserChange),"true"===window.mm_config.EnableCustomEmoji&&N.loadEmoji().then(function(){return e.setState({loading:!1})}),this.updateTitle()}},{key:"updateTitle",value:function(){var t="";null!=e.window.mm_config.SiteName&&(t=e.window.mm_config.SiteName),document.title=O.localizeMessage("custom_emoji.header","Custom Emoji")+" - "+this.props.team.display_name+" "+t}},{key:"componentWillUnmount",value:function(){w.default.removeChangeListener(this.handleEmojiChange),T.default.removeChangeListener(this.handleUserChange)}},{key:"handleEmojiChange",value:function(){this.setState({emojis:w.default.getCustomEmojiMap()})}},{key:"handleUserChange",value:function(){this.setState({users:T.default.getProfiles()})}},{key:"updateFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"deleteEmoji",value:function(e){N.deleteEmoji(e.id)}},{key:"render",value:function(){var e=this.state.filter.toLowerCase(),t=O.isSystemAdmin(this.props.user.roles),a=[];if(this.state.loading)a.push(b.default.createElement("tr",{key:"loading",className:"backstage-list__item backstage-list__empty"},b.default.createElement("td",{colSpan:"4"},b.default.createElement(U.default,{key:"loading"}))));else if(0===this.state.emojis.size)a.push(b.default.createElement("tr",{key:"empty",className:"backstage-list__item backstage-list__empty"},b.default.createElement("td",{colSpan:"4"},b.default.createElement(M.FormattedMessage,{id:"emoji_list.empty",defaultMessage:"No custom emoji found"}))));else{var l=!0,s=!1,i=void 0;try{for(var r,u=(0,o.default)(this.state.emojis);!(l=(r=u.next()).done);l=!0){var d=(0,n.default)(r.value,2),m=d[1],f=null;(t||this.props.user.id===m.creator_id)&&(f=this.deleteEmoji),a.push(b.default.createElement(x.default,{key:m.id,emoji:m,onDelete:f,filter:e,creator:this.state.users[m.creator_id]||{}}))}}catch(e){s=!0,i=e}finally{try{!l&&u.return&&u.return()}finally{if(s)throw i}}}return b.default.createElement("div",{className:"backstage-content emoji-list"},b.default.createElement("div",{className:"backstage-header"},b.default.createElement("h1",null,b.default.createElement(M.FormattedMessage,{id:"emoji_list.header",defaultMessage:"Custom Emoji"})),b.default.createElement(k.Link,{className:"add-link",to:"/"+this.props.team.name+"/emoji/add"},b.default.createElement("button",{type:"button",className:"btn btn-primary"},b.default.createElement(M.FormattedMessage,{id:"emoji_list.add",defaultMessage:"Add Custom Emoji"})))),b.default.createElement("div",{className:"backstage-filters"},b.default.createElement("div",{className:"backstage-filter__search"},b.default.createElement("i",{className:"fa fa-search"}),b.default.createElement("input",{type:"search",className:"form-control",placeholder:O.localizeMessage("emoji_list.search","Search Custom Emoji"),value:this.state.filter,onChange:this.updateFilter,style:{flexGrow:0,flexShrink:0}}))),b.default.createElement("span",{className:"backstage-list__help"},b.default.createElement("p",null,b.default.createElement(M.FormattedMessage,{id:"emoji_list.help",defaultMessage:"Custom emoji are available to everyone on your server. Type ':' in a message box to bring up the emoji selection menu. Other users may need to refresh the page before new emojis appear."})),b.default.createElement("p",null,b.default.createElement(M.FormattedMessage,{id:"emoji_list.help2",defaultMessage:"Tip: If you add #, ##, or ### as the first character on a new line containing emoji, you can use larger sized emoji. To try it out, send a message such as: '# :smile:'."}))),b.default.createElement("div",{className:"backstage-list"},b.default.createElement("table",{className:"emoji-list__table"},b.default.createElement("thead",null,b.default.createElement("tr",{className:"backstage-list__item emoji-list__table-header"},b.default.createElement("th",{className:"emoji-list__name"},b.default.createElement(M.FormattedMessage,{id:"emoji_list.name",defaultMessage:"Name"})),b.default.createElement("th",{className:"emoji-list__image"},b.default.createElement(M.FormattedMessage,{id:"emoji_list.image",defaultMessage:"Image"})),b.default.createElement("th",{className:"emoji-list__creator"},b.default.createElement(M.FormattedMessage,{id:"emoji_list.creator",defaultMessage:"Creator"})),b.default.createElement("th",{className:"emoji-list_actions"},b.default.createElement(M.FormattedMessage,{id:"emoji_list.actions",defaultMessage:"Actions"})))),b.default.createElement("tbody",null,a))))}}]),a}(b.default.Component);t.default=q}).call(t,a(22))},2358:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),i=l(s),n=a(4),r=l(n),o=a(7),u=l(o),d=a(5),m=l(d),f=a(8),c=l(f),h=a(2),g=l(h),p=a(1),_=l(p),j=a(17),E=a(137),y=l(E),v=a(16),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(v),M=a(2359),k=l(M),C=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleDelete=a.handleDelete.bind(a),a}return(0,c.default)(t,e),(0,m.default)(t,null,[{key:"propTypes",get:function(){return{emoji:g.default.object.isRequired,onDelete:g.default.func.isRequired,filter:g.default.string,creator:g.default.object.isRequired}}}]),(0,m.default)(t,[{key:"handleDelete",value:function(){this.props.onDelete(this.props.emoji)}},{key:"matchesFilter",value:function(e,t,a){return!a||(-1!==e.name.toLowerCase().indexOf(a)||!(!t||!t.username||-1===t.username.toLowerCase().indexOf(a)))}},{key:"render",value:function(){var e=this.props.emoji,t=this.props.creator,a=this.props.filter?this.props.filter.toLowerCase():"";if(!this.matchesFilter(e,t,a))return null;var l=void 0;t?(l=b.displayUsernameForUser(t))!==t.username&&(l+=" (@"+t.username+")"):l=_.default.createElement(j.FormattedMessage,{id:"emoji_list.somebody",defaultMessage:"Somebody on another team"});var s=null;return this.props.onDelete&&(s=_.default.createElement(k.default,{onDelete:this.handleDelete})),_.default.createElement("tr",{className:"backstage-list__item"},_.default.createElement("td",{className:"emoji-list__name"},":"+e.name+":"),_.default.createElement("td",{className:"emoji-list__image"},_.default.createElement("span",{className:"emoticon",style:{backgroundImage:"url("+y.default.getEmojiImageUrl(e)+")"}})),_.default.createElement("td",{className:"emoji-list__creator"},l),_.default.createElement("td",{className:"emoji-list-item_actions"},s))}}]),t}(_.default.Component);t.default=C},2359:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),i=l(s),n=a(4),r=l(n),o=a(5),u=l(o),d=a(7),m=l(d),f=a(8),c=l(f),h=a(2),g=l(h),p=a(1),_=l(p),j=a(17),E=a(771),y=l(E),v=function(e){function t(){return(0,r.default)(this,t),(0,m.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,u.default)(t,[{key:"triggerTitle",get:function(){return _.default.createElement(j.FormattedMessage,{id:"emoji_list.delete",defaultMessage:"Delete"})}},{key:"modalTitle",get:function(){return _.default.createElement(j.FormattedMessage,{id:"emoji_list.delete.confirm.title",defaultMessage:"Delete Custom Emoji"})}},{key:"modalMessage",get:function(){return _.default.createElement("div",{className:"alert alert-warning"},_.default.createElement("i",{className:"fa fa-warning fa-margin--right"}),_.default.createElement(j.FormattedMessage,{id:"emoji_list.delete.confirm.msg",defaultMessage:"This action permanently deletes the custom emoji. Are you sure you want to delete it?"}))}},{key:"modalConfirmButton",get:function(){return _.default.createElement(j.FormattedMessage,{id:"emoji_list.delete.confirm.button",defaultMessage:"Delete"})}}]),t}(y.default);t.default=v,v.propTypes={onDelete:g.default.func.isRequired}}});
//# sourceMappingURL=17.9c9e48102a006142effa.js.map