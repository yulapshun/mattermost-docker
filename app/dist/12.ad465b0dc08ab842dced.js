webpackJsonp([12],{2127:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return(0,s.default)({},t,{outgoingWebhooks:(0,c.getOutgoingHooks)(e),channels:(0,m.getAllChannels)(e),users:(0,h.getUsers)(e),teamId:(0,f.getCurrentTeamId)(e)})}function r(e){return{actions:(0,d.bindActionCreators)({getOutgoingHooks:g.getOutgoingHooks,removeOutgoingHook:g.removeOutgoingHook,regenOutgoingHookToken:g.regenOutgoingHookToken},e)}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(19),s=o(l),i=a(31),d=a(20),u=a(735),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(u),c=a(2084),f=a(120),m=a(136),h=a(50),p=a(2369),_=o(p);t.default=(0,i.connect)(n,r)(_.default)},2369:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(59),r=o(n),l=a(6),s=o(l),i=a(4),d=o(i),u=a(5),g=o(u),c=a(7),f=o(c),m=a(8),h=o(m),p=a(2),_=o(p),k=a(1),b=o(k),v=a(17),w=a(16),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(w),E=a(9),M=o(E),W=a(2086),O=o(W),T=a(2370),N=o(T),C=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.regenOutgoingWebhookToken=function(e){a.props.actions.regenOutgoingHookToken(e.id)},a.removeOutgoingHook=function(e){a.props.actions.removeOutgoingHook(e.id)},a.outgoingWebhookCompare=a.outgoingWebhookCompare.bind(a),a.state={loading:!0},a}return(0,h.default)(t,e),(0,g.default)(t,[{key:"componentDidMount",value:function(){var e=this;"true"===window.mm_config.EnableOutgoingWebhooks&&this.props.actions.getOutgoingHooks("",this.props.teamId,M.default.Integrations.START_PAGE_NUM,M.default.Integrations.PAGE_SIZE).then(function(){return e.setState({loading:!1})})}},{key:"outgoingWebhookCompare",value:function(e,t){var a=e.display_name;if(!a){var o=this.props.channels[e.channel_id];a=o?o.display_name:y.localizeMessage("installed_outgoing_webhooks.unknown_channel","A Private Webhook")}var n=t.display_name;if(!n){var r=this.props.channels[t.channel_id];n=r?r.display_name:y.localizeMessage("installed_outgoing_webhooks.unknown_channel","A Private Webhook")}return a.localeCompare(n)}},{key:"render",value:function(){var e=this,t=(0,r.default)(this.props.outgoingWebhooks).map(function(t){return e.props.outgoingWebhooks[t]}),a=t.sort(this.outgoingWebhookCompare).map(function(t){var a=e.props.isAdmin||e.props.user.id===t.creator_id,o=e.props.channels[t.channel_id];return b.default.createElement(N.default,{key:t.id,outgoingWebhook:t,onRegenToken:function(){return e.regenOutgoingWebhookToken(t)},onDelete:function(){return e.removeOutgoingHook(t)},creator:e.props.users[t.creator_id]||{},canChange:a,team:e.props.team,channel:o})});return b.default.createElement(O.default,{header:b.default.createElement(v.FormattedMessage,{id:"installed_outgoing_webhooks.header",defaultMessage:"Installed Outgoing Webhooks"}),addText:b.default.createElement(v.FormattedMessage,{id:"installed_outgoing_webhooks.add",defaultMessage:"Add Outgoing Webhook"}),addLink:"/"+this.props.team.name+"/integrations/outgoing_webhooks/add",emptyText:b.default.createElement(v.FormattedMessage,{id:"installed_outgoing_webhooks.empty",defaultMessage:"No outgoing webhooks found"}),helpText:b.default.createElement(v.FormattedMessage,{id:"installed_outgoing_webhooks.help",defaultMessage:"Use outgoing webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.",values:{buildYourOwn:b.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://docs.mattermost.com/developer/webhooks-outgoing.html"},b.default.createElement(v.FormattedMessage,{id:"installed_outgoing_webhooks.help.buildYourOwn",defaultMessage:"Build your own"})),appDirectory:b.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://about.mattermost.com/default-app-directory/"},b.default.createElement(v.FormattedMessage,{id:"installed_outgoing_webhooks.help.appDirectory",defaultMessage:"App Directory"}))}}),searchPlaceholder:y.localizeMessage("installed_outgoing_webhooks.search","Search Outgoing Webhooks"),loading:this.state.loading},a)}}]),t}(b.default.PureComponent);C.propTypes={team:_.default.object,user:_.default.object,isAdmin:_.default.bool,outgoingWebhooks:_.default.object,channels:_.default.object,users:_.default.object,teamId:_.default.string,actions:_.default.shape({removeOutgoingHook:_.default.func,getOutgoingHooks:_.default.func,regenOutgoingHookToken:_.default.func})},t.default=C},2370:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(48),r=o(n),l=a(6),s=o(l),i=a(4),d=o(i),u=a(5),g=o(u),c=a(7),f=o(c),m=a(8),h=o(m),p=a(2),_=o(p),k=a(1),b=o(k),v=a(17),w=a(437),y=a(2087),E=o(y),M=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.handleRegenToken=a.handleRegenToken.bind(a),a.handleDelete=a.handleDelete.bind(a),a}return(0,h.default)(t,e),(0,g.default)(t,[{key:"handleRegenToken",value:function(e){e.preventDefault(),this.props.onRegenToken(this.props.outgoingWebhook)}},{key:"handleDelete",value:function(){this.props.onDelete(this.props.outgoingWebhook)}},{key:"render",value:function(){var e=this.props.outgoingWebhook,a=this.props.channel,o=this.props.filter?this.props.filter.toLowerCase():"";if(!t.matchesFilter(e,a,o))return null;var n=t.makeDisplayName(e,a),r=null;e.description&&(r=b.default.createElement("div",{className:"item-details__row"},b.default.createElement("span",{className:"item-details__description"},e.description)));var l=null;e.trigger_words&&e.trigger_words.length>0&&(l=b.default.createElement("div",{className:"item-details__row"},b.default.createElement("span",{className:"item-details__trigger-words"},b.default.createElement(v.FormattedMessage,{id:"installed_integrations.triggerWords",defaultMessage:"Trigger Words: {triggerWords}",values:{triggerWords:e.trigger_words.join(", ")}}))));var s=b.default.createElement("div",{className:"item-details__row"},b.default.createElement("span",{className:"item-details__url"},b.default.createElement(v.FormattedMessage,{id:"installed_integrations.callback_urls",defaultMessage:"Callback URLs: {urls}",values:{urls:e.callback_urls.join(", ")}}))),i=void 0;0===e.trigger_when?i=b.default.createElement(v.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhenFullWord",defaultMessage:"First word matches a trigger word exactly"}):1===e.trigger_when&&(i=b.default.createElement(v.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhenStartsWith",defaultMessage:"First word starts with a trigger word"}));var d=null;return this.props.canChange&&(d=b.default.createElement("div",{className:"item-actions"},b.default.createElement("a",{href:"#",onClick:this.handleRegenToken},b.default.createElement(v.FormattedMessage,{id:"installed_integrations.regenToken",defaultMessage:"Regen Token"}))," - ",b.default.createElement(w.Link,{to:"/"+this.props.team.name+"/integrations/outgoing_webhooks/edit?id="+e.id},b.default.createElement(v.FormattedMessage,{id:"installed_integrations.edit",defaultMessage:"Edit"}))," - ",b.default.createElement(E.default,{messageId:"installed_outgoing_webhooks.delete.confirm",onDelete:this.handleDelete}))),b.default.createElement("div",{className:"backstage-list__item"},b.default.createElement("div",{className:"item-details"},b.default.createElement("div",{className:"item-details__row"},b.default.createElement("span",{className:"item-details__name"},n)),r,b.default.createElement("div",{className:"item-details__row"},b.default.createElement("span",{className:"item-details__content_type"},b.default.createElement(v.FormattedMessage,{id:"installed_integrations.content_type",defaultMessage:"Content-Type: {contentType}",values:{contentType:e.content_type||"application/x-www-form-urlencoded"}}))),l,b.default.createElement("div",{className:"item-details__row"},b.default.createElement("span",{className:"item-details__trigger-when"},b.default.createElement(v.FormattedMessage,{id:"installed_integrations.triggerWhen",defaultMessage:"Trigger When: {triggerWhen}",values:{triggerWhen:i}}))),b.default.createElement("div",{className:"item-details__row"},b.default.createElement("span",{className:"item-details__token"},b.default.createElement(v.FormattedMessage,{id:"installed_integrations.token",defaultMessage:"Token: {token}",values:{token:e.token}}))),b.default.createElement("div",{className:"item-details__row"},b.default.createElement("span",{className:"item-details__creation"},b.default.createElement(v.FormattedMessage,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:this.props.creator.username,createAt:e.create_at}}))),s),d)}}],[{key:"makeDisplayName",value:function(e,t){return e.display_name?e.display_name:t?t.display_name:b.default.createElement(v.FormattedMessage,{id:"installed_outgoing_webhooks.unknown_channel",defaultMessage:"A Private Webhook"})}},{key:"matchesFilter",value:function(e,t,a){if(!a)return!0;if(-1!==e.display_name.toLowerCase().indexOf(a)||-1!==e.description.toLowerCase().indexOf(a))return!0;var o=!0,n=!1,l=void 0;try{for(var s,i=(0,r.default)(e.trigger_words);!(o=(s=i.next()).done);o=!0){if(-1!==s.value.toLowerCase().indexOf(a))return!0}}catch(e){n=!0,l=e}finally{try{!o&&i.return&&i.return()}finally{if(n)throw l}}return!(!t||!t||-1===t.name.toLowerCase().indexOf(a))}}]),t}(b.default.PureComponent);M.propTypes={outgoingWebhook:_.default.object.isRequired,onRegenToken:_.default.func.isRequired,onDelete:_.default.func.isRequired,filter:_.default.string,creator:_.default.object.isRequired,canChange:_.default.bool.isRequired,team:_.default.object.isRequired,channel:_.default.object},t.default=M}});
//# sourceMappingURL=12.ad465b0dc08ab842dced.js.map