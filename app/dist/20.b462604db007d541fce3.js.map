{"version":3,"sources":["webpack:///20.b462604db007d541fce3.js","webpack:///./components/integrations/components/edit_incoming_webhook/index.js","webpack:///./components/integrations/components/edit_incoming_webhook/edit_incoming_webhook.jsx"],"names":["webpackJsonp","2126","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","mapStateToProps","state","ownProps","hookId","location","query","id","_extends3","hook","entities","integrations","incomingHooks","updateIncomingHookRequest","requests","createIncomingHook","mapDispatchToProps","dispatch","actions","_redux","bindActionCreators","updateIncomingHook","getIncomingHook","Object","defineProperty","value","_extends2","_reactRedux","_integrations","_edit_incoming_webhook","_edit_incoming_webhook2","connect","2368","_regenerator","_regenerator2","_asyncToGenerator2","_asyncToGenerator3","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_propTypes","_propTypes2","_react","_react2","_es","_abstract_incoming_webhook","_abstract_incoming_webhook2","_loading_screen","_loading_screen2","HEADER","defaultMessage","FOOTER","EditIncomingWebhook","_React$PureComponent","props","_this2","this","_this","__proto__","call","editIncomingHook","_ref","mark","_callee","wrap","_context","prev","next","newHook","token","submitHook","stop","_x","apply","arguments","_callee2","_ref3","data","_context2","setState","serverError","sent","browserHistory","push","team","name","abrupt","error","message","showConfirmModal","key","window","mm_config","EnableIncomingWebhooks","createElement","header","footer","action","initialHook","PureComponent","propTypes","object","isRequired","string","shape","func"],"mappings":"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","file":"20.b462604db007d541fce3.js","sourcesContent":["webpackJsonp([20],{\n\n/***/ 2126:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(19);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(31);\n\nvar _redux = __webpack_require__(20);\n\nvar _integrations = __webpack_require__(735);\n\nvar _edit_incoming_webhook = __webpack_require__(2368);\n\nvar _edit_incoming_webhook2 = _interopRequireDefault(_edit_incoming_webhook);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapStateToProps(state, ownProps) {\n    var hookId = ownProps.location.query.id;\n\n    return (0, _extends3.default)({}, ownProps, {\n        hookId: hookId,\n        hook: state.entities.integrations.incomingHooks[hookId],\n        updateIncomingHookRequest: state.requests.integrations.createIncomingHook\n    });\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: (0, _redux.bindActionCreators)({\n            updateIncomingHook: _integrations.updateIncomingHook,\n            getIncomingHook: _integrations.getIncomingHook\n        }, dispatch)\n    };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_edit_incoming_webhook2.default);\n\n/***/ }),\n\n/***/ 2368:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _regenerator = __webpack_require__(76);\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = __webpack_require__(77);\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _getPrototypeOf = __webpack_require__(6);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(4);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(5);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(7);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(8);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _es = __webpack_require__(44);\n\nvar _abstract_incoming_webhook = __webpack_require__(2091);\n\nvar _abstract_incoming_webhook2 = _interopRequireDefault(_abstract_incoming_webhook);\n\nvar _loading_screen = __webpack_require__(236);\n\nvar _loading_screen2 = _interopRequireDefault(_loading_screen);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar HEADER = { id: 'integrations.edit', defaultMessage: 'Edit' }; // Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar FOOTER = { id: 'update_incoming_webhook.update', defaultMessage: 'Update' };\n\nvar EditIncomingWebhook = function (_React$PureComponent) {\n    (0, _inherits3.default)(EditIncomingWebhook, _React$PureComponent);\n\n    function EditIncomingWebhook(props) {\n        var _this2 = this;\n\n        (0, _classCallCheck3.default)(this, EditIncomingWebhook);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (EditIncomingWebhook.__proto__ || (0, _getPrototypeOf2.default)(EditIncomingWebhook)).call(this, props));\n\n        _this.editIncomingHook = function () {\n            var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(hook) {\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _this.newHook = hook;\n\n                                if (_this.props.hook.id) {\n                                    hook.id = _this.props.hook.id;\n                                }\n\n                                if (_this.props.hook.token) {\n                                    hook.token = _this.props.hook.token;\n                                }\n\n                                _context.next = 5;\n                                return _this.submitHook();\n\n                            case 5:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, _this2);\n            }));\n\n            return function (_x) {\n                return _ref.apply(this, arguments);\n            };\n        }();\n\n        _this.submitHook = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {\n            var _ref3, data;\n\n            return _regenerator2.default.wrap(function _callee2$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            _this.setState({ serverError: '' });\n\n                            _context2.next = 3;\n                            return _this.props.actions.updateIncomingHook(_this.newHook);\n\n                        case 3:\n                            _ref3 = _context2.sent;\n                            data = _ref3.data;\n\n                            if (!data) {\n                                _context2.next = 8;\n                                break;\n                            }\n\n                            _es.browserHistory.push('/' + _this.props.team.name + '/integrations/incoming_webhooks');\n                            return _context2.abrupt('return');\n\n                        case 8:\n\n                            if (_this.props.updateIncomingHookRequest.error) {\n                                _this.setState({ serverError: _this.props.updateIncomingHookRequest.error.message });\n                            }\n\n                        case 9:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, _callee2, _this2);\n        }));\n\n\n        _this.state = {\n            showConfirmModal: false,\n            serverError: ''\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(EditIncomingWebhook, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (window.mm_config.EnableIncomingWebhooks === 'true') {\n                this.props.actions.getIncomingHook(this.props.hookId);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!this.props.hook) {\n                return _react2.default.createElement(_loading_screen2.default, null);\n            }\n\n            return _react2.default.createElement(_abstract_incoming_webhook2.default, {\n                team: this.props.team,\n                header: HEADER,\n                footer: FOOTER,\n                action: this.editIncomingHook,\n                serverError: this.state.serverError,\n                initialHook: this.props.hook\n            });\n        }\n    }]);\n    return EditIncomingWebhook;\n}(_react2.default.PureComponent);\n\nEditIncomingWebhook.propTypes = {\n\n    /**\n    * The current team\n    */\n    team: _propTypes2.default.object.isRequired,\n\n    /**\n    * The incoming webhook to edit\n    */\n    hook: _propTypes2.default.object,\n\n    /**\n    * The id of the incoming webhook to edit\n    */\n    hookId: _propTypes2.default.string.isRequired,\n\n    /**\n    * The request state for updateIncomingHook action. Contains status and error\n    */\n    updateIncomingHookRequest: _propTypes2.default.object.isRequired,\n\n    actions: _propTypes2.default.shape({\n\n        /**\n        * The function to call to update an incoming webhook\n        */\n        updateIncomingHook: _propTypes2.default.func.isRequired,\n\n        /**\n        * The function to call to get an incoming webhook\n        */\n        getIncomingHook: _propTypes2.default.func.isRequired\n    }).isRequired\n};\nexports.default = EditIncomingWebhook;\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 20.b462604db007d541fce3.js","// Copyright (c) 2017-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport {getIncomingHook, updateIncomingHook} from 'mattermost-redux/actions/integrations';\n\nimport EditIncomingWebhook from './edit_incoming_webhook.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const hookId = ownProps.location.query.id;\n\n    return {\n        ...ownProps,\n        hookId,\n        hook: state.entities.integrations.incomingHooks[hookId],\n        updateIncomingHookRequest: state.requests.integrations.createIncomingHook\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            updateIncomingHook,\n            getIncomingHook\n        }, dispatch)\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditIncomingWebhook);\n\n\n\n// WEBPACK FOOTER //\n// ./components/integrations/components/edit_incoming_webhook/index.js","// Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {browserHistory} from 'react-router/es6';\n\nimport AbstractIncomingWebhook from 'components/integrations/components/abstract_incoming_webhook.jsx';\nimport LoadingScreen from 'components/loading_screen.jsx';\n\nconst HEADER = {id: 'integrations.edit', defaultMessage: 'Edit'};\nconst FOOTER = {id: 'update_incoming_webhook.update', defaultMessage: 'Update'};\n\nexport default class EditIncomingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The incoming webhook to edit\n        */\n        hook: PropTypes.object,\n\n        /**\n        * The id of the incoming webhook to edit\n        */\n        hookId: PropTypes.string.isRequired,\n\n        /**\n        * The request state for updateIncomingHook action. Contains status and error\n        */\n        updateIncomingHookRequest: PropTypes.object.isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to update an incoming webhook\n            */\n            updateIncomingHook: PropTypes.func.isRequired,\n\n            /**\n            * The function to call to get an incoming webhook\n            */\n            getIncomingHook: PropTypes.func.isRequired\n        }).isRequired\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showConfirmModal: false,\n            serverError: ''\n        };\n    }\n\n    componentDidMount() {\n        if (window.mm_config.EnableIncomingWebhooks === 'true') {\n            this.props.actions.getIncomingHook(this.props.hookId);\n        }\n    }\n\n    editIncomingHook = async (hook) => {\n        this.newHook = hook;\n\n        if (this.props.hook.id) {\n            hook.id = this.props.hook.id;\n        }\n\n        if (this.props.hook.token) {\n            hook.token = this.props.hook.token;\n        }\n\n        await this.submitHook();\n    }\n\n    submitHook = async () => {\n        this.setState({serverError: ''});\n\n        const {data} = await this.props.actions.updateIncomingHook(this.newHook);\n\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/incoming_webhooks`);\n            return;\n        }\n\n        if (this.props.updateIncomingHookRequest.error) {\n            this.setState({serverError: this.props.updateIncomingHookRequest.error.message});\n        }\n    }\n\n    render() {\n        if (!this.props.hook) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractIncomingWebhook\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                action={this.editIncomingHook}\n                serverError={this.state.serverError}\n                initialHook={this.props.hook}\n            />\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/integrations/components/edit_incoming_webhook/edit_incoming_webhook.jsx"],"sourceRoot":""}