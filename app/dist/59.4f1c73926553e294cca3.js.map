{"version":3,"sources":["webpack:///59.4f1c73926553e294cca3.js","webpack:///./components/authorize.jsx"],"names":["webpackJsonp","2154","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_createClass2","_createClass3","_inherits2","_inherits3","_propTypes","_propTypes2","_react","_react2","_reactIntl","_admin_actions","_icon50x","_icon50x2","_form_error","_form_error2","Authorize","_React$Component","props","this","_this","__proto__","call","handleAllow","bind","handleDeny","state","key","get","location","object","isRequired","params","_this2","clientId","query","client_id","test","getOAuthAppInfo","app","setState","blocker","document","getElementById","parentNode","removeChild","_this3","allowOAuth2","data","redirect","window","href","err","error","message","redirectUri","redirect_uri","startsWith","replace","icon","icon_url","createElement","className","src","width","height","alt","FormattedHTMLMessage","id","defaultMessage","values","appName","name","type","onClick","FormattedMessage","Component"],"mappings":"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","file":"59.4f1c73926553e294cca3.js","sourcesContent":["webpackJsonp([59],{\n\n/***/ 2154:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(6);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(4);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(7);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _createClass2 = __webpack_require__(5);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _inherits2 = __webpack_require__(8);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(17);\n\nvar _admin_actions = __webpack_require__(734);\n\nvar _icon50x = __webpack_require__(748);\n\nvar _icon50x2 = _interopRequireDefault(_icon50x);\n\nvar _form_error = __webpack_require__(238);\n\nvar _form_error2 = _interopRequireDefault(_form_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar Authorize = function (_React$Component) {\n    (0, _inherits3.default)(Authorize, _React$Component);\n    (0, _createClass3.default)(Authorize, null, [{\n        key: 'propTypes',\n        get: function get() {\n            return {\n                location: _propTypes2.default.object.isRequired,\n                params: _propTypes2.default.object.isRequired\n            };\n        }\n    }]);\n\n    function Authorize(props) {\n        (0, _classCallCheck3.default)(this, Authorize);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (Authorize.__proto__ || (0, _getPrototypeOf2.default)(Authorize)).call(this, props));\n\n        _this.handleAllow = _this.handleAllow.bind(_this);\n        _this.handleDeny = _this.handleDeny.bind(_this);\n\n        _this.state = {};\n        return _this;\n    }\n\n    (0, _createClass3.default)(Authorize, [{\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            var _this2 = this;\n\n            var clientId = this.props.location.query.client_id;\n            if (!/^[a-z0-9]+$/.test(clientId)) {\n                return;\n            }\n\n            (0, _admin_actions.getOAuthAppInfo)(clientId, function (app) {\n                _this2.setState({ app: app });\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            // if we get to this point remove the antiClickjack blocker\n            var blocker = document.getElementById('antiClickjack');\n            if (blocker) {\n                blocker.parentNode.removeChild(blocker);\n            }\n        }\n    }, {\n        key: 'handleAllow',\n        value: function handleAllow() {\n            var _this3 = this;\n\n            var params = this.props.location.query;\n\n            (0, _admin_actions.allowOAuth2)(params, function (data) {\n                if (data.redirect) {\n                    window.location.href = data.redirect;\n                }\n            }, function (err) {\n                _this3.setState({ error: err.message });\n            });\n        }\n    }, {\n        key: 'handleDeny',\n        value: function handleDeny() {\n            var redirectUri = this.props.location.query.redirect_uri;\n            if (redirectUri.startsWith('https://') || redirectUri.startsWith('http://')) {\n                window.location.replace(redirectUri + '?error=access_denied');\n                return;\n            }\n\n            window.location.replace('/error');\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var app = this.state.app;\n            if (!app) {\n                return null;\n            }\n\n            var icon = void 0;\n            if (app.icon_url) {\n                icon = app.icon_url;\n            } else {\n                icon = _icon50x2.default;\n            }\n\n            var error = void 0;\n            if (this.state.error) {\n                error = _react2.default.createElement(\n                    'div',\n                    { className: 'prompt__error form-group' },\n                    _react2.default.createElement(_form_error2.default, { error: this.state.error })\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'container-fluid' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'prompt' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'prompt__heading' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'prompt__app-icon' },\n                            _react2.default.createElement('img', {\n                                src: icon,\n                                width: '50',\n                                height: '50',\n                                alt: ''\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'text' },\n                            _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                                id: 'authorize.title',\n                                defaultMessage: '<strong>{appName}</strong> would like to connect to your <strong>Mattermost</strong> user account',\n                                values: {\n                                    appName: app.name\n                                }\n                            })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                            id: 'authorize.app',\n                            defaultMessage: 'The app <strong>{appName}</strong> would like the ability to access and modify your basic information.',\n                            values: {\n                                appName: app.name\n                            }\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'h2',\n                        { className: 'prompt__allow' },\n                        _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                            id: 'authorize.access',\n                            defaultMessage: 'Allow <strong>{appName}</strong> access?',\n                            values: {\n                                appName: app.name\n                            }\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'prompt__buttons' },\n                        _react2.default.createElement(\n                            'button',\n                            {\n                                type: 'submit',\n                                className: 'btn btn-link authorize-btn',\n                                onClick: this.handleDeny\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'authorize.deny',\n                                defaultMessage: 'Deny'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'button',\n                            {\n                                type: 'submit',\n                                className: 'btn btn-primary authorize-btn',\n                                onClick: this.handleAllow\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'authorize.allow',\n                                defaultMessage: 'Allow'\n                            })\n                        )\n                    ),\n                    error\n                )\n            );\n        }\n    }]);\n    return Authorize;\n}(_react2.default.Component);\n\nexports.default = Authorize;\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 59.4f1c73926553e294cca3.js","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedHTMLMessage, FormattedMessage} from 'react-intl';\n\nimport {allowOAuth2, getOAuthAppInfo} from 'actions/admin_actions.jsx';\n\nimport icon50 from 'images/icon50x50.png';\n\nimport FormError from 'components/form_error.jsx';\n\nexport default class Authorize extends React.Component {\n    static get propTypes() {\n        return {\n            location: PropTypes.object.isRequired,\n            params: PropTypes.object.isRequired\n        };\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.handleAllow = this.handleAllow.bind(this);\n        this.handleDeny = this.handleDeny.bind(this);\n\n        this.state = {};\n    }\n\n    componentWillMount() {\n        const clientId = this.props.location.query.client_id;\n        if (!(/^[a-z0-9]+$/.test(clientId))) {\n            return;\n        }\n\n        getOAuthAppInfo(\n            clientId,\n            (app) => {\n                this.setState({app});\n            }\n        );\n    }\n\n    componentDidMount() {\n        // if we get to this point remove the antiClickjack blocker\n        const blocker = document.getElementById('antiClickjack');\n        if (blocker) {\n            blocker.parentNode.removeChild(blocker);\n        }\n    }\n\n    handleAllow() {\n        const params = this.props.location.query;\n\n        allowOAuth2(params,\n            (data) => {\n                if (data.redirect) {\n                    window.location.href = data.redirect;\n                }\n            },\n            (err) => {\n                this.setState({error: err.message});\n            }\n        );\n    }\n\n    handleDeny() {\n        const redirectUri = this.props.location.query.redirect_uri;\n        if (redirectUri.startsWith('https://') || redirectUri.startsWith('http://')) {\n            window.location.replace(redirectUri + '?error=access_denied');\n            return;\n        }\n\n        window.location.replace('/error');\n    }\n\n    render() {\n        const app = this.state.app;\n        if (!app) {\n            return null;\n        }\n\n        let icon;\n        if (app.icon_url) {\n            icon = app.icon_url;\n        } else {\n            icon = icon50;\n        }\n\n        let error;\n        if (this.state.error) {\n            error = (\n                <div className='prompt__error form-group'>\n                    <FormError error={this.state.error}/>\n                </div>\n            );\n        }\n\n        return (\n            <div className='container-fluid'>\n                <div className='prompt'>\n                    <div className='prompt__heading'>\n                        <div className='prompt__app-icon'>\n                            <img\n                                src={icon}\n                                width='50'\n                                height='50'\n                                alt=''\n                            />\n                        </div>\n                        <div className='text'>\n                            <FormattedHTMLMessage\n                                id='authorize.title'\n                                defaultMessage='<strong>{appName}</strong> would like to connect to your <strong>Mattermost</strong> user account'\n                                values={{\n                                    appName: app.name\n                                }}\n                            />\n                        </div>\n                    </div>\n                    <p>\n                        <FormattedHTMLMessage\n                            id='authorize.app'\n                            defaultMessage='The app <strong>{appName}</strong> would like the ability to access and modify your basic information.'\n                            values={{\n                                appName: app.name\n                            }}\n                        />\n                    </p>\n                    <h2 className='prompt__allow'>\n                        <FormattedHTMLMessage\n                            id='authorize.access'\n                            defaultMessage='Allow <strong>{appName}</strong> access?'\n                            values={{\n                                appName: app.name\n                            }}\n                        />\n                    </h2>\n                    <div className='prompt__buttons'>\n                        <button\n                            type='submit'\n                            className='btn btn-link authorize-btn'\n                            onClick={this.handleDeny}\n                        >\n                            <FormattedMessage\n                                id='authorize.deny'\n                                defaultMessage='Deny'\n                            />\n                        </button>\n                        <button\n                            type='submit'\n                            className='btn btn-primary authorize-btn'\n                            onClick={this.handleAllow}\n                        >\n                            <FormattedMessage\n                                id='authorize.allow'\n                                defaultMessage='Allow'\n                            />\n                        </button>\n                    </div>\n                    {error}\n                </div>\n            </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/authorize.jsx"],"sourceRoot":""}