{"version":3,"sources":["webpack:///57.251cfe8786b15555d6d2.js","webpack:///./components/claim/components/email_to_ldap.jsx"],"names":["webpackJsonp","2107","module","exports","__webpack_require__","global","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_propTypes","_propTypes2","_react","_react2","_reactIntl","_admin_actions","_user_actions","_utils","Utils","newObj","key","prototype","hasOwnProperty","call","_login_mfa","_login_mfa2","EmailToLDAP","_React$Component","props","this","_this","__proto__","submit","bind","preSubmit","state","passwordError","ldapError","ldapPasswordError","serverError","showMfa","e","_this2","preventDefault","password","refs","emailpassword","localizeMessage","setState","ldapId","ldapid","trim","ldapPassword","ldappassword","checkMfa","email","requiresMfa","err","error","message","loginId","token","_this3","emailToLdap","data","follow_link","window","location","href","id","formClass","createElement","className","passwordClass","ldapClass","ldapPasswordClass","loginPlaceholder","mm_config","LdapLoginFieldName","passwordPlaceholder","LdapPasswordFieldName","content","onSubmit","FormattedMessage","defaultMessage","values","site","SiteName","type","style","display","name","ref","autoComplete","placeholder","spellCheck","Component","defaultProps","propTypes","string"],"mappings":"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","file":"57.251cfe8786b15555d6d2.js","sourcesContent":["webpackJsonp([57],{\n\n/***/ 2107:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(6);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(4);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(5);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(7);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(8);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(17);\n\nvar _admin_actions = __webpack_require__(734);\n\nvar _user_actions = __webpack_require__(69);\n\nvar _utils = __webpack_require__(16);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _login_mfa = __webpack_require__(2085);\n\nvar _login_mfa2 = _interopRequireDefault(_login_mfa);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EmailToLDAP = function (_React$Component) {\n    (0, _inherits3.default)(EmailToLDAP, _React$Component);\n\n    function EmailToLDAP(props) {\n        (0, _classCallCheck3.default)(this, EmailToLDAP);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (EmailToLDAP.__proto__ || (0, _getPrototypeOf2.default)(EmailToLDAP)).call(this, props));\n\n        _this.submit = _this.submit.bind(_this);\n        _this.preSubmit = _this.preSubmit.bind(_this);\n\n        _this.state = {\n            passwordError: '',\n            ldapError: '',\n            ldapPasswordError: '',\n            serverError: '',\n            showMfa: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(EmailToLDAP, [{\n        key: 'preSubmit',\n        value: function preSubmit(e) {\n            var _this2 = this;\n\n            e.preventDefault();\n\n            var state = {\n                passwordError: '',\n                ldapError: '',\n                ldapPasswordError: '',\n                serverError: ''\n            };\n\n            var password = this.refs.emailpassword.value;\n            if (!password) {\n                state.passwordError = Utils.localizeMessage('claim.email_to_ldap.pwdError', 'Please enter your password.');\n                this.setState(state);\n                return;\n            }\n\n            var ldapId = this.refs.ldapid.value.trim();\n            if (!ldapId) {\n                state.ldapError = Utils.localizeMessage('claim.email_to_ldap.ldapIdError', 'Please enter your AD/LDAP ID.');\n                this.setState(state);\n                return;\n            }\n\n            var ldapPassword = this.refs.ldappassword.value;\n            if (!ldapPassword) {\n                state.ldapPasswordError = Utils.localizeMessage('claim.email_to_ldap.ldapPasswordError', 'Please enter your AD/LDAP password.');\n                this.setState(state);\n                return;\n            }\n\n            state.password = password;\n            state.ldapId = ldapId;\n            state.ldapPassword = ldapPassword;\n            this.setState(state);\n\n            (0, _user_actions.checkMfa)(this.props.email, function (requiresMfa) {\n                if (requiresMfa) {\n                    _this2.setState({ showMfa: true });\n                } else {\n                    _this2.submit(_this2.props.email, password, '', ldapId, ldapPassword);\n                }\n            }, function (err) {\n                _this2.setState({ error: err.message });\n            });\n        }\n    }, {\n        key: 'submit',\n        value: function submit(loginId, password, token, ldapId, ldapPassword) {\n            var _this3 = this;\n\n            (0, _admin_actions.emailToLdap)(loginId, password, token, ldapId || this.state.ldapId, ldapPassword || this.state.ldapPassword, function (data) {\n                if (data.follow_link) {\n                    window.location.href = data.follow_link;\n                }\n            }, function (err) {\n                switch (err.id) {\n                    case 'ent.ldap.do_login.user_not_registered.app_error':\n                    case 'ent.ldap.do_login.user_filtered.app_error':\n                    case 'ent.ldap.do_login.matched_to_many_users.app_error':\n                        _this3.setState({ ldapError: err.message, showMfa: false });\n                        break;\n                    case 'ent.ldap.do_login.invalid_password.app_error':\n                        _this3.setState({ ldapPasswordError: err.message, showMfa: false });\n                        break;\n                    case 'api.user.check_user_password.invalid.app_error':\n                        _this3.setState({ passwordError: err.message, showMfa: false });\n                        break;\n                    default:\n                        _this3.setState({ serverError: err.message, showMfa: false });\n                }\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var serverError = null;\n            var formClass = 'form-group';\n            if (this.state.serverError) {\n                serverError = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.serverError\n                    )\n                );\n                formClass += ' has-error';\n            }\n\n            var passwordError = null;\n            var passwordClass = 'form-group';\n            if (this.state.passwordError) {\n                passwordError = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.passwordError\n                    )\n                );\n                passwordClass += ' has-error';\n            }\n\n            var ldapError = null;\n            var ldapClass = 'form-group';\n            if (this.state.ldapError) {\n                ldapError = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.ldapError\n                    )\n                );\n                ldapClass += ' has-error';\n            }\n\n            var ldapPasswordError = null;\n            var ldapPasswordClass = 'form-group';\n            if (this.state.ldapPasswordError) {\n                ldapPasswordError = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.ldapPasswordError\n                    )\n                );\n                ldapPasswordClass += ' has-error';\n            }\n\n            var loginPlaceholder = void 0;\n            if (global.window.mm_config.LdapLoginFieldName) {\n                loginPlaceholder = global.window.mm_config.LdapLoginFieldName;\n            } else {\n                loginPlaceholder = Utils.localizeMessage('claim.email_to_ldap.ldapId', 'AD/LDAP ID');\n            }\n\n            var passwordPlaceholder = void 0;\n            if (global.window.mm_config.LdapPasswordFieldName) {\n                passwordPlaceholder = global.window.mm_config.LdapPasswordFieldName;\n            } else {\n                passwordPlaceholder = Utils.localizeMessage('claim.email_to_ldap.ldapPwd', 'AD/LDAP Password');\n            }\n\n            var content = void 0;\n            if (this.state.showMfa) {\n                content = _react2.default.createElement(_login_mfa2.default, {\n                    loginId: this.props.email,\n                    password: this.state.password,\n                    submit: this.submit\n                });\n            } else {\n                content = _react2.default.createElement(\n                    'form',\n                    {\n                        onSubmit: this.preSubmit,\n                        className: formClass\n                    },\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.email_to_ldap.ssoType',\n                            defaultMessage: 'Upon claiming your account, you will only be able to login with AD/LDAP'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.email_to_ldap.ssoNote',\n                            defaultMessage: 'You must already have a valid AD/LDAP account'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.email_to_ldap.enterPwd',\n                            defaultMessage: 'Enter the password for your {site} email account',\n                            values: {\n                                site: global.window.mm_config.SiteName\n                            }\n                        })\n                    ),\n                    _react2.default.createElement('input', {\n                        type: 'text',\n                        style: { display: 'none' },\n                        name: 'fakeusernameremembered'\n                    }),\n                    _react2.default.createElement(\n                        'div',\n                        { className: passwordClass },\n                        _react2.default.createElement('input', {\n                            type: 'password',\n                            className: 'form-control',\n                            name: 'emailPassword',\n                            ref: 'emailpassword',\n                            autoComplete: 'off',\n                            placeholder: Utils.localizeMessage('claim.email_to_ldap.pwd', 'Password'),\n                            spellCheck: 'false'\n                        })\n                    ),\n                    passwordError,\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.email_to_ldap.enterLdapPwd',\n                            defaultMessage: 'Enter the ID and password for your AD/LDAP account'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: ldapClass },\n                        _react2.default.createElement('input', {\n                            type: 'text',\n                            className: 'form-control',\n                            name: 'ldapId',\n                            ref: 'ldapid',\n                            autoComplete: 'off',\n                            placeholder: loginPlaceholder,\n                            spellCheck: 'false'\n                        })\n                    ),\n                    ldapError,\n                    _react2.default.createElement(\n                        'div',\n                        { className: ldapPasswordClass },\n                        _react2.default.createElement('input', {\n                            type: 'password',\n                            className: 'form-control',\n                            name: 'ldapPassword',\n                            ref: 'ldappassword',\n                            autoComplete: 'off',\n                            placeholder: passwordPlaceholder,\n                            spellCheck: 'false'\n                        })\n                    ),\n                    ldapPasswordError,\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            type: 'submit',\n                            className: 'btn btn-primary'\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.email_to_ldap.switchTo',\n                            defaultMessage: 'Switch account to AD/LDAP'\n                        })\n                    ),\n                    serverError\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'h3',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'claim.email_to_ldap.title',\n                        defaultMessage: 'Switch Email/Password Account to AD/LDAP'\n                    })\n                ),\n                content\n            );\n        }\n    }]);\n    return EmailToLDAP;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = EmailToLDAP;\n\n\nEmailToLDAP.defaultProps = {};\nEmailToLDAP.propTypes = {\n    email: _propTypes2.default.string\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(22)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 57.251cfe8786b15555d6d2.js","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {emailToLdap} from 'actions/admin_actions.jsx';\nimport {checkMfa} from 'actions/user_actions.jsx';\n\nimport * as Utils from 'utils/utils.jsx';\n\nimport LoginMfa from 'components/login/components/login_mfa.jsx';\n\nexport default class EmailToLDAP extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.submit = this.submit.bind(this);\n        this.preSubmit = this.preSubmit.bind(this);\n\n        this.state = {\n            passwordError: '',\n            ldapError: '',\n            ldapPasswordError: '',\n            serverError: '',\n            showMfa: false\n        };\n    }\n\n    preSubmit(e) {\n        e.preventDefault();\n\n        var state = {\n            passwordError: '',\n            ldapError: '',\n            ldapPasswordError: '',\n            serverError: ''\n        };\n\n        const password = this.refs.emailpassword.value;\n        if (!password) {\n            state.passwordError = Utils.localizeMessage('claim.email_to_ldap.pwdError', 'Please enter your password.');\n            this.setState(state);\n            return;\n        }\n\n        const ldapId = this.refs.ldapid.value.trim();\n        if (!ldapId) {\n            state.ldapError = Utils.localizeMessage('claim.email_to_ldap.ldapIdError', 'Please enter your AD/LDAP ID.');\n            this.setState(state);\n            return;\n        }\n\n        const ldapPassword = this.refs.ldappassword.value;\n        if (!ldapPassword) {\n            state.ldapPasswordError = Utils.localizeMessage('claim.email_to_ldap.ldapPasswordError', 'Please enter your AD/LDAP password.');\n            this.setState(state);\n            return;\n        }\n\n        state.password = password;\n        state.ldapId = ldapId;\n        state.ldapPassword = ldapPassword;\n        this.setState(state);\n\n        checkMfa(\n            this.props.email,\n            (requiresMfa) => {\n                if (requiresMfa) {\n                    this.setState({showMfa: true});\n                } else {\n                    this.submit(this.props.email, password, '', ldapId, ldapPassword);\n                }\n            },\n            (err) => {\n                this.setState({error: err.message});\n            }\n        );\n    }\n\n    submit(loginId, password, token, ldapId, ldapPassword) {\n        emailToLdap(\n            loginId,\n            password,\n            token,\n            ldapId || this.state.ldapId,\n            ldapPassword || this.state.ldapPassword,\n            (data) => {\n                if (data.follow_link) {\n                    window.location.href = data.follow_link;\n                }\n            },\n            (err) => {\n                switch (err.id) {\n                case 'ent.ldap.do_login.user_not_registered.app_error':\n                case 'ent.ldap.do_login.user_filtered.app_error':\n                case 'ent.ldap.do_login.matched_to_many_users.app_error':\n                    this.setState({ldapError: err.message, showMfa: false});\n                    break;\n                case 'ent.ldap.do_login.invalid_password.app_error':\n                    this.setState({ldapPasswordError: err.message, showMfa: false});\n                    break;\n                case 'api.user.check_user_password.invalid.app_error':\n                    this.setState({passwordError: err.message, showMfa: false});\n                    break;\n                default:\n                    this.setState({serverError: err.message, showMfa: false});\n                }\n            }\n        );\n    }\n\n    render() {\n        let serverError = null;\n        let formClass = 'form-group';\n        if (this.state.serverError) {\n            serverError = <div className='form-group has-error'><label className='control-label'>{this.state.serverError}</label></div>;\n            formClass += ' has-error';\n        }\n\n        let passwordError = null;\n        let passwordClass = 'form-group';\n        if (this.state.passwordError) {\n            passwordError = <div className='form-group has-error'><label className='control-label'>{this.state.passwordError}</label></div>;\n            passwordClass += ' has-error';\n        }\n\n        let ldapError = null;\n        let ldapClass = 'form-group';\n        if (this.state.ldapError) {\n            ldapError = <div className='form-group has-error'><label className='control-label'>{this.state.ldapError}</label></div>;\n            ldapClass += ' has-error';\n        }\n\n        let ldapPasswordError = null;\n        let ldapPasswordClass = 'form-group';\n        if (this.state.ldapPasswordError) {\n            ldapPasswordError = <div className='form-group has-error'><label className='control-label'>{this.state.ldapPasswordError}</label></div>;\n            ldapPasswordClass += ' has-error';\n        }\n\n        let loginPlaceholder;\n        if (global.window.mm_config.LdapLoginFieldName) {\n            loginPlaceholder = global.window.mm_config.LdapLoginFieldName;\n        } else {\n            loginPlaceholder = Utils.localizeMessage('claim.email_to_ldap.ldapId', 'AD/LDAP ID');\n        }\n\n        let passwordPlaceholder;\n        if (global.window.mm_config.LdapPasswordFieldName) {\n            passwordPlaceholder = global.window.mm_config.LdapPasswordFieldName;\n        } else {\n            passwordPlaceholder = Utils.localizeMessage('claim.email_to_ldap.ldapPwd', 'AD/LDAP Password');\n        }\n\n        let content;\n        if (this.state.showMfa) {\n            content = (\n                <LoginMfa\n                    loginId={this.props.email}\n                    password={this.state.password}\n                    submit={this.submit}\n                />\n            );\n        } else {\n            content = (\n                <form\n                    onSubmit={this.preSubmit}\n                    className={formClass}\n                >\n                    <p>\n                        <FormattedMessage\n                            id='claim.email_to_ldap.ssoType'\n                            defaultMessage='Upon claiming your account, you will only be able to login with AD/LDAP'\n                        />\n                    </p>\n                    <p>\n                        <FormattedMessage\n                            id='claim.email_to_ldap.ssoNote'\n                            defaultMessage='You must already have a valid AD/LDAP account'\n                        />\n                    </p>\n                    <p>\n                        <FormattedMessage\n                            id='claim.email_to_ldap.enterPwd'\n                            defaultMessage='Enter the password for your {site} email account'\n                            values={{\n                                site: global.window.mm_config.SiteName\n                            }}\n                        />\n                    </p>\n                    <input\n                        type='text'\n                        style={{display: 'none'}}\n                        name='fakeusernameremembered'\n                    />\n                    <div className={passwordClass}>\n                        <input\n                            type='password'\n                            className='form-control'\n                            name='emailPassword'\n                            ref='emailpassword'\n                            autoComplete='off'\n                            placeholder={Utils.localizeMessage('claim.email_to_ldap.pwd', 'Password')}\n                            spellCheck='false'\n                        />\n                    </div>\n                    {passwordError}\n                    <p>\n                        <FormattedMessage\n                            id='claim.email_to_ldap.enterLdapPwd'\n                            defaultMessage='Enter the ID and password for your AD/LDAP account'\n                        />\n                    </p>\n                    <div className={ldapClass}>\n                        <input\n                            type='text'\n                            className='form-control'\n                            name='ldapId'\n                            ref='ldapid'\n                            autoComplete='off'\n                            placeholder={loginPlaceholder}\n                            spellCheck='false'\n                        />\n                    </div>\n                    {ldapError}\n                    <div className={ldapPasswordClass}>\n                        <input\n                            type='password'\n                            className='form-control'\n                            name='ldapPassword'\n                            ref='ldappassword'\n                            autoComplete='off'\n                            placeholder={passwordPlaceholder}\n                            spellCheck='false'\n                        />\n                    </div>\n                    {ldapPasswordError}\n                    <button\n                        type='submit'\n                        className='btn btn-primary'\n                    >\n                        <FormattedMessage\n                            id='claim.email_to_ldap.switchTo'\n                            defaultMessage='Switch account to AD/LDAP'\n                        />\n                    </button>\n                    {serverError}\n                </form>\n            );\n        }\n\n        return (\n            <div>\n                <h3>\n                    <FormattedMessage\n                        id='claim.email_to_ldap.title'\n                        defaultMessage='Switch Email/Password Account to AD/LDAP'\n                    />\n                </h3>\n                {content}\n            </div>\n        );\n    }\n}\n\nEmailToLDAP.defaultProps = {\n};\nEmailToLDAP.propTypes = {\n    email: PropTypes.string\n};\n\n\n\n// WEBPACK FOOTER //\n// ./components/claim/components/email_to_ldap.jsx"],"sourceRoot":""}