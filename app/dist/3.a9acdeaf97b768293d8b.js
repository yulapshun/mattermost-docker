webpackJsonp([3],{2378:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(6),s=n(o),l=a(4),d=n(l),u=a(7),i=n(u),r=a(5),f=n(r),c=a(8),h=n(c),m=a(2),g=n(m),p=a(1),k=n(p),_=a(17),b=a(44),v=a(2379),M=n(v),y=a(25),E=n(y),w=a(9),H=n(w),A=a(240),O=n(A),L=function(e){function t(e){(0,d.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));a.handleIntegrationChange=a.handleIntegrationChange.bind(a),a.handleKeyPress=a.handleKeyPress.bind(a);var n=E.default.getCurrentId();return a.state={type:a.props.location.query.type,id:a.props.location.query.id,oauthApps:M.default.getOAuthApps(n),loading:!M.default.hasReceivedOAuthApps(n)},a}return(0,h.default)(t,e),(0,f.default)(t,null,[{key:"propTypes",get:function(){return{team:g.default.object,location:g.default.object,commands:g.default.object,loading:g.default.bool}}}]),(0,f.default)(t,[{key:"componentDidMount",value:function(){M.default.addChangeListener(this.handleIntegrationChange),window.addEventListener("keypress",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){M.default.removeChangeListener(this.handleIntegrationChange),window.removeEventListener("keypress",this.handleKeyPress)}},{key:"handleIntegrationChange",value:function(){var e=E.default.getCurrentId();this.setState({oauthApps:M.default.getOAuthApps(e),loading:!M.default.hasReceivedOAuthApps(e)})}},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&b.browserHistory.push("/"+this.props.team.name+"/integrations/"+this.state.type)}},{key:"render",value:function(){var e=null,t=null,a=null;if(!0===this.props.loading)return k.default.createElement("div",null);if(this.state.type===H.default.Integrations.COMMAND)e=k.default.createElement(_.FormattedMessage,{id:"installed_commands.header",defaultMessage:"Slash Commands"}),t=k.default.createElement("p",null,k.default.createElement(_.FormattedHTMLMessage,{id:"add_command.doneHelp",defaultMessage:'Your slash command has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (see <a href="https://docs.mattermost.com/developer/slash-commands.html">documentation</a> for further details).'})),a=k.default.createElement("p",{className:"word-break--all"},k.default.createElement(_.FormattedHTMLMessage,{id:"add_command.token",defaultMessage:"<b>Token</b>: {token}",values:{token:this.props.commands[this.state.id].token}}));else if(this.state.type===H.default.Integrations.INCOMING_WEBHOOK)e=k.default.createElement(_.FormattedMessage,{id:"installed_incoming_webhooks.header",defaultMessage:"Incoming Webhooks"}),t=k.default.createElement("p",null,k.default.createElement(_.FormattedHTMLMessage,{id:"add_incoming_webhook.doneHelp",defaultMessage:'Your incoming webhook has been set up. Please send data to the following URL (see <a href=\\"https://docs.mattermost.com/developer/webhooks-incoming.html\\">documentation</a> for further details).'})),a=k.default.createElement("p",{className:"word-break--all"},k.default.createElement(_.FormattedHTMLMessage,{id:"add_incoming_webhook.url",defaultMessage:"<b>URL</b>: {url}",values:{url:window.location.origin+"/hooks/"+this.state.id}}));else if(this.state.type===H.default.Integrations.OUTGOING_WEBHOOK)e=k.default.createElement(_.FormattedMessage,{id:"installed_outgoing_webhooks.header",defaultMessage:"Outgoing Webhooks"}),t=k.default.createElement("p",null,k.default.createElement(_.FormattedHTMLMessage,{id:"add_outgoing_webhook.doneHelp",defaultMessage:'Your outgoing webhook has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (see <a href=\\"https://docs.mattermost.com/developer/webhooks-outgoing.html\\">documentation</a> for further details).'})),a=k.default.createElement("p",{className:"word-break--all"},k.default.createElement(_.FormattedHTMLMessage,{id:"add_outgoing_webhook.token",defaultMessage:"<b>Token</b>: {token}",values:{token:M.default.getOutgoingWebhook(this.props.team.id,this.state.id).token}}));else if(this.state.type===H.default.Integrations.OAUTH_APP){for(var n={},o=0;o<this.state.oauthApps.length;o++)if(this.state.oauthApps[o].id===this.state.id){n=this.state.oauthApps[o];break}n&&(e=k.default.createElement(_.FormattedMessage,{id:"installed_oauth_apps.header",defaultMessage:"OAuth 2.0 Applications"}),t=[],t.push(k.default.createElement("p",{key:"add_oauth_app.doneHelp"},k.default.createElement(_.FormattedHTMLMessage,{id:"add_oauth_app.doneHelp",defaultMessage:'Your OAuth 2.0 application has been set up. Please use the following Client ID and Client Secret when requesting authorization for your application (see <a href="https://docs.mattermost.com/developer/oauth-2-0-applications.html">documentation</a> for further details).'}))),t.push(k.default.createElement("p",{key:"add_oauth_app.clientId"},k.default.createElement(_.FormattedHTMLMessage,{id:"add_oauth_app.clientId",defaultMessage:"<b>Client ID:</b> {id}",values:{id:this.state.id}})," ",k.default.createElement("br",null),k.default.createElement(_.FormattedHTMLMessage,{id:"add_oauth_app.clientSecret",defaultMessage:"<b>Client Secret:</b> {secret}",values:{secret:n.client_secret}}))),t.push(k.default.createElement("p",{key:"add_oauth_app.doneUrlHelp"},k.default.createElement(_.FormattedHTMLMessage,{id:"add_oauth_app.doneUrlHelp",defaultMessage:"The following are your authorized redirect URL(s)."}))),a=k.default.createElement("p",{className:"word-break--all"},k.default.createElement(_.FormattedHTMLMessage,{id:"add_oauth_app.url",defaultMessage:"<b>URL(s)</b>: {url}",values:{url:n.callback_urls}})))}return k.default.createElement("div",{className:"backstage-content row"},k.default.createElement(O.default,null,k.default.createElement(b.Link,{to:"/"+this.props.team.name+"/integrations/"+this.state.type},e),k.default.createElement(_.FormattedMessage,{id:"integrations.add",defaultMessage:"Add"})),k.default.createElement("div",{className:"backstage-form backstage-form__confirmation"},k.default.createElement("h4",{className:"backstage-form__title"},k.default.createElement(_.FormattedMessage,{id:"integrations.successful",defaultMessage:"Setup Successful"})),t,a,k.default.createElement("div",{className:"backstage-form__footer"},k.default.createElement(b.Link,{className:"btn btn-primary",type:"submit",to:"/"+this.props.team.name+"/integrations/"+this.state.type},k.default.createElement(_.FormattedMessage,{id:"integrations.done",defaultMessage:"Done"})))))}}]),t}(k.default.Component);t.default=L},2379:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(59),s=n(o),l=a(310),d=n(l),u=a(6),i=n(u),r=a(4),f=n(r),c=a(5),h=n(c),m=a(7),g=n(m),p=a(8),k=n(p),_=a(57),b=n(_),v=a(38),M=n(v),y=function(e){function t(){(0,f.default)(this,t);var e=(0,g.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return e.entities={},M.default.subscribe(function(){var t=M.default.getState().entities.integrations;t!==e.entities&&e.emitChange(),e.entities=t}),e}return(0,k.default)(t,e),(0,h.default)(t,[{key:"addChangeListener",value:function(e){this.on("changed",e)}},{key:"removeChangeListener",value:function(e){this.removeListener("changed",e)}},{key:"emitChange",value:function(){this.emit("changed")}},{key:"hasReceivedIncomingWebhooks",value:function(e){var t=M.default.getState().entities.integrations.incomingHooks||{},a=!1;return(0,d.default)(t).forEach(function(t){t.team_id===e&&(a=!0)}),a}},{key:"getIncomingWebhooks",value:function(e){var t=M.default.getState().entities.integrations.incomingHooks,a=[];return(0,d.default)(t).forEach(function(t){t.team_id===e&&a.push(t)}),a}},{key:"hasReceivedOutgoingWebhooks",value:function(e){var t=M.default.getState().entities.integrations.outgoingHooks,a=!1;return(0,d.default)(t).forEach(function(t){t.team_id===e&&(a=!0)}),a}},{key:"getOutgoingWebhooks",value:function(e){var t=M.default.getState().entities.integrations.outgoingHooks,a=[];return(0,d.default)(t).forEach(function(t){t.team_id===e&&a.push(t)}),a}},{key:"getOutgoingWebhook",value:function(e,t){return M.default.getState().entities.integrations.outgoingHooks[t]}},{key:"hasReceivedOAuthApps",value:function(){return(0,s.default)(M.default.getState().entities.integrations.oauthApps).length>0}},{key:"getOAuthApps",value:function(){return(0,d.default)(M.default.getState().entities.integrations.oauthApps)}}]),t}(b.default);t.default=new y},772:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return(0,l.default)({},t,{commands:(0,u.getCommands)(e)})}Object.defineProperty(t,"__esModule",{value:!0});var s=a(19),l=n(s),d=a(31),u=a(2084),i=a(2378),r=n(i);t.default=(0,d.connect)(o)(r.default)}});
//# sourceMappingURL=3.a9acdeaf97b768293d8b.js.map