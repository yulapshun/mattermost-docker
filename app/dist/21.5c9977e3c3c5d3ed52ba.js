webpackJsonp([21],{2133:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var a=t.location.query.id;return(0,s.default)({},t,{commandId:a,commands:(0,l.getCommands)(e),editCommandRequest:e.requests.integrations.editCommand})}function r(e){return{actions:(0,m.bindActionCreators)({getCustomTeamCommands:u.getCustomTeamCommands,editCommand:u.editCommand},e)}}Object.defineProperty(t,"__esModule",{value:!0});var d=a(19),s=n(d),i=a(31),m=a(20),u=a(735),l=a(2084),f=a(2377),c=n(f);t.default=(0,i.connect)(o,r)(c.default)},2377:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(310),r=n(o),d=a(76),s=n(d),i=a(77),m=n(i),u=a(6),l=n(u),f=a(4),c=n(f),C=a(5),p=n(C),g=a(7),h=n(g),M=a(8),v=n(M),w=a(2),b=n(w),E=a(1),_=n(E),q=a(17),x=a(44),y=a(236),k=n(y),R=a(311),S=n(R),T=a(2093),j=n(T),D={id:"integrations.edit",defaultMessage:"Edit"},F={id:"edit_command.save",defaultMessage:"Update"},I=function(e){function t(e){var a=this;(0,c.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return n.editCommand=function(){var e=(0,m.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.newCommand=t,n.state.originalCommand.id&&(t.id=n.state.originalCommand.id),n.state.originalCommand.url===n.newCommand.url&&n.state.originalCommand.trigger===n.newCommand.trigger&&n.state.originalCommand.method===n.newCommand.method){e.next=6;break}n.handleConfirmModal(),e.next=8;break;case 6:return e.next=8,n.submitCommand();case 8:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}(),n.handleConfirmModal=function(){n.setState({showConfirmModal:!0})},n.confirmModalDismissed=function(){n.setState({showConfirmModal:!1})},n.submitCommand=(0,m.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({serverError:""}),e.next=3,n.props.actions.editCommand(n.newCommand);case 3:if(!(t=e.sent)){e.next=7;break}return x.browserHistory.push("/"+n.props.team.name+"/integrations/commands"),e.abrupt("return");case 7:n.setState({showConfirmModal:!1}),n.props.editCommandRequest.error&&n.setState({serverError:n.props.editCommandRequest.error.message});case 9:case"end":return e.stop()}},e,a)})),n.renderExtra=function(){var e=_.default.createElement(q.FormattedMessage,{id:"update_command.update",defaultMessage:"Update"}),t=_.default.createElement(q.FormattedMessage,{id:"update_command.confirm",defaultMessage:"Edit Slash Command"}),a=_.default.createElement(q.FormattedMessage,{id:"update_command.question",defaultMessage:"Your changes may break the existing slash command. Are you sure you would like to update it?"});return _.default.createElement(S.default,{title:t,message:a,confirmButtonText:e,show:n.state.showConfirmModal,onConfirm:n.submitCommand,onCancel:n.confirmModalDismissed})},n.state={originalCommand:null,showConfirmModal:!1,serverError:""},n}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this;"true"===window.mm_config.EnableCommands&&this.props.actions.getCustomTeamCommands(this.props.team.id).then(function(){e.setState({originalCommand:(0,r.default)(e.props.commands).filter(function(t){return t.id===e.props.commandId})[0]})})}},{key:"render",value:function(){return this.state.originalCommand?_.default.createElement(j.default,{team:this.props.team,header:D,footer:F,renderExtra:this.renderExtra(),action:this.editCommand,serverError:this.state.serverError,initialCommand:this.state.originalCommand}):_.default.createElement(k.default,null)}}]),t}(_.default.PureComponent);I.propTypes={team:b.default.object.isRequired,commandId:b.default.string.isRequired,commands:b.default.object,editCommandRequest:b.default.object.isRequired,actions:b.default.shape({getCustomTeamCommands:b.default.func.isRequired,editCommand:b.default.func.isRequired}).isRequired},t.default=I}});
//# sourceMappingURL=21.5c9977e3c3c5d3ed52ba.js.map