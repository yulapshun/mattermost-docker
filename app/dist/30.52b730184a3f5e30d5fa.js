webpackJsonp([30],{2144:function(e,a,t){"use strict";(function(e){function n(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var s=t(6),i=l(s),d=t(4),r=l(d),o=t(7),u=l(o),c=t(5),m=l(c),p=t(8),f=l(p),g=t(2),h=l(g),v=t(1),w=l(v),_=t(17),y=t(44),E=t(237),L=t(56),S=n(L),P=t(435),M=t(69),b=t(16),N=n(b),k=t(2081),C=l(k),I=t(2082),T=l(I),D=t(238),F=l(D),A=function(a){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleLdapSignup=a.handleLdapSignup.bind(a),a.handleLdapSignupSuccess=a.handleLdapSignupSuccess.bind(a),a.handleLdapIdChange=a.handleLdapIdChange.bind(a),a.handleLdapPasswordChange=a.handleLdapPasswordChange.bind(a),a.state={ldapError:"",ldapId:"",ldapPassword:""},a}return(0,f.default)(t,a),(0,m.default)(t,null,[{key:"propTypes",get:function(){return{location:h.default.object}}}]),(0,m.default)(t,[{key:"componentDidMount",value:function(){(0,E.trackEvent)("signup","signup_user_01_welcome")}},{key:"handleLdapIdChange",value:function(e){this.setState({ldapId:e.target.value})}},{key:"handleLdapPasswordChange",value:function(e){this.setState({ldapPassword:e.target.value})}},{key:"handleLdapSignup",value:function(e){var a=this;e.preventDefault(),this.setState({ldapError:""}),(0,M.webLoginByLdap)(this.state.ldapId,this.state.ldapPassword,null,this.handleLdapSignupSuccess,function(e){a.setState({ldapError:e.message})})}},{key:"handleLdapSignupSuccess",value:function(){var e=this,a=this.props.location.query.h,t=this.props.location.query.d,n=this.props.location.query.id;n||a?(0,P.addUserToTeamFromInvite)(t,a,n,function(){e.finishSignup()},function(){e.finishSignup()}):this.finishSignup()}},{key:"finishSignup",value:function(){var e=this;(0,M.loadMe)().then(function(){var a=e.props.location.query;S.loadDefaultLocale(),a.redirect_to?y.browserHistory.push(a.redirect_to):S.redirectUserToDefaultTeam()})}},{key:"render",value:function(){var a=void 0;a=e.window.mm_config.LdapLoginFieldName?e.window.mm_config.LdapLoginFieldName:N.localizeMessage("login.ldapUsername","AD/LDAP Username");var t="";this.state.ldapError&&(t+=" has-error");var n=void 0;if("true"!==e.window.mm_config.EnableLdap||"true"!==e.window.mm_license.IsLicensed||!e.window.mm_license.LDAP)return null;n=w.default.createElement("div",{className:"inner__content"},w.default.createElement("h5",null,w.default.createElement("strong",null,w.default.createElement(_.FormattedMessage,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"}))),w.default.createElement("form",{onSubmit:this.handleLdapSignup},w.default.createElement("div",{className:"signup__email-container"},w.default.createElement(F.default,{error:this.state.ldapError,margin:!0}),w.default.createElement("div",{className:"form-group"+t},w.default.createElement("input",{className:"form-control",name:"ldapId",value:this.state.ldapId,placeholder:a,onChange:this.handleLdapIdChange,spellCheck:"false",autoCapitalize:"off"})),w.default.createElement("div",{className:"form-group"+t},w.default.createElement("input",{type:"password",className:"form-control",name:"password",value:this.state.ldapPassword,placeholder:N.localizeMessage("login.password","Password"),onChange:this.handleLdapPasswordChange,spellCheck:"false"})),w.default.createElement("div",{className:"form-group"},w.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!this.state.ldapId||!this.state.ldapPassword},w.default.createElement(_.FormattedMessage,{id:"login.signIn",defaultMessage:"Sign in"}))))));var l=null;n&&(l=w.default.createElement("p",null,w.default.createElement(_.FormattedHTMLMessage,{id:"create_team.agreement",defaultMessage:"By proceeding to create your account and use {siteName}, you agree to our <a href='{TermsOfServiceLink}'>Terms of Service</a> and <a href='{PrivacyPolicyLink}'>Privacy Policy</a>. If you do not agree, you cannot use {siteName}.",values:{siteName:e.window.mm_config.SiteName,TermsOfServiceLink:e.window.mm_config.TermsOfServiceLink,PrivacyPolicyLink:e.window.mm_config.PrivacyPolicyLink}})));var s=null;return s="true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_license.CustomBrand&&"true"===e.window.mm_config.EnableCustomBrand?e.window.mm_config.CustomDescriptionText:w.default.createElement(_.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),w.default.createElement("div",null,w.default.createElement(T.default,null),w.default.createElement("div",{className:"col-sm-12"},w.default.createElement("div",{className:"signup-team__container padding--less"},w.default.createElement("img",{className:"signup-team-logo",src:C.default}),w.default.createElement("h1",null,e.window.mm_config.SiteName),w.default.createElement("h4",{className:"color--light"},s),w.default.createElement("h4",{className:"color--light"},w.default.createElement(_.FormattedMessage,{id:"signup_user_completed.lets",defaultMessage:"Let's create your account"})),w.default.createElement("span",{className:"color--light"},w.default.createElement(_.FormattedMessage,{id:"signup_user_completed.haveAccount",defaultMessage:"Already have an account?"})," ",w.default.createElement(y.Link,{to:"/login",query:this.props.location.query},w.default.createElement(_.FormattedMessage,{id:"signup_user_completed.signIn",defaultMessage:"Click here to sign in."}))),n,l)))}}]),t}(w.default.Component);a.default=A}).call(a,t(22))}});
//# sourceMappingURL=30.52b730184a3f5e30d5fa.js.map