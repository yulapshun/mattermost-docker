webpackJsonp([1],{2482:function(e,t,a){"use strict";(function(e){function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(41),i=s(n),l=a(156),r=s(l),o=a(6),u=s(o),d=a(4),m=s(d),c=a(5),f=s(c),h=a(7),p=s(h),b=a(8),v=s(b),_=a(0),g=s(_),y=a(2),M=s(y),w=a(1),S=s(w),E=a(17),C=a(35),T=s(C),k=a(25),N=s(k),L=a(740),O=a(16),D=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(O),R=a(2483),z=s(R),F=function(t){function a(e){(0,m.default)(this,a);var t=(0,p.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));return t.getStateFromStores=t.getStateFromStores.bind(t),t.onChange=t.onChange.bind(t),t.handleResize=t.handleResize.bind(t),t.setStyles=t.setStyles.bind(t),t.state=t.getStateFromStores(),t}return(0,v.default)(a,t),(0,f.default)(a,[{key:"getStateFromStores",value:function(){var e=T.default.getMyTeamMembers(),t=T.default.getCurrentId();return{teams:T.default.getAll(),teamListings:T.default.getTeamListings(),teamMembers:e,currentTeamId:t,show:e&&e.length>1,isMobile:D.isMobile()}}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),T.default.addChangeListener(this.onChange),T.default.addUnreadChangeListener(this.onChange),this.props.actions.getTeams(0,200),this.setStyles()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),T.default.removeChangeListener(this.onChange),T.default.removeUnreadChangeListener(this.onChange)}},{key:"componentDidUpdate",value:function(e,t){this.state.isMobile||(0,g.default)(".team-wrapper").perfectScrollbar(),this.state.currentTeam!==t.currentTeam&&(this.refs.container.scrollTop=0,this.state.isMobile||(0,g.default)(".team-wrapper").perfectScrollbar("update"))}},{key:"onChange",value:function(){this.setState(this.getStateFromStores()),this.setStyles()}},{key:"handleResize",value:function(){var e=this.state.teamMembers;this.setState({show:e&&e.length>1}),this.setStyles()}},{key:"setStyles",value:function(){var e=document.querySelector("#root");this.state.show?e.classList.add("multi-teams"):e.classList.remove("multi-teams")}},{key:"render",value:function(){var t=this;if(!this.state.show)return null;var a=[],s=D.isSystemAdmin(N.default.getCurrentUser().roles),n=new r.default,l=!1;for(var o in this.state.teamMembers)if(this.state.teamMembers.hasOwnProperty(o)){var u=this.state.teamMembers[o];if(u.delete_at>0)continue;var d=u.team_id;a.push((0,i.default)({unread:u.msg_count>0,mentions:u.mention_count},this.state.teams[d])),n[d]=!0}for(var m in this.state.teamListings)if(this.state.teamListings.hasOwnProperty(m)&&!n[m]){l=!0;break}var c=a.sort(L.sortTeamsByDisplayName).map(function(e){return S.default.createElement(z.default,{key:"switch_team_"+e.name,url:"/"+e.name,tip:e.display_name,active:e.id===t.state.currentTeamId,isMobile:t.state.isMobile,displayName:e.display_name,unread:e.unread,mentions:e.mentions})});return l?c.push(S.default.createElement(z.default,{btnClass:"team-btn__add",key:"more_teams",url:"/select_team",isMobile:this.state.isMobile,tip:S.default.createElement(E.FormattedMessage,{id:"team_sidebar.join",defaultMessage:"Other teams you can join."}),content:S.default.createElement("i",{className:"fa fa-plus"})})):("true"===e.window.mm_config.EnableTeamCreation||s)&&c.push(S.default.createElement(z.default,{btnClass:"team-btn__add",key:"more_teams",url:"/create_team",isMobile:this.state.isMobile,tip:S.default.createElement(E.FormattedMessage,{id:"navbar_dropdown.create",defaultMessage:"Create a New Team"}),content:S.default.createElement("i",{className:"fa fa-plus"})})),S.default.createElement("div",{className:"team-sidebar"},S.default.createElement("div",{className:"team-wrapper"},c))}}]),a}(S.default.Component);F.propTypes={actions:M.default.shape({getTeams:M.default.func.isRequired}).isRequired},t.default=F}).call(t,a(22))},2483:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(6),i=s(n),l=a(4),r=s(l),o=a(5),u=s(o),d=a(7),m=s(d),c=a(8),f=s(c),h=a(2),p=s(h),b=a(1),v=s(b),_=a(40),g=a(44),y=a(237),M=a(435),w=a(9),S=s(w),E=function(e){function t(e){(0,r.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleSwitch=a.handleSwitch.bind(a),a.handleDisabled=a.handleDisabled.bind(a),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"handleSwitch",value:function(e){e.preventDefault(),(0,y.trackEvent)("ui","ui_team_sidebar_switch_team"),(0,M.switchTeams)(this.props.url)}},{key:"handleDisabled",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.props.active?"active":"",t=this.props.btnClass,a=this.props.disabled?"team-disabled":"",s=this.props.active||this.props.disabled?this.handleDisabled:this.handleSwitch,n=void 0;e||(e=this.props.unread?"unread":"",this.props.mentions&&(n=v.default.createElement("span",{className:"badge pull-right small"},this.props.mentions)));var i=void 0,l=this.props.content;return l||(l=v.default.createElement("div",{className:"team-btn__initials"},this.props.displayName.substring(0,2),v.default.createElement("div",{className:"team-btn__content"},this.props.displayName))),i=this.props.isMobile?v.default.createElement("div",{className:"team-btn "+t},n,l):v.default.createElement(_.OverlayTrigger,{trigger:["hover","focus"],delayShow:S.default.OVERLAY_TIME_DELAY,placement:this.props.placement,overlay:v.default.createElement(_.Tooltip,{id:"tooltip-"+this.props.url},this.props.tip)},v.default.createElement("div",{className:"team-btn "+t},n,l)),v.default.createElement("div",{className:"team-container "+e},v.default.createElement(g.Link,{className:a,to:this.props.url,onClick:s},i))}}]),t}(v.default.Component);t.default=E,E.defaultProps={btnClass:"",tip:"",placement:"right",active:!1,disabled:!1,unread:!1,mentions:0},E.propTypes={btnClass:p.default.string,url:p.default.string.isRequired,displayName:p.default.string,content:p.default.node,tip:p.default.node.isRequired,active:p.default.bool,disabled:p.default.bool,isMobile:p.default.bool,unread:p.default.bool,mentions:p.default.number,placement:p.default.oneOf(["left","right","top","bottom"])}},320:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(e,t){return(0,r.default)({},t)}function i(e){return{actions:(0,u.bindActionCreators)({getTeams:d.getTeams},e)}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(19),r=s(l),o=a(31),u=a(20),d=a(122),m=a(2482),c=s(m);t.default=(0,o.connect)(n,i)(c.default)}});
//# sourceMappingURL=1.d914427c59ffd9c9f6ee.js.map