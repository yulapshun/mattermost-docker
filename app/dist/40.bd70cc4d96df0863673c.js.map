{"version":3,"sources":["webpack:///40.bd70cc4d96df0863673c.js","webpack:///./components/logged_in.jsx"],"names":["webpackJsonp","2150","module","exports","__webpack_require__","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_jquery","_jquery2","_propTypes","_propTypes2","_react","_react2","_emoji_actions","_global_actions","GlobalActions","_websocket_actions","WebSocketActions","_user_store","_user_store2","_user_agent","UserAgent","_utils","Utils","_loading_screen","_loading_screen2","LoggedIn","_React$Component","params","this","_this","__proto__","onUserChanged","bind","attr","isIos","addClass","isAndroid","state","user","getCurrentUser","emitUserLoggedOutEvent","areObjectsEqual","setState","initialize","addChangeListener","window","addEventListener","onFocusListener","onBlurListener","on","ev","type","parent","prev","next","removeClass","closest","find","e","which","target","is","preventDefault","mm_config","EnableCustomEmoji","loadEmoji","close","removeChangeListener","off","removeEventListener","isValidState","cloneElement","props","children","createElement","emitBrowserFocus","Component","propTypes","object"],"mappings":"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","file":"40.bd70cc4d96df0863673c.js","sourcesContent":["webpackJsonp([40],{\n\n/***/ 2150:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(6);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(4);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(5);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(7);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(8);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _emoji_actions = __webpack_require__(2089);\n\nvar _global_actions = __webpack_require__(56);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _websocket_actions = __webpack_require__(314);\n\nvar WebSocketActions = _interopRequireWildcard(_websocket_actions);\n\n__webpack_require__(137);\n\nvar _user_store = __webpack_require__(25);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _user_agent = __webpack_require__(87);\n\nvar UserAgent = _interopRequireWildcard(_user_agent);\n\nvar _utils = __webpack_require__(16);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _loading_screen = __webpack_require__(236);\n\nvar _loading_screen2 = _interopRequireDefault(_loading_screen);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BACKSPACE_CHAR = 8; // Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar LoggedIn = function (_React$Component) {\n    (0, _inherits3.default)(LoggedIn, _React$Component);\n\n    function LoggedIn(params) {\n        (0, _classCallCheck3.default)(this, LoggedIn);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (LoggedIn.__proto__ || (0, _getPrototypeOf2.default)(LoggedIn)).call(this, params));\n\n        _this.onUserChanged = _this.onUserChanged.bind(_this);\n\n        // Because current CSS requires the root tag to have specific stuff\n        (0, _jquery2.default)('#root').attr('class', 'channel-view');\n\n        // Device tracking setup\n        if (UserAgent.isIos()) {\n            (0, _jquery2.default)('body').addClass('ios');\n        } else if (UserAgent.isAndroid()) {\n            (0, _jquery2.default)('body').addClass('android');\n        }\n\n        _this.state = {\n            user: _user_store2.default.getCurrentUser()\n        };\n\n        if (!_this.state.user) {\n            GlobalActions.emitUserLoggedOutEvent('/login');\n        }\n        return _this;\n    }\n\n    (0, _createClass3.default)(LoggedIn, [{\n        key: 'isValidState',\n        value: function isValidState() {\n            return this.state.user != null;\n        }\n    }, {\n        key: 'onUserChanged',\n        value: function onUserChanged() {\n            // Grab the current user\n            var user = _user_store2.default.getCurrentUser();\n            if (!Utils.areObjectsEqual(this.state.user, user)) {\n                this.setState({\n                    user: user\n                });\n            }\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            // Initialize websocket\n            WebSocketActions.initialize();\n\n            // Listen for user\n            _user_store2.default.addChangeListener(this.onUserChanged);\n\n            // Listen for focussed tab/window state\n            window.addEventListener('focus', this.onFocusListener);\n            window.addEventListener('blur', this.onBlurListener);\n\n            // ???\n            (0, _jquery2.default)('body').on('mouseenter mouseleave', '.post', function mouseOver(ev) {\n                if (ev.type === 'mouseenter') {\n                    (0, _jquery2.default)(this).parent('div').prev('.date-separator, .new-separator').addClass('hovered--after');\n                    (0, _jquery2.default)(this).parent('div').next('.date-separator, .new-separator').addClass('hovered--before');\n                } else {\n                    (0, _jquery2.default)(this).parent('div').prev('.date-separator, .new-separator').removeClass('hovered--after');\n                    (0, _jquery2.default)(this).parent('div').next('.date-separator, .new-separator').removeClass('hovered--before');\n                }\n            });\n\n            (0, _jquery2.default)('body').on('mouseenter mouseleave', '.search-item__container .post', function mouseOver(ev) {\n                if (ev.type === 'mouseenter') {\n                    (0, _jquery2.default)(this).closest('.search-item__container').find('.date-separator').addClass('hovered--after');\n                    (0, _jquery2.default)(this).closest('.search-item__container').next('div').find('.date-separator').addClass('hovered--before');\n                } else {\n                    (0, _jquery2.default)(this).closest('.search-item__container').find('.date-separator').removeClass('hovered--after');\n                    (0, _jquery2.default)(this).closest('.search-item__container').next('div').find('.date-separator').removeClass('hovered--before');\n                }\n            });\n\n            (0, _jquery2.default)('body').on('mouseenter mouseleave', '.post.post--comment.same--root', function mouseOver(ev) {\n                if (ev.type === 'mouseenter') {\n                    (0, _jquery2.default)(this).parent('div').prev('.date-separator, .new-separator').addClass('hovered--comment');\n                    (0, _jquery2.default)(this).parent('div').next('.date-separator, .new-separator').addClass('hovered--comment');\n                } else {\n                    (0, _jquery2.default)(this).parent('div').prev('.date-separator, .new-separator').removeClass('hovered--comment');\n                    (0, _jquery2.default)(this).parent('div').next('.date-separator, .new-separator').removeClass('hovered--comment');\n                }\n            });\n\n            // Prevent backspace from navigating back a page\n            (0, _jquery2.default)(window).on('keydown.preventBackspace', function (e) {\n                if (e.which === BACKSPACE_CHAR && !(0, _jquery2.default)(e.target).is('input, textarea')) {\n                    e.preventDefault();\n                }\n            });\n\n            // Get custom emoji from the server\n            if (window.mm_config.EnableCustomEmoji === 'true') {\n                (0, _emoji_actions.loadEmoji)(false);\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            (0, _jquery2.default)('#root').attr('class', '');\n\n            WebSocketActions.close();\n            _user_store2.default.removeChangeListener(this.onUserChanged);\n\n            (0, _jquery2.default)('body').off('click.userpopover');\n            (0, _jquery2.default)('body').off('mouseenter mouseleave', '.post');\n            (0, _jquery2.default)('body').off('mouseenter mouseleave', '.post.post--comment.same--root');\n\n            (0, _jquery2.default)('.modal').off('show.bs.modal');\n\n            (0, _jquery2.default)(window).off('keydown.preventBackspace');\n\n            // Listen for focussed tab/window state\n            window.removeEventListener('focus', this.onFocusListener);\n            window.removeEventListener('blur', this.onBlurListener);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!this.isValidState()) {\n                return _react2.default.createElement(_loading_screen2.default, null);\n            }\n\n            return _react2.default.cloneElement(this.props.children, {\n                user: this.state.user\n            });\n        }\n    }, {\n        key: 'onFocusListener',\n        value: function onFocusListener() {\n            GlobalActions.emitBrowserFocus(true);\n        }\n    }, {\n        key: 'onBlurListener',\n        value: function onBlurListener() {\n            GlobalActions.emitBrowserFocus(false);\n        }\n    }]);\n    return LoggedIn;\n}(_react2.default.Component);\n\nexports.default = LoggedIn;\n\n\nLoggedIn.propTypes = {\n    children: _propTypes2.default.object\n};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 40.bd70cc4d96df0863673c.js","// Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport $ from 'jquery';\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {loadEmoji} from 'actions/emoji_actions.jsx';\nimport * as GlobalActions from 'actions/global_actions.jsx';\nimport * as WebSocketActions from 'actions/websocket_actions.jsx';\nimport 'stores/emoji_store.jsx';\nimport UserStore from 'stores/user_store.jsx';\n\nimport * as UserAgent from 'utils/user_agent.jsx';\nimport * as Utils from 'utils/utils.jsx';\n\nimport LoadingScreen from 'components/loading_screen.jsx';\n\nconst BACKSPACE_CHAR = 8;\n\nexport default class LoggedIn extends React.Component {\n    constructor(params) {\n        super(params);\n\n        this.onUserChanged = this.onUserChanged.bind(this);\n\n        // Because current CSS requires the root tag to have specific stuff\n        $('#root').attr('class', 'channel-view');\n\n        // Device tracking setup\n        if (UserAgent.isIos()) {\n            $('body').addClass('ios');\n        } else if (UserAgent.isAndroid()) {\n            $('body').addClass('android');\n        }\n\n        this.state = {\n            user: UserStore.getCurrentUser()\n        };\n\n        if (!this.state.user) {\n            GlobalActions.emitUserLoggedOutEvent('/login');\n        }\n    }\n\n    isValidState() {\n        return this.state.user != null;\n    }\n\n    onUserChanged() {\n        // Grab the current user\n        const user = UserStore.getCurrentUser();\n        if (!Utils.areObjectsEqual(this.state.user, user)) {\n            this.setState({\n                user\n            });\n        }\n    }\n\n    componentDidMount() {\n        // Initialize websocket\n        WebSocketActions.initialize();\n\n        // Listen for user\n        UserStore.addChangeListener(this.onUserChanged);\n\n        // Listen for focussed tab/window state\n        window.addEventListener('focus', this.onFocusListener);\n        window.addEventListener('blur', this.onBlurListener);\n\n        // ???\n        $('body').on('mouseenter mouseleave', '.post', function mouseOver(ev) {\n            if (ev.type === 'mouseenter') {\n                $(this).parent('div').prev('.date-separator, .new-separator').addClass('hovered--after');\n                $(this).parent('div').next('.date-separator, .new-separator').addClass('hovered--before');\n            } else {\n                $(this).parent('div').prev('.date-separator, .new-separator').removeClass('hovered--after');\n                $(this).parent('div').next('.date-separator, .new-separator').removeClass('hovered--before');\n            }\n        });\n\n        $('body').on('mouseenter mouseleave', '.search-item__container .post', function mouseOver(ev) {\n            if (ev.type === 'mouseenter') {\n                $(this).closest('.search-item__container').find('.date-separator').addClass('hovered--after');\n                $(this).closest('.search-item__container').next('div').find('.date-separator').addClass('hovered--before');\n            } else {\n                $(this).closest('.search-item__container').find('.date-separator').removeClass('hovered--after');\n                $(this).closest('.search-item__container').next('div').find('.date-separator').removeClass('hovered--before');\n            }\n        });\n\n        $('body').on('mouseenter mouseleave', '.post.post--comment.same--root', function mouseOver(ev) {\n            if (ev.type === 'mouseenter') {\n                $(this).parent('div').prev('.date-separator, .new-separator').addClass('hovered--comment');\n                $(this).parent('div').next('.date-separator, .new-separator').addClass('hovered--comment');\n            } else {\n                $(this).parent('div').prev('.date-separator, .new-separator').removeClass('hovered--comment');\n                $(this).parent('div').next('.date-separator, .new-separator').removeClass('hovered--comment');\n            }\n        });\n\n        // Prevent backspace from navigating back a page\n        $(window).on('keydown.preventBackspace', (e) => {\n            if (e.which === BACKSPACE_CHAR && !$(e.target).is('input, textarea')) {\n                e.preventDefault();\n            }\n        });\n\n        // Get custom emoji from the server\n        if (window.mm_config.EnableCustomEmoji === 'true') {\n            loadEmoji(false);\n        }\n    }\n\n    componentWillUnmount() {\n        $('#root').attr('class', '');\n\n        WebSocketActions.close();\n        UserStore.removeChangeListener(this.onUserChanged);\n\n        $('body').off('click.userpopover');\n        $('body').off('mouseenter mouseleave', '.post');\n        $('body').off('mouseenter mouseleave', '.post.post--comment.same--root');\n\n        $('.modal').off('show.bs.modal');\n\n        $(window).off('keydown.preventBackspace');\n\n        // Listen for focussed tab/window state\n        window.removeEventListener('focus', this.onFocusListener);\n        window.removeEventListener('blur', this.onBlurListener);\n    }\n\n    render() {\n        if (!this.isValidState()) {\n            return <LoadingScreen/>;\n        }\n\n        return React.cloneElement(this.props.children, {\n            user: this.state.user\n        });\n    }\n\n    onFocusListener() {\n        GlobalActions.emitBrowserFocus(true);\n    }\n\n    onBlurListener() {\n        GlobalActions.emitBrowserFocus(false);\n    }\n}\n\nLoggedIn.propTypes = {\n    children: PropTypes.object\n};\n\n\n\n// WEBPACK FOOTER //\n// ./components/logged_in.jsx"],"sourceRoot":""}