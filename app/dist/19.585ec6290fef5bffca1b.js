webpackJsonp([19],{2136:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var r=t.location.query.id;return(0,s.default)({},t,{isSystemAdmin:(0,l.isCurrentUserSystemAdmin)(e),oauthAppId:r,oauthApp:e.entities.integrations.oauthApps[r],editOAuthAppRequest:e.requests.integrations.updateOAuthApp})}function n(e){return{actions:(0,p.bindActionCreators)({getOAuthApp:d.getOAuthApp,editOAuthApp:d.editOAuthApp},e)}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(19),s=a(o),i=r(31),p=r(20),d=r(735),l=r(50),f=r(2383),c=a(f);t.default=(0,i.connect)(u,n)(c.default)},2383:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(76),n=a(u),o=r(77),s=a(o),i=r(6),p=a(i),d=r(4),l=a(d),f=r(5),c=a(f),h=r(7),A=a(h),m=r(8),g=a(m),_=r(1),b=a(_),v=r(2),O=a(v),M=r(44),k=r(17),w=r(236),y=a(w),E=r(311),q=a(E),x=r(2094),C=a(x),S={id:"integrations.edit",defaultMessage:"Edit"},R={id:"update_incoming_webhook.update",defaultMessage:"Update"},j=function(e){function t(e){var r=this;(0,l.default)(this,t);var a=(0,A.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return a.editOAuthApp=function(){var e=(0,s.default)(n.default.mark(function e(t){var u;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.newApp=t,a.props.oauthApp.id&&(t.id=a.props.oauthApp.id),a.props.oauthApp.token&&(t.token=a.props.oauthApp.token),!1!==(u=a.props.oauthApp.callback_urls.length===t.callback_urls.length&&a.props.oauthApp.callback_urls.every(function(e,r){return e===t.callback_urls[r]}))){e.next=8;break}a.handleConfirmModal(),e.next=10;break;case 8:return e.next=10,a.submitOAuthApp();case 10:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),a.handleConfirmModal=function(){a.setState({showConfirmModal:!0})},a.confirmModalDismissed=function(){a.setState({showConfirmModal:!1})},a.submitOAuthApp=(0,s.default)(n.default.mark(function e(){var t;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({serverError:""}),e.next=3,a.props.actions.editOAuthApp(a.newApp);case 3:if(!(t=e.sent)){e.next=7;break}return M.browserHistory.push("/"+a.props.team.name+"/integrations/oauth2-apps"),e.abrupt("return");case 7:a.setState({showConfirmModal:!1}),a.props.editOAuthAppRequest.error&&a.setState({serverError:a.props.editOAuthAppRequest.error.message});case 9:case"end":return e.stop()}},e,r)})),a.renderExtra=function(){var e=b.default.createElement(k.FormattedMessage,{id:"update_command.update",defaultMessage:"Update"}),t=b.default.createElement(k.FormattedMessage,{id:"update_oauth_app.confirm",defaultMessage:"Edit OAuth 2.0 application"}),r=b.default.createElement(k.FormattedMessage,{id:"update_oauth_app.question",defaultMessage:"Your changes may break the existing OAuth 2.0 application. Are you sure you would like to update it?"});return b.default.createElement(q.default,{title:t,message:r,confirmButtonText:e,show:a.state.showConfirmModal,onConfirm:a.submitOAuthApp,onCancel:a.confirmModalDismissed})},a.state={showConfirmModal:!1,serverError:""},a}return(0,g.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){"true"===window.mm_config.EnableOAuthServiceProvider&&this.props.actions.getOAuthApp(this.props.oauthAppId)}},{key:"render",value:function(){return this.props.oauthApp?b.default.createElement(C.default,{team:this.props.team,isSystemAdmin:this.props.isSystemAdmin,header:S,footer:R,renderExtra:this.renderExtra(),action:this.editOAuthApp,serverError:this.state.serverError,initialApp:this.props.oauthApp}):b.default.createElement(y.default,null)}}]),t}(b.default.PureComponent);j.propTypes={team:O.default.object.isRequired,isSystemAdmin:O.default.bool,oauthAppId:O.default.string.isRequired,oauthApp:O.default.object,editOAuthAppRequest:O.default.object.isRequired,actions:O.default.shape({getOAuthApp:O.default.func.isRequired,editOAuthApp:O.default.func.isRequired}).isRequired},t.default=j}});
//# sourceMappingURL=19.585ec6290fef5bffca1b.js.map