{"version":3,"sources":["webpack:///56.f0ed0530aa953df29858.js","webpack:///./components/claim/components/email_to_oauth.jsx"],"names":["webpackJsonp","2105","module","exports","__webpack_require__","global","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_propTypes","_propTypes2","_react","_react2","_reactDom","_reactDom2","_reactIntl","_admin_actions","_user_actions","_constants","_constants2","_utils","Utils","newObj","key","prototype","hasOwnProperty","call","_login_mfa","_login_mfa2","EmailToOAuth","_React$Component","props","this","_this","__proto__","submit","bind","preSubmit","state","showMfa","password","e","_this2","preventDefault","findDOMNode","refs","error","localizeMessage","setState","checkMfa","email","requiresMfa","err","message","loginId","token","_this3","emailToOAuth","newType","data","follow_link","window","location","href","createElement","className","formClass","type","SAML_SERVICE","toUpperCase","toTitleCase","uiType","content","onSubmit","FormattedMessage","id","defaultMessage","values","site","mm_config","SiteName","name","ref","placeholder","spellCheck","Component","defaultProps","propTypes","string"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,EAASC,GAEjC,cAC4B,SAASC,GA0DrC,QAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,QAASF,GAxDvFG,OAAOC,eAAeR,EAAS,cAC3BS,OAAO,GAGX,IAAIC,GAAkBT,EAAoB,GAEtCU,EAAmBR,EAAuBO,GAE1CE,EAAmBX,EAAoB,GAEvCY,EAAmBV,EAAuBS,GAE1CE,EAAgBb,EAAoB,GAEpCc,EAAgBZ,EAAuBW,GAEvCE,EAA8Bf,EAAoB,GAElDgB,EAA8Bd,EAAuBa,GAErDE,EAAajB,EAAoB,GAEjCkB,EAAahB,EAAuBe,GC3BxCE,EAAAnB,EAAA,GD+BIoB,EAAclB,EAAuBiB,GC9BzCE,EAAArB,EAAA,GDkCIsB,EAAUpB,EAAuBmB,GCjCrCE,EAAAvB,EAAA,IDqCIwB,EAAatB,EAAuBqB,GCpCxCE,EAAAzB,EAAA,IAEA0B,EAAA1B,EAAA,KACA2B,EAAA3B,EAAA,IAEA4B,EAAA5B,EAAA,GDyCI6B,EAAc3B,EAAuB0B,GCxCzCE,EAAA9B,EAAA,IAAY+B,EDkDZ,SAAiC5B,GAAO,GAAIA,GAAOA,EAAIC,WAAc,MAAOD,EAAc,IAAI6B,KAAa,IAAW,MAAP7B,EAAe,IAAK,GAAI8B,KAAO9B,GAAWG,OAAO4B,UAAUC,eAAeC,KAAKjC,EAAK8B,KAAMD,EAAOC,GAAO9B,EAAI8B,GAAgC,OAAtBD,GAAO3B,QAAUF,EAAY6B,GAN9NF,GC1CpCO,EAAArC,EAAA,MD8CIsC,EAAcpC,EAAuBmC,GC5CpBE,EDkDF,SAAUC,GCjDzB,QAAAD,GAAYE,IAAO,EAAA7B,EAAAP,SAAAqC,KAAAH,EAAA,IAAAI,IAAA,EAAA3B,EAAAX,SAAAqC,MAAAH,EAAAK,YAAA,EAAAlC,EAAAL,SAAAkC,IAAAH,KAAAM,KACTD,GADS,OAGfE,GAAKE,OAASF,EAAKE,OAAOC,KAAZH,GACdA,EAAKI,UAAYJ,EAAKI,UAAUD,KAAfH,GAEjBA,EAAKK,OAASC,SAAS,EAAOC,SAAU,IANzBP,ED+NnB,OA7KA,EAAIzB,EAAWb,SAASkC,EAAcC,IActC,EAAI1B,EAAcT,SAASkC,IACvBN,IAAK,YACLzB,MAAO,SCzDD2C,GAAG,GAAAC,GAAAV,IACTS,GAAEE,gBACF,IAAIL,MAEAE,EAAW1B,EAAAnB,QAASiD,YAAYZ,KAAKa,KAAKL,UAAU1C,KACxD,KAAK0C,EAGD,MAFAF,GAAMQ,MAAQzB,EAAM0B,gBAAgB,gCAAiC,mCACrEf,MAAKgB,SAASV,EAIlBN,MAAKgB,UAAUR,aAEfF,EAAMQ,MAAQ,KACdd,KAAKgB,SAASV,IAEd,EAAArB,EAAAgC,UACIjB,KAAKD,MAAMmB,MACX,SAACC,GACOA,EACAT,EAAKM,UAAUT,SAAS,IAExBG,EAAKP,OAAOO,EAAKX,MAAMmB,MAAOV,EAAU,KAGhD,SAACY,GACGV,EAAKM,UAAUF,MAAOM,EAAIC,eD4DlC9B,IAAK,SACLzB,MAAO,SCxDJwD,EAASd,EAAUe,GAAO,GAAAC,GAAAxB,MAC7B,EAAAhB,EAAAyC,cACIH,EACAd,EACAe,EACAvB,KAAKD,MAAM2B,QACX,SAACC,GACOA,EAAKC,cACLC,OAAOC,SAASC,KAAOJ,EAAKC,cAGpC,SAACR,GACGI,EAAKR,UAAUF,MAAOM,EAAIC,QAASd,SAAS,SDwDpDhB,IAAK,SACLzB,MAAO,WCnDP,GAAIgD,GAAQ,IACRd,MAAKM,MAAMQ,QACXA,EAAQlC,EAAAjB,QAAAqE,cAAA,OAAKC,UAAU,wBAAuBrD,EAAAjB,QAAAqE,cAAA,SAAOC,UAAU,iBAAiBjC,KAAKM,MAAMQ,QAG/F,IAAIoB,GAAY,YACZpB,KACAoB,GAAa,aAGjB,IAAMC,GAAQnC,KAAKD,MAAM2B,UAAYvC,EAAAxB,QAAUyE,aAAejD,EAAAxB,QAAUyE,aAAaC,cAAgBhD,EAAMiD,YAAYtC,KAAKD,MAAM2B,SAC5Ha,EAAYJ,EAAZ,OAEFK,QAkEJ,OAhEIA,GADAxC,KAAKM,MAAMC,QAEP3B,EAAAjB,QAAAqE,cAAApC,EAAAjC,SACI2D,QAAStB,KAAKD,MAAMmB,MACpBV,SAAUR,KAAKM,MAAME,SACrBL,OAAQH,KAAKG,SAKjBvB,EAAAjB,QAAAqE,cAAA,QAAMS,SAAUzC,KAAKK,WACjBzB,EAAAjB,QAAAqE,cAAA,SACIpD,EAAAjB,QAAAqE,cAAAjD,EAAA2D,kBACIC,GAAG,+BACHC,eAAe,6EACfC,QACIV,WAIZvD,EAAAjB,QAAAqE,cAAA,SACIpD,EAAAjB,QAAAqE,cAAAjD,EAAA2D,kBACIC,GAAG,+BACHC,eAAe,+CACfC,QACIV,WAIZvD,EAAAjB,QAAAqE,cAAA,SACIpD,EAAAjB,QAAAqE,cAAAjD,EAAA2D,kBACIC,GAAG,gCACHC,eAAe,6CACfC,QACIC,KAAMvF,EAAOsE,OAAOkB,UAAUC,aAI1CpE,EAAAjB,QAAAqE,cAAA,OAAKC,UAAWC,GACZtD,EAAAjB,QAAAqE,cAAA,SACIG,KAAK,WACLF,UAAU,eACVgB,KAAK,WACLC,IAAI,WACJC,YAAa9D,EAAM0B,gBAAgB,2BAA4B,YAC/DqC,WAAW,WAGlBtC,EACDlC,EAAAjB,QAAAqE,cAAA,UACIG,KAAK,SACLF,UAAU,mBAEVrD,EAAAjB,QAAAqE,cAAAjD,EAAA2D,kBACIC,GAAG,gCACHC,eAAe,6BACfC,QACIN,cASpB3D,EAAAjB,QAAAqE,cAAA,WACIpD,EAAAjB,QAAAqE,cAAA,UACIpD,EAAAjB,QAAAqE,cAAAjD,EAAA2D,kBACIC,GAAG,6BACHC,eAAe,4CACfC,QACIN,aAIXC,OD2EN3C,GChO+BjB,EAAAjB,QAAM0F,UDoOhDhG,GAAQM,QCpOakC,EA2JrBA,EAAayD,gBAEbzD,EAAa0D,WACT7B,QAAShD,EAAAf,QAAU6F,OACnBtC,MAAOxC,EAAAf,QAAU6F,UD6EQ9D,KAAKrC,EAASC,EAAoB","file":"56.f0ed0530aa953df29858.js","sourcesContent":["webpackJsonp([56],{\n\n/***/ 2105:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(6);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(4);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(5);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(7);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(8);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(47);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactIntl = __webpack_require__(17);\n\nvar _admin_actions = __webpack_require__(734);\n\nvar _user_actions = __webpack_require__(69);\n\nvar _constants = __webpack_require__(9);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(16);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _login_mfa = __webpack_require__(2085);\n\nvar _login_mfa2 = _interopRequireDefault(_login_mfa);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EmailToOAuth = function (_React$Component) {\n    (0, _inherits3.default)(EmailToOAuth, _React$Component);\n\n    function EmailToOAuth(props) {\n        (0, _classCallCheck3.default)(this, EmailToOAuth);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (EmailToOAuth.__proto__ || (0, _getPrototypeOf2.default)(EmailToOAuth)).call(this, props));\n\n        _this.submit = _this.submit.bind(_this);\n        _this.preSubmit = _this.preSubmit.bind(_this);\n\n        _this.state = { showMfa: false, password: '' };\n        return _this;\n    }\n\n    (0, _createClass3.default)(EmailToOAuth, [{\n        key: 'preSubmit',\n        value: function preSubmit(e) {\n            var _this2 = this;\n\n            e.preventDefault();\n            var state = {};\n\n            var password = _reactDom2.default.findDOMNode(this.refs.password).value;\n            if (!password) {\n                state.error = Utils.localizeMessage('claim.email_to_oauth.pwdError', 'Please enter your password.');\n                this.setState(state);\n                return;\n            }\n\n            this.setState({ password: password });\n\n            state.error = null;\n            this.setState(state);\n\n            (0, _user_actions.checkMfa)(this.props.email, function (requiresMfa) {\n                if (requiresMfa) {\n                    _this2.setState({ showMfa: true });\n                } else {\n                    _this2.submit(_this2.props.email, password, '');\n                }\n            }, function (err) {\n                _this2.setState({ error: err.message });\n            });\n        }\n    }, {\n        key: 'submit',\n        value: function submit(loginId, password, token) {\n            var _this3 = this;\n\n            (0, _admin_actions.emailToOAuth)(loginId, password, token, this.props.newType, function (data) {\n                if (data.follow_link) {\n                    window.location.href = data.follow_link;\n                }\n            }, function (err) {\n                _this3.setState({ error: err.message, showMfa: false });\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var error = null;\n            if (this.state.error) {\n                error = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.error\n                    )\n                );\n            }\n\n            var formClass = 'form-group';\n            if (error) {\n                formClass += ' has-error';\n            }\n\n            var type = this.props.newType === _constants2.default.SAML_SERVICE ? _constants2.default.SAML_SERVICE.toUpperCase() : Utils.toTitleCase(this.props.newType);\n            var uiType = type + ' SSO';\n\n            var content = void 0;\n            if (this.state.showMfa) {\n                content = _react2.default.createElement(_login_mfa2.default, {\n                    loginId: this.props.email,\n                    password: this.state.password,\n                    submit: this.submit\n                });\n            } else {\n                content = _react2.default.createElement(\n                    'form',\n                    { onSubmit: this.preSubmit },\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.email_to_oauth.ssoType',\n                            defaultMessage: 'Upon claiming your account, you will only be able to login with {type} SSO',\n                            values: {\n                                type: type\n                            }\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.email_to_oauth.ssoNote',\n                            defaultMessage: 'You must already have a valid {type} account',\n                            values: {\n                                type: type\n                            }\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.email_to_oauth.enterPwd',\n                            defaultMessage: 'Enter the password for your {site} account',\n                            values: {\n                                site: global.window.mm_config.SiteName\n                            }\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: formClass },\n                        _react2.default.createElement('input', {\n                            type: 'password',\n                            className: 'form-control',\n                            name: 'password',\n                            ref: 'password',\n                            placeholder: Utils.localizeMessage('claim.email_to_oauth.pwd', 'Password'),\n                            spellCheck: 'false'\n                        })\n                    ),\n                    error,\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            type: 'submit',\n                            className: 'btn btn-primary'\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.email_to_oauth.switchTo',\n                            defaultMessage: 'Switch account to {uiType}',\n                            values: {\n                                uiType: uiType\n                            }\n                        })\n                    )\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'h3',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'claim.email_to_oauth.title',\n                        defaultMessage: 'Switch Email/Password Account to {uiType}',\n                        values: {\n                            uiType: uiType\n                        }\n                    })\n                ),\n                content\n            );\n        }\n    }]);\n    return EmailToOAuth;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = EmailToOAuth;\n\n\nEmailToOAuth.defaultProps = {};\nEmailToOAuth.propTypes = {\n    newType: _propTypes2.default.string,\n    email: _propTypes2.default.string\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(22)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 56.f0ed0530aa953df29858.js","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport {FormattedMessage} from 'react-intl';\n\nimport {emailToOAuth} from 'actions/admin_actions.jsx';\nimport {checkMfa} from 'actions/user_actions.jsx';\n\nimport Constants from 'utils/constants.jsx';\nimport * as Utils from 'utils/utils.jsx';\n\nimport LoginMfa from 'components/login/components/login_mfa.jsx';\n\nexport default class EmailToOAuth extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.submit = this.submit.bind(this);\n        this.preSubmit = this.preSubmit.bind(this);\n\n        this.state = {showMfa: false, password: ''};\n    }\n\n    preSubmit(e) {\n        e.preventDefault();\n        var state = {};\n\n        var password = ReactDOM.findDOMNode(this.refs.password).value;\n        if (!password) {\n            state.error = Utils.localizeMessage('claim.email_to_oauth.pwdError', 'Please enter your password.');\n            this.setState(state);\n            return;\n        }\n\n        this.setState({password});\n\n        state.error = null;\n        this.setState(state);\n\n        checkMfa(\n            this.props.email,\n            (requiresMfa) => {\n                if (requiresMfa) {\n                    this.setState({showMfa: true});\n                } else {\n                    this.submit(this.props.email, password, '');\n                }\n            },\n            (err) => {\n                this.setState({error: err.message});\n            }\n        );\n    }\n\n    submit(loginId, password, token) {\n        emailToOAuth(\n            loginId,\n            password,\n            token,\n            this.props.newType,\n            (data) => {\n                if (data.follow_link) {\n                    window.location.href = data.follow_link;\n                }\n            },\n            (err) => {\n                this.setState({error: err.message, showMfa: false});\n            }\n        );\n    }\n\n    render() {\n        var error = null;\n        if (this.state.error) {\n            error = <div className='form-group has-error'><label className='control-label'>{this.state.error}</label></div>;\n        }\n\n        var formClass = 'form-group';\n        if (error) {\n            formClass += ' has-error';\n        }\n\n        const type = (this.props.newType === Constants.SAML_SERVICE ? Constants.SAML_SERVICE.toUpperCase() : Utils.toTitleCase(this.props.newType));\n        const uiType = `${type} SSO`;\n\n        let content;\n        if (this.state.showMfa) {\n            content = (\n                <LoginMfa\n                    loginId={this.props.email}\n                    password={this.state.password}\n                    submit={this.submit}\n                />\n            );\n        } else {\n            content = (\n                <form onSubmit={this.preSubmit}>\n                    <p>\n                        <FormattedMessage\n                            id='claim.email_to_oauth.ssoType'\n                            defaultMessage='Upon claiming your account, you will only be able to login with {type} SSO'\n                            values={{\n                                type\n                            }}\n                        />\n                    </p>\n                    <p>\n                        <FormattedMessage\n                            id='claim.email_to_oauth.ssoNote'\n                            defaultMessage='You must already have a valid {type} account'\n                            values={{\n                                type\n                            }}\n                        />\n                    </p>\n                    <p>\n                        <FormattedMessage\n                            id='claim.email_to_oauth.enterPwd'\n                            defaultMessage='Enter the password for your {site} account'\n                            values={{\n                                site: global.window.mm_config.SiteName\n                            }}\n                        />\n                    </p>\n                    <div className={formClass}>\n                        <input\n                            type='password'\n                            className='form-control'\n                            name='password'\n                            ref='password'\n                            placeholder={Utils.localizeMessage('claim.email_to_oauth.pwd', 'Password')}\n                            spellCheck='false'\n                        />\n                    </div>\n                    {error}\n                    <button\n                        type='submit'\n                        className='btn btn-primary'\n                    >\n                        <FormattedMessage\n                            id='claim.email_to_oauth.switchTo'\n                            defaultMessage='Switch account to {uiType}'\n                            values={{\n                                uiType\n                            }}\n                        />\n                    </button>\n                </form>\n            );\n        }\n\n        return (\n            <div>\n                <h3>\n                    <FormattedMessage\n                        id='claim.email_to_oauth.title'\n                        defaultMessage='Switch Email/Password Account to {uiType}'\n                        values={{\n                            uiType\n                        }}\n                    />\n                </h3>\n                {content}\n            </div>\n        );\n    }\n}\n\nEmailToOAuth.defaultProps = {\n};\nEmailToOAuth.propTypes = {\n    newType: PropTypes.string,\n    email: PropTypes.string\n};\n\n\n\n// WEBPACK FOOTER //\n// ./components/claim/components/email_to_oauth.jsx"],"sourceRoot":""}