webpackJsonp([52],{2110:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(155),s=r(l),n=a(6),u=r(n),i=a(4),d=r(i),m=a(5),o=r(m),c=a(7),f=r(c),E=a(8),h=r(E),g=a(2),p=r(g),_=a(1),M=r(_),v=a(40),b=a(47),N=r(b),T=a(17),y=a(237),k=a(435),L=a(9),S=r(L),F=a(78),A=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(F),w=a(2081),x=r(w),O=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.submitBack=a.submitBack.bind(a),a.submitNext=a.submitNext.bind(a),a.handleFocus=a.handleFocus.bind(a),a.state={nameError:"",isLoading:!1},a}return(0,h.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){(0,y.trackEvent)("signup","signup_team_02_url")}},{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="display_name",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){var t=this;e.preventDefault();var a=N.default.findDOMNode(this.refs.name).value.trim(),r=A.cleanUpUrlable(a),l=/^[a-z]+([a-z\-0-9]+|(__)?)[a-z0-9]+$/g;if(!a)return void this.setState({nameError:M.default.createElement(T.FormattedMessage,{id:"create_team.team_url.required",defaultMessage:"This field is required"})});if(r.length<S.default.MIN_TEAMNAME_LENGTH||r.length>S.default.MAX_TEAMNAME_LENGTH)return void this.setState({nameError:M.default.createElement(T.FormattedMessage,{id:"create_team.team_url.charLength",defaultMessage:"Name must be {min} or more characters up to a maximum of {max}",values:{min:S.default.MIN_TEAMNAME_LENGTH,max:S.default.MAX_TEAMNAME_LENGTH}})});if(r!==a||!l.test(a))return void this.setState({nameError:M.default.createElement(T.FormattedMessage,{id:"create_team.team_url.regex",defaultMessage:"Use only lower case letters, numbers and dashes. Must start with a letter and can't end in a dash."})});for(var n=0;n<S.default.RESERVED_TEAM_NAMES.length;n++)if(0===r.indexOf(S.default.RESERVED_TEAM_NAMES[n]))return void this.setState({nameError:M.default.createElement(T.FormattedHTMLMessage,{id:"create_team.team_url.taken",defaultMessage:'This URL <a href="https://docs.mattermost.com/help/getting-started/creating-teams.html#team-url" target="_blank">starts with a reserved word</a> or is unavailable. Please try another.'})});this.setState({isLoading:!0});var u=JSON.parse((0,s.default)(this.props.state));u.team.type="O",u.team.name=a,(0,k.checkIfTeamExists)(a,function(e){if(e)return t.setState({nameError:M.default.createElement(T.FormattedMessage,{id:"create_team.team_url.unavailable",defaultMessage:"This URL is taken or unavailable. Please try another."})}),void t.setState({isLoading:!1});(0,k.createTeam)(u.team,function(){(0,y.trackEvent)("signup","signup_team_03_complete")},function(e){t.setState({nameError:e.message}),t.setState({isLoading:!1})})},function(e){t.setState({nameError:e.message})})}},{key:"handleFocus",value:function(e){e.preventDefault(),e.currentTarget.select()}},{key:"render",value:function(){var e=null,t="form-group";this.state.nameError&&(e=M.default.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error");var a=A.getSiteURL()+"/",r=M.default.createElement(v.Tooltip,{id:"urlTooltip"},a),l=M.default.createElement(T.FormattedMessage,{id:"create_team.team_url.finish",defaultMessage:"Finish"});return this.state.isLoading&&(l=M.default.createElement(T.FormattedMessage,{id:"create_team.team_url.creatingTeam",defaultMessage:"Creating team..."})),M.default.createElement("div",null,M.default.createElement("form",null,M.default.createElement("img",{className:"signup-team-logo",src:x.default}),M.default.createElement("h2",null,M.default.createElement(T.FormattedMessage,{id:"create_team.team_url.teamUrl",defaultMessage:"Team URL"})),M.default.createElement("div",{className:t},M.default.createElement("div",{className:"row"},M.default.createElement("div",{className:"col-sm-11"},M.default.createElement("div",{className:"input-group input-group--limit"},M.default.createElement(v.OverlayTrigger,{trigger:["hover","focus"],delayShow:S.default.OVERLAY_TIME_DELAY,placement:"top",overlay:r},M.default.createElement("span",{className:"input-group-addon"},a)),M.default.createElement("input",{type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:"128",defaultValue:this.props.state.team.name,autoFocus:!0,onFocus:this.handleFocus,spellCheck:"false"})))),e),M.default.createElement("p",null,M.default.createElement(T.FormattedMessage,{id:"create_team.team_url.webAddress",defaultMessage:"Choose the web address of your new team:"})),M.default.createElement("ul",{className:"color--light"},M.default.createElement(T.FormattedHTMLMessage,{id:"create_team.team_url.hint",defaultMessage:"<li>Short and memorable is best</li> <li>Use lowercase letters, numbers and dashes</li> <li>Must start with a letter and can't end in a dash</li>"})),M.default.createElement("div",{className:"margin--extra"},M.default.createElement(v.Button,{type:"submit",bsStyle:"primary",disabled:this.state.isLoading,onClick:this.submitNext},l)),M.default.createElement("div",{className:"margin--extra"},M.default.createElement("a",{href:"#",onClick:this.submitBack},M.default.createElement(T.FormattedMessage,{id:"create_team.team_url.back",defaultMessage:"Back to previous step"})))))}}]),t}(M.default.Component);t.default=O,O.propTypes={state:p.default.object,updateParent:p.default.func}}});
//# sourceMappingURL=52.22bd7bc5d4bcf0a40072.js.map