webpackJsonp([7],{

/***/ 2221:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(33);\n\nvar _redux = __webpack_require__(22);\n\nvar _channels = __webpack_require__(68);\n\nvar _needs_team = __webpack_require__(2468);\n\nvar _needs_team2 = _interopRequireDefault(_needs_team);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapStateToProps(state, ownProps) {\n    return (0, _extends3.default)({}, ownProps);\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: (0, _redux.bindActionCreators)({\n            viewChannel: _channels.viewChannel,\n            getMyChannelMembers: _channels.getMyChannelMembers\n        }, dispatch)\n    };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_needs_team2.default);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIyMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL25lZWRzX3RlYW0vaW5kZXguanM/YWQ5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTcgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7YmluZEFjdGlvbkNyZWF0b3JzfSBmcm9tICdyZWR1eCc7XG5cbmltcG9ydCB7Z2V0TXlDaGFubmVsTWVtYmVycywgdmlld0NoYW5uZWx9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvYWN0aW9ucy9jaGFubmVscyc7XG5cbmltcG9ydCBOZWVkc1RlYW0gZnJvbSAnLi9uZWVkc190ZWFtLmpzeCc7XG5cbmZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSwgb3duUHJvcHMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5vd25Qcm9wc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGFjdGlvbnM6IGJpbmRBY3Rpb25DcmVhdG9ycyh7XG4gICAgICAgICAgICB2aWV3Q2hhbm5lbCxcbiAgICAgICAgICAgIGdldE15Q2hhbm5lbE1lbWJlcnNcbiAgICAgICAgfSwgZGlzcGF0Y2gpXG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoTmVlZHNUZWFtKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL25lZWRzX3RlYW0vaW5kZXguanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQVRBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2221\n");

/***/ }),

/***/ 2251:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar logDisabled_ = true;\nvar deprecationWarnings_ = true;\n\n// Utility methods.\nvar utils = {\n  disableLog: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    logDisabled_ = bool;\n    return (bool) ? 'adapter.js logging disabled' :\n        'adapter.js logging enabled';\n  },\n\n  /**\n   * Disable or enable deprecation warnings\n   * @param {!boolean} bool set to true to disable warnings.\n   */\n  disableWarnings: function(bool) {\n    if (typeof bool !== 'boolean') {\n      return new Error('Argument type: ' + typeof bool +\n          '. Please use a boolean.');\n    }\n    deprecationWarnings_ = !bool;\n    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n  },\n\n  log: function() {\n    if (typeof window === 'object') {\n      if (logDisabled_) {\n        return;\n      }\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        console.log.apply(console, arguments);\n      }\n    }\n  },\n\n  /**\n   * Shows a deprecation warning suggesting the modern and spec-compatible API.\n   */\n  deprecated: function(oldMethod, newMethod) {\n    if (!deprecationWarnings_) {\n      return;\n    }\n    console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n        ' instead.');\n  },\n\n  /**\n   * Extract browser version out of the provided user agent string.\n   *\n   * @param {!string} uastring userAgent string.\n   * @param {!string} expr Regular expression used as match criteria.\n   * @param {!number} pos position in the version string to be returned.\n   * @return {!number} browser version.\n   */\n  extractVersion: function(uastring, expr, pos) {\n    var match = uastring.match(expr);\n    return match && match.length >= pos && parseInt(match[pos], 10);\n  },\n\n  /**\n   * Browser detector.\n   *\n   * @return {object} result containing browser and version\n   *     properties.\n   */\n  detectBrowser: function(window) {\n    var navigator = window && window.navigator;\n\n    // Returned result object.\n    var result = {};\n    result.browser = null;\n    result.version = null;\n\n    // Fail early if it's not a browser\n    if (typeof window === 'undefined' || !window.navigator) {\n      result.browser = 'Not a browser.';\n      return result;\n    }\n\n    // Firefox.\n    if (navigator.mozGetUserMedia) {\n      result.browser = 'firefox';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Firefox\\/(\\d+)\\./, 1);\n    } else if (navigator.webkitGetUserMedia) {\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\n      if (window.webkitRTCPeerConnection) {\n        result.browser = 'chrome';\n        result.version = this.extractVersion(navigator.userAgent,\n          /Chrom(e|ium)\\/(\\d+)\\./, 2);\n      } else { // Safari (in an unpublished version) or unknown webkit-based.\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\n          result.browser = 'safari';\n          result.version = this.extractVersion(navigator.userAgent,\n            /AppleWebKit\\/(\\d+)\\./, 1);\n        } else { // unknown webkit-based browser.\n          result.browser = 'Unsupported webkit-based browser ' +\n              'with GUM support but no WebRTC support.';\n          return result;\n        }\n      }\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n      result.browser = 'edge';\n      result.version = this.extractVersion(navigator.userAgent,\n          /Edge\\/(\\d+).(\\d+)$/, 2);\n    } else if (navigator.mediaDevices &&\n        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n        // Safari, with webkitGetUserMedia removed.\n      result.browser = 'safari';\n      result.version = this.extractVersion(navigator.userAgent,\n          /AppleWebKit\\/(\\d+)\\./, 1);\n    } else { // Default fallthrough: not supported.\n      result.browser = 'Not a supported browser.';\n      return result;\n    }\n\n    return result;\n  },\n\n};\n\n// Export.\nmodule.exports = {\n  log: utils.log,\n  deprecated: utils.deprecated,\n  disableLog: utils.disableLog,\n  disableWarnings: utils.disableWarnings,\n  extractVersion: utils.extractVersion,\n  shimCreateObjectURL: utils.shimCreateObjectURL,\n  detectBrowser: utils.detectBrowser.bind(utils)\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI1MS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvdXRpbHMuanM/ZTZlOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBsb2dEaXNhYmxlZF8gPSB0cnVlO1xudmFyIGRlcHJlY2F0aW9uV2FybmluZ3NfID0gdHJ1ZTtcblxuLy8gVXRpbGl0eSBtZXRob2RzLlxudmFyIHV0aWxzID0ge1xuICBkaXNhYmxlTG9nOiBmdW5jdGlvbihib29sKSB7XG4gICAgaWYgKHR5cGVvZiBib29sICE9PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0FyZ3VtZW50IHR5cGU6ICcgKyB0eXBlb2YgYm9vbCArXG4gICAgICAgICAgJy4gUGxlYXNlIHVzZSBhIGJvb2xlYW4uJyk7XG4gICAgfVxuICAgIGxvZ0Rpc2FibGVkXyA9IGJvb2w7XG4gICAgcmV0dXJuIChib29sKSA/ICdhZGFwdGVyLmpzIGxvZ2dpbmcgZGlzYWJsZWQnIDpcbiAgICAgICAgJ2FkYXB0ZXIuanMgbG9nZ2luZyBlbmFibGVkJztcbiAgfSxcblxuICAvKipcbiAgICogRGlzYWJsZSBvciBlbmFibGUgZGVwcmVjYXRpb24gd2FybmluZ3NcbiAgICogQHBhcmFtIHshYm9vbGVhbn0gYm9vbCBzZXQgdG8gdHJ1ZSB0byBkaXNhYmxlIHdhcm5pbmdzLlxuICAgKi9cbiAgZGlzYWJsZVdhcm5pbmdzOiBmdW5jdGlvbihib29sKSB7XG4gICAgaWYgKHR5cGVvZiBib29sICE9PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0FyZ3VtZW50IHR5cGU6ICcgKyB0eXBlb2YgYm9vbCArXG4gICAgICAgICAgJy4gUGxlYXNlIHVzZSBhIGJvb2xlYW4uJyk7XG4gICAgfVxuICAgIGRlcHJlY2F0aW9uV2FybmluZ3NfID0gIWJvb2w7XG4gICAgcmV0dXJuICdhZGFwdGVyLmpzIGRlcHJlY2F0aW9uIHdhcm5pbmdzICcgKyAoYm9vbCA/ICdkaXNhYmxlZCcgOiAnZW5hYmxlZCcpO1xuICB9LFxuXG4gIGxvZzogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAobG9nRGlzYWJsZWRfKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNvbnNvbGUubG9nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTaG93cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgc3VnZ2VzdGluZyB0aGUgbW9kZXJuIGFuZCBzcGVjLWNvbXBhdGlibGUgQVBJLlxuICAgKi9cbiAgZGVwcmVjYXRlZDogZnVuY3Rpb24ob2xkTWV0aG9kLCBuZXdNZXRob2QpIHtcbiAgICBpZiAoIWRlcHJlY2F0aW9uV2FybmluZ3NfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUud2FybihvbGRNZXRob2QgKyAnIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgJyArIG5ld01ldGhvZCArXG4gICAgICAgICcgaW5zdGVhZC4nKTtcbiAgfSxcblxuICAvKipcbiAgICogRXh0cmFjdCBicm93c2VyIHZlcnNpb24gb3V0IG9mIHRoZSBwcm92aWRlZCB1c2VyIGFnZW50IHN0cmluZy5cbiAgICpcbiAgICogQHBhcmFtIHshc3RyaW5nfSB1YXN0cmluZyB1c2VyQWdlbnQgc3RyaW5nLlxuICAgKiBAcGFyYW0geyFzdHJpbmd9IGV4cHIgUmVndWxhciBleHByZXNzaW9uIHVzZWQgYXMgbWF0Y2ggY3JpdGVyaWEuXG4gICAqIEBwYXJhbSB7IW51bWJlcn0gcG9zIHBvc2l0aW9uIGluIHRoZSB2ZXJzaW9uIHN0cmluZyB0byBiZSByZXR1cm5lZC5cbiAgICogQHJldHVybiB7IW51bWJlcn0gYnJvd3NlciB2ZXJzaW9uLlxuICAgKi9cbiAgZXh0cmFjdFZlcnNpb246IGZ1bmN0aW9uKHVhc3RyaW5nLCBleHByLCBwb3MpIHtcbiAgICB2YXIgbWF0Y2ggPSB1YXN0cmluZy5tYXRjaChleHByKTtcbiAgICByZXR1cm4gbWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID49IHBvcyAmJiBwYXJzZUludChtYXRjaFtwb3NdLCAxMCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEJyb3dzZXIgZGV0ZWN0b3IuXG4gICAqXG4gICAqIEByZXR1cm4ge29iamVjdH0gcmVzdWx0IGNvbnRhaW5pbmcgYnJvd3NlciBhbmQgdmVyc2lvblxuICAgKiAgICAgcHJvcGVydGllcy5cbiAgICovXG4gIGRldGVjdEJyb3dzZXI6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIHZhciBuYXZpZ2F0b3IgPSB3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvcjtcblxuICAgIC8vIFJldHVybmVkIHJlc3VsdCBvYmplY3QuXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIHJlc3VsdC5icm93c2VyID0gbnVsbDtcbiAgICByZXN1bHQudmVyc2lvbiA9IG51bGw7XG5cbiAgICAvLyBGYWlsIGVhcmx5IGlmIGl0J3Mgbm90IGEgYnJvd3NlclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCAhd2luZG93Lm5hdmlnYXRvcikge1xuICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnTm90IGEgYnJvd3Nlci4nO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvLyBGaXJlZm94LlxuICAgIGlmIChuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7XG4gICAgICByZXN1bHQuYnJvd3NlciA9ICdmaXJlZm94JztcbiAgICAgIHJlc3VsdC52ZXJzaW9uID0gdGhpcy5leHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgICAgIC9GaXJlZm94XFwvKFxcZCspXFwuLywgMSk7XG4gICAgfSBlbHNlIGlmIChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKSB7XG4gICAgICAvLyBDaHJvbWUsIENocm9taXVtLCBXZWJ2aWV3LCBPcGVyYSwgYWxsIHVzZSB0aGUgY2hyb21lIHNoaW0gZm9yIG5vd1xuICAgICAgaWYgKHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbikge1xuICAgICAgICByZXN1bHQuYnJvd3NlciA9ICdjaHJvbWUnO1xuICAgICAgICByZXN1bHQudmVyc2lvbiA9IHRoaXMuZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgICAvQ2hyb20oZXxpdW0pXFwvKFxcZCspXFwuLywgMik7XG4gICAgICB9IGVsc2UgeyAvLyBTYWZhcmkgKGluIGFuIHVucHVibGlzaGVkIHZlcnNpb24pIG9yIHVua25vd24gd2Via2l0LWJhc2VkLlxuICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblxcLyhcXGQrKS4oXFxkKykvKSkge1xuICAgICAgICAgIHJlc3VsdC5icm93c2VyID0gJ3NhZmFyaSc7XG4gICAgICAgICAgcmVzdWx0LnZlcnNpb24gPSB0aGlzLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsXG4gICAgICAgICAgICAvQXBwbGVXZWJLaXRcXC8oXFxkKylcXC4vLCAxKTtcbiAgICAgICAgfSBlbHNlIHsgLy8gdW5rbm93biB3ZWJraXQtYmFzZWQgYnJvd3Nlci5cbiAgICAgICAgICByZXN1bHQuYnJvd3NlciA9ICdVbnN1cHBvcnRlZCB3ZWJraXQtYmFzZWQgYnJvd3NlciAnICtcbiAgICAgICAgICAgICAgJ3dpdGggR1VNIHN1cHBvcnQgYnV0IG5vIFdlYlJUQyBzdXBwb3J0Lic7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJlxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9FZGdlXFwvKFxcZCspLihcXGQrKSQvKSkgeyAvLyBFZGdlLlxuICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnZWRnZSc7XG4gICAgICByZXN1bHQudmVyc2lvbiA9IHRoaXMuZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgICAvRWRnZVxcLyhcXGQrKS4oXFxkKykkLywgMik7XG4gICAgfSBlbHNlIGlmIChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICYmXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FwcGxlV2ViS2l0XFwvKFxcZCspXFwuLykpIHtcbiAgICAgICAgLy8gU2FmYXJpLCB3aXRoIHdlYmtpdEdldFVzZXJNZWRpYSByZW1vdmVkLlxuICAgICAgcmVzdWx0LmJyb3dzZXIgPSAnc2FmYXJpJztcbiAgICAgIHJlc3VsdC52ZXJzaW9uID0gdGhpcy5leHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LFxuICAgICAgICAgIC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8sIDEpO1xuICAgIH0gZWxzZSB7IC8vIERlZmF1bHQgZmFsbHRocm91Z2g6IG5vdCBzdXBwb3J0ZWQuXG4gICAgICByZXN1bHQuYnJvd3NlciA9ICdOb3QgYSBzdXBwb3J0ZWQgYnJvd3Nlci4nO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxuXG59O1xuXG4vLyBFeHBvcnQuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbG9nOiB1dGlscy5sb2csXG4gIGRlcHJlY2F0ZWQ6IHV0aWxzLmRlcHJlY2F0ZWQsXG4gIGRpc2FibGVMb2c6IHV0aWxzLmRpc2FibGVMb2csXG4gIGRpc2FibGVXYXJuaW5nczogdXRpbHMuZGlzYWJsZVdhcm5pbmdzLFxuICBleHRyYWN0VmVyc2lvbjogdXRpbHMuZXh0cmFjdFZlcnNpb24sXG4gIHNoaW1DcmVhdGVPYmplY3RVUkw6IHV0aWxzLnNoaW1DcmVhdGVPYmplY3RVUkwsXG4gIGRldGVjdEJyb3dzZXI6IHV0aWxzLmRldGVjdEJyb3dzZXIuYmluZCh1dGlscylcbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy91dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMjI1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2251\n");

/***/ }),

/***/ 2272:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar GetLinkModal = function (_React$Component) {\n    (0, _inherits3.default)(GetLinkModal, _React$Component);\n\n    function GetLinkModal(props) {\n        (0, _classCallCheck3.default)(this, GetLinkModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (GetLinkModal.__proto__ || (0, _getPrototypeOf2.default)(GetLinkModal)).call(this, props));\n\n        _this.onHide = _this.onHide.bind(_this);\n\n        _this.copyLink = _this.copyLink.bind(_this);\n\n        _this.state = {\n            copiedLink: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(GetLinkModal, [{\n        key: 'onHide',\n        value: function onHide() {\n            this.setState({ copiedLink: false });\n\n            this.props.onHide();\n        }\n    }, {\n        key: 'copyLink',\n        value: function copyLink() {\n            var textarea = this.refs.textarea;\n            textarea.focus();\n            textarea.setSelectionRange(0, this.props.link.length);\n\n            try {\n                if (document.execCommand('copy')) {\n                    this.setState({ copiedLink: true });\n                } else {\n                    this.setState({ copiedLink: false });\n                }\n            } catch (err) {\n                this.setState({ copiedLink: false });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var helpText = null;\n            if (this.props.helpText) {\n                helpText = _react2.default.createElement(\n                    'p',\n                    null,\n                    this.props.helpText,\n                    _react2.default.createElement('br', null),\n                    _react2.default.createElement('br', null)\n                );\n            }\n\n            var copyLink = null;\n            if (document.queryCommandSupported('copy')) {\n                copyLink = _react2.default.createElement(\n                    'button',\n                    {\n                        'data-copy-btn': 'true',\n                        type: 'button',\n                        className: 'btn btn-primary pull-left',\n                        onClick: this.copyLink\n                    },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'get_link.copy',\n                        defaultMessage: 'Copy Link'\n                    })\n                );\n            }\n\n            var linkText = _react2.default.createElement('textarea', {\n                className: 'form-control no-resize min-height',\n                ref: 'textarea',\n                value: this.props.link,\n                onClick: this.copyLink,\n                readOnly: true\n            });\n\n            var copyLinkConfirm = null;\n            if (this.state.copiedLink) {\n                copyLinkConfirm = _react2.default.createElement(\n                    'p',\n                    { className: 'alert alert-success alert--confirm' },\n                    _react2.default.createElement('i', { className: 'fa fa-check' }),\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'get_link.clipboard',\n                        defaultMessage: ' Link copied'\n                    })\n                );\n            }\n\n            return _react2.default.createElement(\n                _reactBootstrap.Modal,\n                {\n                    show: this.props.show,\n                    onHide: this.onHide\n                },\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Header,\n                    { closeButton: true },\n                    _react2.default.createElement(\n                        'h4',\n                        { className: 'modal-title' },\n                        this.props.title\n                    )\n                ),\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Body,\n                    null,\n                    helpText,\n                    linkText\n                ),\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Footer,\n                    null,\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            type: 'button',\n                            className: 'btn btn-default',\n                            onClick: this.onHide\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'get_link.close',\n                            defaultMessage: 'Close'\n                        })\n                    ),\n                    copyLink,\n                    copyLinkConfirm\n                )\n            );\n        }\n    }]);\n    return GetLinkModal;\n}(_react2.default.Component);\n\nexports.default = GetLinkModal;\n\n\nGetLinkModal.propTypes = {\n    show: _propTypes2.default.bool.isRequired,\n    onHide: _propTypes2.default.func.isRequired,\n    title: _propTypes2.default.string.isRequired,\n    helpText: _propTypes2.default.string,\n    link: _propTypes2.default.string.isRequired\n};\n\nGetLinkModal.defaultProps = {\n    helpText: null\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI3Mi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2dldF9saW5rX21vZGFsLmpzeD9hZTA4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge01vZGFsfSBmcm9tICdyZWFjdC1ib290c3RyYXAnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2V0TGlua01vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5vbkhpZGUgPSB0aGlzLm9uSGlkZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuY29weUxpbmsgPSB0aGlzLmNvcHlMaW5rLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGNvcGllZExpbms6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgb25IaWRlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtjb3BpZWRMaW5rOiBmYWxzZX0pO1xuXG4gICAgICAgIHRoaXMucHJvcHMub25IaWRlKCk7XG4gICAgfVxuXG4gICAgY29weUxpbmsoKSB7XG4gICAgICAgIGNvbnN0IHRleHRhcmVhID0gdGhpcy5yZWZzLnRleHRhcmVhO1xuICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xuICAgICAgICB0ZXh0YXJlYS5zZXRTZWxlY3Rpb25SYW5nZSgwLCB0aGlzLnByb3BzLmxpbmsubGVuZ3RoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjb3BpZWRMaW5rOiB0cnVlfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvcGllZExpbms6IGZhbHNlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y29waWVkTGluazogZmFsc2V9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IGhlbHBUZXh0ID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaGVscFRleHQpIHtcbiAgICAgICAgICAgIGhlbHBUZXh0ID0gKFxuICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5oZWxwVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNvcHlMaW5rID0gbnVsbDtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZCgnY29weScpKSB7XG4gICAgICAgICAgICBjb3B5TGluayA9IChcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtY29weS1idG49J3RydWUnXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdidG4gYnRuLXByaW1hcnkgcHVsbC1sZWZ0J1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNvcHlMaW5rfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdnZXRfbGluay5jb3B5J1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0NvcHkgTGluaydcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsaW5rVGV4dCA9IChcbiAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sIG5vLXJlc2l6ZSBtaW4taGVpZ2h0J1xuICAgICAgICAgICAgICAgIHJlZj0ndGV4dGFyZWEnXG4gICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMubGlua31cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNvcHlMaW5rfVxuICAgICAgICAgICAgICAgIHJlYWRPbmx5PXt0cnVlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgY29weUxpbmtDb25maXJtID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY29waWVkTGluaykge1xuICAgICAgICAgICAgY29weUxpbmtDb25maXJtID0gKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0nYWxlcnQgYWxlcnQtc3VjY2VzcyBhbGVydC0tY29uZmlybSc+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtY2hlY2snLz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdnZXRfbGluay5jbGlwYm9hcmQnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nIExpbmsgY29waWVkJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPE1vZGFsXG4gICAgICAgICAgICAgICAgc2hvdz17dGhpcy5wcm9wcy5zaG93fVxuICAgICAgICAgICAgICAgIG9uSGlkZT17dGhpcy5vbkhpZGV9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPE1vZGFsLkhlYWRlciBjbG9zZUJ1dHRvbj17dHJ1ZX0+XG4gICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9J21vZGFsLXRpdGxlJz57dGhpcy5wcm9wcy50aXRsZX08L2g0PlxuICAgICAgICAgICAgICAgIDwvTW9kYWwuSGVhZGVyPlxuICAgICAgICAgICAgICAgIDxNb2RhbC5Cb2R5PlxuICAgICAgICAgICAgICAgICAgICB7aGVscFRleHR9XG4gICAgICAgICAgICAgICAgICAgIHtsaW5rVGV4dH1cbiAgICAgICAgICAgICAgICA8L01vZGFsLkJvZHk+XG4gICAgICAgICAgICAgICAgPE1vZGFsLkZvb3Rlcj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdidG4gYnRuLWRlZmF1bHQnXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uSGlkZX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nZ2V0X2xpbmsuY2xvc2UnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0Nsb3NlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIHtjb3B5TGlua31cbiAgICAgICAgICAgICAgICAgICAge2NvcHlMaW5rQ29uZmlybX1cbiAgICAgICAgICAgICAgICA8L01vZGFsLkZvb3Rlcj5cbiAgICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5HZXRMaW5rTW9kYWwucHJvcFR5cGVzID0ge1xuICAgIHNob3c6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgb25IaWRlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgaGVscFRleHQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbGluazogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG59O1xuXG5HZXRMaW5rTW9kYWwuZGVmYXVsdFByb3BzID0ge1xuICAgIGhlbHBUZXh0OiBudWxsXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvZ2V0X2xpbmtfbW9kYWwuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFQQTtBQUNBO0FBQ0E7QUFNQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBUEE7QUFVQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQVlBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFVQTtBQUNBO0FBWkE7QUFYQTtBQTJCQTs7O0FBbkhBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFvSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BO0FBQ0E7QUFEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2272\n");

/***/ }),

/***/ 2280:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\nvar prefix = __webpack_require__(2498)\nvar toCamelCase = __webpack_require__(2499)\nvar cache = { 'float': 'cssFloat' }\nvar addPxToStyle = __webpack_require__(2502)\n\nfunction style (element, property, value) {\n  var camel = cache[property]\n  if (typeof camel === 'undefined') {\n    camel = detect(property)\n  }\n\n  // may be false if CSS prop is unsupported\n  if (camel) {\n    if (value === undefined) {\n      return element.style[camel]\n    }\n\n    element.style[camel] = addPxToStyle(camel, value)\n  }\n}\n\nfunction each (element, properties) {\n  for (var k in properties) {\n    if (properties.hasOwnProperty(k)) {\n      style(element, k, properties[k])\n    }\n  }\n}\n\nfunction detect (cssProp) {\n  var camel = toCamelCase(cssProp)\n  var result = prefix(camel)\n  cache[camel] = cache[cssProp] = cache[result] = result\n  return result\n}\n\nfunction set () {\n  if (arguments.length === 2) {\n    if (typeof arguments[1] === 'string') {\n      arguments[0].style.cssText = arguments[1]\n    } else {\n      each(arguments[0], arguments[1])\n    }\n  } else {\n    style(arguments[0], arguments[1], arguments[2])\n  }\n}\n\nmodule.exports = set\nmodule.exports.set = set\n\nmodule.exports.get = function (element, properties) {\n  if (Array.isArray(properties)) {\n    return properties.reduce(function (obj, prop) {\n      obj[prop] = style(element, prop || '')\n      return obj\n    }, {})\n  } else {\n    return style(element, properties || '')\n  }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI4MC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kb20tY3NzL2luZGV4LmpzP2JjZmQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cbnZhciBwcmVmaXggPSByZXF1aXJlKCdwcmVmaXgtc3R5bGUnKVxudmFyIHRvQ2FtZWxDYXNlID0gcmVxdWlyZSgndG8tY2FtZWwtY2FzZScpXG52YXIgY2FjaGUgPSB7ICdmbG9hdCc6ICdjc3NGbG9hdCcgfVxudmFyIGFkZFB4VG9TdHlsZSA9IHJlcXVpcmUoJ2FkZC1weC10by1zdHlsZScpXG5cbmZ1bmN0aW9uIHN0eWxlIChlbGVtZW50LCBwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgdmFyIGNhbWVsID0gY2FjaGVbcHJvcGVydHldXG4gIGlmICh0eXBlb2YgY2FtZWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY2FtZWwgPSBkZXRlY3QocHJvcGVydHkpXG4gIH1cblxuICAvLyBtYXkgYmUgZmFsc2UgaWYgQ1NTIHByb3AgaXMgdW5zdXBwb3J0ZWRcbiAgaWYgKGNhbWVsKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBlbGVtZW50LnN0eWxlW2NhbWVsXVxuICAgIH1cblxuICAgIGVsZW1lbnQuc3R5bGVbY2FtZWxdID0gYWRkUHhUb1N0eWxlKGNhbWVsLCB2YWx1ZSlcbiAgfVxufVxuXG5mdW5jdGlvbiBlYWNoIChlbGVtZW50LCBwcm9wZXJ0aWVzKSB7XG4gIGZvciAodmFyIGsgaW4gcHJvcGVydGllcykge1xuICAgIGlmIChwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICBzdHlsZShlbGVtZW50LCBrLCBwcm9wZXJ0aWVzW2tdKVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkZXRlY3QgKGNzc1Byb3ApIHtcbiAgdmFyIGNhbWVsID0gdG9DYW1lbENhc2UoY3NzUHJvcClcbiAgdmFyIHJlc3VsdCA9IHByZWZpeChjYW1lbClcbiAgY2FjaGVbY2FtZWxdID0gY2FjaGVbY3NzUHJvcF0gPSBjYWNoZVtyZXN1bHRdID0gcmVzdWx0XG4gIHJldHVybiByZXN1bHRcbn1cblxuZnVuY3Rpb24gc2V0ICgpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGFyZ3VtZW50c1swXS5zdHlsZS5jc3NUZXh0ID0gYXJndW1lbnRzWzFdXG4gICAgfSBlbHNlIHtcbiAgICAgIGVhY2goYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHN0eWxlKGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRcbm1vZHVsZS5leHBvcnRzLnNldCA9IHNldFxuXG5tb2R1bGUuZXhwb3J0cy5nZXQgPSBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcGVydGllcykge1xuICBpZiAoQXJyYXkuaXNBcnJheShwcm9wZXJ0aWVzKSkge1xuICAgIHJldHVybiBwcm9wZXJ0aWVzLnJlZHVjZShmdW5jdGlvbiAob2JqLCBwcm9wKSB7XG4gICAgICBvYmpbcHJvcF0gPSBzdHlsZShlbGVtZW50LCBwcm9wIHx8ICcnKVxuICAgICAgcmV0dXJuIG9ialxuICAgIH0sIHt9KVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHlsZShlbGVtZW50LCBwcm9wZXJ0aWVzIHx8ICcnKVxuICB9XG59XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2RvbS1jc3MvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDIyODBcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2280\n");

/***/ }),

/***/ 2281:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _user_agent = __webpack_require__(90);\n\nvar UserAgent = _interopRequireWildcard(_user_agent);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar SettingsSidebar = function (_React$Component) {\n    (0, _inherits3.default)(SettingsSidebar, _React$Component);\n\n    function SettingsSidebar(props) {\n        (0, _classCallCheck3.default)(this, SettingsSidebar);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SettingsSidebar.__proto__ || (0, _getPrototypeOf2.default)(SettingsSidebar)).call(this, props));\n\n        _this.handleClick = _this.handleClick.bind(_this);\n        return _this;\n    }\n\n    (0, _createClass3.default)(SettingsSidebar, [{\n        key: 'handleClick',\n        value: function handleClick(tab, e) {\n            e.preventDefault();\n            this.props.updateTab(tab.name);\n            (0, _jquery2.default)(e.target).closest('.settings-modal').addClass('display--content');\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (UserAgent.isFirefox()) {\n                (0, _jquery2.default)('.settings-modal .settings-table .nav').addClass('position--top');\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var tabList = this.props.tabs.map(function (tab) {\n                var key = tab.name + '_li';\n                var className = '';\n                if (_this2.props.activeTab === tab.name) {\n                    className = 'active';\n                }\n\n                return _react2.default.createElement(\n                    'li',\n                    {\n                        id: tab.name + 'Li',\n                        key: key,\n                        className: className\n                    },\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            id: tab.name + 'Button',\n                            className: 'cursor--pointer style--none',\n                            onClick: _this2.handleClick.bind(null, tab)\n                        },\n                        _react2.default.createElement('i', { className: tab.icon }),\n                        tab.uiName\n                    )\n                );\n            });\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'ul',\n                    {\n                        id: 'tabList',\n                        className: 'nav nav-pills nav-stacked'\n                    },\n                    tabList\n                )\n            );\n        }\n    }]);\n    return SettingsSidebar;\n}(_react2.default.Component);\n\nexports.default = SettingsSidebar;\n\n\nSettingsSidebar.propTypes = {\n    tabs: _propTypes2.default.arrayOf(_propTypes2.default.shape({\n        name: _propTypes2.default.string.isRequired,\n        uiName: _propTypes2.default.string.isRequired,\n        icon: _propTypes2.default.string.isRequired\n    })).isRequired,\n    activeTab: _propTypes2.default.string,\n    updateTab: _propTypes2.default.func.isRequired\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI4MS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3NldHRpbmdzX3NpZGViYXIuanN4PzNmZmQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0ICogYXMgVXNlckFnZW50IGZyb20gJ3V0aWxzL3VzZXJfYWdlbnQuanN4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2V0dGluZ3NTaWRlYmFyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5oYW5kbGVDbGljayA9IHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKTtcbiAgICB9XG4gICAgaGFuZGxlQ2xpY2sodGFiLCBlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVUYWIodGFiLm5hbWUpO1xuICAgICAgICAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuc2V0dGluZ3MtbW9kYWwnKS5hZGRDbGFzcygnZGlzcGxheS0tY29udGVudCcpO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgaWYgKFVzZXJBZ2VudC5pc0ZpcmVmb3goKSkge1xuICAgICAgICAgICAgJCgnLnNldHRpbmdzLW1vZGFsIC5zZXR0aW5ncy10YWJsZSAubmF2JykuYWRkQ2xhc3MoJ3Bvc2l0aW9uLS10b3AnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHRhYkxpc3QgPSB0aGlzLnByb3BzLnRhYnMubWFwKCh0YWIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke3RhYi5uYW1lfV9saWA7XG4gICAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gJyc7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVUYWIgPT09IHRhYi5uYW1lKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lID0gJ2FjdGl2ZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgICAgIGlkPXtgJHt0YWIubmFtZX1MaWB9XG4gICAgICAgICAgICAgICAgICAgIGtleT17a2V5fVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgJHt0YWIubmFtZX1CdXR0b25gfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdjdXJzb3ItLXBvaW50ZXIgc3R5bGUtLW5vbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrLmJpbmQobnVsbCwgdGFiKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPXt0YWIuaWNvbn0vPlxuICAgICAgICAgICAgICAgICAgICAgICAge3RhYi51aU5hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8dWxcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3RhYkxpc3QnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbmF2IG5hdi1waWxscyBuYXYtc3RhY2tlZCdcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHt0YWJMaXN0fVxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblNldHRpbmdzU2lkZWJhci5wcm9wVHlwZXMgPSB7XG4gICAgdGFiczogUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgbmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICB1aU5hbWU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICAgICAgaWNvbjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG4gICAgfSkpLmlzUmVxdWlyZWQsXG4gICAgYWN0aXZlVGFiOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHVwZGF0ZVRhYjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3NldHRpbmdzX3NpZGViYXIuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFEQTtBQUNBOzs7OztBQVRBO0FBQ0E7QUFDQTtBQVFBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFIQTtBQUlBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFOQTtBQUxBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFEQTtBQVNBOzs7QUFwREE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQXFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBUEEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2281\n");

/***/ }),

/***/ 2282:
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__.p + \"files/a4a8b617d1f6c75ad4bf17bafc2aec6a.mp3\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI4Mi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2ltYWdlcy9yaW5nLm1wMz8wMTFlIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImZpbGVzL2E0YThiNjE3ZDFmNmM3NWFkNGJmMTdiYWZjMmFlYzZhLm1wM1wiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vaW1hZ2VzL3JpbmcubXAzXG4vLyBtb2R1bGUgaWQgPSAyMjgyXG4vLyBtb2R1bGUgY2h1bmtzID0gNyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2282\n");

/***/ }),

/***/ 2283:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress); // was: relAddr\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort); // was: relPort\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n}\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  // was: channels\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      params.push(param + '=' + codec.parameters[param]);\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n}\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  caps.headerExtensions.forEach(function(extension) {\n    sdp += SDPUtils.writeExtmap(extension);\n  });\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.split(' ');\n    parts.shift();\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n        rtx: {\n          ssrc: secondarySsrc\n        }\n      };\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: secondarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  var cname;\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=thisisadapterortc ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return {\n    kind: mline[0].substr(2),\n    port: parseInt(mline[1], 10),\n    protocol: mline[2],\n    fmt: mline.slice(3).join(' ')\n  };\n};\n\n// Expose public methods.\nif (true) {\n  module.exports = SDPUtils;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI4My5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zZHAvc2RwLmpzPzA2NDAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cbiAvKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gU0RQIGhlbHBlcnMuXG52YXIgU0RQVXRpbHMgPSB7fTtcblxuLy8gR2VuZXJhdGUgYW4gYWxwaGFudW1lcmljIGlkZW50aWZpZXIgZm9yIGNuYW1lIG9yIG1pZHMuXG4vLyBUT0RPOiB1c2UgVVVJRHMgaW5zdGVhZD8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vamVkLzk4Mjg4M1xuU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgMTApO1xufTtcblxuLy8gVGhlIFJUQ1AgQ05BTUUgdXNlZCBieSBhbGwgcGVlcmNvbm5lY3Rpb25zIGZyb20gdGhlIHNhbWUgSlMuXG5TRFBVdGlscy5sb2NhbENOYW1lID0gU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7XG5cbi8vIFNwbGl0cyBTRFAgaW50byBsaW5lcywgZGVhbGluZyB3aXRoIGJvdGggQ1JMRiBhbmQgTEYuXG5TRFBVdGlscy5zcGxpdExpbmVzID0gZnVuY3Rpb24oYmxvYikge1xuICByZXR1cm4gYmxvYi50cmltKCkuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgcmV0dXJuIGxpbmUudHJpbSgpO1xuICB9KTtcbn07XG4vLyBTcGxpdHMgU0RQIGludG8gc2Vzc2lvbnBhcnQgYW5kIG1lZGlhc2VjdGlvbnMuIEVuc3VyZXMgQ1JMRi5cblNEUFV0aWxzLnNwbGl0U2VjdGlvbnMgPSBmdW5jdGlvbihibG9iKSB7XG4gIHZhciBwYXJ0cyA9IGJsb2Iuc3BsaXQoJ1xcbm09Jyk7XG4gIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24ocGFydCwgaW5kZXgpIHtcbiAgICByZXR1cm4gKGluZGV4ID4gMCA/ICdtPScgKyBwYXJ0IDogcGFydCkudHJpbSgpICsgJ1xcclxcbic7XG4gIH0pO1xufTtcblxuLy8gUmV0dXJucyBsaW5lcyB0aGF0IHN0YXJ0IHdpdGggYSBjZXJ0YWluIHByZWZpeC5cblNEUFV0aWxzLm1hdGNoUHJlZml4ID0gZnVuY3Rpb24oYmxvYiwgcHJlZml4KSB7XG4gIHJldHVybiBTRFBVdGlscy5zcGxpdExpbmVzKGJsb2IpLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgcmV0dXJuIGxpbmUuaW5kZXhPZihwcmVmaXgpID09PSAwO1xuICB9KTtcbn07XG5cbi8vIFBhcnNlcyBhbiBJQ0UgY2FuZGlkYXRlIGxpbmUuIFNhbXBsZSBpbnB1dDpcbi8vIGNhbmRpZGF0ZTo3MDI3ODYzNTAgMiB1ZHAgNDE4MTk5MDIgOC44LjguOCA2MDc2OSB0eXAgcmVsYXkgcmFkZHIgOC44LjguOFxuLy8gcnBvcnQgNTU5OTZcIlxuU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cztcbiAgLy8gUGFyc2UgYm90aCB2YXJpYW50cy5cbiAgaWYgKGxpbmUuaW5kZXhPZignYT1jYW5kaWRhdGU6JykgPT09IDApIHtcbiAgICBwYXJ0cyA9IGxpbmUuc3Vic3RyaW5nKDEyKS5zcGxpdCgnICcpO1xuICB9IGVsc2Uge1xuICAgIHBhcnRzID0gbGluZS5zdWJzdHJpbmcoMTApLnNwbGl0KCcgJyk7XG4gIH1cblxuICB2YXIgY2FuZGlkYXRlID0ge1xuICAgIGZvdW5kYXRpb246IHBhcnRzWzBdLFxuICAgIGNvbXBvbmVudDogcGFyc2VJbnQocGFydHNbMV0sIDEwKSxcbiAgICBwcm90b2NvbDogcGFydHNbMl0udG9Mb3dlckNhc2UoKSxcbiAgICBwcmlvcml0eTogcGFyc2VJbnQocGFydHNbM10sIDEwKSxcbiAgICBpcDogcGFydHNbNF0sXG4gICAgcG9ydDogcGFyc2VJbnQocGFydHNbNV0sIDEwKSxcbiAgICAvLyBza2lwIHBhcnRzWzZdID09ICd0eXAnXG4gICAgdHlwZTogcGFydHNbN11cbiAgfTtcblxuICBmb3IgKHZhciBpID0gODsgaSA8IHBhcnRzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgc3dpdGNoIChwYXJ0c1tpXSkge1xuICAgICAgY2FzZSAncmFkZHInOlxuICAgICAgICBjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncnBvcnQnOlxuICAgICAgICBjYW5kaWRhdGUucmVsYXRlZFBvcnQgPSBwYXJzZUludChwYXJ0c1tpICsgMV0sIDEwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0Y3B0eXBlJzpcbiAgICAgICAgY2FuZGlkYXRlLnRjcFR5cGUgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndWZyYWcnOlxuICAgICAgICBjYW5kaWRhdGUudWZyYWcgPSBwYXJ0c1tpICsgMV07IC8vIGZvciBiYWNrd2FyZCBjb21wYWJpbGl0eS5cbiAgICAgICAgY2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQgPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDogLy8gZXh0ZW5zaW9uIGhhbmRsaW5nLCBpbiBwYXJ0aWN1bGFyIHVmcmFnXG4gICAgICAgIGNhbmRpZGF0ZVtwYXJ0c1tpXV0gPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2FuZGlkYXRlO1xufTtcblxuLy8gVHJhbnNsYXRlcyBhIGNhbmRpZGF0ZSBvYmplY3QgaW50byBTRFAgY2FuZGlkYXRlIGF0dHJpYnV0ZS5cblNEUFV0aWxzLndyaXRlQ2FuZGlkYXRlID0gZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gIHZhciBzZHAgPSBbXTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLmZvdW5kYXRpb24pO1xuICBzZHAucHVzaChjYW5kaWRhdGUuY29tcG9uZW50KTtcbiAgc2RwLnB1c2goY2FuZGlkYXRlLnByb3RvY29sLnRvVXBwZXJDYXNlKCkpO1xuICBzZHAucHVzaChjYW5kaWRhdGUucHJpb3JpdHkpO1xuICBzZHAucHVzaChjYW5kaWRhdGUuaXApO1xuICBzZHAucHVzaChjYW5kaWRhdGUucG9ydCk7XG5cbiAgdmFyIHR5cGUgPSBjYW5kaWRhdGUudHlwZTtcbiAgc2RwLnB1c2goJ3R5cCcpO1xuICBzZHAucHVzaCh0eXBlKTtcbiAgaWYgKHR5cGUgIT09ICdob3N0JyAmJiBjYW5kaWRhdGUucmVsYXRlZEFkZHJlc3MgJiZcbiAgICAgIGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCkge1xuICAgIHNkcC5wdXNoKCdyYWRkcicpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkQWRkcmVzcyk7IC8vIHdhczogcmVsQWRkclxuICAgIHNkcC5wdXNoKCdycG9ydCcpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS5yZWxhdGVkUG9ydCk7IC8vIHdhczogcmVsUG9ydFxuICB9XG4gIGlmIChjYW5kaWRhdGUudGNwVHlwZSAmJiBjYW5kaWRhdGUucHJvdG9jb2wudG9Mb3dlckNhc2UoKSA9PT0gJ3RjcCcpIHtcbiAgICBzZHAucHVzaCgndGNwdHlwZScpO1xuICAgIHNkcC5wdXNoKGNhbmRpZGF0ZS50Y3BUeXBlKTtcbiAgfVxuICBpZiAoY2FuZGlkYXRlLnVmcmFnKSB7XG4gICAgc2RwLnB1c2goJ3VmcmFnJyk7XG4gICAgc2RwLnB1c2goY2FuZGlkYXRlLnVmcmFnKTtcbiAgfVxuICByZXR1cm4gJ2NhbmRpZGF0ZTonICsgc2RwLmpvaW4oJyAnKTtcbn07XG5cbi8vIFBhcnNlcyBhbiBpY2Utb3B0aW9ucyBsaW5lLCByZXR1cm5zIGFuIGFycmF5IG9mIG9wdGlvbiB0YWdzLlxuLy8gYT1pY2Utb3B0aW9uczpmb28gYmFyXG5TRFBVdGlscy5wYXJzZUljZU9wdGlvbnMgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHJldHVybiBsaW5lLnN1YnN0cigxNCkuc3BsaXQoJyAnKTtcbn1cblxuLy8gUGFyc2VzIGFuIHJ0cG1hcCBsaW5lLCByZXR1cm5zIFJUQ1J0cENvZGRlY1BhcmFtZXRlcnMuIFNhbXBsZSBpbnB1dDpcbi8vIGE9cnRwbWFwOjExMSBvcHVzLzQ4MDAwLzJcblNEUFV0aWxzLnBhcnNlUnRwTWFwID0gZnVuY3Rpb24obGluZSkge1xuICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cig5KS5zcGxpdCgnICcpO1xuICB2YXIgcGFyc2VkID0ge1xuICAgIHBheWxvYWRUeXBlOiBwYXJzZUludChwYXJ0cy5zaGlmdCgpLCAxMCkgLy8gd2FzOiBpZFxuICB9O1xuXG4gIHBhcnRzID0gcGFydHNbMF0uc3BsaXQoJy8nKTtcblxuICBwYXJzZWQubmFtZSA9IHBhcnRzWzBdO1xuICBwYXJzZWQuY2xvY2tSYXRlID0gcGFyc2VJbnQocGFydHNbMV0sIDEwKTsgLy8gd2FzOiBjbG9ja3JhdGVcbiAgLy8gd2FzOiBjaGFubmVsc1xuICBwYXJzZWQubnVtQ2hhbm5lbHMgPSBwYXJ0cy5sZW5ndGggPT09IDMgPyBwYXJzZUludChwYXJ0c1syXSwgMTApIDogMTtcbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cbi8vIEdlbmVyYXRlIGFuIGE9cnRwbWFwIGxpbmUgZnJvbSBSVENSdHBDb2RlY0NhcGFiaWxpdHkgb3Jcbi8vIFJUQ1J0cENvZGVjUGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRwTWFwID0gZnVuY3Rpb24oY29kZWMpIHtcbiAgdmFyIHB0ID0gY29kZWMucGF5bG9hZFR5cGU7XG4gIGlmIChjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcHQgPSBjb2RlYy5wcmVmZXJyZWRQYXlsb2FkVHlwZTtcbiAgfVxuICByZXR1cm4gJ2E9cnRwbWFwOicgKyBwdCArICcgJyArIGNvZGVjLm5hbWUgKyAnLycgKyBjb2RlYy5jbG9ja1JhdGUgK1xuICAgICAgKGNvZGVjLm51bUNoYW5uZWxzICE9PSAxID8gJy8nICsgY29kZWMubnVtQ2hhbm5lbHMgOiAnJykgKyAnXFxyXFxuJztcbn07XG5cbi8vIFBhcnNlcyBhbiBhPWV4dG1hcCBsaW5lIChoZWFkZXJleHRlbnNpb24gZnJvbSBSRkMgNTI4NSkuIFNhbXBsZSBpbnB1dDpcbi8vIGE9ZXh0bWFwOjIgdXJuOmlldGY6cGFyYW1zOnJ0cC1oZHJleHQ6dG9mZnNldFxuLy8gYT1leHRtYXA6Mi9zZW5kb25seSB1cm46aWV0ZjpwYXJhbXM6cnRwLWhkcmV4dDp0b2Zmc2V0XG5TRFBVdGlscy5wYXJzZUV4dG1hcCA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgdmFyIHBhcnRzID0gbGluZS5zdWJzdHIoOSkuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICBpZDogcGFyc2VJbnQocGFydHNbMF0sIDEwKSxcbiAgICBkaXJlY3Rpb246IHBhcnRzWzBdLmluZGV4T2YoJy8nKSA+IDAgPyBwYXJ0c1swXS5zcGxpdCgnLycpWzFdIDogJ3NlbmRyZWN2JyxcbiAgICB1cmk6IHBhcnRzWzFdXG4gIH07XG59O1xuXG4vLyBHZW5lcmF0ZXMgYT1leHRtYXAgbGluZSBmcm9tIFJUQ1J0cEhlYWRlckV4dGVuc2lvblBhcmFtZXRlcnMgb3Jcbi8vIFJUQ1J0cEhlYWRlckV4dGVuc2lvbi5cblNEUFV0aWxzLndyaXRlRXh0bWFwID0gZnVuY3Rpb24oaGVhZGVyRXh0ZW5zaW9uKSB7XG4gIHJldHVybiAnYT1leHRtYXA6JyArIChoZWFkZXJFeHRlbnNpb24uaWQgfHwgaGVhZGVyRXh0ZW5zaW9uLnByZWZlcnJlZElkKSArXG4gICAgICAoaGVhZGVyRXh0ZW5zaW9uLmRpcmVjdGlvbiAmJiBoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uICE9PSAnc2VuZHJlY3YnXG4gICAgICAgICAgPyAnLycgKyBoZWFkZXJFeHRlbnNpb24uZGlyZWN0aW9uXG4gICAgICAgICAgOiAnJykgK1xuICAgICAgJyAnICsgaGVhZGVyRXh0ZW5zaW9uLnVyaSArICdcXHJcXG4nO1xufTtcblxuLy8gUGFyc2VzIGFuIGZ0bXAgbGluZSwgcmV0dXJucyBkaWN0aW9uYXJ5LiBTYW1wbGUgaW5wdXQ6XG4vLyBhPWZtdHA6OTYgdmJyPW9uO2NuZz1vblxuLy8gQWxzbyBkZWFscyB3aXRoIHZicj1vbjsgY25nPW9uXG5TRFBVdGlscy5wYXJzZUZtdHAgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJzZWQgPSB7fTtcbiAgdmFyIGt2O1xuICB2YXIgcGFydHMgPSBsaW5lLnN1YnN0cihsaW5lLmluZGV4T2YoJyAnKSArIDEpLnNwbGl0KCc7Jyk7XG4gIGZvciAodmFyIGogPSAwOyBqIDwgcGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICBrdiA9IHBhcnRzW2pdLnRyaW0oKS5zcGxpdCgnPScpO1xuICAgIHBhcnNlZFtrdlswXS50cmltKCldID0ga3ZbMV07XG4gIH1cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cbi8vIEdlbmVyYXRlcyBhbiBhPWZ0bXAgbGluZSBmcm9tIFJUQ1J0cENvZGVjQ2FwYWJpbGl0eSBvciBSVENSdHBDb2RlY1BhcmFtZXRlcnMuXG5TRFBVdGlscy53cml0ZUZtdHAgPSBmdW5jdGlvbihjb2RlYykge1xuICB2YXIgbGluZSA9ICcnO1xuICB2YXIgcHQgPSBjb2RlYy5wYXlsb2FkVHlwZTtcbiAgaWYgKGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICBwdCA9IGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICB9XG4gIGlmIChjb2RlYy5wYXJhbWV0ZXJzICYmIE9iamVjdC5rZXlzKGNvZGVjLnBhcmFtZXRlcnMpLmxlbmd0aCkge1xuICAgIHZhciBwYXJhbXMgPSBbXTtcbiAgICBPYmplY3Qua2V5cyhjb2RlYy5wYXJhbWV0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgICBwYXJhbXMucHVzaChwYXJhbSArICc9JyArIGNvZGVjLnBhcmFtZXRlcnNbcGFyYW1dKTtcbiAgICB9KTtcbiAgICBsaW5lICs9ICdhPWZtdHA6JyArIHB0ICsgJyAnICsgcGFyYW1zLmpvaW4oJzsnKSArICdcXHJcXG4nO1xuICB9XG4gIHJldHVybiBsaW5lO1xufTtcblxuLy8gUGFyc2VzIGFuIHJ0Y3AtZmIgbGluZSwgcmV0dXJucyBSVENQUnRjcEZlZWRiYWNrIG9iamVjdC4gU2FtcGxlIGlucHV0OlxuLy8gYT1ydGNwLWZiOjk4IG5hY2sgcnBzaVxuU0RQVXRpbHMucGFyc2VSdGNwRmIgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKGxpbmUuaW5kZXhPZignICcpICsgMSkuc3BsaXQoJyAnKTtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBwYXJ0cy5zaGlmdCgpLFxuICAgIHBhcmFtZXRlcjogcGFydHMuam9pbignICcpXG4gIH07XG59O1xuLy8gR2VuZXJhdGUgYT1ydGNwLWZiIGxpbmVzIGZyb20gUlRDUnRwQ29kZWNDYXBhYmlsaXR5IG9yIFJUQ1J0cENvZGVjUGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRjcEZiID0gZnVuY3Rpb24oY29kZWMpIHtcbiAgdmFyIGxpbmVzID0gJyc7XG4gIHZhciBwdCA9IGNvZGVjLnBheWxvYWRUeXBlO1xuICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHB0ID0gY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGU7XG4gIH1cbiAgaWYgKGNvZGVjLnJ0Y3BGZWVkYmFjayAmJiBjb2RlYy5ydGNwRmVlZGJhY2subGVuZ3RoKSB7XG4gICAgLy8gRklYTUU6IHNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyci1pbnQ/XG4gICAgY29kZWMucnRjcEZlZWRiYWNrLmZvckVhY2goZnVuY3Rpb24oZmIpIHtcbiAgICAgIGxpbmVzICs9ICdhPXJ0Y3AtZmI6JyArIHB0ICsgJyAnICsgZmIudHlwZSArXG4gICAgICAoZmIucGFyYW1ldGVyICYmIGZiLnBhcmFtZXRlci5sZW5ndGggPyAnICcgKyBmYi5wYXJhbWV0ZXIgOiAnJykgK1xuICAgICAgICAgICdcXHJcXG4nO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBsaW5lcztcbn07XG5cbi8vIFBhcnNlcyBhbiBSRkMgNTU3NiBzc3JjIG1lZGlhIGF0dHJpYnV0ZS4gU2FtcGxlIGlucHV0OlxuLy8gYT1zc3JjOjM3MzU5Mjg1NTkgY25hbWU6c29tZXRoaW5nXG5TRFBVdGlscy5wYXJzZVNzcmNNZWRpYSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgdmFyIHNwID0gbGluZS5pbmRleE9mKCcgJyk7XG4gIHZhciBwYXJ0cyA9IHtcbiAgICBzc3JjOiBwYXJzZUludChsaW5lLnN1YnN0cig3LCBzcCAtIDcpLCAxMClcbiAgfTtcbiAgdmFyIGNvbG9uID0gbGluZS5pbmRleE9mKCc6Jywgc3ApO1xuICBpZiAoY29sb24gPiAtMSkge1xuICAgIHBhcnRzLmF0dHJpYnV0ZSA9IGxpbmUuc3Vic3RyKHNwICsgMSwgY29sb24gLSBzcCAtIDEpO1xuICAgIHBhcnRzLnZhbHVlID0gbGluZS5zdWJzdHIoY29sb24gKyAxKTtcbiAgfSBlbHNlIHtcbiAgICBwYXJ0cy5hdHRyaWJ1dGUgPSBsaW5lLnN1YnN0cihzcCArIDEpO1xuICB9XG4gIHJldHVybiBwYXJ0cztcbn07XG5cbi8vIEV4dHJhY3RzIHRoZSBNSUQgKFJGQyA1ODg4KSBmcm9tIGEgbWVkaWEgc2VjdGlvbi5cbi8vIHJldHVybnMgdGhlIE1JRCBvciB1bmRlZmluZWQgaWYgbm8gbWlkIGxpbmUgd2FzIGZvdW5kLlxuU0RQVXRpbHMuZ2V0TWlkID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBtaWQgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPW1pZDonKVswXTtcbiAgaWYgKG1pZCkge1xuICAgIHJldHVybiBtaWQuc3Vic3RyKDYpO1xuICB9XG59XG5cblNEUFV0aWxzLnBhcnNlRmluZ2VycHJpbnQgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBwYXJ0cyA9IGxpbmUuc3Vic3RyKDE0KS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIGFsZ29yaXRobTogcGFydHNbMF0udG9Mb3dlckNhc2UoKSwgLy8gYWxnb3JpdGhtIGlzIGNhc2Utc2Vuc2l0aXZlIGluIEVkZ2UuXG4gICAgdmFsdWU6IHBhcnRzWzFdXG4gIH07XG59O1xuXG4vLyBFeHRyYWN0cyBEVExTIHBhcmFtZXRlcnMgZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC5cbi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seVxuLy8gICBnZXQgdGhlIGZpbmdlcnByaW50IGxpbmUgYXMgaW5wdXQuIFNlZSBhbHNvIGdldEljZVBhcmFtZXRlcnMuXG5TRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgdmFyIGxpbmVzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uICsgc2Vzc2lvbnBhcnQsXG4gICAgICAnYT1maW5nZXJwcmludDonKTtcbiAgLy8gTm90ZTogYT1zZXR1cCBsaW5lIGlzIGlnbm9yZWQgc2luY2Ugd2UgdXNlIHRoZSAnYXV0bycgcm9sZS5cbiAgLy8gTm90ZTI6ICdhbGdvcml0aG0nIGlzIG5vdCBjYXNlIHNlbnNpdGl2ZSBleGNlcHQgaW4gRWRnZS5cbiAgcmV0dXJuIHtcbiAgICByb2xlOiAnYXV0bycsXG4gICAgZmluZ2VycHJpbnRzOiBsaW5lcy5tYXAoU0RQVXRpbHMucGFyc2VGaW5nZXJwcmludClcbiAgfTtcbn07XG5cbi8vIFNlcmlhbGl6ZXMgRFRMUyBwYXJhbWV0ZXJzIHRvIFNEUC5cblNEUFV0aWxzLndyaXRlRHRsc1BhcmFtZXRlcnMgPSBmdW5jdGlvbihwYXJhbXMsIHNldHVwVHlwZSkge1xuICB2YXIgc2RwID0gJ2E9c2V0dXA6JyArIHNldHVwVHlwZSArICdcXHJcXG4nO1xuICBwYXJhbXMuZmluZ2VycHJpbnRzLmZvckVhY2goZnVuY3Rpb24oZnApIHtcbiAgICBzZHAgKz0gJ2E9ZmluZ2VycHJpbnQ6JyArIGZwLmFsZ29yaXRobSArICcgJyArIGZwLnZhbHVlICsgJ1xcclxcbic7XG4gIH0pO1xuICByZXR1cm4gc2RwO1xufTtcbi8vIFBhcnNlcyBJQ0UgaW5mb3JtYXRpb24gZnJvbSBTRFAgbWVkaWEgc2VjdGlvbiBvciBzZXNzaW9ucGFydC5cbi8vIEZJWE1FOiBmb3IgY29uc2lzdGVuY3kgd2l0aCBvdGhlciBmdW5jdGlvbnMgdGhpcyBzaG91bGQgb25seVxuLy8gICBnZXQgdGhlIGljZS11ZnJhZyBhbmQgaWNlLXB3ZCBsaW5lcyBhcyBpbnB1dC5cblNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KSB7XG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgLy8gU2VhcmNoIGluIHNlc3Npb24gcGFydCwgdG9vLlxuICBsaW5lcyA9IGxpbmVzLmNvbmNhdChTRFBVdGlscy5zcGxpdExpbmVzKHNlc3Npb25wYXJ0KSk7XG4gIHZhciBpY2VQYXJhbWV0ZXJzID0ge1xuICAgIHVzZXJuYW1lRnJhZ21lbnQ6IGxpbmVzLmZpbHRlcihmdW5jdGlvbihsaW5lKSB7XG4gICAgICByZXR1cm4gbGluZS5pbmRleE9mKCdhPWljZS11ZnJhZzonKSA9PT0gMDtcbiAgICB9KVswXS5zdWJzdHIoMTIpLFxuICAgIHBhc3N3b3JkOiBsaW5lcy5maWx0ZXIoZnVuY3Rpb24obGluZSkge1xuICAgICAgcmV0dXJuIGxpbmUuaW5kZXhPZignYT1pY2UtcHdkOicpID09PSAwO1xuICAgIH0pWzBdLnN1YnN0cigxMClcbiAgfTtcbiAgcmV0dXJuIGljZVBhcmFtZXRlcnM7XG59O1xuXG4vLyBTZXJpYWxpemVzIElDRSBwYXJhbWV0ZXJzIHRvIFNEUC5cblNEUFV0aWxzLndyaXRlSWNlUGFyYW1ldGVycyA9IGZ1bmN0aW9uKHBhcmFtcykge1xuICByZXR1cm4gJ2E9aWNlLXVmcmFnOicgKyBwYXJhbXMudXNlcm5hbWVGcmFnbWVudCArICdcXHJcXG4nICtcbiAgICAgICdhPWljZS1wd2Q6JyArIHBhcmFtcy5wYXNzd29yZCArICdcXHJcXG4nO1xufTtcblxuLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBSVENSdHBQYXJhbWV0ZXJzLlxuU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBkZXNjcmlwdGlvbiA9IHtcbiAgICBjb2RlY3M6IFtdLFxuICAgIGhlYWRlckV4dGVuc2lvbnM6IFtdLFxuICAgIGZlY01lY2hhbmlzbXM6IFtdLFxuICAgIHJ0Y3A6IFtdXG4gIH07XG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgdmFyIG1saW5lID0gbGluZXNbMF0uc3BsaXQoJyAnKTtcbiAgZm9yICh2YXIgaSA9IDM7IGkgPCBtbGluZS5sZW5ndGg7IGkrKykgeyAvLyBmaW5kIGFsbCBjb2RlY3MgZnJvbSBtbGluZVszLi5dXG4gICAgdmFyIHB0ID0gbWxpbmVbaV07XG4gICAgdmFyIHJ0cG1hcGxpbmUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChcbiAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydHBtYXA6JyArIHB0ICsgJyAnKVswXTtcbiAgICBpZiAocnRwbWFwbGluZSkge1xuICAgICAgdmFyIGNvZGVjID0gU0RQVXRpbHMucGFyc2VSdHBNYXAocnRwbWFwbGluZSk7XG4gICAgICB2YXIgZm10cHMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChcbiAgICAgICAgICBtZWRpYVNlY3Rpb24sICdhPWZtdHA6JyArIHB0ICsgJyAnKTtcbiAgICAgIC8vIE9ubHkgdGhlIGZpcnN0IGE9Zm10cDo8cHQ+IGlzIGNvbnNpZGVyZWQuXG4gICAgICBjb2RlYy5wYXJhbWV0ZXJzID0gZm10cHMubGVuZ3RoID8gU0RQVXRpbHMucGFyc2VGbXRwKGZtdHBzWzBdKSA6IHt9O1xuICAgICAgY29kZWMucnRjcEZlZWRiYWNrID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgoXG4gICAgICAgICAgbWVkaWFTZWN0aW9uLCAnYT1ydGNwLWZiOicgKyBwdCArICcgJylcbiAgICAgICAgLm1hcChTRFBVdGlscy5wYXJzZVJ0Y3BGYik7XG4gICAgICBkZXNjcmlwdGlvbi5jb2RlY3MucHVzaChjb2RlYyk7XG4gICAgICAvLyBwYXJzZSBGRUMgbWVjaGFuaXNtcyBmcm9tIHJ0cG1hcCBsaW5lcy5cbiAgICAgIHN3aXRjaCAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgIGNhc2UgJ1JFRCc6XG4gICAgICAgIGNhc2UgJ1VMUEZFQyc6XG4gICAgICAgICAgZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5wdXNoKGNvZGVjLm5hbWUudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IC8vIG9ubHkgUkVEIGFuZCBVTFBGRUMgYXJlIHJlY29nbml6ZWQgYXMgRkVDIG1lY2hhbmlzbXMuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9ZXh0bWFwOicpLmZvckVhY2goZnVuY3Rpb24obGluZSkge1xuICAgIGRlc2NyaXB0aW9uLmhlYWRlckV4dGVuc2lvbnMucHVzaChTRFBVdGlscy5wYXJzZUV4dG1hcChsaW5lKSk7XG4gIH0pO1xuICAvLyBGSVhNRTogcGFyc2UgcnRjcC5cbiAgcmV0dXJuIGRlc2NyaXB0aW9uO1xufTtcblxuLy8gR2VuZXJhdGVzIHBhcnRzIG9mIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBkZXNjcmliaW5nIHRoZSBjYXBhYmlsaXRpZXMgL1xuLy8gcGFyYW1ldGVycy5cblNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24gPSBmdW5jdGlvbihraW5kLCBjYXBzKSB7XG4gIHZhciBzZHAgPSAnJztcblxuICAvLyBCdWlsZCB0aGUgbWxpbmUuXG4gIHNkcCArPSAnbT0nICsga2luZCArICcgJztcbiAgc2RwICs9IGNhcHMuY29kZWNzLmxlbmd0aCA+IDAgPyAnOScgOiAnMCc7IC8vIHJlamVjdCBpZiBubyBjb2RlY3MuXG4gIHNkcCArPSAnIFVEUC9UTFMvUlRQL1NBVlBGICc7XG4gIHNkcCArPSBjYXBzLmNvZGVjcy5tYXAoZnVuY3Rpb24oY29kZWMpIHtcbiAgICBpZiAoY29kZWMucHJlZmVycmVkUGF5bG9hZFR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGNvZGVjLnByZWZlcnJlZFBheWxvYWRUeXBlO1xuICAgIH1cbiAgICByZXR1cm4gY29kZWMucGF5bG9hZFR5cGU7XG4gIH0pLmpvaW4oJyAnKSArICdcXHJcXG4nO1xuXG4gIHNkcCArPSAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbic7XG4gIHNkcCArPSAnYT1ydGNwOjkgSU4gSVA0IDAuMC4wLjBcXHJcXG4nO1xuXG4gIC8vIEFkZCBhPXJ0cG1hcCBsaW5lcyBmb3IgZWFjaCBjb2RlYy4gQWxzbyBmbXRwIGFuZCBydGNwLWZiLlxuICBjYXBzLmNvZGVjcy5mb3JFYWNoKGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgc2RwICs9IFNEUFV0aWxzLndyaXRlUnRwTWFwKGNvZGVjKTtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVGbXRwKGNvZGVjKTtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVSdGNwRmIoY29kZWMpO1xuICB9KTtcbiAgdmFyIG1heHB0aW1lID0gMDtcbiAgY2Fwcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihjb2RlYykge1xuICAgIGlmIChjb2RlYy5tYXhwdGltZSA+IG1heHB0aW1lKSB7XG4gICAgICBtYXhwdGltZSA9IGNvZGVjLm1heHB0aW1lO1xuICAgIH1cbiAgfSk7XG4gIGlmIChtYXhwdGltZSA+IDApIHtcbiAgICBzZHAgKz0gJ2E9bWF4cHRpbWU6JyArIG1heHB0aW1lICsgJ1xcclxcbic7XG4gIH1cbiAgc2RwICs9ICdhPXJ0Y3AtbXV4XFxyXFxuJztcblxuICBjYXBzLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbihleHRlbnNpb24pIHtcbiAgICBzZHAgKz0gU0RQVXRpbHMud3JpdGVFeHRtYXAoZXh0ZW5zaW9uKTtcbiAgfSk7XG4gIC8vIEZJWE1FOiB3cml0ZSBmZWNNZWNoYW5pc21zLlxuICByZXR1cm4gc2RwO1xufTtcblxuLy8gUGFyc2VzIHRoZSBTRFAgbWVkaWEgc2VjdGlvbiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZlxuLy8gUlRDUnRwRW5jb2RpbmdQYXJhbWV0ZXJzLlxuU0RQVXRpbHMucGFyc2VSdHBFbmNvZGluZ1BhcmFtZXRlcnMgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIGVuY29kaW5nUGFyYW1ldGVycyA9IFtdO1xuICB2YXIgZGVzY3JpcHRpb24gPSBTRFBVdGlscy5wYXJzZVJ0cFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTtcbiAgdmFyIGhhc1JlZCA9IGRlc2NyaXB0aW9uLmZlY01lY2hhbmlzbXMuaW5kZXhPZignUkVEJykgIT09IC0xO1xuICB2YXIgaGFzVWxwZmVjID0gZGVzY3JpcHRpb24uZmVjTWVjaGFuaXNtcy5pbmRleE9mKCdVTFBGRUMnKSAhPT0gLTE7XG5cbiAgLy8gZmlsdGVyIGE9c3NyYzouLi4gY25hbWU6LCBpZ25vcmUgUGxhbkItbXNpZFxuICB2YXIgc3NyY3MgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPXNzcmM6JylcbiAgLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgcmV0dXJuIFNEUFV0aWxzLnBhcnNlU3NyY01lZGlhKGxpbmUpO1xuICB9KVxuICAuZmlsdGVyKGZ1bmN0aW9uKHBhcnRzKSB7XG4gICAgcmV0dXJuIHBhcnRzLmF0dHJpYnV0ZSA9PT0gJ2NuYW1lJztcbiAgfSk7XG4gIHZhciBwcmltYXJ5U3NyYyA9IHNzcmNzLmxlbmd0aCA+IDAgJiYgc3NyY3NbMF0uc3NyYztcbiAgdmFyIHNlY29uZGFyeVNzcmM7XG5cbiAgdmFyIGZsb3dzID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1zc3JjLWdyb3VwOkZJRCcpXG4gIC5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgIHZhciBwYXJ0cyA9IGxpbmUuc3BsaXQoJyAnKTtcbiAgICBwYXJ0cy5zaGlmdCgpO1xuICAgIHJldHVybiBwYXJ0cy5tYXAoZnVuY3Rpb24ocGFydCkge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KHBhcnQsIDEwKTtcbiAgICB9KTtcbiAgfSk7XG4gIGlmIChmbG93cy5sZW5ndGggPiAwICYmIGZsb3dzWzBdLmxlbmd0aCA+IDEgJiYgZmxvd3NbMF1bMF0gPT09IHByaW1hcnlTc3JjKSB7XG4gICAgc2Vjb25kYXJ5U3NyYyA9IGZsb3dzWzBdWzFdO1xuICB9XG5cbiAgZGVzY3JpcHRpb24uY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHtcbiAgICBpZiAoY29kZWMubmFtZS50b1VwcGVyQ2FzZSgpID09PSAnUlRYJyAmJiBjb2RlYy5wYXJhbWV0ZXJzLmFwdCkge1xuICAgICAgdmFyIGVuY1BhcmFtID0ge1xuICAgICAgICBzc3JjOiBwcmltYXJ5U3NyYyxcbiAgICAgICAgY29kZWNQYXlsb2FkVHlwZTogcGFyc2VJbnQoY29kZWMucGFyYW1ldGVycy5hcHQsIDEwKSxcbiAgICAgICAgcnR4OiB7XG4gICAgICAgICAgc3NyYzogc2Vjb25kYXJ5U3NyY1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgZW5jb2RpbmdQYXJhbWV0ZXJzLnB1c2goZW5jUGFyYW0pO1xuICAgICAgaWYgKGhhc1JlZCkge1xuICAgICAgICBlbmNQYXJhbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZW5jUGFyYW0pKTtcbiAgICAgICAgZW5jUGFyYW0uZmVjID0ge1xuICAgICAgICAgIHNzcmM6IHNlY29uZGFyeVNzcmMsXG4gICAgICAgICAgbWVjaGFuaXNtOiBoYXNVbHBmZWMgPyAncmVkK3VscGZlYycgOiAncmVkJ1xuICAgICAgICB9O1xuICAgICAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaChlbmNQYXJhbSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgaWYgKGVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGggPT09IDAgJiYgcHJpbWFyeVNzcmMpIHtcbiAgICBlbmNvZGluZ1BhcmFtZXRlcnMucHVzaCh7XG4gICAgICBzc3JjOiBwcmltYXJ5U3NyY1xuICAgIH0pO1xuICB9XG5cbiAgLy8gd2Ugc3VwcG9ydCBib3RoIGI9QVMgYW5kIGI9VElBUyBidXQgaW50ZXJwcmV0IEFTIGFzIFRJQVMuXG4gIHZhciBiYW5kd2lkdGggPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdiPScpO1xuICBpZiAoYmFuZHdpZHRoLmxlbmd0aCkge1xuICAgIGlmIChiYW5kd2lkdGhbMF0uaW5kZXhPZignYj1USUFTOicpID09PSAwKSB7XG4gICAgICBiYW5kd2lkdGggPSBwYXJzZUludChiYW5kd2lkdGhbMF0uc3Vic3RyKDcpLCAxMCk7XG4gICAgfSBlbHNlIGlmIChiYW5kd2lkdGhbMF0uaW5kZXhPZignYj1BUzonKSA9PT0gMCkge1xuICAgICAgLy8gdXNlIGZvcm11bGEgZnJvbSBKU0VQIHRvIGNvbnZlcnQgYj1BUyB0byBUSUFTIHZhbHVlLlxuICAgICAgYmFuZHdpZHRoID0gcGFyc2VJbnQoYmFuZHdpZHRoWzBdLnN1YnN0cig1KSwgMTApICogMTAwMCAqIDAuOTVcbiAgICAgICAgICAtICg1MCAqIDQwICogOCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJhbmR3aWR0aCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZW5jb2RpbmdQYXJhbWV0ZXJzLmZvckVhY2goZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICBwYXJhbXMubWF4Qml0cmF0ZSA9IGJhbmR3aWR0aDtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZW5jb2RpbmdQYXJhbWV0ZXJzO1xufTtcblxuLy8gcGFyc2VzIGh0dHA6Ly9kcmFmdC5vcnRjLm9yZy8jcnRjcnRjcHBhcmFtZXRlcnMqXG5TRFBVdGlscy5wYXJzZVJ0Y3BQYXJhbWV0ZXJzID0gZnVuY3Rpb24obWVkaWFTZWN0aW9uKSB7XG4gIHZhciBydGNwUGFyYW1ldGVycyA9IHt9O1xuXG4gIHZhciBjbmFtZTtcbiAgLy8gR2V0cyB0aGUgZmlyc3QgU1NSQy4gTm90ZSB0aGF0IHdpdGggUlRYIHRoZXJlIG1pZ2h0IGJlIG11bHRpcGxlXG4gIC8vIFNTUkNzLlxuICB2YXIgcmVtb3RlU3NyYyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAgICAgLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgIHJldHVybiBTRFBVdGlscy5wYXJzZVNzcmNNZWRpYShsaW5lKTtcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKGZ1bmN0aW9uKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqLmF0dHJpYnV0ZSA9PT0gJ2NuYW1lJztcbiAgICAgIH0pWzBdO1xuICBpZiAocmVtb3RlU3NyYykge1xuICAgIHJ0Y3BQYXJhbWV0ZXJzLmNuYW1lID0gcmVtb3RlU3NyYy52YWx1ZTtcbiAgICBydGNwUGFyYW1ldGVycy5zc3JjID0gcmVtb3RlU3NyYy5zc3JjO1xuICB9XG5cbiAgLy8gRWRnZSB1c2VzIHRoZSBjb21wb3VuZCBhdHRyaWJ1dGUgaW5zdGVhZCBvZiByZWR1Y2VkU2l6ZVxuICAvLyBjb21wb3VuZCBpcyAhcmVkdWNlZFNpemVcbiAgdmFyIHJzaXplID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1ydGNwLXJzaXplJyk7XG4gIHJ0Y3BQYXJhbWV0ZXJzLnJlZHVjZWRTaXplID0gcnNpemUubGVuZ3RoID4gMDtcbiAgcnRjcFBhcmFtZXRlcnMuY29tcG91bmQgPSByc2l6ZS5sZW5ndGggPT09IDA7XG5cbiAgLy8gcGFyc2VzIHRoZSBydGNwLW11eCBhdHRy0ZZidXRlLlxuICAvLyBOb3RlIHRoYXQgRWRnZSBkb2VzIG5vdCBzdXBwb3J0IHVubXV4ZWQgUlRDUC5cbiAgdmFyIG11eCA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9cnRjcC1tdXgnKTtcbiAgcnRjcFBhcmFtZXRlcnMubXV4ID0gbXV4Lmxlbmd0aCA+IDA7XG5cbiAgcmV0dXJuIHJ0Y3BQYXJhbWV0ZXJzO1xufTtcblxuLy8gcGFyc2VzIGVpdGhlciBhPW1zaWQ6IG9yIGE9c3NyYzouLi4gbXNpZCBsaW5lcyBhbmQgcmV0dXJuc1xuLy8gdGhlIGlkIG9mIHRoZSBNZWRpYVN0cmVhbSBhbmQgTWVkaWFTdHJlYW1UcmFjay5cblNEUFV0aWxzLnBhcnNlTXNpZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICB2YXIgcGFydHM7XG4gIHZhciBzcGVjID0gU0RQVXRpbHMubWF0Y2hQcmVmaXgobWVkaWFTZWN0aW9uLCAnYT1tc2lkOicpO1xuICBpZiAoc3BlYy5sZW5ndGggPT09IDEpIHtcbiAgICBwYXJ0cyA9IHNwZWNbMF0uc3Vic3RyKDcpLnNwbGl0KCcgJyk7XG4gICAgcmV0dXJuIHtzdHJlYW06IHBhcnRzWzBdLCB0cmFjazogcGFydHNbMV19O1xuICB9XG4gIHZhciBwbGFuQiA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9c3NyYzonKVxuICAubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VTc3JjTWVkaWEobGluZSk7XG4gIH0pXG4gIC5maWx0ZXIoZnVuY3Rpb24ocGFydHMpIHtcbiAgICByZXR1cm4gcGFydHMuYXR0cmlidXRlID09PSAnbXNpZCc7XG4gIH0pO1xuICBpZiAocGxhbkIubGVuZ3RoID4gMCkge1xuICAgIHBhcnRzID0gcGxhbkJbMF0udmFsdWUuc3BsaXQoJyAnKTtcbiAgICByZXR1cm4ge3N0cmVhbTogcGFydHNbMF0sIHRyYWNrOiBwYXJ0c1sxXX07XG4gIH1cbn07XG5cbi8vIEdlbmVyYXRlIGEgc2Vzc2lvbiBJRCBmb3IgU0RQLlxuLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWlldGYtcnRjd2ViLWpzZXAtMjAjc2VjdGlvbi01LjIuMVxuLy8gcmVjb21tZW5kcyB1c2luZyBhIGNyeXB0b2dyYXBoaWNhbGx5IHJhbmRvbSArdmUgNjQtYml0IHZhbHVlXG4vLyBidXQgcmlnaHQgbm93IHRoaXMgc2hvdWxkIGJlIGFjY2VwdGFibGUgYW5kIHdpdGhpbiB0aGUgcmlnaHQgcmFuZ2VcblNEUFV0aWxzLmdlbmVyYXRlU2Vzc2lvbklkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3Vic3RyKDIsIDIxKTtcbn07XG5cbi8vIFdyaXRlIGJvaWxkZXIgcGxhdGUgZm9yIHN0YXJ0IG9mIFNEUFxuLy8gc2Vzc0lkIGFyZ3VtZW50IGlzIG9wdGlvbmFsIC0gaWYgbm90IHN1cHBsaWVkIGl0IHdpbGxcbi8vIGJlIGdlbmVyYXRlZCByYW5kb21seVxuLy8gc2Vzc1ZlcnNpb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIDJcblNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlID0gZnVuY3Rpb24oc2Vzc0lkLCBzZXNzVmVyKSB7XG4gIHZhciBzZXNzaW9uSWQ7XG4gIHZhciB2ZXJzaW9uID0gc2Vzc1ZlciAhPT0gdW5kZWZpbmVkID8gc2Vzc1ZlciA6IDI7XG4gIGlmIChzZXNzSWQpIHtcbiAgICBzZXNzaW9uSWQgPSBzZXNzSWQ7XG4gIH0gZWxzZSB7XG4gICAgc2Vzc2lvbklkID0gU0RQVXRpbHMuZ2VuZXJhdGVTZXNzaW9uSWQoKTtcbiAgfVxuICAvLyBGSVhNRTogc2Vzcy1pZCBzaG91bGQgYmUgYW4gTlRQIHRpbWVzdGFtcC5cbiAgcmV0dXJuICd2PTBcXHJcXG4nICtcbiAgICAgICdvPXRoaXNpc2FkYXB0ZXJvcnRjICcgKyBzZXNzaW9uSWQgKyAnICcgKyB2ZXJzaW9uICsgJyBJTiBJUDQgMTI3LjAuMC4xXFxyXFxuJyArXG4gICAgICAncz0tXFxyXFxuJyArXG4gICAgICAndD0wIDBcXHJcXG4nO1xufTtcblxuU0RQVXRpbHMud3JpdGVNZWRpYVNlY3Rpb24gPSBmdW5jdGlvbih0cmFuc2NlaXZlciwgY2FwcywgdHlwZSwgc3RyZWFtKSB7XG4gIHZhciBzZHAgPSBTRFBVdGlscy53cml0ZVJ0cERlc2NyaXB0aW9uKHRyYW5zY2VpdmVyLmtpbmQsIGNhcHMpO1xuXG4gIC8vIE1hcCBJQ0UgcGFyYW1ldGVycyAodWZyYWcsIHB3ZCkgdG8gU0RQLlxuICBzZHAgKz0gU0RQVXRpbHMud3JpdGVJY2VQYXJhbWV0ZXJzKFxuICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkpO1xuXG4gIC8vIE1hcCBEVExTIHBhcmFtZXRlcnMgdG8gU0RQLlxuICBzZHAgKz0gU0RQVXRpbHMud3JpdGVEdGxzUGFyYW1ldGVycyhcbiAgICAgIHRyYW5zY2VpdmVyLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksXG4gICAgICB0eXBlID09PSAnb2ZmZXInID8gJ2FjdHBhc3MnIDogJ2FjdGl2ZScpO1xuXG4gIHNkcCArPSAnYT1taWQ6JyArIHRyYW5zY2VpdmVyLm1pZCArICdcXHJcXG4nO1xuXG4gIGlmICh0cmFuc2NlaXZlci5kaXJlY3Rpb24pIHtcbiAgICBzZHAgKz0gJ2E9JyArIHRyYW5zY2VpdmVyLmRpcmVjdGlvbiArICdcXHJcXG4nO1xuICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikge1xuICAgIHNkcCArPSAnYT1zZW5kcmVjdlxcclxcbic7XG4gIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyKSB7XG4gICAgc2RwICs9ICdhPXNlbmRvbmx5XFxyXFxuJztcbiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikge1xuICAgIHNkcCArPSAnYT1yZWN2b25seVxcclxcbic7XG4gIH0gZWxzZSB7XG4gICAgc2RwICs9ICdhPWluYWN0aXZlXFxyXFxuJztcbiAgfVxuXG4gIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHtcbiAgICAvLyBzcGVjLlxuICAgIHZhciBtc2lkID0gJ21zaWQ6JyArIHN0cmVhbS5pZCArICcgJyArXG4gICAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci50cmFjay5pZCArICdcXHJcXG4nO1xuICAgIHNkcCArPSAnYT0nICsgbXNpZDtcblxuICAgIC8vIGZvciBDaHJvbWUuXG4gICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArXG4gICAgICAgICcgJyArIG1zaWQ7XG4gICAgaWYgKHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7XG4gICAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArXG4gICAgICAgICAgJyAnICsgbXNpZDtcbiAgICAgIHNkcCArPSAnYT1zc3JjLWdyb3VwOkZJRCAnICtcbiAgICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgKyAnICcgK1xuICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMgK1xuICAgICAgICAgICdcXHJcXG4nO1xuICAgIH1cbiAgfVxuICAvLyBGSVhNRTogdGhpcyBzaG91bGQgYmUgd3JpdHRlbiBieSB3cml0ZVJ0cERlc2NyaXB0aW9uLlxuICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICtcbiAgICAgICcgY25hbWU6JyArIFNEUFV0aWxzLmxvY2FsQ05hbWUgKyAnXFxyXFxuJztcbiAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlciAmJiB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICtcbiAgICAgICAgJyBjbmFtZTonICsgU0RQVXRpbHMubG9jYWxDTmFtZSArICdcXHJcXG4nO1xuICB9XG4gIHJldHVybiBzZHA7XG59O1xuXG4vLyBHZXRzIHRoZSBkaXJlY3Rpb24gZnJvbSB0aGUgbWVkaWFTZWN0aW9uIG9yIHRoZSBzZXNzaW9ucGFydC5cblNEUFV0aWxzLmdldERpcmVjdGlvbiA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpIHtcbiAgLy8gTG9vayBmb3Igc2VuZHJlY3YsIHNlbmRvbmx5LCByZWN2b25seSwgaW5hY3RpdmUsIGRlZmF1bHQgdG8gc2VuZHJlY3YuXG4gIHZhciBsaW5lcyA9IFNEUFV0aWxzLnNwbGl0TGluZXMobWVkaWFTZWN0aW9uKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIHN3aXRjaCAobGluZXNbaV0pIHtcbiAgICAgIGNhc2UgJ2E9c2VuZHJlY3YnOlxuICAgICAgY2FzZSAnYT1zZW5kb25seSc6XG4gICAgICBjYXNlICdhPXJlY3Zvbmx5JzpcbiAgICAgIGNhc2UgJ2E9aW5hY3RpdmUnOlxuICAgICAgICByZXR1cm4gbGluZXNbaV0uc3Vic3RyKDIpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgLy8gRklYTUU6IFdoYXQgc2hvdWxkIGhhcHBlbiBoZXJlP1xuICAgIH1cbiAgfVxuICBpZiAoc2Vzc2lvbnBhcnQpIHtcbiAgICByZXR1cm4gU0RQVXRpbHMuZ2V0RGlyZWN0aW9uKHNlc3Npb25wYXJ0KTtcbiAgfVxuICByZXR1cm4gJ3NlbmRyZWN2Jztcbn07XG5cblNEUFV0aWxzLmdldEtpbmQgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICB2YXIgbWxpbmUgPSBsaW5lc1swXS5zcGxpdCgnICcpO1xuICByZXR1cm4gbWxpbmVbMF0uc3Vic3RyKDIpO1xufTtcblxuU0RQVXRpbHMuaXNSZWplY3RlZCA9IGZ1bmN0aW9uKG1lZGlhU2VjdGlvbikge1xuICByZXR1cm4gbWVkaWFTZWN0aW9uLnNwbGl0KCcgJywgMilbMV0gPT09ICcwJztcbn07XG5cblNEUFV0aWxzLnBhcnNlTUxpbmUgPSBmdW5jdGlvbihtZWRpYVNlY3Rpb24pIHtcbiAgdmFyIGxpbmVzID0gU0RQVXRpbHMuc3BsaXRMaW5lcyhtZWRpYVNlY3Rpb24pO1xuICB2YXIgbWxpbmUgPSBsaW5lc1swXS5zcGxpdCgnICcpO1xuICByZXR1cm4ge1xuICAgIGtpbmQ6IG1saW5lWzBdLnN1YnN0cigyKSxcbiAgICBwb3J0OiBwYXJzZUludChtbGluZVsxXSwgMTApLFxuICAgIHByb3RvY29sOiBtbGluZVsyXSxcbiAgICBmbXQ6IG1saW5lLnNsaWNlKDMpLmpvaW4oJyAnKVxuICB9O1xufTtcblxuLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLlxuaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gU0RQVXRpbHM7XG59XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3NkcC9zZHAuanNcbi8vIG1vZHVsZSBpZCA9IDIyODNcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2283\n");

/***/ }),

/***/ 2468:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _regenerator = __webpack_require__(77);\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = __webpack_require__(78);\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _es = __webpack_require__(45);\n\nvar _inobounce = __webpack_require__(2469);\n\nvar _inobounce2 = _interopRequireDefault(_inobounce);\n\nvar _posts = __webpack_require__(139);\n\nvar _status_actions = __webpack_require__(243);\n\nvar _user_actions = __webpack_require__(71);\n\nvar _websocket_actions = __webpack_require__(322);\n\nvar _channel_store = __webpack_require__(34);\n\nvar _channel_store2 = _interopRequireDefault(_channel_store);\n\nvar _post_store = __webpack_require__(320);\n\nvar _post_store2 = _interopRequireDefault(_post_store);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _redux_store = __webpack_require__(39);\n\nvar _redux_store2 = _interopRequireDefault(_redux_store);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _pluggable = __webpack_require__(324);\n\nvar _pluggable2 = _interopRequireDefault(_pluggable);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _user_agent = __webpack_require__(90);\n\nvar UserAgent = _interopRequireWildcard(_user_agent);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _announcement_bar = __webpack_require__(2167);\n\nvar _announcement_bar2 = _interopRequireDefault(_announcement_bar);\n\nvar _delete_post_modal = __webpack_require__(2470);\n\nvar _delete_post_modal2 = _interopRequireDefault(_delete_post_modal);\n\nvar _edit_post_modal = __webpack_require__(2471);\n\nvar _edit_post_modal2 = _interopRequireDefault(_edit_post_modal);\n\nvar _get_post_link_modal = __webpack_require__(2472);\n\nvar _get_post_link_modal2 = _interopRequireDefault(_get_post_link_modal);\n\nvar _get_public_link_modal = __webpack_require__(2473);\n\nvar _get_public_link_modal2 = _interopRequireDefault(_get_public_link_modal);\n\nvar _get_team_invite_link_modal = __webpack_require__(2474);\n\nvar _get_team_invite_link_modal2 = _interopRequireDefault(_get_team_invite_link_modal);\n\nvar _invite_member_modal = __webpack_require__(2475);\n\nvar _invite_member_modal2 = _interopRequireDefault(_invite_member_modal);\n\nvar _leave_team_modal = __webpack_require__(2476);\n\nvar _leave_team_modal2 = _interopRequireDefault(_leave_team_modal);\n\nvar _leave_private_channel_modal = __webpack_require__(2477);\n\nvar _leave_private_channel_modal2 = _interopRequireDefault(_leave_private_channel_modal);\n\nvar _navbar = __webpack_require__(2478);\n\nvar _navbar2 = _interopRequireDefault(_navbar);\n\nvar _removed_from_channel_modal = __webpack_require__(2485);\n\nvar _removed_from_channel_modal2 = _interopRequireDefault(_removed_from_channel_modal);\n\nvar _reset_status_modal = __webpack_require__(2486);\n\nvar _reset_status_modal2 = _interopRequireDefault(_reset_status_modal);\n\nvar _shortcuts_modal = __webpack_require__(2488);\n\nvar _shortcuts_modal2 = _interopRequireDefault(_shortcuts_modal);\n\nvar _sidebar_right = __webpack_require__(2489);\n\nvar _sidebar_right2 = _interopRequireDefault(_sidebar_right);\n\nvar _sidebar_right_menu = __webpack_require__(2519);\n\nvar _sidebar_right_menu2 = _interopRequireDefault(_sidebar_right_menu);\n\nvar _team_settings_modal = __webpack_require__(2520);\n\nvar _team_settings_modal2 = _interopRequireDefault(_team_settings_modal);\n\nvar _import_theme_modal = __webpack_require__(2525);\n\nvar _import_theme_modal2 = _interopRequireDefault(_import_theme_modal);\n\nvar _user_settings_modal = __webpack_require__(2526);\n\nvar _user_settings_modal2 = _interopRequireDefault(_user_settings_modal);\n\nvar _webrtc_notification = __webpack_require__(2550);\n\nvar _webrtc_notification2 = _interopRequireDefault(_webrtc_notification);\n\nvar _webrtc_sidebar = __webpack_require__(2551);\n\nvar _webrtc_sidebar2 = _interopRequireDefault(_webrtc_sidebar);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TutorialSteps = _constants2.default.TutorialSteps; // Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar Preferences = _constants2.default.Preferences;\n\nvar UNREAD_CHECK_TIME_MILLISECONDS = 10000;\n\nvar NeedsTeam = function (_React$Component) {\n    (0, _inherits3.default)(NeedsTeam, _React$Component);\n\n    function NeedsTeam(params) {\n        (0, _classCallCheck3.default)(this, NeedsTeam);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (NeedsTeam.__proto__ || (0, _getPrototypeOf2.default)(NeedsTeam)).call(this, params));\n\n        _this.onTeamChanged = _this.onTeamChanged.bind(_this);\n        _this.onPreferencesChanged = _this.onPreferencesChanged.bind(_this);\n\n        _this.blurTime = new Date().getTime();\n\n        var team = _team_store2.default.getCurrent();\n\n        _this.state = {\n            team: team,\n            theme: _preference_store2.default.getTheme(team.id)\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(NeedsTeam, [{\n        key: 'onTeamChanged',\n        value: function onTeamChanged() {\n            var team = _team_store2.default.getCurrent();\n\n            this.setState({\n                team: team,\n                theme: _preference_store2.default.getTheme(team.id)\n            });\n        }\n    }, {\n        key: 'onPreferencesChanged',\n        value: function onPreferencesChanged(category) {\n            if (!category || category === Preferences.CATEGORY_THEME) {\n                this.setState({\n                    theme: _preference_store2.default.getTheme(this.state.team.id)\n                });\n            }\n        }\n    }, {\n        key: 'componentWillMount',\n        value: function componentWillMount() {\n            // Go to tutorial if we are first arriving\n            var tutorialStep = _preference_store2.default.getInt(Preferences.TUTORIAL_STEP, _user_store2.default.getCurrentId(), 999);\n            if (tutorialStep <= TutorialSteps.INTRO_SCREENS) {\n                _es.browserHistory.push(_team_store2.default.getCurrentTeamRelativeUrl() + '/tutorial');\n            }\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            _team_store2.default.addChangeListener(this.onTeamChanged);\n            _preference_store2.default.addChangeListener(this.onPreferencesChanged);\n\n            (0, _status_actions.startPeriodicStatusUpdates)();\n            (0, _websocket_actions.startPeriodicSync)();\n\n            // Set up tracking for whether the window is active\n            window.isActive = true;\n            (0, _jquery2.default)(window).on('focus', (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _channel_store2.default.resetCounts([_channel_store2.default.getCurrentId()]);\n                                _channel_store2.default.emitChange();\n                                window.isActive = true;\n\n                                _context.next = 5;\n                                return _this2.props.actions.viewChannel(_channel_store2.default.getCurrentId());\n\n                            case 5:\n                                if (new Date().getTime() - _this2.blurTime > UNREAD_CHECK_TIME_MILLISECONDS) {\n                                    _this2.props.actions.getMyChannelMembers(_team_store2.default.getCurrentId()).then(_user_actions.loadProfilesForSidebar);\n                                }\n\n                            case 6:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, _this2);\n            })));\n\n            (0, _jquery2.default)(window).on('blur', function () {\n                window.isActive = false;\n                _this2.blurTime = new Date().getTime();\n                if (_user_store2.default.getCurrentUser()) {\n                    _this2.props.actions.viewChannel('');\n                }\n            });\n\n            Utils.applyTheme(this.state.theme);\n\n            if (UserAgent.isIosSafari()) {\n                // Use iNoBounce to prevent scrolling past the boundaries of the page\n                _inobounce2.default.enable();\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps, prevState) {\n            if (!Utils.areObjectsEqual(prevState.theme, this.state.theme)) {\n                Utils.applyTheme(this.state.theme);\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _team_store2.default.removeChangeListener(this.onTeamChanged);\n            _preference_store2.default.removeChangeListener(this.onPreferencesChanged);\n            (0, _jquery2.default)(window).off('focus');\n            (0, _jquery2.default)(window).off('blur');\n\n            if (UserAgent.isIosSafari()) {\n                _inobounce2.default.disable();\n            }\n            (0, _status_actions.stopPeriodicStatusUpdates)();\n            (0, _websocket_actions.stopPeriodicSync)();\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var content = [];\n            if (this.props.children) {\n                content = this.props.children;\n            } else {\n                content.push(this.props.navbar);\n                content.push(this.props.team_sidebar);\n                content.push(this.props.sidebar);\n                content.push(_react2.default.createElement(\n                    'div',\n                    {\n                        key: 'inner-wrap',\n                        className: 'inner-wrap channel__wrap'\n                    },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'row header' },\n                        _react2.default.createElement(\n                            'div',\n                            { id: 'navbar' },\n                            _react2.default.createElement(_navbar2.default, null)\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'row main' },\n                        _react2.default.cloneElement(this.props.center, {\n                            user: this.props.user,\n                            team: this.state.team\n                        })\n                    )\n                ));\n            }\n\n            var channel = _channel_store2.default.getByName(this.props.params.channel);\n            if (channel == null) {\n                // the permalink view is not really tied to a particular channel but still needs it\n                var postId = _post_store2.default.getFocusedPostId();\n                var post = (0, _posts.getPost)(_redux_store2.default.getState(), postId);\n\n                // the post take some time before being available on page load\n                if (post != null) {\n                    channel = _channel_store2.default.get(post.channel_id);\n                }\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'channel-view' },\n                _react2.default.createElement(_announcement_bar2.default, null),\n                _react2.default.createElement(_webrtc_notification2.default, null),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'container-fluid' },\n                    _react2.default.createElement(_sidebar_right2.default, { channel: channel }),\n                    _react2.default.createElement(_sidebar_right_menu2.default, { teamType: this.state.team.type }),\n                    _react2.default.createElement(_webrtc_sidebar2.default, null),\n                    content,\n                    _react2.default.createElement(_pluggable2.default, { pluggableName: 'Root' }),\n                    _react2.default.createElement(_user_settings_modal2.default, null),\n                    _react2.default.createElement(_get_post_link_modal2.default, null),\n                    _react2.default.createElement(_get_public_link_modal2.default, null),\n                    _react2.default.createElement(_get_team_invite_link_modal2.default, null),\n                    _react2.default.createElement(_invite_member_modal2.default, null),\n                    _react2.default.createElement(_leave_team_modal2.default, null),\n                    _react2.default.createElement(_import_theme_modal2.default, null),\n                    _react2.default.createElement(_team_settings_modal2.default, null),\n                    _react2.default.createElement(_edit_post_modal2.default, null),\n                    _react2.default.createElement(_delete_post_modal2.default, null),\n                    _react2.default.createElement(_removed_from_channel_modal2.default, null),\n                    _react2.default.createElement(_reset_status_modal2.default, null),\n                    _react2.default.createElement(_leave_private_channel_modal2.default, null),\n                    _react2.default.createElement(_shortcuts_modal2.default, { isMac: Utils.isMac() })\n                )\n            );\n        }\n    }]);\n    return NeedsTeam;\n}(_react2.default.Component);\n\nNeedsTeam.propTypes = {\n    children: _propTypes2.default.oneOfType([_propTypes2.default.arrayOf(_propTypes2.default.element), _propTypes2.default.element]),\n    navbar: _propTypes2.default.element,\n    sidebar: _propTypes2.default.element,\n    team_sidebar: _propTypes2.default.element,\n    center: _propTypes2.default.element,\n    params: _propTypes2.default.object,\n    user: _propTypes2.default.object,\n    actions: _propTypes2.default.shape({\n        viewChannel: _propTypes2.default.func.isRequired,\n        getMyChannelMembers: _propTypes2.default.func.isRequired\n    }).isRequired\n};\nexports.default = NeedsTeam;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ2OC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL25lZWRzX3RlYW0vbmVlZHNfdGVhbS5qc3g/YmM4NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTYtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHticm93c2VySGlzdG9yeX0gZnJvbSAncmVhY3Qtcm91dGVyL2VzNic7XG5cbmltcG9ydCBpTm9Cb3VuY2UgZnJvbSAnaW5vYm91bmNlJztcblxuaW1wb3J0IHtnZXRQb3N0fSBmcm9tICdtYXR0ZXJtb3N0LXJlZHV4L3NlbGVjdG9ycy9lbnRpdGllcy9wb3N0cyc7XG5cbmltcG9ydCB7c3RhcnRQZXJpb2RpY1N0YXR1c1VwZGF0ZXMsIHN0b3BQZXJpb2RpY1N0YXR1c1VwZGF0ZXN9IGZyb20gJ2FjdGlvbnMvc3RhdHVzX2FjdGlvbnMuanN4JztcbmltcG9ydCB7bG9hZFByb2ZpbGVzRm9yU2lkZWJhcn0gZnJvbSAnYWN0aW9ucy91c2VyX2FjdGlvbnMuanN4JztcbmltcG9ydCB7c3RhcnRQZXJpb2RpY1N5bmMsIHN0b3BQZXJpb2RpY1N5bmN9IGZyb20gJ2FjdGlvbnMvd2Vic29ja2V0X2FjdGlvbnMuanN4JztcbmltcG9ydCBDaGFubmVsU3RvcmUgZnJvbSAnc3RvcmVzL2NoYW5uZWxfc3RvcmUuanN4JztcbmltcG9ydCBQb3N0U3RvcmUgZnJvbSAnc3RvcmVzL3Bvc3Rfc3RvcmUuanN4JztcbmltcG9ydCBQcmVmZXJlbmNlU3RvcmUgZnJvbSAnc3RvcmVzL3ByZWZlcmVuY2Vfc3RvcmUuanN4JztcbmltcG9ydCBzdG9yZSBmcm9tICdzdG9yZXMvcmVkdXhfc3RvcmUuanN4JztcbmltcG9ydCBUZWFtU3RvcmUgZnJvbSAnc3RvcmVzL3RlYW1fc3RvcmUuanN4JztcbmltcG9ydCBVc2VyU3RvcmUgZnJvbSAnc3RvcmVzL3VzZXJfc3RvcmUuanN4JztcblxuaW1wb3J0IFBsdWdnYWJsZSBmcm9tICdwbHVnaW5zL3BsdWdnYWJsZSc7XG5cbmltcG9ydCBDb25zdGFudHMgZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5pbXBvcnQgKiBhcyBVc2VyQWdlbnQgZnJvbSAndXRpbHMvdXNlcl9hZ2VudC5qc3gnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAndXRpbHMvdXRpbHMuanN4JztcblxuaW1wb3J0IEFubm91bmNlbWVudEJhciBmcm9tICdjb21wb25lbnRzL2Fubm91bmNlbWVudF9iYXInO1xuaW1wb3J0IERlbGV0ZVBvc3RNb2RhbCBmcm9tICdjb21wb25lbnRzL2RlbGV0ZV9wb3N0X21vZGFsLmpzeCc7XG5pbXBvcnQgRWRpdFBvc3RNb2RhbCBmcm9tICdjb21wb25lbnRzL2VkaXRfcG9zdF9tb2RhbC5qc3gnO1xuaW1wb3J0IEdldFBvc3RMaW5rTW9kYWwgZnJvbSAnY29tcG9uZW50cy9nZXRfcG9zdF9saW5rX21vZGFsLmpzeCc7XG5pbXBvcnQgR2V0UHVibGljTGlua01vZGFsIGZyb20gJ2NvbXBvbmVudHMvZ2V0X3B1YmxpY19saW5rX21vZGFsLmpzeCc7XG5pbXBvcnQgR2V0VGVhbUludml0ZUxpbmtNb2RhbCBmcm9tICdjb21wb25lbnRzL2dldF90ZWFtX2ludml0ZV9saW5rX21vZGFsLmpzeCc7XG5pbXBvcnQgSW52aXRlTWVtYmVyTW9kYWwgZnJvbSAnY29tcG9uZW50cy9pbnZpdGVfbWVtYmVyX21vZGFsLmpzeCc7XG5pbXBvcnQgTGVhdmVUZWFtTW9kYWwgZnJvbSAnY29tcG9uZW50cy9sZWF2ZV90ZWFtX21vZGFsLmpzeCc7XG5pbXBvcnQgTGVhdmVQcml2YXRlQ2hhbm5lbE1vZGFsIGZyb20gJ2NvbXBvbmVudHMvbW9kYWxzL2xlYXZlX3ByaXZhdGVfY2hhbm5lbF9tb2RhbC5qc3gnO1xuaW1wb3J0IE5hdmJhciBmcm9tICdjb21wb25lbnRzL25hdmJhcic7XG5pbXBvcnQgUmVtb3ZlZEZyb21DaGFubmVsTW9kYWwgZnJvbSAnY29tcG9uZW50cy9yZW1vdmVkX2Zyb21fY2hhbm5lbF9tb2RhbC5qc3gnO1xuaW1wb3J0IFJlc2V0U3RhdHVzTW9kYWwgZnJvbSAnY29tcG9uZW50cy9yZXNldF9zdGF0dXNfbW9kYWwnO1xuaW1wb3J0IFNob3J0Y3V0c01vZGFsIGZyb20gJ2NvbXBvbmVudHMvc2hvcnRjdXRzX21vZGFsLmpzeCc7XG5pbXBvcnQgU2lkZWJhclJpZ2h0IGZyb20gJ2NvbXBvbmVudHMvc2lkZWJhcl9yaWdodCc7XG5pbXBvcnQgU2lkZWJhclJpZ2h0TWVudSBmcm9tICdjb21wb25lbnRzL3NpZGViYXJfcmlnaHRfbWVudS5qc3gnO1xuaW1wb3J0IFRlYW1TZXR0aW5nc01vZGFsIGZyb20gJ2NvbXBvbmVudHMvdGVhbV9zZXR0aW5nc19tb2RhbC5qc3gnO1xuaW1wb3J0IEltcG9ydFRoZW1lTW9kYWwgZnJvbSAnY29tcG9uZW50cy91c2VyX3NldHRpbmdzL2ltcG9ydF90aGVtZV9tb2RhbC5qc3gnO1xuaW1wb3J0IFVzZXJTZXR0aW5nc01vZGFsIGZyb20gJ2NvbXBvbmVudHMvdXNlcl9zZXR0aW5ncy91c2VyX3NldHRpbmdzX21vZGFsLmpzeCc7XG5pbXBvcnQgV2VicnRjTm90aWZpY2F0aW9uIGZyb20gJ2NvbXBvbmVudHMvd2VicnRjL2NvbXBvbmVudHMvd2VicnRjX25vdGlmaWNhdGlvbi5qc3gnO1xuaW1wb3J0IFdlYnJ0Y1NpZGViYXIgZnJvbSAnY29tcG9uZW50cy93ZWJydGMvY29tcG9uZW50cy93ZWJydGNfc2lkZWJhci5qc3gnO1xuXG5jb25zdCBUdXRvcmlhbFN0ZXBzID0gQ29uc3RhbnRzLlR1dG9yaWFsU3RlcHM7XG5jb25zdCBQcmVmZXJlbmNlcyA9IENvbnN0YW50cy5QcmVmZXJlbmNlcztcblxuY29uc3QgVU5SRUFEX0NIRUNLX1RJTUVfTUlMTElTRUNPTkRTID0gMTAwMDA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5lZWRzVGVhbSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgY2hpbGRyZW46IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICAgICAgUHJvcFR5cGVzLmFycmF5T2YoUHJvcFR5cGVzLmVsZW1lbnQpLFxuICAgICAgICAgICAgUHJvcFR5cGVzLmVsZW1lbnRcbiAgICAgICAgXSksXG4gICAgICAgIG5hdmJhcjogUHJvcFR5cGVzLmVsZW1lbnQsXG4gICAgICAgIHNpZGViYXI6IFByb3BUeXBlcy5lbGVtZW50LFxuICAgICAgICB0ZWFtX3NpZGViYXI6IFByb3BUeXBlcy5lbGVtZW50LFxuICAgICAgICBjZW50ZXI6IFByb3BUeXBlcy5lbGVtZW50LFxuICAgICAgICBwYXJhbXM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgICAgIHVzZXI6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgICAgIGFjdGlvbnM6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICB2aWV3Q2hhbm5lbDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgICAgICAgIGdldE15Q2hhbm5lbE1lbWJlcnM6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbiAgICAgICAgfSkuaXNSZXF1aXJlZFxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBzdXBlcihwYXJhbXMpO1xuXG4gICAgICAgIHRoaXMub25UZWFtQ2hhbmdlZCA9IHRoaXMub25UZWFtQ2hhbmdlZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uUHJlZmVyZW5jZXNDaGFuZ2VkID0gdGhpcy5vblByZWZlcmVuY2VzQ2hhbmdlZC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuYmx1clRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgICBjb25zdCB0ZWFtID0gVGVhbVN0b3JlLmdldEN1cnJlbnQoKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgdGVhbSxcbiAgICAgICAgICAgIHRoZW1lOiBQcmVmZXJlbmNlU3RvcmUuZ2V0VGhlbWUodGVhbS5pZClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBvblRlYW1DaGFuZ2VkKCkge1xuICAgICAgICBjb25zdCB0ZWFtID0gVGVhbVN0b3JlLmdldEN1cnJlbnQoKTtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHRlYW0sXG4gICAgICAgICAgICB0aGVtZTogUHJlZmVyZW5jZVN0b3JlLmdldFRoZW1lKHRlYW0uaWQpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uUHJlZmVyZW5jZXNDaGFuZ2VkKGNhdGVnb3J5KSB7XG4gICAgICAgIGlmICghY2F0ZWdvcnkgfHwgY2F0ZWdvcnkgPT09IFByZWZlcmVuY2VzLkNBVEVHT1JZX1RIRU1FKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICB0aGVtZTogUHJlZmVyZW5jZVN0b3JlLmdldFRoZW1lKHRoaXMuc3RhdGUudGVhbS5pZClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgICAvLyBHbyB0byB0dXRvcmlhbCBpZiB3ZSBhcmUgZmlyc3QgYXJyaXZpbmdcbiAgICAgICAgY29uc3QgdHV0b3JpYWxTdGVwID0gUHJlZmVyZW5jZVN0b3JlLmdldEludChQcmVmZXJlbmNlcy5UVVRPUklBTF9TVEVQLCBVc2VyU3RvcmUuZ2V0Q3VycmVudElkKCksIDk5OSk7XG4gICAgICAgIGlmICh0dXRvcmlhbFN0ZXAgPD0gVHV0b3JpYWxTdGVwcy5JTlRST19TQ1JFRU5TKSB7XG4gICAgICAgICAgICBicm93c2VySGlzdG9yeS5wdXNoKFRlYW1TdG9yZS5nZXRDdXJyZW50VGVhbVJlbGF0aXZlVXJsKCkgKyAnL3R1dG9yaWFsJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgVGVhbVN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMub25UZWFtQ2hhbmdlZCk7XG4gICAgICAgIFByZWZlcmVuY2VTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uUHJlZmVyZW5jZXNDaGFuZ2VkKTtcblxuICAgICAgICBzdGFydFBlcmlvZGljU3RhdHVzVXBkYXRlcygpO1xuICAgICAgICBzdGFydFBlcmlvZGljU3luYygpO1xuXG4gICAgICAgIC8vIFNldCB1cCB0cmFja2luZyBmb3Igd2hldGhlciB0aGUgd2luZG93IGlzIGFjdGl2ZVxuICAgICAgICB3aW5kb3cuaXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAkKHdpbmRvdykub24oJ2ZvY3VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgQ2hhbm5lbFN0b3JlLnJlc2V0Q291bnRzKFtDaGFubmVsU3RvcmUuZ2V0Q3VycmVudElkKCldKTtcbiAgICAgICAgICAgIENoYW5uZWxTdG9yZS5lbWl0Q2hhbmdlKCk7XG4gICAgICAgICAgICB3aW5kb3cuaXNBY3RpdmUgPSB0cnVlO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnByb3BzLmFjdGlvbnMudmlld0NoYW5uZWwoQ2hhbm5lbFN0b3JlLmdldEN1cnJlbnRJZCgpKTtcbiAgICAgICAgICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMuYmx1clRpbWUgPiBVTlJFQURfQ0hFQ0tfVElNRV9NSUxMSVNFQ09ORFMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLmFjdGlvbnMuZ2V0TXlDaGFubmVsTWVtYmVycyhUZWFtU3RvcmUuZ2V0Q3VycmVudElkKCkpLnRoZW4obG9hZFByb2ZpbGVzRm9yU2lkZWJhcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQod2luZG93KS5vbignYmx1cicsICgpID0+IHtcbiAgICAgICAgICAgIHdpbmRvdy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5ibHVyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgaWYgKFVzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY3Rpb25zLnZpZXdDaGFubmVsKCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgVXRpbHMuYXBwbHlUaGVtZSh0aGlzLnN0YXRlLnRoZW1lKTtcblxuICAgICAgICBpZiAoVXNlckFnZW50LmlzSW9zU2FmYXJpKCkpIHtcbiAgICAgICAgICAgIC8vIFVzZSBpTm9Cb3VuY2UgdG8gcHJldmVudCBzY3JvbGxpbmcgcGFzdCB0aGUgYm91bmRhcmllcyBvZiB0aGUgcGFnZVxuICAgICAgICAgICAgaU5vQm91bmNlLmVuYWJsZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIGlmICghVXRpbHMuYXJlT2JqZWN0c0VxdWFsKHByZXZTdGF0ZS50aGVtZSwgdGhpcy5zdGF0ZS50aGVtZSkpIHtcbiAgICAgICAgICAgIFV0aWxzLmFwcGx5VGhlbWUodGhpcy5zdGF0ZS50aGVtZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgVGVhbVN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMub25UZWFtQ2hhbmdlZCk7XG4gICAgICAgIFByZWZlcmVuY2VTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uUHJlZmVyZW5jZXNDaGFuZ2VkKTtcbiAgICAgICAgJCh3aW5kb3cpLm9mZignZm9jdXMnKTtcbiAgICAgICAgJCh3aW5kb3cpLm9mZignYmx1cicpO1xuXG4gICAgICAgIGlmIChVc2VyQWdlbnQuaXNJb3NTYWZhcmkoKSkge1xuICAgICAgICAgICAgaU5vQm91bmNlLmRpc2FibGUoKTtcbiAgICAgICAgfVxuICAgICAgICBzdG9wUGVyaW9kaWNTdGF0dXNVcGRhdGVzKCk7XG4gICAgICAgIHN0b3BQZXJpb2RpY1N5bmMoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gW107XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gdGhpcy5wcm9wcy5jaGlsZHJlbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaChcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLm5hdmJhclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnRlbnQucHVzaCh0aGlzLnByb3BzLnRlYW1fc2lkZWJhcik7XG4gICAgICAgICAgICBjb250ZW50LnB1c2goXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zaWRlYmFyXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29udGVudC5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PSdpbm5lci13cmFwJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2lubmVyLXdyYXAgY2hhbm5lbF9fd3JhcCdcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyb3cgaGVhZGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9J25hdmJhcic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE5hdmJhci8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyb3cgbWFpbic+XG4gICAgICAgICAgICAgICAgICAgICAgICB7UmVhY3QuY2xvbmVFbGVtZW50KHRoaXMucHJvcHMuY2VudGVyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogdGhpcy5wcm9wcy51c2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlYW06IHRoaXMuc3RhdGUudGVhbVxuICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjaGFubmVsID0gQ2hhbm5lbFN0b3JlLmdldEJ5TmFtZSh0aGlzLnByb3BzLnBhcmFtcy5jaGFubmVsKTtcbiAgICAgICAgaWYgKGNoYW5uZWwgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gdGhlIHBlcm1hbGluayB2aWV3IGlzIG5vdCByZWFsbHkgdGllZCB0byBhIHBhcnRpY3VsYXIgY2hhbm5lbCBidXQgc3RpbGwgbmVlZHMgaXRcbiAgICAgICAgICAgIGNvbnN0IHBvc3RJZCA9IFBvc3RTdG9yZS5nZXRGb2N1c2VkUG9zdElkKCk7XG4gICAgICAgICAgICBjb25zdCBwb3N0ID0gZ2V0UG9zdChzdG9yZS5nZXRTdGF0ZSgpLCBwb3N0SWQpO1xuXG4gICAgICAgICAgICAvLyB0aGUgcG9zdCB0YWtlIHNvbWUgdGltZSBiZWZvcmUgYmVpbmcgYXZhaWxhYmxlIG9uIHBhZ2UgbG9hZFxuICAgICAgICAgICAgaWYgKHBvc3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNoYW5uZWwgPSBDaGFubmVsU3RvcmUuZ2V0KHBvc3QuY2hhbm5lbF9pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NoYW5uZWwtdmlldyc+XG4gICAgICAgICAgICAgICAgPEFubm91bmNlbWVudEJhci8+XG4gICAgICAgICAgICAgICAgPFdlYnJ0Y05vdGlmaWNhdGlvbi8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbnRhaW5lci1mbHVpZCc+XG4gICAgICAgICAgICAgICAgICAgIDxTaWRlYmFyUmlnaHQgY2hhbm5lbD17Y2hhbm5lbH0vPlxuICAgICAgICAgICAgICAgICAgICA8U2lkZWJhclJpZ2h0TWVudSB0ZWFtVHlwZT17dGhpcy5zdGF0ZS50ZWFtLnR5cGV9Lz5cbiAgICAgICAgICAgICAgICAgICAgPFdlYnJ0Y1NpZGViYXIvPlxuICAgICAgICAgICAgICAgICAgICB7Y29udGVudH1cblxuICAgICAgICAgICAgICAgICAgICA8UGx1Z2dhYmxlIHBsdWdnYWJsZU5hbWU9J1Jvb3QnLz5cbiAgICAgICAgICAgICAgICAgICAgPFVzZXJTZXR0aW5nc01vZGFsLz5cbiAgICAgICAgICAgICAgICAgICAgPEdldFBvc3RMaW5rTW9kYWwvPlxuICAgICAgICAgICAgICAgICAgICA8R2V0UHVibGljTGlua01vZGFsLz5cbiAgICAgICAgICAgICAgICAgICAgPEdldFRlYW1JbnZpdGVMaW5rTW9kYWwvPlxuICAgICAgICAgICAgICAgICAgICA8SW52aXRlTWVtYmVyTW9kYWwvPlxuICAgICAgICAgICAgICAgICAgICA8TGVhdmVUZWFtTW9kYWwvPlxuICAgICAgICAgICAgICAgICAgICA8SW1wb3J0VGhlbWVNb2RhbC8+XG4gICAgICAgICAgICAgICAgICAgIDxUZWFtU2V0dGluZ3NNb2RhbC8+XG4gICAgICAgICAgICAgICAgICAgIDxFZGl0UG9zdE1vZGFsLz5cbiAgICAgICAgICAgICAgICAgICAgPERlbGV0ZVBvc3RNb2RhbC8+XG4gICAgICAgICAgICAgICAgICAgIDxSZW1vdmVkRnJvbUNoYW5uZWxNb2RhbC8+XG4gICAgICAgICAgICAgICAgICAgIDxSZXNldFN0YXR1c01vZGFsLz5cbiAgICAgICAgICAgICAgICAgICAgPExlYXZlUHJpdmF0ZUNoYW5uZWxNb2RhbC8+XG4gICAgICAgICAgICAgICAgICAgIDxTaG9ydGN1dHNNb2RhbCBpc01hYz17VXRpbHMuaXNNYWMoKX0vPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvbmVlZHNfdGVhbS9uZWVkc190ZWFtLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTtBQWpEQTtBQUNBO0FBaURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQWtCQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQVZBO0FBY0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFUQTtBQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcEJBO0FBSEE7QUEyQkE7OztBQTFMQTtBQUNBO0FBREE7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBWEE7QUFEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2468\n");

/***/ }),

/***/ 2469:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*! iNoBounce - v0.1.0\n* https://github.com/lazd/iNoBounce/\n* Copyright (c) 2013 Larry Davis <lazdnet@gmail.com>; Licensed BSD */\n(function(global) {\n\t// Stores the Y position where the touch started\n\tvar startY = 0;\n\n\t// Store enabled status\n\tvar enabled = false;\n\n\tvar handleTouchmove = function(evt) {\n\t\t// Get the element that was scrolled upon\n\t\tvar el = evt.target;\n\n\t\t// Check all parent elements for scrollability\n\t\twhile (el !== document.body && el !== document) {\n\t\t\t// Get some style properties\n\t\t\tvar style = window.getComputedStyle(el);\n\n\t\t\tif (!style) {\n\t\t\t\t// If we've encountered an element we can't compute the style for, get out\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Ignore range input element\n\t\t\tif (el.nodeName === 'INPUT' && el.getAttribute('type') === 'range') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar scrolling = style.getPropertyValue('-webkit-overflow-scrolling');\n\t\t\tvar overflowY = style.getPropertyValue('overflow-y');\n\t\t\tvar height = parseInt(style.getPropertyValue('height'), 10);\n\n\t\t\t// Determine if the element should scroll\n\t\t\tvar isScrollable = scrolling === 'touch' && (overflowY === 'auto' || overflowY === 'scroll');\n\t\t\tvar canScroll = el.scrollHeight > el.offsetHeight;\n\n\t\t\tif (isScrollable && canScroll) {\n\t\t\t\t// Get the current Y position of the touch\n\t\t\t\tvar curY = evt.touches ? evt.touches[0].screenY : evt.screenY;\n\n\t\t\t\t// Determine if the user is trying to scroll past the top or bottom\n\t\t\t\t// In this case, the window will bounce, so we have to prevent scrolling completely\n\t\t\t\tvar isAtTop = (startY <= curY && el.scrollTop === 0);\n\t\t\t\tvar isAtBottom = (startY >= curY && el.scrollHeight - el.scrollTop === height);\n\n\t\t\t\t// Stop a bounce bug when at the bottom or top of the scrollable element\n\t\t\t\tif (isAtTop || isAtBottom) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}\n\n\t\t\t\t// No need to continue up the DOM, we've done our job\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Test the next parent\n\t\t\tel = el.parentNode;\n\t\t}\n\n\t\t// Stop the bouncing -- no parents are scrollable\n\t\tevt.preventDefault();\n\t};\n\n\tvar handleTouchstart = function(evt) {\n\t\t// Store the first Y position of the touch\n\t\tstartY = evt.touches ? evt.touches[0].screenY : evt.screenY;\n\t};\n\n\tvar enable = function() {\n\t\t// Listen to a couple key touch events\n\t\twindow.addEventListener('touchstart', handleTouchstart, false);\n\t\twindow.addEventListener('touchmove', handleTouchmove, false);\n\t\tenabled = true;\n\t};\n\n\tvar disable = function() {\n\t\t// Stop listening\n\t\twindow.removeEventListener('touchstart', handleTouchstart, false);\n\t\twindow.removeEventListener('touchmove', handleTouchmove, false);\n\t\tenabled = false;\n\t};\n\n\tvar isEnabled = function() {\n\t\treturn enabled;\n\t};\n\n\t// Enable by default if the browser supports -webkit-overflow-scrolling\n\t// Test this by setting the property with JavaScript on an element that exists in the DOM\n\t// Then, see if the property is reflected in the computed style\n\tvar testDiv = document.createElement('div');\n\tdocument.documentElement.appendChild(testDiv);\n\ttestDiv.style.WebkitOverflowScrolling = 'touch';\n\tvar scrollSupport = 'getComputedStyle' in window && window.getComputedStyle(testDiv)['-webkit-overflow-scrolling'] === 'touch';\n\tdocument.documentElement.removeChild(testDiv);\n\n\tif (scrollSupport) {\n\t\tenable();\n\t}\n\n\t// A module to support enabling/disabling iNoBounce\n\tvar iNoBounce = {\n\t\tenable: enable,\n\t\tdisable: disable,\n\t\tisEnabled: isEnabled\n\t};\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\t// Node.js Support\n\t\tmodule.exports = iNoBounce;\n\t}\n\tif (typeof global.define === 'function') {\n\t\t// AMD Support\n\t\t(function(define) {\n\t\t\tdefine('iNoBounce', [], function() { return iNoBounce; });\n\t\t}(global.define));\n\t}\n\telse {\n\t\t// Browser support\n\t\tglobal.iNoBounce = iNoBounce;\n\t}\n}(this));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ2OS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pbm9ib3VuY2UvaW5vYm91bmNlLmpzPzJlZmIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cbi8qISBpTm9Cb3VuY2UgLSB2MC4xLjBcbiogaHR0cHM6Ly9naXRodWIuY29tL2xhemQvaU5vQm91bmNlL1xuKiBDb3B5cmlnaHQgKGMpIDIwMTMgTGFycnkgRGF2aXMgPGxhemRuZXRAZ21haWwuY29tPjsgTGljZW5zZWQgQlNEICovXG4oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cdC8vIFN0b3JlcyB0aGUgWSBwb3NpdGlvbiB3aGVyZSB0aGUgdG91Y2ggc3RhcnRlZFxuXHR2YXIgc3RhcnRZID0gMDtcblxuXHQvLyBTdG9yZSBlbmFibGVkIHN0YXR1c1xuXHR2YXIgZW5hYmxlZCA9IGZhbHNlO1xuXG5cdHZhciBoYW5kbGVUb3VjaG1vdmUgPSBmdW5jdGlvbihldnQpIHtcblx0XHQvLyBHZXQgdGhlIGVsZW1lbnQgdGhhdCB3YXMgc2Nyb2xsZWQgdXBvblxuXHRcdHZhciBlbCA9IGV2dC50YXJnZXQ7XG5cblx0XHQvLyBDaGVjayBhbGwgcGFyZW50IGVsZW1lbnRzIGZvciBzY3JvbGxhYmlsaXR5XG5cdFx0d2hpbGUgKGVsICE9PSBkb2N1bWVudC5ib2R5ICYmIGVsICE9PSBkb2N1bWVudCkge1xuXHRcdFx0Ly8gR2V0IHNvbWUgc3R5bGUgcHJvcGVydGllc1xuXHRcdFx0dmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuXG5cdFx0XHRpZiAoIXN0eWxlKSB7XG5cdFx0XHRcdC8vIElmIHdlJ3ZlIGVuY291bnRlcmVkIGFuIGVsZW1lbnQgd2UgY2FuJ3QgY29tcHV0ZSB0aGUgc3R5bGUgZm9yLCBnZXQgb3V0XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZ25vcmUgcmFuZ2UgaW5wdXQgZWxlbWVudFxuXHRcdFx0aWYgKGVsLm5vZGVOYW1lID09PSAnSU5QVVQnICYmIGVsLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAncmFuZ2UnKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHNjcm9sbGluZyA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nJyk7XG5cdFx0XHR2YXIgb3ZlcmZsb3dZID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnb3ZlcmZsb3cteScpO1xuXHRcdFx0dmFyIGhlaWdodCA9IHBhcnNlSW50KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2hlaWdodCcpLCAxMCk7XG5cblx0XHRcdC8vIERldGVybWluZSBpZiB0aGUgZWxlbWVudCBzaG91bGQgc2Nyb2xsXG5cdFx0XHR2YXIgaXNTY3JvbGxhYmxlID0gc2Nyb2xsaW5nID09PSAndG91Y2gnICYmIChvdmVyZmxvd1kgPT09ICdhdXRvJyB8fCBvdmVyZmxvd1kgPT09ICdzY3JvbGwnKTtcblx0XHRcdHZhciBjYW5TY3JvbGwgPSBlbC5zY3JvbGxIZWlnaHQgPiBlbC5vZmZzZXRIZWlnaHQ7XG5cblx0XHRcdGlmIChpc1Njcm9sbGFibGUgJiYgY2FuU2Nyb2xsKSB7XG5cdFx0XHRcdC8vIEdldCB0aGUgY3VycmVudCBZIHBvc2l0aW9uIG9mIHRoZSB0b3VjaFxuXHRcdFx0XHR2YXIgY3VyWSA9IGV2dC50b3VjaGVzID8gZXZ0LnRvdWNoZXNbMF0uc2NyZWVuWSA6IGV2dC5zY3JlZW5ZO1xuXG5cdFx0XHRcdC8vIERldGVybWluZSBpZiB0aGUgdXNlciBpcyB0cnlpbmcgdG8gc2Nyb2xsIHBhc3QgdGhlIHRvcCBvciBib3R0b21cblx0XHRcdFx0Ly8gSW4gdGhpcyBjYXNlLCB0aGUgd2luZG93IHdpbGwgYm91bmNlLCBzbyB3ZSBoYXZlIHRvIHByZXZlbnQgc2Nyb2xsaW5nIGNvbXBsZXRlbHlcblx0XHRcdFx0dmFyIGlzQXRUb3AgPSAoc3RhcnRZIDw9IGN1clkgJiYgZWwuc2Nyb2xsVG9wID09PSAwKTtcblx0XHRcdFx0dmFyIGlzQXRCb3R0b20gPSAoc3RhcnRZID49IGN1clkgJiYgZWwuc2Nyb2xsSGVpZ2h0IC0gZWwuc2Nyb2xsVG9wID09PSBoZWlnaHQpO1xuXG5cdFx0XHRcdC8vIFN0b3AgYSBib3VuY2UgYnVnIHdoZW4gYXQgdGhlIGJvdHRvbSBvciB0b3Agb2YgdGhlIHNjcm9sbGFibGUgZWxlbWVudFxuXHRcdFx0XHRpZiAoaXNBdFRvcCB8fCBpc0F0Qm90dG9tKSB7XG5cdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBObyBuZWVkIHRvIGNvbnRpbnVlIHVwIHRoZSBET00sIHdlJ3ZlIGRvbmUgb3VyIGpvYlxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRlc3QgdGhlIG5leHQgcGFyZW50XG5cdFx0XHRlbCA9IGVsLnBhcmVudE5vZGU7XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcCB0aGUgYm91bmNpbmcgLS0gbm8gcGFyZW50cyBhcmUgc2Nyb2xsYWJsZVxuXHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXHR9O1xuXG5cdHZhciBoYW5kbGVUb3VjaHN0YXJ0ID0gZnVuY3Rpb24oZXZ0KSB7XG5cdFx0Ly8gU3RvcmUgdGhlIGZpcnN0IFkgcG9zaXRpb24gb2YgdGhlIHRvdWNoXG5cdFx0c3RhcnRZID0gZXZ0LnRvdWNoZXMgPyBldnQudG91Y2hlc1swXS5zY3JlZW5ZIDogZXZ0LnNjcmVlblk7XG5cdH07XG5cblx0dmFyIGVuYWJsZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vIExpc3RlbiB0byBhIGNvdXBsZSBrZXkgdG91Y2ggZXZlbnRzXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBoYW5kbGVUb3VjaHN0YXJ0LCBmYWxzZSk7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIGhhbmRsZVRvdWNobW92ZSwgZmFsc2UpO1xuXHRcdGVuYWJsZWQgPSB0cnVlO1xuXHR9O1xuXG5cdHZhciBkaXNhYmxlID0gZnVuY3Rpb24oKSB7XG5cdFx0Ly8gU3RvcCBsaXN0ZW5pbmdcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGhhbmRsZVRvdWNoc3RhcnQsIGZhbHNlKTtcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgaGFuZGxlVG91Y2htb3ZlLCBmYWxzZSk7XG5cdFx0ZW5hYmxlZCA9IGZhbHNlO1xuXHR9O1xuXG5cdHZhciBpc0VuYWJsZWQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZW5hYmxlZDtcblx0fTtcblxuXHQvLyBFbmFibGUgYnkgZGVmYXVsdCBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZ1xuXHQvLyBUZXN0IHRoaXMgYnkgc2V0dGluZyB0aGUgcHJvcGVydHkgd2l0aCBKYXZhU2NyaXB0IG9uIGFuIGVsZW1lbnQgdGhhdCBleGlzdHMgaW4gdGhlIERPTVxuXHQvLyBUaGVuLCBzZWUgaWYgdGhlIHByb3BlcnR5IGlzIHJlZmxlY3RlZCBpbiB0aGUgY29tcHV0ZWQgc3R5bGVcblx0dmFyIHRlc3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHRlc3REaXYpO1xuXHR0ZXN0RGl2LnN0eWxlLldlYmtpdE92ZXJmbG93U2Nyb2xsaW5nID0gJ3RvdWNoJztcblx0dmFyIHNjcm9sbFN1cHBvcnQgPSAnZ2V0Q29tcHV0ZWRTdHlsZScgaW4gd2luZG93ICYmIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRlc3REaXYpWyctd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZyddID09PSAndG91Y2gnO1xuXHRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGVzdERpdik7XG5cblx0aWYgKHNjcm9sbFN1cHBvcnQpIHtcblx0XHRlbmFibGUoKTtcblx0fVxuXG5cdC8vIEEgbW9kdWxlIHRvIHN1cHBvcnQgZW5hYmxpbmcvZGlzYWJsaW5nIGlOb0JvdW5jZVxuXHR2YXIgaU5vQm91bmNlID0ge1xuXHRcdGVuYWJsZTogZW5hYmxlLFxuXHRcdGRpc2FibGU6IGRpc2FibGUsXG5cdFx0aXNFbmFibGVkOiBpc0VuYWJsZWRcblx0fTtcblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHQvLyBOb2RlLmpzIFN1cHBvcnRcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGlOb0JvdW5jZTtcblx0fVxuXHRpZiAodHlwZW9mIGdsb2JhbC5kZWZpbmUgPT09ICdmdW5jdGlvbicpIHtcblx0XHQvLyBBTUQgU3VwcG9ydFxuXHRcdChmdW5jdGlvbihkZWZpbmUpIHtcblx0XHRcdGRlZmluZSgnaU5vQm91bmNlJywgW10sIGZ1bmN0aW9uKCkgeyByZXR1cm4gaU5vQm91bmNlOyB9KTtcblx0XHR9KGdsb2JhbC5kZWZpbmUpKTtcblx0fVxuXHRlbHNlIHtcblx0XHQvLyBCcm93c2VyIHN1cHBvcnRcblx0XHRnbG9iYWwuaU5vQm91bmNlID0gaU5vQm91bmNlO1xuXHR9XG59KHRoaXMpKTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvaW5vYm91bmNlL2lub2JvdW5jZS5qc1xuLy8gbW9kdWxlIGlkID0gMjQ2OVxuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2469\n");

/***/ }),

/***/ 2470:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactDom = __webpack_require__(48);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _post_actions = __webpack_require__(75);\n\nvar _modal_store = __webpack_require__(2164);\n\nvar _modal_store2 = _interopRequireDefault(_modal_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar ActionTypes = _constants2.default.ActionTypes;\n\nvar DeletePostModal = function (_React$Component) {\n    (0, _inherits3.default)(DeletePostModal, _React$Component);\n\n    function DeletePostModal(props) {\n        (0, _classCallCheck3.default)(this, DeletePostModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (DeletePostModal.__proto__ || (0, _getPrototypeOf2.default)(DeletePostModal)).call(this, props));\n\n        _this.handleDelete = _this.handleDelete.bind(_this);\n        _this.handleToggle = _this.handleToggle.bind(_this);\n        _this.handleHide = _this.handleHide.bind(_this);\n\n        _this.state = {\n            show: false,\n            post: null,\n            commentCount: 0,\n            error: ''\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(DeletePostModal, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _modal_store2.default.addModalListener(ActionTypes.TOGGLE_DELETE_POST_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _modal_store2.default.removeModalListener(ActionTypes.TOGGLE_DELETE_POST_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps, prevState) {\n            var _this2 = this;\n\n            if (this.state.show && !prevState.show) {\n                setTimeout(function () {\n                    (0, _jquery2.default)(_reactDom2.default.findDOMNode(_this2.refs.deletePostBtn)).focus();\n                }, 0);\n            }\n        }\n    }, {\n        key: 'handleDelete',\n        value: function handleDelete() {\n            var _this3 = this;\n\n            (0, _post_actions.deletePost)(this.state.post.channel_id, this.state.post, function () {\n                _this3.handleHide();\n            }, function (err) {\n                _this3.setState({ error: err.message });\n            });\n        }\n    }, {\n        key: 'handleToggle',\n        value: function handleToggle(value, args) {\n            this.setState({\n                show: value,\n                post: args.post,\n                commentCount: args.commentCount,\n                error: ''\n            });\n        }\n    }, {\n        key: 'handleHide',\n        value: function handleHide() {\n            this.setState({ show: false });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!this.state.post) {\n                return null;\n            }\n\n            var error = null;\n            if (this.state.error) {\n                error = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.error\n                    )\n                );\n            }\n\n            var commentWarning = '';\n            if (this.state.commentCount > 0) {\n                commentWarning = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'delete_post.warning',\n                    defaultMessage: 'This post has {count, number} {count, plural, one {comment} other {comments}} on it.',\n                    values: {\n                        count: this.state.commentCount\n                    }\n                });\n            }\n\n            var postTerm = this.state.post.root_id ? _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'delete_post.comment',\n                defaultMessage: 'Comment'\n            }) : _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'delete_post.post',\n                defaultMessage: 'Post'\n            });\n\n            return _react2.default.createElement(\n                _reactBootstrap.Modal,\n                {\n                    show: this.state.show,\n                    onHide: this.handleHide\n                },\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Header,\n                    { closeButton: true },\n                    _react2.default.createElement(\n                        _reactBootstrap.Modal.Title,\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'delete_post.confirm',\n                            defaultMessage: 'Confirm {term} Delete',\n                            values: {\n                                term: postTerm\n                            }\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Body,\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'delete_post.question',\n                        defaultMessage: 'Are you sure you want to delete this {term}?',\n                        values: {\n                            term: postTerm\n                        }\n                    }),\n                    _react2.default.createElement('br', null),\n                    _react2.default.createElement('br', null),\n                    commentWarning,\n                    error\n                ),\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Footer,\n                    null,\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            type: 'button',\n                            className: 'btn btn-default',\n                            onClick: this.handleHide\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'delete_post.cancel',\n                            defaultMessage: 'Cancel'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            ref: 'deletePostBtn',\n                            type: 'button',\n                            className: 'btn btn-danger',\n                            onClick: this.handleDelete\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'delete_post.del',\n                            defaultMessage: 'Delete'\n                        })\n                    )\n                )\n            );\n        }\n    }]);\n    return DeletePostModal;\n}(_react2.default.Component);\n\nexports.default = DeletePostModal;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3MC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2RlbGV0ZV9wb3N0X21vZGFsLmpzeD82MWZkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7TW9kYWx9IGZyb20gJ3JlYWN0LWJvb3RzdHJhcCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCB7ZGVsZXRlUG9zdH0gZnJvbSAnYWN0aW9ucy9wb3N0X2FjdGlvbnMuanN4JztcbmltcG9ydCBNb2RhbFN0b3JlIGZyb20gJ3N0b3Jlcy9tb2RhbF9zdG9yZS5qc3gnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuXG52YXIgQWN0aW9uVHlwZXMgPSBDb25zdGFudHMuQWN0aW9uVHlwZXM7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERlbGV0ZVBvc3RNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlRGVsZXRlID0gdGhpcy5oYW5kbGVEZWxldGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGUgPSB0aGlzLmhhbmRsZVRvZ2dsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUhpZGUgPSB0aGlzLmhhbmRsZUhpZGUuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICBwb3N0OiBudWxsLFxuICAgICAgICAgICAgY29tbWVudENvdW50OiAwLFxuICAgICAgICAgICAgZXJyb3I6ICcnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIE1vZGFsU3RvcmUuYWRkTW9kYWxMaXN0ZW5lcihBY3Rpb25UeXBlcy5UT0dHTEVfREVMRVRFX1BPU1RfTU9EQUwsIHRoaXMuaGFuZGxlVG9nZ2xlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgTW9kYWxTdG9yZS5yZW1vdmVNb2RhbExpc3RlbmVyKEFjdGlvblR5cGVzLlRPR0dMRV9ERUxFVEVfUE9TVF9NT0RBTCwgdGhpcy5oYW5kbGVUb2dnbGUpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG93ICYmICFwcmV2U3RhdGUuc2hvdykge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgJChSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnMuZGVsZXRlUG9zdEJ0bikpLmZvY3VzKCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZURlbGV0ZSgpIHtcbiAgICAgICAgZGVsZXRlUG9zdChcbiAgICAgICAgICAgIHRoaXMuc3RhdGUucG9zdC5jaGFubmVsX2lkLFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5wb3N0LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlSGlkZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtlcnJvcjogZXJyLm1lc3NhZ2V9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBoYW5kbGVUb2dnbGUodmFsdWUsIGFyZ3MpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93OiB2YWx1ZSxcbiAgICAgICAgICAgIHBvc3Q6IGFyZ3MucG9zdCxcbiAgICAgICAgICAgIGNvbW1lbnRDb3VudDogYXJncy5jb21tZW50Q291bnQsXG4gICAgICAgICAgICBlcnJvcjogJydcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlSGlkZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvdzogZmFsc2V9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5wb3N0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBlcnJvciA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmVycm9yKSB7XG4gICAgICAgICAgICBlcnJvciA9IDxkaXYgY2xhc3NOYW1lPSdmb3JtLWdyb3VwIGhhcy1lcnJvcic+PGxhYmVsIGNsYXNzTmFtZT0nY29udHJvbC1sYWJlbCc+e3RoaXMuc3RhdGUuZXJyb3J9PC9sYWJlbD48L2Rpdj47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY29tbWVudFdhcm5pbmcgPSAnJztcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY29tbWVudENvdW50ID4gMCkge1xuICAgICAgICAgICAgY29tbWVudFdhcm5pbmcgPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J2RlbGV0ZV9wb3N0Lndhcm5pbmcnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUaGlzIHBvc3QgaGFzIHtjb3VudCwgbnVtYmVyfSB7Y291bnQsIHBsdXJhbCwgb25lIHtjb21tZW50fSBvdGhlciB7Y29tbWVudHN9fSBvbiBpdC4nXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IHRoaXMuc3RhdGUuY29tbWVudENvdW50XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwb3N0VGVybSA9IHRoaXMuc3RhdGUucG9zdC5yb290X2lkID8gKFxuICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICBpZD0nZGVsZXRlX3Bvc3QuY29tbWVudCdcbiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ29tbWVudCdcbiAgICAgICAgICAgIC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgIGlkPSdkZWxldGVfcG9zdC5wb3N0J1xuICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdQb3N0J1xuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPE1vZGFsXG4gICAgICAgICAgICAgICAgc2hvdz17dGhpcy5zdGF0ZS5zaG93fVxuICAgICAgICAgICAgICAgIG9uSGlkZT17dGhpcy5oYW5kbGVIaWRlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxNb2RhbC5IZWFkZXIgY2xvc2VCdXR0b249e3RydWV9PlxuICAgICAgICAgICAgICAgICAgICA8TW9kYWwuVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdkZWxldGVfcG9zdC5jb25maXJtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDb25maXJtIHt0ZXJtfSBEZWxldGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlcm06IChwb3N0VGVybSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbC5UaXRsZT5cbiAgICAgICAgICAgICAgICA8L01vZGFsLkhlYWRlcj5cbiAgICAgICAgICAgICAgICA8TW9kYWwuQm9keT5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdkZWxldGVfcG9zdC5xdWVzdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMge3Rlcm19PydcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlcm06IChwb3N0VGVybSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgIHtjb21tZW50V2FybmluZ31cbiAgICAgICAgICAgICAgICAgICAge2Vycm9yfVxuICAgICAgICAgICAgICAgIDwvTW9kYWwuQm9keT5cbiAgICAgICAgICAgICAgICA8TW9kYWwuRm9vdGVyPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tZGVmYXVsdCdcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlSGlkZX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nZGVsZXRlX3Bvc3QuY2FuY2VsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDYW5jZWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSdkZWxldGVQb3N0QnRuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdidG4gYnRuLWRhbmdlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRGVsZXRlfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdkZWxldGVfcG9zdC5kZWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0RlbGV0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvTW9kYWwuRm9vdGVyPlxuICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy9kZWxldGVfcG9zdF9tb2RhbC5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7Ozs7QUFkQTtBQUNBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVBBO0FBYUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQU1BO0FBQ0E7QUFGQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFEQTtBQURBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBYUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFYQTtBQTVCQTtBQXFEQTs7O0FBbkpBO0FBQ0E7QUFEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2470\n");

/***/ }),

/***/ 2471:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _deleteProperty = __webpack_require__(140);\n\nvar _deleteProperty2 = _interopRequireDefault(_deleteProperty);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(48);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _posts = __webpack_require__(139);\n\nvar Selectors = _interopRequireWildcard(_posts);\n\nvar _global_actions = __webpack_require__(57);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _post_actions = __webpack_require__(75);\n\nvar _browser_store = __webpack_require__(136);\n\nvar _browser_store2 = _interopRequireDefault(_browser_store);\n\nvar _message_history_store = __webpack_require__(784);\n\nvar _message_history_store2 = _interopRequireDefault(_message_history_store);\n\nvar _post_store = __webpack_require__(320);\n\nvar _post_store2 = _interopRequireDefault(_post_store);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _redux_store = __webpack_require__(39);\n\nvar _redux_store2 = _interopRequireDefault(_redux_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _user_agent = __webpack_require__(90);\n\nvar UserAgent = _interopRequireWildcard(_user_agent);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _emoji_picker_overlay = __webpack_require__(456);\n\nvar _emoji_picker_overlay2 = _interopRequireDefault(_emoji_picker_overlay);\n\nvar _textbox = __webpack_require__(462);\n\nvar _textbox2 = _interopRequireDefault(_textbox);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar KeyCodes = _constants2.default.KeyCodes; // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar getState = _redux_store2.default.getState;\n\nvar EditPostModal = function (_React$Component) {\n    (0, _inherits3.default)(EditPostModal, _React$Component);\n\n    function EditPostModal(props) {\n        (0, _classCallCheck3.default)(this, EditPostModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (EditPostModal.__proto__ || (0, _getPrototypeOf2.default)(EditPostModal)).call(this, props));\n\n        _this.getContainer = function () {\n            return _this.refs.editModalBody;\n        };\n\n        _this.toggleEmojiPicker = function () {\n            _this.setState({ showEmojiPicker: !_this.state.showEmojiPicker });\n        };\n\n        _this.hideEmojiPicker = function () {\n            _this.setState({ showEmojiPicker: false });\n        };\n\n        _this.handleEmojiClick = function (emoji) {\n            var emojiAlias = emoji.name || emoji.aliases[0];\n\n            if (!emojiAlias) {\n                //Oops.. There went something wrong\n                return;\n            }\n\n            if (_this.state.editText === '') {\n                _this.setState({ editText: ':' + emojiAlias + ': ' });\n            } else {\n                //check whether there is already a blank at the end of the current message\n                var newMessage = /\\s+$/.test(_this.state.editText) ? _this.state.editText + ':' + emojiAlias + ': ' : _this.state.editText + ' :' + emojiAlias + ': ';\n\n                _this.setState({ editText: newMessage });\n            }\n\n            _this.setState({ showEmojiPicker: false });\n\n            _this.refs.editbox.focus();\n        };\n\n        _this.getEditPostControls = function () {\n            return _this.refs.editPostEmoji;\n        };\n\n        _this.handleEdit = _this.handleEdit.bind(_this);\n        _this.handleEditKeyPress = _this.handleEditKeyPress.bind(_this);\n        _this.handleEditPostEvent = _this.handleEditPostEvent.bind(_this);\n        _this.handleKeyDown = _this.handleKeyDown.bind(_this);\n        _this.handleChange = _this.handleChange.bind(_this);\n        _this.onPreferenceChange = _this.onPreferenceChange.bind(_this);\n        _this.onModalHidden = _this.onModalHidden.bind(_this);\n        _this.onModalShow = _this.onModalShow.bind(_this);\n        _this.onModalShown = _this.onModalShown.bind(_this);\n        _this.onModalHide = _this.onModalHide.bind(_this);\n        _this.onModalKeyDown = _this.onModalKeyDown.bind(_this);\n        _this.handlePostError = _this.handlePostError.bind(_this);\n\n        _this.state = {\n            editText: '',\n            originalText: '',\n            title: '',\n            post_id: '',\n            channel_id: '',\n            comments: 0,\n            refocusId: '',\n            ctrlSend: _preference_store2.default.getBool(_constants2.default.Preferences.CATEGORY_ADVANCED_SETTINGS, 'send_on_ctrl_enter'),\n            postError: '',\n            showEmojiPicker: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(EditPostModal, [{\n        key: 'handlePostError',\n        value: function handlePostError(postError) {\n            if (this.state.postError !== postError) {\n                this.setState({ postError: postError });\n            }\n        }\n    }, {\n        key: 'handleEdit',\n        value: function handleEdit() {\n            var _this2 = this;\n\n            var updatedPost = {\n                message: this.state.editText,\n                id: this.state.post_id,\n                channel_id: this.state.channel_id\n            };\n\n            if (this.state.postError) {\n                this.setState({ errorClass: 'animation--highlight' });\n                setTimeout(function () {\n                    _this2.setState({ errorClass: null });\n                }, _constants2.default.ANIMATION_TIMEOUT);\n                return;\n            }\n\n            if (updatedPost.message === this.state.originalText) {\n                // no changes so just close the modal\n                (0, _jquery2.default)('#edit_post').modal('hide');\n                return;\n            }\n\n            _message_history_store2.default.storeMessageInHistory(updatedPost.message);\n\n            if (updatedPost.message.trim().length === 0) {\n                var tempState = this.state;\n                (0, _deleteProperty2.default)(tempState, 'editText');\n                _browser_store2.default.setItem('edit_state_transfer', tempState);\n                (0, _jquery2.default)('#edit_post').modal('hide');\n                GlobalActions.showDeletePostModal(Selectors.getPost(getState(), this.state.post_id), this.state.comments);\n                return;\n            }\n\n            (0, _post_actions.updatePost)(updatedPost, function () {\n                window.scrollTo(0, 0);\n            });\n\n            (0, _jquery2.default)('#edit_post').modal('hide');\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange(e) {\n            var message = e.target.value;\n            this.setState({\n                editText: message\n            });\n        }\n    }, {\n        key: 'handleEditKeyPress',\n        value: function handleEditKeyPress(e) {\n            if (!UserAgent.isMobile() && !this.state.ctrlSend && e.which === KeyCodes.ENTER && !e.shiftKey && !e.altKey) {\n                e.preventDefault();\n                _reactDom2.default.findDOMNode(this.refs.editbox).blur();\n                this.handleEdit();\n            } else if (this.state.ctrlSend && e.ctrlKey && e.which === KeyCodes.ENTER) {\n                e.preventDefault();\n                _reactDom2.default.findDOMNode(this.refs.editbox).blur();\n                this.handleEdit();\n            }\n        }\n    }, {\n        key: 'handleEditPostEvent',\n        value: function handleEditPostEvent(options) {\n            var post = Selectors.getPost(getState(), options.postId);\n            if (global.window.mm_license.IsLicensed === 'true') {\n                if (global.window.mm_config.AllowEditPost === _constants2.default.ALLOW_EDIT_POST_NEVER) {\n                    return;\n                }\n                if (global.window.mm_config.AllowEditPost === _constants2.default.ALLOW_EDIT_POST_TIME_LIMIT) {\n                    if (post.create_at + global.window.mm_config.PostEditTimeLimit * 1000 < Utils.getTimestamp()) {\n                        return;\n                    }\n                }\n            }\n            this.setState({\n                editText: options.message || '',\n                originalText: options.message || '',\n                title: options.title || '',\n                post_id: options.postId || '',\n                channel_id: options.channelId || '',\n                comments: options.comments || 0,\n                refocusId: options.refocusId || ''\n            });\n\n            (0, _jquery2.default)(_reactDom2.default.findDOMNode(this.refs.modal)).modal('show');\n        }\n    }, {\n        key: 'handleKeyDown',\n        value: function handleKeyDown(e) {\n            if (this.state.ctrlSend && e.keyCode === KeyCodes.ENTER && e.ctrlKey === true) {\n                this.handleEdit();\n            }\n        }\n    }, {\n        key: 'onPreferenceChange',\n        value: function onPreferenceChange() {\n            this.setState({\n                ctrlSend: _preference_store2.default.getBool(_constants2.default.Preferences.CATEGORY_ADVANCED_SETTINGS, 'send_on_ctrl_enter')\n            });\n        }\n    }, {\n        key: 'onModalHidden',\n        value: function onModalHidden() {\n            this.setState({ editText: '', originalText: '', title: '', channel_id: '', post_id: '', comments: 0, refocusId: '', error: '', typing: false });\n        }\n    }, {\n        key: 'onModalShow',\n        value: function onModalShow(e) {\n            var button = e.relatedTarget;\n            if (!button) {\n                return;\n            }\n            this.setState({\n                editText: (0, _jquery2.default)(button).attr('data-message'),\n                originalText: (0, _jquery2.default)(button).attr('data-message'),\n                title: (0, _jquery2.default)(button).attr('data-title'),\n                channel_id: (0, _jquery2.default)(button).attr('data-channelid'),\n                post_id: (0, _jquery2.default)(button).attr('data-postid'),\n                comments: (0, _jquery2.default)(button).attr('data-comments'),\n                refocusId: (0, _jquery2.default)(button).attr('data-refocusid'),\n                typing: false\n            });\n        }\n    }, {\n        key: 'onModalShown',\n        value: function onModalShown() {\n            this.refs.editbox.focus();\n\n            this.refs.editbox.recalculateSize();\n        }\n    }, {\n        key: 'onModalHide',\n        value: function onModalHide() {\n            var _this3 = this;\n\n            this.refs.editbox.hidePreview();\n\n            if (this.state.refocusId !== '') {\n                setTimeout(function () {\n                    var element = (0, _jquery2.default)(_this3.state.refocusId).get(0);\n                    if (element) {\n                        element.focus();\n                    }\n                });\n            }\n        }\n    }, {\n        key: 'onModalKeyDown',\n        value: function onModalKeyDown(e) {\n            if (e.which === _constants2.default.KeyCodes.ESCAPE) {\n                e.stopPropagation();\n            }\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            (0, _jquery2.default)(this.refs.modal).on('hidden.bs.modal', this.onModalHidden);\n            (0, _jquery2.default)(this.refs.modal).on('show.bs.modal', this.onModalShow);\n            (0, _jquery2.default)(this.refs.modal).on('shown.bs.modal', this.onModalShown);\n            (0, _jquery2.default)(this.refs.modal).on('hide.bs.modal', this.onModalHide);\n            (0, _jquery2.default)(this.refs.modal).on('keydown', this.onModalKeyDown);\n            _post_store2.default.addEditPostListener(this.handleEditPostEvent);\n            _preference_store2.default.addChangeListener(this.onPreferenceChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            (0, _jquery2.default)(this.refs.modal).off('hidden.bs.modal', this.onModalHidden);\n            (0, _jquery2.default)(this.refs.modal).off('show.bs.modal', this.onModalShow);\n            (0, _jquery2.default)(this.refs.modal).off('shown.bs.modal', this.onModalShown);\n            (0, _jquery2.default)(this.refs.modal).off('hide.bs.modal', this.onModalHide);\n            (0, _jquery2.default)(this.refs.modal).off('keydown', this.onModalKeyDown);\n            _post_store2.default.removeEditPostListner(this.handleEditPostEvent);\n            _preference_store2.default.removeChangeListener(this.onPreferenceChange);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var errorBoxClass = 'edit-post-footer' + (this.state.postError ? ' has-error' : '');\n            var postError = null;\n            if (this.state.postError) {\n                var postErrorClass = 'post-error' + (this.state.errorClass ? ' ' + this.state.errorClass : '');\n                postError = _react2.default.createElement(\n                    'label',\n                    { className: postErrorClass },\n                    this.state.postError\n                );\n            }\n\n            var emojiPicker = null;\n            if (window.mm_config.EnableEmojiPicker === 'true') {\n                emojiPicker = _react2.default.createElement(\n                    'span',\n                    { className: 'emoji-picker__container' },\n                    _react2.default.createElement(_emoji_picker_overlay2.default, {\n                        show: this.state.showEmojiPicker,\n                        container: this.getContainer,\n                        target: this.getEditPostControls,\n                        onHide: this.hideEmojiPicker,\n                        onEmojiClick: this.handleEmojiClick,\n                        rightOffset: 50,\n                        topOffset: -20\n                    }),\n                    _react2.default.createElement('span', {\n                        className: 'icon icon--emoji',\n                        onClick: this.toggleEmojiPicker,\n                        dangerouslySetInnerHTML: { __html: _constants2.default.EMOJI_ICON_SVG }\n                    })\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    className: 'modal fade edit-modal',\n                    ref: 'modal',\n                    id: 'edit_post',\n                    role: 'dialog',\n                    tabIndex: '-1',\n                    'aria-hidden': 'true'\n                },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'modal-dialog modal-push-down modal-xl' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'modal-content' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-header' },\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    type: 'button',\n                                    className: 'close',\n                                    'data-dismiss': 'modal',\n                                    'aria-label': 'Close'\n                                },\n                                _react2.default.createElement(\n                                    'span',\n                                    { 'aria-hidden': 'true' },\n                                    ''\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'h4',\n                                { className: 'modal-title' },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'edit_post.edit',\n                                    defaultMessage: 'Edit {title}',\n                                    values: {\n                                        title: this.state.title\n                                    }\n                                })\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            {\n                                ref: 'editModalBody',\n                                className: 'edit-modal-body modal-body'\n                            },\n                            _react2.default.createElement(_textbox2.default, {\n                                onChange: this.handleChange,\n                                onKeyPress: this.handleEditKeyPress,\n                                onKeyDown: this.handleKeyDown,\n                                handlePostError: this.handlePostError,\n                                value: this.state.editText,\n                                channelId: this.state.channel_id,\n                                emojiEnabled: window.mm_config.EnableEmojiPicker === 'true',\n                                createMessage: Utils.localizeMessage('edit_post.editPost', 'Edit the post...'),\n                                supportsCommands: false,\n                                suggestionListStyle: 'bottom',\n                                id: 'edit_textbox',\n                                ref: 'editbox'\n                            }),\n                            _react2.default.createElement(\n                                'span',\n                                {\n                                    ref: 'editPostEmoji',\n                                    className: 'edit-post__actions'\n                                },\n                                emojiPicker\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: errorBoxClass },\n                                postError\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-footer' },\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    type: 'button',\n                                    className: 'btn btn-default',\n                                    'data-dismiss': 'modal'\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'edit_post.cancel',\n                                    defaultMessage: 'Cancel'\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    type: 'button',\n                                    className: 'btn btn-primary',\n                                    onClick: this.handleEdit\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'edit_post.save',\n                                    defaultMessage: 'Save'\n                                })\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return EditPostModal;\n}(_react2.default.Component);\n\nexports.default = EditPostModal;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3MS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2VkaXRfcG9zdF9tb2RhbC5qc3g/NzJmYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgKiBhcyBTZWxlY3RvcnMgZnJvbSAnbWF0dGVybW9zdC1yZWR1eC9zZWxlY3RvcnMvZW50aXRpZXMvcG9zdHMnO1xuXG5pbXBvcnQgKiBhcyBHbG9iYWxBY3Rpb25zIGZyb20gJ2FjdGlvbnMvZ2xvYmFsX2FjdGlvbnMuanN4JztcbmltcG9ydCB7dXBkYXRlUG9zdH0gZnJvbSAnYWN0aW9ucy9wb3N0X2FjdGlvbnMuanN4JztcbmltcG9ydCBCcm93c2VyU3RvcmUgZnJvbSAnc3RvcmVzL2Jyb3dzZXJfc3RvcmUuanN4JztcbmltcG9ydCBNZXNzYWdlSGlzdG9yeVN0b3JlIGZyb20gJ3N0b3Jlcy9tZXNzYWdlX2hpc3Rvcnlfc3RvcmUuanN4JztcbmltcG9ydCBQb3N0U3RvcmUgZnJvbSAnc3RvcmVzL3Bvc3Rfc3RvcmUuanN4JztcbmltcG9ydCBQcmVmZXJlbmNlU3RvcmUgZnJvbSAnc3RvcmVzL3ByZWZlcmVuY2Vfc3RvcmUuanN4JztcbmltcG9ydCBzdG9yZSBmcm9tICdzdG9yZXMvcmVkdXhfc3RvcmUuanN4JztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFVzZXJBZ2VudCBmcm9tICd1dGlscy91c2VyX2FnZW50LmpzeCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgRW1vamlQaWNrZXJPdmVybGF5IGZyb20gJ2NvbXBvbmVudHMvZW1vamlfcGlja2VyL2Vtb2ppX3BpY2tlcl9vdmVybGF5LmpzeCc7XG5cbmltcG9ydCBUZXh0Ym94IGZyb20gJy4vdGV4dGJveC5qc3gnO1xuXG5jb25zdCBLZXlDb2RlcyA9IENvbnN0YW50cy5LZXlDb2RlcztcblxuY29uc3QgZ2V0U3RhdGUgPSBzdG9yZS5nZXRTdGF0ZTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWRpdFBvc3RNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlRWRpdCA9IHRoaXMuaGFuZGxlRWRpdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUVkaXRLZXlQcmVzcyA9IHRoaXMuaGFuZGxlRWRpdEtleVByZXNzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlRWRpdFBvc3RFdmVudCA9IHRoaXMuaGFuZGxlRWRpdFBvc3RFdmVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUtleURvd24gPSB0aGlzLmhhbmRsZUtleURvd24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UgPSB0aGlzLmhhbmRsZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uUHJlZmVyZW5jZUNoYW5nZSA9IHRoaXMub25QcmVmZXJlbmNlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25Nb2RhbEhpZGRlbiA9IHRoaXMub25Nb2RhbEhpZGRlbi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uTW9kYWxTaG93ID0gdGhpcy5vbk1vZGFsU2hvdy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uTW9kYWxTaG93biA9IHRoaXMub25Nb2RhbFNob3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25Nb2RhbEhpZGUgPSB0aGlzLm9uTW9kYWxIaWRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25Nb2RhbEtleURvd24gPSB0aGlzLm9uTW9kYWxLZXlEb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlUG9zdEVycm9yID0gdGhpcy5oYW5kbGVQb3N0RXJyb3IuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZWRpdFRleHQ6ICcnLFxuICAgICAgICAgICAgb3JpZ2luYWxUZXh0OiAnJyxcbiAgICAgICAgICAgIHRpdGxlOiAnJyxcbiAgICAgICAgICAgIHBvc3RfaWQ6ICcnLFxuICAgICAgICAgICAgY2hhbm5lbF9pZDogJycsXG4gICAgICAgICAgICBjb21tZW50czogMCxcbiAgICAgICAgICAgIHJlZm9jdXNJZDogJycsXG4gICAgICAgICAgICBjdHJsU2VuZDogUHJlZmVyZW5jZVN0b3JlLmdldEJvb2woQ29uc3RhbnRzLlByZWZlcmVuY2VzLkNBVEVHT1JZX0FEVkFOQ0VEX1NFVFRJTkdTLCAnc2VuZF9vbl9jdHJsX2VudGVyJyksXG4gICAgICAgICAgICBwb3N0RXJyb3I6ICcnLFxuICAgICAgICAgICAgc2hvd0Vtb2ppUGlja2VyOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldENvbnRhaW5lciA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmcy5lZGl0TW9kYWxCb2R5O1xuICAgIH1cblxuICAgIHRvZ2dsZUVtb2ppUGlja2VyID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93RW1vamlQaWNrZXI6ICF0aGlzLnN0YXRlLnNob3dFbW9qaVBpY2tlcn0pO1xuICAgIH1cblxuICAgIGhpZGVFbW9qaVBpY2tlciA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvd0Vtb2ppUGlja2VyOiBmYWxzZX0pO1xuICAgIH1cblxuICAgIGhhbmRsZUVtb2ppQ2xpY2sgPSAoZW1vamkpID0+IHtcbiAgICAgICAgY29uc3QgZW1vamlBbGlhcyA9IGVtb2ppLm5hbWUgfHwgZW1vamkuYWxpYXNlc1swXTtcblxuICAgICAgICBpZiAoIWVtb2ppQWxpYXMpIHtcbiAgICAgICAgICAgIC8vT29wcy4uIFRoZXJlIHdlbnQgc29tZXRoaW5nIHdyb25nXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5lZGl0VGV4dCA9PT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2VkaXRUZXh0OiAnOicgKyBlbW9qaUFsaWFzICsgJzogJ30pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy9jaGVjayB3aGV0aGVyIHRoZXJlIGlzIGFscmVhZHkgYSBibGFuayBhdCB0aGUgZW5kIG9mIHRoZSBjdXJyZW50IG1lc3NhZ2VcbiAgICAgICAgICAgIGNvbnN0IG5ld01lc3NhZ2UgPSAoL1xccyskLy50ZXN0KHRoaXMuc3RhdGUuZWRpdFRleHQpKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5lZGl0VGV4dCArICc6JyArIGVtb2ppQWxpYXMgKyAnOiAnIDogdGhpcy5zdGF0ZS5lZGl0VGV4dCArICcgOicgKyBlbW9qaUFsaWFzICsgJzogJztcblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZWRpdFRleHQ6IG5ld01lc3NhZ2V9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dFbW9qaVBpY2tlcjogZmFsc2V9KTtcblxuICAgICAgICB0aGlzLnJlZnMuZWRpdGJveC5mb2N1cygpO1xuICAgIH1cblxuICAgIGdldEVkaXRQb3N0Q29udHJvbHMgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZnMuZWRpdFBvc3RFbW9qaTtcbiAgICB9XG5cbiAgICBoYW5kbGVQb3N0RXJyb3IocG9zdEVycm9yKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnBvc3RFcnJvciAhPT0gcG9zdEVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtwb3N0RXJyb3J9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUVkaXQoKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRQb3N0ID0ge1xuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5zdGF0ZS5lZGl0VGV4dCxcbiAgICAgICAgICAgIGlkOiB0aGlzLnN0YXRlLnBvc3RfaWQsXG4gICAgICAgICAgICBjaGFubmVsX2lkOiB0aGlzLnN0YXRlLmNoYW5uZWxfaWRcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5wb3N0RXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2Vycm9yQ2xhc3M6ICdhbmltYXRpb24tLWhpZ2hsaWdodCd9KTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2Vycm9yQ2xhc3M6IG51bGx9KTtcbiAgICAgICAgICAgIH0sIENvbnN0YW50cy5BTklNQVRJT05fVElNRU9VVCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXBkYXRlZFBvc3QubWVzc2FnZSA9PT0gdGhpcy5zdGF0ZS5vcmlnaW5hbFRleHQpIHtcbiAgICAgICAgICAgIC8vIG5vIGNoYW5nZXMgc28ganVzdCBjbG9zZSB0aGUgbW9kYWxcbiAgICAgICAgICAgICQoJyNlZGl0X3Bvc3QnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgTWVzc2FnZUhpc3RvcnlTdG9yZS5zdG9yZU1lc3NhZ2VJbkhpc3RvcnkodXBkYXRlZFBvc3QubWVzc2FnZSk7XG5cbiAgICAgICAgaWYgKHVwZGF0ZWRQb3N0Lm1lc3NhZ2UudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIHRlbXBTdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgICAgICBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRlbXBTdGF0ZSwgJ2VkaXRUZXh0Jyk7XG4gICAgICAgICAgICBCcm93c2VyU3RvcmUuc2V0SXRlbSgnZWRpdF9zdGF0ZV90cmFuc2ZlcicsIHRlbXBTdGF0ZSk7XG4gICAgICAgICAgICAkKCcjZWRpdF9wb3N0JykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgICAgIEdsb2JhbEFjdGlvbnMuc2hvd0RlbGV0ZVBvc3RNb2RhbChTZWxlY3RvcnMuZ2V0UG9zdChnZXRTdGF0ZSgpLCB0aGlzLnN0YXRlLnBvc3RfaWQpLCB0aGlzLnN0YXRlLmNvbW1lbnRzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZVBvc3QoXG4gICAgICAgICAgICB1cGRhdGVkUG9zdCxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgJCgnI2VkaXRfcG9zdCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2hhbmdlKGUpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGVkaXRUZXh0OiBtZXNzYWdlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhbmRsZUVkaXRLZXlQcmVzcyhlKSB7XG4gICAgICAgIGlmICghVXNlckFnZW50LmlzTW9iaWxlKCkgJiYgIXRoaXMuc3RhdGUuY3RybFNlbmQgJiYgZS53aGljaCA9PT0gS2V5Q29kZXMuRU5URVIgJiYgIWUuc2hpZnRLZXkgJiYgIWUuYWx0S2V5KSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnMuZWRpdGJveCkuYmx1cigpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFZGl0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jdHJsU2VuZCAmJiBlLmN0cmxLZXkgJiYgZS53aGljaCA9PT0gS2V5Q29kZXMuRU5URVIpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmcy5lZGl0Ym94KS5ibHVyKCk7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVkaXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUVkaXRQb3N0RXZlbnQob3B0aW9ucykge1xuICAgICAgICBjb25zdCBwb3N0ID0gU2VsZWN0b3JzLmdldFBvc3QoZ2V0U3RhdGUoKSwgb3B0aW9ucy5wb3N0SWQpO1xuICAgICAgICBpZiAoZ2xvYmFsLndpbmRvdy5tbV9saWNlbnNlLklzTGljZW5zZWQgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkFsbG93RWRpdFBvc3QgPT09IENvbnN0YW50cy5BTExPV19FRElUX1BPU1RfTkVWRVIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuQWxsb3dFZGl0UG9zdCA9PT0gQ29uc3RhbnRzLkFMTE9XX0VESVRfUE9TVF9USU1FX0xJTUlUKSB7XG4gICAgICAgICAgICAgICAgaWYgKChwb3N0LmNyZWF0ZV9hdCArIChnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5Qb3N0RWRpdFRpbWVMaW1pdCAqIDEwMDApKSA8IFV0aWxzLmdldFRpbWVzdGFtcCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBlZGl0VGV4dDogb3B0aW9ucy5tZXNzYWdlIHx8ICcnLFxuICAgICAgICAgICAgb3JpZ2luYWxUZXh0OiBvcHRpb25zLm1lc3NhZ2UgfHwgJycsXG4gICAgICAgICAgICB0aXRsZTogb3B0aW9ucy50aXRsZSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RfaWQ6IG9wdGlvbnMucG9zdElkIHx8ICcnLFxuICAgICAgICAgICAgY2hhbm5lbF9pZDogb3B0aW9ucy5jaGFubmVsSWQgfHwgJycsXG4gICAgICAgICAgICBjb21tZW50czogb3B0aW9ucy5jb21tZW50cyB8fCAwLFxuICAgICAgICAgICAgcmVmb2N1c0lkOiBvcHRpb25zLnJlZm9jdXNJZCB8fCAnJ1xuICAgICAgICB9KTtcblxuICAgICAgICAkKFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmcy5tb2RhbCkpLm1vZGFsKCdzaG93Jyk7XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5RG93bihlKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmN0cmxTZW5kICYmIGUua2V5Q29kZSA9PT0gS2V5Q29kZXMuRU5URVIgJiYgZS5jdHJsS2V5ID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVkaXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uUHJlZmVyZW5jZUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjdHJsU2VuZDogUHJlZmVyZW5jZVN0b3JlLmdldEJvb2woQ29uc3RhbnRzLlByZWZlcmVuY2VzLkNBVEVHT1JZX0FEVkFOQ0VEX1NFVFRJTkdTLCAnc2VuZF9vbl9jdHJsX2VudGVyJylcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25Nb2RhbEhpZGRlbigpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZWRpdFRleHQ6ICcnLCBvcmlnaW5hbFRleHQ6ICcnLCB0aXRsZTogJycsIGNoYW5uZWxfaWQ6ICcnLCBwb3N0X2lkOiAnJywgY29tbWVudHM6IDAsIHJlZm9jdXNJZDogJycsIGVycm9yOiAnJywgdHlwaW5nOiBmYWxzZX0pO1xuICAgIH1cblxuICAgIG9uTW9kYWxTaG93KGUpIHtcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGUucmVsYXRlZFRhcmdldDtcbiAgICAgICAgaWYgKCFidXR0b24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGVkaXRUZXh0OiAkKGJ1dHRvbikuYXR0cignZGF0YS1tZXNzYWdlJyksXG4gICAgICAgICAgICBvcmlnaW5hbFRleHQ6ICQoYnV0dG9uKS5hdHRyKCdkYXRhLW1lc3NhZ2UnKSxcbiAgICAgICAgICAgIHRpdGxlOiAkKGJ1dHRvbikuYXR0cignZGF0YS10aXRsZScpLFxuICAgICAgICAgICAgY2hhbm5lbF9pZDogJChidXR0b24pLmF0dHIoJ2RhdGEtY2hhbm5lbGlkJyksXG4gICAgICAgICAgICBwb3N0X2lkOiAkKGJ1dHRvbikuYXR0cignZGF0YS1wb3N0aWQnKSxcbiAgICAgICAgICAgIGNvbW1lbnRzOiAkKGJ1dHRvbikuYXR0cignZGF0YS1jb21tZW50cycpLFxuICAgICAgICAgICAgcmVmb2N1c0lkOiAkKGJ1dHRvbikuYXR0cignZGF0YS1yZWZvY3VzaWQnKSxcbiAgICAgICAgICAgIHR5cGluZzogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25Nb2RhbFNob3duKCkge1xuICAgICAgICB0aGlzLnJlZnMuZWRpdGJveC5mb2N1cygpO1xuXG4gICAgICAgIHRoaXMucmVmcy5lZGl0Ym94LnJlY2FsY3VsYXRlU2l6ZSgpO1xuICAgIH1cblxuICAgIG9uTW9kYWxIaWRlKCkge1xuICAgICAgICB0aGlzLnJlZnMuZWRpdGJveC5oaWRlUHJldmlldygpO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnJlZm9jdXNJZCAhPT0gJycpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSAkKHRoaXMuc3RhdGUucmVmb2N1c0lkKS5nZXQoMCk7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Nb2RhbEtleURvd24oZSkge1xuICAgICAgICBpZiAoZS53aGljaCA9PT0gQ29uc3RhbnRzLktleUNvZGVzLkVTQ0FQRSkge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAkKHRoaXMucmVmcy5tb2RhbCkub24oJ2hpZGRlbi5icy5tb2RhbCcsIHRoaXMub25Nb2RhbEhpZGRlbik7XG4gICAgICAgICQodGhpcy5yZWZzLm1vZGFsKS5vbignc2hvdy5icy5tb2RhbCcsIHRoaXMub25Nb2RhbFNob3cpO1xuICAgICAgICAkKHRoaXMucmVmcy5tb2RhbCkub24oJ3Nob3duLmJzLm1vZGFsJywgdGhpcy5vbk1vZGFsU2hvd24pO1xuICAgICAgICAkKHRoaXMucmVmcy5tb2RhbCkub24oJ2hpZGUuYnMubW9kYWwnLCB0aGlzLm9uTW9kYWxIaWRlKTtcbiAgICAgICAgJCh0aGlzLnJlZnMubW9kYWwpLm9uKCdrZXlkb3duJywgdGhpcy5vbk1vZGFsS2V5RG93bik7XG4gICAgICAgIFBvc3RTdG9yZS5hZGRFZGl0UG9zdExpc3RlbmVyKHRoaXMuaGFuZGxlRWRpdFBvc3RFdmVudCk7XG4gICAgICAgIFByZWZlcmVuY2VTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uUHJlZmVyZW5jZUNoYW5nZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgICQodGhpcy5yZWZzLm1vZGFsKS5vZmYoJ2hpZGRlbi5icy5tb2RhbCcsIHRoaXMub25Nb2RhbEhpZGRlbik7XG4gICAgICAgICQodGhpcy5yZWZzLm1vZGFsKS5vZmYoJ3Nob3cuYnMubW9kYWwnLCB0aGlzLm9uTW9kYWxTaG93KTtcbiAgICAgICAgJCh0aGlzLnJlZnMubW9kYWwpLm9mZignc2hvd24uYnMubW9kYWwnLCB0aGlzLm9uTW9kYWxTaG93bik7XG4gICAgICAgICQodGhpcy5yZWZzLm1vZGFsKS5vZmYoJ2hpZGUuYnMubW9kYWwnLCB0aGlzLm9uTW9kYWxIaWRlKTtcbiAgICAgICAgJCh0aGlzLnJlZnMubW9kYWwpLm9mZigna2V5ZG93bicsIHRoaXMub25Nb2RhbEtleURvd24pO1xuICAgICAgICBQb3N0U3RvcmUucmVtb3ZlRWRpdFBvc3RMaXN0bmVyKHRoaXMuaGFuZGxlRWRpdFBvc3RFdmVudCk7XG4gICAgICAgIFByZWZlcmVuY2VTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uUHJlZmVyZW5jZUNoYW5nZSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBlcnJvckJveENsYXNzID0gJ2VkaXQtcG9zdC1mb290ZXInICsgKHRoaXMuc3RhdGUucG9zdEVycm9yID8gJyBoYXMtZXJyb3InIDogJycpO1xuICAgICAgICBsZXQgcG9zdEVycm9yID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucG9zdEVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBwb3N0RXJyb3JDbGFzcyA9ICdwb3N0LWVycm9yJyArICh0aGlzLnN0YXRlLmVycm9yQ2xhc3MgPyAoJyAnICsgdGhpcy5zdGF0ZS5lcnJvckNsYXNzKSA6ICcnKTtcbiAgICAgICAgICAgIHBvc3RFcnJvciA9ICg8bGFiZWwgY2xhc3NOYW1lPXtwb3N0RXJyb3JDbGFzc30+e3RoaXMuc3RhdGUucG9zdEVycm9yfTwvbGFiZWw+KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbW9qaVBpY2tlciA9IG51bGw7XG4gICAgICAgIGlmICh3aW5kb3cubW1fY29uZmlnLkVuYWJsZUVtb2ppUGlja2VyID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIGVtb2ppUGlja2VyID0gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZW1vamktcGlja2VyX19jb250YWluZXInPlxuICAgICAgICAgICAgICAgICAgICA8RW1vamlQaWNrZXJPdmVybGF5XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3dFbW9qaVBpY2tlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcj17dGhpcy5nZXRDb250YWluZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9e3RoaXMuZ2V0RWRpdFBvc3RDb250cm9sc31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uSGlkZT17dGhpcy5oaWRlRW1vamlQaWNrZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVtb2ppQ2xpY2s9e3RoaXMuaGFuZGxlRW1vamlDbGlja31cbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0T2Zmc2V0PXs1MH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcE9mZnNldD17LTIwfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdpY29uIGljb24tLWVtb2ppJ1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy50b2dnbGVFbW9qaVBpY2tlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBDb25zdGFudHMuRU1PSklfSUNPTl9TVkd9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbW9kYWwgZmFkZSBlZGl0LW1vZGFsJ1xuICAgICAgICAgICAgICAgIHJlZj0nbW9kYWwnXG4gICAgICAgICAgICAgICAgaWQ9J2VkaXRfcG9zdCdcbiAgICAgICAgICAgICAgICByb2xlPSdkaWFsb2cnXG4gICAgICAgICAgICAgICAgdGFiSW5kZXg9Jy0xJ1xuICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPSd0cnVlJ1xuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtb2RhbC1kaWFsb2cgbW9kYWwtcHVzaC1kb3duIG1vZGFsLXhsJz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWNvbnRlbnQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY2xvc2UnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtZGlzbWlzcz0nbW9kYWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9J0Nsb3NlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49J3RydWUnPnsnw5cnfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSdtb2RhbC10aXRsZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nZWRpdF9wb3N0LmVkaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRWRpdCB7dGl0bGV9J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuc3RhdGUudGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0nZWRpdE1vZGFsQm9keSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2VkaXQtbW9kYWwtYm9keSBtb2RhbC1ib2R5J1xuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUZXh0Ym94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlQcmVzcz17dGhpcy5oYW5kbGVFZGl0S2V5UHJlc3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5oYW5kbGVLZXlEb3dufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVQb3N0RXJyb3I9e3RoaXMuaGFuZGxlUG9zdEVycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5lZGl0VGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbElkPXt0aGlzLnN0YXRlLmNoYW5uZWxfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtb2ppRW5hYmxlZD17d2luZG93Lm1tX2NvbmZpZy5FbmFibGVFbW9qaVBpY2tlciA9PT0gJ3RydWUnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVNZXNzYWdlPXtVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ2VkaXRfcG9zdC5lZGl0UG9zdCcsICdFZGl0IHRoZSBwb3N0Li4uJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRzQ29tbWFuZHM9e2ZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uTGlzdFN0eWxlPSdib3R0b20nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdlZGl0X3RleHRib3gnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0nZWRpdGJveCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0nZWRpdFBvc3RFbW9qaSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdlZGl0LXBvc3RfX2FjdGlvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZW1vamlQaWNrZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtlcnJvckJveENsYXNzfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Bvc3RFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWZvb3Rlcic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYnRuIGJ0bi1kZWZhdWx0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWRpc21pc3M9J21vZGFsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdlZGl0X3Bvc3QuY2FuY2VsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0NhbmNlbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdidG4gYnRuLXByaW1hcnknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRWRpdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nZWRpdF9wb3N0LnNhdmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU2F2ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL2VkaXRfcG9zdF9tb2RhbC5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOzs7Ozs7O0FBQ0E7QUF6QkE7QUFDQTtBQTBCQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQStCQTtBQUNBO0FBQ0E7QUFqQ0E7QUFtQ0E7QUFDQTtBQUNBO0FBckNBO0FBdUNBO0FBQ0E7QUFDQTtBQXpDQTtBQTJDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoRUE7QUFrRUE7QUFDQTtBQUNBO0FBakVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBaEJBO0FBNEJBO0FBQ0E7OztBQXdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFDQTtBQVNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVZBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQURBO0FBVEE7QUFtQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBeEJBO0FBNEJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVhBO0FBaERBO0FBREE7QUFSQTtBQW1GQTs7O0FBbFdBO0FBQ0E7QUFEQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2471\n");

/***/ }),

/***/ 2472:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(773);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _modal_store = __webpack_require__(2164);\n\nvar _modal_store2 = _interopRequireDefault(_modal_store);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _get_link_modal = __webpack_require__(2272);\n\nvar _get_link_modal2 = _interopRequireDefault(_get_link_modal);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GetPostLinkModal = function (_React$Component) {\n    (0, _inherits3.default)(GetPostLinkModal, _React$Component);\n\n    function GetPostLinkModal(props) {\n        (0, _classCallCheck3.default)(this, GetPostLinkModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (GetPostLinkModal.__proto__ || (0, _getPrototypeOf2.default)(GetPostLinkModal)).call(this, props));\n\n        _this.handleToggle = _this.handleToggle.bind(_this);\n        _this.hide = _this.hide.bind(_this);\n\n        _this.shouldComponentUpdate = _reactAddonsPureRenderMixin2.default.shouldComponentUpdate.bind(_this);\n\n        _this.state = {\n            show: false,\n            post: {}\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(GetPostLinkModal, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _modal_store2.default.addModalListener(_constants2.default.ActionTypes.TOGGLE_GET_POST_LINK_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _modal_store2.default.removeModalListener(_constants2.default.ActionTypes.TOGGLE_GET_POST_LINK_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'handleToggle',\n        value: function handleToggle(value, args) {\n            this.setState({\n                show: value,\n                post: args.post\n            });\n        }\n    }, {\n        key: 'hide',\n        value: function hide() {\n            this.setState({\n                show: false\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(_get_link_modal2.default, {\n                show: this.state.show,\n                onHide: this.hide,\n                title: Utils.localizeMessage('get_post_link_modal.title', 'Copy Permalink'),\n                helpText: Utils.localizeMessage('get_post_link_modal.help', 'The link below allows authorized users to see your post.'),\n                link: _team_store2.default.getCurrentTeamUrl() + '/pl/' + this.state.post.id\n            });\n        }\n    }]);\n    return GetPostLinkModal;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = GetPostLinkModal;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3Mi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2dldF9wb3N0X2xpbmtfbW9kYWwuanN4PzVlNzEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFB1cmVSZW5kZXJNaXhpbiBmcm9tICdyZWFjdC1hZGRvbnMtcHVyZS1yZW5kZXItbWl4aW4nO1xuXG5pbXBvcnQgTW9kYWxTdG9yZSBmcm9tICdzdG9yZXMvbW9kYWxfc3RvcmUuanN4JztcbmltcG9ydCBUZWFtU3RvcmUgZnJvbSAnc3RvcmVzL3RlYW1fc3RvcmUuanN4JztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCBHZXRMaW5rTW9kYWwgZnJvbSAnLi9nZXRfbGlua19tb2RhbC5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHZXRQb3N0TGlua01vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGUgPSB0aGlzLmhhbmRsZVRvZ2dsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhpZGUgPSB0aGlzLmhpZGUuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IFB1cmVSZW5kZXJNaXhpbi5zaG91bGRDb21wb25lbnRVcGRhdGUuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICBwb3N0OiB7fVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBNb2RhbFN0b3JlLmFkZE1vZGFsTGlzdGVuZXIoQ29uc3RhbnRzLkFjdGlvblR5cGVzLlRPR0dMRV9HRVRfUE9TVF9MSU5LX01PREFMLCB0aGlzLmhhbmRsZVRvZ2dsZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIE1vZGFsU3RvcmUucmVtb3ZlTW9kYWxMaXN0ZW5lcihDb25zdGFudHMuQWN0aW9uVHlwZXMuVE9HR0xFX0dFVF9QT1NUX0xJTktfTU9EQUwsIHRoaXMuaGFuZGxlVG9nZ2xlKTtcbiAgICB9XG5cbiAgICBoYW5kbGVUb2dnbGUodmFsdWUsIGFyZ3MpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93OiB2YWx1ZSxcbiAgICAgICAgICAgIHBvc3Q6IGFyZ3MucG9zdFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxHZXRMaW5rTW9kYWxcbiAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3d9XG4gICAgICAgICAgICAgICAgb25IaWRlPXt0aGlzLmhpZGV9XG4gICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgnZ2V0X3Bvc3RfbGlua19tb2RhbC50aXRsZScsICdDb3B5IFBlcm1hbGluaycpfVxuICAgICAgICAgICAgICAgIGhlbHBUZXh0PXtVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ2dldF9wb3N0X2xpbmtfbW9kYWwuaGVscCcsICdUaGUgbGluayBiZWxvdyBhbGxvd3MgYXV0aG9yaXplZCB1c2VycyB0byBzZWUgeW91ciBwb3N0LicpfVxuICAgICAgICAgICAgICAgIGxpbms9e1RlYW1TdG9yZS5nZXRDdXJyZW50VGVhbVVybCgpICsgJy9wbC8nICsgdGhpcy5zdGF0ZS5wb3N0LmlkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy9nZXRfcG9zdF9saW5rX21vZGFsLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQVJBO0FBWUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBOzs7QUE5Q0E7QUFiQTtBQUNBO0FBWUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2472\n");

/***/ }),

/***/ 2473:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(773);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _file_actions = __webpack_require__(807);\n\nvar _modal_store = __webpack_require__(2164);\n\nvar _modal_store2 = _interopRequireDefault(_modal_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _get_link_modal = __webpack_require__(2272);\n\nvar _get_link_modal2 = _interopRequireDefault(_get_link_modal);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GetPublicLinkModal = function (_React$Component) {\n    (0, _inherits3.default)(GetPublicLinkModal, _React$Component);\n\n    function GetPublicLinkModal(props) {\n        (0, _classCallCheck3.default)(this, GetPublicLinkModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (GetPublicLinkModal.__proto__ || (0, _getPrototypeOf2.default)(GetPublicLinkModal)).call(this, props));\n\n        _this.handlePublicLink = _this.handlePublicLink.bind(_this);\n        _this.handleToggle = _this.handleToggle.bind(_this);\n        _this.hide = _this.hide.bind(_this);\n\n        _this.shouldComponentUpdate = _reactAddonsPureRenderMixin2.default.shouldComponentUpdate.bind(_this);\n\n        _this.state = {\n            show: false,\n            fileId: '',\n            link: ''\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(GetPublicLinkModal, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _modal_store2.default.addModalListener(_constants2.default.ActionTypes.TOGGLE_GET_PUBLIC_LINK_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps, prevState) {\n            if (this.state.show && !prevState.show) {\n                (0, _file_actions.getPublicLink)(this.state.fileId, this.handlePublicLink);\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _modal_store2.default.removeModalListener(_constants2.default.ActionTypes.TOGGLE_GET_PUBLIC_LINK_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'handlePublicLink',\n        value: function handlePublicLink(link) {\n            this.setState({\n                link: link\n            });\n        }\n    }, {\n        key: 'handleToggle',\n        value: function handleToggle(value, args) {\n            this.setState({\n                show: value,\n                fileId: args.fileId,\n                link: ''\n            });\n        }\n    }, {\n        key: 'hide',\n        value: function hide() {\n            this.setState({\n                show: false\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(_get_link_modal2.default, {\n                show: this.state.show,\n                onHide: this.hide,\n                title: Utils.localizeMessage('get_public_link_modal.title', 'Copy Public Link'),\n                helpText: Utils.localizeMessage('get_public_link_modal.help', 'The link below allows anyone to see this file without being registered on this server.'),\n                link: this.state.link\n            });\n        }\n    }]);\n    return GetPublicLinkModal;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = GetPublicLinkModal;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3My5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2dldF9wdWJsaWNfbGlua19tb2RhbC5qc3g/MTgwOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHVyZVJlbmRlck1peGluIGZyb20gJ3JlYWN0LWFkZG9ucy1wdXJlLXJlbmRlci1taXhpbic7XG5cbmltcG9ydCB7Z2V0UHVibGljTGlua30gZnJvbSAnYWN0aW9ucy9maWxlX2FjdGlvbnMuanN4JztcbmltcG9ydCBNb2RhbFN0b3JlIGZyb20gJ3N0b3Jlcy9tb2RhbF9zdG9yZS5qc3gnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAndXRpbHMvdXRpbHMuanN4JztcblxuaW1wb3J0IEdldExpbmtNb2RhbCBmcm9tICcuL2dldF9saW5rX21vZGFsLmpzeCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdldFB1YmxpY0xpbmtNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlUHVibGljTGluayA9IHRoaXMuaGFuZGxlUHVibGljTGluay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZSA9IHRoaXMuaGFuZGxlVG9nZ2xlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGlkZSA9IHRoaXMuaGlkZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc2hvdWxkQ29tcG9uZW50VXBkYXRlID0gUHVyZVJlbmRlck1peGluLnNob3VsZENvbXBvbmVudFVwZGF0ZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgICAgIGZpbGVJZDogJycsXG4gICAgICAgICAgICBsaW5rOiAnJ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBNb2RhbFN0b3JlLmFkZE1vZGFsTGlzdGVuZXIoQ29uc3RhbnRzLkFjdGlvblR5cGVzLlRPR0dMRV9HRVRfUFVCTElDX0xJTktfTU9EQUwsIHRoaXMuaGFuZGxlVG9nZ2xlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2hvdyAmJiAhcHJldlN0YXRlLnNob3cpIHtcbiAgICAgICAgICAgIGdldFB1YmxpY0xpbmsodGhpcy5zdGF0ZS5maWxlSWQsIHRoaXMuaGFuZGxlUHVibGljTGluayk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgTW9kYWxTdG9yZS5yZW1vdmVNb2RhbExpc3RlbmVyKENvbnN0YW50cy5BY3Rpb25UeXBlcy5UT0dHTEVfR0VUX1BVQkxJQ19MSU5LX01PREFMLCB0aGlzLmhhbmRsZVRvZ2dsZSk7XG4gICAgfVxuXG4gICAgaGFuZGxlUHVibGljTGluayhsaW5rKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbGlua1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVUb2dnbGUodmFsdWUsIGFyZ3MpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93OiB2YWx1ZSxcbiAgICAgICAgICAgIGZpbGVJZDogYXJncy5maWxlSWQsXG4gICAgICAgICAgICBsaW5rOiAnJ1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxHZXRMaW5rTW9kYWxcbiAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3d9XG4gICAgICAgICAgICAgICAgb25IaWRlPXt0aGlzLmhpZGV9XG4gICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgnZ2V0X3B1YmxpY19saW5rX21vZGFsLnRpdGxlJywgJ0NvcHkgUHVibGljIExpbmsnKX1cbiAgICAgICAgICAgICAgICBoZWxwVGV4dD17VXRpbHMubG9jYWxpemVNZXNzYWdlKCdnZXRfcHVibGljX2xpbmtfbW9kYWwuaGVscCcsICdUaGUgbGluayBiZWxvdyBhbGxvd3MgYW55b25lIHRvIHNlZSB0aGlzIGZpbGUgd2l0aG91dCBiZWluZyByZWdpc3RlcmVkIG9uIHRoaXMgc2VydmVyLicpfVxuICAgICAgICAgICAgICAgIGxpbms9e3RoaXMuc3RhdGUubGlua31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvZ2V0X3B1YmxpY19saW5rX21vZGFsLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBVEE7QUFjQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTs7O0FBN0RBO0FBYkE7QUFDQTtBQVlBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2473\n");

/***/ }),

/***/ 2474:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactAddonsPureRenderMixin = __webpack_require__(773);\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nvar _modal_store = __webpack_require__(2164);\n\nvar _modal_store2 = _interopRequireDefault(_modal_store);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _get_link_modal = __webpack_require__(2272);\n\nvar _get_link_modal2 = _interopRequireDefault(_get_link_modal);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GetTeamInviteLinkModal = function (_React$Component) {\n    (0, _inherits3.default)(GetTeamInviteLinkModal, _React$Component);\n\n    function GetTeamInviteLinkModal(props) {\n        (0, _classCallCheck3.default)(this, GetTeamInviteLinkModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (GetTeamInviteLinkModal.__proto__ || (0, _getPrototypeOf2.default)(GetTeamInviteLinkModal)).call(this, props));\n\n        _this.handleToggle = _this.handleToggle.bind(_this);\n\n        _this.shouldComponentUpdate = _reactAddonsPureRenderMixin2.default.shouldComponentUpdate.bind(_this);\n\n        _this.state = {\n            show: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(GetTeamInviteLinkModal, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _modal_store2.default.addModalListener(_constants2.default.ActionTypes.TOGGLE_GET_TEAM_INVITE_LINK_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _modal_store2.default.removeModalListener(_constants2.default.ActionTypes.TOGGLE_GET_TEAM_INVITE_LINK_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'handleToggle',\n        value: function handleToggle(value) {\n            this.setState({\n                show: value\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var helpText = void 0;\n            if (global.window.mm_config.EnableUserCreation === 'true') {\n                helpText = Utils.localizeMessage('get_team_invite_link_modal.help', 'Send teammates the link below for them to sign-up to this team site. The Team Invite Link can be shared with multiple teammates as it does not change unless it\\'s regenerated in Team Settings by a Team Admin.');\n            } else {\n                helpText = Utils.localizeMessage('get_team_invite_link_modal.helpDisabled', 'User creation has been disabled for your team. Please ask your team administrator for details.');\n            }\n\n            return _react2.default.createElement(_get_link_modal2.default, {\n                show: this.state.show,\n                onHide: function onHide() {\n                    return _this2.setState({ show: false });\n                },\n                title: Utils.localizeMessage('get_team_invite_link_modal.title', 'Team Invite Link'),\n                helpText: helpText,\n                link: _team_store2.default.getCurrentInviteLink()\n            });\n        }\n    }]);\n    return GetTeamInviteLinkModal;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = GetTeamInviteLinkModal;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3NC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2dldF90ZWFtX2ludml0ZV9saW5rX21vZGFsLmpzeD8zYTYzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQdXJlUmVuZGVyTWl4aW4gZnJvbSAncmVhY3QtYWRkb25zLXB1cmUtcmVuZGVyLW1peGluJztcblxuaW1wb3J0IE1vZGFsU3RvcmUgZnJvbSAnc3RvcmVzL21vZGFsX3N0b3JlLmpzeCc7XG5pbXBvcnQgVGVhbVN0b3JlIGZyb20gJ3N0b3Jlcy90ZWFtX3N0b3JlLmpzeCc7XG5cbmltcG9ydCBDb25zdGFudHMgZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgR2V0TGlua01vZGFsIGZyb20gJy4vZ2V0X2xpbmtfbW9kYWwuanN4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2V0VGVhbUludml0ZUxpbmtNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlID0gdGhpcy5oYW5kbGVUb2dnbGUuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnNob3VsZENvbXBvbmVudFVwZGF0ZSA9IFB1cmVSZW5kZXJNaXhpbi5zaG91bGRDb21wb25lbnRVcGRhdGUuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvdzogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgTW9kYWxTdG9yZS5hZGRNb2RhbExpc3RlbmVyKENvbnN0YW50cy5BY3Rpb25UeXBlcy5UT0dHTEVfR0VUX1RFQU1fSU5WSVRFX0xJTktfTU9EQUwsIHRoaXMuaGFuZGxlVG9nZ2xlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgTW9kYWxTdG9yZS5yZW1vdmVNb2RhbExpc3RlbmVyKENvbnN0YW50cy5BY3Rpb25UeXBlcy5UT0dHTEVfR0VUX1RFQU1fSU5WSVRFX0xJTktfTU9EQUwsIHRoaXMuaGFuZGxlVG9nZ2xlKTtcbiAgICB9XG5cbiAgICBoYW5kbGVUb2dnbGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93OiB2YWx1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBoZWxwVGV4dDtcbiAgICAgICAgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkVuYWJsZVVzZXJDcmVhdGlvbiA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICBoZWxwVGV4dCA9IFV0aWxzLmxvY2FsaXplTWVzc2FnZSgnZ2V0X3RlYW1faW52aXRlX2xpbmtfbW9kYWwuaGVscCcsICdTZW5kIHRlYW1tYXRlcyB0aGUgbGluayBiZWxvdyBmb3IgdGhlbSB0byBzaWduLXVwIHRvIHRoaXMgdGVhbSBzaXRlLiBUaGUgVGVhbSBJbnZpdGUgTGluayBjYW4gYmUgc2hhcmVkIHdpdGggbXVsdGlwbGUgdGVhbW1hdGVzIGFzIGl0IGRvZXMgbm90IGNoYW5nZSB1bmxlc3MgaXRcXCdzIHJlZ2VuZXJhdGVkIGluIFRlYW0gU2V0dGluZ3MgYnkgYSBUZWFtIEFkbWluLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGVscFRleHQgPSBVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ2dldF90ZWFtX2ludml0ZV9saW5rX21vZGFsLmhlbHBEaXNhYmxlZCcsICdVc2VyIGNyZWF0aW9uIGhhcyBiZWVuIGRpc2FibGVkIGZvciB5b3VyIHRlYW0uIFBsZWFzZSBhc2sgeW91ciB0ZWFtIGFkbWluaXN0cmF0b3IgZm9yIGRldGFpbHMuJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPEdldExpbmtNb2RhbFxuICAgICAgICAgICAgICAgIHNob3c9e3RoaXMuc3RhdGUuc2hvd31cbiAgICAgICAgICAgICAgICBvbkhpZGU9eygpID0+IHRoaXMuc2V0U3RhdGUoe3Nob3c6IGZhbHNlfSl9XG4gICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgnZ2V0X3RlYW1faW52aXRlX2xpbmtfbW9kYWwudGl0bGUnLCAnVGVhbSBJbnZpdGUgTGluaycpfVxuICAgICAgICAgICAgICAgIGhlbHBUZXh0PXtoZWxwVGV4dH1cbiAgICAgICAgICAgICAgICBsaW5rPXtUZWFtU3RvcmUuZ2V0Q3VycmVudEludml0ZUxpbmsoKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvZ2V0X3RlYW1faW52aXRlX2xpbmtfbW9kYWwuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFQQTtBQVVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBOzs7QUE1Q0E7QUFiQTtBQUNBO0FBWUE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2474\n");

/***/ }),

/***/ 2475:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactDom = __webpack_require__(48);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _global_actions = __webpack_require__(57);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _team_actions = __webpack_require__(453);\n\nvar _channel_store = __webpack_require__(34);\n\nvar _channel_store2 = _interopRequireDefault(_channel_store);\n\nvar _modal_store = __webpack_require__(2164);\n\nvar _modal_store2 = _interopRequireDefault(_modal_store);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _confirm_modal = __webpack_require__(319);\n\nvar _confirm_modal2 = _interopRequireDefault(_confirm_modal);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ActionTypes = _constants2.default.ActionTypes; // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar holders = (0, _reactIntl.defineMessages)({\n    emailError: {\n        id: 'invite_member.emailError',\n        defaultMessage: 'Please enter a valid email address'\n    },\n    firstname: {\n        id: 'invite_member.firstname',\n        defaultMessage: 'First name'\n    },\n    lastname: {\n        id: 'invite_member.lastname',\n        defaultMessage: 'Last name'\n    },\n    modalTitle: {\n        id: 'invite_member.modalTitle',\n        defaultMessage: 'Discard Invitations?'\n    },\n    modalMessage: {\n        id: 'invite_member.modalMessage',\n        defaultMessage: 'You have unsent invitations, are you sure you want to discard them?'\n    },\n    modalButton: {\n        id: 'invite_member.modalButton',\n        defaultMessage: 'Yes, Discard'\n    }\n});\n\nvar InviteMemberModal = function (_React$Component) {\n    (0, _inherits3.default)(InviteMemberModal, _React$Component);\n\n    function InviteMemberModal(props) {\n        (0, _classCallCheck3.default)(this, InviteMemberModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (InviteMemberModal.__proto__ || (0, _getPrototypeOf2.default)(InviteMemberModal)).call(this, props));\n\n        _this.teamChange = _this.teamChange.bind(_this);\n        _this.handleToggle = _this.handleToggle.bind(_this);\n        _this.handleSubmit = _this.handleSubmit.bind(_this);\n        _this.handleHide = _this.handleHide.bind(_this);\n        _this.addInviteFields = _this.addInviteFields.bind(_this);\n        _this.clearFields = _this.clearFields.bind(_this);\n        _this.removeInviteFields = _this.removeInviteFields.bind(_this);\n        _this.showGetTeamInviteLinkModal = _this.showGetTeamInviteLinkModal.bind(_this);\n        _this.handleKeyDown = _this.handleKeyDown.bind(_this);\n\n        var team = _team_store2.default.getCurrent();\n\n        _this.state = {\n            show: false,\n            inviteIds: [0],\n            idCount: 0,\n            emailErrors: {},\n            firstNameErrors: {},\n            lastNameErrors: {},\n            emailEnabled: global.window.mm_config.SendEmailNotifications === 'true',\n            userCreationEnabled: global.window.mm_config.EnableUserCreation === 'true',\n            showConfirmModal: false,\n            isSendingEmails: false,\n            teamType: team ? team.type : null\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(InviteMemberModal, [{\n        key: 'teamChange',\n        value: function teamChange() {\n            var team = _team_store2.default.getCurrent();\n            var teamType = team ? team.type : null;\n            this.setState({\n                teamType: teamType\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _modal_store2.default.addModalListener(ActionTypes.TOGGLE_INVITE_MEMBER_MODAL, this.handleToggle);\n            _team_store2.default.addChangeListener(this.teamChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _modal_store2.default.removeModalListener(ActionTypes.TOGGLE_INVITE_MEMBER_MODAL, this.handleToggle);\n            _team_store2.default.removeChangeListener(this.teamChange);\n        }\n    }, {\n        key: 'handleToggle',\n        value: function handleToggle(value) {\n            this.setState({\n                show: value,\n                serverError: null\n            });\n        }\n    }, {\n        key: 'handleSubmit',\n        value: function handleSubmit() {\n            var _this2 = this;\n\n            if (!this.state.emailEnabled) {\n                return;\n            }\n\n            var inviteIds = this.state.inviteIds;\n            var count = inviteIds.length;\n            var invites = [];\n            var emailErrors = this.state.emailErrors;\n            var firstNameErrors = this.state.firstNameErrors;\n            var lastNameErrors = this.state.lastNameErrors;\n            var valid = true;\n\n            for (var i = 0; i < count; i++) {\n                var invite = {};\n                var index = inviteIds[i];\n                invite.email = _reactDom2.default.findDOMNode(this.refs['email' + index]).value.trim();\n                invite.firstName = _reactDom2.default.findDOMNode(this.refs['first_name' + index]).value.trim();\n                invite.lastName = _reactDom2.default.findDOMNode(this.refs['last_name' + index]).value.trim();\n                if (invite.email !== '' || index === 0) {\n                    if (!invite.email || !utils.isEmail(invite.email)) {\n                        emailErrors[index] = this.props.intl.formatMessage(holders.emailError);\n                        valid = false;\n                    } else {\n                        emailErrors[index] = '';\n                    }\n                    invites.push(invite);\n                }\n            }\n\n            this.setState({ emailErrors: emailErrors, firstNameErrors: firstNameErrors, lastNameErrors: lastNameErrors });\n\n            if (!valid || invites.length === 0) {\n                return;\n            }\n\n            var data = {};\n            data.invites = invites;\n\n            this.setState({ isSendingEmails: true });\n\n            (0, _team_actions.inviteMembers)(data, function () {\n                _this2.handleHide(false);\n                _this2.setState({ isSendingEmails: false });\n            }, function (err) {\n                if (err.id === 'api.team.invite_members.already.app_error') {\n                    emailErrors[err.detailed_error] = err.message;\n                    _this2.setState({ emailErrors: emailErrors });\n                } else {\n                    _this2.setState({ serverError: err.message });\n                }\n\n                _this2.setState({ isSendingEmails: false });\n            });\n        }\n    }, {\n        key: 'handleHide',\n        value: function handleHide(requireConfirm) {\n            if (requireConfirm) {\n                var notEmpty = false;\n                for (var i = 0; i < this.state.inviteIds.length; i++) {\n                    var index = this.state.inviteIds[i];\n                    if (_reactDom2.default.findDOMNode(this.refs['email' + index]).value.trim() !== '') {\n                        notEmpty = true;\n                        break;\n                    }\n                }\n\n                if (notEmpty) {\n                    this.setState({\n                        showConfirmModal: true\n                    });\n\n                    return;\n                }\n            }\n\n            this.clearFields();\n\n            this.setState({\n                show: false,\n                showConfirmModal: false\n            });\n        }\n    }, {\n        key: 'addInviteFields',\n        value: function addInviteFields() {\n            var count = this.state.idCount + 1;\n            var inviteIds = this.state.inviteIds;\n            inviteIds.push(count);\n            this.setState({ inviteIds: inviteIds, idCount: count });\n        }\n    }, {\n        key: 'clearFields',\n        value: function clearFields() {\n            var inviteIds = this.state.inviteIds;\n\n            for (var i = 0; i < inviteIds.length; i++) {\n                var index = inviteIds[i];\n                _reactDom2.default.findDOMNode(this.refs['email' + index]).value = '';\n                _reactDom2.default.findDOMNode(this.refs['first_name' + index]).value = '';\n                _reactDom2.default.findDOMNode(this.refs['last_name' + index]).value = '';\n            }\n\n            this.setState({\n                inviteIds: [0],\n                idCount: 0,\n                emailErrors: {},\n                firstNameErrors: {},\n                lastNameErrors: {}\n            });\n        }\n    }, {\n        key: 'removeInviteFields',\n        value: function removeInviteFields(index) {\n            var count = this.state.idCount;\n            var inviteIds = this.state.inviteIds;\n            var i = inviteIds.indexOf(index);\n            if (i > -1) {\n                inviteIds.splice(i, 1);\n            }\n            if (!inviteIds.length) {\n                inviteIds.push(++count);\n            }\n            this.setState({ inviteIds: inviteIds, idCount: count });\n        }\n    }, {\n        key: 'showGetTeamInviteLinkModal',\n        value: function showGetTeamInviteLinkModal() {\n            this.handleHide(false);\n\n            GlobalActions.showGetTeamInviteLinkModal();\n        }\n    }, {\n        key: 'handleKeyDown',\n        value: function handleKeyDown(e) {\n            if (e.keyCode === _constants2.default.KeyCodes.ENTER) {\n                e.preventDefault();\n                this.handleSubmit();\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this3 = this;\n\n            var currentUser = _user_store2.default.getCurrentUser();\n            var formatMessage = this.props.intl.formatMessage;\n\n\n            if (currentUser != null && this.state.teamType != null) {\n                var inviteSections = [];\n                var inviteIds = this.state.inviteIds;\n                for (var i = 0; i < inviteIds.length; i++) {\n                    var index = inviteIds[i];\n                    var emailError = null;\n                    if (this.state.emailErrors[index]) {\n                        emailError = _react2.default.createElement(\n                            'label',\n                            { className: 'control-label' },\n                            this.state.emailErrors[index]\n                        );\n                    }\n                    var firstNameError = null;\n                    if (this.state.firstNameErrors[index]) {\n                        firstNameError = _react2.default.createElement(\n                            'label',\n                            { className: 'control-label' },\n                            this.state.firstNameErrors[index]\n                        );\n                    }\n                    var lastNameError = null;\n                    if (this.state.lastNameErrors[index]) {\n                        lastNameError = _react2.default.createElement(\n                            'label',\n                            { className: 'control-label' },\n                            this.state.lastNameErrors[index]\n                        );\n                    }\n\n                    var removeButton = null;\n                    if (index) {\n                        removeButton = _react2.default.createElement(\n                            'div',\n                            null,\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    type: 'button',\n                                    className: 'btn btn-link remove__member',\n                                    onClick: this.removeInviteFields.bind(this, index)\n                                },\n                                _react2.default.createElement('span', { className: 'fa fa-trash' })\n                            )\n                        );\n                    }\n                    var emailClass = 'form-group invite';\n                    if (emailError) {\n                        emailClass += ' has-error';\n                    }\n\n                    var nameFields = null;\n\n                    var firstNameClass = 'form-group';\n                    if (firstNameError) {\n                        firstNameClass += ' has-error';\n                    }\n                    var lastNameClass = 'form-group';\n                    if (lastNameError) {\n                        lastNameClass += ' has-error';\n                    }\n                    nameFields = _react2.default.createElement(\n                        'div',\n                        { className: 'row row--invite' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-sm-6' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: firstNameClass },\n                                _react2.default.createElement('input', {\n                                    onKeyDown: this.handleKeyDown,\n                                    type: 'text',\n                                    className: 'form-control',\n                                    ref: 'first_name' + index,\n                                    placeholder: formatMessage(holders.firstname),\n                                    maxLength: '64',\n                                    disabled: !this.state.emailEnabled || !this.state.userCreationEnabled,\n                                    spellCheck: 'false'\n                                }),\n                                firstNameError\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-sm-6' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: lastNameClass },\n                                _react2.default.createElement('input', {\n                                    onKeyDown: this.handleKeyDown,\n                                    type: 'text',\n                                    className: 'form-control',\n                                    ref: 'last_name' + index,\n                                    placeholder: formatMessage(holders.lastname),\n                                    maxLength: '64',\n                                    disabled: !this.state.emailEnabled || !this.state.userCreationEnabled,\n                                    spellCheck: 'false'\n                                }),\n                                lastNameError\n                            )\n                        )\n                    );\n\n                    inviteSections[index] = _react2.default.createElement(\n                        'div',\n                        { key: 'key' + index },\n                        removeButton,\n                        _react2.default.createElement(\n                            'div',\n                            { className: emailClass },\n                            _react2.default.createElement('input', {\n                                onKeyUp: this.displayNameKeyUp,\n                                onKeyDown: this.handleKeyDown,\n                                type: 'text',\n                                ref: 'email' + index,\n                                className: 'form-control',\n                                placeholder: 'email@domain.com',\n                                maxLength: '64',\n                                disabled: !this.state.emailEnabled || !this.state.userCreationEnabled,\n                                spellCheck: 'false'\n                            }),\n                            emailError\n                        ),\n                        nameFields\n                    );\n                }\n\n                var serverError = null;\n                if (this.state.serverError) {\n                    serverError = _react2.default.createElement(\n                        'div',\n                        { className: 'form-group has-error' },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'control-label' },\n                            this.state.serverError\n                        )\n                    );\n                }\n\n                var content = null;\n                var sendButton = null;\n\n                var defaultChannelName = '';\n                if (_channel_store2.default.getByName(_constants2.default.DEFAULT_CHANNEL)) {\n                    defaultChannelName = _channel_store2.default.getByName(_constants2.default.DEFAULT_CHANNEL).display_name;\n                }\n\n                if (this.state.emailEnabled && this.state.userCreationEnabled) {\n                    content = _react2.default.createElement(\n                        'div',\n                        null,\n                        serverError,\n                        _react2.default.createElement(\n                            'button',\n                            {\n                                type: 'button',\n                                className: 'btn btn-default',\n                                onClick: this.addInviteFields\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'invite_member.addAnother',\n                                defaultMessage: 'Add another'\n                            })\n                        ),\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement(\n                            'span',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                                id: 'invite_member.autoJoin',\n                                defaultMessage: 'People invited automatically join the <strong>{channel}</strong> channel.',\n                                values: {\n                                    channel: defaultChannelName\n                                }\n                            })\n                        )\n                    );\n\n                    var sendButtonLabel = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'invite_member.send',\n                        defaultMessage: 'Send Invitation'\n                    });\n                    if (this.state.isSendingEmails) {\n                        sendButtonLabel = _react2.default.createElement(\n                            'span',\n                            null,\n                            _react2.default.createElement('i', { className: 'fa fa-spinner fa-spin' }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'invite_member.sending',\n                                defaultMessage: ' Sending'\n                            })\n                        );\n                    } else if (this.state.inviteIds.length > 1) {\n                        sendButtonLabel = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'invite_member.send2',\n                            defaultMessage: 'Send Invitations'\n                        });\n                    }\n\n                    sendButton = _react2.default.createElement(\n                        'button',\n                        {\n                            onClick: this.handleSubmit,\n                            type: 'button',\n                            className: 'btn btn-primary',\n                            disabled: this.state.isSendingEmails\n                        },\n                        sendButtonLabel\n                    );\n                } else if (this.state.userCreationEnabled) {\n                    var teamInviteLink = null;\n                    if (currentUser && this.state.teamType === 'O') {\n                        var link = _react2.default.createElement(\n                            'button',\n                            {\n                                className: 'color--link style--none',\n                                onClick: this.showGetTeamInviteLinkModal\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'invite_member.inviteLink',\n                                defaultMessage: 'Team Invite Link'\n                            })\n                        );\n\n                        teamInviteLink = _react2.default.createElement(\n                            'p',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'invite_member.teamInviteLink',\n                                defaultMessage: 'You can also invite people using the {link}.',\n                                values: {\n                                    link: link\n                                }\n                            })\n                        );\n                    }\n\n                    content = _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement(\n                            'p',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'invite_member.content',\n                                defaultMessage: 'Email is currently disabled for your team, and email invitations cannot be sent. Contact your System Administrator to enable email and email invitations.'\n                            })\n                        ),\n                        teamInviteLink\n                    );\n                } else {\n                    content = _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement(\n                            'p',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'invite_member.disabled',\n                                defaultMessage: 'User creation has been disabled for your team. Please ask your Team Administrator for details.'\n                            })\n                        )\n                    );\n                }\n\n                return _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement(\n                        _reactBootstrap.Modal,\n                        {\n                            dialogClassName: 'modal-invite-member',\n                            show: this.state.show,\n                            onHide: this.handleHide.bind(this, true),\n                            enforceFocus: !this.state.showConfirmModal,\n                            backdrop: this.state.isSendingEmails ? 'static' : true\n                        },\n                        _react2.default.createElement(\n                            _reactBootstrap.Modal.Header,\n                            { closeButton: !this.state.isSendingEmails },\n                            _react2.default.createElement(\n                                _reactBootstrap.Modal.Title,\n                                null,\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'invite_member.newMember',\n                                    defaultMessage: 'Send Email Invite'\n                                })\n                            )\n                        ),\n                        _react2.default.createElement(\n                            _reactBootstrap.Modal.Body,\n                            { ref: 'modalBody' },\n                            _react2.default.createElement(\n                                'form',\n                                { role: 'form' },\n                                inviteSections\n                            ),\n                            content\n                        ),\n                        _react2.default.createElement(\n                            _reactBootstrap.Modal.Footer,\n                            null,\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    type: 'button',\n                                    className: 'btn btn-default',\n                                    onClick: this.handleHide.bind(this, true),\n                                    disabled: this.state.isSendingEmails\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'invite_member.cancel',\n                                    defaultMessage: 'Cancel'\n                                })\n                            ),\n                            sendButton\n                        )\n                    ),\n                    _react2.default.createElement(_confirm_modal2.default, {\n                        title: formatMessage(holders.modalTitle),\n                        message: formatMessage(holders.modalMessage),\n                        confirmButtonText: formatMessage(holders.modalButton),\n                        show: this.state.showConfirmModal,\n                        onConfirm: this.handleHide.bind(this, false),\n                        onCancel: function onCancel() {\n                            return _this3.setState({ showConfirmModal: false });\n                        }\n                    })\n                );\n            }\n\n            return null;\n        }\n    }]);\n    return InviteMemberModal;\n}(_react2.default.Component);\n\nInviteMemberModal.propTypes = {\n    intl: _reactIntl.intlShape.isRequired\n};\n\nexports.default = (0, _reactIntl.injectIntl)(InviteMemberModal);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3NS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2ludml0ZV9tZW1iZXJfbW9kYWwuanN4PzUwMmIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtNb2RhbH0gZnJvbSAncmVhY3QtYm9vdHN0cmFwJztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHtkZWZpbmVNZXNzYWdlcywgRm9ybWF0dGVkSFRNTE1lc3NhZ2UsIEZvcm1hdHRlZE1lc3NhZ2UsIGluamVjdEludGwsIGludGxTaGFwZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCAqIGFzIEdsb2JhbEFjdGlvbnMgZnJvbSAnYWN0aW9ucy9nbG9iYWxfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IHtpbnZpdGVNZW1iZXJzfSBmcm9tICdhY3Rpb25zL3RlYW1fYWN0aW9ucy5qc3gnO1xuaW1wb3J0IENoYW5uZWxTdG9yZSBmcm9tICdzdG9yZXMvY2hhbm5lbF9zdG9yZS5qc3gnO1xuaW1wb3J0IE1vZGFsU3RvcmUgZnJvbSAnc3RvcmVzL21vZGFsX3N0b3JlLmpzeCc7XG5pbXBvcnQgVGVhbVN0b3JlIGZyb20gJ3N0b3Jlcy90ZWFtX3N0b3JlLmpzeCc7XG5pbXBvcnQgVXNlclN0b3JlIGZyb20gJ3N0b3Jlcy91c2VyX3N0b3JlLmpzeCc7XG5cbmltcG9ydCBDb25zdGFudHMgZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgQ29uZmlybU1vZGFsIGZyb20gJy4vY29uZmlybV9tb2RhbC5qc3gnO1xuXG5jb25zdCBBY3Rpb25UeXBlcyA9IENvbnN0YW50cy5BY3Rpb25UeXBlcztcblxuY29uc3QgaG9sZGVycyA9IGRlZmluZU1lc3NhZ2VzKHtcbiAgICBlbWFpbEVycm9yOiB7XG4gICAgICAgIGlkOiAnaW52aXRlX21lbWJlci5lbWFpbEVycm9yJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzJ1xuICAgIH0sXG4gICAgZmlyc3RuYW1lOiB7XG4gICAgICAgIGlkOiAnaW52aXRlX21lbWJlci5maXJzdG5hbWUnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZpcnN0IG5hbWUnXG4gICAgfSxcbiAgICBsYXN0bmFtZToge1xuICAgICAgICBpZDogJ2ludml0ZV9tZW1iZXIubGFzdG5hbWUnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0xhc3QgbmFtZSdcbiAgICB9LFxuICAgIG1vZGFsVGl0bGU6IHtcbiAgICAgICAgaWQ6ICdpbnZpdGVfbWVtYmVyLm1vZGFsVGl0bGUnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0Rpc2NhcmQgSW52aXRhdGlvbnM/J1xuICAgIH0sXG4gICAgbW9kYWxNZXNzYWdlOiB7XG4gICAgICAgIGlkOiAnaW52aXRlX21lbWJlci5tb2RhbE1lc3NhZ2UnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1lvdSBoYXZlIHVuc2VudCBpbnZpdGF0aW9ucywgYXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRpc2NhcmQgdGhlbT8nXG4gICAgfSxcbiAgICBtb2RhbEJ1dHRvbjoge1xuICAgICAgICBpZDogJ2ludml0ZV9tZW1iZXIubW9kYWxCdXR0b24nLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1llcywgRGlzY2FyZCdcbiAgICB9XG59KTtcblxuY2xhc3MgSW52aXRlTWVtYmVyTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnRlYW1DaGFuZ2UgPSB0aGlzLnRlYW1DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGUgPSB0aGlzLmhhbmRsZVRvZ2dsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IHRoaXMuaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlSGlkZSA9IHRoaXMuaGFuZGxlSGlkZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFkZEludml0ZUZpZWxkcyA9IHRoaXMuYWRkSW52aXRlRmllbGRzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2xlYXJGaWVsZHMgPSB0aGlzLmNsZWFyRmllbGRzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVtb3ZlSW52aXRlRmllbGRzID0gdGhpcy5yZW1vdmVJbnZpdGVGaWVsZHMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zaG93R2V0VGVhbUludml0ZUxpbmtNb2RhbCA9IHRoaXMuc2hvd0dldFRlYW1JbnZpdGVMaW5rTW9kYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlEb3duID0gdGhpcy5oYW5kbGVLZXlEb3duLmJpbmQodGhpcyk7XG5cbiAgICAgICAgY29uc3QgdGVhbSA9IFRlYW1TdG9yZS5nZXRDdXJyZW50KCk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNob3c6IGZhbHNlLFxuICAgICAgICAgICAgaW52aXRlSWRzOiBbMF0sXG4gICAgICAgICAgICBpZENvdW50OiAwLFxuICAgICAgICAgICAgZW1haWxFcnJvcnM6IHt9LFxuICAgICAgICAgICAgZmlyc3ROYW1lRXJyb3JzOiB7fSxcbiAgICAgICAgICAgIGxhc3ROYW1lRXJyb3JzOiB7fSxcbiAgICAgICAgICAgIGVtYWlsRW5hYmxlZDogZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuU2VuZEVtYWlsTm90aWZpY2F0aW9ucyA9PT0gJ3RydWUnLFxuICAgICAgICAgICAgdXNlckNyZWF0aW9uRW5hYmxlZDogZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuRW5hYmxlVXNlckNyZWF0aW9uID09PSAndHJ1ZScsXG4gICAgICAgICAgICBzaG93Q29uZmlybU1vZGFsOiBmYWxzZSxcbiAgICAgICAgICAgIGlzU2VuZGluZ0VtYWlsczogZmFsc2UsXG4gICAgICAgICAgICB0ZWFtVHlwZTogdGVhbSA/IHRlYW0udHlwZSA6IG51bGxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB0ZWFtQ2hhbmdlKCkge1xuICAgICAgICBjb25zdCB0ZWFtID0gVGVhbVN0b3JlLmdldEN1cnJlbnQoKTtcbiAgICAgICAgY29uc3QgdGVhbVR5cGUgPSB0ZWFtID8gdGVhbS50eXBlIDogbnVsbDtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICB0ZWFtVHlwZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgTW9kYWxTdG9yZS5hZGRNb2RhbExpc3RlbmVyKEFjdGlvblR5cGVzLlRPR0dMRV9JTlZJVEVfTUVNQkVSX01PREFMLCB0aGlzLmhhbmRsZVRvZ2dsZSk7XG4gICAgICAgIFRlYW1TdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLnRlYW1DaGFuZ2UpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBNb2RhbFN0b3JlLnJlbW92ZU1vZGFsTGlzdGVuZXIoQWN0aW9uVHlwZXMuVE9HR0xFX0lOVklURV9NRU1CRVJfTU9EQUwsIHRoaXMuaGFuZGxlVG9nZ2xlKTtcbiAgICAgICAgVGVhbVN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMudGVhbUNoYW5nZSk7XG4gICAgfVxuXG4gICAgaGFuZGxlVG9nZ2xlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvdzogdmFsdWUsXG4gICAgICAgICAgICBzZXJ2ZXJFcnJvcjogbnVsbFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVTdWJtaXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5lbWFpbEVuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbnZpdGVJZHMgPSB0aGlzLnN0YXRlLmludml0ZUlkcztcbiAgICAgICAgdmFyIGNvdW50ID0gaW52aXRlSWRzLmxlbmd0aDtcbiAgICAgICAgdmFyIGludml0ZXMgPSBbXTtcbiAgICAgICAgdmFyIGVtYWlsRXJyb3JzID0gdGhpcy5zdGF0ZS5lbWFpbEVycm9ycztcbiAgICAgICAgdmFyIGZpcnN0TmFtZUVycm9ycyA9IHRoaXMuc3RhdGUuZmlyc3ROYW1lRXJyb3JzO1xuICAgICAgICB2YXIgbGFzdE5hbWVFcnJvcnMgPSB0aGlzLnN0YXRlLmxhc3ROYW1lRXJyb3JzO1xuICAgICAgICB2YXIgdmFsaWQgPSB0cnVlO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICAgICAgdmFyIGludml0ZSA9IHt9O1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gaW52aXRlSWRzW2ldO1xuICAgICAgICAgICAgaW52aXRlLmVtYWlsID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzWydlbWFpbCcgKyBpbmRleF0pLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGludml0ZS5maXJzdE5hbWUgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnNbJ2ZpcnN0X25hbWUnICsgaW5kZXhdKS52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBpbnZpdGUubGFzdE5hbWUgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnNbJ2xhc3RfbmFtZScgKyBpbmRleF0pLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGlmIChpbnZpdGUuZW1haWwgIT09ICcnIHx8IGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnZpdGUuZW1haWwgfHwgIXV0aWxzLmlzRW1haWwoaW52aXRlLmVtYWlsKSkge1xuICAgICAgICAgICAgICAgICAgICBlbWFpbEVycm9yc1tpbmRleF0gPSB0aGlzLnByb3BzLmludGwuZm9ybWF0TWVzc2FnZShob2xkZXJzLmVtYWlsRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVtYWlsRXJyb3JzW2luZGV4XSA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnZpdGVzLnB1c2goaW52aXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2VtYWlsRXJyb3JzLCBmaXJzdE5hbWVFcnJvcnMsIGxhc3ROYW1lRXJyb3JzfSk7XG5cbiAgICAgICAgaWYgKCF2YWxpZCB8fCBpbnZpdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgICAgZGF0YS5pbnZpdGVzID0gaW52aXRlcztcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1NlbmRpbmdFbWFpbHM6IHRydWV9KTtcblxuICAgICAgICBpbnZpdGVNZW1iZXJzKFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUhpZGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzU2VuZGluZ0VtYWlsczogZmFsc2V9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVyci5pZCA9PT0gJ2FwaS50ZWFtLmludml0ZV9tZW1iZXJzLmFscmVhZHkuYXBwX2Vycm9yJykge1xuICAgICAgICAgICAgICAgICAgICBlbWFpbEVycm9yc1tlcnIuZGV0YWlsZWRfZXJyb3JdID0gZXJyLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2VtYWlsRXJyb3JzfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VydmVyRXJyb3I6IGVyci5tZXNzYWdlfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNTZW5kaW5nRW1haWxzOiBmYWxzZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGhhbmRsZUhpZGUocmVxdWlyZUNvbmZpcm0pIHtcbiAgICAgICAgaWYgKHJlcXVpcmVDb25maXJtKSB7XG4gICAgICAgICAgICB2YXIgbm90RW1wdHkgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGF0ZS5pbnZpdGVJZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnN0YXRlLmludml0ZUlkc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzWydlbWFpbCcgKyBpbmRleF0pLnZhbHVlLnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgbm90RW1wdHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChub3RFbXB0eSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybU1vZGFsOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNsZWFyRmllbGRzKCk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgICAgIHNob3dDb25maXJtTW9kYWw6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFkZEludml0ZUZpZWxkcygpIHtcbiAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5zdGF0ZS5pZENvdW50ICsgMTtcbiAgICAgICAgdmFyIGludml0ZUlkcyA9IHRoaXMuc3RhdGUuaW52aXRlSWRzO1xuICAgICAgICBpbnZpdGVJZHMucHVzaChjb3VudCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2ludml0ZUlkcywgaWRDb3VudDogY291bnR9KTtcbiAgICB9XG5cbiAgICBjbGVhckZpZWxkcygpIHtcbiAgICAgICAgdmFyIGludml0ZUlkcyA9IHRoaXMuc3RhdGUuaW52aXRlSWRzO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW52aXRlSWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBpbnZpdGVJZHNbaV07XG4gICAgICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnNbJ2VtYWlsJyArIGluZGV4XSkudmFsdWUgPSAnJztcbiAgICAgICAgICAgIFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmc1snZmlyc3RfbmFtZScgKyBpbmRleF0pLnZhbHVlID0gJyc7XG4gICAgICAgICAgICBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnNbJ2xhc3RfbmFtZScgKyBpbmRleF0pLnZhbHVlID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGludml0ZUlkczogWzBdLFxuICAgICAgICAgICAgaWRDb3VudDogMCxcbiAgICAgICAgICAgIGVtYWlsRXJyb3JzOiB7fSxcbiAgICAgICAgICAgIGZpcnN0TmFtZUVycm9yczoge30sXG4gICAgICAgICAgICBsYXN0TmFtZUVycm9yczoge31cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlSW52aXRlRmllbGRzKGluZGV4KSB7XG4gICAgICAgIHZhciBjb3VudCA9IHRoaXMuc3RhdGUuaWRDb3VudDtcbiAgICAgICAgdmFyIGludml0ZUlkcyA9IHRoaXMuc3RhdGUuaW52aXRlSWRzO1xuICAgICAgICB2YXIgaSA9IGludml0ZUlkcy5pbmRleE9mKGluZGV4KTtcbiAgICAgICAgaWYgKGkgPiAtMSkge1xuICAgICAgICAgICAgaW52aXRlSWRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWludml0ZUlkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGludml0ZUlkcy5wdXNoKCsrY291bnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2ludml0ZUlkcywgaWRDb3VudDogY291bnR9KTtcbiAgICB9XG5cbiAgICBzaG93R2V0VGVhbUludml0ZUxpbmtNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVIaWRlKGZhbHNlKTtcblxuICAgICAgICBHbG9iYWxBY3Rpb25zLnNob3dHZXRUZWFtSW52aXRlTGlua01vZGFsKCk7XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5RG93bihlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IENvbnN0YW50cy5LZXlDb2Rlcy5FTlRFUikge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRVc2VyID0gVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgICAgIGNvbnN0IHtmb3JtYXRNZXNzYWdlfSA9IHRoaXMucHJvcHMuaW50bDtcblxuICAgICAgICBpZiAoY3VycmVudFVzZXIgIT0gbnVsbCAmJiB0aGlzLnN0YXRlLnRlYW1UeXBlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhciBpbnZpdGVTZWN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgdmFyIGludml0ZUlkcyA9IHRoaXMuc3RhdGUuaW52aXRlSWRzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnZpdGVJZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBpbnZpdGVJZHNbaV07XG4gICAgICAgICAgICAgICAgdmFyIGVtYWlsRXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmVtYWlsRXJyb3JzW2luZGV4XSkge1xuICAgICAgICAgICAgICAgICAgICBlbWFpbEVycm9yID0gPGxhYmVsIGNsYXNzTmFtZT0nY29udHJvbC1sYWJlbCc+e3RoaXMuc3RhdGUuZW1haWxFcnJvcnNbaW5kZXhdfTwvbGFiZWw+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZmlyc3ROYW1lRXJyb3IgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmZpcnN0TmFtZUVycm9yc1tpbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lRXJyb3IgPSA8bGFiZWwgY2xhc3NOYW1lPSdjb250cm9sLWxhYmVsJz57dGhpcy5zdGF0ZS5maXJzdE5hbWVFcnJvcnNbaW5kZXhdfTwvbGFiZWw+O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbGFzdE5hbWVFcnJvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUubGFzdE5hbWVFcnJvcnNbaW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lRXJyb3IgPSA8bGFiZWwgY2xhc3NOYW1lPSdjb250cm9sLWxhYmVsJz57dGhpcy5zdGF0ZS5sYXN0TmFtZUVycm9yc1tpbmRleF19PC9sYWJlbD47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHJlbW92ZUJ1dHRvbiA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUJ1dHRvbiA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYnRuIGJ0bi1saW5rIHJlbW92ZV9fbWVtYmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnJlbW92ZUludml0ZUZpZWxkcy5iaW5kKHRoaXMsIGluZGV4KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZmEgZmEtdHJhc2gnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZW1haWxDbGFzcyA9ICdmb3JtLWdyb3VwIGludml0ZSc7XG4gICAgICAgICAgICAgICAgaWYgKGVtYWlsRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1haWxDbGFzcyArPSAnIGhhcy1lcnJvcic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG5hbWVGaWVsZHMgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0TmFtZUNsYXNzID0gJ2Zvcm0tZ3JvdXAnO1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdE5hbWVFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWVDbGFzcyArPSAnIGhhcy1lcnJvcic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsYXN0TmFtZUNsYXNzID0gJ2Zvcm0tZ3JvdXAnO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0TmFtZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lQ2xhc3MgKz0gJyBoYXMtZXJyb3InO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuYW1lRmllbGRzID0gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncm93IHJvdy0taW52aXRlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2ZpcnN0TmFtZUNsYXNzfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlS2V5RG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tY29udHJvbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17J2ZpcnN0X25hbWUnICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Zm9ybWF0TWVzc2FnZShob2xkZXJzLmZpcnN0bmFtZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhMZW5ndGg9JzY0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmVtYWlsRW5hYmxlZCB8fCAhdGhpcy5zdGF0ZS51c2VyQ3JlYXRpb25FbmFibGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlbGxDaGVjaz0nZmFsc2UnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaXJzdE5hbWVFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbC1zbS02Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17bGFzdE5hbWVDbGFzc30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmb3JtLWNvbnRyb2wnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9eydsYXN0X25hbWUnICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17Zm9ybWF0TWVzc2FnZShob2xkZXJzLmxhc3RuYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heExlbmd0aD0nNjQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXRoaXMuc3RhdGUuZW1haWxFbmFibGVkIHx8ICF0aGlzLnN0YXRlLnVzZXJDcmVhdGlvbkVuYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVsbENoZWNrPSdmYWxzZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhc3ROYW1lRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGludml0ZVNlY3Rpb25zW2luZGV4XSA9IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9eydrZXknICsgaW5kZXh9PlxuICAgICAgICAgICAgICAgICAgICAgICAge3JlbW92ZUJ1dHRvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtlbWFpbENsYXNzfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlVcD17dGhpcy5kaXNwbGF5TmFtZUtleVVwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlS2V5RG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXsnZW1haWwnICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nZW1haWxAZG9tYWluLmNvbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoPSc2NCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyF0aGlzLnN0YXRlLmVtYWlsRW5hYmxlZCB8fCAhdGhpcy5zdGF0ZS51c2VyQ3JlYXRpb25FbmFibGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVsbENoZWNrPSdmYWxzZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlbWFpbEVycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bmFtZUZpZWxkc31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHNlcnZlckVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnNlcnZlckVycm9yKSB7XG4gICAgICAgICAgICAgICAgc2VydmVyRXJyb3IgPSA8ZGl2IGNsYXNzTmFtZT0nZm9ybS1ncm91cCBoYXMtZXJyb3InPjxsYWJlbCBjbGFzc05hbWU9J2NvbnRyb2wtbGFiZWwnPnt0aGlzLnN0YXRlLnNlcnZlckVycm9yfTwvbGFiZWw+PC9kaXY+O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY29udGVudCA9IG51bGw7XG4gICAgICAgICAgICB2YXIgc2VuZEJ1dHRvbiA9IG51bGw7XG5cbiAgICAgICAgICAgIHZhciBkZWZhdWx0Q2hhbm5lbE5hbWUgPSAnJztcbiAgICAgICAgICAgIGlmIChDaGFubmVsU3RvcmUuZ2V0QnlOYW1lKENvbnN0YW50cy5ERUZBVUxUX0NIQU5ORUwpKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdENoYW5uZWxOYW1lID0gQ2hhbm5lbFN0b3JlLmdldEJ5TmFtZShDb25zdGFudHMuREVGQVVMVF9DSEFOTkVMKS5kaXNwbGF5X25hbWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmVtYWlsRW5hYmxlZCAmJiB0aGlzLnN0YXRlLnVzZXJDcmVhdGlvbkVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ID0gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAge3NlcnZlckVycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tZGVmYXVsdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmFkZEludml0ZUZpZWxkc31cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0naW52aXRlX21lbWJlci5hZGRBbm90aGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQWRkIGFub3RoZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkSFRNTE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2ludml0ZV9tZW1iZXIuYXV0b0pvaW4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdQZW9wbGUgaW52aXRlZCBhdXRvbWF0aWNhbGx5IGpvaW4gdGhlIDxzdHJvbmc+e2NoYW5uZWx9PC9zdHJvbmc+IGNoYW5uZWwuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWw6IGRlZmF1bHRDaGFubmVsTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VuZEJ1dHRvbkxhYmVsID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2ludml0ZV9tZW1iZXIuc2VuZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTZW5kIEludml0YXRpb24nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc1NlbmRpbmdFbWFpbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZEJ1dHRvbkxhYmVsID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+PGkgY2xhc3NOYW1lPSdmYSBmYS1zcGlubmVyIGZhLXNwaW4nLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0naW52aXRlX21lbWJlci5zZW5kaW5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nIFNlbmRpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuaW52aXRlSWRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZEJ1dHRvbkxhYmVsID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0naW52aXRlX21lbWJlci5zZW5kMidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU2VuZCBJbnZpdGF0aW9ucydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2VuZEJ1dHRvbiA9IChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVTdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnN0YXRlLmlzU2VuZGluZ0VtYWlsc31cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge3NlbmRCdXR0b25MYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS51c2VyQ3JlYXRpb25FbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlYW1JbnZpdGVMaW5rID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFVzZXIgJiYgdGhpcy5zdGF0ZS50ZWFtVHlwZSA9PT0gJ08nKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5rID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY29sb3ItLWxpbmsgc3R5bGUtLW5vbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zaG93R2V0VGVhbUludml0ZUxpbmtNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0naW52aXRlX21lbWJlci5pbnZpdGVMaW5rJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVGVhbSBJbnZpdGUgTGluaydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGVhbUludml0ZUxpbmsgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0naW52aXRlX21lbWJlci50ZWFtSW52aXRlTGluaydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1lvdSBjYW4gYWxzbyBpbnZpdGUgcGVvcGxlIHVzaW5nIHRoZSB7bGlua30uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0naW52aXRlX21lbWJlci5jb250ZW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRW1haWwgaXMgY3VycmVudGx5IGRpc2FibGVkIGZvciB5b3VyIHRlYW0sIGFuZCBlbWFpbCBpbnZpdGF0aW9ucyBjYW5ub3QgYmUgc2VudC4gQ29udGFjdCB5b3VyIFN5c3RlbSBBZG1pbmlzdHJhdG9yIHRvIGVuYWJsZSBlbWFpbCBhbmQgZW1haWwgaW52aXRhdGlvbnMuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGVhbUludml0ZUxpbmt9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0naW52aXRlX21lbWJlci5kaXNhYmxlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1VzZXIgY3JlYXRpb24gaGFzIGJlZW4gZGlzYWJsZWQgZm9yIHlvdXIgdGVhbS4gUGxlYXNlIGFzayB5b3VyIFRlYW0gQWRtaW5pc3RyYXRvciBmb3IgZGV0YWlscy4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzTmFtZT0nbW9kYWwtaW52aXRlLW1lbWJlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c9e3RoaXMuc3RhdGUuc2hvd31cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uSGlkZT17dGhpcy5oYW5kbGVIaWRlLmJpbmQodGhpcywgdHJ1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmZvcmNlRm9jdXM9eyF0aGlzLnN0YXRlLnNob3dDb25maXJtTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZHJvcD17dGhpcy5zdGF0ZS5pc1NlbmRpbmdFbWFpbHMgPyAnc3RhdGljJyA6IHRydWV9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxNb2RhbC5IZWFkZXIgY2xvc2VCdXR0b249eyF0aGlzLnN0YXRlLmlzU2VuZGluZ0VtYWlsc30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1vZGFsLlRpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2ludml0ZV9tZW1iZXIubmV3TWVtYmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1NlbmQgRW1haWwgSW52aXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvTW9kYWwuVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L01vZGFsLkhlYWRlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxNb2RhbC5Cb2R5IHJlZj0nbW9kYWxCb2R5Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybSByb2xlPSdmb3JtJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ludml0ZVNlY3Rpb25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y29udGVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTW9kYWwuQm9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxNb2RhbC5Gb290ZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYnRuIGJ0bi1kZWZhdWx0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUhpZGUuYmluZCh0aGlzLCB0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMuc3RhdGUuaXNTZW5kaW5nRW1haWxzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdpbnZpdGVfbWVtYmVyLmNhbmNlbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDYW5jZWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3NlbmRCdXR0b259XG4gICAgICAgICAgICAgICAgICAgICAgICA8L01vZGFsLkZvb3Rlcj5cbiAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgICAgICAgICAgICAgPENvbmZpcm1Nb2RhbFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoaG9sZGVycy5tb2RhbFRpdGxlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U9e2Zvcm1hdE1lc3NhZ2UoaG9sZGVycy5tb2RhbE1lc3NhZ2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ9e2Zvcm1hdE1lc3NhZ2UoaG9sZGVycy5tb2RhbEJ1dHRvbil9XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3dDb25maXJtTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09e3RoaXMuaGFuZGxlSGlkZS5iaW5kKHRoaXMsIGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2FuY2VsPXsoKSA9PiB0aGlzLnNldFN0YXRlKHtzaG93Q29uZmlybU1vZGFsOiBmYWxzZX0pfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuSW52aXRlTWVtYmVyTW9kYWwucHJvcFR5cGVzID0ge1xuICAgIGludGw6IGludGxTaGFwZS5pc1JlcXVpcmVkXG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbmplY3RJbnRsKEludml0ZU1lbWJlck1vZGFsKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL2ludml0ZV9tZW1iZXJfbW9kYWwuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBQ0E7QUFuQkE7QUFDQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQXJCQTtBQUNBO0FBMEJBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFmQTtBQTRCQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQURBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBWEE7QUFEQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFYQTtBQURBO0FBaEJBO0FBQ0E7QUFpQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBV0E7QUFaQTtBQWNBO0FBaEJBO0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBREE7QUFkQTtBQUNBO0FBeUJBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQU5BO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQUNBO0FBVUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFEQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFQQTtBQVVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQURBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFXQTtBQVpBO0FBckJBO0FBb0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQU5BO0FBckNBO0FBK0NBO0FBQ0E7QUFDQTtBQUNBOzs7QUFsZUE7QUFDQTtBQW9lQTtBQUNBO0FBREE7QUFDQTtBQUdBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2475\n");

/***/ }),

/***/ 2476:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _global_actions = __webpack_require__(57);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _modal_store = __webpack_require__(2164);\n\nvar _modal_store2 = _interopRequireDefault(_modal_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _webrtc_store = __webpack_require__(454);\n\nvar _webrtc_store2 = _interopRequireDefault(_webrtc_store);\n\nvar _constants = __webpack_require__(10);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar LeaveTeamModal = function (_React$Component) {\n    (0, _inherits3.default)(LeaveTeamModal, _React$Component);\n\n    function LeaveTeamModal(props) {\n        (0, _classCallCheck3.default)(this, LeaveTeamModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (LeaveTeamModal.__proto__ || (0, _getPrototypeOf2.default)(LeaveTeamModal)).call(this, props));\n\n        _this.handleToggle = _this.handleToggle.bind(_this);\n        _this.handleSubmit = _this.handleSubmit.bind(_this);\n        _this.handleHide = _this.handleHide.bind(_this);\n        _this.handleKeyPress = _this.handleKeyPress.bind(_this);\n\n        _this.state = {\n            show: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(LeaveTeamModal, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _modal_store2.default.addModalListener(_constants.ActionTypes.TOGGLE_LEAVE_TEAM_MODAL, this.handleToggle);\n            document.addEventListener('keypress', this.handleKeyPress);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _modal_store2.default.removeModalListener(_constants.ActionTypes.TOGGLE_LEAVE_TEAM_MODAL, this.handleToggle);\n            document.removeEventListener('keypress', this.handleKeyPress);\n        }\n    }, {\n        key: 'handleKeyPress',\n        value: function handleKeyPress(e) {\n            if (e.key === 'Enter' && this.state.show) {\n                this.handleSubmit(e);\n            }\n        }\n    }, {\n        key: 'handleToggle',\n        value: function handleToggle(value) {\n            this.setState({\n                show: value\n            });\n        }\n    }, {\n        key: 'handleSubmit',\n        value: function handleSubmit(e) {\n            this.setState({\n                show: false\n            });\n\n            if (_webrtc_store2.default.isBusy()) {\n                _webrtc_store2.default.emitChanged({ action: _constants.WebrtcActionTypes.IN_PROGRESS });\n                e.preventDefault();\n                return;\n            }\n\n            GlobalActions.emitLeaveTeam();\n            GlobalActions.toggleSideBarRightMenuAction();\n        }\n    }, {\n        key: 'handleHide',\n        value: function handleHide() {\n            this.setState({\n                show: false\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var currentUser = _user_store2.default.getCurrentUser();\n\n            if (currentUser != null) {\n                return _react2.default.createElement(\n                    _reactBootstrap.Modal,\n                    {\n                        className: 'modal-confirm',\n                        show: this.state.show,\n                        onHide: this.handleHide\n                    },\n                    _react2.default.createElement(\n                        _reactBootstrap.Modal.Header,\n                        { closeButton: false },\n                        _react2.default.createElement(\n                            _reactBootstrap.Modal.Title,\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'leave_team_modal.title',\n                                defaultMessage: 'Leave the team?'\n                            })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        _reactBootstrap.Modal.Body,\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'leave_team_modal.desc',\n                            defaultMessage: 'You will be removed from all public and private channels.  If the team is private you will not be able to rejoin the team.  Are you sure?'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        _reactBootstrap.Modal.Footer,\n                        null,\n                        _react2.default.createElement(\n                            'button',\n                            {\n                                type: 'button',\n                                className: 'btn btn-default',\n                                onClick: this.handleHide\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'leave_team_modal.no',\n                                defaultMessage: 'No'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'button',\n                            {\n                                type: 'button',\n                                className: 'btn btn-danger',\n                                onClick: this.handleSubmit\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'leave_team_modal.yes',\n                                defaultMessage: 'Yes'\n                            })\n                        )\n                    )\n                );\n            }\n\n            return null;\n        }\n    }]);\n    return LeaveTeamModal;\n}(_react2.default.Component);\n\nLeaveTeamModal.propTypes = {\n    intl: _reactIntl.intlShape.isRequired\n};\n\nexports.default = (0, _reactIntl.injectIntl)(LeaveTeamModal);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3Ni5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2xlYXZlX3RlYW1fbW9kYWwuanN4PzQ5NTgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtNb2RhbH0gZnJvbSAncmVhY3QtYm9vdHN0cmFwJztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZSwgaW5qZWN0SW50bCwgaW50bFNoYXBlfSBmcm9tICdyZWFjdC1pbnRsJztcblxuaW1wb3J0ICogYXMgR2xvYmFsQWN0aW9ucyBmcm9tICdhY3Rpb25zL2dsb2JhbF9hY3Rpb25zLmpzeCc7XG5pbXBvcnQgTW9kYWxTdG9yZSBmcm9tICdzdG9yZXMvbW9kYWxfc3RvcmUuanN4JztcbmltcG9ydCBVc2VyU3RvcmUgZnJvbSAnc3RvcmVzL3VzZXJfc3RvcmUuanN4JztcbmltcG9ydCBXZWJydGNTdG9yZSBmcm9tICdzdG9yZXMvd2VicnRjX3N0b3JlLmpzeCc7XG5cbmltcG9ydCB7QWN0aW9uVHlwZXMsIFdlYnJ0Y0FjdGlvblR5cGVzfSBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcblxuY2xhc3MgTGVhdmVUZWFtTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZSA9IHRoaXMuaGFuZGxlVG9nZ2xlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gdGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVIaWRlID0gdGhpcy5oYW5kbGVIaWRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlS2V5UHJlc3MgPSB0aGlzLmhhbmRsZUtleVByZXNzLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIE1vZGFsU3RvcmUuYWRkTW9kYWxMaXN0ZW5lcihBY3Rpb25UeXBlcy5UT0dHTEVfTEVBVkVfVEVBTV9NT0RBTCwgdGhpcy5oYW5kbGVUb2dnbGUpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIHRoaXMuaGFuZGxlS2V5UHJlc3MpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBNb2RhbFN0b3JlLnJlbW92ZU1vZGFsTGlzdGVuZXIoQWN0aW9uVHlwZXMuVE9HR0xFX0xFQVZFX1RFQU1fTU9EQUwsIHRoaXMuaGFuZGxlVG9nZ2xlKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCB0aGlzLmhhbmRsZUtleVByZXNzKTtcbiAgICB9XG5cbiAgICBoYW5kbGVLZXlQcmVzcyhlKSB7XG4gICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiB0aGlzLnN0YXRlLnNob3cpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlU3VibWl0KGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlVG9nZ2xlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvdzogdmFsdWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlU3VibWl0KGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93OiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoV2VicnRjU3RvcmUuaXNCdXN5KCkpIHtcbiAgICAgICAgICAgIFdlYnJ0Y1N0b3JlLmVtaXRDaGFuZ2VkKHthY3Rpb246IFdlYnJ0Y0FjdGlvblR5cGVzLklOX1BST0dSRVNTfSk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBHbG9iYWxBY3Rpb25zLmVtaXRMZWF2ZVRlYW0oKTtcbiAgICAgICAgR2xvYmFsQWN0aW9ucy50b2dnbGVTaWRlQmFyUmlnaHRNZW51QWN0aW9uKCk7XG4gICAgfVxuXG4gICAgaGFuZGxlSGlkZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93OiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHZhciBjdXJyZW50VXNlciA9IFVzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpO1xuXG4gICAgICAgIGlmIChjdXJyZW50VXNlciAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J21vZGFsLWNvbmZpcm0nXG4gICAgICAgICAgICAgICAgICAgIHNob3c9e3RoaXMuc3RhdGUuc2hvd31cbiAgICAgICAgICAgICAgICAgICAgb25IaWRlPXt0aGlzLmhhbmRsZUhpZGV9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8TW9kYWwuSGVhZGVyIGNsb3NlQnV0dG9uPXtmYWxzZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TW9kYWwuVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2xlYXZlX3RlYW1fbW9kYWwudGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdMZWF2ZSB0aGUgdGVhbT8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTW9kYWwuVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgIDwvTW9kYWwuSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgICA8TW9kYWwuQm9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2xlYXZlX3RlYW1fbW9kYWwuZGVzYydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nWW91IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIGFsbCBwdWJsaWMgYW5kIHByaXZhdGUgY2hhbm5lbHMuICBJZiB0aGUgdGVhbSBpcyBwcml2YXRlIHlvdSB3aWxsIG5vdCBiZSBhYmxlIHRvIHJlam9pbiB0aGUgdGVhbS4gIEFyZSB5b3Ugc3VyZT8nXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L01vZGFsLkJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDxNb2RhbC5Gb290ZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYnRuIGJ0bi1kZWZhdWx0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlSGlkZX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbGVhdmVfdGVhbV9tb2RhbC5ubydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05vJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdidG4gYnRuLWRhbmdlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZVN1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbGVhdmVfdGVhbV9tb2RhbC55ZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdZZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L01vZGFsLkZvb3Rlcj5cbiAgICAgICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuTGVhdmVUZWFtTW9kYWwucHJvcFR5cGVzID0ge1xuICAgIGludGw6IGludGxTaGFwZS5pc1JlcXVpcmVkXG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbmplY3RJbnRsKExlYXZlVGVhbU1vZGFsKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL2xlYXZlX3RlYW1fbW9kYWwuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7OztBQWJBO0FBQ0E7QUFDQTtBQVlBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQVJBO0FBV0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVhBO0FBbkJBO0FBMkNBO0FBQ0E7QUFDQTtBQUNBOzs7QUE1R0E7QUFDQTtBQThHQTtBQUNBO0FBREE7QUFDQTtBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2476\n");

/***/ }),

/***/ 2477:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _channel_actions = __webpack_require__(80);\n\nvar ChannelActions = _interopRequireWildcard(_channel_actions);\n\nvar _modal_store = __webpack_require__(2164);\n\nvar _modal_store2 = _interopRequireDefault(_modal_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _confirm_modal = __webpack_require__(319);\n\nvar _confirm_modal2 = _interopRequireDefault(_confirm_modal);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar LeavePrivateChannelModal = function (_React$Component) {\n    (0, _inherits3.default)(LeavePrivateChannelModal, _React$Component);\n\n    function LeavePrivateChannelModal(props) {\n        (0, _classCallCheck3.default)(this, LeavePrivateChannelModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (LeavePrivateChannelModal.__proto__ || (0, _getPrototypeOf2.default)(LeavePrivateChannelModal)).call(this, props));\n\n        _this.handleToggle = _this.handleToggle.bind(_this);\n        _this.handleSubmit = _this.handleSubmit.bind(_this);\n        _this.handleHide = _this.handleHide.bind(_this);\n        _this.handleKeyPress = _this.handleKeyPress.bind(_this);\n\n        _this.state = {\n            show: false,\n            channel: null\n        };\n        _this.mounted = false;\n        return _this;\n    }\n\n    (0, _createClass3.default)(LeavePrivateChannelModal, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.mounted = true;\n            _modal_store2.default.addModalListener(_constants2.default.ActionTypes.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.mounted = false;\n            _modal_store2.default.removeModalListener(_constants2.default.ActionTypes.TOGGLE_LEAVE_PRIVATE_CHANNEL_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'handleKeyPress',\n        value: function handleKeyPress(e) {\n            if (e.key === 'Enter' && this.state.show) {\n                this.handleSubmit();\n            }\n        }\n    }, {\n        key: 'handleSubmit',\n        value: function handleSubmit() {\n            var channelId = this.state.channel.id;\n            this.setState({\n                show: false,\n                channel: null\n            });\n            ChannelActions.leaveChannel(channelId);\n        }\n    }, {\n        key: 'handleToggle',\n        value: function handleToggle(value) {\n            this.setState({\n                channel: value,\n                show: value !== null\n            });\n        }\n    }, {\n        key: 'handleHide',\n        value: function handleHide() {\n            this.setState({\n                show: false\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var title = '';\n            var message = '';\n            if (this.state.channel) {\n                title = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'leave_private_channel_modal.title',\n                    defaultMessage: 'Leave Private Channel {channel}',\n                    values: {\n                        channel: _react2.default.createElement(\n                            'b',\n                            null,\n                            this.state.channel.display_name\n                        )\n                    }\n                });\n\n                message = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'leave_private_channel_modal.message',\n                    defaultMessage: 'Are you sure you wish to leave the private channel {channel}? You must be re-invited in order to re-join this channel in the future.',\n                    values: {\n                        channel: _react2.default.createElement(\n                            'b',\n                            null,\n                            this.state.channel.display_name\n                        )\n                    }\n                });\n            }\n\n            var buttonClass = 'btn btn-danger';\n            var button = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'leave_private_channel_modal.leave',\n                defaultMessage: 'Yes, leave channel'\n            });\n\n            return _react2.default.createElement(_confirm_modal2.default, {\n                show: this.state.show,\n                title: title,\n                message: message,\n                confirmButtonClass: buttonClass,\n                confirmButtonText: button,\n                onConfirm: this.handleSubmit,\n                onCancel: this.handleHide\n            });\n        }\n    }]);\n    return LeavePrivateChannelModal;\n}(_react2.default.Component);\n\nLeavePrivateChannelModal.propTypes = {\n    intl: _reactIntl.intlShape.isRequired\n};\n\nexports.default = (0, _reactIntl.injectIntl)(LeavePrivateChannelModal);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3Ny5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL21vZGFscy9sZWF2ZV9wcml2YXRlX2NoYW5uZWxfbW9kYWwuanN4P2JjNWUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlLCBpbmplY3RJbnRsLCBpbnRsU2hhcGV9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgKiBhcyBDaGFubmVsQWN0aW9ucyBmcm9tICdhY3Rpb25zL2NoYW5uZWxfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IE1vZGFsU3RvcmUgZnJvbSAnc3RvcmVzL21vZGFsX3N0b3JlLmpzeCc7XG5cbmltcG9ydCBDb25zdGFudHMgZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5cbmltcG9ydCBDb25maXJtTW9kYWwgZnJvbSAnY29tcG9uZW50cy9jb25maXJtX21vZGFsLmpzeCc7XG5cbmNsYXNzIExlYXZlUHJpdmF0ZUNoYW5uZWxNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlID0gdGhpcy5oYW5kbGVUb2dnbGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUhpZGUgPSB0aGlzLmhhbmRsZUhpZGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlQcmVzcyA9IHRoaXMuaGFuZGxlS2V5UHJlc3MuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICBjaGFubmVsOiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubW91bnRlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlO1xuICAgICAgICBNb2RhbFN0b3JlLmFkZE1vZGFsTGlzdGVuZXIoQ29uc3RhbnRzLkFjdGlvblR5cGVzLlRPR0dMRV9MRUFWRV9QUklWQVRFX0NIQU5ORUxfTU9EQUwsIHRoaXMuaGFuZGxlVG9nZ2xlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgICAgIE1vZGFsU3RvcmUucmVtb3ZlTW9kYWxMaXN0ZW5lcihDb25zdGFudHMuQWN0aW9uVHlwZXMuVE9HR0xFX0xFQVZFX1BSSVZBVEVfQ0hBTk5FTF9NT0RBTCwgdGhpcy5oYW5kbGVUb2dnbGUpO1xuICAgIH1cblxuICAgIGhhbmRsZUtleVByZXNzKGUpIHtcbiAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIHRoaXMuc3RhdGUuc2hvdykge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZVN1Ym1pdCgpIHtcbiAgICAgICAgY29uc3QgY2hhbm5lbElkID0gdGhpcy5zdGF0ZS5jaGFubmVsLmlkO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3c6IGZhbHNlLFxuICAgICAgICAgICAgY2hhbm5lbDogbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgQ2hhbm5lbEFjdGlvbnMubGVhdmVDaGFubmVsKGNoYW5uZWxJZCk7XG4gICAgfVxuXG4gICAgaGFuZGxlVG9nZ2xlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgY2hhbm5lbDogdmFsdWUsXG4gICAgICAgICAgICBzaG93OiB2YWx1ZSAhPT0gbnVsbFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVIaWRlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHRpdGxlID0gJyc7XG4gICAgICAgIGxldCBtZXNzYWdlID0gJyc7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmNoYW5uZWwpIHtcbiAgICAgICAgICAgIHRpdGxlID0gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSdsZWF2ZV9wcml2YXRlX2NoYW5uZWxfbW9kYWwudGl0bGUnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdMZWF2ZSBQcml2YXRlIENoYW5uZWwge2NoYW5uZWx9J1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWw6IDxiPnt0aGlzLnN0YXRlLmNoYW5uZWwuZGlzcGxheV9uYW1lfTwvYj5cbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbWVzc2FnZSA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0nbGVhdmVfcHJpdmF0ZV9jaGFubmVsX21vZGFsLm1lc3NhZ2UnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdBcmUgeW91IHN1cmUgeW91IHdpc2ggdG8gbGVhdmUgdGhlIHByaXZhdGUgY2hhbm5lbCB7Y2hhbm5lbH0/IFlvdSBtdXN0IGJlIHJlLWludml0ZWQgaW4gb3JkZXIgdG8gcmUtam9pbiB0aGlzIGNoYW5uZWwgaW4gdGhlIGZ1dHVyZS4nXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbDogPGI+e3RoaXMuc3RhdGUuY2hhbm5lbC5kaXNwbGF5X25hbWV9PC9iPlxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnV0dG9uQ2xhc3MgPSAnYnRuIGJ0bi1kYW5nZXInO1xuICAgICAgICBjb25zdCBidXR0b24gPSAoXG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgIGlkPSdsZWF2ZV9wcml2YXRlX2NoYW5uZWxfbW9kYWwubGVhdmUnXG4gICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1llcywgbGVhdmUgY2hhbm5lbCdcbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxDb25maXJtTW9kYWxcbiAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3d9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgIG1lc3NhZ2U9e21lc3NhZ2V9XG4gICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvbkNsYXNzPXtidXR0b25DbGFzc31cbiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dD17YnV0dG9ufVxuICAgICAgICAgICAgICAgIG9uQ29uZmlybT17dGhpcy5oYW5kbGVTdWJtaXR9XG4gICAgICAgICAgICAgICAgb25DYW5jZWw9e3RoaXMuaGFuZGxlSGlkZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5MZWF2ZVByaXZhdGVDaGFubmVsTW9kYWwucHJvcFR5cGVzID0ge1xuICAgIGludGw6IGludGxTaGFwZS5pc1JlcXVpcmVkXG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbmplY3RJbnRsKExlYXZlUHJpdmF0ZUNoYW5uZWxNb2RhbCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy9tb2RhbHMvbGVhdmVfcHJpdmF0ZV9jaGFubmVsX21vZGFsLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOzs7Ozs7O0FBWkE7QUFDQTtBQUNBO0FBV0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQVpBO0FBYUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFIQTtBQUNBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFVQTs7O0FBbEdBO0FBQ0E7QUFvR0E7QUFDQTtBQURBO0FBQ0E7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2477\n");

/***/ }),

/***/ 2478:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _es = __webpack_require__(45);\n\nvar _edit_channel_header_modal = __webpack_require__(467);\n\nvar _edit_channel_header_modal2 = _interopRequireDefault(_edit_channel_header_modal);\n\nvar _edit_channel_purpose_modal = __webpack_require__(808);\n\nvar _edit_channel_purpose_modal2 = _interopRequireDefault(_edit_channel_purpose_modal);\n\nvar _channel_actions = __webpack_require__(80);\n\nvar ChannelActions = _interopRequireWildcard(_channel_actions);\n\nvar _global_actions = __webpack_require__(57);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _post_actions = __webpack_require__(75);\n\nvar _app_dispatcher = __webpack_require__(36);\n\nvar _app_dispatcher2 = _interopRequireDefault(_app_dispatcher);\n\nvar _channel_store = __webpack_require__(34);\n\nvar _channel_store2 = _interopRequireDefault(_channel_store);\n\nvar _modal_store = __webpack_require__(2164);\n\nvar _modal_store2 = _interopRequireDefault(_modal_store);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _search_store = __webpack_require__(321);\n\nvar _search_store2 = _interopRequireDefault(_search_store);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _channel_utils = __webpack_require__(123);\n\nvar ChannelUtils = _interopRequireWildcard(_channel_utils);\n\nvar _constants = __webpack_require__(10);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _channel_info_modal = __webpack_require__(809);\n\nvar _channel_info_modal2 = _interopRequireDefault(_channel_info_modal);\n\nvar _channel_invite_modal = __webpack_require__(326);\n\nvar _channel_invite_modal2 = _interopRequireDefault(_channel_invite_modal);\n\nvar _channel_members_modal = __webpack_require__(469);\n\nvar _channel_members_modal2 = _interopRequireDefault(_channel_members_modal);\n\nvar _channel_notifications_modal = __webpack_require__(812);\n\nvar _channel_notifications_modal2 = _interopRequireDefault(_channel_notifications_modal);\n\nvar _delete_channel_modal = __webpack_require__(814);\n\nvar _delete_channel_modal2 = _interopRequireDefault(_delete_channel_modal);\n\nvar _notify_counts = __webpack_require__(2479);\n\nvar _notify_counts2 = _interopRequireDefault(_notify_counts);\n\nvar _quick_switch_modal = __webpack_require__(2480);\n\nvar _quick_switch_modal2 = _interopRequireDefault(_quick_switch_modal);\n\nvar _rename_channel_modal = __webpack_require__(815);\n\nvar _rename_channel_modal2 = _interopRequireDefault(_rename_channel_modal);\n\nvar _status_icon = __webpack_require__(458);\n\nvar _status_icon2 = _interopRequireDefault(_status_icon);\n\nvar _toggle_modal_button = __webpack_require__(459);\n\nvar _toggle_modal_button2 = _interopRequireDefault(_toggle_modal_button);\n\nvar _navbar_info_button = __webpack_require__(2484);\n\nvar _navbar_info_button2 = _interopRequireDefault(_navbar_info_button);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Navbar = function (_React$Component) {\n    (0, _inherits3.default)(Navbar, _React$Component);\n\n    function Navbar(props) {\n        (0, _classCallCheck3.default)(this, Navbar);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (Navbar.__proto__ || (0, _getPrototypeOf2.default)(Navbar)).call(this, props));\n\n        _this.toggleFavorite = function (e) {\n            e.preventDefault();\n\n            if (_this.state.isFavorite) {\n                ChannelActions.unmarkFavorite(_this.state.channel.id);\n            } else {\n                ChannelActions.markFavorite(_this.state.channel.id);\n            }\n        };\n\n        _this.onChange = _this.onChange.bind(_this);\n        _this.handleLeave = _this.handleLeave.bind(_this);\n        _this.showSearch = _this.showSearch.bind(_this);\n\n        _this.showEditChannelHeaderModal = _this.showEditChannelHeaderModal.bind(_this);\n        _this.hideEditChannelHeaderModal = _this.hideEditChannelHeaderModal.bind(_this);\n        _this.showChannelPurposeModal = _this.showChannelPurposeModal.bind(_this);\n        _this.hideChannelPurposeModal = _this.hideChannelPurposeModal.bind(_this);\n        _this.showRenameChannelModal = _this.showRenameChannelModal.bind(_this);\n        _this.hideRenameChannelModal = _this.hideRenameChannelModal.bind(_this);\n        _this.isStateValid = _this.isStateValid.bind(_this);\n\n        _this.createCollapseButtons = _this.createCollapseButtons.bind(_this);\n        _this.createDropdown = _this.createDropdown.bind(_this);\n\n        _this.showMembersModal = _this.showMembersModal.bind(_this);\n        _this.hideMembersModal = _this.hideMembersModal.bind(_this);\n\n        _this.toggleQuickSwitchModal = _this.toggleQuickSwitchModal.bind(_this);\n        _this.hideQuickSwitchModal = _this.hideQuickSwitchModal.bind(_this);\n        _this.handleQuickSwitchKeyPress = _this.handleQuickSwitchKeyPress.bind(_this);\n\n        _this.openDirectMessageModal = _this.openDirectMessageModal.bind(_this);\n        _this.getPinnedPosts = _this.getPinnedPosts.bind(_this);\n\n        var state = _this.getStateFromStores();\n        state.showEditChannelPurposeModal = false;\n        state.showEditChannelHeaderModal = false;\n        state.showMembersModal = false;\n        state.showRenameChannelModal = false;\n        state.showQuickSwitchModal = false;\n        state.quickSwitchMode = 'channel';\n        _this.state = state;\n        return _this;\n    }\n\n    (0, _createClass3.default)(Navbar, [{\n        key: 'getStateFromStores',\n        value: function getStateFromStores() {\n            var channel = _channel_store2.default.getCurrent();\n\n            return {\n                channel: channel,\n                member: _channel_store2.default.getCurrentMember(),\n                users: [],\n                userCount: _channel_store2.default.getCurrentStats().member_count,\n                currentUser: _user_store2.default.getCurrentUser(),\n                isFavorite: channel && ChannelUtils.isFavoriteChannel(channel)\n            };\n        }\n    }, {\n        key: 'isStateValid',\n        value: function isStateValid() {\n            return this.state.channel && this.state.member && this.state.users && this.state.currentUser;\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _channel_store2.default.addChangeListener(this.onChange);\n            _channel_store2.default.addStatsChangeListener(this.onChange);\n            _user_store2.default.addStatusesChangeListener(this.onChange);\n            _user_store2.default.addChangeListener(this.onChange);\n            _preference_store2.default.addChangeListener(this.onChange);\n            _modal_store2.default.addModalListener(_constants.ActionTypes.TOGGLE_QUICK_SWITCH_MODAL, this.toggleQuickSwitchModal);\n            _modal_store2.default.addModalListener(_constants.ActionTypes.TOGGLE_CHANNEL_HEADER_UPDATE_MODAL, this.showEditChannelHeaderModal);\n            _modal_store2.default.addModalListener(_constants.ActionTypes.TOGGLE_CHANNEL_PURPOSE_UPDATE_MODAL, this.showChannelPurposeModal);\n            _modal_store2.default.addModalListener(_constants.ActionTypes.TOGGLE_CHANNEL_NAME_UPDATE_MODAL, this.showRenameChannelModal);\n            (0, _jquery2.default)('.inner-wrap').click(this.hideSidebars);\n            document.addEventListener('keydown', this.handleQuickSwitchKeyPress);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _channel_store2.default.removeChangeListener(this.onChange);\n            _channel_store2.default.removeStatsChangeListener(this.onChange);\n            _user_store2.default.removeStatusesChangeListener(this.onChange);\n            _user_store2.default.removeChangeListener(this.onChange);\n            _preference_store2.default.removeChangeListener(this.onChange);\n            _modal_store2.default.removeModalListener(_constants.ActionTypes.TOGGLE_QUICK_SWITCH_MODAL, this.toggleQuickSwitchModal);\n            _modal_store2.default.addModalListener(_constants.ActionTypes.TOGGLE_CHANNEL_HEADER_UPDATE_MODAL, this.hideEditChannelHeaderModal);\n            _modal_store2.default.addModalListener(_constants.ActionTypes.TOGGLE_CHANNEL_PURPOSE_UPDATE_MODAL, this.hideChannelPurposeModal);\n            _modal_store2.default.addModalListener(_constants.ActionTypes.TOGGLE_CHANNEL_NAME_UPDATE_MODAL, this.hideRenameChannelModal);\n            document.removeEventListener('keydown', this.handleQuickSwitchKeyPress);\n        }\n    }, {\n        key: 'handleSubmit',\n        value: function handleSubmit(e) {\n            e.preventDefault();\n        }\n    }, {\n        key: 'handleLeave',\n        value: function handleLeave() {\n            if (this.state.channel.type === _constants.Constants.PRIVATE_CHANNEL) {\n                GlobalActions.showLeavePrivateChannelModal(this.state.channel);\n            } else {\n                ChannelActions.leaveChannel(this.state.channel.id);\n            }\n        }\n    }, {\n        key: 'hideSidebars',\n        value: function hideSidebars(e) {\n            var windowWidth = (0, _jquery2.default)(window).outerWidth();\n            if (windowWidth <= 768) {\n                _app_dispatcher2.default.handleServerAction({\n                    type: _constants.ActionTypes.RECEIVED_SEARCH,\n                    results: null\n                });\n\n                _app_dispatcher2.default.handleServerAction({\n                    type: _constants.ActionTypes.RECEIVED_POST_SELECTED,\n                    postId: null,\n                    channelId: null\n                });\n\n                if (e.target.className !== 'navbar-toggle' && e.target.className !== 'icon-bar') {\n                    (0, _jquery2.default)('.app__body .inner-wrap').removeClass('move--right move--left move--left-small');\n                    (0, _jquery2.default)('.app__body .sidebar--left').removeClass('move--right');\n                    (0, _jquery2.default)('.multi-teams .team-sidebar').removeClass('move--right');\n                    (0, _jquery2.default)('.app__body .sidebar--right').removeClass('move--left');\n                    (0, _jquery2.default)('.app__body .sidebar--menu').removeClass('move--left');\n                }\n            }\n        }\n    }, {\n        key: 'toggleLeftSidebar',\n        value: function toggleLeftSidebar() {\n            (0, _jquery2.default)('.app__body .inner-wrap').toggleClass('move--right');\n            (0, _jquery2.default)('.app__body .sidebar--left').toggleClass('move--right');\n            (0, _jquery2.default)('.multi-teams .team-sidebar').toggleClass('move--right');\n        }\n    }, {\n        key: 'toggleRightSidebar',\n        value: function toggleRightSidebar() {\n            (0, _jquery2.default)('.app__body .inner-wrap').toggleClass('move--left-small');\n            (0, _jquery2.default)('.app__body .sidebar--menu').toggleClass('move--left');\n        }\n    }, {\n        key: 'showSearch',\n        value: function showSearch() {\n            _app_dispatcher2.default.handleServerAction({\n                type: _constants.ActionTypes.SHOW_SEARCH\n            });\n        }\n    }, {\n        key: 'onChange',\n        value: function onChange() {\n            this.setState(this.getStateFromStores());\n        }\n    }, {\n        key: 'showEditChannelHeaderModal',\n        value: function showEditChannelHeaderModal() {\n            this.setState({\n                showEditChannelHeaderModal: true\n            });\n        }\n    }, {\n        key: 'hideEditChannelHeaderModal',\n        value: function hideEditChannelHeaderModal() {\n            this.setState({\n                showEditChannelHeaderModal: false\n            });\n        }\n    }, {\n        key: 'showChannelPurposeModal',\n        value: function showChannelPurposeModal() {\n            this.setState({\n                showEditChannelPurposeModal: true\n            });\n        }\n    }, {\n        key: 'hideChannelPurposeModal',\n        value: function hideChannelPurposeModal() {\n            this.setState({\n                showEditChannelPurposeModal: false\n            });\n        }\n    }, {\n        key: 'showRenameChannelModal',\n        value: function showRenameChannelModal() {\n            this.setState({\n                showRenameChannelModal: true\n            });\n        }\n    }, {\n        key: 'hideRenameChannelModal',\n        value: function hideRenameChannelModal() {\n            this.setState({\n                showRenameChannelModal: false\n            });\n        }\n    }, {\n        key: 'showMembersModal',\n        value: function showMembersModal(e) {\n            e.preventDefault();\n\n            this.setState({ showMembersModal: true });\n        }\n    }, {\n        key: 'hideMembersModal',\n        value: function hideMembersModal() {\n            this.setState({ showMembersModal: false });\n        }\n    }, {\n        key: 'handleQuickSwitchKeyPress',\n        value: function handleQuickSwitchKeyPress(e) {\n            if (Utils.cmdOrCtrlPressed(e) && !e.shiftKey && e.keyCode === _constants.Constants.KeyCodes.K) {\n                if (!e.altKey) {\n                    e.preventDefault();\n                    this.toggleQuickSwitchModal('channel');\n                }\n            }\n        }\n    }, {\n        key: 'toggleQuickSwitchModal',\n        value: function toggleQuickSwitchModal() {\n            var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'channel';\n\n            if (this.state.showQuickSwitchModal) {\n                this.setState({ showQuickSwitchModal: false, quickSwitchMode: 'channel' });\n            } else {\n                this.setState({ showQuickSwitchModal: true, quickSwitchMode: mode });\n            }\n        }\n    }, {\n        key: 'hideQuickSwitchModal',\n        value: function hideQuickSwitchModal() {\n            this.setState({\n                showQuickSwitchModal: false,\n                quickSwitchMode: 'channel'\n            });\n        }\n    }, {\n        key: 'openDirectMessageModal',\n        value: function openDirectMessageModal() {\n            _app_dispatcher2.default.handleViewAction({\n                type: _constants.ActionTypes.TOGGLE_DM_MODAL,\n                value: true,\n                channelId: this.state.channel.id\n            });\n        }\n    }, {\n        key: 'getPinnedPosts',\n        value: function getPinnedPosts(e) {\n            e.preventDefault();\n            if (_search_store2.default.isPinnedPosts) {\n                GlobalActions.toggleSideBarAction(false);\n            } else {\n                (0, _post_actions.getPinnedPosts)(this.state.channel.id);\n            }\n        }\n    }, {\n        key: 'createDropdown',\n        value: function createDropdown(channel, channelTitle, isSystemAdmin, isTeamAdmin, isChannelAdmin, isDirect, isGroup) {\n            var _this2 = this;\n\n            if (channel) {\n                var viewInfoOption = void 0;\n                var viewPinnedPostsOption = void 0;\n                var addMembersOption = void 0;\n                var manageMembersOption = void 0;\n                var setChannelHeaderOption = void 0;\n                var setChannelPurposeOption = void 0;\n                var notificationPreferenceOption = void 0;\n                var renameChannelOption = void 0;\n                var deleteChannelOption = void 0;\n                var leaveChannelOption = void 0;\n\n                if (isDirect) {\n                    setChannelHeaderOption = _react2.default.createElement(\n                        'li',\n                        { role: 'presentation' },\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                role: 'menuitem',\n                                href: '#',\n                                onClick: this.showEditChannelHeaderModal\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'channel_header.channelHeader',\n                                defaultMessage: 'Set Channel Header...'\n                            })\n                        )\n                    );\n                } else if (isGroup) {\n                    setChannelHeaderOption = _react2.default.createElement(\n                        'li',\n                        { role: 'presentation' },\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                role: 'menuitem',\n                                href: '#',\n                                onClick: this.showEditChannelHeaderModal\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'channel_header.channelHeader',\n                                defaultMessage: 'Set Channel Header...'\n                            })\n                        )\n                    );\n\n                    notificationPreferenceOption = _react2.default.createElement(\n                        'li',\n                        { role: 'presentation' },\n                        _react2.default.createElement(\n                            _toggle_modal_button2.default,\n                            {\n                                role: 'menuitem',\n                                dialogType: _channel_notifications_modal2.default,\n                                dialogProps: {\n                                    channel: channel,\n                                    channelMember: this.state.member,\n                                    currentUser: this.state.currentUser\n                                }\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'navbar.preferences',\n                                defaultMessage: 'Notification Preferences'\n                            })\n                        )\n                    );\n\n                    addMembersOption = _react2.default.createElement(\n                        'li',\n                        {\n                            role: 'presentation'\n                        },\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                role: 'menuitem',\n                                href: '#',\n                                onClick: this.openDirectMessageModal\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'navbar.addMembers',\n                                defaultMessage: 'Add Members'\n                            })\n                        )\n                    );\n                } else {\n                    viewInfoOption = _react2.default.createElement(\n                        'li',\n                        { role: 'presentation' },\n                        _react2.default.createElement(\n                            _toggle_modal_button2.default,\n                            {\n                                role: 'menuitem',\n                                dialogType: _channel_info_modal2.default,\n                                dialogProps: { channel: channel }\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'navbar.viewInfo',\n                                defaultMessage: 'View Info'\n                            })\n                        )\n                    );\n\n                    viewPinnedPostsOption = _react2.default.createElement(\n                        'li',\n                        { role: 'presentation' },\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                role: 'menuitem',\n                                href: '#',\n                                onClick: this.getPinnedPosts\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'navbar.viewPinnedPosts',\n                                defaultMessage: 'View Pinned Posts'\n                            })\n                        )\n                    );\n\n                    if (_channel_store2.default.isDefault(channel)) {\n                        manageMembersOption = _react2.default.createElement(\n                            'li',\n                            {\n                                key: 'view_members',\n                                role: 'presentation'\n                            },\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    role: 'menuitem',\n                                    href: '#',\n                                    onClick: this.showMembersModal\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'channel_header.viewMembers',\n                                    defaultMessage: 'View Members'\n                                })\n                            )\n                        );\n                    } else {\n                        addMembersOption = _react2.default.createElement(\n                            'li',\n                            { role: 'presentation' },\n                            _react2.default.createElement(\n                                _toggle_modal_button2.default,\n                                {\n                                    ref: 'channelInviteModalButton',\n                                    role: 'menuitem',\n                                    dialogType: _channel_invite_modal2.default,\n                                    dialogProps: { channel: channel, currentUser: this.state.currentUser }\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'navbar.addMembers',\n                                    defaultMessage: 'Add Members'\n                                })\n                            )\n                        );\n\n                        if (ChannelUtils.canManageMembers(channel, isChannelAdmin, isTeamAdmin, isSystemAdmin)) {\n                            manageMembersOption = _react2.default.createElement(\n                                'li',\n                                {\n                                    key: 'manage_members',\n                                    role: 'presentation'\n                                },\n                                _react2.default.createElement(\n                                    'a',\n                                    {\n                                        role: 'menuitem',\n                                        href: '#',\n                                        onClick: this.showMembersModal\n                                    },\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'channel_header.manageMembers',\n                                        defaultMessage: 'Manage Members'\n                                    })\n                                )\n                            );\n                        } else {\n                            manageMembersOption = _react2.default.createElement(\n                                'li',\n                                {\n                                    key: 'view_members',\n                                    role: 'presentation'\n                                },\n                                _react2.default.createElement(\n                                    'a',\n                                    {\n                                        role: 'menuitem',\n                                        href: '#',\n                                        onClick: this.showMembersModal\n                                    },\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'channel_header.viewMembers',\n                                        defaultMessage: 'View Members'\n                                    })\n                                )\n                            );\n                        }\n                    }\n\n                    notificationPreferenceOption = _react2.default.createElement(\n                        'li',\n                        { role: 'presentation' },\n                        _react2.default.createElement(\n                            _toggle_modal_button2.default,\n                            {\n                                role: 'menuitem',\n                                dialogType: _channel_notifications_modal2.default,\n                                dialogProps: {\n                                    channel: channel,\n                                    channelMember: this.state.member,\n                                    currentUser: this.state.currentUser\n                                }\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'navbar.preferences',\n                                defaultMessage: 'Notification Preferences'\n                            })\n                        )\n                    );\n\n                    if (ChannelUtils.showManagementOptions(channel, isChannelAdmin, isTeamAdmin, isSystemAdmin)) {\n                        setChannelHeaderOption = _react2.default.createElement(\n                            'li',\n                            { role: 'presentation' },\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    role: 'menuitem',\n                                    href: '#',\n                                    onClick: this.showEditChannelHeaderModal\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'channel_header.setHeader',\n                                    defaultMessage: 'Edit Channel Header'\n                                })\n                            )\n                        );\n\n                        setChannelPurposeOption = _react2.default.createElement(\n                            'li',\n                            { role: 'presentation' },\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    role: 'menuitem',\n                                    href: '#',\n                                    onClick: this.showChannelPurposeModal\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'channel_header.setPurpose',\n                                    defaultMessage: 'Edit Channel Purpose'\n                                })\n                            )\n                        );\n\n                        renameChannelOption = _react2.default.createElement(\n                            'li',\n                            { role: 'presentation' },\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    role: 'menuitem',\n                                    href: '#',\n                                    onClick: this.showRenameChannelModal\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'channel_header.rename',\n                                    defaultMessage: 'Rename Channel'\n                                })\n                            )\n                        );\n                    }\n\n                    if (ChannelUtils.showDeleteOptionForCurrentUser(channel, isChannelAdmin, isTeamAdmin, isSystemAdmin)) {\n                        deleteChannelOption = _react2.default.createElement(\n                            'li',\n                            { role: 'presentation' },\n                            _react2.default.createElement(\n                                _toggle_modal_button2.default,\n                                {\n                                    role: 'menuitem',\n                                    dialogType: _delete_channel_modal2.default,\n                                    dialogProps: { channel: channel }\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'channel_header.delete',\n                                    defaultMessage: 'Delete Channel'\n                                })\n                            )\n                        );\n                    }\n\n                    if (!_channel_store2.default.isDefault(channel)) {\n                        leaveChannelOption = _react2.default.createElement(\n                            'li',\n                            { role: 'presentation' },\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    role: 'menuitem',\n                                    href: '#',\n                                    onClick: this.handleLeave\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'channel_header.leave',\n                                    defaultMessage: 'Leave Channel'\n                                })\n                            )\n                        );\n                    }\n                }\n\n                var toggleFavoriteOption = _react2.default.createElement(\n                    'li',\n                    {\n                        key: 'toggle_favorite',\n                        role: 'presentation'\n                    },\n                    _react2.default.createElement(\n                        'a',\n                        {\n                            role: 'menuitem',\n                            href: '#',\n                            onClick: this.toggleFavorite\n                        },\n                        this.state.isFavorite ? _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'channelHeader.removeFromFavorites',\n                            defaultMessage: 'Remove from Favorites'\n                        }) : _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'channelHeader.addToFavorites',\n                            defaultMessage: 'Add to Favorites'\n                        })\n                    )\n                );\n\n                return _react2.default.createElement(\n                    'div',\n                    { className: 'navbar-brand' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'dropdown' },\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                href: '#',\n                                className: 'dropdown-toggle theme',\n                                type: 'button',\n                                'data-toggle': 'dropdown',\n                                'aria-expanded': 'true'\n                            },\n                            _react2.default.createElement(\n                                'span',\n                                { className: 'heading' },\n                                _react2.default.createElement(_status_icon2.default, { status: this.getTeammateStatus() }),\n                                channelTitle,\n                                ' '\n                            ),\n                            _react2.default.createElement('span', { className: 'fa fa-angle-down header-dropdown__icon' })\n                        ),\n                        _react2.default.createElement(\n                            'ul',\n                            {\n                                className: 'dropdown-menu',\n                                role: 'menu'\n                            },\n                            viewInfoOption,\n                            viewPinnedPostsOption,\n                            notificationPreferenceOption,\n                            addMembersOption,\n                            manageMembersOption,\n                            setChannelHeaderOption,\n                            setChannelPurposeOption,\n                            renameChannelOption,\n                            deleteChannelOption,\n                            leaveChannelOption,\n                            toggleFavoriteOption,\n                            _react2.default.createElement(\n                                'div',\n                                {\n                                    className: 'close visible-xs-block',\n                                    onClick: function onClick() {\n                                        return _this2.refs.headerOverlay.hide();\n                                    }\n                                },\n                                ''\n                            )\n                        )\n                    )\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'navbar-brand' },\n                _react2.default.createElement(\n                    _es.Link,\n                    {\n                        to: _team_store2.default.getCurrentTeamUrl() + '/channels/town-square',\n                        className: 'heading'\n                    },\n                    channelTitle\n                )\n            );\n        }\n    }, {\n        key: 'createCollapseButtons',\n        value: function createCollapseButtons(currentId) {\n            var buttons = [];\n            var menuIcon = _constants.Constants.MENU_ICON_SVG;\n\n            if (currentId == null) {\n                buttons.push(_react2.default.createElement(\n                    'button',\n                    {\n                        key: 'navbar-toggle-collapse',\n                        type: 'button',\n                        className: 'navbar-toggle',\n                        'data-toggle': 'collapse',\n                        'data-target': '#navbar-collapse-1'\n                    },\n                    _react2.default.createElement(\n                        'span',\n                        { className: 'sr-only' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'navbar.toggle1',\n                            defaultMessage: 'Toggle sidebar'\n                        })\n                    ),\n                    _react2.default.createElement('span', { className: 'icon-bar' }),\n                    _react2.default.createElement('span', { className: 'icon-bar' }),\n                    _react2.default.createElement('span', { className: 'icon-bar' })\n                ));\n            } else {\n                buttons.push(_react2.default.createElement(\n                    'button',\n                    {\n                        key: 'navbar-toggle-sidebar',\n                        type: 'button',\n                        className: 'navbar-toggle',\n                        'data-toggle': 'collapse',\n                        'data-target': '#sidebar-nav',\n                        onClick: this.toggleLeftSidebar\n                    },\n                    _react2.default.createElement(\n                        'span',\n                        { className: 'sr-only' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'navbar.toggle2',\n                            defaultMessage: 'Toggle sidebar'\n                        })\n                    ),\n                    _react2.default.createElement('span', {\n                        className: 'icon icon__menu icon--sidebarHeaderTextColor',\n                        dangerouslySetInnerHTML: { __html: menuIcon },\n                        'aria-hidden': 'true'\n                    }),\n                    _react2.default.createElement(_notify_counts2.default, null)\n                ));\n\n                buttons.push(_react2.default.createElement(\n                    'button',\n                    {\n                        key: 'navbar-toggle-menu',\n                        type: 'button',\n                        className: 'navbar-toggle navbar-right__icon menu-toggle pull-right',\n                        'data-toggle': 'collapse',\n                        'data-target': '#sidebar-nav',\n                        onClick: this.toggleRightSidebar\n                    },\n                    _react2.default.createElement('span', { dangerouslySetInnerHTML: { __html: _constants.Constants.MENU_ICON } })\n                ));\n            }\n\n            return buttons;\n        }\n    }, {\n        key: 'getTeammateStatus',\n        value: function getTeammateStatus() {\n            var channel = this.state.channel;\n\n            // get status for direct message channels\n            if (channel.type === 'D') {\n                var currentUserId = this.state.currentUser.id;\n                var teammate = this.state.users.find(function (user) {\n                    return user.id !== currentUserId;\n                });\n                if (teammate) {\n                    return _user_store2.default.getStatus(teammate.id);\n                }\n            }\n            return null;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this3 = this;\n\n            if (!this.isStateValid()) {\n                return null;\n            }\n\n            var currentId = this.state.currentUser.id;\n            var channel = this.state.channel;\n            var channelTitle = this.props.teamDisplayName;\n            var isTeamAdmin = _team_store2.default.isTeamAdminForCurrentTeam();\n            var isSystemAdmin = _user_store2.default.isSystemAdminForCurrentUser();\n            var isChannelAdmin = false;\n            var isDirect = false;\n            var isGroup = false;\n\n            var editChannelHeaderModal = null;\n            var editChannelPurposeModal = null;\n            var renameChannelModal = null;\n            var channelMembersModal = null;\n            var quickSwitchModal = null;\n\n            if (channel) {\n                isChannelAdmin = _channel_store2.default.isChannelAdminForCurrentChannel();\n                channelTitle = channel.display_name;\n\n                if (channel.type === _constants.Constants.DM_CHANNEL) {\n                    isDirect = true;\n                    var teammateId = Utils.getUserIdFromChannelName(channel);\n                    channelTitle = Utils.displayUsername(teammateId);\n                } else if (channel.type === _constants.Constants.GM_CHANNEL) {\n                    isGroup = true;\n                }\n\n                if (this.state.showEditChannelHeaderModal) {\n                    editChannelHeaderModal = _react2.default.createElement(_edit_channel_header_modal2.default, {\n                        onHide: function onHide() {\n                            return _this3.setState({ showEditChannelHeaderModal: false });\n                        },\n                        channel: channel\n                    });\n                }\n\n                if (this.state.showEditChannelPurposeModal) {\n                    editChannelPurposeModal = _react2.default.createElement(_edit_channel_purpose_modal2.default, {\n                        onModalDismissed: this.hideChannelPurposeModal,\n                        channel: channel\n                    });\n                }\n\n                renameChannelModal = _react2.default.createElement(_rename_channel_modal2.default, {\n                    show: this.state.showRenameChannelModal,\n                    onHide: this.hideRenameChannelModal,\n                    channel: channel\n                });\n\n                if (this.state.showMembersModal) {\n                    channelMembersModal = _react2.default.createElement(_channel_members_modal2.default, {\n                        show: true,\n                        onModalDismissed: this.hideMembersModal,\n                        showInviteModal: function showInviteModal() {\n                            return _this3.refs.channelInviteModalButton.show();\n                        },\n                        channel: channel,\n                        isAdmin: isTeamAdmin || isSystemAdmin\n                    });\n                }\n\n                quickSwitchModal = _react2.default.createElement(_quick_switch_modal2.default, {\n                    show: this.state.showQuickSwitchModal,\n                    onHide: this.hideQuickSwitchModal,\n                    initialMode: this.state.quickSwitchMode\n                });\n            }\n\n            var collapseButtons = this.createCollapseButtons(currentId);\n\n            var searchIcon = _constants.Constants.SEARCH_ICON_SVG;\n            var searchButton = _react2.default.createElement(\n                'button',\n                {\n                    type: 'button',\n                    className: 'navbar-toggle navbar-right__icon navbar-search pull-right',\n                    onClick: this.showSearch\n                },\n                _react2.default.createElement('span', {\n                    className: 'icon icon__search',\n                    dangerouslySetInnerHTML: { __html: searchIcon },\n                    'aria-hidden': 'true'\n                })\n            );\n\n            var channelMenuDropdown = this.createDropdown(channel, channelTitle, isSystemAdmin, isTeamAdmin, isChannelAdmin, isDirect, isGroup);\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'nav',\n                    {\n                        className: 'navbar navbar-default navbar-fixed-top',\n                        role: 'navigation'\n                    },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'container-fluid theme' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'navbar-header' },\n                            collapseButtons,\n                            searchButton,\n                            _react2.default.createElement(_navbar_info_button2.default, {\n                                ref: 'headerOverlay',\n                                channel: channel,\n                                showEditChannelHeaderModal: this.showEditChannelHeaderModal\n                            }),\n                            channelMenuDropdown\n                        )\n                    )\n                ),\n                editChannelHeaderModal,\n                editChannelPurposeModal,\n                renameChannelModal,\n                channelMembersModal,\n                quickSwitchModal\n            );\n        }\n    }]);\n    return Navbar;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = Navbar;\n\n\nNavbar.defaultProps = {\n    teamDisplayName: ''\n};\nNavbar.propTypes = {\n    teamDisplayName: _propTypes2.default.string\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3OC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL25hdmJhci9pbmRleC5qc3g/MDY0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcbmltcG9ydCB7TGlua30gZnJvbSAncmVhY3Qtcm91dGVyL2VzNic7XG5cbmltcG9ydCBFZGl0Q2hhbm5lbEhlYWRlck1vZGFsIGZyb20gJ2NvbXBvbmVudHMvZWRpdF9jaGFubmVsX2hlYWRlcl9tb2RhbCc7XG5pbXBvcnQgRWRpdENoYW5uZWxQdXJwb3NlTW9kYWwgZnJvbSAnY29tcG9uZW50cy9lZGl0X2NoYW5uZWxfcHVycG9zZV9tb2RhbCc7XG5cbmltcG9ydCAqIGFzIENoYW5uZWxBY3Rpb25zIGZyb20gJ2FjdGlvbnMvY2hhbm5lbF9hY3Rpb25zLmpzeCc7XG5pbXBvcnQgKiBhcyBHbG9iYWxBY3Rpb25zIGZyb20gJ2FjdGlvbnMvZ2xvYmFsX2FjdGlvbnMuanN4JztcbmltcG9ydCB7Z2V0UGlubmVkUG9zdHN9IGZyb20gJ2FjdGlvbnMvcG9zdF9hY3Rpb25zLmpzeCc7XG5pbXBvcnQgQXBwRGlzcGF0Y2hlciBmcm9tICdkaXNwYXRjaGVyL2FwcF9kaXNwYXRjaGVyLmpzeCc7XG5pbXBvcnQgQ2hhbm5lbFN0b3JlIGZyb20gJ3N0b3Jlcy9jaGFubmVsX3N0b3JlLmpzeCc7XG5pbXBvcnQgTW9kYWxTdG9yZSBmcm9tICdzdG9yZXMvbW9kYWxfc3RvcmUuanN4JztcbmltcG9ydCBQcmVmZXJlbmNlU3RvcmUgZnJvbSAnc3RvcmVzL3ByZWZlcmVuY2Vfc3RvcmUuanN4JztcbmltcG9ydCBTZWFyY2hTdG9yZSBmcm9tICdzdG9yZXMvc2VhcmNoX3N0b3JlLmpzeCc7XG5pbXBvcnQgVGVhbVN0b3JlIGZyb20gJ3N0b3Jlcy90ZWFtX3N0b3JlLmpzeCc7XG5pbXBvcnQgVXNlclN0b3JlIGZyb20gJ3N0b3Jlcy91c2VyX3N0b3JlLmpzeCc7XG5cbmltcG9ydCAqIGFzIENoYW5uZWxVdGlscyBmcm9tICd1dGlscy9jaGFubmVsX3V0aWxzLmpzeCc7XG5pbXBvcnQge0FjdGlvblR5cGVzLCBDb25zdGFudHN9IGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAndXRpbHMvdXRpbHMuanN4JztcblxuaW1wb3J0IENoYW5uZWxJbmZvTW9kYWwgZnJvbSAnY29tcG9uZW50cy9jaGFubmVsX2luZm9fbW9kYWwnO1xuaW1wb3J0IENoYW5uZWxJbnZpdGVNb2RhbCBmcm9tICdjb21wb25lbnRzL2NoYW5uZWxfaW52aXRlX21vZGFsJztcbmltcG9ydCBDaGFubmVsTWVtYmVyc01vZGFsIGZyb20gJ2NvbXBvbmVudHMvY2hhbm5lbF9tZW1iZXJzX21vZGFsLmpzeCc7XG5pbXBvcnQgQ2hhbm5lbE5vdGlmaWNhdGlvbnNNb2RhbCBmcm9tICdjb21wb25lbnRzL2NoYW5uZWxfbm90aWZpY2F0aW9uc19tb2RhbC5qc3gnO1xuXG5pbXBvcnQgRGVsZXRlQ2hhbm5lbE1vZGFsIGZyb20gJ2NvbXBvbmVudHMvZGVsZXRlX2NoYW5uZWxfbW9kYWwnO1xuXG5pbXBvcnQgTm90aWZ5Q291bnRzIGZyb20gJ2NvbXBvbmVudHMvbm90aWZ5X2NvdW50cy5qc3gnO1xuaW1wb3J0IFF1aWNrU3dpdGNoTW9kYWwgZnJvbSAnY29tcG9uZW50cy9xdWlja19zd2l0Y2hfbW9kYWwnO1xuaW1wb3J0IFJlbmFtZUNoYW5uZWxNb2RhbCBmcm9tICdjb21wb25lbnRzL3JlbmFtZV9jaGFubmVsX21vZGFsLmpzeCc7XG5pbXBvcnQgU3RhdHVzSWNvbiBmcm9tICdjb21wb25lbnRzL3N0YXR1c19pY29uLmpzeCc7XG5pbXBvcnQgVG9nZ2xlTW9kYWxCdXR0b24gZnJvbSAnY29tcG9uZW50cy90b2dnbGVfbW9kYWxfYnV0dG9uLmpzeCc7XG5cbmltcG9ydCBOYXZiYXJJbmZvQnV0dG9uIGZyb20gJy4vbmF2YmFyX2luZm9fYnV0dG9uLmpzeCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdmJhciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlTGVhdmUgPSB0aGlzLmhhbmRsZUxlYXZlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2hvd1NlYXJjaCA9IHRoaXMuc2hvd1NlYXJjaC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc2hvd0VkaXRDaGFubmVsSGVhZGVyTW9kYWwgPSB0aGlzLnNob3dFZGl0Q2hhbm5lbEhlYWRlck1vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGlkZUVkaXRDaGFubmVsSGVhZGVyTW9kYWwgPSB0aGlzLmhpZGVFZGl0Q2hhbm5lbEhlYWRlck1vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2hvd0NoYW5uZWxQdXJwb3NlTW9kYWwgPSB0aGlzLnNob3dDaGFubmVsUHVycG9zZU1vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGlkZUNoYW5uZWxQdXJwb3NlTW9kYWwgPSB0aGlzLmhpZGVDaGFubmVsUHVycG9zZU1vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2hvd1JlbmFtZUNoYW5uZWxNb2RhbCA9IHRoaXMuc2hvd1JlbmFtZUNoYW5uZWxNb2RhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhpZGVSZW5hbWVDaGFubmVsTW9kYWwgPSB0aGlzLmhpZGVSZW5hbWVDaGFubmVsTW9kYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc1N0YXRlVmFsaWQgPSB0aGlzLmlzU3RhdGVWYWxpZC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlQ29sbGFwc2VCdXR0b25zID0gdGhpcy5jcmVhdGVDb2xsYXBzZUJ1dHRvbnMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jcmVhdGVEcm9wZG93biA9IHRoaXMuY3JlYXRlRHJvcGRvd24uYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnNob3dNZW1iZXJzTW9kYWwgPSB0aGlzLnNob3dNZW1iZXJzTW9kYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oaWRlTWVtYmVyc01vZGFsID0gdGhpcy5oaWRlTWVtYmVyc01vZGFsLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy50b2dnbGVRdWlja1N3aXRjaE1vZGFsID0gdGhpcy50b2dnbGVRdWlja1N3aXRjaE1vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGlkZVF1aWNrU3dpdGNoTW9kYWwgPSB0aGlzLmhpZGVRdWlja1N3aXRjaE1vZGFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlUXVpY2tTd2l0Y2hLZXlQcmVzcyA9IHRoaXMuaGFuZGxlUXVpY2tTd2l0Y2hLZXlQcmVzcy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMub3BlbkRpcmVjdE1lc3NhZ2VNb2RhbCA9IHRoaXMub3BlbkRpcmVjdE1lc3NhZ2VNb2RhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmdldFBpbm5lZFBvc3RzID0gdGhpcy5nZXRQaW5uZWRQb3N0cy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRTdGF0ZUZyb21TdG9yZXMoKTtcbiAgICAgICAgc3RhdGUuc2hvd0VkaXRDaGFubmVsUHVycG9zZU1vZGFsID0gZmFsc2U7XG4gICAgICAgIHN0YXRlLnNob3dFZGl0Q2hhbm5lbEhlYWRlck1vZGFsID0gZmFsc2U7XG4gICAgICAgIHN0YXRlLnNob3dNZW1iZXJzTW9kYWwgPSBmYWxzZTtcbiAgICAgICAgc3RhdGUuc2hvd1JlbmFtZUNoYW5uZWxNb2RhbCA9IGZhbHNlO1xuICAgICAgICBzdGF0ZS5zaG93UXVpY2tTd2l0Y2hNb2RhbCA9IGZhbHNlO1xuICAgICAgICBzdGF0ZS5xdWlja1N3aXRjaE1vZGUgPSAnY2hhbm5lbCc7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG5cbiAgICBnZXRTdGF0ZUZyb21TdG9yZXMoKSB7XG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSBDaGFubmVsU3RvcmUuZ2V0Q3VycmVudCgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjaGFubmVsLFxuICAgICAgICAgICAgbWVtYmVyOiBDaGFubmVsU3RvcmUuZ2V0Q3VycmVudE1lbWJlcigpLFxuICAgICAgICAgICAgdXNlcnM6IFtdLFxuICAgICAgICAgICAgdXNlckNvdW50OiBDaGFubmVsU3RvcmUuZ2V0Q3VycmVudFN0YXRzKCkubWVtYmVyX2NvdW50LFxuICAgICAgICAgICAgY3VycmVudFVzZXI6IFVzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpLFxuICAgICAgICAgICAgaXNGYXZvcml0ZTogY2hhbm5lbCAmJiBDaGFubmVsVXRpbHMuaXNGYXZvcml0ZUNoYW5uZWwoY2hhbm5lbClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpc1N0YXRlVmFsaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmNoYW5uZWwgJiYgdGhpcy5zdGF0ZS5tZW1iZXIgJiYgdGhpcy5zdGF0ZS51c2VycyAmJiB0aGlzLnN0YXRlLmN1cnJlbnRVc2VyO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBDaGFubmVsU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkNoYW5nZSk7XG4gICAgICAgIENoYW5uZWxTdG9yZS5hZGRTdGF0c0NoYW5nZUxpc3RlbmVyKHRoaXMub25DaGFuZ2UpO1xuICAgICAgICBVc2VyU3RvcmUuYWRkU3RhdHVzZXNDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uQ2hhbmdlKTtcbiAgICAgICAgVXNlclN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMub25DaGFuZ2UpO1xuICAgICAgICBQcmVmZXJlbmNlU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkNoYW5nZSk7XG4gICAgICAgIE1vZGFsU3RvcmUuYWRkTW9kYWxMaXN0ZW5lcihBY3Rpb25UeXBlcy5UT0dHTEVfUVVJQ0tfU1dJVENIX01PREFMLCB0aGlzLnRvZ2dsZVF1aWNrU3dpdGNoTW9kYWwpO1xuICAgICAgICBNb2RhbFN0b3JlLmFkZE1vZGFsTGlzdGVuZXIoQWN0aW9uVHlwZXMuVE9HR0xFX0NIQU5ORUxfSEVBREVSX1VQREFURV9NT0RBTCwgdGhpcy5zaG93RWRpdENoYW5uZWxIZWFkZXJNb2RhbCk7XG4gICAgICAgIE1vZGFsU3RvcmUuYWRkTW9kYWxMaXN0ZW5lcihBY3Rpb25UeXBlcy5UT0dHTEVfQ0hBTk5FTF9QVVJQT1NFX1VQREFURV9NT0RBTCwgdGhpcy5zaG93Q2hhbm5lbFB1cnBvc2VNb2RhbCk7XG4gICAgICAgIE1vZGFsU3RvcmUuYWRkTW9kYWxMaXN0ZW5lcihBY3Rpb25UeXBlcy5UT0dHTEVfQ0hBTk5FTF9OQU1FX1VQREFURV9NT0RBTCwgdGhpcy5zaG93UmVuYW1lQ2hhbm5lbE1vZGFsKTtcbiAgICAgICAgJCgnLmlubmVyLXdyYXAnKS5jbGljayh0aGlzLmhpZGVTaWRlYmFycyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZVF1aWNrU3dpdGNoS2V5UHJlc3MpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBDaGFubmVsU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkNoYW5nZSk7XG4gICAgICAgIENoYW5uZWxTdG9yZS5yZW1vdmVTdGF0c0NoYW5nZUxpc3RlbmVyKHRoaXMub25DaGFuZ2UpO1xuICAgICAgICBVc2VyU3RvcmUucmVtb3ZlU3RhdHVzZXNDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uQ2hhbmdlKTtcbiAgICAgICAgVXNlclN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMub25DaGFuZ2UpO1xuICAgICAgICBQcmVmZXJlbmNlU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkNoYW5nZSk7XG4gICAgICAgIE1vZGFsU3RvcmUucmVtb3ZlTW9kYWxMaXN0ZW5lcihBY3Rpb25UeXBlcy5UT0dHTEVfUVVJQ0tfU1dJVENIX01PREFMLCB0aGlzLnRvZ2dsZVF1aWNrU3dpdGNoTW9kYWwpO1xuICAgICAgICBNb2RhbFN0b3JlLmFkZE1vZGFsTGlzdGVuZXIoQWN0aW9uVHlwZXMuVE9HR0xFX0NIQU5ORUxfSEVBREVSX1VQREFURV9NT0RBTCwgdGhpcy5oaWRlRWRpdENoYW5uZWxIZWFkZXJNb2RhbCk7XG4gICAgICAgIE1vZGFsU3RvcmUuYWRkTW9kYWxMaXN0ZW5lcihBY3Rpb25UeXBlcy5UT0dHTEVfQ0hBTk5FTF9QVVJQT1NFX1VQREFURV9NT0RBTCwgdGhpcy5oaWRlQ2hhbm5lbFB1cnBvc2VNb2RhbCk7XG4gICAgICAgIE1vZGFsU3RvcmUuYWRkTW9kYWxMaXN0ZW5lcihBY3Rpb25UeXBlcy5UT0dHTEVfQ0hBTk5FTF9OQU1FX1VQREFURV9NT0RBTCwgdGhpcy5oaWRlUmVuYW1lQ2hhbm5lbE1vZGFsKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlUXVpY2tTd2l0Y2hLZXlQcmVzcyk7XG4gICAgfVxuXG4gICAgaGFuZGxlU3VibWl0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgIGhhbmRsZUxlYXZlKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5jaGFubmVsLnR5cGUgPT09IENvbnN0YW50cy5QUklWQVRFX0NIQU5ORUwpIHtcbiAgICAgICAgICAgIEdsb2JhbEFjdGlvbnMuc2hvd0xlYXZlUHJpdmF0ZUNoYW5uZWxNb2RhbCh0aGlzLnN0YXRlLmNoYW5uZWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQ2hhbm5lbEFjdGlvbnMubGVhdmVDaGFubmVsKHRoaXMuc3RhdGUuY2hhbm5lbC5pZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoaWRlU2lkZWJhcnMoZSkge1xuICAgICAgICB2YXIgd2luZG93V2lkdGggPSAkKHdpbmRvdykub3V0ZXJXaWR0aCgpO1xuICAgICAgICBpZiAod2luZG93V2lkdGggPD0gNzY4KSB7XG4gICAgICAgICAgICBBcHBEaXNwYXRjaGVyLmhhbmRsZVNlcnZlckFjdGlvbih7XG4gICAgICAgICAgICAgICAgdHlwZTogQWN0aW9uVHlwZXMuUkVDRUlWRURfU0VBUkNILFxuICAgICAgICAgICAgICAgIHJlc3VsdHM6IG51bGxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBBcHBEaXNwYXRjaGVyLmhhbmRsZVNlcnZlckFjdGlvbih7XG4gICAgICAgICAgICAgICAgdHlwZTogQWN0aW9uVHlwZXMuUkVDRUlWRURfUE9TVF9TRUxFQ1RFRCxcbiAgICAgICAgICAgICAgICBwb3N0SWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgY2hhbm5lbElkOiBudWxsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZSAhPT0gJ25hdmJhci10b2dnbGUnICYmIGUudGFyZ2V0LmNsYXNzTmFtZSAhPT0gJ2ljb24tYmFyJykge1xuICAgICAgICAgICAgICAgICQoJy5hcHBfX2JvZHkgLmlubmVyLXdyYXAnKS5yZW1vdmVDbGFzcygnbW92ZS0tcmlnaHQgbW92ZS0tbGVmdCBtb3ZlLS1sZWZ0LXNtYWxsJyk7XG4gICAgICAgICAgICAgICAgJCgnLmFwcF9fYm9keSAuc2lkZWJhci0tbGVmdCcpLnJlbW92ZUNsYXNzKCdtb3ZlLS1yaWdodCcpO1xuICAgICAgICAgICAgICAgICQoJy5tdWx0aS10ZWFtcyAudGVhbS1zaWRlYmFyJykucmVtb3ZlQ2xhc3MoJ21vdmUtLXJpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgJCgnLmFwcF9fYm9keSAuc2lkZWJhci0tcmlnaHQnKS5yZW1vdmVDbGFzcygnbW92ZS0tbGVmdCcpO1xuICAgICAgICAgICAgICAgICQoJy5hcHBfX2JvZHkgLnNpZGViYXItLW1lbnUnKS5yZW1vdmVDbGFzcygnbW92ZS0tbGVmdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9nZ2xlTGVmdFNpZGViYXIoKSB7XG4gICAgICAgICQoJy5hcHBfX2JvZHkgLmlubmVyLXdyYXAnKS50b2dnbGVDbGFzcygnbW92ZS0tcmlnaHQnKTtcbiAgICAgICAgJCgnLmFwcF9fYm9keSAuc2lkZWJhci0tbGVmdCcpLnRvZ2dsZUNsYXNzKCdtb3ZlLS1yaWdodCcpO1xuICAgICAgICAkKCcubXVsdGktdGVhbXMgLnRlYW0tc2lkZWJhcicpLnRvZ2dsZUNsYXNzKCdtb3ZlLS1yaWdodCcpO1xuICAgIH1cblxuICAgIHRvZ2dsZVJpZ2h0U2lkZWJhcigpIHtcbiAgICAgICAgJCgnLmFwcF9fYm9keSAuaW5uZXItd3JhcCcpLnRvZ2dsZUNsYXNzKCdtb3ZlLS1sZWZ0LXNtYWxsJyk7XG4gICAgICAgICQoJy5hcHBfX2JvZHkgLnNpZGViYXItLW1lbnUnKS50b2dnbGVDbGFzcygnbW92ZS0tbGVmdCcpO1xuICAgIH1cblxuICAgIHNob3dTZWFyY2goKSB7XG4gICAgICAgIEFwcERpc3BhdGNoZXIuaGFuZGxlU2VydmVyQWN0aW9uKHtcbiAgICAgICAgICAgIHR5cGU6IEFjdGlvblR5cGVzLlNIT1dfU0VBUkNIXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuZ2V0U3RhdGVGcm9tU3RvcmVzKCkpO1xuICAgIH1cblxuICAgIHNob3dFZGl0Q2hhbm5lbEhlYWRlck1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3dFZGl0Q2hhbm5lbEhlYWRlck1vZGFsOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhpZGVFZGl0Q2hhbm5lbEhlYWRlck1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3dFZGl0Q2hhbm5lbEhlYWRlck1vZGFsOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzaG93Q2hhbm5lbFB1cnBvc2VNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93RWRpdENoYW5uZWxQdXJwb3NlTW9kYWw6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGlkZUNoYW5uZWxQdXJwb3NlTW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvd0VkaXRDaGFubmVsUHVycG9zZU1vZGFsOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzaG93UmVuYW1lQ2hhbm5lbE1vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3dSZW5hbWVDaGFubmVsTW9kYWw6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGlkZVJlbmFtZUNoYW5uZWxNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93UmVuYW1lQ2hhbm5lbE1vZGFsOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzaG93TWVtYmVyc01vZGFsKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dNZW1iZXJzTW9kYWw6IHRydWV9KTtcbiAgICB9XG5cbiAgICBoaWRlTWVtYmVyc01vZGFsKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93TWVtYmVyc01vZGFsOiBmYWxzZX0pO1xuICAgIH1cblxuICAgIGhhbmRsZVF1aWNrU3dpdGNoS2V5UHJlc3MoZSkge1xuICAgICAgICBpZiAoVXRpbHMuY21kT3JDdHJsUHJlc3NlZChlKSAmJiAhZS5zaGlmdEtleSAmJiBlLmtleUNvZGUgPT09IENvbnN0YW50cy5LZXlDb2Rlcy5LKSB7XG4gICAgICAgICAgICBpZiAoIWUuYWx0S2V5KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlUXVpY2tTd2l0Y2hNb2RhbCgnY2hhbm5lbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9nZ2xlUXVpY2tTd2l0Y2hNb2RhbChtb2RlID0gJ2NoYW5uZWwnKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3dRdWlja1N3aXRjaE1vZGFsKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93UXVpY2tTd2l0Y2hNb2RhbDogZmFsc2UsIHF1aWNrU3dpdGNoTW9kZTogJ2NoYW5uZWwnfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93UXVpY2tTd2l0Y2hNb2RhbDogdHJ1ZSwgcXVpY2tTd2l0Y2hNb2RlOiBtb2RlfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoaWRlUXVpY2tTd2l0Y2hNb2RhbCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93UXVpY2tTd2l0Y2hNb2RhbDogZmFsc2UsXG4gICAgICAgICAgICBxdWlja1N3aXRjaE1vZGU6ICdjaGFubmVsJ1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcGVuRGlyZWN0TWVzc2FnZU1vZGFsKCkge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmhhbmRsZVZpZXdBY3Rpb24oe1xuICAgICAgICAgICAgdHlwZTogQWN0aW9uVHlwZXMuVE9HR0xFX0RNX01PREFMLFxuICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICBjaGFubmVsSWQ6IHRoaXMuc3RhdGUuY2hhbm5lbC5pZFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRQaW5uZWRQb3N0cyhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKFNlYXJjaFN0b3JlLmlzUGlubmVkUG9zdHMpIHtcbiAgICAgICAgICAgIEdsb2JhbEFjdGlvbnMudG9nZ2xlU2lkZUJhckFjdGlvbihmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZXRQaW5uZWRQb3N0cyh0aGlzLnN0YXRlLmNoYW5uZWwuaWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9nZ2xlRmF2b3JpdGUgPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNGYXZvcml0ZSkge1xuICAgICAgICAgICAgQ2hhbm5lbEFjdGlvbnMudW5tYXJrRmF2b3JpdGUodGhpcy5zdGF0ZS5jaGFubmVsLmlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENoYW5uZWxBY3Rpb25zLm1hcmtGYXZvcml0ZSh0aGlzLnN0YXRlLmNoYW5uZWwuaWQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNyZWF0ZURyb3Bkb3duKGNoYW5uZWwsIGNoYW5uZWxUaXRsZSwgaXNTeXN0ZW1BZG1pbiwgaXNUZWFtQWRtaW4sIGlzQ2hhbm5lbEFkbWluLCBpc0RpcmVjdCwgaXNHcm91cCkge1xuICAgICAgICBpZiAoY2hhbm5lbCkge1xuICAgICAgICAgICAgbGV0IHZpZXdJbmZvT3B0aW9uO1xuICAgICAgICAgICAgbGV0IHZpZXdQaW5uZWRQb3N0c09wdGlvbjtcbiAgICAgICAgICAgIGxldCBhZGRNZW1iZXJzT3B0aW9uO1xuICAgICAgICAgICAgbGV0IG1hbmFnZU1lbWJlcnNPcHRpb247XG4gICAgICAgICAgICBsZXQgc2V0Q2hhbm5lbEhlYWRlck9wdGlvbjtcbiAgICAgICAgICAgIGxldCBzZXRDaGFubmVsUHVycG9zZU9wdGlvbjtcbiAgICAgICAgICAgIGxldCBub3RpZmljYXRpb25QcmVmZXJlbmNlT3B0aW9uO1xuICAgICAgICAgICAgbGV0IHJlbmFtZUNoYW5uZWxPcHRpb247XG4gICAgICAgICAgICBsZXQgZGVsZXRlQ2hhbm5lbE9wdGlvbjtcbiAgICAgICAgICAgIGxldCBsZWF2ZUNoYW5uZWxPcHRpb247XG5cbiAgICAgICAgICAgIGlmIChpc0RpcmVjdCkge1xuICAgICAgICAgICAgICAgIHNldENoYW5uZWxIZWFkZXJPcHRpb24gPSAoXG4gICAgICAgICAgICAgICAgICAgIDxsaSByb2xlPSdwcmVzZW50YXRpb24nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlPSdtZW51aXRlbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2hvd0VkaXRDaGFubmVsSGVhZGVyTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2NoYW5uZWxfaGVhZGVyLmNoYW5uZWxIZWFkZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTZXQgQ2hhbm5lbCBIZWFkZXIuLi4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChpc0dyb3VwKSB7XG4gICAgICAgICAgICAgICAgc2V0Q2hhbm5lbEhlYWRlck9wdGlvbiA9IChcbiAgICAgICAgICAgICAgICAgICAgPGxpIHJvbGU9J3ByZXNlbnRhdGlvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J21lbnVpdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9JyMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zaG93RWRpdENoYW5uZWxIZWFkZXJNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nY2hhbm5lbF9oZWFkZXIuY2hhbm5lbEhlYWRlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1NldCBDaGFubmVsIEhlYWRlci4uLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25QcmVmZXJlbmNlT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICA8bGkgcm9sZT0ncHJlc2VudGF0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUb2dnbGVNb2RhbEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J21lbnVpdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1R5cGU9e0NoYW5uZWxOb3RpZmljYXRpb25zTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nUHJvcHM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbE1lbWJlcjogdGhpcy5zdGF0ZS5tZW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyOiB0aGlzLnN0YXRlLmN1cnJlbnRVc2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbmF2YmFyLnByZWZlcmVuY2VzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTm90aWZpY2F0aW9uIFByZWZlcmVuY2VzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RvZ2dsZU1vZGFsQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhZGRNZW1iZXJzT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J3ByZXNlbnRhdGlvbidcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlPSdtZW51aXRlbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub3BlbkRpcmVjdE1lc3NhZ2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbmF2YmFyLmFkZE1lbWJlcnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdBZGQgTWVtYmVycydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZpZXdJbmZvT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICA8bGkgcm9sZT0ncHJlc2VudGF0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxUb2dnbGVNb2RhbEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J21lbnVpdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1R5cGU9e0NoYW5uZWxJbmZvTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nUHJvcHM9e3tjaGFubmVsfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbmF2YmFyLnZpZXdJbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVmlldyBJbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1RvZ2dsZU1vZGFsQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB2aWV3UGlubmVkUG9zdHNPcHRpb24gPSAoXG4gICAgICAgICAgICAgICAgICAgIDxsaSByb2xlPSdwcmVzZW50YXRpb24nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlPSdtZW51aXRlbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuZ2V0UGlubmVkUG9zdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J25hdmJhci52aWV3UGlubmVkUG9zdHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdWaWV3IFBpbm5lZCBQb3N0cydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoQ2hhbm5lbFN0b3JlLmlzRGVmYXVsdChjaGFubmVsKSkge1xuICAgICAgICAgICAgICAgICAgICBtYW5hZ2VNZW1iZXJzT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PSd2aWV3X21lbWJlcnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT0ncHJlc2VudGF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J21lbnVpdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnNob3dNZW1iZXJzTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2NoYW5uZWxfaGVhZGVyLnZpZXdNZW1iZXJzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1ZpZXcgTWVtYmVycydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZE1lbWJlcnNPcHRpb24gPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGkgcm9sZT0ncHJlc2VudGF0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VG9nZ2xlTW9kYWxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSdjaGFubmVsSW52aXRlTW9kYWxCdXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J21lbnVpdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dUeXBlPXtDaGFubmVsSW52aXRlTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1Byb3BzPXt7Y2hhbm5lbCwgY3VycmVudFVzZXI6IHRoaXMuc3RhdGUuY3VycmVudFVzZXJ9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSduYXZiYXIuYWRkTWVtYmVycydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdBZGQgTWVtYmVycydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RvZ2dsZU1vZGFsQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoQ2hhbm5lbFV0aWxzLmNhbk1hbmFnZU1lbWJlcnMoY2hhbm5lbCwgaXNDaGFubmVsQWRtaW4sIGlzVGVhbUFkbWluLCBpc1N5c3RlbUFkbWluKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFuYWdlTWVtYmVyc09wdGlvbiA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdtYW5hZ2VfbWVtYmVycydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT0ncHJlc2VudGF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J21lbnVpdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0nIydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2hvd01lbWJlcnNNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nY2hhbm5lbF9oZWFkZXIubWFuYWdlTWVtYmVycydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTWFuYWdlIE1lbWJlcnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYW5hZ2VNZW1iZXJzT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9J3ZpZXdfbWVtYmVycydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT0ncHJlc2VudGF0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J21lbnVpdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0nIydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2hvd01lbWJlcnNNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nY2hhbm5lbF9oZWFkZXIudmlld01lbWJlcnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1ZpZXcgTWVtYmVycydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblByZWZlcmVuY2VPcHRpb24gPSAoXG4gICAgICAgICAgICAgICAgICAgIDxsaSByb2xlPSdwcmVzZW50YXRpb24nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRvZ2dsZU1vZGFsQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT0nbWVudWl0ZW0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nVHlwZT17Q2hhbm5lbE5vdGlmaWNhdGlvbnNNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dQcm9wcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsTWVtYmVyOiB0aGlzLnN0YXRlLm1lbWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXI6IHRoaXMuc3RhdGUuY3VycmVudFVzZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSduYXZiYXIucHJlZmVyZW5jZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdOb3RpZmljYXRpb24gUHJlZmVyZW5jZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvVG9nZ2xlTW9kYWxCdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmIChDaGFubmVsVXRpbHMuc2hvd01hbmFnZW1lbnRPcHRpb25zKGNoYW5uZWwsIGlzQ2hhbm5lbEFkbWluLCBpc1RlYW1BZG1pbiwgaXNTeXN0ZW1BZG1pbikpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0Q2hhbm5lbEhlYWRlck9wdGlvbiA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSByb2xlPSdwcmVzZW50YXRpb24nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J21lbnVpdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnNob3dFZGl0Q2hhbm5lbEhlYWRlck1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdjaGFubmVsX2hlYWRlci5zZXRIZWFkZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRWRpdCBDaGFubmVsIEhlYWRlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIHNldENoYW5uZWxQdXJwb3NlT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIHJvbGU9J3ByZXNlbnRhdGlvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT0nbWVudWl0ZW0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9JyMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2hvd0NoYW5uZWxQdXJwb3NlTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2NoYW5uZWxfaGVhZGVyLnNldFB1cnBvc2UnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRWRpdCBDaGFubmVsIFB1cnBvc2UnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICByZW5hbWVDaGFubmVsT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIHJvbGU9J3ByZXNlbnRhdGlvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT0nbWVudWl0ZW0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9JyMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2hvd1JlbmFtZUNoYW5uZWxNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nY2hhbm5lbF9oZWFkZXIucmVuYW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1JlbmFtZSBDaGFubmVsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKENoYW5uZWxVdGlscy5zaG93RGVsZXRlT3B0aW9uRm9yQ3VycmVudFVzZXIoY2hhbm5lbCwgaXNDaGFubmVsQWRtaW4sIGlzVGVhbUFkbWluLCBpc1N5c3RlbUFkbWluKSkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVDaGFubmVsT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIHJvbGU9J3ByZXNlbnRhdGlvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRvZ2dsZU1vZGFsQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J21lbnVpdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dUeXBlPXtEZWxldGVDaGFubmVsTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1Byb3BzPXt7Y2hhbm5lbH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2NoYW5uZWxfaGVhZGVyLmRlbGV0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdEZWxldGUgQ2hhbm5lbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RvZ2dsZU1vZGFsQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIUNoYW5uZWxTdG9yZS5pc0RlZmF1bHQoY2hhbm5lbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVhdmVDaGFubmVsT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIHJvbGU9J3ByZXNlbnRhdGlvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT0nbWVudWl0ZW0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9JyMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlTGVhdmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2NoYW5uZWxfaGVhZGVyLmxlYXZlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xlYXZlIENoYW5uZWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHRvZ2dsZUZhdm9yaXRlT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxsaVxuICAgICAgICAgICAgICAgICAgICBrZXk9J3RvZ2dsZV9mYXZvcml0ZSdcbiAgICAgICAgICAgICAgICAgICAgcm9sZT0ncHJlc2VudGF0aW9uJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9J21lbnVpdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0nIydcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRmF2b3JpdGV9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlzRmF2b3JpdGUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdjaGFubmVsSGVhZGVyLnJlbW92ZUZyb21GYXZvcml0ZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdSZW1vdmUgZnJvbSBGYXZvcml0ZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdjaGFubmVsSGVhZGVyLmFkZFRvRmF2b3JpdGVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQWRkIHRvIEZhdm9yaXRlcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPn1cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSduYXZiYXItYnJhbmQnPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZHJvcGRvd24nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZHJvcGRvd24tdG9nZ2xlIHRoZW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRvZ2dsZT0nZHJvcGRvd24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1leHBhbmRlZD0ndHJ1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2hlYWRpbmcnPjxTdGF0dXNJY29uIHN0YXR1cz17dGhpcy5nZXRUZWFtbWF0ZVN0YXR1cygpfS8+e2NoYW5uZWxUaXRsZX0gPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZmEgZmEtYW5nbGUtZG93biBoZWFkZXItZHJvcGRvd25fX2ljb24nLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZHJvcGRvd24tbWVudSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlPSdtZW51J1xuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2aWV3SW5mb09wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmlld1Bpbm5lZFBvc3RzT3B0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtub3RpZmljYXRpb25QcmVmZXJlbmNlT3B0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthZGRNZW1iZXJzT3B0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttYW5hZ2VNZW1iZXJzT3B0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZXRDaGFubmVsSGVhZGVyT3B0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZXRDaGFubmVsUHVycG9zZU9wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuYW1lQ2hhbm5lbE9wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGVsZXRlQ2hhbm5lbE9wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGVhdmVDaGFubmVsT3B0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0b2dnbGVGYXZvcml0ZU9wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY2xvc2UgdmlzaWJsZS14cy1ibG9jaydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy5yZWZzLmhlYWRlck92ZXJsYXkuaGlkZSgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyfDlyd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J25hdmJhci1icmFuZCc+XG4gICAgICAgICAgICAgICAgPExpbmtcbiAgICAgICAgICAgICAgICAgICAgdG89e1RlYW1TdG9yZS5nZXRDdXJyZW50VGVhbVVybCgpICsgJy9jaGFubmVscy90b3duLXNxdWFyZSd9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0naGVhZGluZydcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtjaGFubmVsVGl0bGV9XG4gICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgY3JlYXRlQ29sbGFwc2VCdXR0b25zKGN1cnJlbnRJZCkge1xuICAgICAgICB2YXIgYnV0dG9ucyA9IFtdO1xuICAgICAgICBjb25zdCBtZW51SWNvbiA9IENvbnN0YW50cy5NRU5VX0lDT05fU1ZHO1xuXG4gICAgICAgIGlmIChjdXJyZW50SWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgYnV0dG9ucy5wdXNoKFxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAga2V5PSduYXZiYXItdG9nZ2xlLWNvbGxhcHNlJ1xuICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbmF2YmFyLXRvZ2dsZSdcbiAgICAgICAgICAgICAgICAgICAgZGF0YS10b2dnbGU9J2NvbGxhcHNlJ1xuICAgICAgICAgICAgICAgICAgICBkYXRhLXRhcmdldD0nI25hdmJhci1jb2xsYXBzZS0xJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzci1vbmx5Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J25hdmJhci50b2dnbGUxJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUb2dnbGUgc2lkZWJhcidcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdpY29uLWJhcicvPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2ljb24tYmFyJy8+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0naWNvbi1iYXInLz5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBidXR0b25zLnB1c2goXG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBrZXk9J25hdmJhci10b2dnbGUtc2lkZWJhcidcbiAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J25hdmJhci10b2dnbGUnXG4gICAgICAgICAgICAgICAgICAgIGRhdGEtdG9nZ2xlPSdjb2xsYXBzZSdcbiAgICAgICAgICAgICAgICAgICAgZGF0YS10YXJnZXQ9JyNzaWRlYmFyLW5hdidcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy50b2dnbGVMZWZ0U2lkZWJhcn1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nc3Itb25seSc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSduYXZiYXIudG9nZ2xlMidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVG9nZ2xlIHNpZGViYXInXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ljb24gaWNvbl9fbWVudSBpY29uLS1zaWRlYmFySGVhZGVyVGV4dENvbG9yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IG1lbnVJY29ufX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPSd0cnVlJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8Tm90aWZ5Q291bnRzLz5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGJ1dHRvbnMucHVzaChcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGtleT0nbmF2YmFyLXRvZ2dsZS1tZW51J1xuICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbmF2YmFyLXRvZ2dsZSBuYXZiYXItcmlnaHRfX2ljb24gbWVudS10b2dnbGUgcHVsbC1yaWdodCdcbiAgICAgICAgICAgICAgICAgICAgZGF0YS10b2dnbGU9J2NvbGxhcHNlJ1xuICAgICAgICAgICAgICAgICAgICBkYXRhLXRhcmdldD0nI3NpZGViYXItbmF2J1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZVJpZ2h0U2lkZWJhcn1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBDb25zdGFudHMuTUVOVV9JQ09OfX0vPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBidXR0b25zO1xuICAgIH1cblxuICAgIGdldFRlYW1tYXRlU3RhdHVzKCkge1xuICAgICAgICBjb25zdCBjaGFubmVsID0gdGhpcy5zdGF0ZS5jaGFubmVsO1xuXG4gICAgICAgIC8vIGdldCBzdGF0dXMgZm9yIGRpcmVjdCBtZXNzYWdlIGNoYW5uZWxzXG4gICAgICAgIGlmIChjaGFubmVsLnR5cGUgPT09ICdEJykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFVzZXJJZCA9IHRoaXMuc3RhdGUuY3VycmVudFVzZXIuaWQ7XG4gICAgICAgICAgICBjb25zdCB0ZWFtbWF0ZSA9IHRoaXMuc3RhdGUudXNlcnMuZmluZCgodXNlcikgPT4gdXNlci5pZCAhPT0gY3VycmVudFVzZXJJZCk7XG4gICAgICAgICAgICBpZiAodGVhbW1hdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gVXNlclN0b3JlLmdldFN0YXR1cyh0ZWFtbWF0ZS5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdGF0ZVZhbGlkKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJlbnRJZCA9IHRoaXMuc3RhdGUuY3VycmVudFVzZXIuaWQ7XG4gICAgICAgIHZhciBjaGFubmVsID0gdGhpcy5zdGF0ZS5jaGFubmVsO1xuICAgICAgICB2YXIgY2hhbm5lbFRpdGxlID0gdGhpcy5wcm9wcy50ZWFtRGlzcGxheU5hbWU7XG4gICAgICAgIHZhciBpc1RlYW1BZG1pbiA9IFRlYW1TdG9yZS5pc1RlYW1BZG1pbkZvckN1cnJlbnRUZWFtKCk7XG4gICAgICAgIHZhciBpc1N5c3RlbUFkbWluID0gVXNlclN0b3JlLmlzU3lzdGVtQWRtaW5Gb3JDdXJyZW50VXNlcigpO1xuICAgICAgICB2YXIgaXNDaGFubmVsQWRtaW4gPSBmYWxzZTtcbiAgICAgICAgdmFyIGlzRGlyZWN0ID0gZmFsc2U7XG4gICAgICAgIGxldCBpc0dyb3VwID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIGVkaXRDaGFubmVsSGVhZGVyTW9kYWwgPSBudWxsO1xuICAgICAgICB2YXIgZWRpdENoYW5uZWxQdXJwb3NlTW9kYWwgPSBudWxsO1xuICAgICAgICBsZXQgcmVuYW1lQ2hhbm5lbE1vZGFsID0gbnVsbDtcbiAgICAgICAgbGV0IGNoYW5uZWxNZW1iZXJzTW9kYWwgPSBudWxsO1xuICAgICAgICBsZXQgcXVpY2tTd2l0Y2hNb2RhbCA9IG51bGw7XG5cbiAgICAgICAgaWYgKGNoYW5uZWwpIHtcbiAgICAgICAgICAgIGlzQ2hhbm5lbEFkbWluID0gQ2hhbm5lbFN0b3JlLmlzQ2hhbm5lbEFkbWluRm9yQ3VycmVudENoYW5uZWwoKTtcbiAgICAgICAgICAgIGNoYW5uZWxUaXRsZSA9IGNoYW5uZWwuZGlzcGxheV9uYW1lO1xuXG4gICAgICAgICAgICBpZiAoY2hhbm5lbC50eXBlID09PSBDb25zdGFudHMuRE1fQ0hBTk5FTCkge1xuICAgICAgICAgICAgICAgIGlzRGlyZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZWFtbWF0ZUlkID0gVXRpbHMuZ2V0VXNlcklkRnJvbUNoYW5uZWxOYW1lKGNoYW5uZWwpO1xuICAgICAgICAgICAgICAgIGNoYW5uZWxUaXRsZSA9IFV0aWxzLmRpc3BsYXlVc2VybmFtZSh0ZWFtbWF0ZUlkKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbC50eXBlID09PSBDb25zdGFudHMuR01fQ0hBTk5FTCkge1xuICAgICAgICAgICAgICAgIGlzR3JvdXAgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG93RWRpdENoYW5uZWxIZWFkZXJNb2RhbCkge1xuICAgICAgICAgICAgICAgIGVkaXRDaGFubmVsSGVhZGVyTW9kYWwgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxFZGl0Q2hhbm5lbEhlYWRlck1vZGFsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkhpZGU9eygpID0+IHRoaXMuc2V0U3RhdGUoe3Nob3dFZGl0Q2hhbm5lbEhlYWRlck1vZGFsOiBmYWxzZX0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbD17Y2hhbm5lbH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG93RWRpdENoYW5uZWxQdXJwb3NlTW9kYWwpIHtcbiAgICAgICAgICAgICAgICBlZGl0Q2hhbm5lbFB1cnBvc2VNb2RhbCA9IChcbiAgICAgICAgICAgICAgICAgICAgPEVkaXRDaGFubmVsUHVycG9zZU1vZGFsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbk1vZGFsRGlzbWlzc2VkPXt0aGlzLmhpZGVDaGFubmVsUHVycG9zZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbD17Y2hhbm5lbH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZW5hbWVDaGFubmVsTW9kYWwgPSAoXG4gICAgICAgICAgICAgICAgPFJlbmFtZUNoYW5uZWxNb2RhbFxuICAgICAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3dSZW5hbWVDaGFubmVsTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgIG9uSGlkZT17dGhpcy5oaWRlUmVuYW1lQ2hhbm5lbE1vZGFsfVxuICAgICAgICAgICAgICAgICAgICBjaGFubmVsPXtjaGFubmVsfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG93TWVtYmVyc01vZGFsKSB7XG4gICAgICAgICAgICAgICAgY2hhbm5lbE1lbWJlcnNNb2RhbCA9IChcbiAgICAgICAgICAgICAgICAgICAgPENoYW5uZWxNZW1iZXJzTW9kYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbk1vZGFsRGlzbWlzc2VkPXt0aGlzLmhpZGVNZW1iZXJzTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93SW52aXRlTW9kYWw9eygpID0+IHRoaXMucmVmcy5jaGFubmVsSW52aXRlTW9kYWxCdXR0b24uc2hvdygpfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbD17Y2hhbm5lbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWRtaW49e2lzVGVhbUFkbWluIHx8IGlzU3lzdGVtQWRtaW59XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcXVpY2tTd2l0Y2hNb2RhbCA9IChcbiAgICAgICAgICAgICAgICA8UXVpY2tTd2l0Y2hNb2RhbFxuICAgICAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3dRdWlja1N3aXRjaE1vZGFsfVxuICAgICAgICAgICAgICAgICAgICBvbkhpZGU9e3RoaXMuaGlkZVF1aWNrU3dpdGNoTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxNb2RlPXt0aGlzLnN0YXRlLnF1aWNrU3dpdGNoTW9kZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb2xsYXBzZUJ1dHRvbnMgPSB0aGlzLmNyZWF0ZUNvbGxhcHNlQnV0dG9ucyhjdXJyZW50SWQpO1xuXG4gICAgICAgIGNvbnN0IHNlYXJjaEljb24gPSBDb25zdGFudHMuU0VBUkNIX0lDT05fU1ZHO1xuICAgICAgICBjb25zdCBzZWFyY2hCdXR0b24gPSAoXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbmF2YmFyLXRvZ2dsZSBuYXZiYXItcmlnaHRfX2ljb24gbmF2YmFyLXNlYXJjaCBwdWxsLXJpZ2h0J1xuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2hvd1NlYXJjaH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ljb24gaWNvbl9fc2VhcmNoJ1xuICAgICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogc2VhcmNoSWNvbn19XG4gICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPSd0cnVlJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgKTtcblxuICAgICAgICB2YXIgY2hhbm5lbE1lbnVEcm9wZG93biA9IHRoaXMuY3JlYXRlRHJvcGRvd24oY2hhbm5lbCwgY2hhbm5lbFRpdGxlLCBpc1N5c3RlbUFkbWluLCBpc1RlYW1BZG1pbiwgaXNDaGFubmVsQWRtaW4sIGlzRGlyZWN0LCBpc0dyb3VwKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8bmF2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbmF2YmFyIG5hdmJhci1kZWZhdWx0IG5hdmJhci1maXhlZC10b3AnXG4gICAgICAgICAgICAgICAgICAgIHJvbGU9J25hdmlnYXRpb24nXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29udGFpbmVyLWZsdWlkIHRoZW1lJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSduYXZiYXItaGVhZGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y29sbGFwc2VCdXR0b25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWFyY2hCdXR0b259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE5hdmJhckluZm9CdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSdoZWFkZXJPdmVybGF5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsPXtjaGFubmVsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93RWRpdENoYW5uZWxIZWFkZXJNb2RhbD17dGhpcy5zaG93RWRpdENoYW5uZWxIZWFkZXJNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjaGFubmVsTWVudURyb3Bkb3dufVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvbmF2PlxuICAgICAgICAgICAgICAgIHtlZGl0Q2hhbm5lbEhlYWRlck1vZGFsfVxuICAgICAgICAgICAgICAgIHtlZGl0Q2hhbm5lbFB1cnBvc2VNb2RhbH1cbiAgICAgICAgICAgICAgICB7cmVuYW1lQ2hhbm5lbE1vZGFsfVxuICAgICAgICAgICAgICAgIHtjaGFubmVsTWVtYmVyc01vZGFsfVxuICAgICAgICAgICAgICAgIHtxdWlja1N3aXRjaE1vZGFsfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5OYXZiYXIuZGVmYXVsdFByb3BzID0ge1xuICAgIHRlYW1EaXNwbGF5TmFtZTogJydcbn07XG5OYXZiYXIucHJvcFR5cGVzID0ge1xuICAgIHRlYW1EaXNwbGF5TmFtZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL25hdmJhci9pbmRleC5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7Ozs7OztBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFtT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeE9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5DQTtBQW9DQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQVlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBREE7QUFhQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQURBO0FBQ0E7QUFhQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUhBO0FBU0E7QUFDQTtBQUNBO0FBRkE7QUFUQTtBQURBO0FBQ0E7QUFpQkE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQUhBO0FBZUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFEQTtBQUNBO0FBYUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBREE7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBSkE7QUFnQkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQURBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQUpBO0FBZ0JBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBSkE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFIQTtBQVNBO0FBQ0E7QUFDQTtBQUZBO0FBVEE7QUFEQTtBQUNBO0FBaUJBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBREE7QUFDQTtBQWFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQURBO0FBQ0E7QUFhQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFEQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQURBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBREE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUZBO0FBVkE7QUFKQTtBQUNBO0FBcUJBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFSQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFKQTtBQWZBO0FBWEE7QUFEQTtBQXFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQURBO0FBU0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBZkE7QUFrQkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFuQkE7QUFDQTtBQXNCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBUkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFMQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFSQTtBQURBO0FBSkE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXRCQTtBQXlCQTs7O0FBanlCQTtBQTFDQTtBQUNBO0FBeUNBO0FBQ0E7QUFDQTtBQWt5QkE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQURBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2478\n");

/***/ }),

/***/ 2479:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _channel_store = __webpack_require__(34);\n\nvar _channel_store2 = _interopRequireDefault(_channel_store);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _channel_utils = __webpack_require__(123);\n\nvar _utils = __webpack_require__(17);\n\nvar utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar NotifyCounts = function (_React$Component) {\n    (0, _inherits3.default)(NotifyCounts, _React$Component);\n\n    function NotifyCounts(props) {\n        (0, _classCallCheck3.default)(this, NotifyCounts);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (NotifyCounts.__proto__ || (0, _getPrototypeOf2.default)(NotifyCounts)).call(this, props));\n\n        _this.onListenerChange = _this.onListenerChange.bind(_this);\n\n        _this.state = (0, _channel_utils.getCountsStateFromStores)();\n        _this.mounted = false;\n        return _this;\n    }\n\n    (0, _createClass3.default)(NotifyCounts, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.mounted = true;\n            _channel_store2.default.addChangeListener(this.onListenerChange);\n            _team_store2.default.addChangeListener(this.onListenerChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.mounted = false;\n            _channel_store2.default.removeChangeListener(this.onListenerChange);\n            _team_store2.default.removeChangeListener(this.onListenerChange);\n        }\n    }, {\n        key: 'onListenerChange',\n        value: function onListenerChange() {\n            if (this.mounted) {\n                var newState = (0, _channel_utils.getCountsStateFromStores)();\n                if (!utils.areObjectsEqual(newState, this.state)) {\n                    this.setState(newState);\n                }\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (this.state.mentionCount) {\n                return _react2.default.createElement(\n                    'span',\n                    { className: 'badge badge-notify' },\n                    this.state.mentionCount\n                );\n            } else if (this.state.messageCount) {\n                return _react2.default.createElement(\n                    'span',\n                    { className: 'badge badge-notify' },\n                    ''\n                );\n            }\n            return null;\n        }\n    }]);\n    return NotifyCounts;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = NotifyCounts;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3OS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL25vdGlmeV9jb3VudHMuanN4PzYzYzYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgQ2hhbm5lbFN0b3JlIGZyb20gJ3N0b3Jlcy9jaGFubmVsX3N0b3JlLmpzeCc7XG5pbXBvcnQgVGVhbVN0b3JlIGZyb20gJ3N0b3Jlcy90ZWFtX3N0b3JlLmpzeCc7XG5cbmltcG9ydCB7Z2V0Q291bnRzU3RhdGVGcm9tU3RvcmVzfSBmcm9tICd1dGlscy9jaGFubmVsX3V0aWxzLmpzeCc7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RpZnlDb3VudHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLm9uTGlzdGVuZXJDaGFuZ2UgPSB0aGlzLm9uTGlzdGVuZXJDaGFuZ2UuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0gZ2V0Q291bnRzU3RhdGVGcm9tU3RvcmVzKCk7XG4gICAgICAgIHRoaXMubW91bnRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgQ2hhbm5lbFN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMub25MaXN0ZW5lckNoYW5nZSk7XG4gICAgICAgIFRlYW1TdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uTGlzdGVuZXJDaGFuZ2UpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgICAgIENoYW5uZWxTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uTGlzdGVuZXJDaGFuZ2UpO1xuICAgICAgICBUZWFtU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkxpc3RlbmVyQ2hhbmdlKTtcbiAgICB9XG4gICAgb25MaXN0ZW5lckNoYW5nZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubW91bnRlZCkge1xuICAgICAgICAgICAgdmFyIG5ld1N0YXRlID0gZ2V0Q291bnRzU3RhdGVGcm9tU3RvcmVzKCk7XG4gICAgICAgICAgICBpZiAoIXV0aWxzLmFyZU9iamVjdHNFcXVhbChuZXdTdGF0ZSwgdGhpcy5zdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm1lbnRpb25Db3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIDxzcGFuIGNsYXNzTmFtZT0nYmFkZ2UgYmFkZ2Utbm90aWZ5Jz57dGhpcy5zdGF0ZS5tZW50aW9uQ291bnR9PC9zcGFuPjtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLm1lc3NhZ2VDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIDxzcGFuIGNsYXNzTmFtZT0nYmFkZ2UgYmFkZ2Utbm90aWZ5Jz57J+KAoid9PC9zcGFuPjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy9ub3RpZnlfY291bnRzLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7Ozs7O0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBT0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQWxDQTtBQVZBO0FBQ0E7QUFTQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2479\n");

/***/ }),

/***/ 2480:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(33);\n\nvar _quick_switch_modal = __webpack_require__(2481);\n\nvar _quick_switch_modal2 = _interopRequireDefault(_quick_switch_modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapStateToProps(state, ownProps) {\n    return (0, _extends3.default)({}, ownProps, {\n        showTeamSwitcher: false\n    });\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps)(_quick_switch_modal2.default);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4MC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3F1aWNrX3N3aXRjaF9tb2RhbC9pbmRleC5qcz8xYWZkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNyBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCB7Y29ubmVjdH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuXG5pbXBvcnQgUXVpY2tTd2l0Y2hNb2RhbCBmcm9tICcuL3F1aWNrX3N3aXRjaF9tb2RhbC5qc3gnO1xuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUsIG93blByb3BzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ub3duUHJvcHMsXG4gICAgICAgIHNob3dUZWFtU3dpdGNoZXI6IGZhbHNlXG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMpKFF1aWNrU3dpdGNoTW9kYWwpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvcXVpY2tfc3dpdGNoX21vZGFsL2luZGV4LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBTkE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBRkE7QUFJQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2480\n");

/***/ }),

/***/ 2481:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _es = __webpack_require__(45);\n\nvar _channels = __webpack_require__(137);\n\nvar _channel_actions = __webpack_require__(80);\n\nvar _redux_store = __webpack_require__(39);\n\nvar _redux_store2 = _interopRequireDefault(_redux_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _user_agent = __webpack_require__(90);\n\nvar UserAgent = _interopRequireWildcard(_user_agent);\n\nvar _suggestion_box = __webpack_require__(463);\n\nvar _suggestion_box2 = _interopRequireDefault(_suggestion_box);\n\nvar _suggestion_list = __webpack_require__(464);\n\nvar _suggestion_list2 = _interopRequireDefault(_suggestion_list);\n\nvar _switch_channel_provider = __webpack_require__(2482);\n\nvar _switch_channel_provider2 = _interopRequireDefault(_switch_channel_provider);\n\nvar _switch_team_provider = __webpack_require__(2483);\n\nvar _switch_team_provider2 = _interopRequireDefault(_switch_team_provider);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getState = _redux_store2.default.getState; // Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar CHANNEL_MODE = 'channel';\nvar TEAM_MODE = 'team';\n\nvar QuickSwitchModal = function (_React$PureComponent) {\n    (0, _inherits3.default)(QuickSwitchModal, _React$PureComponent);\n\n    function QuickSwitchModal(props) {\n        (0, _classCallCheck3.default)(this, QuickSwitchModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (QuickSwitchModal.__proto__ || (0, _getPrototypeOf2.default)(QuickSwitchModal)).call(this, props));\n\n        _this.onChange = _this.onChange.bind(_this);\n        _this.onShow = _this.onShow.bind(_this);\n        _this.onHide = _this.onHide.bind(_this);\n        _this.onExited = _this.onExited.bind(_this);\n        _this.handleKeyDown = _this.handleKeyDown.bind(_this);\n        _this.handleSubmit = _this.handleSubmit.bind(_this);\n        _this.switchToChannel = _this.switchToChannel.bind(_this);\n        _this.switchMode = _this.switchMode.bind(_this);\n        _this.focusTextbox = _this.focusTextbox.bind(_this);\n\n        _this.enableChannelProvider = _this.enableChannelProvider.bind(_this);\n        _this.enableTeamProvider = _this.enableTeamProvider.bind(_this);\n        _this.channelProviders = [new _switch_channel_provider2.default()];\n        _this.teamProviders = [new _switch_team_provider2.default()];\n\n        _this.state = {\n            text: '',\n            mode: props.initialMode\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(QuickSwitchModal, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            if (this.props.show && !prevProps.show) {\n                this.focusTextbox();\n            }\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (!this.props.show && nextProps.show) {\n                this.setState({ mode: nextProps.initialMode, text: '' });\n            }\n        }\n    }, {\n        key: 'focusTextbox',\n        value: function focusTextbox() {\n            if (this.refs.switchbox == null) {\n                return;\n            }\n\n            var textbox = this.refs.switchbox.getTextbox();\n            textbox.focus();\n            Utils.placeCaretAtEnd(textbox);\n        }\n    }, {\n        key: 'onShow',\n        value: function onShow() {\n            this.setState({\n                text: ''\n            });\n        }\n    }, {\n        key: 'onHide',\n        value: function onHide() {\n            this.setState({\n                text: ''\n            });\n            this.props.onHide();\n        }\n    }, {\n        key: 'onExited',\n        value: function onExited() {\n            if (!UserAgent.isMobile()) {\n                setTimeout(function () {\n                    document.querySelector('#post_textbox').focus();\n                });\n            }\n        }\n    }, {\n        key: 'onChange',\n        value: function onChange(e) {\n            this.setState({ text: e.target.value });\n        }\n    }, {\n        key: 'handleKeyDown',\n        value: function handleKeyDown(e) {\n            if (e.keyCode === _constants2.default.KeyCodes.TAB) {\n                e.preventDefault();\n                this.switchMode();\n            }\n        }\n    }, {\n        key: 'handleSubmit',\n        value: function handleSubmit(selected) {\n            var _this2 = this;\n\n            var channel = null;\n\n            if (!selected) {\n                return;\n            }\n\n            if (this.state.mode === CHANNEL_MODE) {\n                var selectedChannel = selected.channel;\n                if (selectedChannel.type === _constants2.default.DM_CHANNEL) {\n                    (0, _channel_actions.openDirectChannelToUser)(selectedChannel.id, function (ch) {\n                        channel = ch;\n                        _this2.switchToChannel(channel);\n                    }, function () {\n                        channel = null;\n                        _this2.switchToChannel(channel);\n                    });\n                } else if (selectedChannel.type === _constants2.default.GM_CHANNEL) {\n                    channel = (0, _channels.getChannel)(getState(), selectedChannel.id);\n                    this.switchToChannel(channel);\n                } else {\n                    this.switchToChannel(selectedChannel);\n                }\n            } else {\n                _es.browserHistory.push('/' + selected.name);\n                this.onHide();\n            }\n        }\n    }, {\n        key: 'switchToChannel',\n        value: function switchToChannel(channel) {\n            if (channel != null) {\n                (0, _channel_actions.goToChannel)(channel);\n                this.onHide();\n            }\n        }\n    }, {\n        key: 'enableChannelProvider',\n        value: function enableChannelProvider() {\n            this.channelProviders[0].disableDispatches = false;\n            this.teamProviders[0].disableDispatches = true;\n        }\n    }, {\n        key: 'enableTeamProvider',\n        value: function enableTeamProvider() {\n            this.teamProviders[0].disableDispatches = false;\n            this.channelProviders[0].disableDispatches = true;\n        }\n    }, {\n        key: 'switchMode',\n        value: function switchMode() {\n            if (this.state.mode === CHANNEL_MODE && this.props.showTeamSwitcher) {\n                this.enableTeamProvider();\n                this.setState({ mode: TEAM_MODE });\n            } else if (this.state.mode === TEAM_MODE) {\n                this.enableChannelProvider();\n                this.setState({ mode: CHANNEL_MODE });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this3 = this;\n\n            var providers = this.channelProviders;\n            var header = void 0;\n            var renderDividers = true;\n\n            var channelShortcut = 'quick_switch_modal.channelsShortcut.windows';\n            var defaultChannelShortcut = 'CTRL+K';\n            if (Utils.isMac()) {\n                channelShortcut = 'quick_switch_modal.channelsShortcut.mac';\n                defaultChannelShortcut = 'CMD+K';\n            }\n\n            var teamShortcut = 'quick_switch_modal.teamsShortcut.windows';\n            var defaultTeamShortcut = 'CTRL+ALT+K';\n            if (Utils.isMac()) {\n                teamShortcut = 'quick_switch_modal.teamsShortcut.mac';\n                defaultTeamShortcut = 'CMD+ALT+K';\n            }\n\n            if (this.props.showTeamSwitcher) {\n                var channelsActiveClass = '';\n                var teamsActiveClass = '';\n                if (this.state.mode === TEAM_MODE) {\n                    providers = this.teamProviders;\n                    renderDividers = false;\n                    teamsActiveClass = 'active';\n                } else {\n                    channelsActiveClass = 'active';\n                }\n\n                header = _react2.default.createElement(\n                    'div',\n                    { className: 'nav nav-tabs' },\n                    _react2.default.createElement(\n                        'li',\n                        { className: channelsActiveClass },\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                href: '#',\n                                onClick: function onClick(e) {\n                                    e.preventDefault();\n                                    _this3.enableChannelProvider();\n                                    _this3.setState({ mode: 'channel' });\n                                    _this3.focusTextbox();\n                                }\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'quick_switch_modal.channels',\n                                defaultMessage: 'Channels'\n                            }),\n                            _react2.default.createElement(\n                                'span',\n                                { className: 'small' },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: channelShortcut,\n                                    defaultMessage: defaultChannelShortcut\n                                })\n                            )\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'li',\n                        { className: teamsActiveClass },\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                href: '#',\n                                onClick: function onClick(e) {\n                                    e.preventDefault();\n                                    _this3.enableTeamProvider();\n                                    _this3.setState({ mode: 'team' });\n                                    _this3.focusTextbox();\n                                }\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'quick_switch_modal.teams',\n                                defaultMessage: 'Teams'\n                            }),\n                            _react2.default.createElement(\n                                'span',\n                                { className: 'small' },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: teamShortcut,\n                                    defaultMessage: defaultTeamShortcut\n                                })\n                            )\n                        )\n                    )\n                );\n            }\n\n            var help = void 0;\n            if (Utils.isMobile()) {\n                help = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'quick_switch_modal.help_mobile',\n                    defaultMessage: 'Type to find a channel.'\n                });\n            } else if (this.props.showTeamSwitcher) {\n                help = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'quick_switch_modal.help',\n                    defaultMessage: 'Start typing then use TAB to toggle channels/teams, \\u2191\\u2193 to browse, \\u21B5 to select, and ESC to dismiss.'\n                });\n            } else {\n                help = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'quick_switch_modal.help_no_team',\n                    defaultMessage: 'Type to find a channel. Use \\u2191\\u2193 to browse, \\u21B5 to select, ESC to dismiss.'\n                });\n            }\n\n            return _react2.default.createElement(\n                _reactBootstrap.Modal,\n                {\n                    dialogClassName: 'channel-switch-modal modal--overflow',\n                    ref: 'modal',\n                    show: this.props.show,\n                    onHide: this.onHide,\n                    onExited: this.onExited\n                },\n                _react2.default.createElement(_reactBootstrap.Modal.Header, { closeButton: true }),\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Body,\n                    null,\n                    header,\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'modal__hint' },\n                        help\n                    ),\n                    _react2.default.createElement(_suggestion_box2.default, {\n                        ref: 'switchbox',\n                        className: 'form-control focused',\n                        type: 'input',\n                        onChange: this.onChange,\n                        value: this.state.text,\n                        onKeyDown: this.handleKeyDown,\n                        onItemSelected: this.handleSubmit,\n                        listComponent: _suggestion_list2.default,\n                        maxLength: '64',\n                        providers: providers,\n                        listStyle: 'bottom',\n                        completeOnTab: false,\n                        renderDividers: renderDividers\n                    })\n                )\n            );\n        }\n    }]);\n    return QuickSwitchModal;\n}(_react2.default.PureComponent);\n\nQuickSwitchModal.propTypes = {\n\n    /**\n     * The mode to start in when showing the modal, either 'channel' or 'team'\n     */\n    initialMode: _propTypes2.default.string.isRequired,\n\n    /**\n     * Set to show the modal\n     */\n    show: _propTypes2.default.bool.isRequired,\n\n    /**\n     * The function called to hide the modal\n     */\n    onHide: _propTypes2.default.func.isRequired,\n\n    /**\n     * Set to show team switcher\n     */\n    showTeamSwitcher: _propTypes2.default.bool\n};\nQuickSwitchModal.defaultProps = {\n    initialMode: CHANNEL_MODE\n};\nexports.default = QuickSwitchModal;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4MS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3F1aWNrX3N3aXRjaF9tb2RhbC9xdWlja19zd2l0Y2hfbW9kYWwuanN4PzZiYTUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE2LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7TW9kYWx9IGZyb20gJ3JlYWN0LWJvb3RzdHJhcCc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuaW1wb3J0IHticm93c2VySGlzdG9yeX0gZnJvbSAncmVhY3Qtcm91dGVyL2VzNic7XG5cbmltcG9ydCB7Z2V0Q2hhbm5lbH0gZnJvbSAnbWF0dGVybW9zdC1yZWR1eC9zZWxlY3RvcnMvZW50aXRpZXMvY2hhbm5lbHMnO1xuXG5pbXBvcnQge2dvVG9DaGFubmVsLCBvcGVuRGlyZWN0Q2hhbm5lbFRvVXNlcn0gZnJvbSAnYWN0aW9ucy9jaGFubmVsX2FjdGlvbnMuanN4JztcbmltcG9ydCBzdG9yZSBmcm9tICdzdG9yZXMvcmVkdXhfc3RvcmUuanN4JztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5pbXBvcnQgKiBhcyBVc2VyQWdlbnQgZnJvbSAndXRpbHMvdXNlcl9hZ2VudC5qc3gnO1xuXG5pbXBvcnQgU3VnZ2VzdGlvbkJveCBmcm9tICdjb21wb25lbnRzL3N1Z2dlc3Rpb24vc3VnZ2VzdGlvbl9ib3guanN4JztcbmltcG9ydCBTdWdnZXN0aW9uTGlzdCBmcm9tICdjb21wb25lbnRzL3N1Z2dlc3Rpb24vc3VnZ2VzdGlvbl9saXN0LmpzeCc7XG5pbXBvcnQgU3dpdGNoQ2hhbm5lbFByb3ZpZGVyIGZyb20gJ2NvbXBvbmVudHMvc3VnZ2VzdGlvbi9zd2l0Y2hfY2hhbm5lbF9wcm92aWRlci5qc3gnO1xuaW1wb3J0IFN3aXRjaFRlYW1Qcm92aWRlciBmcm9tICdjb21wb25lbnRzL3N1Z2dlc3Rpb24vc3dpdGNoX3RlYW1fcHJvdmlkZXIuanN4JztcblxuY29uc3QgZ2V0U3RhdGUgPSBzdG9yZS5nZXRTdGF0ZTtcblxuY29uc3QgQ0hBTk5FTF9NT0RFID0gJ2NoYW5uZWwnO1xuY29uc3QgVEVBTV9NT0RFID0gJ3RlYW0nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBRdWlja1N3aXRjaE1vZGFsIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1vZGUgdG8gc3RhcnQgaW4gd2hlbiBzaG93aW5nIHRoZSBtb2RhbCwgZWl0aGVyICdjaGFubmVsJyBvciAndGVhbSdcbiAgICAgICAgICovXG4gICAgICAgIGluaXRpYWxNb2RlOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0byBzaG93IHRoZSBtb2RhbFxuICAgICAgICAgKi9cbiAgICAgICAgc2hvdzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGZ1bmN0aW9uIGNhbGxlZCB0byBoaWRlIHRoZSBtb2RhbFxuICAgICAgICAgKi9cbiAgICAgICAgb25IaWRlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdG8gc2hvdyB0ZWFtIHN3aXRjaGVyXG4gICAgICAgICAqL1xuICAgICAgICBzaG93VGVhbVN3aXRjaGVyOiBQcm9wVHlwZXMuYm9vbFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGluaXRpYWxNb2RlOiBDSEFOTkVMX01PREVcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblNob3cgPSB0aGlzLm9uU2hvdy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uSGlkZSA9IHRoaXMub25IaWRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25FeGl0ZWQgPSB0aGlzLm9uRXhpdGVkLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlS2V5RG93biA9IHRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IHRoaXMuaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3dpdGNoVG9DaGFubmVsID0gdGhpcy5zd2l0Y2hUb0NoYW5uZWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zd2l0Y2hNb2RlID0gdGhpcy5zd2l0Y2hNb2RlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZm9jdXNUZXh0Ym94ID0gdGhpcy5mb2N1c1RleHRib3guYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmVuYWJsZUNoYW5uZWxQcm92aWRlciA9IHRoaXMuZW5hYmxlQ2hhbm5lbFByb3ZpZGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZW5hYmxlVGVhbVByb3ZpZGVyID0gdGhpcy5lbmFibGVUZWFtUHJvdmlkZXIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jaGFubmVsUHJvdmlkZXJzID0gW25ldyBTd2l0Y2hDaGFubmVsUHJvdmlkZXIoKV07XG4gICAgICAgIHRoaXMudGVhbVByb3ZpZGVycyA9IFtuZXcgU3dpdGNoVGVhbVByb3ZpZGVyKCldO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICB0ZXh0OiAnJyxcbiAgICAgICAgICAgIG1vZGU6IHByb3BzLmluaXRpYWxNb2RlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcykge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5zaG93ICYmICFwcmV2UHJvcHMuc2hvdykge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1RleHRib3goKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5zaG93ICYmIG5leHRQcm9wcy5zaG93KSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHttb2RlOiBuZXh0UHJvcHMuaW5pdGlhbE1vZGUsIHRleHQ6ICcnfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb2N1c1RleHRib3goKSB7XG4gICAgICAgIGlmICh0aGlzLnJlZnMuc3dpdGNoYm94ID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRleHRib3ggPSB0aGlzLnJlZnMuc3dpdGNoYm94LmdldFRleHRib3goKTtcbiAgICAgICAgdGV4dGJveC5mb2N1cygpO1xuICAgICAgICBVdGlscy5wbGFjZUNhcmV0QXRFbmQodGV4dGJveCk7XG4gICAgfVxuXG4gICAgb25TaG93KCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHRleHQ6ICcnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uSGlkZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICB0ZXh0OiAnJ1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkhpZGUoKTtcbiAgICB9XG5cbiAgICBvbkV4aXRlZCgpIHtcbiAgICAgICAgaWYgKCFVc2VyQWdlbnQuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Bvc3RfdGV4dGJveCcpLmZvY3VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2hhbmdlKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dGV4dDogZS50YXJnZXQudmFsdWV9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gQ29uc3RhbnRzLktleUNvZGVzLlRBQikge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5zd2l0Y2hNb2RlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVTdWJtaXQoc2VsZWN0ZWQpIHtcbiAgICAgICAgbGV0IGNoYW5uZWwgPSBudWxsO1xuXG4gICAgICAgIGlmICghc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm1vZGUgPT09IENIQU5ORUxfTU9ERSkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRDaGFubmVsID0gc2VsZWN0ZWQuY2hhbm5lbDtcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZENoYW5uZWwudHlwZSA9PT0gQ29uc3RhbnRzLkRNX0NIQU5ORUwpIHtcbiAgICAgICAgICAgICAgICBvcGVuRGlyZWN0Q2hhbm5lbFRvVXNlcihcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDaGFubmVsLmlkLFxuICAgICAgICAgICAgICAgICAgICAoY2gpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWwgPSBjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoVG9DaGFubmVsKGNoYW5uZWwpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFubmVsID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoVG9DaGFubmVsKGNoYW5uZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRDaGFubmVsLnR5cGUgPT09IENvbnN0YW50cy5HTV9DSEFOTkVMKSB7XG4gICAgICAgICAgICAgICAgY2hhbm5lbCA9IGdldENoYW5uZWwoZ2V0U3RhdGUoKSwgc2VsZWN0ZWRDaGFubmVsLmlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaFRvQ2hhbm5lbChjaGFubmVsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hUb0NoYW5uZWwoc2VsZWN0ZWRDaGFubmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJyb3dzZXJIaXN0b3J5LnB1c2goJy8nICsgc2VsZWN0ZWQubmFtZSk7XG4gICAgICAgICAgICB0aGlzLm9uSGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoVG9DaGFubmVsKGNoYW5uZWwpIHtcbiAgICAgICAgaWYgKGNoYW5uZWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgZ29Ub0NoYW5uZWwoY2hhbm5lbCk7XG4gICAgICAgICAgICB0aGlzLm9uSGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZW5hYmxlQ2hhbm5lbFByb3ZpZGVyKCkge1xuICAgICAgICB0aGlzLmNoYW5uZWxQcm92aWRlcnNbMF0uZGlzYWJsZURpc3BhdGNoZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50ZWFtUHJvdmlkZXJzWzBdLmRpc2FibGVEaXNwYXRjaGVzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBlbmFibGVUZWFtUHJvdmlkZXIoKSB7XG4gICAgICAgIHRoaXMudGVhbVByb3ZpZGVyc1swXS5kaXNhYmxlRGlzcGF0Y2hlcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNoYW5uZWxQcm92aWRlcnNbMF0uZGlzYWJsZURpc3BhdGNoZXMgPSB0cnVlO1xuICAgIH1cblxuICAgIHN3aXRjaE1vZGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm1vZGUgPT09IENIQU5ORUxfTU9ERSAmJiB0aGlzLnByb3BzLnNob3dUZWFtU3dpdGNoZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlVGVhbVByb3ZpZGVyKCk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHttb2RlOiBURUFNX01PREV9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLm1vZGUgPT09IFRFQU1fTU9ERSkge1xuICAgICAgICAgICAgdGhpcy5lbmFibGVDaGFubmVsUHJvdmlkZXIoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe21vZGU6IENIQU5ORUxfTU9ERX0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgcHJvdmlkZXJzID0gdGhpcy5jaGFubmVsUHJvdmlkZXJzO1xuICAgICAgICBsZXQgaGVhZGVyO1xuICAgICAgICBsZXQgcmVuZGVyRGl2aWRlcnMgPSB0cnVlO1xuXG4gICAgICAgIGxldCBjaGFubmVsU2hvcnRjdXQgPSAncXVpY2tfc3dpdGNoX21vZGFsLmNoYW5uZWxzU2hvcnRjdXQud2luZG93cyc7XG4gICAgICAgIGxldCBkZWZhdWx0Q2hhbm5lbFNob3J0Y3V0ID0gJ0NUUkwrSyc7XG4gICAgICAgIGlmIChVdGlscy5pc01hYygpKSB7XG4gICAgICAgICAgICBjaGFubmVsU2hvcnRjdXQgPSAncXVpY2tfc3dpdGNoX21vZGFsLmNoYW5uZWxzU2hvcnRjdXQubWFjJztcbiAgICAgICAgICAgIGRlZmF1bHRDaGFubmVsU2hvcnRjdXQgPSAnQ01EK0snO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRlYW1TaG9ydGN1dCA9ICdxdWlja19zd2l0Y2hfbW9kYWwudGVhbXNTaG9ydGN1dC53aW5kb3dzJztcbiAgICAgICAgbGV0IGRlZmF1bHRUZWFtU2hvcnRjdXQgPSAnQ1RSTCtBTFQrSyc7XG4gICAgICAgIGlmIChVdGlscy5pc01hYygpKSB7XG4gICAgICAgICAgICB0ZWFtU2hvcnRjdXQgPSAncXVpY2tfc3dpdGNoX21vZGFsLnRlYW1zU2hvcnRjdXQubWFjJztcbiAgICAgICAgICAgIGRlZmF1bHRUZWFtU2hvcnRjdXQgPSAnQ01EK0FMVCtLJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNob3dUZWFtU3dpdGNoZXIpIHtcbiAgICAgICAgICAgIGxldCBjaGFubmVsc0FjdGl2ZUNsYXNzID0gJyc7XG4gICAgICAgICAgICBsZXQgdGVhbXNBY3RpdmVDbGFzcyA9ICcnO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUubW9kZSA9PT0gVEVBTV9NT0RFKSB7XG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzID0gdGhpcy50ZWFtUHJvdmlkZXJzO1xuICAgICAgICAgICAgICAgIHJlbmRlckRpdmlkZXJzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGVhbXNBY3RpdmVDbGFzcyA9ICdhY3RpdmUnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjaGFubmVsc0FjdGl2ZUNsYXNzID0gJ2FjdGl2ZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGhlYWRlciA9IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbmF2IG5hdi10YWJzJz5cbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT17Y2hhbm5lbHNBY3RpdmVDbGFzc30+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9JyMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUNoYW5uZWxQcm92aWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHttb2RlOiAnY2hhbm5lbCd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c1RleHRib3goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdxdWlja19zd2l0Y2hfbW9kYWwuY2hhbm5lbHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDaGFubmVscydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nc21hbGwnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2NoYW5uZWxTaG9ydGN1dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPXtkZWZhdWx0Q2hhbm5lbFNob3J0Y3V0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT17dGVhbXNBY3RpdmVDbGFzc30+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9JyMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZVRlYW1Qcm92aWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHttb2RlOiAndGVhbSd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c1RleHRib3goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdxdWlja19zd2l0Y2hfbW9kYWwudGVhbXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUZWFtcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nc21hbGwnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e3RlYW1TaG9ydGN1dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPXtkZWZhdWx0VGVhbVNob3J0Y3V0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVscDtcbiAgICAgICAgaWYgKFV0aWxzLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgIGhlbHAgPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3F1aWNrX3N3aXRjaF9tb2RhbC5oZWxwX21vYmlsZSdcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1R5cGUgdG8gZmluZCBhIGNoYW5uZWwuJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuc2hvd1RlYW1Td2l0Y2hlcikge1xuICAgICAgICAgICAgaGVscCA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ncXVpY2tfc3dpdGNoX21vZGFsLmhlbHAnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTdGFydCB0eXBpbmcgdGhlbiB1c2UgVEFCIHRvIHRvZ2dsZSBjaGFubmVscy90ZWFtcywg4oaR4oaTIHRvIGJyb3dzZSwg4oa1IHRvIHNlbGVjdCwgYW5kIEVTQyB0byBkaXNtaXNzLidcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhlbHAgPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3F1aWNrX3N3aXRjaF9tb2RhbC5oZWxwX25vX3RlYW0nXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUeXBlIHRvIGZpbmQgYSBjaGFubmVsLiBVc2Ug4oaR4oaTIHRvIGJyb3dzZSwg4oa1IHRvIHNlbGVjdCwgRVNDIHRvIGRpc21pc3MuJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzTmFtZT0nY2hhbm5lbC1zd2l0Y2gtbW9kYWwgbW9kYWwtLW92ZXJmbG93J1xuICAgICAgICAgICAgICAgIHJlZj0nbW9kYWwnXG4gICAgICAgICAgICAgICAgc2hvdz17dGhpcy5wcm9wcy5zaG93fVxuICAgICAgICAgICAgICAgIG9uSGlkZT17dGhpcy5vbkhpZGV9XG4gICAgICAgICAgICAgICAgb25FeGl0ZWQ9e3RoaXMub25FeGl0ZWR9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPE1vZGFsLkhlYWRlciBjbG9zZUJ1dHRvbj17dHJ1ZX0vPlxuICAgICAgICAgICAgICAgIDxNb2RhbC5Cb2R5PlxuICAgICAgICAgICAgICAgICAgICB7aGVhZGVyfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbW9kYWxfX2hpbnQnPlxuICAgICAgICAgICAgICAgICAgICAgICAge2hlbHB9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8U3VnZ2VzdGlvbkJveFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSdzd2l0Y2hib3gnXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tY29udHJvbCBmb2N1c2VkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0naW5wdXQnXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnRleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlS2V5RG93bn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uSXRlbVNlbGVjdGVkPXt0aGlzLmhhbmRsZVN1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RDb21wb25lbnQ9e1N1Z2dlc3Rpb25MaXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoPSc2NCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVycz17cHJvdmlkZXJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFN0eWxlPSdib3R0b20nXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZU9uVGFiPXtmYWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckRpdmlkZXJzPXtyZW5kZXJEaXZpZGVyc31cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L01vZGFsLkJvZHk+XG4gICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3F1aWNrX3N3aXRjaF9tb2RhbC9xdWlja19zd2l0Y2hfbW9kYWwuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTtBQXRCQTtBQUNBO0FBdUJBO0FBQ0E7QUFDQTtBQUNBOzs7QUE0QkE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBbEJBO0FBc0JBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFiQTtBQURBO0FBc0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFiQTtBQURBO0FBdkJBO0FBK0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQUxBO0FBUkE7QUErQkE7OztBQTlTQTtBQUNBO0FBREE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQXBCQTtBQURBO0FBeUJBO0FBREE7QUF4QkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2481\n");

/***/ }),

/***/ 2482:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _keys = __webpack_require__(60);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getIterator2 = __webpack_require__(49);\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _regenerator = __webpack_require__(77);\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = __webpack_require__(78);\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _assign = __webpack_require__(42);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _client = __webpack_require__(31);\n\nvar _constants = __webpack_require__(26);\n\nvar _channels = __webpack_require__(137);\n\nvar _preferences = __webpack_require__(67);\n\nvar _teams = __webpack_require__(122);\n\nvar _users = __webpack_require__(51);\n\nvar _app_dispatcher = __webpack_require__(36);\n\nvar _app_dispatcher2 = _interopRequireDefault(_app_dispatcher);\n\nvar _redux_store = __webpack_require__(39);\n\nvar _redux_store2 = _interopRequireDefault(_redux_store);\n\nvar _channel_utils = __webpack_require__(123);\n\nvar _constants2 = __webpack_require__(10);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _provider = __webpack_require__(241);\n\nvar _provider2 = _interopRequireDefault(_provider);\n\nvar _suggestion = __webpack_require__(186);\n\nvar _suggestion2 = _interopRequireDefault(_suggestion);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar getState = _redux_store2.default.getState;\n\nvar SwitchChannelSuggestion = function (_Suggestion) {\n    (0, _inherits3.default)(SwitchChannelSuggestion, _Suggestion);\n\n    function SwitchChannelSuggestion() {\n        (0, _classCallCheck3.default)(this, SwitchChannelSuggestion);\n        return (0, _possibleConstructorReturn3.default)(this, (SwitchChannelSuggestion.__proto__ || (0, _getPrototypeOf2.default)(SwitchChannelSuggestion)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(SwitchChannelSuggestion, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                item = _props.item,\n                isSelection = _props.isSelection;\n\n            var channel = item.channel;\n            var globeIcon = _constants2.Constants.GLOBE_ICON_SVG;\n            var lockIcon = _constants2.Constants.LOCK_ICON_SVG;\n\n            var className = 'mentions__name';\n            if (isSelection) {\n                className += ' suggestion--selected';\n            }\n\n            var displayName = channel.display_name;\n            var icon = null;\n            if (channel.type === _constants2.Constants.OPEN_CHANNEL) {\n                icon = _react2.default.createElement('span', {\n                    className: 'icon icon__globe icon--body',\n                    dangerouslySetInnerHTML: { __html: globeIcon }\n                });\n            } else if (channel.type === _constants2.Constants.PRIVATE_CHANNEL) {\n                icon = _react2.default.createElement('span', {\n                    className: 'icon icon__lock icon--body',\n                    dangerouslySetInnerHTML: { __html: lockIcon }\n                });\n            } else if (channel.type === _constants2.Constants.GM_CHANNEL) {\n                displayName = (0, _channel_utils.getChannelDisplayName)(channel);\n                icon = _react2.default.createElement(\n                    'div',\n                    { className: 'status status--group' },\n                    'G'\n                );\n            } else {\n                icon = _react2.default.createElement(\n                    'div',\n                    { className: 'pull-left' },\n                    _react2.default.createElement('img', {\n                        className: 'mention__image',\n                        src: Utils.imageURLForUser(channel)\n                    })\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    onClick: this.handleClick,\n                    className: className\n                },\n                icon,\n                displayName\n            );\n        }\n    }]);\n    return SwitchChannelSuggestion;\n}(_suggestion2.default);\n\nvar prefix = '';\n\nfunction quickSwitchSorter(wrappedA, wrappedB) {\n    if (wrappedA.type === _constants2.Constants.MENTION_CHANNELS && wrappedB.type === _constants2.Constants.MENTION_MORE_CHANNELS) {\n        return -1;\n    } else if (wrappedB.type === _constants2.Constants.MENTION_CHANNELS && wrappedA.type === _constants2.Constants.MENTION_MORE_CHANNELS) {\n        return 1;\n    }\n\n    var a = wrappedA.channel;\n    var b = wrappedB.channel;\n\n    var aDisplayName = (0, _channel_utils.getChannelDisplayName)(a).toLowerCase();\n    var bDisplayName = (0, _channel_utils.getChannelDisplayName)(b).toLowerCase();\n\n    if (a.type === _constants2.Constants.DM_CHANNEL) {\n        aDisplayName = aDisplayName.substring(1);\n    }\n\n    if (b.type === _constants2.Constants.DM_CHANNEL) {\n        bDisplayName = bDisplayName.substring(1);\n    }\n\n    var aStartsWith = aDisplayName.startsWith(prefix);\n    var bStartsWith = bDisplayName.startsWith(prefix);\n    if (aStartsWith && bStartsWith) {\n        return (0, _channel_utils.sortChannelsByDisplayName)(a, b);\n    } else if (!aStartsWith && !bStartsWith) {\n        return (0, _channel_utils.sortChannelsByDisplayName)(a, b);\n    } else if (aStartsWith) {\n        return -1;\n    }\n\n    return 1;\n}\n\nvar SwitchChannelProvider = function (_Provider) {\n    (0, _inherits3.default)(SwitchChannelProvider, _Provider);\n\n    function SwitchChannelProvider() {\n        (0, _classCallCheck3.default)(this, SwitchChannelProvider);\n        return (0, _possibleConstructorReturn3.default)(this, (SwitchChannelProvider.__proto__ || (0, _getPrototypeOf2.default)(SwitchChannelProvider)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(SwitchChannelProvider, [{\n        key: 'handlePretextChanged',\n        value: function handlePretextChanged(suggestionId, channelPrefix) {\n            if (channelPrefix) {\n                prefix = channelPrefix;\n                this.startNewRequest(suggestionId, channelPrefix);\n\n                // Dispatch suggestions for local data\n                var channels = (0, _channels.getChannelsInCurrentTeam)(getState()).concat((0, _channels.getGroupChannels)(getState()));\n                var users = (0, _assign2.default)([], (0, _users.searchProfiles)(getState(), channelPrefix, true));\n                this.formatChannelsAndDispatch(channelPrefix, suggestionId, channels, users, true);\n\n                // Fetch data from the server and dispatch\n                this.fetchUsersAndChannels(channelPrefix, suggestionId);\n\n                return true;\n            }\n\n            return false;\n        }\n    }, {\n        key: 'fetchUsersAndChannels',\n        value: function () {\n            var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(channelPrefix, suggestionId) {\n                var teamId, usersAsync, channelsAsync, usersFromServer, channelsFromServer, users, channels;\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                teamId = '';\n\n                                if (global.window.mm_config.RestrictDirectMessage === 'team') {\n                                    teamId = _redux_store2.default.getState().entities.teams.currentTeamId;\n                                }\n                                usersAsync = _client.Client4.autocompleteUsers(channelPrefix, teamId, '');\n                                channelsAsync = _client.Client4.searchChannels((0, _teams.getCurrentTeamId)(getState()), channelPrefix);\n                                usersFromServer = [];\n                                channelsFromServer = [];\n                                _context.prev = 6;\n                                _context.next = 9;\n                                return usersAsync;\n\n                            case 9:\n                                usersFromServer = _context.sent;\n                                _context.next = 12;\n                                return channelsAsync;\n\n                            case 12:\n                                channelsFromServer = _context.sent;\n                                _context.next = 18;\n                                break;\n\n                            case 15:\n                                _context.prev = 15;\n                                _context.t0 = _context['catch'](6);\n\n                                _app_dispatcher2.default.handleServerAction({\n                                    type: _constants2.ActionTypes.RECEIVED_ERROR,\n                                    err: _context.t0\n                                });\n\n                            case 18:\n                                if (!this.shouldCancelDispatch(channelPrefix)) {\n                                    _context.next = 20;\n                                    break;\n                                }\n\n                                return _context.abrupt('return');\n\n                            case 20:\n                                users = (0, _assign2.default)([], (0, _users.searchProfiles)(getState(), channelPrefix, true), usersFromServer.users);\n                                channels = (0, _channels.getChannelsInCurrentTeam)(getState()).concat((0, _channels.getGroupChannels)(getState())).concat(channelsFromServer);\n\n                                this.formatChannelsAndDispatch(channelPrefix, suggestionId, channels, users);\n\n                            case 23:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, this, [[6, 15]]);\n            }));\n\n            function fetchUsersAndChannels(_x, _x2) {\n                return _ref.apply(this, arguments);\n            }\n\n            return fetchUsersAndChannels;\n        }()\n    }, {\n        key: 'formatChannelsAndDispatch',\n        value: function formatChannelsAndDispatch(channelPrefix, suggestionId, allChannels, users) {\n            var skipNotInChannel = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n            var channels = [];\n            var members = (0, _channels.getMyChannelMemberships)(getState());\n\n            if (this.shouldCancelDispatch(channelPrefix)) {\n                return;\n            }\n\n            var currentId = (0, _users.getCurrentUserId)(getState());\n\n            var completedChannels = {};\n\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = (0, _getIterator3.default)((0, _keys2.default)(allChannels)), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var id = _step.value;\n\n                    var channel = allChannels[id];\n\n                    if (completedChannels[channel.id]) {\n                        continue;\n                    }\n\n                    var member = members[channel.id];\n\n                    if (channel.display_name.toLowerCase().indexOf(channelPrefix.toLowerCase()) !== -1) {\n                        var newChannel = (0, _assign2.default)({}, channel);\n                        var _wrappedChannel = { channel: newChannel, name: newChannel.name };\n                        if (newChannel.type === _constants2.Constants.GM_CHANNEL) {\n                            newChannel.name = (0, _channel_utils.getChannelDisplayName)(newChannel);\n                            _wrappedChannel.name = newChannel.name;\n                            var isGMVisible = (0, _preferences.getBool)(getState(), _constants.Preferences.CATEGORY_GROUP_CHANNEL_SHOW, newChannel.id, false);\n                            if (isGMVisible) {\n                                _wrappedChannel.type = _constants2.Constants.MENTION_CHANNELS;\n                            } else {\n                                _wrappedChannel.type = _constants2.Constants.MENTION_MORE_CHANNELS;\n                                if (skipNotInChannel) {\n                                    continue;\n                                }\n                            }\n                        } else if (member) {\n                            _wrappedChannel.type = _constants2.Constants.MENTION_CHANNELS;\n                        } else {\n                            _wrappedChannel.type = _constants2.Constants.MENTION_MORE_CHANNELS;\n                            if (skipNotInChannel || !newChannel.display_name.toLowerCase().startsWith(channelPrefix)) {\n                                continue;\n                            }\n                        }\n\n                        completedChannels[channel.id] = true;\n                        channels.push(_wrappedChannel);\n                    }\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            for (var i = 0; i < users.length; i++) {\n                var user = users[i];\n\n                if (completedChannels[user.id]) {\n                    continue;\n                }\n\n                var isDMVisible = (0, _preferences.getBool)(getState(), _constants.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW, user.id, false);\n                var displayName = '@' + user.username + ' ';\n\n                if (user.id === currentId) {\n                    continue;\n                }\n\n                if ((user.first_name || user.last_name) && user.nickname) {\n                    displayName += '- ' + Utils.getFullName(user) + ' (' + user.nickname + ')';\n                } else if (user.nickname) {\n                    displayName += '- (' + user.nickname + ')';\n                } else if (user.first_name || user.last_name) {\n                    displayName += '- ' + Utils.getFullName(user);\n                }\n\n                var wrappedChannel = {\n                    channel: {\n                        display_name: displayName,\n                        name: user.username,\n                        id: user.id,\n                        update_at: user.update_at,\n                        type: _constants2.Constants.DM_CHANNEL,\n                        last_picture_update: user.last_picture_update || 0\n                    },\n                    name: user.username\n                };\n\n                if (isDMVisible) {\n                    wrappedChannel.type = _constants2.Constants.MENTION_CHANNELS;\n                } else {\n                    wrappedChannel.type = _constants2.Constants.MENTION_MORE_CHANNELS;\n                    if (skipNotInChannel) {\n                        continue;\n                    }\n                }\n\n                completedChannels[user.id] = true;\n                channels.push(wrappedChannel);\n            }\n\n            var channelNames = channels.sort(quickSwitchSorter).map(function (wrappedChannel) {\n                return wrappedChannel.channel.name;\n            });\n\n            if (skipNotInChannel) {\n                channels.push({\n                    type: _constants2.Constants.MENTION_MORE_CHANNELS,\n                    loading: true\n                });\n            }\n\n            setTimeout(function () {\n                _app_dispatcher2.default.handleServerAction({\n                    type: _constants2.ActionTypes.SUGGESTION_RECEIVED_SUGGESTIONS,\n                    id: suggestionId,\n                    matchedPretext: channelPrefix,\n                    terms: channelNames,\n                    items: channels,\n                    component: SwitchChannelSuggestion\n                });\n            }, 0);\n        }\n    }]);\n    return SwitchChannelProvider;\n}(_provider2.default);\n\nexports.default = SwitchChannelProvider;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4Mi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3N1Z2dlc3Rpb24vc3dpdGNoX2NoYW5uZWxfcHJvdmlkZXIuanN4P2FmNjYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge0NsaWVudDR9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvY2xpZW50JztcbmltcG9ydCB7UHJlZmVyZW5jZXN9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvY29uc3RhbnRzJztcbmltcG9ydCB7Z2V0Q2hhbm5lbHNJbkN1cnJlbnRUZWFtLCBnZXRHcm91cENoYW5uZWxzLCBnZXRNeUNoYW5uZWxNZW1iZXJzaGlwc30gZnJvbSAnbWF0dGVybW9zdC1yZWR1eC9zZWxlY3RvcnMvZW50aXRpZXMvY2hhbm5lbHMnO1xuaW1wb3J0IHtnZXRCb29sfSBmcm9tICdtYXR0ZXJtb3N0LXJlZHV4L3NlbGVjdG9ycy9lbnRpdGllcy9wcmVmZXJlbmNlcyc7XG5pbXBvcnQge2dldEN1cnJlbnRUZWFtSWR9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvc2VsZWN0b3JzL2VudGl0aWVzL3RlYW1zJztcbmltcG9ydCB7Z2V0Q3VycmVudFVzZXJJZCwgc2VhcmNoUHJvZmlsZXN9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvc2VsZWN0b3JzL2VudGl0aWVzL3VzZXJzJztcblxuaW1wb3J0IEFwcERpc3BhdGNoZXIgZnJvbSAnZGlzcGF0Y2hlci9hcHBfZGlzcGF0Y2hlci5qc3gnO1xuaW1wb3J0IHN0b3JlIGZyb20gJ3N0b3Jlcy9yZWR1eF9zdG9yZS5qc3gnO1xuXG5pbXBvcnQge2dldENoYW5uZWxEaXNwbGF5TmFtZSwgc29ydENoYW5uZWxzQnlEaXNwbGF5TmFtZX0gZnJvbSAndXRpbHMvY2hhbm5lbF91dGlscy5qc3gnO1xuaW1wb3J0IHtBY3Rpb25UeXBlcywgQ29uc3RhbnRzfSBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCBQcm92aWRlciBmcm9tICcuL3Byb3ZpZGVyLmpzeCc7XG5pbXBvcnQgU3VnZ2VzdGlvbiBmcm9tICcuL3N1Z2dlc3Rpb24uanN4JztcblxuY29uc3QgZ2V0U3RhdGUgPSBzdG9yZS5nZXRTdGF0ZTtcblxuY2xhc3MgU3dpdGNoQ2hhbm5lbFN1Z2dlc3Rpb24gZXh0ZW5kcyBTdWdnZXN0aW9uIHtcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHtpdGVtLCBpc1NlbGVjdGlvbn0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCBjaGFubmVsID0gaXRlbS5jaGFubmVsO1xuICAgICAgICBjb25zdCBnbG9iZUljb24gPSBDb25zdGFudHMuR0xPQkVfSUNPTl9TVkc7XG4gICAgICAgIGNvbnN0IGxvY2tJY29uID0gQ29uc3RhbnRzLkxPQ0tfSUNPTl9TVkc7XG5cbiAgICAgICAgbGV0IGNsYXNzTmFtZSA9ICdtZW50aW9uc19fbmFtZSc7XG4gICAgICAgIGlmIChpc1NlbGVjdGlvbikge1xuICAgICAgICAgICAgY2xhc3NOYW1lICs9ICcgc3VnZ2VzdGlvbi0tc2VsZWN0ZWQnO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGRpc3BsYXlOYW1lID0gY2hhbm5lbC5kaXNwbGF5X25hbWU7XG4gICAgICAgIGxldCBpY29uID0gbnVsbDtcbiAgICAgICAgaWYgKGNoYW5uZWwudHlwZSA9PT0gQ29uc3RhbnRzLk9QRU5fQ0hBTk5FTCkge1xuICAgICAgICAgICAgaWNvbiA9IChcbiAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ljb24gaWNvbl9fZ2xvYmUgaWNvbi0tYm9keSdcbiAgICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGdsb2JlSWNvbn19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbC50eXBlID09PSBDb25zdGFudHMuUFJJVkFURV9DSEFOTkVMKSB7XG4gICAgICAgICAgICBpY29uID0gKFxuICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0naWNvbiBpY29uX19sb2NrIGljb24tLWJvZHknXG4gICAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBsb2NrSWNvbn19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hhbm5lbC50eXBlID09PSBDb25zdGFudHMuR01fQ0hBTk5FTCkge1xuICAgICAgICAgICAgZGlzcGxheU5hbWUgPSBnZXRDaGFubmVsRGlzcGxheU5hbWUoY2hhbm5lbCk7XG4gICAgICAgICAgICBpY29uID0gPGRpdiBjbGFzc05hbWU9J3N0YXR1cyBzdGF0dXMtLWdyb3VwJz57J0cnfTwvZGl2PjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGljb24gPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3B1bGwtbGVmdCc+XG4gICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbWVudGlvbl9faW1hZ2UnXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmM9e1V0aWxzLmltYWdlVVJMRm9yVXNlcihjaGFubmVsKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2ljb259XG4gICAgICAgICAgICAgICAge2Rpc3BsYXlOYW1lfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5sZXQgcHJlZml4ID0gJyc7XG5cbmZ1bmN0aW9uIHF1aWNrU3dpdGNoU29ydGVyKHdyYXBwZWRBLCB3cmFwcGVkQikge1xuICAgIGlmICh3cmFwcGVkQS50eXBlID09PSBDb25zdGFudHMuTUVOVElPTl9DSEFOTkVMUyAmJiB3cmFwcGVkQi50eXBlID09PSBDb25zdGFudHMuTUVOVElPTl9NT1JFX0NIQU5ORUxTKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2UgaWYgKHdyYXBwZWRCLnR5cGUgPT09IENvbnN0YW50cy5NRU5USU9OX0NIQU5ORUxTICYmIHdyYXBwZWRBLnR5cGUgPT09IENvbnN0YW50cy5NRU5USU9OX01PUkVfQ0hBTk5FTFMpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuXG4gICAgY29uc3QgYSA9IHdyYXBwZWRBLmNoYW5uZWw7XG4gICAgY29uc3QgYiA9IHdyYXBwZWRCLmNoYW5uZWw7XG5cbiAgICBsZXQgYURpc3BsYXlOYW1lID0gZ2V0Q2hhbm5lbERpc3BsYXlOYW1lKGEpLnRvTG93ZXJDYXNlKCk7XG4gICAgbGV0IGJEaXNwbGF5TmFtZSA9IGdldENoYW5uZWxEaXNwbGF5TmFtZShiKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKGEudHlwZSA9PT0gQ29uc3RhbnRzLkRNX0NIQU5ORUwpIHtcbiAgICAgICAgYURpc3BsYXlOYW1lID0gYURpc3BsYXlOYW1lLnN1YnN0cmluZygxKTtcbiAgICB9XG5cbiAgICBpZiAoYi50eXBlID09PSBDb25zdGFudHMuRE1fQ0hBTk5FTCkge1xuICAgICAgICBiRGlzcGxheU5hbWUgPSBiRGlzcGxheU5hbWUuc3Vic3RyaW5nKDEpO1xuICAgIH1cblxuICAgIGNvbnN0IGFTdGFydHNXaXRoID0gYURpc3BsYXlOYW1lLnN0YXJ0c1dpdGgocHJlZml4KTtcbiAgICBjb25zdCBiU3RhcnRzV2l0aCA9IGJEaXNwbGF5TmFtZS5zdGFydHNXaXRoKHByZWZpeCk7XG4gICAgaWYgKGFTdGFydHNXaXRoICYmIGJTdGFydHNXaXRoKSB7XG4gICAgICAgIHJldHVybiBzb3J0Q2hhbm5lbHNCeURpc3BsYXlOYW1lKGEsIGIpO1xuICAgIH0gZWxzZSBpZiAoIWFTdGFydHNXaXRoICYmICFiU3RhcnRzV2l0aCkge1xuICAgICAgICByZXR1cm4gc29ydENoYW5uZWxzQnlEaXNwbGF5TmFtZShhLCBiKTtcbiAgICB9IGVsc2UgaWYgKGFTdGFydHNXaXRoKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICByZXR1cm4gMTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3dpdGNoQ2hhbm5lbFByb3ZpZGVyIGV4dGVuZHMgUHJvdmlkZXIge1xuICAgIGhhbmRsZVByZXRleHRDaGFuZ2VkKHN1Z2dlc3Rpb25JZCwgY2hhbm5lbFByZWZpeCkge1xuICAgICAgICBpZiAoY2hhbm5lbFByZWZpeCkge1xuICAgICAgICAgICAgcHJlZml4ID0gY2hhbm5lbFByZWZpeDtcbiAgICAgICAgICAgIHRoaXMuc3RhcnROZXdSZXF1ZXN0KHN1Z2dlc3Rpb25JZCwgY2hhbm5lbFByZWZpeCk7XG5cbiAgICAgICAgICAgIC8vIERpc3BhdGNoIHN1Z2dlc3Rpb25zIGZvciBsb2NhbCBkYXRhXG4gICAgICAgICAgICBjb25zdCBjaGFubmVscyA9IGdldENoYW5uZWxzSW5DdXJyZW50VGVhbShnZXRTdGF0ZSgpKS5jb25jYXQoZ2V0R3JvdXBDaGFubmVscyhnZXRTdGF0ZSgpKSk7XG4gICAgICAgICAgICBjb25zdCB1c2VycyA9IE9iamVjdC5hc3NpZ24oW10sIHNlYXJjaFByb2ZpbGVzKGdldFN0YXRlKCksIGNoYW5uZWxQcmVmaXgsIHRydWUpKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0Q2hhbm5lbHNBbmREaXNwYXRjaChjaGFubmVsUHJlZml4LCBzdWdnZXN0aW9uSWQsIGNoYW5uZWxzLCB1c2VycywgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIEZldGNoIGRhdGEgZnJvbSB0aGUgc2VydmVyIGFuZCBkaXNwYXRjaFxuICAgICAgICAgICAgdGhpcy5mZXRjaFVzZXJzQW5kQ2hhbm5lbHMoY2hhbm5lbFByZWZpeCwgc3VnZ2VzdGlvbklkKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgYXN5bmMgZmV0Y2hVc2Vyc0FuZENoYW5uZWxzKGNoYW5uZWxQcmVmaXgsIHN1Z2dlc3Rpb25JZCkge1xuICAgICAgICBsZXQgdGVhbUlkID0gJyc7XG4gICAgICAgIGlmIChnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5SZXN0cmljdERpcmVjdE1lc3NhZ2UgPT09ICd0ZWFtJykge1xuICAgICAgICAgICAgdGVhbUlkID0gc3RvcmUuZ2V0U3RhdGUoKS5lbnRpdGllcy50ZWFtcy5jdXJyZW50VGVhbUlkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVzZXJzQXN5bmMgPSBDbGllbnQ0LmF1dG9jb21wbGV0ZVVzZXJzKGNoYW5uZWxQcmVmaXgsIHRlYW1JZCwgJycpO1xuICAgICAgICBjb25zdCBjaGFubmVsc0FzeW5jID0gQ2xpZW50NC5zZWFyY2hDaGFubmVscyhnZXRDdXJyZW50VGVhbUlkKGdldFN0YXRlKCkpLCBjaGFubmVsUHJlZml4KTtcblxuICAgICAgICBsZXQgdXNlcnNGcm9tU2VydmVyID0gW107XG4gICAgICAgIGxldCBjaGFubmVsc0Zyb21TZXJ2ZXIgPSBbXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHVzZXJzRnJvbVNlcnZlciA9IGF3YWl0IHVzZXJzQXN5bmM7XG4gICAgICAgICAgICBjaGFubmVsc0Zyb21TZXJ2ZXIgPSBhd2FpdCBjaGFubmVsc0FzeW5jO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIEFwcERpc3BhdGNoZXIuaGFuZGxlU2VydmVyQWN0aW9uKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBBY3Rpb25UeXBlcy5SRUNFSVZFRF9FUlJPUixcbiAgICAgICAgICAgICAgICBlcnJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkQ2FuY2VsRGlzcGF0Y2goY2hhbm5lbFByZWZpeCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXJzID0gT2JqZWN0LmFzc2lnbihbXSwgc2VhcmNoUHJvZmlsZXMoZ2V0U3RhdGUoKSwgY2hhbm5lbFByZWZpeCwgdHJ1ZSksIHVzZXJzRnJvbVNlcnZlci51c2Vycyk7XG4gICAgICAgIGNvbnN0IGNoYW5uZWxzID0gZ2V0Q2hhbm5lbHNJbkN1cnJlbnRUZWFtKGdldFN0YXRlKCkpLmNvbmNhdChnZXRHcm91cENoYW5uZWxzKGdldFN0YXRlKCkpKS5jb25jYXQoY2hhbm5lbHNGcm9tU2VydmVyKTtcbiAgICAgICAgdGhpcy5mb3JtYXRDaGFubmVsc0FuZERpc3BhdGNoKGNoYW5uZWxQcmVmaXgsIHN1Z2dlc3Rpb25JZCwgY2hhbm5lbHMsIHVzZXJzKTtcbiAgICB9XG5cbiAgICBmb3JtYXRDaGFubmVsc0FuZERpc3BhdGNoKGNoYW5uZWxQcmVmaXgsIHN1Z2dlc3Rpb25JZCwgYWxsQ2hhbm5lbHMsIHVzZXJzLCBza2lwTm90SW5DaGFubmVsID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgY2hhbm5lbHMgPSBbXTtcbiAgICAgICAgY29uc3QgbWVtYmVycyA9IGdldE15Q2hhbm5lbE1lbWJlcnNoaXBzKGdldFN0YXRlKCkpO1xuXG4gICAgICAgIGlmICh0aGlzLnNob3VsZENhbmNlbERpc3BhdGNoKGNoYW5uZWxQcmVmaXgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjdXJyZW50SWQgPSBnZXRDdXJyZW50VXNlcklkKGdldFN0YXRlKCkpO1xuXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZENoYW5uZWxzID0ge307XG5cbiAgICAgICAgZm9yIChjb25zdCBpZCBvZiBPYmplY3Qua2V5cyhhbGxDaGFubmVscykpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWwgPSBhbGxDaGFubmVsc1tpZF07XG5cbiAgICAgICAgICAgIGlmIChjb21wbGV0ZWRDaGFubmVsc1tjaGFubmVsLmlkXSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBtZW1iZXIgPSBtZW1iZXJzW2NoYW5uZWwuaWRdO1xuXG4gICAgICAgICAgICBpZiAoY2hhbm5lbC5kaXNwbGF5X25hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGNoYW5uZWxQcmVmaXgudG9Mb3dlckNhc2UoKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q2hhbm5lbCA9IE9iamVjdC5hc3NpZ24oe30sIGNoYW5uZWwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdyYXBwZWRDaGFubmVsID0ge2NoYW5uZWw6IG5ld0NoYW5uZWwsIG5hbWU6IG5ld0NoYW5uZWwubmFtZX07XG4gICAgICAgICAgICAgICAgaWYgKG5ld0NoYW5uZWwudHlwZSA9PT0gQ29uc3RhbnRzLkdNX0NIQU5ORUwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3Q2hhbm5lbC5uYW1lID0gZ2V0Q2hhbm5lbERpc3BsYXlOYW1lKG5ld0NoYW5uZWwpO1xuICAgICAgICAgICAgICAgICAgICB3cmFwcGVkQ2hhbm5lbC5uYW1lID0gbmV3Q2hhbm5lbC5uYW1lO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0dNVmlzaWJsZSA9IGdldEJvb2woZ2V0U3RhdGUoKSwgUHJlZmVyZW5jZXMuQ0FURUdPUllfR1JPVVBfQ0hBTk5FTF9TSE9XLCBuZXdDaGFubmVsLmlkLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0dNVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlZENoYW5uZWwudHlwZSA9IENvbnN0YW50cy5NRU5USU9OX0NIQU5ORUxTO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcHBlZENoYW5uZWwudHlwZSA9IENvbnN0YW50cy5NRU5USU9OX01PUkVfQ0hBTk5FTFM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tpcE5vdEluQ2hhbm5lbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlZENoYW5uZWwudHlwZSA9IENvbnN0YW50cy5NRU5USU9OX0NIQU5ORUxTO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZWRDaGFubmVsLnR5cGUgPSBDb25zdGFudHMuTUVOVElPTl9NT1JFX0NIQU5ORUxTO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2tpcE5vdEluQ2hhbm5lbCB8fCAhbmV3Q2hhbm5lbC5kaXNwbGF5X25hbWUudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGNoYW5uZWxQcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbXBsZXRlZENoYW5uZWxzW2NoYW5uZWwuaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGFubmVscy5wdXNoKHdyYXBwZWRDaGFubmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXNlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSB1c2Vyc1tpXTtcblxuICAgICAgICAgICAgaWYgKGNvbXBsZXRlZENoYW5uZWxzW3VzZXIuaWRdKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGlzRE1WaXNpYmxlID0gZ2V0Qm9vbChnZXRTdGF0ZSgpLCBQcmVmZXJlbmNlcy5DQVRFR09SWV9ESVJFQ1RfQ0hBTk5FTF9TSE9XLCB1c2VyLmlkLCBmYWxzZSk7XG4gICAgICAgICAgICBsZXQgZGlzcGxheU5hbWUgPSBgQCR7dXNlci51c2VybmFtZX0gYDtcblxuICAgICAgICAgICAgaWYgKHVzZXIuaWQgPT09IGN1cnJlbnRJZCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoKHVzZXIuZmlyc3RfbmFtZSB8fCB1c2VyLmxhc3RfbmFtZSkgJiYgdXNlci5uaWNrbmFtZSkge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lICs9IGAtICR7VXRpbHMuZ2V0RnVsbE5hbWUodXNlcil9ICgke3VzZXIubmlja25hbWV9KWA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXIubmlja25hbWUpIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZSArPSBgLSAoJHt1c2VyLm5pY2tuYW1lfSlgO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyLmZpcnN0X25hbWUgfHwgdXNlci5sYXN0X25hbWUpIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZSArPSBgLSAke1V0aWxzLmdldEZ1bGxOYW1lKHVzZXIpfWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZWRDaGFubmVsID0ge1xuICAgICAgICAgICAgICAgIGNoYW5uZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheV9uYW1lOiBkaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdXNlci51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZV9hdDogdXNlci51cGRhdGVfYXQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENvbnN0YW50cy5ETV9DSEFOTkVMLFxuICAgICAgICAgICAgICAgICAgICBsYXN0X3BpY3R1cmVfdXBkYXRlOiB1c2VyLmxhc3RfcGljdHVyZV91cGRhdGUgfHwgMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbmFtZTogdXNlci51c2VybmFtZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKGlzRE1WaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgd3JhcHBlZENoYW5uZWwudHlwZSA9IENvbnN0YW50cy5NRU5USU9OX0NIQU5ORUxTO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB3cmFwcGVkQ2hhbm5lbC50eXBlID0gQ29uc3RhbnRzLk1FTlRJT05fTU9SRV9DSEFOTkVMUztcbiAgICAgICAgICAgICAgICBpZiAoc2tpcE5vdEluQ2hhbm5lbCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbXBsZXRlZENoYW5uZWxzW3VzZXIuaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIGNoYW5uZWxzLnB1c2god3JhcHBlZENoYW5uZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2hhbm5lbE5hbWVzID0gY2hhbm5lbHMuXG4gICAgICAgICAgICBzb3J0KHF1aWNrU3dpdGNoU29ydGVyKS5cbiAgICAgICAgICAgIG1hcCgod3JhcHBlZENoYW5uZWwpID0+IHdyYXBwZWRDaGFubmVsLmNoYW5uZWwubmFtZSk7XG5cbiAgICAgICAgaWYgKHNraXBOb3RJbkNoYW5uZWwpIHtcbiAgICAgICAgICAgIGNoYW5uZWxzLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IENvbnN0YW50cy5NRU5USU9OX01PUkVfQ0hBTk5FTFMsXG4gICAgICAgICAgICAgICAgbG9hZGluZzogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIEFwcERpc3BhdGNoZXIuaGFuZGxlU2VydmVyQWN0aW9uKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBBY3Rpb25UeXBlcy5TVUdHRVNUSU9OX1JFQ0VJVkVEX1NVR0dFU1RJT05TLFxuICAgICAgICAgICAgICAgIGlkOiBzdWdnZXN0aW9uSWQsXG4gICAgICAgICAgICAgICAgbWF0Y2hlZFByZXRleHQ6IGNoYW5uZWxQcmVmaXgsXG4gICAgICAgICAgICAgICAgdGVybXM6IGNoYW5uZWxOYW1lcyxcbiAgICAgICAgICAgICAgICBpdGVtczogY2hhbm5lbHMsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiBTd2l0Y2hDaGFubmVsU3VnZ2VzdGlvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3N1Z2dlc3Rpb24vc3dpdGNoX2NoYW5uZWxfcHJvdmlkZXIuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFyQkE7QUFDQTtBQUNBO0FBb0JBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBTEE7QUFRQTs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUVBOzs7Ozs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7O0FBREE7O0FBQ0E7QUFDQTs7QUFEQTs7Ozs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUNBOztBQUtBOzs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFZQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBaURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFUQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTs7Ozs7QUF2S0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2482\n");

/***/ }),

/***/ 2483:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _teams = __webpack_require__(122);\n\nvar Selectors = _interopRequireWildcard(_teams);\n\nvar _app_dispatcher = __webpack_require__(36);\n\nvar _app_dispatcher2 = _interopRequireDefault(_app_dispatcher);\n\nvar _localization_store = __webpack_require__(214);\n\nvar _localization_store2 = _interopRequireDefault(_localization_store);\n\nvar _redux_store = __webpack_require__(39);\n\nvar _redux_store2 = _interopRequireDefault(_redux_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _provider = __webpack_require__(241);\n\nvar _provider2 = _interopRequireDefault(_provider);\n\nvar _suggestion = __webpack_require__(186);\n\nvar _suggestion2 = _interopRequireDefault(_suggestion);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar getState = _redux_store2.default.getState;\n\nvar SwitchTeamSuggestion = function (_Suggestion) {\n    (0, _inherits3.default)(SwitchTeamSuggestion, _Suggestion);\n\n    function SwitchTeamSuggestion() {\n        (0, _classCallCheck3.default)(this, SwitchTeamSuggestion);\n        return (0, _possibleConstructorReturn3.default)(this, (SwitchTeamSuggestion.__proto__ || (0, _getPrototypeOf2.default)(SwitchTeamSuggestion)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(SwitchTeamSuggestion, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                item = _props.item,\n                isSelection = _props.isSelection;\n\n\n            var className = 'mentions__name';\n            if (isSelection) {\n                className += ' suggestion--selected';\n            }\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    onClick: this.handleClick,\n                    className: className\n                },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'status' },\n                    _react2.default.createElement('i', { className: 'fa fa-group' })\n                ),\n                item.display_name\n            );\n        }\n    }]);\n    return SwitchTeamSuggestion;\n}(_suggestion2.default);\n\nvar prefix = '';\n\nfunction quickSwitchSorter(a, b) {\n    var aDisplayName = a.display_name.toLowerCase();\n    var bDisplayName = b.display_name.toLowerCase();\n    var aStartsWith = aDisplayName.startsWith(prefix);\n    var bStartsWith = bDisplayName.startsWith(prefix);\n\n    if (aStartsWith && bStartsWith) {\n        var locale = _localization_store2.default.getLocale();\n\n        if (aDisplayName !== bDisplayName) {\n            return aDisplayName.localeCompare(bDisplayName, locale, { numeric: true });\n        }\n\n        return a.name.localeCompare(b.name, locale, { numeric: true });\n    } else if (aStartsWith) {\n        return -1;\n    }\n\n    return 1;\n}\n\nvar SwitchTeamProvider = function (_Provider) {\n    (0, _inherits3.default)(SwitchTeamProvider, _Provider);\n\n    function SwitchTeamProvider() {\n        (0, _classCallCheck3.default)(this, SwitchTeamProvider);\n        return (0, _possibleConstructorReturn3.default)(this, (SwitchTeamProvider.__proto__ || (0, _getPrototypeOf2.default)(SwitchTeamProvider)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(SwitchTeamProvider, [{\n        key: 'handlePretextChanged',\n        value: function handlePretextChanged(suggestionId, teamPrefix) {\n            if (teamPrefix) {\n                prefix = teamPrefix;\n                this.startNewRequest(suggestionId, teamPrefix);\n\n                var allTeams = Selectors.getMyTeams(getState());\n\n                var teams = allTeams.filter(function (team) {\n                    return team.display_name.toLowerCase().indexOf(teamPrefix) !== -1 || team.name.indexOf(teamPrefix) !== -1;\n                });\n\n                var teamNames = teams.sort(quickSwitchSorter).map(function (team) {\n                    return team.name;\n                });\n\n                setTimeout(function () {\n                    _app_dispatcher2.default.handleServerAction({\n                        type: _constants.ActionTypes.SUGGESTION_RECEIVED_SUGGESTIONS,\n                        id: suggestionId,\n                        matchedPretext: teamPrefix,\n                        terms: teamNames,\n                        items: teams,\n                        component: SwitchTeamSuggestion\n                    });\n                }, 0);\n\n                return true;\n            }\n\n            return false;\n        }\n    }]);\n    return SwitchTeamProvider;\n}(_provider2.default);\n\nexports.default = SwitchTeamProvider;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4My5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3N1Z2dlc3Rpb24vc3dpdGNoX3RlYW1fcHJvdmlkZXIuanN4P2JkMzkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgKiBhcyBTZWxlY3RvcnMgZnJvbSAnbWF0dGVybW9zdC1yZWR1eC9zZWxlY3RvcnMvZW50aXRpZXMvdGVhbXMnO1xuXG5pbXBvcnQgQXBwRGlzcGF0Y2hlciBmcm9tICdkaXNwYXRjaGVyL2FwcF9kaXNwYXRjaGVyLmpzeCc7XG5pbXBvcnQgTG9jYWxpemF0aW9uU3RvcmUgZnJvbSAnc3RvcmVzL2xvY2FsaXphdGlvbl9zdG9yZS5qc3gnO1xuaW1wb3J0IHN0b3JlIGZyb20gJ3N0b3Jlcy9yZWR1eF9zdG9yZS5qc3gnO1xuXG5pbXBvcnQge0FjdGlvblR5cGVzfSBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcblxuaW1wb3J0IFByb3ZpZGVyIGZyb20gJy4vcHJvdmlkZXIuanN4JztcbmltcG9ydCBTdWdnZXN0aW9uIGZyb20gJy4vc3VnZ2VzdGlvbi5qc3gnO1xuXG5jb25zdCBnZXRTdGF0ZSA9IHN0b3JlLmdldFN0YXRlO1xuXG5jbGFzcyBTd2l0Y2hUZWFtU3VnZ2VzdGlvbiBleHRlbmRzIFN1Z2dlc3Rpb24ge1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge2l0ZW0sIGlzU2VsZWN0aW9ufSA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgbGV0IGNsYXNzTmFtZSA9ICdtZW50aW9uc19fbmFtZSc7XG4gICAgICAgIGlmIChpc1NlbGVjdGlvbikge1xuICAgICAgICAgICAgY2xhc3NOYW1lICs9ICcgc3VnZ2VzdGlvbi0tc2VsZWN0ZWQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzdGF0dXMnPjxpIGNsYXNzTmFtZT0nZmEgZmEtZ3JvdXAnLz48L2Rpdj5cbiAgICAgICAgICAgICAgICB7aXRlbS5kaXNwbGF5X25hbWV9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmxldCBwcmVmaXggPSAnJztcblxuZnVuY3Rpb24gcXVpY2tTd2l0Y2hTb3J0ZXIoYSwgYikge1xuICAgIGNvbnN0IGFEaXNwbGF5TmFtZSA9IGEuZGlzcGxheV9uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgYkRpc3BsYXlOYW1lID0gYi5kaXNwbGF5X25hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBhU3RhcnRzV2l0aCA9IGFEaXNwbGF5TmFtZS5zdGFydHNXaXRoKHByZWZpeCk7XG4gICAgY29uc3QgYlN0YXJ0c1dpdGggPSBiRGlzcGxheU5hbWUuc3RhcnRzV2l0aChwcmVmaXgpO1xuXG4gICAgaWYgKGFTdGFydHNXaXRoICYmIGJTdGFydHNXaXRoKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsZSA9IExvY2FsaXphdGlvblN0b3JlLmdldExvY2FsZSgpO1xuXG4gICAgICAgIGlmIChhRGlzcGxheU5hbWUgIT09IGJEaXNwbGF5TmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFEaXNwbGF5TmFtZS5sb2NhbGVDb21wYXJlKGJEaXNwbGF5TmFtZSwgbG9jYWxlLCB7bnVtZXJpYzogdHJ1ZX0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSwgbG9jYWxlLCB7bnVtZXJpYzogdHJ1ZX0pO1xuICAgIH0gZWxzZSBpZiAoYVN0YXJ0c1dpdGgpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cblxuICAgIHJldHVybiAxO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTd2l0Y2hUZWFtUHJvdmlkZXIgZXh0ZW5kcyBQcm92aWRlciB7XG4gICAgaGFuZGxlUHJldGV4dENoYW5nZWQoc3VnZ2VzdGlvbklkLCB0ZWFtUHJlZml4KSB7XG4gICAgICAgIGlmICh0ZWFtUHJlZml4KSB7XG4gICAgICAgICAgICBwcmVmaXggPSB0ZWFtUHJlZml4O1xuICAgICAgICAgICAgdGhpcy5zdGFydE5ld1JlcXVlc3Qoc3VnZ2VzdGlvbklkLCB0ZWFtUHJlZml4KTtcblxuICAgICAgICAgICAgY29uc3QgYWxsVGVhbXMgPSBTZWxlY3RvcnMuZ2V0TXlUZWFtcyhnZXRTdGF0ZSgpKTtcblxuICAgICAgICAgICAgY29uc3QgdGVhbXMgPSBhbGxUZWFtcy5maWx0ZXIoKHRlYW0pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGVhbS5kaXNwbGF5X25hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRlYW1QcmVmaXgpICE9PSAtMSB8fFxuICAgICAgICAgICAgICAgICAgICB0ZWFtLm5hbWUuaW5kZXhPZih0ZWFtUHJlZml4KSAhPT0gLTE7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgdGVhbU5hbWVzID0gdGVhbXMuXG4gICAgICAgICAgICAgICAgc29ydChxdWlja1N3aXRjaFNvcnRlcikuXG4gICAgICAgICAgICAgICAgbWFwKCh0ZWFtKSA9PiB0ZWFtLm5hbWUpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBBcHBEaXNwYXRjaGVyLmhhbmRsZVNlcnZlckFjdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IEFjdGlvblR5cGVzLlNVR0dFU1RJT05fUkVDRUlWRURfU1VHR0VTVElPTlMsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBzdWdnZXN0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWRQcmV0ZXh0OiB0ZWFtUHJlZml4LFxuICAgICAgICAgICAgICAgICAgICB0ZXJtczogdGVhbU5hbWVzLFxuICAgICAgICAgICAgICAgICAgICBpdGVtczogdGVhbXMsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogU3dpdGNoVGVhbVN1Z2dlc3Rpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIDApO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy9zdWdnZXN0aW9uL3N3aXRjaF90ZWFtX3Byb3ZpZGVyLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBZkE7QUFDQTtBQUNBO0FBY0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUxBO0FBUUE7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBaENBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2483\n");

/***/ }),

/***/ 2484:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _message_wrapper = __webpack_require__(816);\n\nvar _message_wrapper2 = _interopRequireDefault(_message_wrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar NavbarInfoButton = function (_React$PureComponent) {\n    (0, _inherits3.default)(NavbarInfoButton, _React$PureComponent);\n\n    function NavbarInfoButton() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        (0, _classCallCheck3.default)(this, NavbarInfoButton);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = NavbarInfoButton.__proto__ || (0, _getPrototypeOf2.default)(NavbarInfoButton)).call.apply(_ref, [this].concat(args))), _this), _this.showEditChannelHeaderModal = function () {\n            _this.refs.headerOverlay.hide();\n\n            _this.props.showEditChannelHeaderModal();\n        }, _this.hide = function () {\n            _this.refs.headerOverlay.hide();\n        }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n    }\n\n    (0, _createClass3.default)(NavbarInfoButton, [{\n        key: 'render',\n        value: function render() {\n            var popoverContent = null;\n            if (this.props.channel) {\n                if (this.props.channel.header) {\n                    popoverContent = _react2.default.createElement(_message_wrapper2.default, {\n                        message: this.props.channel.header,\n                        options: { singleline: true, mentionHighlight: false }\n                    });\n                } else {\n                    var link = _react2.default.createElement(\n                        'a',\n                        {\n                            href: '#',\n                            onClick: this.showEditChannelHeaderModal\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'navbar.click',\n                            defaultMessage: 'Click here'\n                        })\n                    );\n\n                    popoverContent = _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'navbar.noHeader',\n                            defaultMessage: 'No channel header yet.{newline}{link} to add one.',\n                            values: {\n                                newline: _react2.default.createElement('br', null),\n                                link: link\n                            }\n                        })\n                    );\n                }\n            }\n\n            var popover = _react2.default.createElement(\n                _reactBootstrap.Popover,\n                {\n                    bsStyle: 'info',\n                    placement: 'bottom',\n                    id: 'header-popover'\n                },\n                popoverContent,\n                _react2.default.createElement(\n                    'div',\n                    {\n                        className: 'close visible-xs-block',\n                        onClick: this.hide\n                    },\n                    ''\n                )\n            );\n\n            return _react2.default.createElement(\n                _reactBootstrap.OverlayTrigger,\n                {\n                    ref: 'headerOverlay',\n                    trigger: 'click',\n                    placement: 'bottom',\n                    overlay: popover,\n                    className: 'description',\n                    rootClose: true\n                },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'navbar-toggle navbar-right__icon navbar-info-button pull-right' },\n                    _react2.default.createElement('span', {\n                        className: 'icon icon__info',\n                        dangerouslySetInnerHTML: { __html: _constants2.default.INFO_ICON_SVG },\n                        'aria-hidden': 'true'\n                    })\n                )\n            );\n        }\n    }]);\n    return NavbarInfoButton;\n}(_react2.default.PureComponent);\n\nNavbarInfoButton.propTypes = {\n    channel: _propTypes2.default.object,\n    showEditChannelHeaderModal: _propTypes2.default.func.isRequired\n};\nexports.default = NavbarInfoButton;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4NC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL25hdmJhci9uYXZiYXJfaW5mb19idXR0b24uanN4PzVmYjciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7T3ZlcmxheVRyaWdnZXIsIFBvcG92ZXJ9IGZyb20gJ3JlYWN0LWJvb3RzdHJhcCc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuXG5pbXBvcnQgTWVzc2FnZVdyYXBwZXIgZnJvbSAnY29tcG9uZW50cy9tZXNzYWdlX3dyYXBwZXIuanN4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmF2YmFySW5mb0J1dHRvbiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGNoYW5uZWw6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgICAgIHNob3dFZGl0Q2hhbm5lbEhlYWRlck1vZGFsOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXG4gICAgfTtcblxuICAgIHNob3dFZGl0Q2hhbm5lbEhlYWRlck1vZGFsID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnJlZnMuaGVhZGVyT3ZlcmxheS5oaWRlKCk7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5zaG93RWRpdENoYW5uZWxIZWFkZXJNb2RhbCgpO1xuICAgIH1cblxuICAgIGhpZGUgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMucmVmcy5oZWFkZXJPdmVybGF5LmhpZGUoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBwb3BvdmVyQ29udGVudCA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNoYW5uZWwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmNoYW5uZWwuaGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgcG9wb3ZlckNvbnRlbnQgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxNZXNzYWdlV3JhcHBlclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17dGhpcy5wcm9wcy5jaGFubmVsLmhlYWRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e3tzaW5nbGVsaW5lOiB0cnVlLCBtZW50aW9uSGlnaGxpZ2h0OiBmYWxzZX19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluayA9IChcbiAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9JyMnXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnNob3dFZGl0Q2hhbm5lbEhlYWRlck1vZGFsfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSduYXZiYXIuY2xpY2snXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0NsaWNrIGhlcmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHBvcG92ZXJDb250ZW50ID0gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbmF2YmFyLm5vSGVhZGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdObyBjaGFubmVsIGhlYWRlciB5ZXQue25ld2xpbmV9e2xpbmt9IHRvIGFkZCBvbmUuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdsaW5lOiAoPGJyLz4pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwb3BvdmVyID0gKFxuICAgICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgICAgICBic1N0eWxlPSdpbmZvJ1xuICAgICAgICAgICAgICAgIHBsYWNlbWVudD0nYm90dG9tJ1xuICAgICAgICAgICAgICAgIGlkPSdoZWFkZXItcG9wb3ZlcidcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7cG9wb3ZlckNvbnRlbnR9XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Nsb3NlIHZpc2libGUteHMtYmxvY2snXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGlkZX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHsnw5cnfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9Qb3BvdmVyPlxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8T3ZlcmxheVRyaWdnZXJcbiAgICAgICAgICAgICAgICByZWY9J2hlYWRlck92ZXJsYXknXG4gICAgICAgICAgICAgICAgdHJpZ2dlcj0nY2xpY2snXG4gICAgICAgICAgICAgICAgcGxhY2VtZW50PSdib3R0b20nXG4gICAgICAgICAgICAgICAgb3ZlcmxheT17cG9wb3Zlcn1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Rlc2NyaXB0aW9uJ1xuICAgICAgICAgICAgICAgIHJvb3RDbG9zZT17dHJ1ZX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbmF2YmFyLXRvZ2dsZSBuYXZiYXItcmlnaHRfX2ljb24gbmF2YmFyLWluZm8tYnV0dG9uIHB1bGwtcmlnaHQnPlxuICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdpY29uIGljb25fX2luZm8nXG4gICAgICAgICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogQ29uc3RhbnRzLklORk9fSUNPTl9TVkd9fVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49J3RydWUnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L092ZXJsYXlUcmlnZ2VyPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL25hdmJhci9uYXZiYXJfaW5mb19idXR0b24uanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7Ozs7QUFYQTtBQUNBO0FBQ0E7QUFVQTs7Ozs7Ozs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBQ0E7QUFVQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUhBO0FBREE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQU5BO0FBQ0E7QUFjQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVJBO0FBaUJBOzs7QUF4RkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUZBO0FBREEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2484\n");

/***/ }),

/***/ 2485:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(48);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _es = __webpack_require__(45);\n\nvar _browser_store = __webpack_require__(136);\n\nvar _browser_store2 = _interopRequireDefault(_browser_store);\n\nvar _channel_store = __webpack_require__(34);\n\nvar _channel_store2 = _interopRequireDefault(_channel_store);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar RemovedFromChannelModal = function (_React$Component) {\n    (0, _inherits3.default)(RemovedFromChannelModal, _React$Component);\n\n    function RemovedFromChannelModal(props) {\n        (0, _classCallCheck3.default)(this, RemovedFromChannelModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (RemovedFromChannelModal.__proto__ || (0, _getPrototypeOf2.default)(RemovedFromChannelModal)).call(this, props));\n\n        _this.handleShow = _this.handleShow.bind(_this);\n        _this.handleClose = _this.handleClose.bind(_this);\n\n        _this.state = {\n            channelName: '',\n            remover: ''\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(RemovedFromChannelModal, [{\n        key: 'handleShow',\n        value: function handleShow() {\n            var newState = {};\n            if (_browser_store2.default.getItem('channel-removed-state')) {\n                newState = _browser_store2.default.getItem('channel-removed-state');\n                _browser_store2.default.removeItem('channel-removed-state');\n            }\n\n            var townSquare = _channel_store2.default.getByName('town-square');\n            setTimeout(function () {\n                _es.browserHistory.push(_team_store2.default.getCurrentTeamRelativeUrl() + '/channels/' + townSquare.name);\n            }, 1);\n\n            this.setState(newState);\n        }\n    }, {\n        key: 'handleClose',\n        value: function handleClose() {\n            this.setState({ channelName: '', remover: '' });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            (0, _jquery2.default)(_reactDom2.default.findDOMNode(this)).on('show.bs.modal', this.handleShow);\n            (0, _jquery2.default)(_reactDom2.default.findDOMNode(this)).on('hidden.bs.modal', this.handleClose);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            (0, _jquery2.default)(_reactDom2.default.findDOMNode(this)).off('show.bs.modal', this.handleShow);\n            (0, _jquery2.default)(_reactDom2.default.findDOMNode(this)).off('hidden.bs.modal', this.handleClose);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var currentUser = _user_store2.default.getCurrentUser();\n\n            var channelName = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'removed_channel.channelName',\n                defaultMessage: 'the channel'\n            });\n            if (this.state.channelName) {\n                channelName = this.state.channelName;\n            }\n\n            var remover = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'removed_channel.someone',\n                defaultMessage: 'Someone'\n            });\n            if (this.state.remover) {\n                remover = this.state.remover;\n            }\n\n            if (currentUser != null) {\n                return _react2.default.createElement(\n                    'div',\n                    {\n                        className: 'modal fade',\n                        ref: 'modal',\n                        id: 'removed_from_channel',\n                        tabIndex: '-1',\n                        role: 'dialog',\n                        'aria-hidden': 'true'\n                    },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'modal-dialog' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-content' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'modal-header' },\n                                _react2.default.createElement(\n                                    'button',\n                                    {\n                                        type: 'button',\n                                        className: 'close',\n                                        'data-dismiss': 'modal',\n                                        'aria-label': 'Close'\n                                    },\n                                    _react2.default.createElement(\n                                        'span',\n                                        { 'aria-hidden': 'true' },\n                                        ''\n                                    )\n                                ),\n                                _react2.default.createElement(\n                                    'h4',\n                                    { className: 'modal-title' },\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'removed_channel.from',\n                                        defaultMessage: 'Removed from '\n                                    }),\n                                    _react2.default.createElement(\n                                        'span',\n                                        { className: 'name' },\n                                        channelName\n                                    )\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'modal-body' },\n                                _react2.default.createElement(\n                                    'p',\n                                    null,\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'removed_channel.remover',\n                                        defaultMessage: '{remover} removed you from {channel}',\n                                        values: {\n                                            remover: remover,\n                                            channel: channelName\n                                        }\n                                    })\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'modal-footer' },\n                                _react2.default.createElement(\n                                    'button',\n                                    {\n                                        type: 'button',\n                                        className: 'btn btn-primary',\n                                        'data-dismiss': 'modal'\n                                    },\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'removed_channel.okay',\n                                        defaultMessage: 'Okay'\n                                    })\n                                )\n                            )\n                        )\n                    )\n                );\n            }\n\n            return _react2.default.createElement('div', null);\n        }\n    }]);\n    return RemovedFromChannelModal;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = RemovedFromChannelModal;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4NS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3JlbW92ZWRfZnJvbV9jaGFubmVsX21vZGFsLmpzeD9iYzFlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcbmltcG9ydCB7YnJvd3Nlckhpc3Rvcnl9IGZyb20gJ3JlYWN0LXJvdXRlci9lczYnO1xuXG5pbXBvcnQgQnJvd3NlclN0b3JlIGZyb20gJ3N0b3Jlcy9icm93c2VyX3N0b3JlLmpzeCc7XG5pbXBvcnQgQ2hhbm5lbFN0b3JlIGZyb20gJ3N0b3Jlcy9jaGFubmVsX3N0b3JlLmpzeCc7XG5pbXBvcnQgVGVhbVN0b3JlIGZyb20gJ3N0b3Jlcy90ZWFtX3N0b3JlLmpzeCc7XG5pbXBvcnQgVXNlclN0b3JlIGZyb20gJ3N0b3Jlcy91c2VyX3N0b3JlLmpzeCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbW92ZWRGcm9tQ2hhbm5lbE1vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5oYW5kbGVTaG93ID0gdGhpcy5oYW5kbGVTaG93LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2xvc2UgPSB0aGlzLmhhbmRsZUNsb3NlLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGNoYW5uZWxOYW1lOiAnJyxcbiAgICAgICAgICAgIHJlbW92ZXI6ICcnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaGFuZGxlU2hvdygpIHtcbiAgICAgICAgdmFyIG5ld1N0YXRlID0ge307XG4gICAgICAgIGlmIChCcm93c2VyU3RvcmUuZ2V0SXRlbSgnY2hhbm5lbC1yZW1vdmVkLXN0YXRlJykpIHtcbiAgICAgICAgICAgIG5ld1N0YXRlID0gQnJvd3NlclN0b3JlLmdldEl0ZW0oJ2NoYW5uZWwtcmVtb3ZlZC1zdGF0ZScpO1xuICAgICAgICAgICAgQnJvd3NlclN0b3JlLnJlbW92ZUl0ZW0oJ2NoYW5uZWwtcmVtb3ZlZC1zdGF0ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRvd25TcXVhcmUgPSBDaGFubmVsU3RvcmUuZ2V0QnlOYW1lKCd0b3duLXNxdWFyZScpO1xuICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGJyb3dzZXJIaXN0b3J5LnB1c2goVGVhbVN0b3JlLmdldEN1cnJlbnRUZWFtUmVsYXRpdmVVcmwoKSArICcvY2hhbm5lbHMvJyArIHRvd25TcXVhcmUubmFtZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAxKTtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcbiAgICB9XG5cbiAgICBoYW5kbGVDbG9zZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y2hhbm5lbE5hbWU6ICcnLCByZW1vdmVyOiAnJ30pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAkKFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpKS5vbignc2hvdy5icy5tb2RhbCcsIHRoaXMuaGFuZGxlU2hvdyk7XG4gICAgICAgICQoUmVhY3RET00uZmluZERPTU5vZGUodGhpcykpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCB0aGlzLmhhbmRsZUNsb3NlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgJChSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKSkub2ZmKCdzaG93LmJzLm1vZGFsJywgdGhpcy5oYW5kbGVTaG93KTtcbiAgICAgICAgJChSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKSkub2ZmKCdoaWRkZW4uYnMubW9kYWwnLCB0aGlzLmhhbmRsZUNsb3NlKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHZhciBjdXJyZW50VXNlciA9IFVzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpO1xuXG4gICAgICAgIHZhciBjaGFubmVsTmFtZSA9IChcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgaWQ9J3JlbW92ZWRfY2hhbm5lbC5jaGFubmVsTmFtZSdcbiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0ndGhlIGNoYW5uZWwnXG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5jaGFubmVsTmFtZSkge1xuICAgICAgICAgICAgY2hhbm5lbE5hbWUgPSB0aGlzLnN0YXRlLmNoYW5uZWxOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlbW92ZXIgPSAoXG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgIGlkPSdyZW1vdmVkX2NoYW5uZWwuc29tZW9uZSdcbiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU29tZW9uZSdcbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnJlbW92ZXIpIHtcbiAgICAgICAgICAgIHJlbW92ZXIgPSB0aGlzLnN0YXRlLnJlbW92ZXI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VycmVudFVzZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbW9kYWwgZmFkZSdcbiAgICAgICAgICAgICAgICAgICAgcmVmPSdtb2RhbCdcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3JlbW92ZWRfZnJvbV9jaGFubmVsJ1xuICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD0nLTEnXG4gICAgICAgICAgICAgICAgICAgIHJvbGU9J2RpYWxvZydcbiAgICAgICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49J3RydWUnXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbW9kYWwtZGlhbG9nJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtb2RhbC1jb250ZW50Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbW9kYWwtaGVhZGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdjbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtZGlzbWlzcz0nbW9kYWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSdDbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49J3RydWUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnw5cnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0nbW9kYWwtdGl0bGUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ncmVtb3ZlZF9jaGFubmVsLmZyb20nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1JlbW92ZWQgZnJvbSAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSduYW1lJz57Y2hhbm5lbE5hbWV9PC9zcGFuPjwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWJvZHknPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3JlbW92ZWRfY2hhbm5lbC5yZW1vdmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSd7cmVtb3Zlcn0gcmVtb3ZlZCB5b3UgZnJvbSB7Y2hhbm5lbH0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWw6IChjaGFubmVsTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtb2RhbC1mb290ZXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtZGlzbWlzcz0nbW9kYWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3JlbW92ZWRfY2hhbm5lbC5va2F5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdPa2F5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDxkaXYvPjtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy9yZW1vdmVkX2Zyb21fY2hhbm5lbF9tb2RhbC5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQVVBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQU5BO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTEE7QUFYQTtBQWtCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUhBO0FBREE7QUFEQTtBQVlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQURBO0FBL0JBO0FBREE7QUFSQTtBQXdEQTtBQUNBO0FBQ0E7QUFDQTs7O0FBaElBO0FBZEE7QUFDQTtBQWFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2485\n");

/***/ }),

/***/ 2486:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(33);\n\nvar _redux = __webpack_require__(22);\n\nvar _preferences = __webpack_require__(213);\n\nvar _users = __webpack_require__(62);\n\nvar _constants = __webpack_require__(26);\n\nvar _preferences2 = __webpack_require__(67);\n\nvar _user_actions = __webpack_require__(71);\n\nvar _reset_status_modal = __webpack_require__(2487);\n\nvar _reset_status_modal2 = _interopRequireDefault(_reset_status_modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapStateToProps(state, ownProps) {\n    var currentUserId = state.entities.users.currentUserId;\n\n    return (0, _extends3.default)({}, ownProps, {\n        autoResetPref: (0, _preferences2.get)(state, _constants.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS, currentUserId, '')\n    });\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: (0, _redux.bindActionCreators)({\n            autoResetStatus: _user_actions.autoResetStatus,\n            setStatus: _users.setStatus,\n            savePreferences: _preferences.savePreferences\n        }, dispatch)\n    };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_reset_status_modal2.default);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4Ni5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3Jlc2V0X3N0YXR1c19tb2RhbC9pbmRleC5qcz8xOWFhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNyBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCB7Y29ubmVjdH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHtiaW5kQWN0aW9uQ3JlYXRvcnN9IGZyb20gJ3JlZHV4JztcblxuaW1wb3J0IHtzYXZlUHJlZmVyZW5jZXN9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvYWN0aW9ucy9wcmVmZXJlbmNlcyc7XG5pbXBvcnQge3NldFN0YXR1c30gZnJvbSAnbWF0dGVybW9zdC1yZWR1eC9hY3Rpb25zL3VzZXJzJztcbmltcG9ydCB7UHJlZmVyZW5jZXN9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvY29uc3RhbnRzJztcbmltcG9ydCB7Z2V0fSBmcm9tICdtYXR0ZXJtb3N0LXJlZHV4L3NlbGVjdG9ycy9lbnRpdGllcy9wcmVmZXJlbmNlcyc7XG5cbmltcG9ydCB7YXV0b1Jlc2V0U3RhdHVzfSBmcm9tICdhY3Rpb25zL3VzZXJfYWN0aW9ucy5qc3gnO1xuXG5pbXBvcnQgUmVzZXRTdGF0dXNNb2RhbCBmcm9tICcuL3Jlc2V0X3N0YXR1c19tb2RhbC5qc3gnO1xuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUsIG93blByb3BzKSB7XG4gICAgY29uc3Qge2N1cnJlbnRVc2VySWR9ID0gc3RhdGUuZW50aXRpZXMudXNlcnM7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ub3duUHJvcHMsXG4gICAgICAgIGF1dG9SZXNldFByZWY6IGdldChzdGF0ZSwgUHJlZmVyZW5jZXMuQ0FURUdPUllfQVVUT19SRVNFVF9NQU5VQUxfU1RBVFVTLCBjdXJyZW50VXNlcklkLCAnJylcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBtYXBEaXNwYXRjaFRvUHJvcHMoZGlzcGF0Y2gpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBhY3Rpb25zOiBiaW5kQWN0aW9uQ3JlYXRvcnMoe1xuICAgICAgICAgICAgYXV0b1Jlc2V0U3RhdHVzLFxuICAgICAgICAgICAgc2V0U3RhdHVzLFxuICAgICAgICAgICAgc2F2ZVByZWZlcmVuY2VzXG4gICAgICAgIH0sIGRpc3BhdGNoKVxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKFJlc2V0U3RhdHVzTW9kYWwpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvcmVzZXRfc3RhdHVzX21vZGFsL2luZGV4LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBZEE7QUFDQTtBQUNBO0FBYUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2486\n");

/***/ }),

/***/ 2487:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _constants = __webpack_require__(26);\n\nvar _utils = __webpack_require__(17);\n\nvar _confirm_modal = __webpack_require__(319);\n\nvar _confirm_modal2 = _interopRequireDefault(_confirm_modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar ResetStatusModal = function (_React$PureComponent) {\n    (0, _inherits3.default)(ResetStatusModal, _React$PureComponent);\n\n    function ResetStatusModal(props) {\n        (0, _classCallCheck3.default)(this, ResetStatusModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (ResetStatusModal.__proto__ || (0, _getPrototypeOf2.default)(ResetStatusModal)).call(this, props));\n\n        _this.onConfirm = function (checked) {\n            _this.setState({ show: false });\n\n            var newStatus = (0, _extends3.default)({}, _this.state.currentUserStatus);\n            newStatus.status = 'online';\n            _this.props.actions.setStatus(newStatus);\n\n            if (checked) {\n                var pref = { category: _constants.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS, user_id: newStatus.user_id, name: newStatus.user_id, value: 'true' };\n                _this.props.actions.savePreferences(pref.user_id, [pref]);\n            }\n        };\n\n        _this.onCancel = function (checked) {\n            _this.setState({ show: false });\n\n            if (checked) {\n                var status = (0, _extends3.default)({}, _this.state.currentUserStatus);\n                var pref = { category: _constants.Preferences.CATEGORY_AUTO_RESET_MANUAL_STATUS, user_id: status.user_id, name: status.user_id, value: 'false' };\n                _this.props.actions.savePreferences(pref.user_id, [pref]);\n            }\n        };\n\n        _this.state = {\n            show: false,\n            currentUserStatus: {}\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(ResetStatusModal, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            this.props.actions.autoResetStatus().then(function (status) {\n                var statusIsManual = status.manual;\n                var autoResetPrefNotSet = _this2.props.autoResetPref === '';\n\n                _this2.setState({\n                    currentUserStatus: status, // Set in state until status refactor where we store 'manual' field in redux\n                    show: Boolean(statusIsManual && autoResetPrefNotSet)\n                });\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var userStatus = (0, _utils.toTitleCase)(this.state.currentUserStatus.status || '');\n            var manualStatusTitle = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'modal.manaul_status.title',\n                defaultMessage: 'Your status is set to \"{status}\"',\n                values: {\n                    status: userStatus\n                }\n            });\n\n            var manualStatusMessage = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'modal.manaul_status.message',\n                defaultMessage: 'Would you like to switch your status to \"Online\"?'\n            });\n\n            var manualStatusButton = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'modal.manaul_status.button',\n                defaultMessage: 'Yes, set my status to \"Online\"'\n            });\n\n            var manualStatusCancel = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'modal.manaul_status.cancel',\n                defaultMessage: 'No, keep it as \"{status}\"',\n                values: {\n                    status: userStatus\n                }\n            });\n\n            var manualStatusCheckbox = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'modal.manaul_status.ask',\n                defaultMessage: 'Do not ask me again'\n            });\n\n            return _react2.default.createElement(_confirm_modal2.default, {\n                show: this.state.show,\n                title: manualStatusTitle,\n                message: manualStatusMessage,\n                confirmButtonText: manualStatusButton,\n                onConfirm: this.onConfirm,\n                cancelButtonText: manualStatusCancel,\n                onCancel: this.onCancel,\n                showCheckbox: true,\n                checkboxText: manualStatusCheckbox\n            });\n        }\n    }]);\n    return ResetStatusModal;\n}(_react2.default.PureComponent);\n\nResetStatusModal.propTypes = {\n\n    /*\n     * The user's preference for whether their status is automatically reset\n     */\n    autoResetPref: _propTypes2.default.string,\n    actions: _propTypes2.default.shape({\n\n        /*\n         * Function to get and then reset the user's status if needed\n         */\n        autoResetStatus: _propTypes2.default.func.isRequired,\n\n        /*\n         * Function to set the status for a user\n         */\n        setStatus: _propTypes2.default.func.isRequired,\n\n        /*\n         * Function to save user preferences\n         */\n        savePreferences: _propTypes2.default.func.isRequired\n    }).isRequired\n};\nexports.default = ResetStatusModal;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4Ny5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3Jlc2V0X3N0YXR1c19tb2RhbC9yZXNldF9zdGF0dXNfbW9kYWwuanN4P2NmYmIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCB7UHJlZmVyZW5jZXN9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvY29uc3RhbnRzJztcblxuaW1wb3J0IHt0b1RpdGxlQ2FzZX0gZnJvbSAndXRpbHMvdXRpbHMuanN4JztcblxuaW1wb3J0IENvbmZpcm1Nb2RhbCBmcm9tICdjb21wb25lbnRzL2NvbmZpcm1fbW9kYWwuanN4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVzZXRTdGF0dXNNb2RhbCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG5cbiAgICAgICAgLypcbiAgICAgICAgICogVGhlIHVzZXIncyBwcmVmZXJlbmNlIGZvciB3aGV0aGVyIHRoZWlyIHN0YXR1cyBpcyBhdXRvbWF0aWNhbGx5IHJlc2V0XG4gICAgICAgICAqL1xuICAgICAgICBhdXRvUmVzZXRQcmVmOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBhY3Rpb25zOiBQcm9wVHlwZXMuc2hhcGUoe1xuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogRnVuY3Rpb24gdG8gZ2V0IGFuZCB0aGVuIHJlc2V0IHRoZSB1c2VyJ3Mgc3RhdHVzIGlmIG5lZWRlZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBhdXRvUmVzZXRTdGF0dXM6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBGdW5jdGlvbiB0byBzZXQgdGhlIHN0YXR1cyBmb3IgYSB1c2VyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHNldFN0YXR1czogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIEZ1bmN0aW9uIHRvIHNhdmUgdXNlciBwcmVmZXJlbmNlc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzYXZlUHJlZmVyZW5jZXM6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbiAgICAgICAgfSkuaXNSZXF1aXJlZFxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICBjdXJyZW50VXNlclN0YXR1czoge31cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5hY3Rpb25zLmF1dG9SZXNldFN0YXR1cygpLnRoZW4oXG4gICAgICAgICAgICAoc3RhdHVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzSXNNYW51YWwgPSBzdGF0dXMubWFudWFsO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dG9SZXNldFByZWZOb3RTZXQgPSB0aGlzLnByb3BzLmF1dG9SZXNldFByZWYgPT09ICcnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyU3RhdHVzOiBzdGF0dXMsIC8vIFNldCBpbiBzdGF0ZSB1bnRpbCBzdGF0dXMgcmVmYWN0b3Igd2hlcmUgd2Ugc3RvcmUgJ21hbnVhbCcgZmllbGQgaW4gcmVkdXhcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogQm9vbGVhbihzdGF0dXNJc01hbnVhbCAmJiBhdXRvUmVzZXRQcmVmTm90U2V0KVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIG9uQ29uZmlybSA9IChjaGVja2VkKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3c6IGZhbHNlfSk7XG5cbiAgICAgICAgY29uc3QgbmV3U3RhdHVzID0gey4uLnRoaXMuc3RhdGUuY3VycmVudFVzZXJTdGF0dXN9O1xuICAgICAgICBuZXdTdGF0dXMuc3RhdHVzID0gJ29ubGluZSc7XG4gICAgICAgIHRoaXMucHJvcHMuYWN0aW9ucy5zZXRTdGF0dXMobmV3U3RhdHVzKTtcblxuICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgY29uc3QgcHJlZiA9IHtjYXRlZ29yeTogUHJlZmVyZW5jZXMuQ0FURUdPUllfQVVUT19SRVNFVF9NQU5VQUxfU1RBVFVTLCB1c2VyX2lkOiBuZXdTdGF0dXMudXNlcl9pZCwgbmFtZTogbmV3U3RhdHVzLnVzZXJfaWQsIHZhbHVlOiAndHJ1ZSd9O1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY3Rpb25zLnNhdmVQcmVmZXJlbmNlcyhwcmVmLnVzZXJfaWQsIFtwcmVmXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNhbmNlbCA9IChjaGVja2VkKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3c6IGZhbHNlfSk7XG5cbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHsuLi50aGlzLnN0YXRlLmN1cnJlbnRVc2VyU3RhdHVzfTtcbiAgICAgICAgICAgIGNvbnN0IHByZWYgPSB7Y2F0ZWdvcnk6IFByZWZlcmVuY2VzLkNBVEVHT1JZX0FVVE9fUkVTRVRfTUFOVUFMX1NUQVRVUywgdXNlcl9pZDogc3RhdHVzLnVzZXJfaWQsIG5hbWU6IHN0YXR1cy51c2VyX2lkLCB2YWx1ZTogJ2ZhbHNlJ307XG4gICAgICAgICAgICB0aGlzLnByb3BzLmFjdGlvbnMuc2F2ZVByZWZlcmVuY2VzKHByZWYudXNlcl9pZCwgW3ByZWZdKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgdXNlclN0YXR1cyA9IHRvVGl0bGVDYXNlKHRoaXMuc3RhdGUuY3VycmVudFVzZXJTdGF0dXMuc3RhdHVzIHx8ICcnKTtcbiAgICAgICAgY29uc3QgbWFudWFsU3RhdHVzVGl0bGUgPSAoXG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgIGlkPSdtb2RhbC5tYW5hdWxfc3RhdHVzLnRpdGxlJ1xuICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdZb3VyIHN0YXR1cyBpcyBzZXQgdG8gXCJ7c3RhdHVzfVwiJ1xuICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHVzZXJTdGF0dXNcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBtYW51YWxTdGF0dXNNZXNzYWdlID0gKFxuICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICBpZD0nbW9kYWwubWFuYXVsX3N0YXR1cy5tZXNzYWdlJ1xuICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdXb3VsZCB5b3UgbGlrZSB0byBzd2l0Y2ggeW91ciBzdGF0dXMgdG8gXCJPbmxpbmVcIj8nXG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IG1hbnVhbFN0YXR1c0J1dHRvbiA9IChcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgaWQ9J21vZGFsLm1hbmF1bF9zdGF0dXMuYnV0dG9uJ1xuICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdZZXMsIHNldCBteSBzdGF0dXMgdG8gXCJPbmxpbmVcIidcbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgbWFudWFsU3RhdHVzQ2FuY2VsID0gKFxuICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICBpZD0nbW9kYWwubWFuYXVsX3N0YXR1cy5jYW5jZWwnXG4gICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05vLCBrZWVwIGl0IGFzIFwie3N0YXR1c31cIidcbiAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB1c2VyU3RhdHVzXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgbWFudWFsU3RhdHVzQ2hlY2tib3ggPSAoXG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgIGlkPSdtb2RhbC5tYW5hdWxfc3RhdHVzLmFzaydcbiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRG8gbm90IGFzayBtZSBhZ2FpbidcbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxDb25maXJtTW9kYWxcbiAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3d9XG4gICAgICAgICAgICAgICAgdGl0bGU9e21hbnVhbFN0YXR1c1RpdGxlfVxuICAgICAgICAgICAgICAgIG1lc3NhZ2U9e21hbnVhbFN0YXR1c01lc3NhZ2V9XG4gICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ9e21hbnVhbFN0YXR1c0J1dHRvbn1cbiAgICAgICAgICAgICAgICBvbkNvbmZpcm09e3RoaXMub25Db25maXJtfVxuICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ9e21hbnVhbFN0YXR1c0NhbmNlbH1cbiAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5vbkNhbmNlbH1cbiAgICAgICAgICAgICAgICBzaG93Q2hlY2tib3g9e3RydWV9XG4gICAgICAgICAgICAgICAgY2hlY2tib3hUZXh0PXttYW51YWxTdGF0dXNDaGVja2JveH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvcmVzZXRfc3RhdHVzX21vZGFsL3Jlc2V0X3N0YXR1c19tb2RhbC5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBWkE7QUFDQTtBQUNBO0FBV0E7OztBQTBCQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUF3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkNBO0FBcUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTFDQTtBQUNBO0FBQ0E7QUFGQTtBQUhBO0FBT0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7OztBQXlCQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFDQTtBQVFBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFDQTtBQVFBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBWUE7OztBQWhJQTtBQUNBO0FBREE7QUFDQTtBQUVBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBZkE7QUFOQTtBQURBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2487\n");

/***/ }),

/***/ 2488:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _keys = __webpack_require__(60);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _modal_store = __webpack_require__(2164);\n\nvar _modal_store2 = _interopRequireDefault(_modal_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar allShortcuts = (0, _reactIntl.defineMessages)({\n    mainHeader: {\n        default: {\n            id: 'shortcuts.header',\n            defaultMessage: 'Keyboard Shortcuts\\tCtrl|/'\n        },\n        mac: {\n            id: 'shortcuts.header.mac',\n            defaultMessage: 'Keyboard Shortcuts\\t|/'\n        }\n    },\n    navHeader: {\n        id: 'shortcuts.nav.header',\n        defaultMessage: 'Navigation'\n    },\n    navPrev: {\n        default: {\n            id: 'shortcuts.nav.prev',\n            defaultMessage: 'Previous channel:\\tAlt|Up'\n        },\n        mac: {\n            id: 'shortcuts.nav.prev.mac',\n            defaultMessage: 'Previous channel:\\t|Up'\n        }\n    },\n    navNext: {\n        default: {\n            id: 'shortcuts.nav.next',\n            defaultMessage: 'Next channel:\\tAlt|Down'\n        },\n        mac: {\n            id: 'shortcuts.nav.next.mac',\n            defaultMessage: 'Next channel:\\t|Down'\n        }\n    },\n    navUnreadPrev: {\n        default: {\n            id: 'shortcuts.nav.unread_prev',\n            defaultMessage: 'Previous unread channel:\\tAlt|Shift|Up'\n        },\n        mac: {\n            id: 'shortcuts.nav.unread_prev.mac',\n            defaultMessage: 'Previous unread channel:\\t|Shift|Up'\n        }\n    },\n    navUnreadNext: {\n        default: {\n            id: 'shortcuts.nav.unread_next',\n            defaultMessage: 'Next unread channel:\\tAlt|Shift|Down'\n        },\n        mac: {\n            id: 'shortcuts.nav.unread_next.mac',\n            defaultMessage: 'Next unread channel:\\t|Shift|Down'\n        }\n    },\n    navSwitcher: {\n        default: {\n            id: 'shortcuts.nav.switcher',\n            defaultMessage: 'Quick channel switcher:\\tCtrl|K'\n        },\n        mac: {\n            id: 'shortcuts.nav.switcher.mac',\n            defaultMessage: 'Quick channel switcher:\\t|K'\n        }\n    },\n    navDMMenu: {\n        default: {\n            id: 'shortcuts.nav.direct_messages_menu',\n            defaultMessage: 'Direct messages menu:\\tCtrl|Shift|K'\n        },\n        mac: {\n            id: 'shortcuts.nav.direct_messages_menu.mac',\n            defaultMessage: 'Direct messages menu:\\t|Shift|K'\n        }\n    },\n    navSettings: {\n        default: {\n            id: 'shortcuts.nav.settings',\n            defaultMessage: 'Account settings:\\tCtrl|Shift|A'\n        },\n        mac: {\n            id: 'shortcuts.nav.settings.mac',\n            defaultMessage: 'Account settings:\\t|Shift|A'\n        }\n    },\n    navMentions: {\n        default: {\n            id: 'shortcuts.nav.recent_mentions',\n            defaultMessage: 'Recent mentions:\\tCtrl|Shift|M'\n        },\n        mac: {\n            id: 'shortcuts.nav.recent_mentions.mac',\n            defaultMessage: 'Recent mentions:\\t|Shift|M'\n        }\n    },\n    msgHeader: {\n        id: 'shortcuts.msgs.header',\n        defaultMessage: 'Messages'\n    },\n    msgInputHeader: {\n        id: 'shortcuts.msgs.input.header',\n        defaultMessage: 'Works inside an empty input field'\n    },\n    msgEdit: {\n        id: 'shortcuts.msgs.edit',\n        defaultMessage: 'Edit last message in channel:\\tUp'\n    },\n    msgReply: {\n        id: 'shortcuts.msgs.reply',\n        defaultMessage: 'Reply to last message in channel:\\tShift|Up'\n    },\n    msgReprintPrev: {\n        default: {\n            id: 'shortcuts.msgs.reprint_prev',\n            defaultMessage: 'Reprint previous message:\\tCtrl|Up'\n        },\n        mac: {\n            id: 'shortcuts.msgs.reprint_prev.mac',\n            defaultMessage: 'Reprint previous message:\\t|Up'\n        }\n    },\n    msgReprintNext: {\n        default: {\n            id: 'shortcuts.msgs.reprint_next',\n            defaultMessage: 'Reprint next message:\\tCtrl|Down'\n        },\n        mac: {\n            id: 'shortcuts.msgs.reprint_next.mac',\n            defaultMessage: 'Reprint next message:\\t|Down'\n        }\n    },\n    msgCompHeader: {\n        id: 'shortcuts.msgs.comp.header',\n        defaultMessage: 'Autocomplete'\n    },\n    msgCompUsername: {\n        id: 'shortcuts.msgs.comp.username',\n        defaultMessage: 'Username:\\t@|[a-z]|Tab'\n    },\n    msgCompChannel: {\n        id: 'shortcuts.msgs.comp.channel',\n        defaultMessage: 'Channel:\\t~|[a-z]|Tab'\n    },\n    msgCompEmoji: {\n        id: 'shortcuts.msgs.comp.emoji',\n        defaultMessage: 'Emoji:\\t:|[a-z]|Tab'\n    },\n    filesHeader: {\n        id: 'shortcuts.files.header',\n        defaultMessage: 'Files'\n    },\n    filesUpload: {\n        default: {\n            id: 'shortcuts.files.upload',\n            defaultMessage: 'Upload files:\\tCtrl|U'\n        },\n        mac: {\n            id: 'shortcuts.files.upload.mac',\n            defaultMessage: 'Upload files:\\t|U'\n        }\n    },\n    browserHeader: {\n        id: 'shortcuts.browser.header',\n        defaultMessage: 'Built-in Browser Commands'\n    },\n    browserChannelPrev: {\n        default: {\n            id: 'shortcuts.browser.channel_prev',\n            defaultMessage: 'Back in history:\\tAlt|Left'\n        },\n        mac: {\n            id: 'shortcuts.browser.channel_prev.mac',\n            defaultMessage: 'Back in history:\\t|['\n        }\n    },\n    browserChannelNext: {\n        default: {\n            id: 'shortcuts.browser.channel_next',\n            defaultMessage: 'Forward in history:\\tAlt|Right'\n        },\n        mac: {\n            id: 'shortcuts.browser.channel_next.mac',\n            defaultMessage: 'Forward in history:\\t|]'\n        }\n    },\n    browserFontIncrease: {\n        default: {\n            id: 'shortcuts.browser.font_increase',\n            defaultMessage: 'Zoom in:\\tCtrl|+'\n        },\n        mac: {\n            id: 'shortcuts.browser.font_increase.mac',\n            defaultMessage: 'Zoom in:\\t|+'\n        }\n    },\n    browserFontDecrease: {\n        default: {\n            id: 'shortcuts.browser.font_decrease',\n            defaultMessage: 'Zoom out:\\tCtrl|-'\n        },\n        mac: {\n            id: 'shortcuts.browser.font_decrease.mac',\n            defaultMessage: 'Zoom out:\\t|-'\n        }\n    },\n    browserInputHeader: {\n        id: 'shortcuts.browser.input.header',\n        defaultMessage: 'Works inside an input field'\n    },\n    browserHighlightPrev: {\n        id: 'shortcuts.browser.highlight_prev',\n        defaultMessage: 'Highlight text to the previous line:\\tShift|Up'\n    },\n    browserHighlightNext: {\n        id: 'shortcuts.browser.highlight_next',\n        defaultMessage: 'Highlight text to the next line:\\tShift|Down'\n    },\n    browserNewline: {\n        id: 'shortcuts.browser.newline',\n        defaultMessage: 'Create a new line:\\tShift|Enter'\n    },\n    info: {\n        id: 'shortcuts.info',\n        defaultMessage: 'Begin a message with / for a list of all the commands at your disposal.'\n    }\n});\n\nvar ShortcutsModal = function (_React$PureComponent) {\n    (0, _inherits3.default)(ShortcutsModal, _React$PureComponent);\n\n    function ShortcutsModal(props) {\n        (0, _classCallCheck3.default)(this, ShortcutsModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (ShortcutsModal.__proto__ || (0, _getPrototypeOf2.default)(ShortcutsModal)).call(this, props));\n\n        _this.handleToggle = function (value) {\n            _this.setState({\n                show: value\n            });\n        };\n\n        _this.handleHide = function () {\n            _this.setState({ show: false });\n        };\n\n        _this.state = {\n            show: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(ShortcutsModal, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _modal_store2.default.addModalListener(_constants2.default.ActionTypes.TOGGLE_SHORTCUTS_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _modal_store2.default.removeModalListener(_constants2.default.ActionTypes.TOGGLE_SHORTCUTS_MODAL, this.handleToggle);\n        }\n    }, {\n        key: 'getShortcuts',\n        value: function getShortcuts() {\n            var isMac = this.props.isMac;\n\n            var shortcuts = {};\n            (0, _keys2.default)(allShortcuts).forEach(function (s) {\n                if (isMac && allShortcuts[s].mac) {\n                    shortcuts[s] = allShortcuts[s].mac;\n                } else if (!isMac && allShortcuts[s].default) {\n                    shortcuts[s] = allShortcuts[s].default;\n                } else {\n                    shortcuts[s] = allShortcuts[s];\n                }\n            });\n\n            return shortcuts;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var shortcuts = this.getShortcuts();\n            var formatMessage = this.props.intl.formatMessage;\n\n\n            return _react2.default.createElement(\n                _reactBootstrap.Modal,\n                {\n                    dialogClassName: 'shortcuts-modal',\n                    show: this.state.show,\n                    onHide: this.handleHide,\n                    onExited: this.handleHide\n                },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'shortcuts-content' },\n                    _react2.default.createElement(\n                        _reactBootstrap.Modal.Header,\n                        { closeButton: true },\n                        _react2.default.createElement(\n                            _reactBootstrap.Modal.Title,\n                            null,\n                            _react2.default.createElement(\n                                'strong',\n                                null,\n                                renderShortcut(formatMessage(shortcuts.mainHeader))\n                            )\n                        )\n                    ),\n                    _react2.default.createElement(\n                        _reactBootstrap.Modal.Body,\n                        { ref: 'modalBody' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'row' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col-sm-4' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'section' },\n                                    _react2.default.createElement(\n                                        'div',\n                                        null,\n                                        _react2.default.createElement(\n                                            'h4',\n                                            { className: 'section-title' },\n                                            _react2.default.createElement(\n                                                'strong',\n                                                null,\n                                                formatMessage(shortcuts.navHeader)\n                                            )\n                                        ),\n                                        renderShortcut(formatMessage(shortcuts.navPrev)),\n                                        renderShortcut(formatMessage(shortcuts.navNext)),\n                                        renderShortcut(formatMessage(shortcuts.navUnreadPrev)),\n                                        renderShortcut(formatMessage(shortcuts.navUnreadNext)),\n                                        renderShortcut(formatMessage(shortcuts.navSwitcher)),\n                                        renderShortcut(formatMessage(shortcuts.navDMMenu)),\n                                        renderShortcut(formatMessage(shortcuts.navSettings)),\n                                        renderShortcut(formatMessage(shortcuts.navMentions))\n                                    )\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col-sm-4' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'section' },\n                                    _react2.default.createElement(\n                                        'div',\n                                        null,\n                                        _react2.default.createElement(\n                                            'h4',\n                                            { className: 'section-title' },\n                                            _react2.default.createElement(\n                                                'strong',\n                                                null,\n                                                formatMessage(shortcuts.msgHeader)\n                                            )\n                                        ),\n                                        _react2.default.createElement(\n                                            'span',\n                                            null,\n                                            _react2.default.createElement(\n                                                'strong',\n                                                null,\n                                                formatMessage(shortcuts.msgInputHeader)\n                                            )\n                                        ),\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'subsection' },\n                                            renderShortcut(formatMessage(shortcuts.msgEdit)),\n                                            renderShortcut(formatMessage(shortcuts.msgReply)),\n                                            renderShortcut(formatMessage(shortcuts.msgReprintPrev)),\n                                            renderShortcut(formatMessage(shortcuts.msgReprintNext))\n                                        ),\n                                        _react2.default.createElement(\n                                            'span',\n                                            null,\n                                            _react2.default.createElement(\n                                                'strong',\n                                                null,\n                                                formatMessage(shortcuts.msgCompHeader)\n                                            )\n                                        ),\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'subsection' },\n                                            renderShortcut(formatMessage(shortcuts.msgCompUsername)),\n                                            renderShortcut(formatMessage(shortcuts.msgCompChannel)),\n                                            renderShortcut(formatMessage(shortcuts.msgCompEmoji))\n                                        )\n                                    )\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col-sm-4' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'section' },\n                                    _react2.default.createElement(\n                                        'div',\n                                        null,\n                                        _react2.default.createElement(\n                                            'h4',\n                                            { className: 'section-title' },\n                                            _react2.default.createElement(\n                                                'strong',\n                                                null,\n                                                formatMessage(shortcuts.filesHeader)\n                                            )\n                                        ),\n                                        renderShortcut(formatMessage(shortcuts.filesUpload))\n                                    ),\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: 'section--lower' },\n                                        _react2.default.createElement(\n                                            'h4',\n                                            { className: 'section-title' },\n                                            _react2.default.createElement(\n                                                'strong',\n                                                null,\n                                                formatMessage(shortcuts.browserHeader)\n                                            )\n                                        ),\n                                        renderShortcut(formatMessage(shortcuts.browserChannelPrev)),\n                                        renderShortcut(formatMessage(shortcuts.browserChannelNext)),\n                                        renderShortcut(formatMessage(shortcuts.browserFontIncrease)),\n                                        renderShortcut(formatMessage(shortcuts.browserFontDecrease)),\n                                        _react2.default.createElement(\n                                            'span',\n                                            null,\n                                            _react2.default.createElement(\n                                                'strong',\n                                                null,\n                                                formatMessage(shortcuts.browserInputHeader)\n                                            )\n                                        ),\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'subsection' },\n                                            renderShortcut(formatMessage(shortcuts.browserHighlightPrev)),\n                                            renderShortcut(formatMessage(shortcuts.browserHighlightNext)),\n                                            renderShortcut(formatMessage(shortcuts.browserNewline))\n                                        )\n                                    )\n                                )\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'info__label' },\n                            formatMessage(shortcuts.info)\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return ShortcutsModal;\n}(_react2.default.PureComponent);\n\nShortcutsModal.propTypes = {\n    intl: _reactIntl.intlShape.isRequired,\n    isMac: _propTypes2.default.bool.isRequired\n};\n\n\nfunction renderShortcut(text) {\n    if (!text) {\n        return null;\n    }\n\n    var shortcut = text.split('\\t');\n    var description = _react2.default.createElement(\n        'span',\n        null,\n        shortcut[0]\n    );\n\n    var keys = null;\n    if (shortcut.length > 1) {\n        keys = shortcut[1].split('|').map(function (key) {\n            return _react2.default.createElement(\n                'span',\n                {\n                    className: 'shortcut-key',\n                    key: key\n                },\n                key\n            );\n        });\n    }\n\n    return _react2.default.createElement(\n        'div',\n        { className: 'shortcut-line' },\n        description,\n        keys\n    );\n}\n\nexports.default = (0, _reactIntl.injectIntl)(ShortcutsModal);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4OC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3Nob3J0Y3V0c19tb2RhbC5qc3g/MzUwMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtNb2RhbH0gZnJvbSAncmVhY3QtYm9vdHN0cmFwJztcbmltcG9ydCB7ZGVmaW5lTWVzc2FnZXMsIGluamVjdEludGwsIGludGxTaGFwZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCBNb2RhbFN0b3JlIGZyb20gJ3N0b3Jlcy9tb2RhbF9zdG9yZS5qc3gnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuXG5jb25zdCBhbGxTaG9ydGN1dHMgPSBkZWZpbmVNZXNzYWdlcyh7XG4gICAgbWFpbkhlYWRlcjoge1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5oZWFkZXInLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdLZXlib2FyZCBTaG9ydGN1dHNcXHRDdHJsfC8nXG4gICAgICAgIH0sXG4gICAgICAgIG1hYzoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMuaGVhZGVyLm1hYycsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0tleWJvYXJkIFNob3J0Y3V0c1xcdOKMmHwvJ1xuICAgICAgICB9XG4gICAgfSxcbiAgICBuYXZIZWFkZXI6IHtcbiAgICAgICAgaWQ6ICdzaG9ydGN1dHMubmF2LmhlYWRlcicsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTmF2aWdhdGlvbidcbiAgICB9LFxuICAgIG5hdlByZXY6IHtcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMubmF2LnByZXYnLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQcmV2aW91cyBjaGFubmVsOlxcdEFsdHxVcCdcbiAgICAgICAgfSxcbiAgICAgICAgbWFjOiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5uYXYucHJldi5tYWMnLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQcmV2aW91cyBjaGFubmVsOlxcdOKMpXxVcCdcbiAgICAgICAgfVxuICAgIH0sXG4gICAgbmF2TmV4dDoge1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5uYXYubmV4dCcsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ05leHQgY2hhbm5lbDpcXHRBbHR8RG93bidcbiAgICAgICAgfSxcbiAgICAgICAgbWFjOiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5uYXYubmV4dC5tYWMnLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdOZXh0IGNoYW5uZWw6XFx04oylfERvd24nXG4gICAgICAgIH1cbiAgICB9LFxuICAgIG5hdlVucmVhZFByZXY6IHtcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMubmF2LnVucmVhZF9wcmV2JyxcbiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUHJldmlvdXMgdW5yZWFkIGNoYW5uZWw6XFx0QWx0fFNoaWZ0fFVwJ1xuICAgICAgICB9LFxuICAgICAgICBtYWM6IHtcbiAgICAgICAgICAgIGlkOiAnc2hvcnRjdXRzLm5hdi51bnJlYWRfcHJldi5tYWMnLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQcmV2aW91cyB1bnJlYWQgY2hhbm5lbDpcXHTijKV8U2hpZnR8VXAnXG4gICAgICAgIH1cbiAgICB9LFxuICAgIG5hdlVucmVhZE5leHQ6IHtcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMubmF2LnVucmVhZF9uZXh0JyxcbiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTmV4dCB1bnJlYWQgY2hhbm5lbDpcXHRBbHR8U2hpZnR8RG93bidcbiAgICAgICAgfSxcbiAgICAgICAgbWFjOiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5uYXYudW5yZWFkX25leHQubWFjJyxcbiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTmV4dCB1bnJlYWQgY2hhbm5lbDpcXHTijKV8U2hpZnR8RG93bidcbiAgICAgICAgfVxuICAgIH0sXG4gICAgbmF2U3dpdGNoZXI6IHtcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMubmF2LnN3aXRjaGVyJyxcbiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUXVpY2sgY2hhbm5lbCBzd2l0Y2hlcjpcXHRDdHJsfEsnXG4gICAgICAgIH0sXG4gICAgICAgIG1hYzoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMubmF2LnN3aXRjaGVyLm1hYycsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1F1aWNrIGNoYW5uZWwgc3dpdGNoZXI6XFx04oyYfEsnXG4gICAgICAgIH1cbiAgICB9LFxuICAgIG5hdkRNTWVudToge1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5uYXYuZGlyZWN0X21lc3NhZ2VzX21lbnUnLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdEaXJlY3QgbWVzc2FnZXMgbWVudTpcXHRDdHJsfFNoaWZ0fEsnXG4gICAgICAgIH0sXG4gICAgICAgIG1hYzoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMubmF2LmRpcmVjdF9tZXNzYWdlc19tZW51Lm1hYycsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0RpcmVjdCBtZXNzYWdlcyBtZW51OlxcdOKMmHxTaGlmdHxLJ1xuICAgICAgICB9XG4gICAgfSxcbiAgICBuYXZTZXR0aW5nczoge1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5uYXYuc2V0dGluZ3MnLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdBY2NvdW50IHNldHRpbmdzOlxcdEN0cmx8U2hpZnR8QSdcbiAgICAgICAgfSxcbiAgICAgICAgbWFjOiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5uYXYuc2V0dGluZ3MubWFjJyxcbiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWNjb3VudCBzZXR0aW5nczpcXHTijJh8U2hpZnR8QSdcbiAgICAgICAgfVxuICAgIH0sXG4gICAgbmF2TWVudGlvbnM6IHtcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMubmF2LnJlY2VudF9tZW50aW9ucycsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1JlY2VudCBtZW50aW9uczpcXHRDdHJsfFNoaWZ0fE0nXG4gICAgICAgIH0sXG4gICAgICAgIG1hYzoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMubmF2LnJlY2VudF9tZW50aW9ucy5tYWMnLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZWNlbnQgbWVudGlvbnM6XFx04oyYfFNoaWZ0fE0nXG4gICAgICAgIH1cbiAgICB9LFxuICAgIG1zZ0hlYWRlcjoge1xuICAgICAgICBpZDogJ3Nob3J0Y3V0cy5tc2dzLmhlYWRlcicsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTWVzc2FnZXMnXG4gICAgfSxcbiAgICBtc2dJbnB1dEhlYWRlcjoge1xuICAgICAgICBpZDogJ3Nob3J0Y3V0cy5tc2dzLmlucHV0LmhlYWRlcicsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnV29ya3MgaW5zaWRlIGFuIGVtcHR5IGlucHV0IGZpZWxkJ1xuICAgIH0sXG4gICAgbXNnRWRpdDoge1xuICAgICAgICBpZDogJ3Nob3J0Y3V0cy5tc2dzLmVkaXQnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0VkaXQgbGFzdCBtZXNzYWdlIGluIGNoYW5uZWw6XFx0VXAnXG4gICAgfSxcbiAgICBtc2dSZXBseToge1xuICAgICAgICBpZDogJ3Nob3J0Y3V0cy5tc2dzLnJlcGx5JyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZXBseSB0byBsYXN0IG1lc3NhZ2UgaW4gY2hhbm5lbDpcXHRTaGlmdHxVcCdcbiAgICB9LFxuICAgIG1zZ1JlcHJpbnRQcmV2OiB7XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGlkOiAnc2hvcnRjdXRzLm1zZ3MucmVwcmludF9wcmV2JyxcbiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVwcmludCBwcmV2aW91cyBtZXNzYWdlOlxcdEN0cmx8VXAnXG4gICAgICAgIH0sXG4gICAgICAgIG1hYzoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMubXNncy5yZXByaW50X3ByZXYubWFjJyxcbiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVwcmludCBwcmV2aW91cyBtZXNzYWdlOlxcdOKMmHxVcCdcbiAgICAgICAgfVxuICAgIH0sXG4gICAgbXNnUmVwcmludE5leHQ6IHtcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMubXNncy5yZXByaW50X25leHQnLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdSZXByaW50IG5leHQgbWVzc2FnZTpcXHRDdHJsfERvd24nXG4gICAgICAgIH0sXG4gICAgICAgIG1hYzoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMubXNncy5yZXByaW50X25leHQubWFjJyxcbiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnUmVwcmludCBuZXh0IG1lc3NhZ2U6XFx04oyYfERvd24nXG4gICAgICAgIH1cbiAgICB9LFxuICAgIG1zZ0NvbXBIZWFkZXI6IHtcbiAgICAgICAgaWQ6ICdzaG9ydGN1dHMubXNncy5jb21wLmhlYWRlcicsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQXV0b2NvbXBsZXRlJ1xuICAgIH0sXG4gICAgbXNnQ29tcFVzZXJuYW1lOiB7XG4gICAgICAgIGlkOiAnc2hvcnRjdXRzLm1zZ3MuY29tcC51c2VybmFtZScsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVXNlcm5hbWU6XFx0QHxbYS16XXxUYWInXG4gICAgfSxcbiAgICBtc2dDb21wQ2hhbm5lbDoge1xuICAgICAgICBpZDogJ3Nob3J0Y3V0cy5tc2dzLmNvbXAuY2hhbm5lbCcsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2hhbm5lbDpcXHR+fFthLXpdfFRhYidcbiAgICB9LFxuICAgIG1zZ0NvbXBFbW9qaToge1xuICAgICAgICBpZDogJ3Nob3J0Y3V0cy5tc2dzLmNvbXAuZW1vamknLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0Vtb2ppOlxcdDp8W2Etel18VGFiJ1xuICAgIH0sXG4gICAgZmlsZXNIZWFkZXI6IHtcbiAgICAgICAgaWQ6ICdzaG9ydGN1dHMuZmlsZXMuaGVhZGVyJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdGaWxlcydcbiAgICB9LFxuICAgIGZpbGVzVXBsb2FkOiB7XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGlkOiAnc2hvcnRjdXRzLmZpbGVzLnVwbG9hZCcsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VwbG9hZCBmaWxlczpcXHRDdHJsfFUnXG4gICAgICAgIH0sXG4gICAgICAgIG1hYzoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMuZmlsZXMudXBsb2FkLm1hYycsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VwbG9hZCBmaWxlczpcXHTijJh8VSdcbiAgICAgICAgfVxuICAgIH0sXG4gICAgYnJvd3NlckhlYWRlcjoge1xuICAgICAgICBpZDogJ3Nob3J0Y3V0cy5icm93c2VyLmhlYWRlcicsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQnVpbHQtaW4gQnJvd3NlciBDb21tYW5kcydcbiAgICB9LFxuICAgIGJyb3dzZXJDaGFubmVsUHJldjoge1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5icm93c2VyLmNoYW5uZWxfcHJldicsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0JhY2sgaW4gaGlzdG9yeTpcXHRBbHR8TGVmdCdcbiAgICAgICAgfSxcbiAgICAgICAgbWFjOiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5icm93c2VyLmNoYW5uZWxfcHJldi5tYWMnLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdCYWNrIGluIGhpc3Rvcnk6XFx04oyYfFsnXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGJyb3dzZXJDaGFubmVsTmV4dDoge1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5icm93c2VyLmNoYW5uZWxfbmV4dCcsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ZvcndhcmQgaW4gaGlzdG9yeTpcXHRBbHR8UmlnaHQnXG4gICAgICAgIH0sXG4gICAgICAgIG1hYzoge1xuICAgICAgICAgICAgaWQ6ICdzaG9ydGN1dHMuYnJvd3Nlci5jaGFubmVsX25leHQubWFjJyxcbiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRm9yd2FyZCBpbiBoaXN0b3J5OlxcdOKMmHxdJ1xuICAgICAgICB9XG4gICAgfSxcbiAgICBicm93c2VyRm9udEluY3JlYXNlOiB7XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGlkOiAnc2hvcnRjdXRzLmJyb3dzZXIuZm9udF9pbmNyZWFzZScsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1pvb20gaW46XFx0Q3RybHwrJ1xuICAgICAgICB9LFxuICAgICAgICBtYWM6IHtcbiAgICAgICAgICAgIGlkOiAnc2hvcnRjdXRzLmJyb3dzZXIuZm9udF9pbmNyZWFzZS5tYWMnLFxuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdab29tIGluOlxcdOKMmHwrJ1xuICAgICAgICB9XG4gICAgfSxcbiAgICBicm93c2VyRm9udERlY3JlYXNlOiB7XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGlkOiAnc2hvcnRjdXRzLmJyb3dzZXIuZm9udF9kZWNyZWFzZScsXG4gICAgICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1pvb20gb3V0OlxcdEN0cmx8LSdcbiAgICAgICAgfSxcbiAgICAgICAgbWFjOiB7XG4gICAgICAgICAgICBpZDogJ3Nob3J0Y3V0cy5icm93c2VyLmZvbnRfZGVjcmVhc2UubWFjJyxcbiAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnWm9vbSBvdXQ6XFx04oyYfC0nXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGJyb3dzZXJJbnB1dEhlYWRlcjoge1xuICAgICAgICBpZDogJ3Nob3J0Y3V0cy5icm93c2VyLmlucHV0LmhlYWRlcicsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnV29ya3MgaW5zaWRlIGFuIGlucHV0IGZpZWxkJ1xuICAgIH0sXG4gICAgYnJvd3NlckhpZ2hsaWdodFByZXY6IHtcbiAgICAgICAgaWQ6ICdzaG9ydGN1dHMuYnJvd3Nlci5oaWdobGlnaHRfcHJldicsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnSGlnaGxpZ2h0IHRleHQgdG8gdGhlIHByZXZpb3VzIGxpbmU6XFx0U2hpZnR8VXAnXG4gICAgfSxcbiAgICBicm93c2VySGlnaGxpZ2h0TmV4dDoge1xuICAgICAgICBpZDogJ3Nob3J0Y3V0cy5icm93c2VyLmhpZ2hsaWdodF9uZXh0JyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdIaWdobGlnaHQgdGV4dCB0byB0aGUgbmV4dCBsaW5lOlxcdFNoaWZ0fERvd24nXG4gICAgfSxcbiAgICBicm93c2VyTmV3bGluZToge1xuICAgICAgICBpZDogJ3Nob3J0Y3V0cy5icm93c2VyLm5ld2xpbmUnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0NyZWF0ZSBhIG5ldyBsaW5lOlxcdFNoaWZ0fEVudGVyJ1xuICAgIH0sXG4gICAgaW5mbzoge1xuICAgICAgICBpZDogJ3Nob3J0Y3V0cy5pbmZvJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdCZWdpbiBhIG1lc3NhZ2Ugd2l0aCAvIGZvciBhIGxpc3Qgb2YgYWxsIHRoZSBjb21tYW5kcyBhdCB5b3VyIGRpc3Bvc2FsLidcbiAgICB9XG59KTtcblxuY2xhc3MgU2hvcnRjdXRzTW9kYWwgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBpbnRsOiBpbnRsU2hhcGUuaXNSZXF1aXJlZCxcbiAgICAgICAgaXNNYWM6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWRcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNob3c6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIE1vZGFsU3RvcmUuYWRkTW9kYWxMaXN0ZW5lcihDb25zdGFudHMuQWN0aW9uVHlwZXMuVE9HR0xFX1NIT1JUQ1VUU19NT0RBTCwgdGhpcy5oYW5kbGVUb2dnbGUpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBNb2RhbFN0b3JlLnJlbW92ZU1vZGFsTGlzdGVuZXIoQ29uc3RhbnRzLkFjdGlvblR5cGVzLlRPR0dMRV9TSE9SVENVVFNfTU9EQUwsIHRoaXMuaGFuZGxlVG9nZ2xlKTtcbiAgICB9XG5cbiAgICBoYW5kbGVUb2dnbGUgPSAodmFsdWUpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93OiB2YWx1ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVIaWRlID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93OiBmYWxzZX0pO1xuICAgIH1cblxuICAgIGdldFNob3J0Y3V0cygpIHtcbiAgICAgICAgY29uc3Qge2lzTWFjfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHNob3J0Y3V0cyA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhhbGxTaG9ydGN1dHMpLmZvckVhY2goKHMpID0+IHtcbiAgICAgICAgICAgIGlmIChpc01hYyAmJiBhbGxTaG9ydGN1dHNbc10ubWFjKSB7XG4gICAgICAgICAgICAgICAgc2hvcnRjdXRzW3NdID0gYWxsU2hvcnRjdXRzW3NdLm1hYztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzTWFjICYmIGFsbFNob3J0Y3V0c1tzXS5kZWZhdWx0KSB7XG4gICAgICAgICAgICAgICAgc2hvcnRjdXRzW3NdID0gYWxsU2hvcnRjdXRzW3NdLmRlZmF1bHQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNob3J0Y3V0c1tzXSA9IGFsbFNob3J0Y3V0c1tzXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHNob3J0Y3V0cztcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHNob3J0Y3V0cyA9IHRoaXMuZ2V0U2hvcnRjdXRzKCk7XG4gICAgICAgIGNvbnN0IHtmb3JtYXRNZXNzYWdlfSA9IHRoaXMucHJvcHMuaW50bDtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPE1vZGFsXG4gICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3NOYW1lPSdzaG9ydGN1dHMtbW9kYWwnXG4gICAgICAgICAgICAgICAgc2hvdz17dGhpcy5zdGF0ZS5zaG93fVxuICAgICAgICAgICAgICAgIG9uSGlkZT17dGhpcy5oYW5kbGVIaWRlfVxuICAgICAgICAgICAgICAgIG9uRXhpdGVkPXt0aGlzLmhhbmRsZUhpZGV9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Nob3J0Y3V0cy1jb250ZW50Jz5cbiAgICAgICAgICAgICAgICAgICAgPE1vZGFsLkhlYWRlciBjbG9zZUJ1dHRvbj17dHJ1ZX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TW9kYWwuVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz57cmVuZGVyU2hvcnRjdXQoZm9ybWF0TWVzc2FnZShzaG9ydGN1dHMubWFpbkhlYWRlcikpfTwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbC5UaXRsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbC5IZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgIDxNb2RhbC5Cb2R5IHJlZj0nbW9kYWxCb2R5Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyb3cnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzZWN0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0nc2VjdGlvbi10aXRsZSc+PHN0cm9uZz57Zm9ybWF0TWVzc2FnZShzaG9ydGN1dHMubmF2SGVhZGVyKX08L3N0cm9uZz48L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJTaG9ydGN1dChmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5uYXZQcmV2KSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclNob3J0Y3V0KGZvcm1hdE1lc3NhZ2Uoc2hvcnRjdXRzLm5hdk5leHQpKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyU2hvcnRjdXQoZm9ybWF0TWVzc2FnZShzaG9ydGN1dHMubmF2VW5yZWFkUHJldikpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJTaG9ydGN1dChmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5uYXZVbnJlYWROZXh0KSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclNob3J0Y3V0KGZvcm1hdE1lc3NhZ2Uoc2hvcnRjdXRzLm5hdlN3aXRjaGVyKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclNob3J0Y3V0KGZvcm1hdE1lc3NhZ2Uoc2hvcnRjdXRzLm5hdkRNTWVudSkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJTaG9ydGN1dChmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5uYXZTZXR0aW5ncykpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJTaG9ydGN1dChmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5uYXZNZW50aW9ucykpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzZWN0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0nc2VjdGlvbi10aXRsZSc+PHN0cm9uZz57Zm9ybWF0TWVzc2FnZShzaG9ydGN1dHMubXNnSGVhZGVyKX08L3N0cm9uZz48L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPjxzdHJvbmc+e2Zvcm1hdE1lc3NhZ2Uoc2hvcnRjdXRzLm1zZ0lucHV0SGVhZGVyKX08L3N0cm9uZz48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3N1YnNlY3Rpb24nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyU2hvcnRjdXQoZm9ybWF0TWVzc2FnZShzaG9ydGN1dHMubXNnRWRpdCkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyU2hvcnRjdXQoZm9ybWF0TWVzc2FnZShzaG9ydGN1dHMubXNnUmVwbHkpKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclNob3J0Y3V0KGZvcm1hdE1lc3NhZ2Uoc2hvcnRjdXRzLm1zZ1JlcHJpbnRQcmV2KSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJTaG9ydGN1dChmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5tc2dSZXByaW50TmV4dCkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPjxzdHJvbmc+e2Zvcm1hdE1lc3NhZ2Uoc2hvcnRjdXRzLm1zZ0NvbXBIZWFkZXIpfTwvc3Ryb25nPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc3Vic2VjdGlvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJTaG9ydGN1dChmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5tc2dDb21wVXNlcm5hbWUpKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclNob3J0Y3V0KGZvcm1hdE1lc3NhZ2Uoc2hvcnRjdXRzLm1zZ0NvbXBDaGFubmVsKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJTaG9ydGN1dChmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5tc2dDb21wRW1vamkpKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2VjdGlvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9J3NlY3Rpb24tdGl0bGUnPjxzdHJvbmc+e2Zvcm1hdE1lc3NhZ2Uoc2hvcnRjdXRzLmZpbGVzSGVhZGVyKX08L3N0cm9uZz48L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJTaG9ydGN1dChmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5maWxlc1VwbG9hZCkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2VjdGlvbi0tbG93ZXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9J3NlY3Rpb24tdGl0bGUnPjxzdHJvbmc+e2Zvcm1hdE1lc3NhZ2Uoc2hvcnRjdXRzLmJyb3dzZXJIZWFkZXIpfTwvc3Ryb25nPjwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclNob3J0Y3V0KGZvcm1hdE1lc3NhZ2Uoc2hvcnRjdXRzLmJyb3dzZXJDaGFubmVsUHJldikpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJTaG9ydGN1dChmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5icm93c2VyQ2hhbm5lbE5leHQpKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyU2hvcnRjdXQoZm9ybWF0TWVzc2FnZShzaG9ydGN1dHMuYnJvd3NlckZvbnRJbmNyZWFzZSkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJTaG9ydGN1dChmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5icm93c2VyRm9udERlY3JlYXNlKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+PHN0cm9uZz57Zm9ybWF0TWVzc2FnZShzaG9ydGN1dHMuYnJvd3NlcklucHV0SGVhZGVyKX08L3N0cm9uZz48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3N1YnNlY3Rpb24nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyU2hvcnRjdXQoZm9ybWF0TWVzc2FnZShzaG9ydGN1dHMuYnJvd3NlckhpZ2hsaWdodFByZXYpKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclNob3J0Y3V0KGZvcm1hdE1lc3NhZ2Uoc2hvcnRjdXRzLmJyb3dzZXJIaWdobGlnaHROZXh0KSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJTaG9ydGN1dChmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5icm93c2VyTmV3bGluZSkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naW5mb19fbGFiZWwnPntmb3JtYXRNZXNzYWdlKHNob3J0Y3V0cy5pbmZvKX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbC5Cb2R5PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbmRlclNob3J0Y3V0KHRleHQpIHtcbiAgICBpZiAoIXRleHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvcnRjdXQgPSB0ZXh0LnNwbGl0KCdcXHQnKTtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IDxzcGFuPntzaG9ydGN1dFswXX08L3NwYW4+O1xuXG4gICAgbGV0IGtleXMgPSBudWxsO1xuICAgIGlmIChzaG9ydGN1dC5sZW5ndGggPiAxKSB7XG4gICAgICAgIGtleXMgPSBzaG9ydGN1dFsxXS5zcGxpdCgnfCcpLm1hcCgoa2V5KSA9PlxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3Nob3J0Y3V0LWtleSdcbiAgICAgICAgICAgICAgICBrZXk9e2tleX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7a2V5fVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzaG9ydGN1dC1saW5lJz5cbiAgICAgICAgICAgIHtkZXNjcmlwdGlvbn1cbiAgICAgICAgICAgIHtrZXlzfVxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBpbmplY3RJbnRsKFNob3J0Y3V0c01vZGFsKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3Nob3J0Y3V0c19tb2RhbC5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7Ozs7QUFYQTtBQUNBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUE3TkE7QUFDQTtBQWtPQTs7O0FBTUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBaUJBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFyQkE7QUF1QkE7QUFDQTtBQUNBO0FBdEJBO0FBQ0E7QUFEQTtBQUhBO0FBTUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQVlBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQURBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBREE7QUFEQTtBQWVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVZBO0FBREE7QUFEQTtBQW9CQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVBBO0FBTEE7QUFEQTtBQXBDQTtBQTBEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBM0RBO0FBTkE7QUFOQTtBQTRFQTs7O0FBaklBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBQ0E7QUFpSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQURBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2488\n");

/***/ }),

/***/ 2489:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(33);\n\nvar _sidebar_right = __webpack_require__(2490);\n\nvar _sidebar_right2 = _interopRequireDefault(_sidebar_right);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapStateToProps(state, ownProps) {\n    return (0, _extends3.default)({}, ownProps, {\n        postRightVisible: Boolean(state.views.rhs.selectedPostId),\n        fromSearch: state.views.rhs.fromSearch,\n        fromFlaggedPosts: state.views.rhs.fromFlaggedPosts,\n        fromPinnedPosts: state.views.rhs.fromPinnedPosts\n    });\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps)(_sidebar_right2.default);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4OS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3NpZGViYXJfcmlnaHQvaW5kZXguanM/NWZjYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTcgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4JztcblxuaW1wb3J0IFNpZGViYXJSaWdodCBmcm9tICcuL3NpZGViYXJfcmlnaHQuanN4JztcblxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlLCBvd25Qcm9wcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLm93blByb3BzLFxuICAgICAgICBwb3N0UmlnaHRWaXNpYmxlOiBCb29sZWFuKHN0YXRlLnZpZXdzLnJocy5zZWxlY3RlZFBvc3RJZCksXG4gICAgICAgIGZyb21TZWFyY2g6IHN0YXRlLnZpZXdzLnJocy5mcm9tU2VhcmNoLFxuICAgICAgICBmcm9tRmxhZ2dlZFBvc3RzOiBzdGF0ZS52aWV3cy5yaHMuZnJvbUZsYWdnZWRQb3N0cyxcbiAgICAgICAgZnJvbVBpbm5lZFBvc3RzOiBzdGF0ZS52aWV3cy5yaHMuZnJvbVBpbm5lZFBvc3RzXG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMpKFNpZGViYXJSaWdodCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy9zaWRlYmFyX3JpZ2h0L2luZGV4LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBTkE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2489\n");

/***/ }),

/***/ 2490:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _diagnostics_actions = __webpack_require__(239);\n\nvar _global_actions = __webpack_require__(57);\n\nvar _post_actions = __webpack_require__(75);\n\nvar _post_store = __webpack_require__(320);\n\nvar _post_store2 = _interopRequireDefault(_post_store);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _search_store = __webpack_require__(321);\n\nvar _search_store2 = _interopRequireDefault(_search_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _webrtc_store = __webpack_require__(454);\n\nvar _webrtc_store2 = _interopRequireDefault(_webrtc_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _file_upload_overlay = __webpack_require__(2179);\n\nvar _file_upload_overlay2 = _interopRequireDefault(_file_upload_overlay);\n\nvar _rhs_thread = __webpack_require__(2491);\n\nvar _rhs_thread2 = _interopRequireDefault(_rhs_thread);\n\nvar _search_bar = __webpack_require__(787);\n\nvar _search_bar2 = _interopRequireDefault(_search_bar);\n\nvar _search_results = __webpack_require__(2516);\n\nvar _search_results2 = _interopRequireDefault(_search_results);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SidebarRight = function (_React$Component) {\n    (0, _inherits3.default)(SidebarRight, _React$Component);\n\n    function SidebarRight(props) {\n        (0, _classCallCheck3.default)(this, SidebarRight);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SidebarRight.__proto__ || (0, _getPrototypeOf2.default)(SidebarRight)).call(this, props));\n\n        _this.plScrolledToBottom = true;\n\n        _this.onPreferenceChange = _this.onPreferenceChange.bind(_this);\n        _this.onPostPinnedChange = _this.onPostPinnedChange.bind(_this);\n        _this.onSearchChange = _this.onSearchChange.bind(_this);\n        _this.onUserChange = _this.onUserChange.bind(_this);\n        _this.onShowSearch = _this.onShowSearch.bind(_this);\n        _this.onShrink = _this.onShrink.bind(_this);\n        _this.toggleSize = _this.toggleSize.bind(_this);\n\n        _this.doStrangeThings = _this.doStrangeThings.bind(_this);\n\n        _this.state = {\n            searchVisible: _search_store2.default.getSearchResults() !== null,\n            isMentionSearch: _search_store2.default.getIsMentionSearch(),\n            isFlaggedPosts: _search_store2.default.getIsFlaggedPosts(),\n            isPinnedPosts: _search_store2.default.getIsPinnedPosts(),\n            expanded: false,\n            fromSearch: false,\n            currentUser: _user_store2.default.getCurrentUser(),\n            useMilitaryTime: _preference_store2.default.getBool(_constants2.default.Preferences.CATEGORY_DISPLAY_SETTINGS, _constants2.default.Preferences.USE_MILITARY_TIME, false)\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(SidebarRight, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _search_store2.default.addSearchChangeListener(this.onSearchChange);\n            _post_store2.default.addPostPinnedChangeListener(this.onPostPinnedChange);\n            _search_store2.default.addShowSearchListener(this.onShowSearch);\n            _user_store2.default.addChangeListener(this.onUserChange);\n            _preference_store2.default.addChangeListener(this.onPreferenceChange);\n            this.doStrangeThings();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _search_store2.default.removeSearchChangeListener(this.onSearchChange);\n            _post_store2.default.removePostPinnedChangeListener(this.onPostPinnedChange);\n            _search_store2.default.removeShowSearchListener(this.onShowSearch);\n            _user_store2.default.removeChangeListener(this.onUserChange);\n            _preference_store2.default.removeChangeListener(this.onPreferenceChange);\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            return !Utils.areObjectsEqual(nextState, this.state) || this.props.postRightVisible !== nextProps.postRightVisible;\n        }\n    }, {\n        key: 'componentWillUpdate',\n        value: function componentWillUpdate(nextProps, nextState) {\n            var isOpen = this.state.searchVisible || this.props.postRightVisible;\n            var willOpen = nextState.searchVisible || nextProps.postRightVisible;\n\n            if (!isOpen && willOpen) {\n                (0, _diagnostics_actions.trackEvent)('ui', 'ui_rhs_opened');\n            }\n\n            if (!isOpen && willOpen) {\n                this.setState({\n                    expanded: false\n                });\n            }\n        }\n    }, {\n        key: 'doStrangeThings',\n        value: function doStrangeThings() {\n            // We should have a better way to do this stuff\n            // Hence the function name.\n            (0, _jquery2.default)('.app__body .inner-wrap').removeClass('.move--right');\n            (0, _jquery2.default)('.app__body .inner-wrap').addClass('move--left');\n            (0, _jquery2.default)('.app__body .sidebar--left').removeClass('move--right');\n            (0, _jquery2.default)('.multi-teams .team-sidebar').removeClass('move--right');\n            (0, _jquery2.default)('.app__body .sidebar--right').addClass('move--left');\n\n            //$('.sidebar--right').prepend('<div class=\"sidebar__overlay\"></div>');\n            if (!this.state.searchVisible && !this.props.postRightVisible) {\n                (0, _jquery2.default)('.app__body .inner-wrap').removeClass('move--left').removeClass('move--right');\n                (0, _jquery2.default)('.app__body .sidebar--right').removeClass('move--left');\n                return _react2.default.createElement('div', null);\n            }\n\n            /*setTimeout(() => {\n                $('.sidebar__overlay').fadeOut('200', () => {\n                    $('.sidebar__overlay').remove();\n                });\n                }, 500);*/\n            return null;\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps, prevState) {\n            var isOpen = this.state.searchVisible || this.props.postRightVisible;\n            _webrtc_store2.default.emitRhsChanged(isOpen);\n            this.doStrangeThings();\n\n            var wasOpen = prevState.searchVisible || prevProps.postRightVisible;\n\n            if (isOpen && !wasOpen) {\n                setTimeout(function () {\n                    return (0, _global_actions.postListScrollChange)();\n                }, 0);\n            }\n        }\n    }, {\n        key: 'onPreferenceChange',\n        value: function onPreferenceChange() {\n            if (this.state.isFlaggedPosts) {\n                (0, _post_actions.getFlaggedPosts)();\n            }\n\n            this.setState({\n                useMilitaryTime: _preference_store2.default.getBool(_constants2.default.Preferences.CATEGORY_DISPLAY_SETTINGS, _constants2.default.Preferences.USE_MILITARY_TIME, false)\n            });\n        }\n    }, {\n        key: 'onPostPinnedChange',\n        value: function onPostPinnedChange() {\n            if (this.props.channel && this.state.isPinnedPosts) {\n                (0, _post_actions.getPinnedPosts)(this.props.channel.id);\n            }\n        }\n    }, {\n        key: 'onShrink',\n        value: function onShrink() {\n            this.setState({\n                expanded: false\n            });\n        }\n    }, {\n        key: 'onSearchChange',\n        value: function onSearchChange() {\n            this.setState({\n                searchVisible: _search_store2.default.getSearchResults() !== null || _search_store2.default.isLoading(),\n                isMentionSearch: _search_store2.default.getIsMentionSearch(),\n                isFlaggedPosts: _search_store2.default.getIsFlaggedPosts(),\n                isPinnedPosts: _search_store2.default.getIsPinnedPosts()\n            });\n        }\n    }, {\n        key: 'onUserChange',\n        value: function onUserChange() {\n            this.setState({\n                currentUser: _user_store2.default.getCurrentUser()\n            });\n        }\n    }, {\n        key: 'onShowSearch',\n        value: function onShowSearch() {\n            if (!this.state.searchVisible) {\n                this.setState({\n                    searchVisible: true\n                });\n            }\n        }\n    }, {\n        key: 'toggleSize',\n        value: function toggleSize() {\n            this.setState({ expanded: !this.state.expanded });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var content = null;\n            var expandedClass = '';\n\n            if (this.state.expanded) {\n                expandedClass = 'sidebar--right--expanded';\n            }\n\n            var currentId = _user_store2.default.getCurrentId();\n            var searchForm = null;\n            if (currentId) {\n                searchForm = _react2.default.createElement(_search_bar2.default, { isFocus: this.state.searchVisible && Utils.isMobile() });\n            }\n\n            var channel = this.props.channel;\n\n            var channelDisplayName = '';\n            if (channel) {\n                if (channel.type === _constants2.default.DM_CHANNEL || channel.type === _constants2.default.GM_CHANNEL) {\n                    channelDisplayName = Utils.localizeMessage('rhs_root.direct', 'Direct Message');\n                } else {\n                    channelDisplayName = channel.display_name;\n                }\n            }\n\n            if (this.state.searchVisible) {\n                content = _react2.default.createElement(\n                    'div',\n                    { className: 'sidebar--right__content' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'search-bar__container channel-header alt' },\n                        searchForm\n                    ),\n                    _react2.default.createElement(_search_results2.default, {\n                        isMentionSearch: this.state.isMentionSearch,\n                        isFlaggedPosts: this.state.isFlaggedPosts,\n                        isPinnedPosts: this.state.isPinnedPosts,\n                        useMilitaryTime: this.state.useMilitaryTime,\n                        toggleSize: this.toggleSize,\n                        shrink: this.onShrink,\n                        channelDisplayName: channelDisplayName\n                    })\n                );\n            } else if (this.props.postRightVisible) {\n                content = _react2.default.createElement(\n                    'div',\n                    { className: 'post-right__container' },\n                    _react2.default.createElement(_file_upload_overlay2.default, { overlayType: 'right' }),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'search-bar__container channel-header alt' },\n                        searchForm\n                    ),\n                    _react2.default.createElement(_rhs_thread2.default, {\n                        fromFlaggedPosts: this.props.fromFlaggedPosts,\n                        fromSearch: this.props.fromSearch,\n                        fromPinnedPosts: this.props.fromPinnedPosts,\n                        isWebrtc: _webrtc_store2.default.isBusy(),\n                        isMentionSearch: this.state.isMentionSearch,\n                        currentUser: this.state.currentUser,\n                        useMilitaryTime: this.state.useMilitaryTime,\n                        toggleSize: this.toggleSize,\n                        shrink: this.onShrink\n                    })\n                );\n            }\n\n            if (!content) {\n                expandedClass = '';\n            }\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    className: 'sidebar--right ' + expandedClass,\n                    id: 'sidebar-right'\n                },\n                _react2.default.createElement('div', {\n                    onClick: this.onShrink,\n                    className: 'sidebar--right__bg'\n                }),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'sidebar-right-container' },\n                    content\n                )\n            );\n        }\n    }]);\n    return SidebarRight;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nSidebarRight.propTypes = {\n    channel: _propTypes2.default.object,\n    postRightVisible: _propTypes2.default.bool,\n    fromSearch: _propTypes2.default.string,\n    fromFlaggedPosts: _propTypes2.default.bool,\n    fromPinnedPosts: _propTypes2.default.bool\n};\nexports.default = SidebarRight;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5MC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3NpZGViYXJfcmlnaHQvc2lkZWJhcl9yaWdodC5qc3g/ZTM2NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge3RyYWNrRXZlbnR9IGZyb20gJ2FjdGlvbnMvZGlhZ25vc3RpY3NfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IHtwb3N0TGlzdFNjcm9sbENoYW5nZX0gZnJvbSAnYWN0aW9ucy9nbG9iYWxfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IHtnZXRGbGFnZ2VkUG9zdHMsIGdldFBpbm5lZFBvc3RzfSBmcm9tICdhY3Rpb25zL3Bvc3RfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IFBvc3RTdG9yZSBmcm9tICdzdG9yZXMvcG9zdF9zdG9yZS5qc3gnO1xuaW1wb3J0IFByZWZlcmVuY2VTdG9yZSBmcm9tICdzdG9yZXMvcHJlZmVyZW5jZV9zdG9yZS5qc3gnO1xuaW1wb3J0IFNlYXJjaFN0b3JlIGZyb20gJ3N0b3Jlcy9zZWFyY2hfc3RvcmUuanN4JztcbmltcG9ydCBVc2VyU3RvcmUgZnJvbSAnc3RvcmVzL3VzZXJfc3RvcmUuanN4JztcbmltcG9ydCBXZWJydGNTdG9yZSBmcm9tICdzdG9yZXMvd2VicnRjX3N0b3JlLmpzeCc7XG5cbmltcG9ydCBDb25zdGFudHMgZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgRmlsZVVwbG9hZE92ZXJsYXkgZnJvbSAnY29tcG9uZW50cy9maWxlX3VwbG9hZF9vdmVybGF5LmpzeCc7XG5pbXBvcnQgUmhzVGhyZWFkIGZyb20gJ2NvbXBvbmVudHMvcmhzX3RocmVhZCc7XG5pbXBvcnQgU2VhcmNoQm94IGZyb20gJ2NvbXBvbmVudHMvc2VhcmNoX2Jhci5qc3gnO1xuaW1wb3J0IFNlYXJjaFJlc3VsdHMgZnJvbSAnY29tcG9uZW50cy9zZWFyY2hfcmVzdWx0cy5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTaWRlYmFyUmlnaHQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIGNoYW5uZWw6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgICAgIHBvc3RSaWdodFZpc2libGU6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICBmcm9tU2VhcmNoOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBmcm9tRmxhZ2dlZFBvc3RzOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgZnJvbVBpbm5lZFBvc3RzOiBQcm9wVHlwZXMuYm9vbFxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnBsU2Nyb2xsZWRUb0JvdHRvbSA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5vblByZWZlcmVuY2VDaGFuZ2UgPSB0aGlzLm9uUHJlZmVyZW5jZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uUG9zdFBpbm5lZENoYW5nZSA9IHRoaXMub25Qb3N0UGlubmVkQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25TZWFyY2hDaGFuZ2UgPSB0aGlzLm9uU2VhcmNoQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25Vc2VyQ2hhbmdlID0gdGhpcy5vblVzZXJDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblNob3dTZWFyY2ggPSB0aGlzLm9uU2hvd1NlYXJjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU2hyaW5rID0gdGhpcy5vblNocmluay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRvZ2dsZVNpemUgPSB0aGlzLnRvZ2dsZVNpemUuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmRvU3RyYW5nZVRoaW5ncyA9IHRoaXMuZG9TdHJhbmdlVGhpbmdzLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNlYXJjaFZpc2libGU6IFNlYXJjaFN0b3JlLmdldFNlYXJjaFJlc3VsdHMoKSAhPT0gbnVsbCxcbiAgICAgICAgICAgIGlzTWVudGlvblNlYXJjaDogU2VhcmNoU3RvcmUuZ2V0SXNNZW50aW9uU2VhcmNoKCksXG4gICAgICAgICAgICBpc0ZsYWdnZWRQb3N0czogU2VhcmNoU3RvcmUuZ2V0SXNGbGFnZ2VkUG9zdHMoKSxcbiAgICAgICAgICAgIGlzUGlubmVkUG9zdHM6IFNlYXJjaFN0b3JlLmdldElzUGlubmVkUG9zdHMoKSxcbiAgICAgICAgICAgIGV4cGFuZGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGZyb21TZWFyY2g6IGZhbHNlLFxuICAgICAgICAgICAgY3VycmVudFVzZXI6IFVzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpLFxuICAgICAgICAgICAgdXNlTWlsaXRhcnlUaW1lOiBQcmVmZXJlbmNlU3RvcmUuZ2V0Qm9vbChDb25zdGFudHMuUHJlZmVyZW5jZXMuQ0FURUdPUllfRElTUExBWV9TRVRUSU5HUywgQ29uc3RhbnRzLlByZWZlcmVuY2VzLlVTRV9NSUxJVEFSWV9USU1FLCBmYWxzZSlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgU2VhcmNoU3RvcmUuYWRkU2VhcmNoQ2hhbmdlTGlzdGVuZXIodGhpcy5vblNlYXJjaENoYW5nZSk7XG4gICAgICAgIFBvc3RTdG9yZS5hZGRQb3N0UGlubmVkQ2hhbmdlTGlzdGVuZXIodGhpcy5vblBvc3RQaW5uZWRDaGFuZ2UpO1xuICAgICAgICBTZWFyY2hTdG9yZS5hZGRTaG93U2VhcmNoTGlzdGVuZXIodGhpcy5vblNob3dTZWFyY2gpO1xuICAgICAgICBVc2VyU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vblVzZXJDaGFuZ2UpO1xuICAgICAgICBQcmVmZXJlbmNlU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vblByZWZlcmVuY2VDaGFuZ2UpO1xuICAgICAgICB0aGlzLmRvU3RyYW5nZVRoaW5ncygpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBTZWFyY2hTdG9yZS5yZW1vdmVTZWFyY2hDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uU2VhcmNoQ2hhbmdlKTtcbiAgICAgICAgUG9zdFN0b3JlLnJlbW92ZVBvc3RQaW5uZWRDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uUG9zdFBpbm5lZENoYW5nZSk7XG4gICAgICAgIFNlYXJjaFN0b3JlLnJlbW92ZVNob3dTZWFyY2hMaXN0ZW5lcih0aGlzLm9uU2hvd1NlYXJjaCk7XG4gICAgICAgIFVzZXJTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uVXNlckNoYW5nZSk7XG4gICAgICAgIFByZWZlcmVuY2VTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uUHJlZmVyZW5jZUNoYW5nZSk7XG4gICAgfVxuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgICAgIHJldHVybiAhVXRpbHMuYXJlT2JqZWN0c0VxdWFsKG5leHRTdGF0ZSwgdGhpcy5zdGF0ZSkgfHwgdGhpcy5wcm9wcy5wb3N0UmlnaHRWaXNpYmxlICE9PSBuZXh0UHJvcHMucG9zdFJpZ2h0VmlzaWJsZTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGlzT3BlbiA9IHRoaXMuc3RhdGUuc2VhcmNoVmlzaWJsZSB8fCB0aGlzLnByb3BzLnBvc3RSaWdodFZpc2libGU7XG4gICAgICAgIGNvbnN0IHdpbGxPcGVuID0gbmV4dFN0YXRlLnNlYXJjaFZpc2libGUgfHwgbmV4dFByb3BzLnBvc3RSaWdodFZpc2libGU7XG5cbiAgICAgICAgaWYgKCFpc09wZW4gJiYgd2lsbE9wZW4pIHtcbiAgICAgICAgICAgIHRyYWNrRXZlbnQoJ3VpJywgJ3VpX3Joc19vcGVuZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNPcGVuICYmIHdpbGxPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBleHBhbmRlZDogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZG9TdHJhbmdlVGhpbmdzKCkge1xuICAgICAgICAvLyBXZSBzaG91bGQgaGF2ZSBhIGJldHRlciB3YXkgdG8gZG8gdGhpcyBzdHVmZlxuICAgICAgICAvLyBIZW5jZSB0aGUgZnVuY3Rpb24gbmFtZS5cbiAgICAgICAgJCgnLmFwcF9fYm9keSAuaW5uZXItd3JhcCcpLnJlbW92ZUNsYXNzKCcubW92ZS0tcmlnaHQnKTtcbiAgICAgICAgJCgnLmFwcF9fYm9keSAuaW5uZXItd3JhcCcpLmFkZENsYXNzKCdtb3ZlLS1sZWZ0Jyk7XG4gICAgICAgICQoJy5hcHBfX2JvZHkgLnNpZGViYXItLWxlZnQnKS5yZW1vdmVDbGFzcygnbW92ZS0tcmlnaHQnKTtcbiAgICAgICAgJCgnLm11bHRpLXRlYW1zIC50ZWFtLXNpZGViYXInKS5yZW1vdmVDbGFzcygnbW92ZS0tcmlnaHQnKTtcbiAgICAgICAgJCgnLmFwcF9fYm9keSAuc2lkZWJhci0tcmlnaHQnKS5hZGRDbGFzcygnbW92ZS0tbGVmdCcpO1xuXG4gICAgICAgIC8vJCgnLnNpZGViYXItLXJpZ2h0JykucHJlcGVuZCgnPGRpdiBjbGFzcz1cInNpZGViYXJfX292ZXJsYXlcIj48L2Rpdj4nKTtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnNlYXJjaFZpc2libGUgJiYgIXRoaXMucHJvcHMucG9zdFJpZ2h0VmlzaWJsZSkge1xuICAgICAgICAgICAgJCgnLmFwcF9fYm9keSAuaW5uZXItd3JhcCcpLnJlbW92ZUNsYXNzKCdtb3ZlLS1sZWZ0JykucmVtb3ZlQ2xhc3MoJ21vdmUtLXJpZ2h0Jyk7XG4gICAgICAgICAgICAkKCcuYXBwX19ib2R5IC5zaWRlYmFyLS1yaWdodCcpLnJlbW92ZUNsYXNzKCdtb3ZlLS1sZWZ0Jyk7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAkKCcuc2lkZWJhcl9fb3ZlcmxheScpLmZhZGVPdXQoJzIwMCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAkKCcuc2lkZWJhcl9fb3ZlcmxheScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCA1MDApOyovXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICBjb25zdCBpc09wZW4gPSB0aGlzLnN0YXRlLnNlYXJjaFZpc2libGUgfHwgdGhpcy5wcm9wcy5wb3N0UmlnaHRWaXNpYmxlO1xuICAgICAgICBXZWJydGNTdG9yZS5lbWl0UmhzQ2hhbmdlZChpc09wZW4pO1xuICAgICAgICB0aGlzLmRvU3RyYW5nZVRoaW5ncygpO1xuXG4gICAgICAgIGNvbnN0IHdhc09wZW4gPSBwcmV2U3RhdGUuc2VhcmNoVmlzaWJsZSB8fCBwcmV2UHJvcHMucG9zdFJpZ2h0VmlzaWJsZTtcblxuICAgICAgICBpZiAoaXNPcGVuICYmICF3YXNPcGVuKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBvc3RMaXN0U2Nyb2xsQ2hhbmdlKCksIDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25QcmVmZXJlbmNlQ2hhbmdlKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0ZsYWdnZWRQb3N0cykge1xuICAgICAgICAgICAgZ2V0RmxhZ2dlZFBvc3RzKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHVzZU1pbGl0YXJ5VGltZTogUHJlZmVyZW5jZVN0b3JlLmdldEJvb2woQ29uc3RhbnRzLlByZWZlcmVuY2VzLkNBVEVHT1JZX0RJU1BMQVlfU0VUVElOR1MsIENvbnN0YW50cy5QcmVmZXJlbmNlcy5VU0VfTUlMSVRBUllfVElNRSwgZmFsc2UpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uUG9zdFBpbm5lZENoYW5nZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuY2hhbm5lbCAmJiB0aGlzLnN0YXRlLmlzUGlubmVkUG9zdHMpIHtcbiAgICAgICAgICAgIGdldFBpbm5lZFBvc3RzKHRoaXMucHJvcHMuY2hhbm5lbC5pZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblNocmluaygpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBleHBhbmRlZDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25TZWFyY2hDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2VhcmNoVmlzaWJsZTogU2VhcmNoU3RvcmUuZ2V0U2VhcmNoUmVzdWx0cygpICE9PSBudWxsIHx8IFNlYXJjaFN0b3JlLmlzTG9hZGluZygpLFxuICAgICAgICAgICAgaXNNZW50aW9uU2VhcmNoOiBTZWFyY2hTdG9yZS5nZXRJc01lbnRpb25TZWFyY2goKSxcbiAgICAgICAgICAgIGlzRmxhZ2dlZFBvc3RzOiBTZWFyY2hTdG9yZS5nZXRJc0ZsYWdnZWRQb3N0cygpLFxuICAgICAgICAgICAgaXNQaW5uZWRQb3N0czogU2VhcmNoU3RvcmUuZ2V0SXNQaW5uZWRQb3N0cygpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uVXNlckNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjdXJyZW50VXNlcjogVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKClcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25TaG93U2VhcmNoKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuc2VhcmNoVmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2VhcmNoVmlzaWJsZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0b2dnbGVTaXplKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtleHBhbmRlZDogIXRoaXMuc3RhdGUuZXhwYW5kZWR9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBjb250ZW50ID0gbnVsbDtcbiAgICAgICAgbGV0IGV4cGFuZGVkQ2xhc3MgPSAnJztcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5leHBhbmRlZCkge1xuICAgICAgICAgICAgZXhwYW5kZWRDbGFzcyA9ICdzaWRlYmFyLS1yaWdodC0tZXhwYW5kZWQnO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJlbnRJZCA9IFVzZXJTdG9yZS5nZXRDdXJyZW50SWQoKTtcbiAgICAgICAgdmFyIHNlYXJjaEZvcm0gPSBudWxsO1xuICAgICAgICBpZiAoY3VycmVudElkKSB7XG4gICAgICAgICAgICBzZWFyY2hGb3JtID0gPFNlYXJjaEJveCBpc0ZvY3VzPXt0aGlzLnN0YXRlLnNlYXJjaFZpc2libGUgJiYgVXRpbHMuaXNNb2JpbGUoKX0vPjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSB0aGlzLnByb3BzLmNoYW5uZWw7XG5cbiAgICAgICAgbGV0IGNoYW5uZWxEaXNwbGF5TmFtZSA9ICcnO1xuICAgICAgICBpZiAoY2hhbm5lbCkge1xuICAgICAgICAgICAgaWYgKGNoYW5uZWwudHlwZSA9PT0gQ29uc3RhbnRzLkRNX0NIQU5ORUwgfHwgY2hhbm5lbC50eXBlID09PSBDb25zdGFudHMuR01fQ0hBTk5FTCkge1xuICAgICAgICAgICAgICAgIGNoYW5uZWxEaXNwbGF5TmFtZSA9IFV0aWxzLmxvY2FsaXplTWVzc2FnZSgncmhzX3Jvb3QuZGlyZWN0JywgJ0RpcmVjdCBNZXNzYWdlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNoYW5uZWxEaXNwbGF5TmFtZSA9IGNoYW5uZWwuZGlzcGxheV9uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2VhcmNoVmlzaWJsZSkge1xuICAgICAgICAgICAgY29udGVudCA9IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2lkZWJhci0tcmlnaHRfX2NvbnRlbnQnPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2VhcmNoLWJhcl9fY29udGFpbmVyIGNoYW5uZWwtaGVhZGVyIGFsdCc+e3NlYXJjaEZvcm19PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxTZWFyY2hSZXN1bHRzXG4gICAgICAgICAgICAgICAgICAgICAgICBpc01lbnRpb25TZWFyY2g9e3RoaXMuc3RhdGUuaXNNZW50aW9uU2VhcmNofVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNGbGFnZ2VkUG9zdHM9e3RoaXMuc3RhdGUuaXNGbGFnZ2VkUG9zdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1Bpbm5lZFBvc3RzPXt0aGlzLnN0YXRlLmlzUGlubmVkUG9zdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VNaWxpdGFyeVRpbWU9e3RoaXMuc3RhdGUudXNlTWlsaXRhcnlUaW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlU2l6ZT17dGhpcy50b2dnbGVTaXplfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2hyaW5rPXt0aGlzLm9uU2hyaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbERpc3BsYXlOYW1lPXtjaGFubmVsRGlzcGxheU5hbWV9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMucG9zdFJpZ2h0VmlzaWJsZSkge1xuICAgICAgICAgICAgY29udGVudCA9IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncG9zdC1yaWdodF9fY29udGFpbmVyJz5cbiAgICAgICAgICAgICAgICAgICAgPEZpbGVVcGxvYWRPdmVybGF5IG92ZXJsYXlUeXBlPSdyaWdodCcvPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2VhcmNoLWJhcl9fY29udGFpbmVyIGNoYW5uZWwtaGVhZGVyIGFsdCc+e3NlYXJjaEZvcm19PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxSaHNUaHJlYWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21GbGFnZ2VkUG9zdHM9e3RoaXMucHJvcHMuZnJvbUZsYWdnZWRQb3N0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21TZWFyY2g9e3RoaXMucHJvcHMuZnJvbVNlYXJjaH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21QaW5uZWRQb3N0cz17dGhpcy5wcm9wcy5mcm9tUGlubmVkUG9zdHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1dlYnJ0Yz17V2VicnRjU3RvcmUuaXNCdXN5KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc01lbnRpb25TZWFyY2g9e3RoaXMuc3RhdGUuaXNNZW50aW9uU2VhcmNofVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXI9e3RoaXMuc3RhdGUuY3VycmVudFVzZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VNaWxpdGFyeVRpbWU9e3RoaXMuc3RhdGUudXNlTWlsaXRhcnlUaW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlU2l6ZT17dGhpcy50b2dnbGVTaXplfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2hyaW5rPXt0aGlzLm9uU2hyaW5rfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGVudCkge1xuICAgICAgICAgICAgZXhwYW5kZWRDbGFzcyA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9eydzaWRlYmFyLS1yaWdodCAnICsgZXhwYW5kZWRDbGFzc31cbiAgICAgICAgICAgICAgICBpZD0nc2lkZWJhci1yaWdodCdcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25TaHJpbmt9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2lkZWJhci0tcmlnaHRfX2JnJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NpZGViYXItcmlnaHQtY29udGFpbmVyJz5cbiAgICAgICAgICAgICAgICAgICAge2NvbnRlbnR9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy9zaWRlYmFyX3JpZ2h0L3NpZGViYXJfcmlnaHQuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBOzs7QUFTQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFmQTtBQXlCQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBRkE7QUFhQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFIQTtBQWdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFSQTtBQWFBOzs7QUE3T0E7QUF4QkE7QUFDQTtBQXVCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2490\n");

/***/ }),

/***/ 2491:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(33);\n\nvar _redux = __webpack_require__(22);\n\nvar _posts = __webpack_require__(139);\n\nvar _preferences = __webpack_require__(67);\n\nvar _posts2 = __webpack_require__(108);\n\nvar _constants = __webpack_require__(10);\n\nvar _rhs = __webpack_require__(2492);\n\nvar _rhs_thread = __webpack_require__(2493);\n\nvar _rhs_thread2 = _interopRequireDefault(_rhs_thread);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction makeMapStateToProps() {\n    var getPostsForThread = (0, _posts.makeGetPostsForThread)();\n\n    return function mapStateToProps(state, ownProps) {\n        var selected = (0, _rhs.getSelectedPost)(state);\n\n        var posts = [];\n        if (selected) {\n            posts = getPostsForThread(state, { rootId: selected.id, channelId: selected.channel_id });\n        }\n\n        return (0, _extends3.default)({}, ownProps, {\n            selected: selected,\n            posts: posts,\n            previewCollapsed: (0, _preferences.get)(state, _constants.Preferences.CATEGORY_DISPLAY_SETTINGS, _constants.Preferences.COLLAPSE_DISPLAY, 'false'),\n            previewEnabled: (0, _preferences.getBool)(state, _constants.Preferences.CATEGORY_DISPLAY_SETTINGS, _constants.Preferences.LINK_PREVIEW_DISPLAY, true)\n        });\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: (0, _redux.bindActionCreators)({\n            removePost: _posts2.removePost\n        }, dispatch)\n    };\n}\n\nexports.default = (0, _reactRedux.connect)(makeMapStateToProps, mapDispatchToProps)(_rhs_thread2.default);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5MS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3Joc190aHJlYWQvaW5kZXguanM/MDg4NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTcgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCB7YmluZEFjdGlvbkNyZWF0b3JzfSBmcm9tICdyZWR1eCc7XG5cbmltcG9ydCB7bWFrZUdldFBvc3RzRm9yVGhyZWFkfSBmcm9tICdtYXR0ZXJtb3N0LXJlZHV4L3NlbGVjdG9ycy9lbnRpdGllcy9wb3N0cyc7XG5pbXBvcnQge2dldCwgZ2V0Qm9vbH0gZnJvbSAnbWF0dGVybW9zdC1yZWR1eC9zZWxlY3RvcnMvZW50aXRpZXMvcHJlZmVyZW5jZXMnO1xuXG5pbXBvcnQge3JlbW92ZVBvc3R9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvYWN0aW9ucy9wb3N0cyc7XG5cbmltcG9ydCB7UHJlZmVyZW5jZXN9IGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuaW1wb3J0IHtnZXRTZWxlY3RlZFBvc3R9IGZyb20gJ3NlbGVjdG9ycy9yaHMuanN4JztcblxuaW1wb3J0IFJoc1RocmVhZCBmcm9tICcuL3Joc190aHJlYWQuanN4JztcblxuZnVuY3Rpb24gbWFrZU1hcFN0YXRlVG9Qcm9wcygpIHtcbiAgICBjb25zdCBnZXRQb3N0c0ZvclRocmVhZCA9IG1ha2VHZXRQb3N0c0ZvclRocmVhZCgpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1hcFN0YXRlVG9Qcm9wcyhzdGF0ZSwgb3duUHJvcHMpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBnZXRTZWxlY3RlZFBvc3Qoc3RhdGUpO1xuXG4gICAgICAgIGxldCBwb3N0cyA9IFtdO1xuICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHBvc3RzID0gZ2V0UG9zdHNGb3JUaHJlYWQoc3RhdGUsIHtyb290SWQ6IHNlbGVjdGVkLmlkLCBjaGFubmVsSWQ6IHNlbGVjdGVkLmNoYW5uZWxfaWR9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5vd25Qcm9wcyxcbiAgICAgICAgICAgIHNlbGVjdGVkLFxuICAgICAgICAgICAgcG9zdHMsXG4gICAgICAgICAgICBwcmV2aWV3Q29sbGFwc2VkOiBnZXQoc3RhdGUsIFByZWZlcmVuY2VzLkNBVEVHT1JZX0RJU1BMQVlfU0VUVElOR1MsIFByZWZlcmVuY2VzLkNPTExBUFNFX0RJU1BMQVksICdmYWxzZScpLFxuICAgICAgICAgICAgcHJldmlld0VuYWJsZWQ6IGdldEJvb2woc3RhdGUsIFByZWZlcmVuY2VzLkNBVEVHT1JZX0RJU1BMQVlfU0VUVElOR1MsIFByZWZlcmVuY2VzLkxJTktfUFJFVklFV19ESVNQTEFZLCB0cnVlKVxuICAgICAgICB9O1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGFjdGlvbnM6IGJpbmRBY3Rpb25DcmVhdG9ycyh7XG4gICAgICAgICAgICByZW1vdmVQb3N0XG4gICAgICAgIH0sIGRpc3BhdGNoKVxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFrZU1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShSaHNUaHJlYWQpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvcmhzX3RocmVhZC9pbmRleC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQWZBO0FBQ0E7QUFDQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2491\n");

/***/ }),

/***/ 2492:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.getSelectedPost = undefined;\nexports.getSelectedPostId = getSelectedPostId;\n\nvar _reselect = __webpack_require__(91);\n\nvar _users = __webpack_require__(51);\n\nvar _constants = __webpack_require__(10);\n\nvar _utils = __webpack_require__(17);\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction getSelectedPostId(state) {\n    return state.views.rhs.selectedPostId;\n}\n\nfunction getSelectedPostChannelId(state) {\n    return state.views.rhs.selectedPostChannelId;\n}\n\nfunction getRealSelectedPost(state) {\n    return state.entities.posts.posts[state.views.rhs.selectedPostId];\n}\n\nvar getSelectedPost = exports.getSelectedPost = (0, _reselect.createSelector)(getSelectedPostId, getRealSelectedPost, getSelectedPostChannelId, _users.getCurrentUserId, function (selectedPostId, selectedPost, selectedPostChannelId, currentUserId) {\n    if (selectedPost) {\n        return selectedPost;\n    }\n\n    // If there is no root post found, assume it has been deleted by data retention policy, and create a fake one.\n    return {\n        id: selectedPostId,\n        exists: false,\n        type: _constants.PostTypes.FAKE_PARENT_DELETED,\n        message: (0, _utils.localizeMessage)('rhs_thread.rootPostDeletedMessage.body', 'Part of this thread has been deleted due to a data retention policy. You can no longer reply to this thread.'),\n        channel_id: selectedPostChannelId,\n        user_id: currentUserId\n    };\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5Mi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zZWxlY3RvcnMvcmhzLmpzeD82ZDBhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNyBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCB7Y3JlYXRlU2VsZWN0b3J9IGZyb20gJ3Jlc2VsZWN0JztcblxuaW1wb3J0IHtnZXRDdXJyZW50VXNlcklkfSBmcm9tICdtYXR0ZXJtb3N0LXJlZHV4L3NlbGVjdG9ycy9lbnRpdGllcy91c2Vycyc7XG5cbmltcG9ydCB7UG9zdFR5cGVzfSBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCB7bG9jYWxpemVNZXNzYWdlfSBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRQb3N0SWQoc3RhdGUpIHtcbiAgICByZXR1cm4gc3RhdGUudmlld3MucmhzLnNlbGVjdGVkUG9zdElkO1xufVxuXG5mdW5jdGlvbiBnZXRTZWxlY3RlZFBvc3RDaGFubmVsSWQoc3RhdGUpIHtcbiAgICByZXR1cm4gc3RhdGUudmlld3MucmhzLnNlbGVjdGVkUG9zdENoYW5uZWxJZDtcbn1cblxuZnVuY3Rpb24gZ2V0UmVhbFNlbGVjdGVkUG9zdChzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5lbnRpdGllcy5wb3N0cy5wb3N0c1tzdGF0ZS52aWV3cy5yaHMuc2VsZWN0ZWRQb3N0SWRdO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0U2VsZWN0ZWRQb3N0ID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgZ2V0U2VsZWN0ZWRQb3N0SWQsXG4gICAgZ2V0UmVhbFNlbGVjdGVkUG9zdCxcbiAgICBnZXRTZWxlY3RlZFBvc3RDaGFubmVsSWQsXG4gICAgZ2V0Q3VycmVudFVzZXJJZCxcbiAgICAoc2VsZWN0ZWRQb3N0SWQsIHNlbGVjdGVkUG9zdCwgc2VsZWN0ZWRQb3N0Q2hhbm5lbElkLCBjdXJyZW50VXNlcklkKSA9PiB7XG4gICAgICAgIGlmIChzZWxlY3RlZFBvc3QpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZFBvc3Q7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyByb290IHBvc3QgZm91bmQsIGFzc3VtZSBpdCBoYXMgYmVlbiBkZWxldGVkIGJ5IGRhdGEgcmV0ZW50aW9uIHBvbGljeSwgYW5kIGNyZWF0ZSBhIGZha2Ugb25lLlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHNlbGVjdGVkUG9zdElkLFxuICAgICAgICAgICAgZXhpc3RzOiBmYWxzZSxcbiAgICAgICAgICAgIHR5cGU6IFBvc3RUeXBlcy5GQUtFX1BBUkVOVF9ERUxFVEVELFxuICAgICAgICAgICAgbWVzc2FnZTogbG9jYWxpemVNZXNzYWdlKCdyaHNfdGhyZWFkLnJvb3RQb3N0RGVsZXRlZE1lc3NhZ2UuYm9keScsICdQYXJ0IG9mIHRoaXMgdGhyZWFkIGhhcyBiZWVuIGRlbGV0ZWQgZHVlIHRvIGEgZGF0YSByZXRlbnRpb24gcG9saWN5LiBZb3UgY2FuIG5vIGxvbmdlciByZXBseSB0byB0aGlzIHRocmVhZC4nKSxcbiAgICAgICAgICAgIGNoYW5uZWxfaWQ6IHNlbGVjdGVkUG9zdENoYW5uZWxJZCxcbiAgICAgICAgICAgIHVzZXJfaWQ6IGN1cnJlbnRVc2VySWRcbiAgICAgICAgfTtcbiAgICB9XG4pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNlbGVjdG9ycy9yaHMuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFVQTtBQUNBO0FBUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVRBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2492\n");

/***/ }),

/***/ 2493:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _assign = __webpack_require__(42);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _stringify = __webpack_require__(158);\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nexports.renderView = renderView;\nexports.renderThumbHorizontal = renderThumbHorizontal;\nexports.renderThumbVertical = renderThumbVertical;\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactCustomScrollbars = __webpack_require__(2494);\n\nvar _reactCustomScrollbars2 = _interopRequireDefault(_reactCustomScrollbars);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _webrtc_store = __webpack_require__(454);\n\nvar _webrtc_store2 = _interopRequireDefault(_webrtc_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _delayed_action = __webpack_require__(327);\n\nvar _delayed_action2 = _interopRequireDefault(_delayed_action);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _create_comment = __webpack_require__(2510);\n\nvar _create_comment2 = _interopRequireDefault(_create_comment);\n\nvar _date_separator = __webpack_require__(2512);\n\nvar _date_separator2 = _interopRequireDefault(_date_separator);\n\nvar _floating_timestamp = __webpack_require__(821);\n\nvar _floating_timestamp2 = _interopRequireDefault(_floating_timestamp);\n\nvar _rhs_comment = __webpack_require__(2513);\n\nvar _rhs_comment2 = _interopRequireDefault(_rhs_comment);\n\nvar _rhs_header_post = __webpack_require__(2514);\n\nvar _rhs_header_post2 = _interopRequireDefault(_rhs_header_post);\n\nvar _rhs_root_post = __webpack_require__(2515);\n\nvar _rhs_root_post2 = _interopRequireDefault(_rhs_root_post);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar Preferences = _constants2.default.Preferences;\n\nfunction renderView(props) {\n    return _react2.default.createElement('div', (0, _extends3.default)({}, props, {\n        className: 'scrollbar--view'\n    }));\n}\n\nfunction renderThumbHorizontal(props) {\n    return _react2.default.createElement('div', (0, _extends3.default)({}, props, {\n        className: 'scrollbar--horizontal'\n    }));\n}\n\nfunction renderThumbVertical(props) {\n    return _react2.default.createElement('div', (0, _extends3.default)({}, props, {\n        className: 'scrollbar--vertical'\n    }));\n}\n\nvar RhsThread = function (_React$Component) {\n    (0, _inherits3.default)(RhsThread, _React$Component);\n\n    function RhsThread(props) {\n        (0, _classCallCheck3.default)(this, RhsThread);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (RhsThread.__proto__ || (0, _getPrototypeOf2.default)(RhsThread)).call(this, props));\n\n        _this.getSidebarBody = function () {\n            return _this.refs.sidebarbody;\n        };\n\n        _this.mounted = false;\n\n        _this.onUserChange = _this.onUserChange.bind(_this);\n        _this.forceUpdateInfo = _this.forceUpdateInfo.bind(_this);\n        _this.onPreferenceChange = _this.onPreferenceChange.bind(_this);\n        _this.onStatusChange = _this.onStatusChange.bind(_this);\n        _this.onBusy = _this.onBusy.bind(_this);\n        _this.handleResize = _this.handleResize.bind(_this);\n        _this.handleScroll = _this.handleScroll.bind(_this);\n        _this.handleScrollStop = _this.handleScrollStop.bind(_this);\n        _this.scrollStopAction = new _delayed_action2.default(_this.handleScrollStop);\n\n        var openTime = new Date().getTime();\n        var state = {};\n        state.windowWidth = Utils.windowWidth();\n        state.windowHeight = Utils.windowHeight();\n        state.profiles = JSON.parse((0, _stringify2.default)(_user_store2.default.getProfiles()));\n        state.compactDisplay = _preference_store2.default.get(Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.MESSAGE_DISPLAY, Preferences.MESSAGE_DISPLAY_DEFAULT) === Preferences.MESSAGE_DISPLAY_COMPACT;\n        state.flaggedPosts = _preference_store2.default.getCategory(_constants2.default.Preferences.CATEGORY_FLAGGED_POST);\n        state.statuses = (0, _assign2.default)({}, _user_store2.default.getStatuses());\n        state.previewsCollapsed = _preference_store2.default.get(Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.COLLAPSE_DISPLAY, 'false');\n        state.isBusy = _webrtc_store2.default.isBusy();\n\n        _this.state = (0, _extends3.default)({}, state, {\n            isScrolling: false,\n            topRhsPostCreateAt: 0,\n            openTime: openTime\n        });\n        return _this;\n    }\n\n    (0, _createClass3.default)(RhsThread, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _preference_store2.default.addChangeListener(this.onPreferenceChange);\n            _user_store2.default.addChangeListener(this.onUserChange);\n            _user_store2.default.addStatusesChangeListener(this.onStatusChange);\n            _webrtc_store2.default.addBusyListener(this.onBusy);\n\n            this.scrollToBottom();\n            window.addEventListener('resize', this.handleResize);\n\n            this.mounted = true;\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _preference_store2.default.removeChangeListener(this.onPreferenceChange);\n            _user_store2.default.removeChangeListener(this.onUserChange);\n            _user_store2.default.removeStatusesChangeListener(this.onStatusChange);\n            _webrtc_store2.default.removeBusyListener(this.onBusy);\n\n            window.removeEventListener('resize', this.handleResize);\n\n            this.mounted = false;\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps) {\n            var prevPostsArray = prevProps.posts || [];\n            var curPostsArray = this.props.posts || [];\n\n            if (prevPostsArray.length >= curPostsArray.length) {\n                return;\n            }\n\n            var curLastPost = curPostsArray[curPostsArray.length - 1];\n\n            if (curLastPost.user_id === _user_store2.default.getCurrentId()) {\n                this.scrollToBottom();\n            }\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            if (!Utils.areObjectsEqual(nextState.statuses, this.state.statuses)) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(nextState.postsArray, this.props.posts)) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(nextState.selected, this.props.selected)) {\n                return true;\n            }\n\n            if (nextState.compactDisplay !== this.state.compactDisplay) {\n                return true;\n            }\n\n            if (nextProps.useMilitaryTime !== this.props.useMilitaryTime) {\n                return true;\n            }\n\n            if (nextState.previewsCollapsed !== this.state.previewsCollapsed) {\n                return true;\n            }\n\n            if (nextProps.previewEnabled !== this.props.previewEnabled) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(nextState.flaggedPosts, this.state.flaggedPosts)) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(nextState.profiles, this.state.profiles)) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(nextProps.currentUser, this.props.currentUser)) {\n                return true;\n            }\n\n            if (nextState.isBusy !== this.state.isBusy) {\n                return true;\n            }\n\n            if (nextState.isScrolling !== this.state.isScrolling) {\n                return true;\n            }\n\n            if (nextState.topRhsPostCreateAt !== this.state.topRhsPostCreateAt) {\n                return true;\n            }\n            if (nextProps.previewCollapsed !== this.props.previewCollapsed) {\n                return true;\n            }\n\n            return false;\n        }\n    }, {\n        key: 'forceUpdateInfo',\n        value: function forceUpdateInfo() {\n            if (this.state.postList) {\n                for (var postId in this.state.postList.posts) {\n                    if (this.refs[postId]) {\n                        this.refs[postId].forceUpdate();\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'handleResize',\n        value: function handleResize() {\n            this.setState({\n                windowWidth: Utils.windowWidth(),\n                windowHeight: Utils.windowHeight()\n            });\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (!this.props.selected || !nextProps.selected) {\n                return;\n            }\n\n            if (this.props.selected.id !== nextProps.selected.id) {\n                this.setState({\n                    openTime: new Date().getTime()\n                });\n            }\n        }\n    }, {\n        key: 'onPreferenceChange',\n        value: function onPreferenceChange(category) {\n            var previewSuffix = '';\n            if (category === Preferences.CATEGORY_DISPLAY_SETTINGS) {\n                previewSuffix = '_' + Utils.generateId();\n            }\n\n            this.setState({\n                compactDisplay: _preference_store2.default.get(Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.MESSAGE_DISPLAY, Preferences.MESSAGE_DISPLAY_DEFAULT) === Preferences.MESSAGE_DISPLAY_COMPACT,\n                flaggedPosts: _preference_store2.default.getCategory(_constants2.default.Preferences.CATEGORY_FLAGGED_POST),\n                previewsCollapsed: _preference_store2.default.get(Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.COLLAPSE_DISPLAY, 'false') + previewSuffix\n            });\n            this.forceUpdateInfo();\n        }\n    }, {\n        key: 'onStatusChange',\n        value: function onStatusChange() {\n            this.setState({ statuses: (0, _assign2.default)({}, _user_store2.default.getStatuses()) });\n        }\n    }, {\n        key: 'onBusy',\n        value: function onBusy(isBusy) {\n            this.setState({ isBusy: isBusy });\n        }\n    }, {\n        key: 'filterPosts',\n        value: function filterPosts(posts, selected, openTime) {\n            var postsArray = [];\n\n            posts.forEach(function (cpost) {\n                // Do not show empherals created before sidebar has been opened\n                if (cpost.type === 'system_ephemeral' && cpost.create_at < openTime) {\n                    return;\n                }\n\n                if (cpost.root_id === selected.id) {\n                    postsArray.unshift(cpost);\n                }\n            });\n\n            return postsArray;\n        }\n    }, {\n        key: 'onUserChange',\n        value: function onUserChange() {\n            var profiles = JSON.parse((0, _stringify2.default)(_user_store2.default.getProfiles()));\n            this.setState({ profiles: profiles });\n        }\n    }, {\n        key: 'scrollToBottom',\n        value: function scrollToBottom() {\n            if ((0, _jquery2.default)('.post-right__scroll')[0]) {\n                (0, _jquery2.default)('.post-right__scroll').parent().scrollTop((0, _jquery2.default)('.post-right__scroll')[0].scrollHeight);\n            }\n        }\n    }, {\n        key: 'updateFloatingTimestamp',\n        value: function updateFloatingTimestamp() {\n            // skip this in non-mobile view since that's when the timestamp is visible\n            if (!Utils.isMobile()) {\n                return;\n            }\n\n            if (this.props.posts) {\n                var childNodes = this.refs.rhspostlist.childNodes;\n                var viewPort = this.refs.rhspostlist.getBoundingClientRect();\n                var topRhsPostCreateAt = 0;\n                var offset = 100;\n\n                // determine the top rhs comment assuming that childNodes and postsArray are of same length\n                for (var i = 0; i < childNodes.length; i++) {\n                    if (childNodes[i].offsetTop + viewPort.top - offset > 0) {\n                        topRhsPostCreateAt = this.props.posts[i].create_at;\n                        break;\n                    }\n                }\n\n                if (topRhsPostCreateAt !== this.state.topRhsPostCreateAt) {\n                    this.setState({\n                        topRhsPostCreateAt: topRhsPostCreateAt\n                    });\n                }\n            }\n        }\n    }, {\n        key: 'handleScroll',\n        value: function handleScroll() {\n            this.updateFloatingTimestamp();\n\n            if (!this.state.isScrolling) {\n                this.setState({\n                    isScrolling: true\n                });\n            }\n\n            this.scrollStopAction.fireAfter(_constants2.default.SCROLL_DELAY);\n        }\n    }, {\n        key: 'handleScrollStop',\n        value: function handleScrollStop() {\n            this.setState({\n                isScrolling: false\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (this.props.posts == null || this.props.selected == null) {\n                return _react2.default.createElement('div', null);\n            }\n\n            var postsArray = this.filterPosts(this.props.posts, this.props.selected, this.state.openTime);\n            var selected = this.props.selected;\n            var profiles = this.state.profiles || {};\n\n            var profile = void 0;\n            if (_user_store2.default.getCurrentId() === selected.user_id) {\n                profile = this.props.currentUser;\n            } else {\n                profile = profiles[selected.user_id];\n            }\n\n            var isRootFlagged = false;\n            if (this.state.flaggedPosts) {\n                isRootFlagged = this.state.flaggedPosts.get(selected.id) != null;\n            }\n\n            var rootStatus = 'offline';\n            if (this.state.statuses) {\n                rootStatus = this.state.statuses[selected.user_id] || 'offline';\n            }\n\n            var createAt = selected.create_at;\n            if (!createAt) {\n                createAt = this.props.posts[0].create_at;\n            }\n            var rootPostDay = Utils.getDateForUnixTicks(createAt);\n            var previousPostDay = rootPostDay;\n\n            var commentsLists = [];\n            var postsLength = postsArray.length;\n            for (var i = 0; i < postsLength; i++) {\n                var comPost = postsArray[i];\n                var p = void 0;\n                if (_user_store2.default.getCurrentId() === comPost.user_id) {\n                    p = _user_store2.default.getCurrentUser();\n                } else {\n                    p = profiles[comPost.user_id];\n                }\n\n                var isFlagged = false;\n                if (this.state.flaggedPosts) {\n                    isFlagged = this.state.flaggedPosts.get(comPost.id) != null;\n                }\n\n                var status = 'offline';\n                if (this.state.statuses && p && p.id) {\n                    status = this.state.statuses[p.id] || 'offline';\n                }\n\n                var currentPostDay = Utils.getDateForUnixTicks(comPost.create_at);\n                if (currentPostDay.toDateString() !== previousPostDay.toDateString()) {\n                    previousPostDay = currentPostDay;\n                    commentsLists.push(_react2.default.createElement(_date_separator2.default, {\n                        date: currentPostDay\n                    }));\n                }\n\n                var keyPrefix = comPost.id ? comPost.id : comPost.pending_post_id;\n                var reverseCount = postsLength - i - 1;\n                commentsLists.push(_react2.default.createElement(\n                    'div',\n                    { key: keyPrefix + 'commentKey' },\n                    _react2.default.createElement(_rhs_comment2.default, {\n                        ref: comPost.id,\n                        post: comPost,\n                        lastPostCount: reverseCount >= 0 && reverseCount < _constants2.default.TEST_ID_COUNT ? reverseCount : -1,\n                        user: p,\n                        currentUser: this.props.currentUser,\n                        compactDisplay: this.state.compactDisplay,\n                        useMilitaryTime: this.props.useMilitaryTime,\n                        isFlagged: isFlagged,\n                        status: status,\n                        isBusy: this.state.isBusy,\n                        removePost: this.props.actions.removePost,\n                        previewCollapsed: this.props.previewCollapsed\n                    })\n                ));\n            }\n\n            var createComment = void 0;\n            if (selected.type !== _constants2.default.PostTypes.FAKE_PARENT_DELETED) {\n                createComment = _react2.default.createElement(\n                    'div',\n                    { className: 'post-create__container' },\n                    _react2.default.createElement(_create_comment2.default, {\n                        channelId: selected.channel_id,\n                        rootId: selected.id,\n                        latestPostId: postsLength > 0 ? postsArray[postsLength - 1].id : selected.id,\n                        getSidebarBody: this.getSidebarBody\n                    })\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    className: 'sidebar-right__body',\n                    ref: 'sidebarbody'\n                },\n                _react2.default.createElement(_floating_timestamp2.default, {\n                    isScrolling: this.state.isScrolling,\n                    isMobile: Utils.isMobile(),\n                    createAt: this.state.topRhsPostCreateAt,\n                    isRhsPost: true\n                }),\n                _react2.default.createElement(_rhs_header_post2.default, {\n                    fromFlaggedPosts: this.props.fromFlaggedPosts,\n                    fromSearch: this.props.fromSearch,\n                    fromPinnedPosts: this.props.fromPinnedPosts,\n                    isWebrtc: this.props.isWebrtc,\n                    isMentionSearch: this.props.isMentionSearch,\n                    toggleSize: this.props.toggleSize,\n                    shrink: this.props.shrink\n                }),\n                _react2.default.createElement(\n                    _reactCustomScrollbars2.default,\n                    {\n                        autoHide: true,\n                        autoHideTimeout: 500,\n                        autoHideDuration: 500,\n                        renderThumbHorizontal: renderThumbHorizontal,\n                        renderThumbVertical: renderThumbVertical,\n                        renderView: renderView,\n                        onScroll: this.handleScroll\n                    },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'post-right__scroll' },\n                        _react2.default.createElement(_date_separator2.default, {\n                            date: rootPostDay\n                        }),\n                        _react2.default.createElement(_rhs_root_post2.default, {\n                            ref: selected.id,\n                            post: selected,\n                            commentCount: postsLength,\n                            user: profile,\n                            currentUser: this.props.currentUser,\n                            compactDisplay: this.state.compactDisplay,\n                            useMilitaryTime: this.props.useMilitaryTime,\n                            isFlagged: isRootFlagged,\n                            status: rootStatus,\n                            previewCollapsed: this.state.previewsCollapsed,\n                            previewEnabled: this.props.previewEnabled,\n                            isBusy: this.state.isBusy\n                        }),\n                        _react2.default.createElement(\n                            'div',\n                            {\n                                ref: 'rhspostlist',\n                                className: 'post-right-comments-container'\n                            },\n                            commentsLists\n                        ),\n                        createComment\n                    )\n                )\n            );\n        }\n    }]);\n    return RhsThread;\n}(_react2.default.Component);\n\nRhsThread.propTypes = {\n    posts: _propTypes2.default.arrayOf(_propTypes2.default.object).isRequired,\n    selected: _propTypes2.default.object.isRequired,\n    fromSearch: _propTypes2.default.string,\n    fromFlaggedPosts: _propTypes2.default.bool,\n    fromPinnedPosts: _propTypes2.default.bool,\n    isWebrtc: _propTypes2.default.bool,\n    isMentionSearch: _propTypes2.default.bool,\n    currentUser: _propTypes2.default.object.isRequired,\n    useMilitaryTime: _propTypes2.default.bool.isRequired,\n    toggleSize: _propTypes2.default.func,\n    shrink: _propTypes2.default.func,\n    previewCollapsed: _propTypes2.default.string.isRequired,\n    previewEnabled: _propTypes2.default.bool.isRequired,\n    actions: _propTypes2.default.shape({\n        removePost: _propTypes2.default.func.isRequired\n    }).isRequired\n};\nRhsThread.defaultProps = {\n    fromSearch: '',\n    isMentionSearch: false\n};\nexports.default = RhsThread;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5My5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3Joc190aHJlYWQvcmhzX3RocmVhZC5qc3g/MDNkOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFNjcm9sbGJhcnMgZnJvbSAncmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMnO1xuXG5pbXBvcnQgUHJlZmVyZW5jZVN0b3JlIGZyb20gJ3N0b3Jlcy9wcmVmZXJlbmNlX3N0b3JlLmpzeCc7XG5pbXBvcnQgVXNlclN0b3JlIGZyb20gJ3N0b3Jlcy91c2VyX3N0b3JlLmpzeCc7XG5pbXBvcnQgV2VicnRjU3RvcmUgZnJvbSAnc3RvcmVzL3dlYnJ0Y19zdG9yZS5qc3gnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuaW1wb3J0IERlbGF5ZWRBY3Rpb24gZnJvbSAndXRpbHMvZGVsYXllZF9hY3Rpb24uanN4JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCBDcmVhdGVDb21tZW50IGZyb20gJ2NvbXBvbmVudHMvY3JlYXRlX2NvbW1lbnQnO1xuaW1wb3J0IERhdGVTZXBhcmF0b3IgZnJvbSAnY29tcG9uZW50cy9wb3N0X3ZpZXcvZGF0ZV9zZXBhcmF0b3IuanN4JztcbmltcG9ydCBGbG9hdGluZ1RpbWVzdGFtcCBmcm9tICdjb21wb25lbnRzL3Bvc3Rfdmlldy9mbG9hdGluZ190aW1lc3RhbXAuanN4JztcbmltcG9ydCBDb21tZW50IGZyb20gJ2NvbXBvbmVudHMvcmhzX2NvbW1lbnQuanN4JztcbmltcG9ydCBSaHNIZWFkZXJQb3N0IGZyb20gJ2NvbXBvbmVudHMvcmhzX2hlYWRlcl9wb3N0LmpzeCc7XG5pbXBvcnQgUm9vdFBvc3QgZnJvbSAnY29tcG9uZW50cy9yaHNfcm9vdF9wb3N0LmpzeCc7XG5cbmNvbnN0IFByZWZlcmVuY2VzID0gQ29uc3RhbnRzLlByZWZlcmVuY2VzO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyVmlldyhwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgIGNsYXNzTmFtZT0nc2Nyb2xsYmFyLS12aWV3J1xuICAgICAgICAvPik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJUaHVtYkhvcml6b250YWwocHJvcHMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgICBjbGFzc05hbWU9J3Njcm9sbGJhci0taG9yaXpvbnRhbCdcbiAgICAgICAgLz4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyVGh1bWJWZXJ0aWNhbChwcm9wcykge1xuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXZcbiAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICAgIGNsYXNzTmFtZT0nc2Nyb2xsYmFyLS12ZXJ0aWNhbCdcbiAgICAgICAgLz4pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSaHNUaHJlYWQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIHBvc3RzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMub2JqZWN0KS5pc1JlcXVpcmVkLFxuICAgICAgICBzZWxlY3RlZDogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgICAgICBmcm9tU2VhcmNoOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICBmcm9tRmxhZ2dlZFBvc3RzOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgZnJvbVBpbm5lZFBvc3RzOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgaXNXZWJydGM6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICBpc01lbnRpb25TZWFyY2g6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICBjdXJyZW50VXNlcjogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxuICAgICAgICB1c2VNaWxpdGFyeVRpbWU6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgICAgIHRvZ2dsZVNpemU6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgICBzaHJpbms6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgICBwcmV2aWV3Q29sbGFwc2VkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIHByZXZpZXdFbmFibGVkOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgICAgICBhY3Rpb25zOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgcmVtb3ZlUG9zdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuICAgICAgICB9KS5pc1JlcXVpcmVkXG4gICAgfVxuXG4gICAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgZnJvbVNlYXJjaDogJycsXG4gICAgICAgIGlzTWVudGlvblNlYXJjaDogZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5vblVzZXJDaGFuZ2UgPSB0aGlzLm9uVXNlckNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlSW5mbyA9IHRoaXMuZm9yY2VVcGRhdGVJbmZvLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25QcmVmZXJlbmNlQ2hhbmdlID0gdGhpcy5vblByZWZlcmVuY2VDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblN0YXR1c0NoYW5nZSA9IHRoaXMub25TdGF0dXNDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkJ1c3kgPSB0aGlzLm9uQnVzeS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZSA9IHRoaXMuaGFuZGxlUmVzaXplLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlU2Nyb2xsID0gdGhpcy5oYW5kbGVTY3JvbGwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVTY3JvbGxTdG9wID0gdGhpcy5oYW5kbGVTY3JvbGxTdG9wLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2Nyb2xsU3RvcEFjdGlvbiA9IG5ldyBEZWxheWVkQWN0aW9uKHRoaXMuaGFuZGxlU2Nyb2xsU3RvcCk7XG5cbiAgICAgICAgY29uc3Qgb3BlblRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHt9O1xuICAgICAgICBzdGF0ZS53aW5kb3dXaWR0aCA9IFV0aWxzLndpbmRvd1dpZHRoKCk7XG4gICAgICAgIHN0YXRlLndpbmRvd0hlaWdodCA9IFV0aWxzLndpbmRvd0hlaWdodCgpO1xuICAgICAgICBzdGF0ZS5wcm9maWxlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoVXNlclN0b3JlLmdldFByb2ZpbGVzKCkpKTtcbiAgICAgICAgc3RhdGUuY29tcGFjdERpc3BsYXkgPSBQcmVmZXJlbmNlU3RvcmUuZ2V0KFByZWZlcmVuY2VzLkNBVEVHT1JZX0RJU1BMQVlfU0VUVElOR1MsIFByZWZlcmVuY2VzLk1FU1NBR0VfRElTUExBWSwgUHJlZmVyZW5jZXMuTUVTU0FHRV9ESVNQTEFZX0RFRkFVTFQpID09PSBQcmVmZXJlbmNlcy5NRVNTQUdFX0RJU1BMQVlfQ09NUEFDVDtcbiAgICAgICAgc3RhdGUuZmxhZ2dlZFBvc3RzID0gUHJlZmVyZW5jZVN0b3JlLmdldENhdGVnb3J5KENvbnN0YW50cy5QcmVmZXJlbmNlcy5DQVRFR09SWV9GTEFHR0VEX1BPU1QpO1xuICAgICAgICBzdGF0ZS5zdGF0dXNlcyA9IE9iamVjdC5hc3NpZ24oe30sIFVzZXJTdG9yZS5nZXRTdGF0dXNlcygpKTtcbiAgICAgICAgc3RhdGUucHJldmlld3NDb2xsYXBzZWQgPSBQcmVmZXJlbmNlU3RvcmUuZ2V0KFByZWZlcmVuY2VzLkNBVEVHT1JZX0RJU1BMQVlfU0VUVElOR1MsIFByZWZlcmVuY2VzLkNPTExBUFNFX0RJU1BMQVksICdmYWxzZScpO1xuICAgICAgICBzdGF0ZS5pc0J1c3kgPSBXZWJydGNTdG9yZS5pc0J1c3koKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICBpc1Njcm9sbGluZzogZmFsc2UsXG4gICAgICAgICAgICB0b3BSaHNQb3N0Q3JlYXRlQXQ6IDAsXG4gICAgICAgICAgICBvcGVuVGltZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBQcmVmZXJlbmNlU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vblByZWZlcmVuY2VDaGFuZ2UpO1xuICAgICAgICBVc2VyU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vblVzZXJDaGFuZ2UpO1xuICAgICAgICBVc2VyU3RvcmUuYWRkU3RhdHVzZXNDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uU3RhdHVzQ2hhbmdlKTtcbiAgICAgICAgV2VicnRjU3RvcmUuYWRkQnVzeUxpc3RlbmVyKHRoaXMub25CdXN5KTtcblxuICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmhhbmRsZVJlc2l6ZSk7XG5cbiAgICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgUHJlZmVyZW5jZVN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMub25QcmVmZXJlbmNlQ2hhbmdlKTtcbiAgICAgICAgVXNlclN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMub25Vc2VyQ2hhbmdlKTtcbiAgICAgICAgVXNlclN0b3JlLnJlbW92ZVN0YXR1c2VzQ2hhbmdlTGlzdGVuZXIodGhpcy5vblN0YXR1c0NoYW5nZSk7XG4gICAgICAgIFdlYnJ0Y1N0b3JlLnJlbW92ZUJ1c3lMaXN0ZW5lcih0aGlzLm9uQnVzeSk7XG5cbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlUmVzaXplKTtcblxuICAgICAgICB0aGlzLm1vdW50ZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgICAgIGNvbnN0IHByZXZQb3N0c0FycmF5ID0gcHJldlByb3BzLnBvc3RzIHx8IFtdO1xuICAgICAgICBjb25zdCBjdXJQb3N0c0FycmF5ID0gdGhpcy5wcm9wcy5wb3N0cyB8fCBbXTtcblxuICAgICAgICBpZiAocHJldlBvc3RzQXJyYXkubGVuZ3RoID49IGN1clBvc3RzQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjdXJMYXN0UG9zdCA9IGN1clBvc3RzQXJyYXlbY3VyUG9zdHNBcnJheS5sZW5ndGggLSAxXTtcblxuICAgICAgICBpZiAoY3VyTGFzdFBvc3QudXNlcl9pZCA9PT0gVXNlclN0b3JlLmdldEN1cnJlbnRJZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICAgICAgaWYgKCFVdGlscy5hcmVPYmplY3RzRXF1YWwobmV4dFN0YXRlLnN0YXR1c2VzLCB0aGlzLnN0YXRlLnN0YXR1c2VzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIVV0aWxzLmFyZU9iamVjdHNFcXVhbChuZXh0U3RhdGUucG9zdHNBcnJheSwgdGhpcy5wcm9wcy5wb3N0cykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFVdGlscy5hcmVPYmplY3RzRXF1YWwobmV4dFN0YXRlLnNlbGVjdGVkLCB0aGlzLnByb3BzLnNlbGVjdGVkKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dFN0YXRlLmNvbXBhY3REaXNwbGF5ICE9PSB0aGlzLnN0YXRlLmNvbXBhY3REaXNwbGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXh0UHJvcHMudXNlTWlsaXRhcnlUaW1lICE9PSB0aGlzLnByb3BzLnVzZU1pbGl0YXJ5VGltZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dFN0YXRlLnByZXZpZXdzQ29sbGFwc2VkICE9PSB0aGlzLnN0YXRlLnByZXZpZXdzQ29sbGFwc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXh0UHJvcHMucHJldmlld0VuYWJsZWQgIT09IHRoaXMucHJvcHMucHJldmlld0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFVdGlscy5hcmVPYmplY3RzRXF1YWwobmV4dFN0YXRlLmZsYWdnZWRQb3N0cywgdGhpcy5zdGF0ZS5mbGFnZ2VkUG9zdHMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghVXRpbHMuYXJlT2JqZWN0c0VxdWFsKG5leHRTdGF0ZS5wcm9maWxlcywgdGhpcy5zdGF0ZS5wcm9maWxlcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFVdGlscy5hcmVPYmplY3RzRXF1YWwobmV4dFByb3BzLmN1cnJlbnRVc2VyLCB0aGlzLnByb3BzLmN1cnJlbnRVc2VyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dFN0YXRlLmlzQnVzeSAhPT0gdGhpcy5zdGF0ZS5pc0J1c3kpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5leHRTdGF0ZS5pc1Njcm9sbGluZyAhPT0gdGhpcy5zdGF0ZS5pc1Njcm9sbGluZykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dFN0YXRlLnRvcFJoc1Bvc3RDcmVhdGVBdCAhPT0gdGhpcy5zdGF0ZS50b3BSaHNQb3N0Q3JlYXRlQXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXh0UHJvcHMucHJldmlld0NvbGxhcHNlZCAhPT0gdGhpcy5wcm9wcy5wcmV2aWV3Q29sbGFwc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3JjZVVwZGF0ZUluZm8oKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnBvc3RMaXN0KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBwb3N0SWQgaW4gdGhpcy5zdGF0ZS5wb3N0TGlzdC5wb3N0cykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZnNbcG9zdElkXSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnNbcG9zdElkXS5mb3JjZVVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZVJlc2l6ZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICB3aW5kb3dXaWR0aDogVXRpbHMud2luZG93V2lkdGgoKSxcbiAgICAgICAgICAgIHdpbmRvd0hlaWdodDogVXRpbHMud2luZG93SGVpZ2h0KClcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BzLnNlbGVjdGVkIHx8ICFuZXh0UHJvcHMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdGVkLmlkICE9PSBuZXh0UHJvcHMuc2VsZWN0ZWQuaWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIG9wZW5UaW1lOiAobmV3IERhdGUoKSkuZ2V0VGltZSgpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uUHJlZmVyZW5jZUNoYW5nZShjYXRlZ29yeSkge1xuICAgICAgICBsZXQgcHJldmlld1N1ZmZpeCA9ICcnO1xuICAgICAgICBpZiAoY2F0ZWdvcnkgPT09IFByZWZlcmVuY2VzLkNBVEVHT1JZX0RJU1BMQVlfU0VUVElOR1MpIHtcbiAgICAgICAgICAgIHByZXZpZXdTdWZmaXggPSAnXycgKyBVdGlscy5nZW5lcmF0ZUlkKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGNvbXBhY3REaXNwbGF5OiBQcmVmZXJlbmNlU3RvcmUuZ2V0KFByZWZlcmVuY2VzLkNBVEVHT1JZX0RJU1BMQVlfU0VUVElOR1MsIFByZWZlcmVuY2VzLk1FU1NBR0VfRElTUExBWSwgUHJlZmVyZW5jZXMuTUVTU0FHRV9ESVNQTEFZX0RFRkFVTFQpID09PSBQcmVmZXJlbmNlcy5NRVNTQUdFX0RJU1BMQVlfQ09NUEFDVCxcbiAgICAgICAgICAgIGZsYWdnZWRQb3N0czogUHJlZmVyZW5jZVN0b3JlLmdldENhdGVnb3J5KENvbnN0YW50cy5QcmVmZXJlbmNlcy5DQVRFR09SWV9GTEFHR0VEX1BPU1QpLFxuICAgICAgICAgICAgcHJldmlld3NDb2xsYXBzZWQ6IFByZWZlcmVuY2VTdG9yZS5nZXQoUHJlZmVyZW5jZXMuQ0FURUdPUllfRElTUExBWV9TRVRUSU5HUywgUHJlZmVyZW5jZXMuQ09MTEFQU0VfRElTUExBWSwgJ2ZhbHNlJykgKyBwcmV2aWV3U3VmZml4XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlSW5mbygpO1xuICAgIH1cblxuICAgIG9uU3RhdHVzQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzdGF0dXNlczogT2JqZWN0LmFzc2lnbih7fSwgVXNlclN0b3JlLmdldFN0YXR1c2VzKCkpfSk7XG4gICAgfVxuXG4gICAgb25CdXN5KGlzQnVzeSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0J1c3l9KTtcbiAgICB9XG5cbiAgICBmaWx0ZXJQb3N0cyhwb3N0cywgc2VsZWN0ZWQsIG9wZW5UaW1lKSB7XG4gICAgICAgIGNvbnN0IHBvc3RzQXJyYXkgPSBbXTtcblxuICAgICAgICBwb3N0cy5mb3JFYWNoKChjcG9zdCkgPT4ge1xuICAgICAgICAgICAgLy8gRG8gbm90IHNob3cgZW1waGVyYWxzIGNyZWF0ZWQgYmVmb3JlIHNpZGViYXIgaGFzIGJlZW4gb3BlbmVkXG4gICAgICAgICAgICBpZiAoY3Bvc3QudHlwZSA9PT0gJ3N5c3RlbV9lcGhlbWVyYWwnICYmIGNwb3N0LmNyZWF0ZV9hdCA8IG9wZW5UaW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY3Bvc3Qucm9vdF9pZCA9PT0gc2VsZWN0ZWQuaWQpIHtcbiAgICAgICAgICAgICAgICBwb3N0c0FycmF5LnVuc2hpZnQoY3Bvc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcG9zdHNBcnJheTtcbiAgICB9XG5cbiAgICBvblVzZXJDaGFuZ2UoKSB7XG4gICAgICAgIGNvbnN0IHByb2ZpbGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShVc2VyU3RvcmUuZ2V0UHJvZmlsZXMoKSkpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtwcm9maWxlc30pO1xuICAgIH1cblxuICAgIHNjcm9sbFRvQm90dG9tKCkge1xuICAgICAgICBpZiAoJCgnLnBvc3QtcmlnaHRfX3Njcm9sbCcpWzBdKSB7XG4gICAgICAgICAgICAkKCcucG9zdC1yaWdodF9fc2Nyb2xsJykucGFyZW50KCkuc2Nyb2xsVG9wKCQoJy5wb3N0LXJpZ2h0X19zY3JvbGwnKVswXS5zY3JvbGxIZWlnaHQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlRmxvYXRpbmdUaW1lc3RhbXAoKSB7XG4gICAgICAgIC8vIHNraXAgdGhpcyBpbiBub24tbW9iaWxlIHZpZXcgc2luY2UgdGhhdCdzIHdoZW4gdGhlIHRpbWVzdGFtcCBpcyB2aXNpYmxlXG4gICAgICAgIGlmICghVXRpbHMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMucG9zdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZXMgPSB0aGlzLnJlZnMucmhzcG9zdGxpc3QuY2hpbGROb2RlcztcbiAgICAgICAgICAgIGNvbnN0IHZpZXdQb3J0ID0gdGhpcy5yZWZzLnJoc3Bvc3RsaXN0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgbGV0IHRvcFJoc1Bvc3RDcmVhdGVBdCA9IDA7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXQgPSAxMDA7XG5cbiAgICAgICAgICAgIC8vIGRldGVybWluZSB0aGUgdG9wIHJocyBjb21tZW50IGFzc3VtaW5nIHRoYXQgY2hpbGROb2RlcyBhbmQgcG9zdHNBcnJheSBhcmUgb2Ygc2FtZSBsZW5ndGhcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICgoY2hpbGROb2Rlc1tpXS5vZmZzZXRUb3AgKyB2aWV3UG9ydC50b3ApIC0gb2Zmc2V0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0b3BSaHNQb3N0Q3JlYXRlQXQgPSB0aGlzLnByb3BzLnBvc3RzW2ldLmNyZWF0ZV9hdDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodG9wUmhzUG9zdENyZWF0ZUF0ICE9PSB0aGlzLnN0YXRlLnRvcFJoc1Bvc3RDcmVhdGVBdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB0b3BSaHNQb3N0Q3JlYXRlQXRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZVNjcm9sbCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVGbG9hdGluZ1RpbWVzdGFtcCgpO1xuXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5pc1Njcm9sbGluZykge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgaXNTY3JvbGxpbmc6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zY3JvbGxTdG9wQWN0aW9uLmZpcmVBZnRlcihDb25zdGFudHMuU0NST0xMX0RFTEFZKTtcbiAgICB9XG5cbiAgICBoYW5kbGVTY3JvbGxTdG9wKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzU2Nyb2xsaW5nOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRTaWRlYmFyQm9keSA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmcy5zaWRlYmFyYm9keTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnBvc3RzID09IG51bGwgfHwgdGhpcy5wcm9wcy5zZWxlY3RlZCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBvc3RzQXJyYXkgPSB0aGlzLmZpbHRlclBvc3RzKHRoaXMucHJvcHMucG9zdHMsIHRoaXMucHJvcHMuc2VsZWN0ZWQsIHRoaXMuc3RhdGUub3BlblRpbWUpO1xuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMucHJvcHMuc2VsZWN0ZWQ7XG4gICAgICAgIGNvbnN0IHByb2ZpbGVzID0gdGhpcy5zdGF0ZS5wcm9maWxlcyB8fCB7fTtcblxuICAgICAgICBsZXQgcHJvZmlsZTtcbiAgICAgICAgaWYgKFVzZXJTdG9yZS5nZXRDdXJyZW50SWQoKSA9PT0gc2VsZWN0ZWQudXNlcl9pZCkge1xuICAgICAgICAgICAgcHJvZmlsZSA9IHRoaXMucHJvcHMuY3VycmVudFVzZXI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9maWxlID0gcHJvZmlsZXNbc2VsZWN0ZWQudXNlcl9pZF07XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaXNSb290RmxhZ2dlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5mbGFnZ2VkUG9zdHMpIHtcbiAgICAgICAgICAgIGlzUm9vdEZsYWdnZWQgPSB0aGlzLnN0YXRlLmZsYWdnZWRQb3N0cy5nZXQoc2VsZWN0ZWQuaWQpICE9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcm9vdFN0YXR1cyA9ICdvZmZsaW5lJztcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc3RhdHVzZXMpIHtcbiAgICAgICAgICAgIHJvb3RTdGF0dXMgPSB0aGlzLnN0YXRlLnN0YXR1c2VzW3NlbGVjdGVkLnVzZXJfaWRdIHx8ICdvZmZsaW5lJztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjcmVhdGVBdCA9IHNlbGVjdGVkLmNyZWF0ZV9hdDtcbiAgICAgICAgaWYgKCFjcmVhdGVBdCkge1xuICAgICAgICAgICAgY3JlYXRlQXQgPSB0aGlzLnByb3BzLnBvc3RzWzBdLmNyZWF0ZV9hdDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByb290UG9zdERheSA9IFV0aWxzLmdldERhdGVGb3JVbml4VGlja3MoY3JlYXRlQXQpO1xuICAgICAgICBsZXQgcHJldmlvdXNQb3N0RGF5ID0gcm9vdFBvc3REYXk7XG5cbiAgICAgICAgY29uc3QgY29tbWVudHNMaXN0cyA9IFtdO1xuICAgICAgICBjb25zdCBwb3N0c0xlbmd0aCA9IHBvc3RzQXJyYXkubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc3RzTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbVBvc3QgPSBwb3N0c0FycmF5W2ldO1xuICAgICAgICAgICAgbGV0IHA7XG4gICAgICAgICAgICBpZiAoVXNlclN0b3JlLmdldEN1cnJlbnRJZCgpID09PSBjb21Qb3N0LnVzZXJfaWQpIHtcbiAgICAgICAgICAgICAgICBwID0gVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHAgPSBwcm9maWxlc1tjb21Qb3N0LnVzZXJfaWRdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgaXNGbGFnZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5mbGFnZ2VkUG9zdHMpIHtcbiAgICAgICAgICAgICAgICBpc0ZsYWdnZWQgPSB0aGlzLnN0YXRlLmZsYWdnZWRQb3N0cy5nZXQoY29tUG9zdC5pZCkgIT0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHN0YXR1cyA9ICdvZmZsaW5lJztcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnN0YXR1c2VzICYmIHAgJiYgcC5pZCkge1xuICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRoaXMuc3RhdGUuc3RhdHVzZXNbcC5pZF0gfHwgJ29mZmxpbmUnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UG9zdERheSA9IFV0aWxzLmdldERhdGVGb3JVbml4VGlja3MoY29tUG9zdC5jcmVhdGVfYXQpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRQb3N0RGF5LnRvRGF0ZVN0cmluZygpICE9PSBwcmV2aW91c1Bvc3REYXkudG9EYXRlU3RyaW5nKCkpIHtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Bvc3REYXkgPSBjdXJyZW50UG9zdERheTtcbiAgICAgICAgICAgICAgICBjb21tZW50c0xpc3RzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxEYXRlU2VwYXJhdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlPXtjdXJyZW50UG9zdERheX1cbiAgICAgICAgICAgICAgICAgICAgLz4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBrZXlQcmVmaXggPSBjb21Qb3N0LmlkID8gY29tUG9zdC5pZCA6IGNvbVBvc3QucGVuZGluZ19wb3N0X2lkO1xuICAgICAgICAgICAgY29uc3QgcmV2ZXJzZUNvdW50ID0gcG9zdHNMZW5ndGggLSBpIC0gMTtcbiAgICAgICAgICAgIGNvbW1lbnRzTGlzdHMucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT17a2V5UHJlZml4ICsgJ2NvbW1lbnRLZXknfT5cbiAgICAgICAgICAgICAgICAgICAgPENvbW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17Y29tUG9zdC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3Q9e2NvbVBvc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UG9zdENvdW50PXsocmV2ZXJzZUNvdW50ID49IDAgJiYgcmV2ZXJzZUNvdW50IDwgQ29uc3RhbnRzLlRFU1RfSURfQ09VTlQpID8gcmV2ZXJzZUNvdW50IDogLTF9XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyPXtwfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXI9e3RoaXMucHJvcHMuY3VycmVudFVzZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wYWN0RGlzcGxheT17dGhpcy5zdGF0ZS5jb21wYWN0RGlzcGxheX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZU1pbGl0YXJ5VGltZT17dGhpcy5wcm9wcy51c2VNaWxpdGFyeVRpbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0ZsYWdnZWQ9e2lzRmxhZ2dlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cz17c3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNCdXN5PXt0aGlzLnN0YXRlLmlzQnVzeX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVBvc3Q9e3RoaXMucHJvcHMuYWN0aW9ucy5yZW1vdmVQb3N0fVxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0NvbGxhcHNlZD17dGhpcy5wcm9wcy5wcmV2aWV3Q29sbGFwc2VkfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjcmVhdGVDb21tZW50O1xuICAgICAgICBpZiAoc2VsZWN0ZWQudHlwZSAhPT0gQ29uc3RhbnRzLlBvc3RUeXBlcy5GQUtFX1BBUkVOVF9ERUxFVEVEKSB7XG4gICAgICAgICAgICBjcmVhdGVDb21tZW50ID0gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwb3N0LWNyZWF0ZV9fY29udGFpbmVyJz5cbiAgICAgICAgICAgICAgICAgICAgPENyZWF0ZUNvbW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWxJZD17c2VsZWN0ZWQuY2hhbm5lbF9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RJZD17c2VsZWN0ZWQuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXRlc3RQb3N0SWQ9e3Bvc3RzTGVuZ3RoID4gMCA/IHBvc3RzQXJyYXlbcG9zdHNMZW5ndGggLSAxXS5pZCA6IHNlbGVjdGVkLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U2lkZWJhckJvZHk9e3RoaXMuZ2V0U2lkZWJhckJvZHl9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3NpZGViYXItcmlnaHRfX2JvZHknXG4gICAgICAgICAgICAgICAgcmVmPSdzaWRlYmFyYm9keSdcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8RmxvYXRpbmdUaW1lc3RhbXBcbiAgICAgICAgICAgICAgICAgICAgaXNTY3JvbGxpbmc9e3RoaXMuc3RhdGUuaXNTY3JvbGxpbmd9XG4gICAgICAgICAgICAgICAgICAgIGlzTW9iaWxlPXtVdGlscy5pc01vYmlsZSgpfVxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVBdD17dGhpcy5zdGF0ZS50b3BSaHNQb3N0Q3JlYXRlQXR9XG4gICAgICAgICAgICAgICAgICAgIGlzUmhzUG9zdD17dHJ1ZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxSaHNIZWFkZXJQb3N0XG4gICAgICAgICAgICAgICAgICAgIGZyb21GbGFnZ2VkUG9zdHM9e3RoaXMucHJvcHMuZnJvbUZsYWdnZWRQb3N0c31cbiAgICAgICAgICAgICAgICAgICAgZnJvbVNlYXJjaD17dGhpcy5wcm9wcy5mcm9tU2VhcmNofVxuICAgICAgICAgICAgICAgICAgICBmcm9tUGlubmVkUG9zdHM9e3RoaXMucHJvcHMuZnJvbVBpbm5lZFBvc3RzfVxuICAgICAgICAgICAgICAgICAgICBpc1dlYnJ0Yz17dGhpcy5wcm9wcy5pc1dlYnJ0Y31cbiAgICAgICAgICAgICAgICAgICAgaXNNZW50aW9uU2VhcmNoPXt0aGlzLnByb3BzLmlzTWVudGlvblNlYXJjaH1cbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlU2l6ZT17dGhpcy5wcm9wcy50b2dnbGVTaXplfVxuICAgICAgICAgICAgICAgICAgICBzaHJpbms9e3RoaXMucHJvcHMuc2hyaW5rfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPFNjcm9sbGJhcnNcbiAgICAgICAgICAgICAgICAgICAgYXV0b0hpZGU9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIGF1dG9IaWRlVGltZW91dD17NTAwfVxuICAgICAgICAgICAgICAgICAgICBhdXRvSGlkZUR1cmF0aW9uPXs1MDB9XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlclRodW1iSG9yaXpvbnRhbD17cmVuZGVyVGh1bWJIb3Jpem9udGFsfVxuICAgICAgICAgICAgICAgICAgICByZW5kZXJUaHVtYlZlcnRpY2FsPXtyZW5kZXJUaHVtYlZlcnRpY2FsfVxuICAgICAgICAgICAgICAgICAgICByZW5kZXJWaWV3PXtyZW5kZXJWaWV3fVxuICAgICAgICAgICAgICAgICAgICBvblNjcm9sbD17dGhpcy5oYW5kbGVTY3JvbGx9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncG9zdC1yaWdodF9fc2Nyb2xsJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxEYXRlU2VwYXJhdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZT17cm9vdFBvc3REYXl9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFJvb3RQb3N0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtzZWxlY3RlZC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3N0PXtzZWxlY3RlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50Q291bnQ9e3Bvc3RzTGVuZ3RofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI9e3Byb2ZpbGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXI9e3RoaXMucHJvcHMuY3VycmVudFVzZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFjdERpc3BsYXk9e3RoaXMuc3RhdGUuY29tcGFjdERpc3BsYXl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlTWlsaXRhcnlUaW1lPXt0aGlzLnByb3BzLnVzZU1pbGl0YXJ5VGltZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ZsYWdnZWQ9e2lzUm9vdEZsYWdnZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzPXtyb290U3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdDb2xsYXBzZWQ9e3RoaXMuc3RhdGUucHJldmlld3NDb2xsYXBzZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld0VuYWJsZWQ9e3RoaXMucHJvcHMucHJldmlld0VuYWJsZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNCdXN5PXt0aGlzLnN0YXRlLmlzQnVzeX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSdyaHNwb3N0bGlzdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3Bvc3QtcmlnaHQtY29tbWVudHMtY29udGFpbmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb21tZW50c0xpc3RzfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y3JlYXRlQ29tbWVudH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9TY3JvbGxiYXJzPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvcmhzX3RocmVhZC9yaHNfdGhyZWFkLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwQkE7QUFRQTtBQVFBO0FBQ0E7QUF4Q0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBdkJBO0FBQ0E7QUFDQTtBQXNCQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7OztBQXlCQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFpUUE7QUFDQTtBQUNBO0FBaFFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUpBO0FBMUJBO0FBZ0NBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQU1BO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQURBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBREE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBTUE7QUF4QkE7QUFUQTtBQW5CQTtBQXlEQTs7O0FBNWJBO0FBQ0E7QUFEQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBZEE7QUFEQTtBQXFCQTtBQUNBO0FBRkE7QUFwQkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2493\n");

/***/ }),

/***/ 2494:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Scrollbars = undefined;\n\nvar _Scrollbars = __webpack_require__(2495);\n\nvar _Scrollbars2 = _interopRequireDefault(_Scrollbars);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nexports[\"default\"] = _Scrollbars2[\"default\"];\nexports.Scrollbars = _Scrollbars2[\"default\"];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5NC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvaW5kZXguanM/MjZjZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5TY3JvbGxiYXJzID0gdW5kZWZpbmVkO1xuXG52YXIgX1Njcm9sbGJhcnMgPSByZXF1aXJlKCcuL1Njcm9sbGJhcnMnKTtcblxudmFyIF9TY3JvbGxiYXJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Njcm9sbGJhcnMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBfU2Nyb2xsYmFyczJbXCJkZWZhdWx0XCJdO1xuZXhwb3J0cy5TY3JvbGxiYXJzID0gX1Njcm9sbGJhcnMyW1wiZGVmYXVsdFwiXTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3JlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjQ5NFxuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2494\n");

/***/ }),

/***/ 2495:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _raf2 = __webpack_require__(2496);\n\nvar _raf3 = _interopRequireDefault(_raf2);\n\nvar _domCss = __webpack_require__(2280);\n\nvar _domCss2 = _interopRequireDefault(_domCss);\n\nvar _react = __webpack_require__(1);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _isString = __webpack_require__(2503);\n\nvar _isString2 = _interopRequireDefault(_isString);\n\nvar _getScrollbarWidth = __webpack_require__(2504);\n\nvar _getScrollbarWidth2 = _interopRequireDefault(_getScrollbarWidth);\n\nvar _returnFalse = __webpack_require__(2505);\n\nvar _returnFalse2 = _interopRequireDefault(_returnFalse);\n\nvar _getInnerWidth = __webpack_require__(2506);\n\nvar _getInnerWidth2 = _interopRequireDefault(_getInnerWidth);\n\nvar _getInnerHeight = __webpack_require__(2507);\n\nvar _getInnerHeight2 = _interopRequireDefault(_getInnerHeight);\n\nvar _styles = __webpack_require__(2508);\n\nvar _defaultRenderElements = __webpack_require__(2509);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Scrollbars = function (_Component) {\n    _inherits(Scrollbars, _Component);\n\n    function Scrollbars(props) {\n        var _ref;\n\n        _classCallCheck(this, Scrollbars);\n\n        for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            rest[_key - 1] = arguments[_key];\n        }\n\n        var _this = _possibleConstructorReturn(this, (_ref = Scrollbars.__proto__ || Object.getPrototypeOf(Scrollbars)).call.apply(_ref, [this, props].concat(rest)));\n\n        _this.getScrollLeft = _this.getScrollLeft.bind(_this);\n        _this.getScrollTop = _this.getScrollTop.bind(_this);\n        _this.getScrollWidth = _this.getScrollWidth.bind(_this);\n        _this.getScrollHeight = _this.getScrollHeight.bind(_this);\n        _this.getClientWidth = _this.getClientWidth.bind(_this);\n        _this.getClientHeight = _this.getClientHeight.bind(_this);\n        _this.getValues = _this.getValues.bind(_this);\n        _this.getThumbHorizontalWidth = _this.getThumbHorizontalWidth.bind(_this);\n        _this.getThumbVerticalHeight = _this.getThumbVerticalHeight.bind(_this);\n        _this.getScrollLeftForOffset = _this.getScrollLeftForOffset.bind(_this);\n        _this.getScrollTopForOffset = _this.getScrollTopForOffset.bind(_this);\n\n        _this.scrollLeft = _this.scrollLeft.bind(_this);\n        _this.scrollTop = _this.scrollTop.bind(_this);\n        _this.scrollToLeft = _this.scrollToLeft.bind(_this);\n        _this.scrollToTop = _this.scrollToTop.bind(_this);\n        _this.scrollToRight = _this.scrollToRight.bind(_this);\n        _this.scrollToBottom = _this.scrollToBottom.bind(_this);\n\n        _this.handleTrackMouseEnter = _this.handleTrackMouseEnter.bind(_this);\n        _this.handleTrackMouseLeave = _this.handleTrackMouseLeave.bind(_this);\n        _this.handleHorizontalTrackMouseDown = _this.handleHorizontalTrackMouseDown.bind(_this);\n        _this.handleVerticalTrackMouseDown = _this.handleVerticalTrackMouseDown.bind(_this);\n        _this.handleHorizontalThumbMouseDown = _this.handleHorizontalThumbMouseDown.bind(_this);\n        _this.handleVerticalThumbMouseDown = _this.handleVerticalThumbMouseDown.bind(_this);\n        _this.handleWindowResize = _this.handleWindowResize.bind(_this);\n        _this.handleScroll = _this.handleScroll.bind(_this);\n        _this.handleDrag = _this.handleDrag.bind(_this);\n        _this.handleDragEnd = _this.handleDragEnd.bind(_this);\n\n        _this.state = {\n            didMountUniversal: false\n        };\n        return _this;\n    }\n\n    _createClass(Scrollbars, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.addListeners();\n            this.update();\n            this.componentDidMountUniversal();\n        }\n    }, {\n        key: 'componentDidMountUniversal',\n        value: function componentDidMountUniversal() {\n            // eslint-disable-line react/sort-comp\n            var universal = this.props.universal;\n\n            if (!universal) return;\n            this.setState({ didMountUniversal: true });\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            this.update();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.removeListeners();\n            (0, _raf2.cancel)(this.requestFrame);\n            clearTimeout(this.hideTracksTimeout);\n            clearInterval(this.detectScrollingInterval);\n        }\n    }, {\n        key: 'getScrollLeft',\n        value: function getScrollLeft() {\n            return this.view.scrollLeft;\n        }\n    }, {\n        key: 'getScrollTop',\n        value: function getScrollTop() {\n            return this.view.scrollTop;\n        }\n    }, {\n        key: 'getScrollWidth',\n        value: function getScrollWidth() {\n            return this.view.scrollWidth;\n        }\n    }, {\n        key: 'getScrollHeight',\n        value: function getScrollHeight() {\n            return this.view.scrollHeight;\n        }\n    }, {\n        key: 'getClientWidth',\n        value: function getClientWidth() {\n            return this.view.clientWidth;\n        }\n    }, {\n        key: 'getClientHeight',\n        value: function getClientHeight() {\n            return this.view.clientHeight;\n        }\n    }, {\n        key: 'getValues',\n        value: function getValues() {\n            var _view = this.view,\n                scrollLeft = _view.scrollLeft,\n                scrollTop = _view.scrollTop,\n                scrollWidth = _view.scrollWidth,\n                scrollHeight = _view.scrollHeight,\n                clientWidth = _view.clientWidth,\n                clientHeight = _view.clientHeight;\n\n\n            return {\n                left: scrollLeft / (scrollWidth - clientWidth) || 0,\n                top: scrollTop / (scrollHeight - clientHeight) || 0,\n                scrollLeft: scrollLeft,\n                scrollTop: scrollTop,\n                scrollWidth: scrollWidth,\n                scrollHeight: scrollHeight,\n                clientWidth: clientWidth,\n                clientHeight: clientHeight\n            };\n        }\n    }, {\n        key: 'getThumbHorizontalWidth',\n        value: function getThumbHorizontalWidth() {\n            var _props = this.props,\n                thumbSize = _props.thumbSize,\n                thumbMinSize = _props.thumbMinSize;\n            var _view2 = this.view,\n                scrollWidth = _view2.scrollWidth,\n                clientWidth = _view2.clientWidth;\n\n            var trackWidth = (0, _getInnerWidth2[\"default\"])(this.trackHorizontal);\n            var width = Math.ceil(clientWidth / scrollWidth * trackWidth);\n            if (trackWidth === width) return 0;\n            if (thumbSize) return thumbSize;\n            return Math.max(width, thumbMinSize);\n        }\n    }, {\n        key: 'getThumbVerticalHeight',\n        value: function getThumbVerticalHeight() {\n            var _props2 = this.props,\n                thumbSize = _props2.thumbSize,\n                thumbMinSize = _props2.thumbMinSize;\n            var _view3 = this.view,\n                scrollHeight = _view3.scrollHeight,\n                clientHeight = _view3.clientHeight;\n\n            var trackHeight = (0, _getInnerHeight2[\"default\"])(this.trackVertical);\n            var height = Math.ceil(clientHeight / scrollHeight * trackHeight);\n            if (trackHeight === height) return 0;\n            if (thumbSize) return thumbSize;\n            return Math.max(height, thumbMinSize);\n        }\n    }, {\n        key: 'getScrollLeftForOffset',\n        value: function getScrollLeftForOffset(offset) {\n            var _view4 = this.view,\n                scrollWidth = _view4.scrollWidth,\n                clientWidth = _view4.clientWidth;\n\n            var trackWidth = (0, _getInnerWidth2[\"default\"])(this.trackHorizontal);\n            var thumbWidth = this.getThumbHorizontalWidth();\n            return offset / (trackWidth - thumbWidth) * (scrollWidth - clientWidth);\n        }\n    }, {\n        key: 'getScrollTopForOffset',\n        value: function getScrollTopForOffset(offset) {\n            var _view5 = this.view,\n                scrollHeight = _view5.scrollHeight,\n                clientHeight = _view5.clientHeight;\n\n            var trackHeight = (0, _getInnerHeight2[\"default\"])(this.trackVertical);\n            var thumbHeight = this.getThumbVerticalHeight();\n            return offset / (trackHeight - thumbHeight) * (scrollHeight - clientHeight);\n        }\n    }, {\n        key: 'scrollLeft',\n        value: function scrollLeft() {\n            var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n            this.view.scrollLeft = left;\n        }\n    }, {\n        key: 'scrollTop',\n        value: function scrollTop() {\n            var top = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n            this.view.scrollTop = top;\n        }\n    }, {\n        key: 'scrollToLeft',\n        value: function scrollToLeft() {\n            this.view.scrollLeft = 0;\n        }\n    }, {\n        key: 'scrollToTop',\n        value: function scrollToTop() {\n            this.view.scrollTop = 0;\n        }\n    }, {\n        key: 'scrollToRight',\n        value: function scrollToRight() {\n            this.view.scrollLeft = this.view.scrollWidth;\n        }\n    }, {\n        key: 'scrollToBottom',\n        value: function scrollToBottom() {\n            this.view.scrollTop = this.view.scrollHeight;\n        }\n    }, {\n        key: 'addListeners',\n        value: function addListeners() {\n            /* istanbul ignore if */\n            if (typeof document === 'undefined') return;\n            var view = this.view,\n                trackHorizontal = this.trackHorizontal,\n                trackVertical = this.trackVertical,\n                thumbHorizontal = this.thumbHorizontal,\n                thumbVertical = this.thumbVertical;\n\n            view.addEventListener('scroll', this.handleScroll);\n            if (!(0, _getScrollbarWidth2[\"default\"])()) return;\n            trackHorizontal.addEventListener('mouseenter', this.handleTrackMouseEnter);\n            trackHorizontal.addEventListener('mouseleave', this.handleTrackMouseLeave);\n            trackHorizontal.addEventListener('mousedown', this.handleHorizontalTrackMouseDown);\n            trackVertical.addEventListener('mouseenter', this.handleTrackMouseEnter);\n            trackVertical.addEventListener('mouseleave', this.handleTrackMouseLeave);\n            trackVertical.addEventListener('mousedown', this.handleVerticalTrackMouseDown);\n            thumbHorizontal.addEventListener('mousedown', this.handleHorizontalThumbMouseDown);\n            thumbVertical.addEventListener('mousedown', this.handleVerticalThumbMouseDown);\n            window.addEventListener('resize', this.handleWindowResize);\n        }\n    }, {\n        key: 'removeListeners',\n        value: function removeListeners() {\n            /* istanbul ignore if */\n            if (typeof document === 'undefined') return;\n            var view = this.view,\n                trackHorizontal = this.trackHorizontal,\n                trackVertical = this.trackVertical,\n                thumbHorizontal = this.thumbHorizontal,\n                thumbVertical = this.thumbVertical;\n\n            view.removeEventListener('scroll', this.handleScroll);\n            if (!(0, _getScrollbarWidth2[\"default\"])()) return;\n            trackHorizontal.removeEventListener('mouseenter', this.handleTrackMouseEnter);\n            trackHorizontal.removeEventListener('mouseleave', this.handleTrackMouseLeave);\n            trackHorizontal.removeEventListener('mousedown', this.handleHorizontalTrackMouseDown);\n            trackVertical.removeEventListener('mouseenter', this.handleTrackMouseEnter);\n            trackVertical.removeEventListener('mouseleave', this.handleTrackMouseLeave);\n            trackVertical.removeEventListener('mousedown', this.handleVerticalTrackMouseDown);\n            thumbHorizontal.removeEventListener('mousedown', this.handleHorizontalThumbMouseDown);\n            thumbVertical.removeEventListener('mousedown', this.handleVerticalThumbMouseDown);\n            window.removeEventListener('resize', this.handleWindowResize);\n            // Possibly setup by `handleDragStart`\n            this.teardownDragging();\n        }\n    }, {\n        key: 'handleScroll',\n        value: function handleScroll(event) {\n            var _this2 = this;\n\n            var _props3 = this.props,\n                onScroll = _props3.onScroll,\n                onScrollFrame = _props3.onScrollFrame;\n\n            if (onScroll) onScroll(event);\n            this.update(function (values) {\n                var scrollLeft = values.scrollLeft,\n                    scrollTop = values.scrollTop;\n\n                _this2.viewScrollLeft = scrollLeft;\n                _this2.viewScrollTop = scrollTop;\n                if (onScrollFrame) onScrollFrame(values);\n            });\n            this.detectScrolling();\n        }\n    }, {\n        key: 'handleScrollStart',\n        value: function handleScrollStart() {\n            var onScrollStart = this.props.onScrollStart;\n\n            if (onScrollStart) onScrollStart();\n            this.handleScrollStartAutoHide();\n        }\n    }, {\n        key: 'handleScrollStartAutoHide',\n        value: function handleScrollStartAutoHide() {\n            var autoHide = this.props.autoHide;\n\n            if (!autoHide) return;\n            this.showTracks();\n        }\n    }, {\n        key: 'handleScrollStop',\n        value: function handleScrollStop() {\n            var onScrollStop = this.props.onScrollStop;\n\n            if (onScrollStop) onScrollStop();\n            this.handleScrollStopAutoHide();\n        }\n    }, {\n        key: 'handleScrollStopAutoHide',\n        value: function handleScrollStopAutoHide() {\n            var autoHide = this.props.autoHide;\n\n            if (!autoHide) return;\n            this.hideTracks();\n        }\n    }, {\n        key: 'handleWindowResize',\n        value: function handleWindowResize() {\n            this.update();\n        }\n    }, {\n        key: 'handleHorizontalTrackMouseDown',\n        value: function handleHorizontalTrackMouseDown(event) {\n            event.preventDefault();\n            var target = event.target,\n                clientX = event.clientX;\n\n            var _target$getBoundingCl = target.getBoundingClientRect(),\n                targetLeft = _target$getBoundingCl.left;\n\n            var thumbWidth = this.getThumbHorizontalWidth();\n            var offset = Math.abs(targetLeft - clientX) - thumbWidth / 2;\n            this.view.scrollLeft = this.getScrollLeftForOffset(offset);\n        }\n    }, {\n        key: 'handleVerticalTrackMouseDown',\n        value: function handleVerticalTrackMouseDown(event) {\n            event.preventDefault();\n            var target = event.target,\n                clientY = event.clientY;\n\n            var _target$getBoundingCl2 = target.getBoundingClientRect(),\n                targetTop = _target$getBoundingCl2.top;\n\n            var thumbHeight = this.getThumbVerticalHeight();\n            var offset = Math.abs(targetTop - clientY) - thumbHeight / 2;\n            this.view.scrollTop = this.getScrollTopForOffset(offset);\n        }\n    }, {\n        key: 'handleHorizontalThumbMouseDown',\n        value: function handleHorizontalThumbMouseDown(event) {\n            event.preventDefault();\n            this.handleDragStart(event);\n            var target = event.target,\n                clientX = event.clientX;\n            var offsetWidth = target.offsetWidth;\n\n            var _target$getBoundingCl3 = target.getBoundingClientRect(),\n                left = _target$getBoundingCl3.left;\n\n            this.prevPageX = offsetWidth - (clientX - left);\n        }\n    }, {\n        key: 'handleVerticalThumbMouseDown',\n        value: function handleVerticalThumbMouseDown(event) {\n            event.preventDefault();\n            this.handleDragStart(event);\n            var target = event.target,\n                clientY = event.clientY;\n            var offsetHeight = target.offsetHeight;\n\n            var _target$getBoundingCl4 = target.getBoundingClientRect(),\n                top = _target$getBoundingCl4.top;\n\n            this.prevPageY = offsetHeight - (clientY - top);\n        }\n    }, {\n        key: 'setupDragging',\n        value: function setupDragging() {\n            (0, _domCss2[\"default\"])(document.body, _styles.disableSelectStyle);\n            document.addEventListener('mousemove', this.handleDrag);\n            document.addEventListener('mouseup', this.handleDragEnd);\n            document.onselectstart = _returnFalse2[\"default\"];\n        }\n    }, {\n        key: 'teardownDragging',\n        value: function teardownDragging() {\n            (0, _domCss2[\"default\"])(document.body, _styles.disableSelectStyleReset);\n            document.removeEventListener('mousemove', this.handleDrag);\n            document.removeEventListener('mouseup', this.handleDragEnd);\n            document.onselectstart = undefined;\n        }\n    }, {\n        key: 'handleDragStart',\n        value: function handleDragStart(event) {\n            this.dragging = true;\n            event.stopImmediatePropagation();\n            this.setupDragging();\n        }\n    }, {\n        key: 'handleDrag',\n        value: function handleDrag(event) {\n            if (this.prevPageX) {\n                var clientX = event.clientX;\n\n                var _trackHorizontal$getB = this.trackHorizontal.getBoundingClientRect(),\n                    trackLeft = _trackHorizontal$getB.left;\n\n                var thumbWidth = this.getThumbHorizontalWidth();\n                var clickPosition = thumbWidth - this.prevPageX;\n                var offset = -trackLeft + clientX - clickPosition;\n                this.view.scrollLeft = this.getScrollLeftForOffset(offset);\n            }\n            if (this.prevPageY) {\n                var clientY = event.clientY;\n\n                var _trackVertical$getBou = this.trackVertical.getBoundingClientRect(),\n                    trackTop = _trackVertical$getBou.top;\n\n                var thumbHeight = this.getThumbVerticalHeight();\n                var _clickPosition = thumbHeight - this.prevPageY;\n                var _offset = -trackTop + clientY - _clickPosition;\n                this.view.scrollTop = this.getScrollTopForOffset(_offset);\n            }\n            return false;\n        }\n    }, {\n        key: 'handleDragEnd',\n        value: function handleDragEnd() {\n            this.dragging = false;\n            this.prevPageX = this.prevPageY = 0;\n            this.teardownDragging();\n            this.handleDragEndAutoHide();\n        }\n    }, {\n        key: 'handleDragEndAutoHide',\n        value: function handleDragEndAutoHide() {\n            var autoHide = this.props.autoHide;\n\n            if (!autoHide) return;\n            this.hideTracks();\n        }\n    }, {\n        key: 'handleTrackMouseEnter',\n        value: function handleTrackMouseEnter() {\n            this.trackMouseOver = true;\n            this.handleTrackMouseEnterAutoHide();\n        }\n    }, {\n        key: 'handleTrackMouseEnterAutoHide',\n        value: function handleTrackMouseEnterAutoHide() {\n            var autoHide = this.props.autoHide;\n\n            if (!autoHide) return;\n            this.showTracks();\n        }\n    }, {\n        key: 'handleTrackMouseLeave',\n        value: function handleTrackMouseLeave() {\n            this.trackMouseOver = false;\n            this.handleTrackMouseLeaveAutoHide();\n        }\n    }, {\n        key: 'handleTrackMouseLeaveAutoHide',\n        value: function handleTrackMouseLeaveAutoHide() {\n            var autoHide = this.props.autoHide;\n\n            if (!autoHide) return;\n            this.hideTracks();\n        }\n    }, {\n        key: 'showTracks',\n        value: function showTracks() {\n            clearTimeout(this.hideTracksTimeout);\n            (0, _domCss2[\"default\"])(this.trackHorizontal, { opacity: 1 });\n            (0, _domCss2[\"default\"])(this.trackVertical, { opacity: 1 });\n        }\n    }, {\n        key: 'hideTracks',\n        value: function hideTracks() {\n            var _this3 = this;\n\n            if (this.dragging) return;\n            if (this.scrolling) return;\n            if (this.trackMouseOver) return;\n            var autoHideTimeout = this.props.autoHideTimeout;\n\n            clearTimeout(this.hideTracksTimeout);\n            this.hideTracksTimeout = setTimeout(function () {\n                (0, _domCss2[\"default\"])(_this3.trackHorizontal, { opacity: 0 });\n                (0, _domCss2[\"default\"])(_this3.trackVertical, { opacity: 0 });\n            }, autoHideTimeout);\n        }\n    }, {\n        key: 'detectScrolling',\n        value: function detectScrolling() {\n            var _this4 = this;\n\n            if (this.scrolling) return;\n            this.scrolling = true;\n            this.handleScrollStart();\n            this.detectScrollingInterval = setInterval(function () {\n                if (_this4.lastViewScrollLeft === _this4.viewScrollLeft && _this4.lastViewScrollTop === _this4.viewScrollTop) {\n                    clearInterval(_this4.detectScrollingInterval);\n                    _this4.scrolling = false;\n                    _this4.handleScrollStop();\n                }\n                _this4.lastViewScrollLeft = _this4.viewScrollLeft;\n                _this4.lastViewScrollTop = _this4.viewScrollTop;\n            }, 100);\n        }\n    }, {\n        key: 'raf',\n        value: function raf(callback) {\n            var _this5 = this;\n\n            if (this.requestFrame) _raf3[\"default\"].cancel(this.requestFrame);\n            this.requestFrame = (0, _raf3[\"default\"])(function () {\n                _this5.requestFrame = undefined;\n                callback();\n            });\n        }\n    }, {\n        key: 'update',\n        value: function update(callback) {\n            var _this6 = this;\n\n            this.raf(function () {\n                return _this6._update(callback);\n            });\n        }\n    }, {\n        key: '_update',\n        value: function _update(callback) {\n            var _props4 = this.props,\n                onUpdate = _props4.onUpdate,\n                hideTracksWhenNotNeeded = _props4.hideTracksWhenNotNeeded;\n\n            var values = this.getValues();\n            if ((0, _getScrollbarWidth2[\"default\"])()) {\n                var scrollLeft = values.scrollLeft,\n                    clientWidth = values.clientWidth,\n                    scrollWidth = values.scrollWidth;\n\n                var trackHorizontalWidth = (0, _getInnerWidth2[\"default\"])(this.trackHorizontal);\n                var thumbHorizontalWidth = this.getThumbHorizontalWidth();\n                var thumbHorizontalX = scrollLeft / (scrollWidth - clientWidth) * (trackHorizontalWidth - thumbHorizontalWidth);\n                var thumbHorizontalStyle = {\n                    width: thumbHorizontalWidth,\n                    transform: 'translateX(' + thumbHorizontalX + 'px)'\n                };\n                var scrollTop = values.scrollTop,\n                    clientHeight = values.clientHeight,\n                    scrollHeight = values.scrollHeight;\n\n                var trackVerticalHeight = (0, _getInnerHeight2[\"default\"])(this.trackVertical);\n                var thumbVerticalHeight = this.getThumbVerticalHeight();\n                var thumbVerticalY = scrollTop / (scrollHeight - clientHeight) * (trackVerticalHeight - thumbVerticalHeight);\n                var thumbVerticalStyle = {\n                    height: thumbVerticalHeight,\n                    transform: 'translateY(' + thumbVerticalY + 'px)'\n                };\n                if (hideTracksWhenNotNeeded) {\n                    var trackHorizontalStyle = {\n                        visibility: scrollWidth > clientWidth ? 'visible' : 'hidden'\n                    };\n                    var trackVerticalStyle = {\n                        visibility: scrollHeight > clientHeight ? 'visible' : 'hidden'\n                    };\n                    (0, _domCss2[\"default\"])(this.trackHorizontal, trackHorizontalStyle);\n                    (0, _domCss2[\"default\"])(this.trackVertical, trackVerticalStyle);\n                }\n                (0, _domCss2[\"default\"])(this.thumbHorizontal, thumbHorizontalStyle);\n                (0, _domCss2[\"default\"])(this.thumbVertical, thumbVerticalStyle);\n            }\n            if (onUpdate) onUpdate(values);\n            if (typeof callback !== 'function') return;\n            callback(values);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this7 = this;\n\n            var scrollbarWidth = (0, _getScrollbarWidth2[\"default\"])();\n            /* eslint-disable no-unused-vars */\n\n            var _props5 = this.props,\n                onScroll = _props5.onScroll,\n                onScrollFrame = _props5.onScrollFrame,\n                onScrollStart = _props5.onScrollStart,\n                onScrollStop = _props5.onScrollStop,\n                onUpdate = _props5.onUpdate,\n                renderView = _props5.renderView,\n                renderTrackHorizontal = _props5.renderTrackHorizontal,\n                renderTrackVertical = _props5.renderTrackVertical,\n                renderThumbHorizontal = _props5.renderThumbHorizontal,\n                renderThumbVertical = _props5.renderThumbVertical,\n                tagName = _props5.tagName,\n                hideTracksWhenNotNeeded = _props5.hideTracksWhenNotNeeded,\n                autoHide = _props5.autoHide,\n                autoHideTimeout = _props5.autoHideTimeout,\n                autoHideDuration = _props5.autoHideDuration,\n                thumbSize = _props5.thumbSize,\n                thumbMinSize = _props5.thumbMinSize,\n                universal = _props5.universal,\n                autoHeight = _props5.autoHeight,\n                autoHeightMin = _props5.autoHeightMin,\n                autoHeightMax = _props5.autoHeightMax,\n                style = _props5.style,\n                children = _props5.children,\n                props = _objectWithoutProperties(_props5, ['onScroll', 'onScrollFrame', 'onScrollStart', 'onScrollStop', 'onUpdate', 'renderView', 'renderTrackHorizontal', 'renderTrackVertical', 'renderThumbHorizontal', 'renderThumbVertical', 'tagName', 'hideTracksWhenNotNeeded', 'autoHide', 'autoHideTimeout', 'autoHideDuration', 'thumbSize', 'thumbMinSize', 'universal', 'autoHeight', 'autoHeightMin', 'autoHeightMax', 'style', 'children']);\n            /* eslint-enable no-unused-vars */\n\n            var didMountUniversal = this.state.didMountUniversal;\n\n\n            var containerStyle = _extends({}, _styles.containerStyleDefault, autoHeight && _extends({}, _styles.containerStyleAutoHeight, {\n                minHeight: autoHeightMin,\n                maxHeight: autoHeightMax\n            }), style);\n\n            var viewStyle = _extends({}, _styles.viewStyleDefault, {\n                // Hide scrollbars by setting a negative margin\n                marginRight: scrollbarWidth ? -scrollbarWidth : 0,\n                marginBottom: scrollbarWidth ? -scrollbarWidth : 0\n            }, autoHeight && _extends({}, _styles.viewStyleAutoHeight, {\n                // Add scrollbarWidth to autoHeight in order to compensate negative margins\n                minHeight: (0, _isString2[\"default\"])(autoHeightMin) ? 'calc(' + autoHeightMin + ' + ' + scrollbarWidth + 'px)' : autoHeightMin + scrollbarWidth,\n                maxHeight: (0, _isString2[\"default\"])(autoHeightMax) ? 'calc(' + autoHeightMax + ' + ' + scrollbarWidth + 'px)' : autoHeightMax + scrollbarWidth\n            }), autoHeight && universal && !didMountUniversal && {\n                minHeight: autoHeightMin,\n                maxHeight: autoHeightMax\n            }, universal && !didMountUniversal && _styles.viewStyleUniversalInitial);\n\n            var trackAutoHeightStyle = {\n                transition: 'opacity ' + autoHideDuration + 'ms',\n                opacity: 0\n            };\n\n            var trackHorizontalStyle = _extends({}, _styles.trackHorizontalStyleDefault, autoHide && trackAutoHeightStyle, (!scrollbarWidth || universal && !didMountUniversal) && {\n                display: 'none'\n            });\n\n            var trackVerticalStyle = _extends({}, _styles.trackVerticalStyleDefault, autoHide && trackAutoHeightStyle, (!scrollbarWidth || universal && !didMountUniversal) && {\n                display: 'none'\n            });\n\n            return (0, _react.createElement)(tagName, _extends({}, props, { style: containerStyle, ref: function ref(_ref2) {\n                    _this7.container = _ref2;\n                } }), [(0, _react.cloneElement)(renderView({ style: viewStyle }), { key: 'view', ref: function ref(_ref3) {\n                    _this7.view = _ref3;\n                } }, children), (0, _react.cloneElement)(renderTrackHorizontal({ style: trackHorizontalStyle }), { key: 'trackHorizontal', ref: function ref(_ref4) {\n                    _this7.trackHorizontal = _ref4;\n                } }, (0, _react.cloneElement)(renderThumbHorizontal({ style: _styles.thumbHorizontalStyleDefault }), { ref: function ref(_ref5) {\n                    _this7.thumbHorizontal = _ref5;\n                } })), (0, _react.cloneElement)(renderTrackVertical({ style: trackVerticalStyle }), { key: 'trackVertical', ref: function ref(_ref6) {\n                    _this7.trackVertical = _ref6;\n                } }, (0, _react.cloneElement)(renderThumbVertical({ style: _styles.thumbVerticalStyleDefault }), { ref: function ref(_ref7) {\n                    _this7.thumbVertical = _ref7;\n                } }))]);\n        }\n    }]);\n\n    return Scrollbars;\n}(_react.Component);\n\nexports[\"default\"] = Scrollbars;\n\n\nScrollbars.propTypes = {\n    onScroll: _propTypes2[\"default\"].func,\n    onScrollFrame: _propTypes2[\"default\"].func,\n    onScrollStart: _propTypes2[\"default\"].func,\n    onScrollStop: _propTypes2[\"default\"].func,\n    onUpdate: _propTypes2[\"default\"].func,\n    renderView: _propTypes2[\"default\"].func,\n    renderTrackHorizontal: _propTypes2[\"default\"].func,\n    renderTrackVertical: _propTypes2[\"default\"].func,\n    renderThumbHorizontal: _propTypes2[\"default\"].func,\n    renderThumbVertical: _propTypes2[\"default\"].func,\n    tagName: _propTypes2[\"default\"].string,\n    thumbSize: _propTypes2[\"default\"].number,\n    thumbMinSize: _propTypes2[\"default\"].number,\n    hideTracksWhenNotNeeded: _propTypes2[\"default\"].bool,\n    autoHide: _propTypes2[\"default\"].bool,\n    autoHideTimeout: _propTypes2[\"default\"].number,\n    autoHideDuration: _propTypes2[\"default\"].number,\n    autoHeight: _propTypes2[\"default\"].bool,\n    autoHeightMin: _propTypes2[\"default\"].oneOfType([_propTypes2[\"default\"].number, _propTypes2[\"default\"].string]),\n    autoHeightMax: _propTypes2[\"default\"].oneOfType([_propTypes2[\"default\"].number, _propTypes2[\"default\"].string]),\n    universal: _propTypes2[\"default\"].bool,\n    style: _propTypes2[\"default\"].object,\n    children: _propTypes2[\"default\"].node\n};\n\nScrollbars.defaultProps = {\n    renderView: _defaultRenderElements.renderViewDefault,\n    renderTrackHorizontal: _defaultRenderElements.renderTrackHorizontalDefault,\n    renderTrackVertical: _defaultRenderElements.renderTrackVerticalDefault,\n    renderThumbHorizontal: _defaultRenderElements.renderThumbHorizontalDefault,\n    renderThumbVertical: _defaultRenderElements.renderThumbVerticalDefault,\n    tagName: 'div',\n    thumbMinSize: 30,\n    hideTracksWhenNotNeeded: false,\n    autoHide: false,\n    autoHideTimeout: 1000,\n    autoHideDuration: 200,\n    autoHeight: false,\n    autoHeightMin: 0,\n    autoHeightMax: 200,\n    universal: false\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5NS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvU2Nyb2xsYmFycy9pbmRleC5qcz8wYzViIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiogSU1QT1JUUyBGUk9NIGltcG9ydHMtbG9hZGVyICoqKi9cbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xuXG4ndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9yYWYyID0gcmVxdWlyZSgncmFmJyk7XG5cbnZhciBfcmFmMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JhZjIpO1xuXG52YXIgX2RvbUNzcyA9IHJlcXVpcmUoJ2RvbS1jc3MnKTtcblxudmFyIF9kb21Dc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZG9tQ3NzKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcHJvcFR5cGVzID0gcmVxdWlyZSgncHJvcC10eXBlcycpO1xuXG52YXIgX3Byb3BUeXBlczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9wVHlwZXMpO1xuXG52YXIgX2lzU3RyaW5nID0gcmVxdWlyZSgnLi4vdXRpbHMvaXNTdHJpbmcnKTtcblxudmFyIF9pc1N0cmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pc1N0cmluZyk7XG5cbnZhciBfZ2V0U2Nyb2xsYmFyV2lkdGggPSByZXF1aXJlKCcuLi91dGlscy9nZXRTY3JvbGxiYXJXaWR0aCcpO1xuXG52YXIgX2dldFNjcm9sbGJhcldpZHRoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFNjcm9sbGJhcldpZHRoKTtcblxudmFyIF9yZXR1cm5GYWxzZSA9IHJlcXVpcmUoJy4uL3V0aWxzL3JldHVybkZhbHNlJyk7XG5cbnZhciBfcmV0dXJuRmFsc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmV0dXJuRmFsc2UpO1xuXG52YXIgX2dldElubmVyV2lkdGggPSByZXF1aXJlKCcuLi91dGlscy9nZXRJbm5lcldpZHRoJyk7XG5cbnZhciBfZ2V0SW5uZXJXaWR0aDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRJbm5lcldpZHRoKTtcblxudmFyIF9nZXRJbm5lckhlaWdodCA9IHJlcXVpcmUoJy4uL3V0aWxzL2dldElubmVySGVpZ2h0Jyk7XG5cbnZhciBfZ2V0SW5uZXJIZWlnaHQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0SW5uZXJIZWlnaHQpO1xuXG52YXIgX3N0eWxlcyA9IHJlcXVpcmUoJy4vc3R5bGVzJyk7XG5cbnZhciBfZGVmYXVsdFJlbmRlckVsZW1lbnRzID0gcmVxdWlyZSgnLi9kZWZhdWx0UmVuZGVyRWxlbWVudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGtleXMpIHsgdmFyIHRhcmdldCA9IHt9OyBmb3IgKHZhciBpIGluIG9iaikgeyBpZiAoa2V5cy5pbmRleE9mKGkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGkpKSBjb250aW51ZTsgdGFyZ2V0W2ldID0gb2JqW2ldOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgU2Nyb2xsYmFycyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50KSB7XG4gICAgX2luaGVyaXRzKFNjcm9sbGJhcnMsIF9Db21wb25lbnQpO1xuXG4gICAgZnVuY3Rpb24gU2Nyb2xsYmFycyhwcm9wcykge1xuICAgICAgICB2YXIgX3JlZjtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2Nyb2xsYmFycyk7XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3QgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgICByZXN0W19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChfcmVmID0gU2Nyb2xsYmFycy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNjcm9sbGJhcnMpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzLCBwcm9wc10uY29uY2F0KHJlc3QpKSk7XG5cbiAgICAgICAgX3RoaXMuZ2V0U2Nyb2xsTGVmdCA9IF90aGlzLmdldFNjcm9sbExlZnQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFNjcm9sbFRvcCA9IF90aGlzLmdldFNjcm9sbFRvcC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0U2Nyb2xsV2lkdGggPSBfdGhpcy5nZXRTY3JvbGxXaWR0aC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0U2Nyb2xsSGVpZ2h0ID0gX3RoaXMuZ2V0U2Nyb2xsSGVpZ2h0LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5nZXRDbGllbnRXaWR0aCA9IF90aGlzLmdldENsaWVudFdpZHRoLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5nZXRDbGllbnRIZWlnaHQgPSBfdGhpcy5nZXRDbGllbnRIZWlnaHQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFZhbHVlcyA9IF90aGlzLmdldFZhbHVlcy5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0VGh1bWJIb3Jpem9udGFsV2lkdGggPSBfdGhpcy5nZXRUaHVtYkhvcml6b250YWxXaWR0aC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuZ2V0VGh1bWJWZXJ0aWNhbEhlaWdodCA9IF90aGlzLmdldFRodW1iVmVydGljYWxIZWlnaHQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmdldFNjcm9sbExlZnRGb3JPZmZzZXQgPSBfdGhpcy5nZXRTY3JvbGxMZWZ0Rm9yT2Zmc2V0LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5nZXRTY3JvbGxUb3BGb3JPZmZzZXQgPSBfdGhpcy5nZXRTY3JvbGxUb3BGb3JPZmZzZXQuYmluZChfdGhpcyk7XG5cbiAgICAgICAgX3RoaXMuc2Nyb2xsTGVmdCA9IF90aGlzLnNjcm9sbExlZnQuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLnNjcm9sbFRvcCA9IF90aGlzLnNjcm9sbFRvcC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuc2Nyb2xsVG9MZWZ0ID0gX3RoaXMuc2Nyb2xsVG9MZWZ0LmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5zY3JvbGxUb1RvcCA9IF90aGlzLnNjcm9sbFRvVG9wLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5zY3JvbGxUb1JpZ2h0ID0gX3RoaXMuc2Nyb2xsVG9SaWdodC5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuc2Nyb2xsVG9Cb3R0b20gPSBfdGhpcy5zY3JvbGxUb0JvdHRvbS5iaW5kKF90aGlzKTtcblxuICAgICAgICBfdGhpcy5oYW5kbGVUcmFja01vdXNlRW50ZXIgPSBfdGhpcy5oYW5kbGVUcmFja01vdXNlRW50ZXIuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZVRyYWNrTW91c2VMZWF2ZSA9IF90aGlzLmhhbmRsZVRyYWNrTW91c2VMZWF2ZS5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duID0gX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVWZXJ0aWNhbFRyYWNrTW91c2VEb3duID0gX3RoaXMuaGFuZGxlVmVydGljYWxUcmFja01vdXNlRG93bi5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRodW1iTW91c2VEb3duID0gX3RoaXMuaGFuZGxlSG9yaXpvbnRhbFRodW1iTW91c2VEb3duLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVWZXJ0aWNhbFRodW1iTW91c2VEb3duID0gX3RoaXMuaGFuZGxlVmVydGljYWxUaHVtYk1vdXNlRG93bi5iaW5kKF90aGlzKTtcbiAgICAgICAgX3RoaXMuaGFuZGxlV2luZG93UmVzaXplID0gX3RoaXMuaGFuZGxlV2luZG93UmVzaXplLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVTY3JvbGwgPSBfdGhpcy5oYW5kbGVTY3JvbGwuYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmhhbmRsZURyYWcgPSBfdGhpcy5oYW5kbGVEcmFnLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5oYW5kbGVEcmFnRW5kID0gX3RoaXMuaGFuZGxlRHJhZ0VuZC5iaW5kKF90aGlzKTtcblxuICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGRpZE1vdW50VW5pdmVyc2FsOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFNjcm9sbGJhcnMsIFt7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudERpZE1vdW50VW5pdmVyc2FsKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudERpZE1vdW50VW5pdmVyc2FsJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50VW5pdmVyc2FsKCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSByZWFjdC9zb3J0LWNvbXBcbiAgICAgICAgICAgIHZhciB1bml2ZXJzYWwgPSB0aGlzLnByb3BzLnVuaXZlcnNhbDtcblxuICAgICAgICAgICAgaWYgKCF1bml2ZXJzYWwpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkaWRNb3VudFVuaXZlcnNhbDogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY29tcG9uZW50RGlkVXBkYXRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2NvbXBvbmVudFdpbGxVbm1vdW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICgwLCBfcmFmMi5jYW5jZWwpKHRoaXMucmVxdWVzdEZyYW1lKTtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhpZGVUcmFja3NUaW1lb3V0KTtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5kZXRlY3RTY3JvbGxpbmdJbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFNjcm9sbExlZnQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2Nyb2xsTGVmdCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXcuc2Nyb2xsTGVmdDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0U2Nyb2xsVG9wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNjcm9sbFRvcCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXcuc2Nyb2xsVG9wO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRTY3JvbGxXaWR0aCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxXaWR0aCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXcuc2Nyb2xsV2lkdGg7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFNjcm9sbEhlaWdodCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxIZWlnaHQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3LnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0Q2xpZW50V2lkdGgnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xpZW50V2lkdGgoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3LmNsaWVudFdpZHRoO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRDbGllbnRIZWlnaHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2xpZW50SGVpZ2h0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlldy5jbGllbnRIZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFZhbHVlcycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRWYWx1ZXMoKSB7XG4gICAgICAgICAgICB2YXIgX3ZpZXcgPSB0aGlzLnZpZXcsXG4gICAgICAgICAgICAgICAgc2Nyb2xsTGVmdCA9IF92aWV3LnNjcm9sbExlZnQsXG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wID0gX3ZpZXcuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgIHNjcm9sbFdpZHRoID0gX3ZpZXcuc2Nyb2xsV2lkdGgsXG4gICAgICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gX3ZpZXcuc2Nyb2xsSGVpZ2h0LFxuICAgICAgICAgICAgICAgIGNsaWVudFdpZHRoID0gX3ZpZXcuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICAgICAgY2xpZW50SGVpZ2h0ID0gX3ZpZXcuY2xpZW50SGVpZ2h0O1xuXG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbGVmdDogc2Nyb2xsTGVmdCAvIChzY3JvbGxXaWR0aCAtIGNsaWVudFdpZHRoKSB8fCAwLFxuICAgICAgICAgICAgICAgIHRvcDogc2Nyb2xsVG9wIC8gKHNjcm9sbEhlaWdodCAtIGNsaWVudEhlaWdodCkgfHwgMCxcbiAgICAgICAgICAgICAgICBzY3JvbGxMZWZ0OiBzY3JvbGxMZWZ0LFxuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogc2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgIHNjcm9sbFdpZHRoOiBzY3JvbGxXaWR0aCxcbiAgICAgICAgICAgICAgICBzY3JvbGxIZWlnaHQ6IHNjcm9sbEhlaWdodCxcbiAgICAgICAgICAgICAgICBjbGllbnRXaWR0aDogY2xpZW50V2lkdGgsXG4gICAgICAgICAgICAgICAgY2xpZW50SGVpZ2h0OiBjbGllbnRIZWlnaHRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2dldFRodW1iSG9yaXpvbnRhbFdpZHRoJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRodW1iSG9yaXpvbnRhbFdpZHRoKCkge1xuICAgICAgICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgdGh1bWJTaXplID0gX3Byb3BzLnRodW1iU2l6ZSxcbiAgICAgICAgICAgICAgICB0aHVtYk1pblNpemUgPSBfcHJvcHMudGh1bWJNaW5TaXplO1xuICAgICAgICAgICAgdmFyIF92aWV3MiA9IHRoaXMudmlldyxcbiAgICAgICAgICAgICAgICBzY3JvbGxXaWR0aCA9IF92aWV3Mi5zY3JvbGxXaWR0aCxcbiAgICAgICAgICAgICAgICBjbGllbnRXaWR0aCA9IF92aWV3Mi5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgdmFyIHRyYWNrV2lkdGggPSAoMCwgX2dldElubmVyV2lkdGgyW1wiZGVmYXVsdFwiXSkodGhpcy50cmFja0hvcml6b250YWwpO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gTWF0aC5jZWlsKGNsaWVudFdpZHRoIC8gc2Nyb2xsV2lkdGggKiB0cmFja1dpZHRoKTtcbiAgICAgICAgICAgIGlmICh0cmFja1dpZHRoID09PSB3aWR0aCkgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAodGh1bWJTaXplKSByZXR1cm4gdGh1bWJTaXplO1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHdpZHRoLCB0aHVtYk1pblNpemUpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdnZXRUaHVtYlZlcnRpY2FsSGVpZ2h0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRodW1iVmVydGljYWxIZWlnaHQoKSB7XG4gICAgICAgICAgICB2YXIgX3Byb3BzMiA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgdGh1bWJTaXplID0gX3Byb3BzMi50aHVtYlNpemUsXG4gICAgICAgICAgICAgICAgdGh1bWJNaW5TaXplID0gX3Byb3BzMi50aHVtYk1pblNpemU7XG4gICAgICAgICAgICB2YXIgX3ZpZXczID0gdGhpcy52aWV3LFxuICAgICAgICAgICAgICAgIHNjcm9sbEhlaWdodCA9IF92aWV3My5zY3JvbGxIZWlnaHQsXG4gICAgICAgICAgICAgICAgY2xpZW50SGVpZ2h0ID0gX3ZpZXczLmNsaWVudEhlaWdodDtcblxuICAgICAgICAgICAgdmFyIHRyYWNrSGVpZ2h0ID0gKDAsIF9nZXRJbm5lckhlaWdodDJbXCJkZWZhdWx0XCJdKSh0aGlzLnRyYWNrVmVydGljYWwpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IE1hdGguY2VpbChjbGllbnRIZWlnaHQgLyBzY3JvbGxIZWlnaHQgKiB0cmFja0hlaWdodCk7XG4gICAgICAgICAgICBpZiAodHJhY2tIZWlnaHQgPT09IGhlaWdodCkgcmV0dXJuIDA7XG4gICAgICAgICAgICBpZiAodGh1bWJTaXplKSByZXR1cm4gdGh1bWJTaXplO1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KGhlaWdodCwgdGh1bWJNaW5TaXplKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0U2Nyb2xsTGVmdEZvck9mZnNldCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTY3JvbGxMZWZ0Rm9yT2Zmc2V0KG9mZnNldCkge1xuICAgICAgICAgICAgdmFyIF92aWV3NCA9IHRoaXMudmlldyxcbiAgICAgICAgICAgICAgICBzY3JvbGxXaWR0aCA9IF92aWV3NC5zY3JvbGxXaWR0aCxcbiAgICAgICAgICAgICAgICBjbGllbnRXaWR0aCA9IF92aWV3NC5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgdmFyIHRyYWNrV2lkdGggPSAoMCwgX2dldElubmVyV2lkdGgyW1wiZGVmYXVsdFwiXSkodGhpcy50cmFja0hvcml6b250YWwpO1xuICAgICAgICAgICAgdmFyIHRodW1iV2lkdGggPSB0aGlzLmdldFRodW1iSG9yaXpvbnRhbFdpZHRoKCk7XG4gICAgICAgICAgICByZXR1cm4gb2Zmc2V0IC8gKHRyYWNrV2lkdGggLSB0aHVtYldpZHRoKSAqIChzY3JvbGxXaWR0aCAtIGNsaWVudFdpZHRoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZ2V0U2Nyb2xsVG9wRm9yT2Zmc2V0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNjcm9sbFRvcEZvck9mZnNldChvZmZzZXQpIHtcbiAgICAgICAgICAgIHZhciBfdmlldzUgPSB0aGlzLnZpZXcsXG4gICAgICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gX3ZpZXc1LnNjcm9sbEhlaWdodCxcbiAgICAgICAgICAgICAgICBjbGllbnRIZWlnaHQgPSBfdmlldzUuY2xpZW50SGVpZ2h0O1xuXG4gICAgICAgICAgICB2YXIgdHJhY2tIZWlnaHQgPSAoMCwgX2dldElubmVySGVpZ2h0MltcImRlZmF1bHRcIl0pKHRoaXMudHJhY2tWZXJ0aWNhbCk7XG4gICAgICAgICAgICB2YXIgdGh1bWJIZWlnaHQgPSB0aGlzLmdldFRodW1iVmVydGljYWxIZWlnaHQoKTtcbiAgICAgICAgICAgIHJldHVybiBvZmZzZXQgLyAodHJhY2tIZWlnaHQgLSB0aHVtYkhlaWdodCkgKiAoc2Nyb2xsSGVpZ2h0IC0gY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2Nyb2xsTGVmdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxMZWZ0KCkge1xuICAgICAgICAgICAgdmFyIGxlZnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDA7XG5cbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxMZWZ0ID0gbGVmdDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2Nyb2xsVG9wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNjcm9sbFRvcCgpIHtcbiAgICAgICAgICAgIHZhciB0b3AgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IDA7XG5cbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxUb3AgPSB0b3A7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Njcm9sbFRvTGVmdCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxUb0xlZnQoKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcuc2Nyb2xsTGVmdCA9IDA7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Njcm9sbFRvVG9wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNjcm9sbFRvVG9wKCkge1xuICAgICAgICAgICAgdGhpcy52aWV3LnNjcm9sbFRvcCA9IDA7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Njcm9sbFRvUmlnaHQnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsVG9SaWdodCgpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxMZWZ0ID0gdGhpcy52aWV3LnNjcm9sbFdpZHRoO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzY3JvbGxUb0JvdHRvbScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxUb0JvdHRvbSgpIHtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxUb3AgPSB0aGlzLnZpZXcuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdhZGRMaXN0ZW5lcnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkTGlzdGVuZXJzKCkge1xuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSB0aGlzLnZpZXcsXG4gICAgICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsID0gdGhpcy50cmFja0hvcml6b250YWwsXG4gICAgICAgICAgICAgICAgdHJhY2tWZXJ0aWNhbCA9IHRoaXMudHJhY2tWZXJ0aWNhbCxcbiAgICAgICAgICAgICAgICB0aHVtYkhvcml6b250YWwgPSB0aGlzLnRodW1iSG9yaXpvbnRhbCxcbiAgICAgICAgICAgICAgICB0aHVtYlZlcnRpY2FsID0gdGhpcy50aHVtYlZlcnRpY2FsO1xuXG4gICAgICAgICAgICB2aWV3LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuaGFuZGxlU2Nyb2xsKTtcbiAgICAgICAgICAgIGlmICghKDAsIF9nZXRTY3JvbGxiYXJXaWR0aDJbXCJkZWZhdWx0XCJdKSgpKSByZXR1cm47XG4gICAgICAgICAgICB0cmFja0hvcml6b250YWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUVudGVyKTtcbiAgICAgICAgICAgIHRyYWNrSG9yaXpvbnRhbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5oYW5kbGVUcmFja01vdXNlTGVhdmUpO1xuICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUVudGVyKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUxlYXZlKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVWZXJ0aWNhbFRyYWNrTW91c2VEb3duKTtcbiAgICAgICAgICAgIHRodW1iSG9yaXpvbnRhbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZUhvcml6b250YWxUaHVtYk1vdXNlRG93bik7XG4gICAgICAgICAgICB0aHVtYlZlcnRpY2FsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlVmVydGljYWxUaHVtYk1vdXNlRG93bik7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW1vdmVMaXN0ZW5lcnMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKCkge1xuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSB0aGlzLnZpZXcsXG4gICAgICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsID0gdGhpcy50cmFja0hvcml6b250YWwsXG4gICAgICAgICAgICAgICAgdHJhY2tWZXJ0aWNhbCA9IHRoaXMudHJhY2tWZXJ0aWNhbCxcbiAgICAgICAgICAgICAgICB0aHVtYkhvcml6b250YWwgPSB0aGlzLnRodW1iSG9yaXpvbnRhbCxcbiAgICAgICAgICAgICAgICB0aHVtYlZlcnRpY2FsID0gdGhpcy50aHVtYlZlcnRpY2FsO1xuXG4gICAgICAgICAgICB2aWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuaGFuZGxlU2Nyb2xsKTtcbiAgICAgICAgICAgIGlmICghKDAsIF9nZXRTY3JvbGxiYXJXaWR0aDJbXCJkZWZhdWx0XCJdKSgpKSByZXR1cm47XG4gICAgICAgICAgICB0cmFja0hvcml6b250YWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUVudGVyKTtcbiAgICAgICAgICAgIHRyYWNrSG9yaXpvbnRhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5oYW5kbGVUcmFja01vdXNlTGVhdmUpO1xuICAgICAgICAgICAgdHJhY2tIb3Jpem9udGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUVudGVyKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuaGFuZGxlVHJhY2tNb3VzZUxlYXZlKTtcbiAgICAgICAgICAgIHRyYWNrVmVydGljYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5oYW5kbGVWZXJ0aWNhbFRyYWNrTW91c2VEb3duKTtcbiAgICAgICAgICAgIHRodW1iSG9yaXpvbnRhbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZUhvcml6b250YWxUaHVtYk1vdXNlRG93bik7XG4gICAgICAgICAgICB0aHVtYlZlcnRpY2FsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuaGFuZGxlVmVydGljYWxUaHVtYk1vdXNlRG93bik7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVXaW5kb3dSZXNpemUpO1xuICAgICAgICAgICAgLy8gUG9zc2libHkgc2V0dXAgYnkgYGhhbmRsZURyYWdTdGFydGBcbiAgICAgICAgICAgIHRoaXMudGVhcmRvd25EcmFnZ2luZygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVTY3JvbGwnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2Nyb2xsKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIF9wcm9wczMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgICAgIG9uU2Nyb2xsID0gX3Byb3BzMy5vblNjcm9sbCxcbiAgICAgICAgICAgICAgICBvblNjcm9sbEZyYW1lID0gX3Byb3BzMy5vblNjcm9sbEZyYW1lO1xuXG4gICAgICAgICAgICBpZiAob25TY3JvbGwpIG9uU2Nyb2xsKGV2ZW50KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9IHZhbHVlcy5zY3JvbGxMZWZ0LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3AgPSB2YWx1ZXMuc2Nyb2xsVG9wO1xuXG4gICAgICAgICAgICAgICAgX3RoaXMyLnZpZXdTY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcbiAgICAgICAgICAgICAgICBfdGhpczIudmlld1Njcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICBpZiAob25TY3JvbGxGcmFtZSkgb25TY3JvbGxGcmFtZSh2YWx1ZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRldGVjdFNjcm9sbGluZygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVTY3JvbGxTdGFydCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTY3JvbGxTdGFydCgpIHtcbiAgICAgICAgICAgIHZhciBvblNjcm9sbFN0YXJ0ID0gdGhpcy5wcm9wcy5vblNjcm9sbFN0YXJ0O1xuXG4gICAgICAgICAgICBpZiAob25TY3JvbGxTdGFydCkgb25TY3JvbGxTdGFydCgpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTY3JvbGxTdGFydEF1dG9IaWRlKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVNjcm9sbFN0YXJ0QXV0b0hpZGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2Nyb2xsU3RhcnRBdXRvSGlkZSgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvSGlkZSA9IHRoaXMucHJvcHMuYXV0b0hpZGU7XG5cbiAgICAgICAgICAgIGlmICghYXV0b0hpZGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc2hvd1RyYWNrcygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVTY3JvbGxTdG9wJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbFN0b3AoKSB7XG4gICAgICAgICAgICB2YXIgb25TY3JvbGxTdG9wID0gdGhpcy5wcm9wcy5vblNjcm9sbFN0b3A7XG5cbiAgICAgICAgICAgIGlmIChvblNjcm9sbFN0b3ApIG9uU2Nyb2xsU3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTY3JvbGxTdG9wQXV0b0hpZGUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlU2Nyb2xsU3RvcEF1dG9IaWRlJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNjcm9sbFN0b3BBdXRvSGlkZSgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvSGlkZSA9IHRoaXMucHJvcHMuYXV0b0hpZGU7XG5cbiAgICAgICAgICAgIGlmICghYXV0b0hpZGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaGlkZVRyYWNrcygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVXaW5kb3dSZXNpemUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlV2luZG93UmVzaXplKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlSG9yaXpvbnRhbFRyYWNrTW91c2VEb3duJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUhvcml6b250YWxUcmFja01vdXNlRG93bihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQsXG4gICAgICAgICAgICAgICAgY2xpZW50WCA9IGV2ZW50LmNsaWVudFg7XG5cbiAgICAgICAgICAgIHZhciBfdGFyZ2V0JGdldEJvdW5kaW5nQ2wgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgICAgdGFyZ2V0TGVmdCA9IF90YXJnZXQkZ2V0Qm91bmRpbmdDbC5sZWZ0O1xuXG4gICAgICAgICAgICB2YXIgdGh1bWJXaWR0aCA9IHRoaXMuZ2V0VGh1bWJIb3Jpem9udGFsV2lkdGgoKTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBNYXRoLmFicyh0YXJnZXRMZWZ0IC0gY2xpZW50WCkgLSB0aHVtYldpZHRoIC8gMjtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxMZWZ0ID0gdGhpcy5nZXRTY3JvbGxMZWZ0Rm9yT2Zmc2V0KG9mZnNldCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVZlcnRpY2FsVHJhY2tNb3VzZURvd24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlVmVydGljYWxUcmFja01vdXNlRG93bihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQsXG4gICAgICAgICAgICAgICAgY2xpZW50WSA9IGV2ZW50LmNsaWVudFk7XG5cbiAgICAgICAgICAgIHZhciBfdGFyZ2V0JGdldEJvdW5kaW5nQ2wyID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICAgIHRhcmdldFRvcCA9IF90YXJnZXQkZ2V0Qm91bmRpbmdDbDIudG9wO1xuXG4gICAgICAgICAgICB2YXIgdGh1bWJIZWlnaHQgPSB0aGlzLmdldFRodW1iVmVydGljYWxIZWlnaHQoKTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBNYXRoLmFicyh0YXJnZXRUb3AgLSBjbGllbnRZKSAtIHRodW1iSGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxUb3AgPSB0aGlzLmdldFNjcm9sbFRvcEZvck9mZnNldChvZmZzZXQpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVIb3Jpem9udGFsVGh1bWJNb3VzZURvd24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlSG9yaXpvbnRhbFRodW1iTW91c2VEb3duKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVEcmFnU3RhcnQoZXZlbnQpO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICBjbGllbnRYID0gZXZlbnQuY2xpZW50WDtcbiAgICAgICAgICAgIHZhciBvZmZzZXRXaWR0aCA9IHRhcmdldC5vZmZzZXRXaWR0aDtcblxuICAgICAgICAgICAgdmFyIF90YXJnZXQkZ2V0Qm91bmRpbmdDbDMgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgICAgbGVmdCA9IF90YXJnZXQkZ2V0Qm91bmRpbmdDbDMubGVmdDtcblxuICAgICAgICAgICAgdGhpcy5wcmV2UGFnZVggPSBvZmZzZXRXaWR0aCAtIChjbGllbnRYIC0gbGVmdCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZVZlcnRpY2FsVGh1bWJNb3VzZURvd24nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlVmVydGljYWxUaHVtYk1vdXNlRG93bihldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRHJhZ1N0YXJ0KGV2ZW50KTtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQsXG4gICAgICAgICAgICAgICAgY2xpZW50WSA9IGV2ZW50LmNsaWVudFk7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0SGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodDtcblxuICAgICAgICAgICAgdmFyIF90YXJnZXQkZ2V0Qm91bmRpbmdDbDQgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgICAgdG9wID0gX3RhcmdldCRnZXRCb3VuZGluZ0NsNC50b3A7XG5cbiAgICAgICAgICAgIHRoaXMucHJldlBhZ2VZID0gb2Zmc2V0SGVpZ2h0IC0gKGNsaWVudFkgLSB0b3ApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXR1cERyYWdnaW5nJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldHVwRHJhZ2dpbmcoKSB7XG4gICAgICAgICAgICAoMCwgX2RvbUNzczJbXCJkZWZhdWx0XCJdKShkb2N1bWVudC5ib2R5LCBfc3R5bGVzLmRpc2FibGVTZWxlY3RTdHlsZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLmhhbmRsZURyYWcpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuaGFuZGxlRHJhZ0VuZCk7XG4gICAgICAgICAgICBkb2N1bWVudC5vbnNlbGVjdHN0YXJ0ID0gX3JldHVybkZhbHNlMltcImRlZmF1bHRcIl07XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3RlYXJkb3duRHJhZ2dpbmcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdGVhcmRvd25EcmFnZ2luZygpIHtcbiAgICAgICAgICAgICgwLCBfZG9tQ3NzMltcImRlZmF1bHRcIl0pKGRvY3VtZW50LmJvZHksIF9zdHlsZXMuZGlzYWJsZVNlbGVjdFN0eWxlUmVzZXQpO1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5oYW5kbGVEcmFnKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLmhhbmRsZURyYWdFbmQpO1xuICAgICAgICAgICAgZG9jdW1lbnQub25zZWxlY3RzdGFydCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlRHJhZ1N0YXJ0JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURyYWdTdGFydChldmVudCkge1xuICAgICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IHRydWU7XG4gICAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBEcmFnZ2luZygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVEcmFnJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZURyYWcoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXZQYWdlWCkge1xuICAgICAgICAgICAgICAgIHZhciBjbGllbnRYID0gZXZlbnQuY2xpZW50WDtcblxuICAgICAgICAgICAgICAgIHZhciBfdHJhY2tIb3Jpem9udGFsJGdldEIgPSB0aGlzLnRyYWNrSG9yaXpvbnRhbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tMZWZ0ID0gX3RyYWNrSG9yaXpvbnRhbCRnZXRCLmxlZnQ7XG5cbiAgICAgICAgICAgICAgICB2YXIgdGh1bWJXaWR0aCA9IHRoaXMuZ2V0VGh1bWJIb3Jpem9udGFsV2lkdGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgY2xpY2tQb3NpdGlvbiA9IHRodW1iV2lkdGggLSB0aGlzLnByZXZQYWdlWDtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gLXRyYWNrTGVmdCArIGNsaWVudFggLSBjbGlja1Bvc2l0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxMZWZ0ID0gdGhpcy5nZXRTY3JvbGxMZWZ0Rm9yT2Zmc2V0KG9mZnNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2UGFnZVkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2xpZW50WSA9IGV2ZW50LmNsaWVudFk7XG5cbiAgICAgICAgICAgICAgICB2YXIgX3RyYWNrVmVydGljYWwkZ2V0Qm91ID0gdGhpcy50cmFja1ZlcnRpY2FsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgICAgICAgICB0cmFja1RvcCA9IF90cmFja1ZlcnRpY2FsJGdldEJvdS50b3A7XG5cbiAgICAgICAgICAgICAgICB2YXIgdGh1bWJIZWlnaHQgPSB0aGlzLmdldFRodW1iVmVydGljYWxIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICB2YXIgX2NsaWNrUG9zaXRpb24gPSB0aHVtYkhlaWdodCAtIHRoaXMucHJldlBhZ2VZO1xuICAgICAgICAgICAgICAgIHZhciBfb2Zmc2V0ID0gLXRyYWNrVG9wICsgY2xpZW50WSAtIF9jbGlja1Bvc2l0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5zY3JvbGxUb3AgPSB0aGlzLmdldFNjcm9sbFRvcEZvck9mZnNldChfb2Zmc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlRHJhZ0VuZCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVEcmFnRW5kKCkge1xuICAgICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5wcmV2UGFnZVggPSB0aGlzLnByZXZQYWdlWSA9IDA7XG4gICAgICAgICAgICB0aGlzLnRlYXJkb3duRHJhZ2dpbmcoKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRHJhZ0VuZEF1dG9IaWRlKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hhbmRsZURyYWdFbmRBdXRvSGlkZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVEcmFnRW5kQXV0b0hpZGUoKSB7XG4gICAgICAgICAgICB2YXIgYXV0b0hpZGUgPSB0aGlzLnByb3BzLmF1dG9IaWRlO1xuXG4gICAgICAgICAgICBpZiAoIWF1dG9IaWRlKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmhpZGVUcmFja3MoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGFuZGxlVHJhY2tNb3VzZUVudGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVRyYWNrTW91c2VFbnRlcigpIHtcbiAgICAgICAgICAgIHRoaXMudHJhY2tNb3VzZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVUcmFja01vdXNlRW50ZXJBdXRvSGlkZSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVUcmFja01vdXNlRW50ZXJBdXRvSGlkZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVUcmFja01vdXNlRW50ZXJBdXRvSGlkZSgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvSGlkZSA9IHRoaXMucHJvcHMuYXV0b0hpZGU7XG5cbiAgICAgICAgICAgIGlmICghYXV0b0hpZGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc2hvd1RyYWNrcygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVUcmFja01vdXNlTGVhdmUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlVHJhY2tNb3VzZUxlYXZlKCkge1xuICAgICAgICAgICAgdGhpcy50cmFja01vdXNlT3ZlciA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVUcmFja01vdXNlTGVhdmVBdXRvSGlkZSgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdoYW5kbGVUcmFja01vdXNlTGVhdmVBdXRvSGlkZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVUcmFja01vdXNlTGVhdmVBdXRvSGlkZSgpIHtcbiAgICAgICAgICAgIHZhciBhdXRvSGlkZSA9IHRoaXMucHJvcHMuYXV0b0hpZGU7XG5cbiAgICAgICAgICAgIGlmICghYXV0b0hpZGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaGlkZVRyYWNrcygpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzaG93VHJhY2tzJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dUcmFja3MoKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oaWRlVHJhY2tzVGltZW91dCk7XG4gICAgICAgICAgICAoMCwgX2RvbUNzczJbXCJkZWZhdWx0XCJdKSh0aGlzLnRyYWNrSG9yaXpvbnRhbCwgeyBvcGFjaXR5OiAxIH0pO1xuICAgICAgICAgICAgKDAsIF9kb21Dc3MyW1wiZGVmYXVsdFwiXSkodGhpcy50cmFja1ZlcnRpY2FsLCB7IG9wYWNpdHk6IDEgfSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hpZGVUcmFja3MnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZVRyYWNrcygpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5kcmFnZ2luZykgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsaW5nKSByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy50cmFja01vdXNlT3ZlcikgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGF1dG9IaWRlVGltZW91dCA9IHRoaXMucHJvcHMuYXV0b0hpZGVUaW1lb3V0O1xuXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5oaWRlVHJhY2tzVGltZW91dCk7XG4gICAgICAgICAgICB0aGlzLmhpZGVUcmFja3NUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgKDAsIF9kb21Dc3MyW1wiZGVmYXVsdFwiXSkoX3RoaXMzLnRyYWNrSG9yaXpvbnRhbCwgeyBvcGFjaXR5OiAwIH0pO1xuICAgICAgICAgICAgICAgICgwLCBfZG9tQ3NzMltcImRlZmF1bHRcIl0pKF90aGlzMy50cmFja1ZlcnRpY2FsLCB7IG9wYWNpdHk6IDAgfSk7XG4gICAgICAgICAgICB9LCBhdXRvSGlkZVRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdkZXRlY3RTY3JvbGxpbmcnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGV0ZWN0U2Nyb2xsaW5nKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNjcm9sbGluZykgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTY3JvbGxTdGFydCgpO1xuICAgICAgICAgICAgdGhpcy5kZXRlY3RTY3JvbGxpbmdJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXM0Lmxhc3RWaWV3U2Nyb2xsTGVmdCA9PT0gX3RoaXM0LnZpZXdTY3JvbGxMZWZ0ICYmIF90aGlzNC5sYXN0Vmlld1Njcm9sbFRvcCA9PT0gX3RoaXM0LnZpZXdTY3JvbGxUb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChfdGhpczQuZGV0ZWN0U2Nyb2xsaW5nSW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpczQuc2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNC5oYW5kbGVTY3JvbGxTdG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF90aGlzNC5sYXN0Vmlld1Njcm9sbExlZnQgPSBfdGhpczQudmlld1Njcm9sbExlZnQ7XG4gICAgICAgICAgICAgICAgX3RoaXM0Lmxhc3RWaWV3U2Nyb2xsVG9wID0gX3RoaXM0LnZpZXdTY3JvbGxUb3A7XG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyYWYnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmFmKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKHRoaXMucmVxdWVzdEZyYW1lKSBfcmFmM1tcImRlZmF1bHRcIl0uY2FuY2VsKHRoaXMucmVxdWVzdEZyYW1lKTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdEZyYW1lID0gKDAsIF9yYWYzW1wiZGVmYXVsdFwiXSkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzNS5yZXF1ZXN0RnJhbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICd1cGRhdGUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5yYWYoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuX3VwZGF0ZShjYWxsYmFjayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX3VwZGF0ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgX3Byb3BzNCA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgb25VcGRhdGUgPSBfcHJvcHM0Lm9uVXBkYXRlLFxuICAgICAgICAgICAgICAgIGhpZGVUcmFja3NXaGVuTm90TmVlZGVkID0gX3Byb3BzNC5oaWRlVHJhY2tzV2hlbk5vdE5lZWRlZDtcblxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHRoaXMuZ2V0VmFsdWVzKCk7XG4gICAgICAgICAgICBpZiAoKDAsIF9nZXRTY3JvbGxiYXJXaWR0aDJbXCJkZWZhdWx0XCJdKSgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjcm9sbExlZnQgPSB2YWx1ZXMuc2Nyb2xsTGVmdCxcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50V2lkdGggPSB2YWx1ZXMuY2xpZW50V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFdpZHRoID0gdmFsdWVzLnNjcm9sbFdpZHRoO1xuXG4gICAgICAgICAgICAgICAgdmFyIHRyYWNrSG9yaXpvbnRhbFdpZHRoID0gKDAsIF9nZXRJbm5lcldpZHRoMltcImRlZmF1bHRcIl0pKHRoaXMudHJhY2tIb3Jpem9udGFsKTtcbiAgICAgICAgICAgICAgICB2YXIgdGh1bWJIb3Jpem9udGFsV2lkdGggPSB0aGlzLmdldFRodW1iSG9yaXpvbnRhbFdpZHRoKCk7XG4gICAgICAgICAgICAgICAgdmFyIHRodW1iSG9yaXpvbnRhbFggPSBzY3JvbGxMZWZ0IC8gKHNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGgpICogKHRyYWNrSG9yaXpvbnRhbFdpZHRoIC0gdGh1bWJIb3Jpem9udGFsV2lkdGgpO1xuICAgICAgICAgICAgICAgIHZhciB0aHVtYkhvcml6b250YWxTdHlsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRodW1iSG9yaXpvbnRhbFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKCcgKyB0aHVtYkhvcml6b250YWxYICsgJ3B4KSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSB2YWx1ZXMuc2Nyb2xsVG9wLFxuICAgICAgICAgICAgICAgICAgICBjbGllbnRIZWlnaHQgPSB2YWx1ZXMuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxIZWlnaHQgPSB2YWx1ZXMuc2Nyb2xsSGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgdmFyIHRyYWNrVmVydGljYWxIZWlnaHQgPSAoMCwgX2dldElubmVySGVpZ2h0MltcImRlZmF1bHRcIl0pKHRoaXMudHJhY2tWZXJ0aWNhbCk7XG4gICAgICAgICAgICAgICAgdmFyIHRodW1iVmVydGljYWxIZWlnaHQgPSB0aGlzLmdldFRodW1iVmVydGljYWxIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICB2YXIgdGh1bWJWZXJ0aWNhbFkgPSBzY3JvbGxUb3AgLyAoc2Nyb2xsSGVpZ2h0IC0gY2xpZW50SGVpZ2h0KSAqICh0cmFja1ZlcnRpY2FsSGVpZ2h0IC0gdGh1bWJWZXJ0aWNhbEhlaWdodCk7XG4gICAgICAgICAgICAgICAgdmFyIHRodW1iVmVydGljYWxTdHlsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0aHVtYlZlcnRpY2FsSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKCcgKyB0aHVtYlZlcnRpY2FsWSArICdweCknXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoaGlkZVRyYWNrc1doZW5Ob3ROZWVkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYWNrSG9yaXpvbnRhbFN0eWxlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogc2Nyb2xsV2lkdGggPiBjbGllbnRXaWR0aCA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFja1ZlcnRpY2FsU3R5bGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBzY3JvbGxIZWlnaHQgPiBjbGllbnRIZWlnaHQgPyAndmlzaWJsZScgOiAnaGlkZGVuJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAoMCwgX2RvbUNzczJbXCJkZWZhdWx0XCJdKSh0aGlzLnRyYWNrSG9yaXpvbnRhbCwgdHJhY2tIb3Jpem9udGFsU3R5bGUpO1xuICAgICAgICAgICAgICAgICAgICAoMCwgX2RvbUNzczJbXCJkZWZhdWx0XCJdKSh0aGlzLnRyYWNrVmVydGljYWwsIHRyYWNrVmVydGljYWxTdHlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICgwLCBfZG9tQ3NzMltcImRlZmF1bHRcIl0pKHRoaXMudGh1bWJIb3Jpem9udGFsLCB0aHVtYkhvcml6b250YWxTdHlsZSk7XG4gICAgICAgICAgICAgICAgKDAsIF9kb21Dc3MyW1wiZGVmYXVsdFwiXSkodGhpcy50aHVtYlZlcnRpY2FsLCB0aHVtYlZlcnRpY2FsU3R5bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9uVXBkYXRlKSBvblVwZGF0ZSh2YWx1ZXMpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuO1xuICAgICAgICAgICAgY2FsbGJhY2sodmFsdWVzKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmVuZGVyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgc2Nyb2xsYmFyV2lkdGggPSAoMCwgX2dldFNjcm9sbGJhcldpZHRoMltcImRlZmF1bHRcIl0pKCk7XG4gICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuXG4gICAgICAgICAgICB2YXIgX3Byb3BzNSA9IHRoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgb25TY3JvbGwgPSBfcHJvcHM1Lm9uU2Nyb2xsLFxuICAgICAgICAgICAgICAgIG9uU2Nyb2xsRnJhbWUgPSBfcHJvcHM1Lm9uU2Nyb2xsRnJhbWUsXG4gICAgICAgICAgICAgICAgb25TY3JvbGxTdGFydCA9IF9wcm9wczUub25TY3JvbGxTdGFydCxcbiAgICAgICAgICAgICAgICBvblNjcm9sbFN0b3AgPSBfcHJvcHM1Lm9uU2Nyb2xsU3RvcCxcbiAgICAgICAgICAgICAgICBvblVwZGF0ZSA9IF9wcm9wczUub25VcGRhdGUsXG4gICAgICAgICAgICAgICAgcmVuZGVyVmlldyA9IF9wcm9wczUucmVuZGVyVmlldyxcbiAgICAgICAgICAgICAgICByZW5kZXJUcmFja0hvcml6b250YWwgPSBfcHJvcHM1LnJlbmRlclRyYWNrSG9yaXpvbnRhbCxcbiAgICAgICAgICAgICAgICByZW5kZXJUcmFja1ZlcnRpY2FsID0gX3Byb3BzNS5yZW5kZXJUcmFja1ZlcnRpY2FsLFxuICAgICAgICAgICAgICAgIHJlbmRlclRodW1iSG9yaXpvbnRhbCA9IF9wcm9wczUucmVuZGVyVGh1bWJIb3Jpem9udGFsLFxuICAgICAgICAgICAgICAgIHJlbmRlclRodW1iVmVydGljYWwgPSBfcHJvcHM1LnJlbmRlclRodW1iVmVydGljYWwsXG4gICAgICAgICAgICAgICAgdGFnTmFtZSA9IF9wcm9wczUudGFnTmFtZSxcbiAgICAgICAgICAgICAgICBoaWRlVHJhY2tzV2hlbk5vdE5lZWRlZCA9IF9wcm9wczUuaGlkZVRyYWNrc1doZW5Ob3ROZWVkZWQsXG4gICAgICAgICAgICAgICAgYXV0b0hpZGUgPSBfcHJvcHM1LmF1dG9IaWRlLFxuICAgICAgICAgICAgICAgIGF1dG9IaWRlVGltZW91dCA9IF9wcm9wczUuYXV0b0hpZGVUaW1lb3V0LFxuICAgICAgICAgICAgICAgIGF1dG9IaWRlRHVyYXRpb24gPSBfcHJvcHM1LmF1dG9IaWRlRHVyYXRpb24sXG4gICAgICAgICAgICAgICAgdGh1bWJTaXplID0gX3Byb3BzNS50aHVtYlNpemUsXG4gICAgICAgICAgICAgICAgdGh1bWJNaW5TaXplID0gX3Byb3BzNS50aHVtYk1pblNpemUsXG4gICAgICAgICAgICAgICAgdW5pdmVyc2FsID0gX3Byb3BzNS51bml2ZXJzYWwsXG4gICAgICAgICAgICAgICAgYXV0b0hlaWdodCA9IF9wcm9wczUuYXV0b0hlaWdodCxcbiAgICAgICAgICAgICAgICBhdXRvSGVpZ2h0TWluID0gX3Byb3BzNS5hdXRvSGVpZ2h0TWluLFxuICAgICAgICAgICAgICAgIGF1dG9IZWlnaHRNYXggPSBfcHJvcHM1LmF1dG9IZWlnaHRNYXgsXG4gICAgICAgICAgICAgICAgc3R5bGUgPSBfcHJvcHM1LnN0eWxlLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuID0gX3Byb3BzNS5jaGlsZHJlbixcbiAgICAgICAgICAgICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHM1LCBbJ29uU2Nyb2xsJywgJ29uU2Nyb2xsRnJhbWUnLCAnb25TY3JvbGxTdGFydCcsICdvblNjcm9sbFN0b3AnLCAnb25VcGRhdGUnLCAncmVuZGVyVmlldycsICdyZW5kZXJUcmFja0hvcml6b250YWwnLCAncmVuZGVyVHJhY2tWZXJ0aWNhbCcsICdyZW5kZXJUaHVtYkhvcml6b250YWwnLCAncmVuZGVyVGh1bWJWZXJ0aWNhbCcsICd0YWdOYW1lJywgJ2hpZGVUcmFja3NXaGVuTm90TmVlZGVkJywgJ2F1dG9IaWRlJywgJ2F1dG9IaWRlVGltZW91dCcsICdhdXRvSGlkZUR1cmF0aW9uJywgJ3RodW1iU2l6ZScsICd0aHVtYk1pblNpemUnLCAndW5pdmVyc2FsJywgJ2F1dG9IZWlnaHQnLCAnYXV0b0hlaWdodE1pbicsICdhdXRvSGVpZ2h0TWF4JywgJ3N0eWxlJywgJ2NoaWxkcmVuJ10pO1xuICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyAqL1xuXG4gICAgICAgICAgICB2YXIgZGlkTW91bnRVbml2ZXJzYWwgPSB0aGlzLnN0YXRlLmRpZE1vdW50VW5pdmVyc2FsO1xuXG5cbiAgICAgICAgICAgIHZhciBjb250YWluZXJTdHlsZSA9IF9leHRlbmRzKHt9LCBfc3R5bGVzLmNvbnRhaW5lclN0eWxlRGVmYXVsdCwgYXV0b0hlaWdodCAmJiBfZXh0ZW5kcyh7fSwgX3N0eWxlcy5jb250YWluZXJTdHlsZUF1dG9IZWlnaHQsIHtcbiAgICAgICAgICAgICAgICBtaW5IZWlnaHQ6IGF1dG9IZWlnaHRNaW4sXG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiBhdXRvSGVpZ2h0TWF4XG4gICAgICAgICAgICB9KSwgc3R5bGUpO1xuXG4gICAgICAgICAgICB2YXIgdmlld1N0eWxlID0gX2V4dGVuZHMoe30sIF9zdHlsZXMudmlld1N0eWxlRGVmYXVsdCwge1xuICAgICAgICAgICAgICAgIC8vIEhpZGUgc2Nyb2xsYmFycyBieSBzZXR0aW5nIGEgbmVnYXRpdmUgbWFyZ2luXG4gICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IHNjcm9sbGJhcldpZHRoID8gLXNjcm9sbGJhcldpZHRoIDogMCxcbiAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206IHNjcm9sbGJhcldpZHRoID8gLXNjcm9sbGJhcldpZHRoIDogMFxuICAgICAgICAgICAgfSwgYXV0b0hlaWdodCAmJiBfZXh0ZW5kcyh7fSwgX3N0eWxlcy52aWV3U3R5bGVBdXRvSGVpZ2h0LCB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHNjcm9sbGJhcldpZHRoIHRvIGF1dG9IZWlnaHQgaW4gb3JkZXIgdG8gY29tcGVuc2F0ZSBuZWdhdGl2ZSBtYXJnaW5zXG4gICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAoMCwgX2lzU3RyaW5nMltcImRlZmF1bHRcIl0pKGF1dG9IZWlnaHRNaW4pID8gJ2NhbGMoJyArIGF1dG9IZWlnaHRNaW4gKyAnICsgJyArIHNjcm9sbGJhcldpZHRoICsgJ3B4KScgOiBhdXRvSGVpZ2h0TWluICsgc2Nyb2xsYmFyV2lkdGgsXG4gICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiAoMCwgX2lzU3RyaW5nMltcImRlZmF1bHRcIl0pKGF1dG9IZWlnaHRNYXgpID8gJ2NhbGMoJyArIGF1dG9IZWlnaHRNYXggKyAnICsgJyArIHNjcm9sbGJhcldpZHRoICsgJ3B4KScgOiBhdXRvSGVpZ2h0TWF4ICsgc2Nyb2xsYmFyV2lkdGhcbiAgICAgICAgICAgIH0pLCBhdXRvSGVpZ2h0ICYmIHVuaXZlcnNhbCAmJiAhZGlkTW91bnRVbml2ZXJzYWwgJiYge1xuICAgICAgICAgICAgICAgIG1pbkhlaWdodDogYXV0b0hlaWdodE1pbixcbiAgICAgICAgICAgICAgICBtYXhIZWlnaHQ6IGF1dG9IZWlnaHRNYXhcbiAgICAgICAgICAgIH0sIHVuaXZlcnNhbCAmJiAhZGlkTW91bnRVbml2ZXJzYWwgJiYgX3N0eWxlcy52aWV3U3R5bGVVbml2ZXJzYWxJbml0aWFsKTtcblxuICAgICAgICAgICAgdmFyIHRyYWNrQXV0b0hlaWdodFN0eWxlID0ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246ICdvcGFjaXR5ICcgKyBhdXRvSGlkZUR1cmF0aW9uICsgJ21zJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdHJhY2tIb3Jpem9udGFsU3R5bGUgPSBfZXh0ZW5kcyh7fSwgX3N0eWxlcy50cmFja0hvcml6b250YWxTdHlsZURlZmF1bHQsIGF1dG9IaWRlICYmIHRyYWNrQXV0b0hlaWdodFN0eWxlLCAoIXNjcm9sbGJhcldpZHRoIHx8IHVuaXZlcnNhbCAmJiAhZGlkTW91bnRVbml2ZXJzYWwpICYmIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgdHJhY2tWZXJ0aWNhbFN0eWxlID0gX2V4dGVuZHMoe30sIF9zdHlsZXMudHJhY2tWZXJ0aWNhbFN0eWxlRGVmYXVsdCwgYXV0b0hpZGUgJiYgdHJhY2tBdXRvSGVpZ2h0U3R5bGUsICghc2Nyb2xsYmFyV2lkdGggfHwgdW5pdmVyc2FsICYmICFkaWRNb3VudFVuaXZlcnNhbCkgJiYge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiAoMCwgX3JlYWN0LmNyZWF0ZUVsZW1lbnQpKHRhZ05hbWUsIF9leHRlbmRzKHt9LCBwcm9wcywgeyBzdHlsZTogY29udGFpbmVyU3R5bGUsIHJlZjogZnVuY3Rpb24gcmVmKF9yZWYyKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNy5jb250YWluZXIgPSBfcmVmMjtcbiAgICAgICAgICAgICAgICB9IH0pLCBbKDAsIF9yZWFjdC5jbG9uZUVsZW1lbnQpKHJlbmRlclZpZXcoeyBzdHlsZTogdmlld1N0eWxlIH0pLCB7IGtleTogJ3ZpZXcnLCByZWY6IGZ1bmN0aW9uIHJlZihfcmVmMykge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczcudmlldyA9IF9yZWYzO1xuICAgICAgICAgICAgICAgIH0gfSwgY2hpbGRyZW4pLCAoMCwgX3JlYWN0LmNsb25lRWxlbWVudCkocmVuZGVyVHJhY2tIb3Jpem9udGFsKHsgc3R5bGU6IHRyYWNrSG9yaXpvbnRhbFN0eWxlIH0pLCB7IGtleTogJ3RyYWNrSG9yaXpvbnRhbCcsIHJlZjogZnVuY3Rpb24gcmVmKF9yZWY0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNy50cmFja0hvcml6b250YWwgPSBfcmVmNDtcbiAgICAgICAgICAgICAgICB9IH0sICgwLCBfcmVhY3QuY2xvbmVFbGVtZW50KShyZW5kZXJUaHVtYkhvcml6b250YWwoeyBzdHlsZTogX3N0eWxlcy50aHVtYkhvcml6b250YWxTdHlsZURlZmF1bHQgfSksIHsgcmVmOiBmdW5jdGlvbiByZWYoX3JlZjUpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LnRodW1iSG9yaXpvbnRhbCA9IF9yZWY1O1xuICAgICAgICAgICAgICAgIH0gfSkpLCAoMCwgX3JlYWN0LmNsb25lRWxlbWVudCkocmVuZGVyVHJhY2tWZXJ0aWNhbCh7IHN0eWxlOiB0cmFja1ZlcnRpY2FsU3R5bGUgfSksIHsga2V5OiAndHJhY2tWZXJ0aWNhbCcsIHJlZjogZnVuY3Rpb24gcmVmKF9yZWY2KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzNy50cmFja1ZlcnRpY2FsID0gX3JlZjY7XG4gICAgICAgICAgICAgICAgfSB9LCAoMCwgX3JlYWN0LmNsb25lRWxlbWVudCkocmVuZGVyVGh1bWJWZXJ0aWNhbCh7IHN0eWxlOiBfc3R5bGVzLnRodW1iVmVydGljYWxTdHlsZURlZmF1bHQgfSksIHsgcmVmOiBmdW5jdGlvbiByZWYoX3JlZjcpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LnRodW1iVmVydGljYWwgPSBfcmVmNztcbiAgICAgICAgICAgICAgICB9IH0pKV0pO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFNjcm9sbGJhcnM7XG59KF9yZWFjdC5Db21wb25lbnQpO1xuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IFNjcm9sbGJhcnM7XG5cblxuU2Nyb2xsYmFycy5wcm9wVHlwZXMgPSB7XG4gICAgb25TY3JvbGw6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5mdW5jLFxuICAgIG9uU2Nyb2xsRnJhbWU6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5mdW5jLFxuICAgIG9uU2Nyb2xsU3RhcnQ6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5mdW5jLFxuICAgIG9uU2Nyb2xsU3RvcDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmZ1bmMsXG4gICAgb25VcGRhdGU6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5mdW5jLFxuICAgIHJlbmRlclZpZXc6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5mdW5jLFxuICAgIHJlbmRlclRyYWNrSG9yaXpvbnRhbDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmZ1bmMsXG4gICAgcmVuZGVyVHJhY2tWZXJ0aWNhbDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmZ1bmMsXG4gICAgcmVuZGVyVGh1bWJIb3Jpem9udGFsOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uZnVuYyxcbiAgICByZW5kZXJUaHVtYlZlcnRpY2FsOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uZnVuYyxcbiAgICB0YWdOYW1lOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uc3RyaW5nLFxuICAgIHRodW1iU2l6ZTogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLm51bWJlcixcbiAgICB0aHVtYk1pblNpemU6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5udW1iZXIsXG4gICAgaGlkZVRyYWNrc1doZW5Ob3ROZWVkZWQ6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5ib29sLFxuICAgIGF1dG9IaWRlOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uYm9vbCxcbiAgICBhdXRvSGlkZVRpbWVvdXQ6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5udW1iZXIsXG4gICAgYXV0b0hpZGVEdXJhdGlvbjogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLm51bWJlcixcbiAgICBhdXRvSGVpZ2h0OiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uYm9vbCxcbiAgICBhdXRvSGVpZ2h0TWluOiBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0ub25lT2ZUeXBlKFtfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0ubnVtYmVyLCBfcHJvcFR5cGVzMltcImRlZmF1bHRcIl0uc3RyaW5nXSksXG4gICAgYXV0b0hlaWdodE1heDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLm9uZU9mVHlwZShbX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLm51bWJlciwgX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLnN0cmluZ10pLFxuICAgIHVuaXZlcnNhbDogX3Byb3BUeXBlczJbXCJkZWZhdWx0XCJdLmJvb2wsXG4gICAgc3R5bGU6IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5vYmplY3QsXG4gICAgY2hpbGRyZW46IF9wcm9wVHlwZXMyW1wiZGVmYXVsdFwiXS5ub2RlXG59O1xuXG5TY3JvbGxiYXJzLmRlZmF1bHRQcm9wcyA9IHtcbiAgICByZW5kZXJWaWV3OiBfZGVmYXVsdFJlbmRlckVsZW1lbnRzLnJlbmRlclZpZXdEZWZhdWx0LFxuICAgIHJlbmRlclRyYWNrSG9yaXpvbnRhbDogX2RlZmF1bHRSZW5kZXJFbGVtZW50cy5yZW5kZXJUcmFja0hvcml6b250YWxEZWZhdWx0LFxuICAgIHJlbmRlclRyYWNrVmVydGljYWw6IF9kZWZhdWx0UmVuZGVyRWxlbWVudHMucmVuZGVyVHJhY2tWZXJ0aWNhbERlZmF1bHQsXG4gICAgcmVuZGVyVGh1bWJIb3Jpem9udGFsOiBfZGVmYXVsdFJlbmRlckVsZW1lbnRzLnJlbmRlclRodW1iSG9yaXpvbnRhbERlZmF1bHQsXG4gICAgcmVuZGVyVGh1bWJWZXJ0aWNhbDogX2RlZmF1bHRSZW5kZXJFbGVtZW50cy5yZW5kZXJUaHVtYlZlcnRpY2FsRGVmYXVsdCxcbiAgICB0YWdOYW1lOiAnZGl2JyxcbiAgICB0aHVtYk1pblNpemU6IDMwLFxuICAgIGhpZGVUcmFja3NXaGVuTm90TmVlZGVkOiBmYWxzZSxcbiAgICBhdXRvSGlkZTogZmFsc2UsXG4gICAgYXV0b0hpZGVUaW1lb3V0OiAxMDAwLFxuICAgIGF1dG9IaWRlRHVyYXRpb246IDIwMCxcbiAgICBhdXRvSGVpZ2h0OiBmYWxzZSxcbiAgICBhdXRvSGVpZ2h0TWluOiAwLFxuICAgIGF1dG9IZWlnaHRNYXg6IDIwMCxcbiAgICB1bml2ZXJzYWw6IGZhbHNlXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvcmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMvbGliL1Njcm9sbGJhcnMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDI0OTVcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2495\n");

/***/ }),

/***/ 2496:
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\nvar now = __webpack_require__(2497)\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function() {\n  root.requestAnimationFrame = raf\n  root.cancelAnimationFrame = caf\n}\n\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5Ni5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yYWYvaW5kZXguanM/YTk1NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxudmFyIG5vdyA9IHJlcXVpcmUoJ3BlcmZvcm1hbmNlLW5vdycpXG4gICwgcm9vdCA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogd2luZG93XG4gICwgdmVuZG9ycyA9IFsnbW96JywgJ3dlYmtpdCddXG4gICwgc3VmZml4ID0gJ0FuaW1hdGlvbkZyYW1lJ1xuICAsIHJhZiA9IHJvb3RbJ3JlcXVlc3QnICsgc3VmZml4XVxuICAsIGNhZiA9IHJvb3RbJ2NhbmNlbCcgKyBzdWZmaXhdIHx8IHJvb3RbJ2NhbmNlbFJlcXVlc3QnICsgc3VmZml4XVxuXG5mb3IodmFyIGkgPSAwOyAhcmFmICYmIGkgPCB2ZW5kb3JzLmxlbmd0aDsgaSsrKSB7XG4gIHJhZiA9IHJvb3RbdmVuZG9yc1tpXSArICdSZXF1ZXN0JyArIHN1ZmZpeF1cbiAgY2FmID0gcm9vdFt2ZW5kb3JzW2ldICsgJ0NhbmNlbCcgKyBzdWZmaXhdXG4gICAgICB8fCByb290W3ZlbmRvcnNbaV0gKyAnQ2FuY2VsUmVxdWVzdCcgKyBzdWZmaXhdXG59XG5cbi8vIFNvbWUgdmVyc2lvbnMgb2YgRkYgaGF2ZSByQUYgYnV0IG5vdCBjQUZcbmlmKCFyYWYgfHwgIWNhZikge1xuICB2YXIgbGFzdCA9IDBcbiAgICAsIGlkID0gMFxuICAgICwgcXVldWUgPSBbXVxuICAgICwgZnJhbWVEdXJhdGlvbiA9IDEwMDAgLyA2MFxuXG4gIHJhZiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgaWYocXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICB2YXIgX25vdyA9IG5vdygpXG4gICAgICAgICwgbmV4dCA9IE1hdGgubWF4KDAsIGZyYW1lRHVyYXRpb24gLSAoX25vdyAtIGxhc3QpKVxuICAgICAgbGFzdCA9IG5leHQgKyBfbm93XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3AgPSBxdWV1ZS5zbGljZSgwKVxuICAgICAgICAvLyBDbGVhciBxdWV1ZSBoZXJlIHRvIHByZXZlbnRcbiAgICAgICAgLy8gY2FsbGJhY2tzIGZyb20gYXBwZW5kaW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyB0byB0aGUgY3VycmVudCBmcmFtZSdzIHF1ZXVlXG4gICAgICAgIHF1ZXVlLmxlbmd0aCA9IDBcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGNwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYoIWNwW2ldLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICBjcFtpXS5jYWxsYmFjayhsYXN0KVxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHRocm93IGUgfSwgMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIE1hdGgucm91bmQobmV4dCkpXG4gICAgfVxuICAgIHF1ZXVlLnB1c2goe1xuICAgICAgaGFuZGxlOiArK2lkLFxuICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgY2FuY2VsbGVkOiBmYWxzZVxuICAgIH0pXG4gICAgcmV0dXJuIGlkXG4gIH1cblxuICBjYWYgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmKHF1ZXVlW2ldLmhhbmRsZSA9PT0gaGFuZGxlKSB7XG4gICAgICAgIHF1ZXVlW2ldLmNhbmNlbGxlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmbikge1xuICAvLyBXcmFwIGluIGEgbmV3IGZ1bmN0aW9uIHRvIHByZXZlbnRcbiAgLy8gYGNhbmNlbGAgcG90ZW50aWFsbHkgYmVpbmcgYXNzaWduZWRcbiAgLy8gdG8gdGhlIG5hdGl2ZSByQUYgZnVuY3Rpb25cbiAgcmV0dXJuIHJhZi5jYWxsKHJvb3QsIGZuKVxufVxubW9kdWxlLmV4cG9ydHMuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gIGNhZi5hcHBseShyb290LCBhcmd1bWVudHMpXG59XG5tb2R1bGUuZXhwb3J0cy5wb2x5ZmlsbCA9IGZ1bmN0aW9uKCkge1xuICByb290LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHJhZlxuICByb290LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gY2FmXG59XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3JhZi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjQ5NlxuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2496\n");

/***/ }),

/***/ 2497:
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process) {/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n// Generated by CoffeeScript 1.7.1\n(function() {\n  var getNanoSeconds, hrtime, loadTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - loadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    loadTime = getNanoSeconds();\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5Ny5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wZXJmb3JtYW5jZS1ub3cvbGliL3BlcmZvcm1hbmNlLW5vdy5qcz8xNGQ0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKiogSU1QT1JUUyBGUk9NIGltcG9ydHMtbG9hZGVyICoqKi9cbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xuXG4vLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBnZXROYW5vU2Vjb25kcywgaHJ0aW1lLCBsb2FkVGltZTtcblxuICBpZiAoKHR5cGVvZiBwZXJmb3JtYW5jZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwZXJmb3JtYW5jZSAhPT0gbnVsbCkgJiYgcGVyZm9ybWFuY2Uubm93KSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKCh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzICE9PSBudWxsKSAmJiBwcm9jZXNzLmhydGltZSkge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gKGdldE5hbm9TZWNvbmRzKCkgLSBsb2FkVGltZSkgLyAxZTY7XG4gICAgfTtcbiAgICBocnRpbWUgPSBwcm9jZXNzLmhydGltZTtcbiAgICBnZXROYW5vU2Vjb25kcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGhyO1xuICAgICAgaHIgPSBocnRpbWUoKTtcbiAgICAgIHJldHVybiBoclswXSAqIDFlOSArIGhyWzFdO1xuICAgIH07XG4gICAgbG9hZFRpbWUgPSBnZXROYW5vU2Vjb25kcygpO1xuICB9IGVsc2UgaWYgKERhdGUubm93KSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBEYXRlLm5vdygpIC0gbG9hZFRpbWU7XG4gICAgfTtcbiAgICBsb2FkVGltZSA9IERhdGUubm93KCk7XG4gIH0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxvYWRUaW1lO1xuICAgIH07XG4gICAgbG9hZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgfVxuXG59KS5jYWxsKHRoaXMpO1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9wZXJmb3JtYW5jZS1ub3cvbGliL3BlcmZvcm1hbmNlLW5vdy5qc1xuLy8gbW9kdWxlIGlkID0gMjQ5N1xuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2497\n");

/***/ }),

/***/ 2498:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\nvar div = null\nvar prefixes = [ 'Webkit', 'Moz', 'O', 'ms' ]\n\nmodule.exports = function prefixStyle (prop) {\n  // re-use a dummy div\n  if (!div) {\n    div = document.createElement('div')\n  }\n\n  var style = div.style\n\n  // prop exists without prefix\n  if (prop in style) {\n    return prop\n  }\n\n  // borderRadius -> BorderRadius\n  var titleCase = prop.charAt(0).toUpperCase() + prop.slice(1)\n\n  // find the vendor-prefixed prop\n  for (var i = prefixes.length; i >= 0; i--) {\n    var name = prefixes[i] + titleCase\n    // e.g. WebkitBorderRadius or webkitBorderRadius\n    if (name in style) {\n      return name\n    }\n  }\n\n  return false\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5OC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcmVmaXgtc3R5bGUvaW5kZXguanM/YmE5OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxudmFyIGRpdiA9IG51bGxcbnZhciBwcmVmaXhlcyA9IFsgJ1dlYmtpdCcsICdNb3onLCAnTycsICdtcycgXVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHByZWZpeFN0eWxlIChwcm9wKSB7XG4gIC8vIHJlLXVzZSBhIGR1bW15IGRpdlxuICBpZiAoIWRpdikge1xuICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gIH1cblxuICB2YXIgc3R5bGUgPSBkaXYuc3R5bGVcblxuICAvLyBwcm9wIGV4aXN0cyB3aXRob3V0IHByZWZpeFxuICBpZiAocHJvcCBpbiBzdHlsZSkge1xuICAgIHJldHVybiBwcm9wXG4gIH1cblxuICAvLyBib3JkZXJSYWRpdXMgLT4gQm9yZGVyUmFkaXVzXG4gIHZhciB0aXRsZUNhc2UgPSBwcm9wLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zbGljZSgxKVxuXG4gIC8vIGZpbmQgdGhlIHZlbmRvci1wcmVmaXhlZCBwcm9wXG4gIGZvciAodmFyIGkgPSBwcmVmaXhlcy5sZW5ndGg7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIG5hbWUgPSBwcmVmaXhlc1tpXSArIHRpdGxlQ2FzZVxuICAgIC8vIGUuZy4gV2Via2l0Qm9yZGVyUmFkaXVzIG9yIHdlYmtpdEJvcmRlclJhZGl1c1xuICAgIGlmIChuYW1lIGluIHN0eWxlKSB7XG4gICAgICByZXR1cm4gbmFtZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZVxufVxuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9wcmVmaXgtc3R5bGUvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDI0OThcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2498\n");

/***/ }),

/***/ 2499:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n\nvar space = __webpack_require__(2500)\n\n/**\n * Export.\n */\n\nmodule.exports = toCamelCase\n\n/**\n * Convert a `string` to camel case.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toCamelCase(string) {\n  return space(string).replace(/\\s(\\w)/g, function (matches, letter) {\n    return letter.toUpperCase()\n  })\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5OS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90by1jYW1lbC1jYXNlL2luZGV4LmpzPzUyYzUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cblxudmFyIHNwYWNlID0gcmVxdWlyZSgndG8tc3BhY2UtY2FzZScpXG5cbi8qKlxuICogRXhwb3J0LlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdG9DYW1lbENhc2VcblxuLyoqXG4gKiBDb252ZXJ0IGEgYHN0cmluZ2AgdG8gY2FtZWwgY2FzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gdG9DYW1lbENhc2Uoc3RyaW5nKSB7XG4gIHJldHVybiBzcGFjZShzdHJpbmcpLnJlcGxhY2UoL1xccyhcXHcpL2csIGZ1bmN0aW9uIChtYXRjaGVzLCBsZXR0ZXIpIHtcbiAgICByZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKClcbiAgfSlcbn1cblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvdG8tY2FtZWwtY2FzZS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjQ5OVxuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2499\n");

/***/ }),

/***/ 2500:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n\nvar clean = __webpack_require__(2501)\n\n/**\n * Export.\n */\n\nmodule.exports = toSpaceCase\n\n/**\n * Convert a `string` to space case.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toSpaceCase(string) {\n  return clean(string).replace(/[\\W_]+(.|$)/g, function (matches, match) {\n    return match ? ' ' + match : ''\n  }).trim()\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90by1zcGFjZS1jYXNlL2luZGV4LmpzPzZmMjgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cblxudmFyIGNsZWFuID0gcmVxdWlyZSgndG8tbm8tY2FzZScpXG5cbi8qKlxuICogRXhwb3J0LlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdG9TcGFjZUNhc2VcblxuLyoqXG4gKiBDb252ZXJ0IGEgYHN0cmluZ2AgdG8gc3BhY2UgY2FzZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gdG9TcGFjZUNhc2Uoc3RyaW5nKSB7XG4gIHJldHVybiBjbGVhbihzdHJpbmcpLnJlcGxhY2UoL1tcXFdfXSsoLnwkKS9nLCBmdW5jdGlvbiAobWF0Y2hlcywgbWF0Y2gpIHtcbiAgICByZXR1cm4gbWF0Y2ggPyAnICcgKyBtYXRjaCA6ICcnXG4gIH0pLnRyaW0oKVxufVxuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy90by1zcGFjZS1jYXNlL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyNTAwXG4vLyBtb2R1bGUgY2h1bmtzID0gNyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2500\n");

/***/ }),

/***/ 2501:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n\n/**\n * Export.\n */\n\nmodule.exports = toNoCase\n\n/**\n * Test whether a string is camel-case.\n */\n\nvar hasSpace = /\\s/\nvar hasSeparator = /(_|-|\\.|:)/\nvar hasCamel = /([a-z][A-Z]|[A-Z][a-z])/\n\n/**\n * Remove any starting case from a `string`, like camel or snake, but keep\n * spaces and punctuation that may be important otherwise.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction toNoCase(string) {\n  if (hasSpace.test(string)) return string.toLowerCase()\n  if (hasSeparator.test(string)) return (unseparate(string) || string).toLowerCase()\n  if (hasCamel.test(string)) return uncamelize(string).toLowerCase()\n  return string.toLowerCase()\n}\n\n/**\n * Separator splitter.\n */\n\nvar separatorSplitter = /[\\W_]+(.|$)/g\n\n/**\n * Un-separate a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction unseparate(string) {\n  return string.replace(separatorSplitter, function (m, next) {\n    return next ? ' ' + next : ''\n  })\n}\n\n/**\n * Camelcase splitter.\n */\n\nvar camelSplitter = /(.)([A-Z]+)/g\n\n/**\n * Un-camelcase a `string`.\n *\n * @param {String} string\n * @return {String}\n */\n\nfunction uncamelize(string) {\n  return string.replace(camelSplitter, function (m, previous, uppers) {\n    return previous + ' ' + uppers.toLowerCase().split('').join(' ')\n  })\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90by1uby1jYXNlL2luZGV4LmpzPzA2YjciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cblxuLyoqXG4gKiBFeHBvcnQuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB0b05vQ2FzZVxuXG4vKipcbiAqIFRlc3Qgd2hldGhlciBhIHN0cmluZyBpcyBjYW1lbC1jYXNlLlxuICovXG5cbnZhciBoYXNTcGFjZSA9IC9cXHMvXG52YXIgaGFzU2VwYXJhdG9yID0gLyhffC18XFwufDopL1xudmFyIGhhc0NhbWVsID0gLyhbYS16XVtBLVpdfFtBLVpdW2Etel0pL1xuXG4vKipcbiAqIFJlbW92ZSBhbnkgc3RhcnRpbmcgY2FzZSBmcm9tIGEgYHN0cmluZ2AsIGxpa2UgY2FtZWwgb3Igc25ha2UsIGJ1dCBrZWVwXG4gKiBzcGFjZXMgYW5kIHB1bmN0dWF0aW9uIHRoYXQgbWF5IGJlIGltcG9ydGFudCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHRvTm9DYXNlKHN0cmluZykge1xuICBpZiAoaGFzU3BhY2UudGVzdChzdHJpbmcpKSByZXR1cm4gc3RyaW5nLnRvTG93ZXJDYXNlKClcbiAgaWYgKGhhc1NlcGFyYXRvci50ZXN0KHN0cmluZykpIHJldHVybiAodW5zZXBhcmF0ZShzdHJpbmcpIHx8IHN0cmluZykudG9Mb3dlckNhc2UoKVxuICBpZiAoaGFzQ2FtZWwudGVzdChzdHJpbmcpKSByZXR1cm4gdW5jYW1lbGl6ZShzdHJpbmcpLnRvTG93ZXJDYXNlKClcbiAgcmV0dXJuIHN0cmluZy50b0xvd2VyQ2FzZSgpXG59XG5cbi8qKlxuICogU2VwYXJhdG9yIHNwbGl0dGVyLlxuICovXG5cbnZhciBzZXBhcmF0b3JTcGxpdHRlciA9IC9bXFxXX10rKC58JCkvZ1xuXG4vKipcbiAqIFVuLXNlcGFyYXRlIGEgYHN0cmluZ2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHVuc2VwYXJhdGUoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZShzZXBhcmF0b3JTcGxpdHRlciwgZnVuY3Rpb24gKG0sIG5leHQpIHtcbiAgICByZXR1cm4gbmV4dCA/ICcgJyArIG5leHQgOiAnJ1xuICB9KVxufVxuXG4vKipcbiAqIENhbWVsY2FzZSBzcGxpdHRlci5cbiAqL1xuXG52YXIgY2FtZWxTcGxpdHRlciA9IC8oLikoW0EtWl0rKS9nXG5cbi8qKlxuICogVW4tY2FtZWxjYXNlIGEgYHN0cmluZ2AuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHVuY2FtZWxpemUoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZShjYW1lbFNwbGl0dGVyLCBmdW5jdGlvbiAobSwgcHJldmlvdXMsIHVwcGVycykge1xuICAgIHJldHVybiBwcmV2aW91cyArICcgJyArIHVwcGVycy50b0xvd2VyQ2FzZSgpLnNwbGl0KCcnKS5qb2luKCcgJylcbiAgfSlcbn1cblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvdG8tbm8tY2FzZS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjUwMVxuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2501\n");

/***/ }),

/***/ 2502:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/* The following list is defined in React's core */\nvar IS_UNITLESS = {\n  animationIterationCount: true,\n  boxFlex: true,\n  boxFlexGroup: true,\n  boxOrdinalGroup: true,\n  columnCount: true,\n  flex: true,\n  flexGrow: true,\n  flexPositive: true,\n  flexShrink: true,\n  flexNegative: true,\n  flexOrder: true,\n  gridRow: true,\n  gridColumn: true,\n  fontWeight: true,\n  lineClamp: true,\n  lineHeight: true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  tabSize: true,\n  widows: true,\n  zIndex: true,\n  zoom: true,\n\n  // SVG-related properties\n  fillOpacity: true,\n  stopOpacity: true,\n  strokeDashoffset: true,\n  strokeOpacity: true,\n  strokeWidth: true\n};\n\nmodule.exports = function(name, value) {\n  if(typeof value === 'number' && !IS_UNITLESS[ name ]) {\n    return value + 'px';\n  } else {\n    return value;\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hZGQtcHgtdG8tc3R5bGUvaW5kZXguanM/OTZiMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuLyogVGhlIGZvbGxvd2luZyBsaXN0IGlzIGRlZmluZWQgaW4gUmVhY3QncyBjb3JlICovXG52YXIgSVNfVU5JVExFU1MgPSB7XG4gIGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiB0cnVlLFxuICBib3hGbGV4OiB0cnVlLFxuICBib3hGbGV4R3JvdXA6IHRydWUsXG4gIGJveE9yZGluYWxHcm91cDogdHJ1ZSxcbiAgY29sdW1uQ291bnQ6IHRydWUsXG4gIGZsZXg6IHRydWUsXG4gIGZsZXhHcm93OiB0cnVlLFxuICBmbGV4UG9zaXRpdmU6IHRydWUsXG4gIGZsZXhTaHJpbms6IHRydWUsXG4gIGZsZXhOZWdhdGl2ZTogdHJ1ZSxcbiAgZmxleE9yZGVyOiB0cnVlLFxuICBncmlkUm93OiB0cnVlLFxuICBncmlkQ29sdW1uOiB0cnVlLFxuICBmb250V2VpZ2h0OiB0cnVlLFxuICBsaW5lQ2xhbXA6IHRydWUsXG4gIGxpbmVIZWlnaHQ6IHRydWUsXG4gIG9wYWNpdHk6IHRydWUsXG4gIG9yZGVyOiB0cnVlLFxuICBvcnBoYW5zOiB0cnVlLFxuICB0YWJTaXplOiB0cnVlLFxuICB3aWRvd3M6IHRydWUsXG4gIHpJbmRleDogdHJ1ZSxcbiAgem9vbTogdHJ1ZSxcblxuICAvLyBTVkctcmVsYXRlZCBwcm9wZXJ0aWVzXG4gIGZpbGxPcGFjaXR5OiB0cnVlLFxuICBzdG9wT3BhY2l0eTogdHJ1ZSxcbiAgc3Ryb2tlRGFzaG9mZnNldDogdHJ1ZSxcbiAgc3Ryb2tlT3BhY2l0eTogdHJ1ZSxcbiAgc3Ryb2tlV2lkdGg6IHRydWVcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgaWYodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhSVNfVU5JVExFU1NbIG5hbWUgXSkge1xuICAgIHJldHVybiB2YWx1ZSArICdweCc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYWRkLXB4LXRvLXN0eWxlL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyNTAyXG4vLyBtb2R1bGUgY2h1bmtzID0gNyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2502\n");

/***/ }),

/***/ 2503:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports[\"default\"] = isString;\nfunction isString(maybe) {\n    return typeof maybe === 'string';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvdXRpbHMvaXNTdHJpbmcuanM/ODM4MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGlzU3RyaW5nO1xuZnVuY3Rpb24gaXNTdHJpbmcobWF5YmUpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1heWJlID09PSAnc3RyaW5nJztcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3JlYWN0LWN1c3RvbS1zY3JvbGxiYXJzL2xpYi91dGlscy9pc1N0cmluZy5qc1xuLy8gbW9kdWxlIGlkID0gMjUwM1xuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2503\n");

/***/ }),

/***/ 2504:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports[\"default\"] = getScrollbarWidth;\n\nvar _domCss = __webpack_require__(2280);\n\nvar _domCss2 = _interopRequireDefault(_domCss);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar scrollbarWidth = false;\n\nfunction getScrollbarWidth() {\n    if (scrollbarWidth !== false) return scrollbarWidth;\n    /* istanbul ignore else */\n    if (typeof document !== 'undefined') {\n        var div = document.createElement('div');\n        (0, _domCss2[\"default\"])(div, {\n            width: 100,\n            height: 100,\n            position: 'absolute',\n            top: -9999,\n            overflow: 'scroll',\n            MsOverflowStyle: 'scrollbar'\n        });\n        document.body.appendChild(div);\n        scrollbarWidth = div.offsetWidth - div.clientWidth;\n        document.body.removeChild(div);\n    } else {\n        scrollbarWidth = 0;\n    }\n    return scrollbarWidth || 0;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvdXRpbHMvZ2V0U2Nyb2xsYmFyV2lkdGguanM/MmJkMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IGdldFNjcm9sbGJhcldpZHRoO1xuXG52YXIgX2RvbUNzcyA9IHJlcXVpcmUoJ2RvbS1jc3MnKTtcblxudmFyIF9kb21Dc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZG9tQ3NzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbnZhciBzY3JvbGxiYXJXaWR0aCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBnZXRTY3JvbGxiYXJXaWR0aCgpIHtcbiAgICBpZiAoc2Nyb2xsYmFyV2lkdGggIT09IGZhbHNlKSByZXR1cm4gc2Nyb2xsYmFyV2lkdGg7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICgwLCBfZG9tQ3NzMltcImRlZmF1bHRcIl0pKGRpdiwge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCxcbiAgICAgICAgICAgIGhlaWdodDogMTAwLFxuICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICB0b3A6IC05OTk5LFxuICAgICAgICAgICAgb3ZlcmZsb3c6ICdzY3JvbGwnLFxuICAgICAgICAgICAgTXNPdmVyZmxvd1N0eWxlOiAnc2Nyb2xsYmFyJ1xuICAgICAgICB9KTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICBzY3JvbGxiYXJXaWR0aCA9IGRpdi5vZmZzZXRXaWR0aCAtIGRpdi5jbGllbnRXaWR0aDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkaXYpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNjcm9sbGJhcldpZHRoID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIHNjcm9sbGJhcldpZHRoIHx8IDA7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvdXRpbHMvZ2V0U2Nyb2xsYmFyV2lkdGguanNcbi8vIG1vZHVsZSBpZCA9IDI1MDRcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2504\n");

/***/ }),

/***/ 2505:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports[\"default\"] = returnFalse;\nfunction returnFalse() {\n    return false;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvdXRpbHMvcmV0dXJuRmFsc2UuanM/NGEzYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gcmV0dXJuRmFsc2U7XG5mdW5jdGlvbiByZXR1cm5GYWxzZSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvdXRpbHMvcmV0dXJuRmFsc2UuanNcbi8vIG1vZHVsZSBpZCA9IDI1MDVcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2505\n");

/***/ }),

/***/ 2506:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports[\"default\"] = getInnerWidth;\nfunction getInnerWidth(el) {\n    var clientWidth = el.clientWidth;\n\n    var _getComputedStyle = getComputedStyle(el),\n        paddingLeft = _getComputedStyle.paddingLeft,\n        paddingRight = _getComputedStyle.paddingRight;\n\n    return clientWidth - parseFloat(paddingLeft) - parseFloat(paddingRight);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvdXRpbHMvZ2V0SW5uZXJXaWR0aC5qcz82NDZhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiogSU1QT1JUUyBGUk9NIGltcG9ydHMtbG9hZGVyICoqKi9cbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xuXG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBnZXRJbm5lcldpZHRoO1xuZnVuY3Rpb24gZ2V0SW5uZXJXaWR0aChlbCkge1xuICAgIHZhciBjbGllbnRXaWR0aCA9IGVsLmNsaWVudFdpZHRoO1xuXG4gICAgdmFyIF9nZXRDb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCksXG4gICAgICAgIHBhZGRpbmdMZWZ0ID0gX2dldENvbXB1dGVkU3R5bGUucGFkZGluZ0xlZnQsXG4gICAgICAgIHBhZGRpbmdSaWdodCA9IF9nZXRDb21wdXRlZFN0eWxlLnBhZGRpbmdSaWdodDtcblxuICAgIHJldHVybiBjbGllbnRXaWR0aCAtIHBhcnNlRmxvYXQocGFkZGluZ0xlZnQpIC0gcGFyc2VGbG9hdChwYWRkaW5nUmlnaHQpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvcmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMvbGliL3V0aWxzL2dldElubmVyV2lkdGguanNcbi8vIG1vZHVsZSBpZCA9IDI1MDZcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2506\n");

/***/ }),

/***/ 2507:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports[\"default\"] = getInnerHeight;\nfunction getInnerHeight(el) {\n    var clientHeight = el.clientHeight;\n\n    var _getComputedStyle = getComputedStyle(el),\n        paddingTop = _getComputedStyle.paddingTop,\n        paddingBottom = _getComputedStyle.paddingBottom;\n\n    return clientHeight - parseFloat(paddingTop) - parseFloat(paddingBottom);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvdXRpbHMvZ2V0SW5uZXJIZWlnaHQuanM/ZDk2NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZ2V0SW5uZXJIZWlnaHQ7XG5mdW5jdGlvbiBnZXRJbm5lckhlaWdodChlbCkge1xuICAgIHZhciBjbGllbnRIZWlnaHQgPSBlbC5jbGllbnRIZWlnaHQ7XG5cbiAgICB2YXIgX2dldENvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsKSxcbiAgICAgICAgcGFkZGluZ1RvcCA9IF9nZXRDb21wdXRlZFN0eWxlLnBhZGRpbmdUb3AsXG4gICAgICAgIHBhZGRpbmdCb3R0b20gPSBfZ2V0Q29tcHV0ZWRTdHlsZS5wYWRkaW5nQm90dG9tO1xuXG4gICAgcmV0dXJuIGNsaWVudEhlaWdodCAtIHBhcnNlRmxvYXQocGFkZGluZ1RvcCkgLSBwYXJzZUZsb2F0KHBhZGRpbmdCb3R0b20pO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvcmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMvbGliL3V0aWxzL2dldElubmVySGVpZ2h0LmpzXG4vLyBtb2R1bGUgaWQgPSAyNTA3XG4vLyBtb2R1bGUgY2h1bmtzID0gNyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2507\n");

/***/ }),

/***/ 2508:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar containerStyleDefault = exports.containerStyleDefault = {\n    position: 'relative',\n    overflow: 'hidden',\n    width: '100%',\n    height: '100%'\n};\n\n// Overrides containerStyleDefault properties\nvar containerStyleAutoHeight = exports.containerStyleAutoHeight = {\n    height: 'auto'\n};\n\nvar viewStyleDefault = exports.viewStyleDefault = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'scroll',\n    WebkitOverflowScrolling: 'touch'\n};\n\n// Overrides viewStyleDefault properties\nvar viewStyleAutoHeight = exports.viewStyleAutoHeight = {\n    position: 'relative',\n    top: undefined,\n    left: undefined,\n    right: undefined,\n    bottom: undefined\n};\n\nvar viewStyleUniversalInitial = exports.viewStyleUniversalInitial = {\n    overflow: 'hidden',\n    marginRight: 0,\n    marginBottom: 0\n};\n\nvar trackHorizontalStyleDefault = exports.trackHorizontalStyleDefault = {\n    position: 'absolute',\n    height: 6\n};\n\nvar trackVerticalStyleDefault = exports.trackVerticalStyleDefault = {\n    position: 'absolute',\n    width: 6\n};\n\nvar thumbHorizontalStyleDefault = exports.thumbHorizontalStyleDefault = {\n    position: 'relative',\n    display: 'block',\n    height: '100%'\n};\n\nvar thumbVerticalStyleDefault = exports.thumbVerticalStyleDefault = {\n    position: 'relative',\n    display: 'block',\n    width: '100%'\n};\n\nvar disableSelectStyle = exports.disableSelectStyle = {\n    userSelect: 'none'\n};\n\nvar disableSelectStyleReset = exports.disableSelectStyleReset = {\n    userSelect: ''\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvU2Nyb2xsYmFycy9zdHlsZXMuanM/OTNmNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgY29udGFpbmVyU3R5bGVEZWZhdWx0ID0gZXhwb3J0cy5jb250YWluZXJTdHlsZURlZmF1bHQgPSB7XG4gICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgIHdpZHRoOiAnMTAwJScsXG4gICAgaGVpZ2h0OiAnMTAwJSdcbn07XG5cbi8vIE92ZXJyaWRlcyBjb250YWluZXJTdHlsZURlZmF1bHQgcHJvcGVydGllc1xudmFyIGNvbnRhaW5lclN0eWxlQXV0b0hlaWdodCA9IGV4cG9ydHMuY29udGFpbmVyU3R5bGVBdXRvSGVpZ2h0ID0ge1xuICAgIGhlaWdodDogJ2F1dG8nXG59O1xuXG52YXIgdmlld1N0eWxlRGVmYXVsdCA9IGV4cG9ydHMudmlld1N0eWxlRGVmYXVsdCA9IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogMCxcbiAgICByaWdodDogMCxcbiAgICBib3R0b206IDAsXG4gICAgb3ZlcmZsb3c6ICdzY3JvbGwnLFxuICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiAndG91Y2gnXG59O1xuXG4vLyBPdmVycmlkZXMgdmlld1N0eWxlRGVmYXVsdCBwcm9wZXJ0aWVzXG52YXIgdmlld1N0eWxlQXV0b0hlaWdodCA9IGV4cG9ydHMudmlld1N0eWxlQXV0b0hlaWdodCA9IHtcbiAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICB0b3A6IHVuZGVmaW5lZCxcbiAgICBsZWZ0OiB1bmRlZmluZWQsXG4gICAgcmlnaHQ6IHVuZGVmaW5lZCxcbiAgICBib3R0b206IHVuZGVmaW5lZFxufTtcblxudmFyIHZpZXdTdHlsZVVuaXZlcnNhbEluaXRpYWwgPSBleHBvcnRzLnZpZXdTdHlsZVVuaXZlcnNhbEluaXRpYWwgPSB7XG4gICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgIG1hcmdpblJpZ2h0OiAwLFxuICAgIG1hcmdpbkJvdHRvbTogMFxufTtcblxudmFyIHRyYWNrSG9yaXpvbnRhbFN0eWxlRGVmYXVsdCA9IGV4cG9ydHMudHJhY2tIb3Jpem9udGFsU3R5bGVEZWZhdWx0ID0ge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIGhlaWdodDogNlxufTtcblxudmFyIHRyYWNrVmVydGljYWxTdHlsZURlZmF1bHQgPSBleHBvcnRzLnRyYWNrVmVydGljYWxTdHlsZURlZmF1bHQgPSB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgd2lkdGg6IDZcbn07XG5cbnZhciB0aHVtYkhvcml6b250YWxTdHlsZURlZmF1bHQgPSBleHBvcnRzLnRodW1iSG9yaXpvbnRhbFN0eWxlRGVmYXVsdCA9IHtcbiAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgIGhlaWdodDogJzEwMCUnXG59O1xuXG52YXIgdGh1bWJWZXJ0aWNhbFN0eWxlRGVmYXVsdCA9IGV4cG9ydHMudGh1bWJWZXJ0aWNhbFN0eWxlRGVmYXVsdCA9IHtcbiAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgIHdpZHRoOiAnMTAwJSdcbn07XG5cbnZhciBkaXNhYmxlU2VsZWN0U3R5bGUgPSBleHBvcnRzLmRpc2FibGVTZWxlY3RTdHlsZSA9IHtcbiAgICB1c2VyU2VsZWN0OiAnbm9uZSdcbn07XG5cbnZhciBkaXNhYmxlU2VsZWN0U3R5bGVSZXNldCA9IGV4cG9ydHMuZGlzYWJsZVNlbGVjdFN0eWxlUmVzZXQgPSB7XG4gICAgdXNlclNlbGVjdDogJydcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvU2Nyb2xsYmFycy9zdHlsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDI1MDhcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2508\n");

/***/ }),

/***/ 2509:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.renderViewDefault = renderViewDefault;\nexports.renderTrackHorizontalDefault = renderTrackHorizontalDefault;\nexports.renderTrackVerticalDefault = renderTrackVerticalDefault;\nexports.renderThumbHorizontalDefault = renderThumbHorizontalDefault;\nexports.renderThumbVerticalDefault = renderThumbVerticalDefault;\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n/* eslint-disable react/prop-types */\n\nfunction renderViewDefault(props) {\n    return _react2[\"default\"].createElement('div', props);\n}\n\nfunction renderTrackHorizontalDefault(_ref) {\n    var style = _ref.style,\n        props = _objectWithoutProperties(_ref, ['style']);\n\n    var finalStyle = _extends({}, style, {\n        right: 2,\n        bottom: 2,\n        left: 2,\n        borderRadius: 3\n    });\n    return _react2[\"default\"].createElement('div', _extends({ style: finalStyle }, props));\n}\n\nfunction renderTrackVerticalDefault(_ref2) {\n    var style = _ref2.style,\n        props = _objectWithoutProperties(_ref2, ['style']);\n\n    var finalStyle = _extends({}, style, {\n        right: 2,\n        bottom: 2,\n        top: 2,\n        borderRadius: 3\n    });\n    return _react2[\"default\"].createElement('div', _extends({ style: finalStyle }, props));\n}\n\nfunction renderThumbHorizontalDefault(_ref3) {\n    var style = _ref3.style,\n        props = _objectWithoutProperties(_ref3, ['style']);\n\n    var finalStyle = _extends({}, style, {\n        cursor: 'pointer',\n        borderRadius: 'inherit',\n        backgroundColor: 'rgba(0,0,0,.2)'\n    });\n    return _react2[\"default\"].createElement('div', _extends({ style: finalStyle }, props));\n}\n\nfunction renderThumbVerticalDefault(_ref4) {\n    var style = _ref4.style,\n        props = _objectWithoutProperties(_ref4, ['style']);\n\n    var finalStyle = _extends({}, style, {\n        cursor: 'pointer',\n        borderRadius: 'inherit',\n        backgroundColor: 'rgba(0,0,0,.2)'\n    });\n    return _react2[\"default\"].createElement('div', _extends({ style: finalStyle }, props));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1jdXN0b20tc2Nyb2xsYmFycy9saWIvU2Nyb2xsYmFycy9kZWZhdWx0UmVuZGVyRWxlbWVudHMuanM/MTc0MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHMucmVuZGVyVmlld0RlZmF1bHQgPSByZW5kZXJWaWV3RGVmYXVsdDtcbmV4cG9ydHMucmVuZGVyVHJhY2tIb3Jpem9udGFsRGVmYXVsdCA9IHJlbmRlclRyYWNrSG9yaXpvbnRhbERlZmF1bHQ7XG5leHBvcnRzLnJlbmRlclRyYWNrVmVydGljYWxEZWZhdWx0ID0gcmVuZGVyVHJhY2tWZXJ0aWNhbERlZmF1bHQ7XG5leHBvcnRzLnJlbmRlclRodW1iSG9yaXpvbnRhbERlZmF1bHQgPSByZW5kZXJUaHVtYkhvcml6b250YWxEZWZhdWx0O1xuZXhwb3J0cy5yZW5kZXJUaHVtYlZlcnRpY2FsRGVmYXVsdCA9IHJlbmRlclRodW1iVmVydGljYWxEZWZhdWx0O1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7IHZhciB0YXJnZXQgPSB7fTsgZm9yICh2YXIgaSBpbiBvYmopIHsgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7IHRhcmdldFtpXSA9IG9ialtpXTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbi8qIGVzbGludC1kaXNhYmxlIHJlYWN0L3Byb3AtdHlwZXMgKi9cblxuZnVuY3Rpb24gcmVuZGVyVmlld0RlZmF1bHQocHJvcHMpIHtcbiAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgnZGl2JywgcHJvcHMpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJUcmFja0hvcml6b250YWxEZWZhdWx0KF9yZWYpIHtcbiAgICB2YXIgc3R5bGUgPSBfcmVmLnN0eWxlLFxuICAgICAgICBwcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbJ3N0eWxlJ10pO1xuXG4gICAgdmFyIGZpbmFsU3R5bGUgPSBfZXh0ZW5kcyh7fSwgc3R5bGUsIHtcbiAgICAgICAgcmlnaHQ6IDIsXG4gICAgICAgIGJvdHRvbTogMixcbiAgICAgICAgbGVmdDogMixcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAzXG4gICAgfSk7XG4gICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIF9leHRlbmRzKHsgc3R5bGU6IGZpbmFsU3R5bGUgfSwgcHJvcHMpKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyVHJhY2tWZXJ0aWNhbERlZmF1bHQoX3JlZjIpIHtcbiAgICB2YXIgc3R5bGUgPSBfcmVmMi5zdHlsZSxcbiAgICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjIsIFsnc3R5bGUnXSk7XG5cbiAgICB2YXIgZmluYWxTdHlsZSA9IF9leHRlbmRzKHt9LCBzdHlsZSwge1xuICAgICAgICByaWdodDogMixcbiAgICAgICAgYm90dG9tOiAyLFxuICAgICAgICB0b3A6IDIsXG4gICAgICAgIGJvcmRlclJhZGl1czogM1xuICAgIH0pO1xuICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCBfZXh0ZW5kcyh7IHN0eWxlOiBmaW5hbFN0eWxlIH0sIHByb3BzKSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclRodW1iSG9yaXpvbnRhbERlZmF1bHQoX3JlZjMpIHtcbiAgICB2YXIgc3R5bGUgPSBfcmVmMy5zdHlsZSxcbiAgICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3JlZjMsIFsnc3R5bGUnXSk7XG5cbiAgICB2YXIgZmluYWxTdHlsZSA9IF9leHRlbmRzKHt9LCBzdHlsZSwge1xuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnaW5oZXJpdCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMCwwLDAsLjIpJ1xuICAgIH0pO1xuICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KCdkaXYnLCBfZXh0ZW5kcyh7IHN0eWxlOiBmaW5hbFN0eWxlIH0sIHByb3BzKSk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlclRodW1iVmVydGljYWxEZWZhdWx0KF9yZWY0KSB7XG4gICAgdmFyIHN0eWxlID0gX3JlZjQuc3R5bGUsXG4gICAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWY0LCBbJ3N0eWxlJ10pO1xuXG4gICAgdmFyIGZpbmFsU3R5bGUgPSBfZXh0ZW5kcyh7fSwgc3R5bGUsIHtcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgIGJvcmRlclJhZGl1czogJ2luaGVyaXQnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDAsMCwwLC4yKSdcbiAgICB9KTtcbiAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgnZGl2JywgX2V4dGVuZHMoeyBzdHlsZTogZmluYWxTdHlsZSB9LCBwcm9wcykpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvcmVhY3QtY3VzdG9tLXNjcm9sbGJhcnMvbGliL1Njcm9sbGJhcnMvZGVmYXVsdFJlbmRlckVsZW1lbnRzLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTA5XG4vLyBtb2R1bGUgY2h1bmtzID0gNyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2509\n");

/***/ }),

/***/ 2510:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(33);\n\nvar _create_comment = __webpack_require__(2511);\n\nvar _create_comment2 = _interopRequireDefault(_create_comment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapStateToProps(state, ownProps) {\n    var err = state.requests.posts.createPost.error || {};\n    return (0, _extends3.default)({}, ownProps, {\n        createPostErrorId: err.server_error_id\n    });\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps)(_create_comment2.default);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2NyZWF0ZV9jb21tZW50L2luZGV4LmpzP2NhMjciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE3IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IHtjb25uZWN0fSBmcm9tICdyZWFjdC1yZWR1eCc7XG5cbmltcG9ydCBDcmVhdGVDb21tZW50IGZyb20gJy4vY3JlYXRlX2NvbW1lbnQuanN4JztcblxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlLCBvd25Qcm9wcykge1xuICAgIGNvbnN0IGVyciA9IHN0YXRlLnJlcXVlc3RzLnBvc3RzLmNyZWF0ZVBvc3QuZXJyb3IgfHwge307XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ub3duUHJvcHMsXG4gICAgICAgIGNyZWF0ZVBvc3RFcnJvcklkOiBlcnIuc2VydmVyX2Vycm9yX2lkXG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMpKENyZWF0ZUNvbW1lbnQpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvY3JlYXRlX2NvbW1lbnQvaW5kZXguanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFOQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUZBO0FBSUE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2510\n");

/***/ }),

/***/ 2511:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(48);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _channel_actions = __webpack_require__(80);\n\nvar ChannelActions = _interopRequireWildcard(_channel_actions);\n\nvar _global_actions = __webpack_require__(57);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _post_actions = __webpack_require__(75);\n\nvar PostActions = _interopRequireWildcard(_post_actions);\n\nvar _app_dispatcher = __webpack_require__(36);\n\nvar _app_dispatcher2 = _interopRequireDefault(_app_dispatcher);\n\nvar _emoji_store = __webpack_require__(138);\n\nvar _emoji_store2 = _interopRequireDefault(_emoji_store);\n\nvar _message_history_store = __webpack_require__(784);\n\nvar _message_history_store2 = _interopRequireDefault(_message_history_store);\n\nvar _post_store = __webpack_require__(320);\n\nvar _post_store2 = _interopRequireDefault(_post_store);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _user_agent = __webpack_require__(90);\n\nvar UserAgent = _interopRequireWildcard(_user_agent);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _create_post = __webpack_require__(2180);\n\nvar _emoji_picker_overlay = __webpack_require__(456);\n\nvar _emoji_picker_overlay2 = _interopRequireDefault(_emoji_picker_overlay);\n\nvar _file_preview = __webpack_require__(817);\n\nvar _file_preview2 = _interopRequireDefault(_file_preview);\n\nvar _file_upload = __webpack_require__(818);\n\nvar _file_upload2 = _interopRequireDefault(_file_upload);\n\nvar _msg_typing = __webpack_require__(819);\n\nvar _msg_typing2 = _interopRequireDefault(_msg_typing);\n\nvar _post_deleted_modal = __webpack_require__(820);\n\nvar _post_deleted_modal2 = _interopRequireDefault(_post_deleted_modal);\n\nvar _textbox = __webpack_require__(462);\n\nvar _textbox2 = _interopRequireDefault(_textbox);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ActionTypes = _constants2.default.ActionTypes; // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar KeyCodes = _constants2.default.KeyCodes;\n\nvar CreateComment = function (_React$Component) {\n    (0, _inherits3.default)(CreateComment, _React$Component);\n\n    function CreateComment(props) {\n        (0, _classCallCheck3.default)(this, CreateComment);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (CreateComment.__proto__ || (0, _getPrototypeOf2.default)(CreateComment)).call(this, props));\n\n        _initialiseProps.call(_this);\n\n        _this.lastTime = 0;\n\n        _post_store2.default.clearCommentDraftUploads();\n        _message_history_store2.default.resetHistoryIndex('comment');\n\n        var draft = _post_store2.default.getCommentDraft(_this.props.rootId);\n        var enableAddButton = _this.handleEnableAddButton(draft.message, draft.fileInfos);\n        _this.state = {\n            message: draft.message,\n            uploadsInProgress: draft.uploadsInProgress,\n            fileInfos: draft.fileInfos,\n            submitting: false,\n            ctrlSend: _preference_store2.default.getBool(_constants2.default.Preferences.CATEGORY_ADVANCED_SETTINGS, 'send_on_ctrl_enter'),\n            showPostDeletedModal: false,\n            enableAddButton: enableAddButton,\n            showEmojiPicker: false\n        };\n\n        _this.lastBlurAt = 0;\n        return _this;\n    }\n\n    (0, _createClass3.default)(CreateComment, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _preference_store2.default.addChangeListener(this.onPreferenceChange);\n\n            this.focusTextbox();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _preference_store2.default.removeChangeListener(this.onPreferenceChange);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps, prevState) {\n            if (prevState.uploadsInProgress < this.state.uploadsInProgress) {\n                (0, _jquery2.default)('.post-right__scroll').scrollTop((0, _jquery2.default)('.post-right__scroll')[0].scrollHeight);\n            }\n\n            if (prevProps.rootId !== this.props.rootId) {\n                this.focusTextbox();\n            }\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(newProps) {\n            if (newProps.rootId !== this.props.rootId) {\n                var draft = _post_store2.default.getCommentDraft(newProps.rootId);\n                var enableAddButton = this.handleEnableAddButton(draft.message, draft.fileInfos);\n                this.setState({\n                    message: draft.message,\n                    uploadsInProgress: draft.uploadsInProgress,\n                    fileInfos: draft.fileInfos,\n                    enableAddButton: enableAddButton\n                });\n            }\n\n            if (newProps.createPostErrorId === 'api.post.create_post.root_id.app_error' && newProps.createPostErrorId !== this.props.createPostErrorId) {\n                this.showPostDeletedModal();\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var serverError = null;\n            if (this.state.serverError) {\n                serverError = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.serverError\n                    )\n                );\n            }\n\n            var postError = null;\n            if (this.state.postError) {\n                var postErrorClass = 'post-error' + (this.state.errorClass ? ' ' + this.state.errorClass : '');\n                postError = _react2.default.createElement(\n                    'label',\n                    { className: postErrorClass },\n                    this.state.postError\n                );\n            }\n\n            var preview = null;\n            if (this.state.fileInfos.length > 0 || this.state.uploadsInProgress.length > 0) {\n                preview = _react2.default.createElement(_file_preview2.default, {\n                    fileInfos: this.state.fileInfos,\n                    onRemove: this.removePreview,\n                    uploadsInProgress: this.state.uploadsInProgress,\n                    ref: 'preview'\n                });\n            }\n\n            var uploadsInProgressText = null;\n            if (this.state.uploadsInProgress.length > 0) {\n                uploadsInProgressText = _react2.default.createElement(\n                    'span',\n                    { className: 'pull-right post-right-comments-upload-in-progress' },\n                    this.state.uploadsInProgress.length === 1 ? _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'create_comment.file',\n                        defaultMessage: 'File uploading'\n                    }) : _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'create_comment.files',\n                        defaultMessage: 'Files uploading'\n                    })\n                );\n            }\n\n            var addButtonClass = 'btn btn-primary comment-btn pull-right';\n            if (!this.state.enableAddButton) {\n                addButtonClass += ' disabled';\n            }\n\n            var fileUpload = _react2.default.createElement(_file_upload2.default, {\n                ref: 'fileUpload',\n                getFileCount: this.getFileCount,\n                getTarget: this.getFileUploadTarget,\n                onFileUploadChange: this.handleFileUploadChange,\n                onUploadStart: this.handleUploadStart,\n                onFileUpload: this.handleFileUploadComplete,\n                onUploadError: this.handleUploadError,\n                postType: 'comment',\n                channelId: this.props.channelId\n            });\n\n            var emojiPicker = null;\n            if (window.mm_config.EnableEmojiPicker === 'true') {\n                emojiPicker = _react2.default.createElement(\n                    'span',\n                    { className: 'emoji-picker__container' },\n                    _react2.default.createElement(_emoji_picker_overlay2.default, {\n                        show: this.state.showEmojiPicker,\n                        container: this.props.getSidebarBody,\n                        target: this.getCreateCommentControls,\n                        onHide: this.hideEmojiPicker,\n                        onEmojiClick: this.handleEmojiClick,\n                        rightOffset: 15,\n                        topOffset: 55\n                    }),\n                    _react2.default.createElement('span', {\n                        className: 'icon icon--emoji emoji-rhs ' + (this.state.showEmojiPicker ? 'active' : ''),\n                        dangerouslySetInnerHTML: { __html: _constants2.default.EMOJI_ICON_SVG },\n                        onClick: this.toggleEmojiPicker\n                    })\n                );\n            }\n\n            return _react2.default.createElement(\n                'form',\n                { onSubmit: this.handleSubmit },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'post-create' },\n                    _react2.default.createElement(\n                        'div',\n                        {\n                            id: this.props.rootId,\n                            className: 'post-create-body comment-create-body'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'post-body__cell' },\n                            _react2.default.createElement(_textbox2.default, {\n                                onChange: this.handleChange,\n                                onKeyPress: this.commentMsgKeyPress,\n                                onKeyDown: this.handleKeyDown,\n                                handlePostError: this.handlePostError,\n                                value: this.state.message,\n                                onBlur: this.handleBlur,\n                                createMessage: Utils.localizeMessage('create_comment.addComment', 'Add a comment...'),\n                                emojiEnabled: window.mm_config.EnableEmojiPicker === 'true',\n                                initialText: '',\n                                channelId: this.props.channelId,\n                                isRHS: true,\n                                popoverMentionKeyClick: true,\n                                id: 'reply_textbox',\n                                ref: 'textbox'\n                            }),\n                            _react2.default.createElement(\n                                'span',\n                                {\n                                    ref: 'createCommentControls',\n                                    className: 'post-body__actions'\n                                },\n                                fileUpload,\n                                emojiPicker\n                            )\n                        )\n                    ),\n                    _react2.default.createElement(_msg_typing2.default, {\n                        channelId: this.props.channelId,\n                        parentId: this.props.rootId\n                    }),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'post-create-footer' },\n                        _react2.default.createElement('input', {\n                            type: 'button',\n                            className: addButtonClass,\n                            value: Utils.localizeMessage('create_comment.comment', 'Add Comment'),\n                            onClick: this.handleSubmit\n                        }),\n                        uploadsInProgressText,\n                        postError,\n                        preview,\n                        serverError\n                    )\n                ),\n                _react2.default.createElement(_post_deleted_modal2.default, {\n                    show: this.state.showPostDeletedModal,\n                    onHide: this.hidePostDeletedModal\n                })\n            );\n        }\n    }]);\n    return CreateComment;\n}(_react2.default.Component);\n\nCreateComment.propTypes = {\n    channelId: _propTypes2.default.string.isRequired,\n    rootId: _propTypes2.default.string.isRequired,\n    latestPostId: _propTypes2.default.string,\n    getSidebarBody: _propTypes2.default.func,\n    createPostErrorId: _propTypes2.default.string\n};\n\nvar _initialiseProps = function _initialiseProps() {\n    var _this2 = this;\n\n    this.toggleEmojiPicker = function () {\n        _this2.setState({ showEmojiPicker: !_this2.state.showEmojiPicker });\n    };\n\n    this.hideEmojiPicker = function () {\n        _this2.setState({ showEmojiPicker: false });\n    };\n\n    this.handleEmojiClick = function (emoji) {\n        var emojiAlias = emoji.name || emoji.aliases[0];\n\n        if (!emojiAlias) {\n            //Oops.. There went something wrong\n            return;\n        }\n\n        if (_this2.state.message === '') {\n            _this2.setState({ message: ':' + emojiAlias + ': ' });\n        } else {\n            // Check whether there is already a blank at the end of the current message\n            var newMessage = void 0;\n            if (/\\s+$/.test(_this2.state.message)) {\n                newMessage = _this2.state.message + ':' + emojiAlias + ': ';\n            } else {\n                newMessage = _this2.state.message + ' :' + emojiAlias + ': ';\n            }\n\n            _this2.setState({ message: newMessage });\n        }\n\n        _this2.setState({ showEmojiPicker: false });\n\n        _this2.focusTextbox();\n    };\n\n    this.onPreferenceChange = function () {\n        _this2.setState({\n            ctrlSend: _preference_store2.default.getBool(_constants2.default.Preferences.CATEGORY_ADVANCED_SETTINGS, 'send_on_ctrl_enter')\n        });\n    };\n\n    this.handlePostError = function (postError) {\n        _this2.setState({ postError: postError });\n    };\n\n    this.handleSubmit = function (e) {\n        e.preventDefault();\n\n        if (_this2.state.uploadsInProgress.length > 0 || _this2.state.submitting) {\n            return;\n        }\n\n        var message = _this2.state.message;\n\n        if (_this2.state.postError) {\n            _this2.setState({ errorClass: 'animation--highlight' });\n            setTimeout(function () {\n                _this2.setState({ errorClass: null });\n            }, _constants2.default.ANIMATION_TIMEOUT);\n            return;\n        }\n\n        _message_history_store2.default.storeMessageInHistory(message);\n        if (message.trim().length === 0 && _this2.state.fileInfos.length === 0) {\n            return;\n        }\n\n        var isReaction = _create_post.REACTION_PATTERN.exec(message);\n        if (isReaction && _emoji_store2.default.has(isReaction[2])) {\n            _this2.handleSubmitReaction(isReaction);\n        } else if (message.indexOf('/') === 0) {\n            _this2.handleSubmitCommand(message);\n        } else {\n            _this2.handleSubmitPost(message);\n        }\n\n        _this2.setState({\n            message: '',\n            submitting: false,\n            postError: null,\n            fileInfos: [],\n            serverError: null,\n            enableAddButton: false\n        });\n\n        var fasterThanHumanWillClick = 150;\n        var forceFocus = Date.now() - _this2.lastBlurAt < fasterThanHumanWillClick;\n        _this2.focusTextbox(forceFocus);\n    };\n\n    this.handleSubmitCommand = function (message) {\n        _post_store2.default.storeCommentDraft(_this2.props.rootId, null);\n        _this2.setState({\n            message: '',\n            postError: null,\n            fileInfos: [],\n            enableAddButton: false\n        });\n\n        var args = {};\n        args.channel_id = _this2.props.channelId;\n        args.team_id = _team_store2.default.getCurrentId();\n        args.root_id = _this2.props.rootId;\n        args.parent_id = _this2.props.rootId;\n        ChannelActions.executeCommand(message, args, function () {\n            _this2.setState({ submitting: false });\n        }, function (err) {\n            if (err.sendMessage) {\n                _this2.handleSubmitPost(message);\n            } else {\n                var state = {};\n                state.serverError = err.message;\n                state.submitting = false;\n                _this2.setState(state);\n            }\n        });\n    };\n\n    this.handleSubmitPost = function (message) {\n        var userId = _user_store2.default.getCurrentId();\n        var time = Utils.getTimestamp();\n\n        var post = {};\n        post.file_ids = [];\n        post.message = message;\n        post.channel_id = _this2.props.channelId;\n        post.root_id = _this2.props.rootId;\n        post.parent_id = _this2.props.rootId;\n        post.pending_post_id = userId + ':' + time;\n        post.user_id = userId;\n        post.create_at = time;\n\n        GlobalActions.emitUserCommentedEvent(post);\n\n        PostActions.createPost(post, _this2.state.fileInfos);\n\n        _this2.setState({\n            message: '',\n            submitting: false,\n            postError: null,\n            fileInfos: [],\n            serverError: null,\n            enableAddButton: false\n        });\n\n        var fasterThanHumanWillClick = 150;\n        var forceFocus = Date.now() - _this2.state.lastBlurAt < fasterThanHumanWillClick;\n        _this2.focusTextbox(forceFocus);\n    };\n\n    this.handleSubmitReaction = function (isReaction) {\n        var action = isReaction[1];\n\n        var emojiName = isReaction[2];\n        var postId = _this2.props.latestPostId;\n\n        if (action === '+') {\n            PostActions.addReaction(_this2.props.channelId, postId, emojiName);\n        } else if (action === '-') {\n            PostActions.removeReaction(_this2.props.channelId, postId, emojiName);\n        }\n\n        _post_store2.default.storeCommentDraft(_this2.props.rootId, null);\n    };\n\n    this.commentMsgKeyPress = function (e) {\n        if (!UserAgent.isMobile() && (_this2.state.ctrlSend && e.ctrlKey || !_this2.state.ctrlSend)) {\n            if (e.which === KeyCodes.ENTER && !e.shiftKey && !e.altKey) {\n                e.preventDefault();\n                _reactDom2.default.findDOMNode(_this2.refs.textbox).blur();\n                _this2.handleSubmit(e);\n            }\n        }\n\n        GlobalActions.emitLocalUserTypingEvent(_this2.props.channelId, _this2.props.rootId);\n    };\n\n    this.handleChange = function (e) {\n        var message = e.target.value;\n\n        var draft = _post_store2.default.getCommentDraft(_this2.props.rootId);\n        draft.message = message;\n        _post_store2.default.storeCommentDraft(_this2.props.rootId, draft);\n\n        (0, _jquery2.default)('.post-right__scroll').parent().scrollTop((0, _jquery2.default)('.post-right__scroll')[0].scrollHeight);\n\n        var enableAddButton = _this2.handleEnableAddButton(message, _this2.state.fileInfos);\n\n        _this2.setState({\n            message: message,\n            enableAddButton: enableAddButton\n        });\n    };\n\n    this.handleKeyDown = function (e) {\n        if (_this2.state.ctrlSend && e.keyCode === KeyCodes.ENTER && e.ctrlKey === true) {\n            _this2.commentMsgKeyPress(e);\n            return;\n        }\n\n        if (!e.ctrlKey && !e.metaKey && !e.altKey && !e.shiftKey && e.keyCode === KeyCodes.UP && _this2.state.message === '') {\n            e.preventDefault();\n\n            var lastPost = _post_store2.default.getCurrentUsersLatestPost(_this2.props.channelId, _this2.props.rootId);\n            if (!lastPost) {\n                return;\n            }\n\n            _app_dispatcher2.default.handleViewAction({\n                type: ActionTypes.RECEIVED_EDIT_POST,\n                refocusId: '#reply_textbox',\n                title: Utils.localizeMessage('create_comment.commentTitle', 'Comment'),\n                message: lastPost.message,\n                postId: lastPost.id,\n                channelId: lastPost.channel_id,\n                comments: _post_store2.default.getCommentCount(lastPost)\n            });\n        }\n\n        if ((e.ctrlKey || e.metaKey) && !e.altKey && !e.shiftKey && (e.keyCode === _constants2.default.KeyCodes.UP || e.keyCode === _constants2.default.KeyCodes.DOWN)) {\n            var lastMessage = _message_history_store2.default.nextMessageInHistory(e.keyCode, _this2.state.message, 'comment');\n            if (lastMessage !== null) {\n                e.preventDefault();\n                _this2.setState({\n                    message: lastMessage,\n                    enableAddButton: true\n                });\n            }\n        }\n    };\n\n    this.handleFileUploadChange = function () {\n        _this2.focusTextbox();\n    };\n\n    this.handleUploadStart = function (clientIds) {\n        var draft = _post_store2.default.getCommentDraft(_this2.props.rootId);\n\n        draft.uploadsInProgress = draft.uploadsInProgress.concat(clientIds);\n        _post_store2.default.storeCommentDraft(_this2.props.rootId, draft);\n\n        _this2.setState({ uploadsInProgress: draft.uploadsInProgress });\n\n        // this is a bit redundant with the code that sets focus when the file input is clicked,\n        // but this also resets the focus after a drag and drop\n        _this2.focusTextbox();\n    };\n\n    this.handleFileUploadComplete = function (fileInfos, clientIds) {\n        var draft = _post_store2.default.getCommentDraft(_this2.props.rootId);\n\n        // remove each finished file from uploads\n        for (var i = 0; i < clientIds.length; i++) {\n            var index = draft.uploadsInProgress.indexOf(clientIds[i]);\n\n            if (index !== -1) {\n                draft.uploadsInProgress.splice(index, 1);\n            }\n        }\n\n        draft.fileInfos = draft.fileInfos.concat(fileInfos);\n        _post_store2.default.storeCommentDraft(_this2.props.rootId, draft);\n\n        // Focus on preview if needed/possible - if user has switched teams since starting the file upload,\n        // the preview will be undefined and the switch will fail\n        if (typeof _this2.refs.preview != 'undefined' && _this2.refs.preview) {\n            _this2.refs.preview.refs.container.scrollIntoView();\n        }\n\n        var enableAddButton = _this2.handleEnableAddButton(draft.message, draft.fileInfos);\n\n        _this2.setState({\n            uploadsInProgress: draft.uploadsInProgress,\n            fileInfos: draft.fileInfos,\n            enableAddButton: enableAddButton\n        });\n    };\n\n    this.handleUploadError = function (err, clientId) {\n        if (clientId === -1) {\n            _this2.setState({ serverError: err });\n        } else {\n            var draft = _post_store2.default.getCommentDraft(_this2.props.rootId);\n\n            var index = draft.uploadsInProgress.indexOf(clientId);\n            if (index !== -1) {\n                draft.uploadsInProgress.splice(index, 1);\n            }\n\n            _post_store2.default.storeCommentDraft(_this2.props.rootId, draft);\n\n            _this2.setState({ uploadsInProgress: draft.uploadsInProgress, serverError: err });\n        }\n    };\n\n    this.removePreview = function (id) {\n        var fileInfos = _this2.state.fileInfos;\n        var uploadsInProgress = _this2.state.uploadsInProgress;\n\n        // Clear previous errors\n        _this2.handleUploadError(null);\n\n        // id can either be the id of an uploaded file or the client id of an in progress upload\n        var index = fileInfos.findIndex(function (info) {\n            return info.id === id;\n        });\n        if (index === -1) {\n            index = uploadsInProgress.indexOf(id);\n\n            if (index !== -1) {\n                uploadsInProgress.splice(index, 1);\n                _this2.refs.fileUpload.getWrappedInstance().cancelUpload(id);\n            }\n        } else {\n            fileInfos.splice(index, 1);\n        }\n\n        var draft = _post_store2.default.getCommentDraft(_this2.props.rootId);\n        draft.fileInfos = fileInfos;\n        draft.uploadsInProgress = uploadsInProgress;\n        _post_store2.default.storeCommentDraft(_this2.props.rootId, draft);\n\n        _this2.setState({ fileInfos: fileInfos, uploadsInProgress: uploadsInProgress });\n\n        _this2.handleFileUploadChange();\n    };\n\n    this.getFileCount = function () {\n        return _this2.state.fileInfos.length + _this2.state.uploadsInProgress.length;\n    };\n\n    this.getFileUploadTarget = function () {\n        return _this2.refs.textbox;\n    };\n\n    this.getCreateCommentControls = function () {\n        return _this2.refs.createCommentControls;\n    };\n\n    this.focusTextbox = function () {\n        var keepFocus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        if (keepFocus || !UserAgent.isMobile()) {\n            _this2.refs.textbox.focus();\n        }\n    };\n\n    this.showPostDeletedModal = function () {\n        _this2.setState({\n            showPostDeletedModal: true\n        });\n    };\n\n    this.hidePostDeletedModal = function () {\n        _this2.setState({\n            showPostDeletedModal: false\n        });\n    };\n\n    this.handleBlur = function () {\n        _this2.lastBlurAt = Date.now();\n    };\n\n    this.handleEnableAddButton = function (message, fileInfos) {\n        return message.trim().length !== 0 || fileInfos.length !== 0;\n    };\n};\n\nexports.default = CreateComment;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2NyZWF0ZV9jb21tZW50L2NyZWF0ZV9jb21tZW50LmpzeD81OWZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCAqIGFzIENoYW5uZWxBY3Rpb25zIGZyb20gJ2FjdGlvbnMvY2hhbm5lbF9hY3Rpb25zLmpzeCc7XG5pbXBvcnQgKiBhcyBHbG9iYWxBY3Rpb25zIGZyb20gJ2FjdGlvbnMvZ2xvYmFsX2FjdGlvbnMuanN4JztcbmltcG9ydCAqIGFzIFBvc3RBY3Rpb25zIGZyb20gJ2FjdGlvbnMvcG9zdF9hY3Rpb25zLmpzeCc7XG5pbXBvcnQgQXBwRGlzcGF0Y2hlciBmcm9tICdkaXNwYXRjaGVyL2FwcF9kaXNwYXRjaGVyLmpzeCc7XG5pbXBvcnQgRW1vamlTdG9yZSBmcm9tICdzdG9yZXMvZW1vamlfc3RvcmUuanN4JztcbmltcG9ydCBNZXNzYWdlSGlzdG9yeVN0b3JlIGZyb20gJ3N0b3Jlcy9tZXNzYWdlX2hpc3Rvcnlfc3RvcmUuanN4JztcbmltcG9ydCBQb3N0U3RvcmUgZnJvbSAnc3RvcmVzL3Bvc3Rfc3RvcmUuanN4JztcbmltcG9ydCBQcmVmZXJlbmNlU3RvcmUgZnJvbSAnc3RvcmVzL3ByZWZlcmVuY2Vfc3RvcmUuanN4JztcbmltcG9ydCBUZWFtU3RvcmUgZnJvbSAnc3RvcmVzL3RlYW1fc3RvcmUuanN4JztcbmltcG9ydCBVc2VyU3RvcmUgZnJvbSAnc3RvcmVzL3VzZXJfc3RvcmUuanN4JztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFVzZXJBZ2VudCBmcm9tICd1dGlscy91c2VyX2FnZW50LmpzeCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQge1JFQUNUSU9OX1BBVFRFUk59IGZyb20gJ2NvbXBvbmVudHMvY3JlYXRlX3Bvc3QuanN4JztcbmltcG9ydCBFbW9qaVBpY2tlck92ZXJsYXkgZnJvbSAnY29tcG9uZW50cy9lbW9qaV9waWNrZXIvZW1vamlfcGlja2VyX292ZXJsYXkuanN4JztcbmltcG9ydCBGaWxlUHJldmlldyBmcm9tICdjb21wb25lbnRzL2ZpbGVfcHJldmlldy5qc3gnO1xuaW1wb3J0IEZpbGVVcGxvYWQgZnJvbSAnY29tcG9uZW50cy9maWxlX3VwbG9hZC5qc3gnO1xuaW1wb3J0IE1zZ1R5cGluZyBmcm9tICdjb21wb25lbnRzL21zZ190eXBpbmcuanN4JztcbmltcG9ydCBQb3N0RGVsZXRlZE1vZGFsIGZyb20gJ2NvbXBvbmVudHMvcG9zdF9kZWxldGVkX21vZGFsLmpzeCc7XG5pbXBvcnQgVGV4dGJveCBmcm9tICdjb21wb25lbnRzL3RleHRib3guanN4JztcblxuY29uc3QgQWN0aW9uVHlwZXMgPSBDb25zdGFudHMuQWN0aW9uVHlwZXM7XG5jb25zdCBLZXlDb2RlcyA9IENvbnN0YW50cy5LZXlDb2RlcztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3JlYXRlQ29tbWVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgY2hhbm5lbElkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIHJvb3RJZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgICAgICBsYXRlc3RQb3N0SWQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIGdldFNpZGViYXJCb2R5OiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgY3JlYXRlUG9zdEVycm9ySWQ6IFByb3BUeXBlcy5zdHJpbmdcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5sYXN0VGltZSA9IDA7XG5cbiAgICAgICAgUG9zdFN0b3JlLmNsZWFyQ29tbWVudERyYWZ0VXBsb2FkcygpO1xuICAgICAgICBNZXNzYWdlSGlzdG9yeVN0b3JlLnJlc2V0SGlzdG9yeUluZGV4KCdjb21tZW50Jyk7XG5cbiAgICAgICAgY29uc3QgZHJhZnQgPSBQb3N0U3RvcmUuZ2V0Q29tbWVudERyYWZ0KHRoaXMucHJvcHMucm9vdElkKTtcbiAgICAgICAgY29uc3QgZW5hYmxlQWRkQnV0dG9uID0gdGhpcy5oYW5kbGVFbmFibGVBZGRCdXR0b24oZHJhZnQubWVzc2FnZSwgZHJhZnQuZmlsZUluZm9zKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGRyYWZ0Lm1lc3NhZ2UsXG4gICAgICAgICAgICB1cGxvYWRzSW5Qcm9ncmVzczogZHJhZnQudXBsb2Fkc0luUHJvZ3Jlc3MsXG4gICAgICAgICAgICBmaWxlSW5mb3M6IGRyYWZ0LmZpbGVJbmZvcyxcbiAgICAgICAgICAgIHN1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgY3RybFNlbmQ6IFByZWZlcmVuY2VTdG9yZS5nZXRCb29sKENvbnN0YW50cy5QcmVmZXJlbmNlcy5DQVRFR09SWV9BRFZBTkNFRF9TRVRUSU5HUywgJ3NlbmRfb25fY3RybF9lbnRlcicpLFxuICAgICAgICAgICAgc2hvd1Bvc3REZWxldGVkTW9kYWw6IGZhbHNlLFxuICAgICAgICAgICAgZW5hYmxlQWRkQnV0dG9uLFxuICAgICAgICAgICAgc2hvd0Vtb2ppUGlja2VyOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubGFzdEJsdXJBdCA9IDA7XG4gICAgfVxuXG4gICAgdG9nZ2xlRW1vamlQaWNrZXIgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dFbW9qaVBpY2tlcjogIXRoaXMuc3RhdGUuc2hvd0Vtb2ppUGlja2VyfSk7XG4gICAgfVxuXG4gICAgaGlkZUVtb2ppUGlja2VyID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93RW1vamlQaWNrZXI6IGZhbHNlfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlRW1vamlDbGljayA9IChlbW9qaSkgPT4ge1xuICAgICAgICBjb25zdCBlbW9qaUFsaWFzID0gZW1vamkubmFtZSB8fCBlbW9qaS5hbGlhc2VzWzBdO1xuXG4gICAgICAgIGlmICghZW1vamlBbGlhcykge1xuICAgICAgICAgICAgLy9Pb3BzLi4gVGhlcmUgd2VudCBzb21ldGhpbmcgd3JvbmdcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm1lc3NhZ2UgPT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHttZXNzYWdlOiAnOicgKyBlbW9qaUFsaWFzICsgJzogJ30pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQ2hlY2sgd2hldGhlciB0aGVyZSBpcyBhbHJlYWR5IGEgYmxhbmsgYXQgdGhlIGVuZCBvZiB0aGUgY3VycmVudCBtZXNzYWdlXG4gICAgICAgICAgICBsZXQgbmV3TWVzc2FnZTtcbiAgICAgICAgICAgIGlmICgoL1xccyskLykudGVzdCh0aGlzLnN0YXRlLm1lc3NhZ2UpKSB7XG4gICAgICAgICAgICAgICAgbmV3TWVzc2FnZSA9IHRoaXMuc3RhdGUubWVzc2FnZSArICc6JyArIGVtb2ppQWxpYXMgKyAnOiAnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdNZXNzYWdlID0gdGhpcy5zdGF0ZS5tZXNzYWdlICsgJyA6JyArIGVtb2ppQWxpYXMgKyAnOiAnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHttZXNzYWdlOiBuZXdNZXNzYWdlfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93RW1vamlQaWNrZXI6IGZhbHNlfSk7XG5cbiAgICAgICAgdGhpcy5mb2N1c1RleHRib3goKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgUHJlZmVyZW5jZVN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMub25QcmVmZXJlbmNlQ2hhbmdlKTtcblxuICAgICAgICB0aGlzLmZvY3VzVGV4dGJveCgpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBQcmVmZXJlbmNlU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5vblByZWZlcmVuY2VDaGFuZ2UpO1xuICAgIH1cblxuICAgIG9uUHJlZmVyZW5jZUNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjdHJsU2VuZDogUHJlZmVyZW5jZVN0b3JlLmdldEJvb2woQ29uc3RhbnRzLlByZWZlcmVuY2VzLkNBVEVHT1JZX0FEVkFOQ0VEX1NFVFRJTkdTLCAnc2VuZF9vbl9jdHJsX2VudGVyJylcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIGlmIChwcmV2U3RhdGUudXBsb2Fkc0luUHJvZ3Jlc3MgPCB0aGlzLnN0YXRlLnVwbG9hZHNJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAkKCcucG9zdC1yaWdodF9fc2Nyb2xsJykuc2Nyb2xsVG9wKCQoJy5wb3N0LXJpZ2h0X19zY3JvbGwnKVswXS5zY3JvbGxIZWlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByZXZQcm9wcy5yb290SWQgIT09IHRoaXMucHJvcHMucm9vdElkKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzVGV4dGJveCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlUG9zdEVycm9yID0gKHBvc3RFcnJvcikgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtwb3N0RXJyb3J9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVTdWJtaXQgPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUudXBsb2Fkc0luUHJvZ3Jlc3MubGVuZ3RoID4gMCB8fCB0aGlzLnN0YXRlLnN1Ym1pdHRpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnN0YXRlLm1lc3NhZ2U7XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucG9zdEVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtlcnJvckNsYXNzOiAnYW5pbWF0aW9uLS1oaWdobGlnaHQnfSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtlcnJvckNsYXNzOiBudWxsfSk7XG4gICAgICAgICAgICB9LCBDb25zdGFudHMuQU5JTUFUSU9OX1RJTUVPVVQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgTWVzc2FnZUhpc3RvcnlTdG9yZS5zdG9yZU1lc3NhZ2VJbkhpc3RvcnkobWVzc2FnZSk7XG4gICAgICAgIGlmIChtZXNzYWdlLnRyaW0oKS5sZW5ndGggPT09IDAgJiYgdGhpcy5zdGF0ZS5maWxlSW5mb3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc1JlYWN0aW9uID0gUkVBQ1RJT05fUEFUVEVSTi5leGVjKG1lc3NhZ2UpO1xuICAgICAgICBpZiAoaXNSZWFjdGlvbiAmJiBFbW9qaVN0b3JlLmhhcyhpc1JlYWN0aW9uWzJdKSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXRSZWFjdGlvbihpc1JlYWN0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLmluZGV4T2YoJy8nKSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXRDb21tYW5kKG1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXRQb3N0KG1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBtZXNzYWdlOiAnJyxcbiAgICAgICAgICAgIHN1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgcG9zdEVycm9yOiBudWxsLFxuICAgICAgICAgICAgZmlsZUluZm9zOiBbXSxcbiAgICAgICAgICAgIHNlcnZlckVycm9yOiBudWxsLFxuICAgICAgICAgICAgZW5hYmxlQWRkQnV0dG9uOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBmYXN0ZXJUaGFuSHVtYW5XaWxsQ2xpY2sgPSAxNTA7XG4gICAgICAgIGNvbnN0IGZvcmNlRm9jdXMgPSAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdEJsdXJBdCA8IGZhc3RlclRoYW5IdW1hbldpbGxDbGljayk7XG4gICAgICAgIHRoaXMuZm9jdXNUZXh0Ym94KGZvcmNlRm9jdXMpO1xuICAgIH1cblxuICAgIGhhbmRsZVN1Ym1pdENvbW1hbmQgPSAobWVzc2FnZSkgPT4ge1xuICAgICAgICBQb3N0U3RvcmUuc3RvcmVDb21tZW50RHJhZnQodGhpcy5wcm9wcy5yb290SWQsIG51bGwpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICcnLFxuICAgICAgICAgICAgcG9zdEVycm9yOiBudWxsLFxuICAgICAgICAgICAgZmlsZUluZm9zOiBbXSxcbiAgICAgICAgICAgIGVuYWJsZUFkZEJ1dHRvbjogZmFsc2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYXJncyA9IHt9O1xuICAgICAgICBhcmdzLmNoYW5uZWxfaWQgPSB0aGlzLnByb3BzLmNoYW5uZWxJZDtcbiAgICAgICAgYXJncy50ZWFtX2lkID0gVGVhbVN0b3JlLmdldEN1cnJlbnRJZCgpO1xuICAgICAgICBhcmdzLnJvb3RfaWQgPSB0aGlzLnByb3BzLnJvb3RJZDtcbiAgICAgICAgYXJncy5wYXJlbnRfaWQgPSB0aGlzLnByb3BzLnJvb3RJZDtcbiAgICAgICAgQ2hhbm5lbEFjdGlvbnMuZXhlY3V0ZUNvbW1hbmQoXG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtzdWJtaXR0aW5nOiBmYWxzZX0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLnNlbmRNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU3VibWl0UG9zdChtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zZXJ2ZXJFcnJvciA9IGVyci5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zdWJtaXR0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBoYW5kbGVTdWJtaXRQb3N0ID0gKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgdXNlcklkID0gVXNlclN0b3JlLmdldEN1cnJlbnRJZCgpO1xuICAgICAgICBjb25zdCB0aW1lID0gVXRpbHMuZ2V0VGltZXN0YW1wKCk7XG5cbiAgICAgICAgY29uc3QgcG9zdCA9IHt9O1xuICAgICAgICBwb3N0LmZpbGVfaWRzID0gW107XG4gICAgICAgIHBvc3QubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHBvc3QuY2hhbm5lbF9pZCA9IHRoaXMucHJvcHMuY2hhbm5lbElkO1xuICAgICAgICBwb3N0LnJvb3RfaWQgPSB0aGlzLnByb3BzLnJvb3RJZDtcbiAgICAgICAgcG9zdC5wYXJlbnRfaWQgPSB0aGlzLnByb3BzLnJvb3RJZDtcbiAgICAgICAgcG9zdC5wZW5kaW5nX3Bvc3RfaWQgPSBgJHt1c2VySWR9OiR7dGltZX1gO1xuICAgICAgICBwb3N0LnVzZXJfaWQgPSB1c2VySWQ7XG4gICAgICAgIHBvc3QuY3JlYXRlX2F0ID0gdGltZTtcblxuICAgICAgICBHbG9iYWxBY3Rpb25zLmVtaXRVc2VyQ29tbWVudGVkRXZlbnQocG9zdCk7XG5cbiAgICAgICAgUG9zdEFjdGlvbnMuY3JlYXRlUG9zdChwb3N0LCB0aGlzLnN0YXRlLmZpbGVJbmZvcyk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBtZXNzYWdlOiAnJyxcbiAgICAgICAgICAgIHN1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgcG9zdEVycm9yOiBudWxsLFxuICAgICAgICAgICAgZmlsZUluZm9zOiBbXSxcbiAgICAgICAgICAgIHNlcnZlckVycm9yOiBudWxsLFxuICAgICAgICAgICAgZW5hYmxlQWRkQnV0dG9uOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBmYXN0ZXJUaGFuSHVtYW5XaWxsQ2xpY2sgPSAxNTA7XG4gICAgICAgIGNvbnN0IGZvcmNlRm9jdXMgPSAoRGF0ZS5ub3coKSAtIHRoaXMuc3RhdGUubGFzdEJsdXJBdCA8IGZhc3RlclRoYW5IdW1hbldpbGxDbGljayk7XG4gICAgICAgIHRoaXMuZm9jdXNUZXh0Ym94KGZvcmNlRm9jdXMpO1xuICAgIH1cblxuICAgIGhhbmRsZVN1Ym1pdFJlYWN0aW9uID0gKGlzUmVhY3Rpb24pID0+IHtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gaXNSZWFjdGlvblsxXTtcblxuICAgICAgICBjb25zdCBlbW9qaU5hbWUgPSBpc1JlYWN0aW9uWzJdO1xuICAgICAgICBjb25zdCBwb3N0SWQgPSB0aGlzLnByb3BzLmxhdGVzdFBvc3RJZDtcblxuICAgICAgICBpZiAoYWN0aW9uID09PSAnKycpIHtcbiAgICAgICAgICAgIFBvc3RBY3Rpb25zLmFkZFJlYWN0aW9uKHRoaXMucHJvcHMuY2hhbm5lbElkLCBwb3N0SWQsIGVtb2ppTmFtZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnLScpIHtcbiAgICAgICAgICAgIFBvc3RBY3Rpb25zLnJlbW92ZVJlYWN0aW9uKHRoaXMucHJvcHMuY2hhbm5lbElkLCBwb3N0SWQsIGVtb2ppTmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBQb3N0U3RvcmUuc3RvcmVDb21tZW50RHJhZnQodGhpcy5wcm9wcy5yb290SWQsIG51bGwpO1xuICAgIH1cblxuICAgIGNvbW1lbnRNc2dLZXlQcmVzcyA9IChlKSA9PiB7XG4gICAgICAgIGlmICghVXNlckFnZW50LmlzTW9iaWxlKCkgJiYgKCh0aGlzLnN0YXRlLmN0cmxTZW5kICYmIGUuY3RybEtleSkgfHwgIXRoaXMuc3RhdGUuY3RybFNlbmQpKSB7XG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gS2V5Q29kZXMuRU5URVIgJiYgIWUuc2hpZnRLZXkgJiYgIWUuYWx0S2V5KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmcy50ZXh0Ym94KS5ibHVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXQoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBHbG9iYWxBY3Rpb25zLmVtaXRMb2NhbFVzZXJUeXBpbmdFdmVudCh0aGlzLnByb3BzLmNoYW5uZWxJZCwgdGhpcy5wcm9wcy5yb290SWQpO1xuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZSA9IChlKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlLnRhcmdldC52YWx1ZTtcblxuICAgICAgICBjb25zdCBkcmFmdCA9IFBvc3RTdG9yZS5nZXRDb21tZW50RHJhZnQodGhpcy5wcm9wcy5yb290SWQpO1xuICAgICAgICBkcmFmdC5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgUG9zdFN0b3JlLnN0b3JlQ29tbWVudERyYWZ0KHRoaXMucHJvcHMucm9vdElkLCBkcmFmdCk7XG5cbiAgICAgICAgJCgnLnBvc3QtcmlnaHRfX3Njcm9sbCcpLnBhcmVudCgpLnNjcm9sbFRvcCgkKCcucG9zdC1yaWdodF9fc2Nyb2xsJylbMF0uc2Nyb2xsSGVpZ2h0KTtcblxuICAgICAgICBjb25zdCBlbmFibGVBZGRCdXR0b24gPSB0aGlzLmhhbmRsZUVuYWJsZUFkZEJ1dHRvbihtZXNzYWdlLCB0aGlzLnN0YXRlLmZpbGVJbmZvcyk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZW5hYmxlQWRkQnV0dG9uXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhbmRsZUtleURvd24gPSAoZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5jdHJsU2VuZCAmJiBlLmtleUNvZGUgPT09IEtleUNvZGVzLkVOVEVSICYmIGUuY3RybEtleSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5jb21tZW50TXNnS2V5UHJlc3MoZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWUuY3RybEtleSAmJiAhZS5tZXRhS2V5ICYmICFlLmFsdEtleSAmJiAhZS5zaGlmdEtleSAmJiBlLmtleUNvZGUgPT09IEtleUNvZGVzLlVQICYmIHRoaXMuc3RhdGUubWVzc2FnZSA9PT0gJycpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgY29uc3QgbGFzdFBvc3QgPSBQb3N0U3RvcmUuZ2V0Q3VycmVudFVzZXJzTGF0ZXN0UG9zdCh0aGlzLnByb3BzLmNoYW5uZWxJZCwgdGhpcy5wcm9wcy5yb290SWQpO1xuICAgICAgICAgICAgaWYgKCFsYXN0UG9zdCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQXBwRGlzcGF0Y2hlci5oYW5kbGVWaWV3QWN0aW9uKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBBY3Rpb25UeXBlcy5SRUNFSVZFRF9FRElUX1BPU1QsXG4gICAgICAgICAgICAgICAgcmVmb2N1c0lkOiAnI3JlcGx5X3RleHRib3gnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ2NyZWF0ZV9jb21tZW50LmNvbW1lbnRUaXRsZScsICdDb21tZW50JyksXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbGFzdFBvc3QubWVzc2FnZSxcbiAgICAgICAgICAgICAgICBwb3N0SWQ6IGxhc3RQb3N0LmlkLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxJZDogbGFzdFBvc3QuY2hhbm5lbF9pZCxcbiAgICAgICAgICAgICAgICBjb21tZW50czogUG9zdFN0b3JlLmdldENvbW1lbnRDb3VudChsYXN0UG9zdClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSAmJiAhZS5hbHRLZXkgJiYgIWUuc2hpZnRLZXkgJiYgKGUua2V5Q29kZSA9PT0gQ29uc3RhbnRzLktleUNvZGVzLlVQIHx8IGUua2V5Q29kZSA9PT0gQ29uc3RhbnRzLktleUNvZGVzLkRPV04pKSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0TWVzc2FnZSA9IE1lc3NhZ2VIaXN0b3J5U3RvcmUubmV4dE1lc3NhZ2VJbkhpc3RvcnkoZS5rZXlDb2RlLCB0aGlzLnN0YXRlLm1lc3NhZ2UsICdjb21tZW50Jyk7XG4gICAgICAgICAgICBpZiAobGFzdE1lc3NhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGxhc3RNZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVBZGRCdXR0b246IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUZpbGVVcGxvYWRDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuZm9jdXNUZXh0Ym94KCk7XG4gICAgfVxuXG4gICAgaGFuZGxlVXBsb2FkU3RhcnQgPSAoY2xpZW50SWRzKSA9PiB7XG4gICAgICAgIGNvbnN0IGRyYWZ0ID0gUG9zdFN0b3JlLmdldENvbW1lbnREcmFmdCh0aGlzLnByb3BzLnJvb3RJZCk7XG5cbiAgICAgICAgZHJhZnQudXBsb2Fkc0luUHJvZ3Jlc3MgPSBkcmFmdC51cGxvYWRzSW5Qcm9ncmVzcy5jb25jYXQoY2xpZW50SWRzKTtcbiAgICAgICAgUG9zdFN0b3JlLnN0b3JlQ29tbWVudERyYWZ0KHRoaXMucHJvcHMucm9vdElkLCBkcmFmdCk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dXBsb2Fkc0luUHJvZ3Jlc3M6IGRyYWZ0LnVwbG9hZHNJblByb2dyZXNzfSk7XG5cbiAgICAgICAgLy8gdGhpcyBpcyBhIGJpdCByZWR1bmRhbnQgd2l0aCB0aGUgY29kZSB0aGF0IHNldHMgZm9jdXMgd2hlbiB0aGUgZmlsZSBpbnB1dCBpcyBjbGlja2VkLFxuICAgICAgICAvLyBidXQgdGhpcyBhbHNvIHJlc2V0cyB0aGUgZm9jdXMgYWZ0ZXIgYSBkcmFnIGFuZCBkcm9wXG4gICAgICAgIHRoaXMuZm9jdXNUZXh0Ym94KCk7XG4gICAgfVxuXG4gICAgaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlID0gKGZpbGVJbmZvcywgY2xpZW50SWRzKSA9PiB7XG4gICAgICAgIGNvbnN0IGRyYWZ0ID0gUG9zdFN0b3JlLmdldENvbW1lbnREcmFmdCh0aGlzLnByb3BzLnJvb3RJZCk7XG5cbiAgICAgICAgLy8gcmVtb3ZlIGVhY2ggZmluaXNoZWQgZmlsZSBmcm9tIHVwbG9hZHNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjbGllbnRJZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZHJhZnQudXBsb2Fkc0luUHJvZ3Jlc3MuaW5kZXhPZihjbGllbnRJZHNbaV0pO1xuXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgZHJhZnQudXBsb2Fkc0luUHJvZ3Jlc3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGRyYWZ0LmZpbGVJbmZvcyA9IGRyYWZ0LmZpbGVJbmZvcy5jb25jYXQoZmlsZUluZm9zKTtcbiAgICAgICAgUG9zdFN0b3JlLnN0b3JlQ29tbWVudERyYWZ0KHRoaXMucHJvcHMucm9vdElkLCBkcmFmdCk7XG5cbiAgICAgICAgLy8gRm9jdXMgb24gcHJldmlldyBpZiBuZWVkZWQvcG9zc2libGUgLSBpZiB1c2VyIGhhcyBzd2l0Y2hlZCB0ZWFtcyBzaW5jZSBzdGFydGluZyB0aGUgZmlsZSB1cGxvYWQsXG4gICAgICAgIC8vIHRoZSBwcmV2aWV3IHdpbGwgYmUgdW5kZWZpbmVkIGFuZCB0aGUgc3dpdGNoIHdpbGwgZmFpbFxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucmVmcy5wcmV2aWV3ICE9ICd1bmRlZmluZWQnICYmIHRoaXMucmVmcy5wcmV2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLnJlZnMucHJldmlldy5yZWZzLmNvbnRhaW5lci5zY3JvbGxJbnRvVmlldygpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZW5hYmxlQWRkQnV0dG9uID0gdGhpcy5oYW5kbGVFbmFibGVBZGRCdXR0b24oZHJhZnQubWVzc2FnZSwgZHJhZnQuZmlsZUluZm9zKTtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHVwbG9hZHNJblByb2dyZXNzOiBkcmFmdC51cGxvYWRzSW5Qcm9ncmVzcyxcbiAgICAgICAgICAgIGZpbGVJbmZvczogZHJhZnQuZmlsZUluZm9zLFxuICAgICAgICAgICAgZW5hYmxlQWRkQnV0dG9uXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhbmRsZVVwbG9hZEVycm9yID0gKGVyciwgY2xpZW50SWQpID0+IHtcbiAgICAgICAgaWYgKGNsaWVudElkID09PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VydmVyRXJyb3I6IGVycn0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZHJhZnQgPSBQb3N0U3RvcmUuZ2V0Q29tbWVudERyYWZ0KHRoaXMucHJvcHMucm9vdElkKTtcblxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBkcmFmdC51cGxvYWRzSW5Qcm9ncmVzcy5pbmRleE9mKGNsaWVudElkKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBkcmFmdC51cGxvYWRzSW5Qcm9ncmVzcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBQb3N0U3RvcmUuc3RvcmVDb21tZW50RHJhZnQodGhpcy5wcm9wcy5yb290SWQsIGRyYWZ0KTtcblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dXBsb2Fkc0luUHJvZ3Jlc3M6IGRyYWZ0LnVwbG9hZHNJblByb2dyZXNzLCBzZXJ2ZXJFcnJvcjogZXJyfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVQcmV2aWV3ID0gKGlkKSA9PiB7XG4gICAgICAgIGNvbnN0IGZpbGVJbmZvcyA9IHRoaXMuc3RhdGUuZmlsZUluZm9zO1xuICAgICAgICBjb25zdCB1cGxvYWRzSW5Qcm9ncmVzcyA9IHRoaXMuc3RhdGUudXBsb2Fkc0luUHJvZ3Jlc3M7XG5cbiAgICAgICAgLy8gQ2xlYXIgcHJldmlvdXMgZXJyb3JzXG4gICAgICAgIHRoaXMuaGFuZGxlVXBsb2FkRXJyb3IobnVsbCk7XG5cbiAgICAgICAgLy8gaWQgY2FuIGVpdGhlciBiZSB0aGUgaWQgb2YgYW4gdXBsb2FkZWQgZmlsZSBvciB0aGUgY2xpZW50IGlkIG9mIGFuIGluIHByb2dyZXNzIHVwbG9hZFxuICAgICAgICBsZXQgaW5kZXggPSBmaWxlSW5mb3MuZmluZEluZGV4KChpbmZvKSA9PiBpbmZvLmlkID09PSBpZCk7XG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIGluZGV4ID0gdXBsb2Fkc0luUHJvZ3Jlc3MuaW5kZXhPZihpZCk7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICB1cGxvYWRzSW5Qcm9ncmVzcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcy5maWxlVXBsb2FkLmdldFdyYXBwZWRJbnN0YW5jZSgpLmNhbmNlbFVwbG9hZChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaWxlSW5mb3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRyYWZ0ID0gUG9zdFN0b3JlLmdldENvbW1lbnREcmFmdCh0aGlzLnByb3BzLnJvb3RJZCk7XG4gICAgICAgIGRyYWZ0LmZpbGVJbmZvcyA9IGZpbGVJbmZvcztcbiAgICAgICAgZHJhZnQudXBsb2Fkc0luUHJvZ3Jlc3MgPSB1cGxvYWRzSW5Qcm9ncmVzcztcbiAgICAgICAgUG9zdFN0b3JlLnN0b3JlQ29tbWVudERyYWZ0KHRoaXMucHJvcHMucm9vdElkLCBkcmFmdCk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZmlsZUluZm9zLCB1cGxvYWRzSW5Qcm9ncmVzc30pO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlRmlsZVVwbG9hZENoYW5nZSgpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV3UHJvcHMpIHtcbiAgICAgICAgaWYgKG5ld1Byb3BzLnJvb3RJZCAhPT0gdGhpcy5wcm9wcy5yb290SWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGRyYWZ0ID0gUG9zdFN0b3JlLmdldENvbW1lbnREcmFmdChuZXdQcm9wcy5yb290SWQpO1xuICAgICAgICAgICAgY29uc3QgZW5hYmxlQWRkQnV0dG9uID0gdGhpcy5oYW5kbGVFbmFibGVBZGRCdXR0b24oZHJhZnQubWVzc2FnZSwgZHJhZnQuZmlsZUluZm9zKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRyYWZ0Lm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgdXBsb2Fkc0luUHJvZ3Jlc3M6IGRyYWZ0LnVwbG9hZHNJblByb2dyZXNzLFxuICAgICAgICAgICAgICAgIGZpbGVJbmZvczogZHJhZnQuZmlsZUluZm9zLFxuICAgICAgICAgICAgICAgIGVuYWJsZUFkZEJ1dHRvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV3UHJvcHMuY3JlYXRlUG9zdEVycm9ySWQgPT09ICdhcGkucG9zdC5jcmVhdGVfcG9zdC5yb290X2lkLmFwcF9lcnJvcicgJiYgbmV3UHJvcHMuY3JlYXRlUG9zdEVycm9ySWQgIT09IHRoaXMucHJvcHMuY3JlYXRlUG9zdEVycm9ySWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1Bvc3REZWxldGVkTW9kYWwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEZpbGVDb3VudCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuZmlsZUluZm9zLmxlbmd0aCArIHRoaXMuc3RhdGUudXBsb2Fkc0luUHJvZ3Jlc3MubGVuZ3RoO1xuICAgIH1cblxuICAgIGdldEZpbGVVcGxvYWRUYXJnZXQgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZnMudGV4dGJveDtcbiAgICB9XG5cbiAgICBnZXRDcmVhdGVDb21tZW50Q29udHJvbHMgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZnMuY3JlYXRlQ29tbWVudENvbnRyb2xzO1xuICAgIH1cblxuICAgIGZvY3VzVGV4dGJveCA9IChrZWVwRm9jdXMgPSBmYWxzZSkgPT4ge1xuICAgICAgICBpZiAoa2VlcEZvY3VzIHx8ICFVc2VyQWdlbnQuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgdGhpcy5yZWZzLnRleHRib3guZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNob3dQb3N0RGVsZXRlZE1vZGFsID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3dQb3N0RGVsZXRlZE1vZGFsOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhpZGVQb3N0RGVsZXRlZE1vZGFsID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3dQb3N0RGVsZXRlZE1vZGFsOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVCbHVyID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmxhc3RCbHVyQXQgPSBEYXRlLm5vdygpO1xuICAgIH1cblxuICAgIGhhbmRsZUVuYWJsZUFkZEJ1dHRvbiA9IChtZXNzYWdlLCBmaWxlSW5mb3MpID0+IHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2UudHJpbSgpLmxlbmd0aCAhPT0gMCB8fCBmaWxlSW5mb3MubGVuZ3RoICE9PSAwO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IHNlcnZlckVycm9yID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2VydmVyRXJyb3IpIHtcbiAgICAgICAgICAgIHNlcnZlckVycm9yID0gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmb3JtLWdyb3VwIGhhcy1lcnJvcic+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2NvbnRyb2wtbGFiZWwnPnt0aGlzLnN0YXRlLnNlcnZlckVycm9yfTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHBvc3RFcnJvciA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnBvc3RFcnJvcikge1xuICAgICAgICAgICAgY29uc3QgcG9zdEVycm9yQ2xhc3MgPSAncG9zdC1lcnJvcicgKyAodGhpcy5zdGF0ZS5lcnJvckNsYXNzID8gKCcgJyArIHRoaXMuc3RhdGUuZXJyb3JDbGFzcykgOiAnJyk7XG4gICAgICAgICAgICBwb3N0RXJyb3IgPSA8bGFiZWwgY2xhc3NOYW1lPXtwb3N0RXJyb3JDbGFzc30+e3RoaXMuc3RhdGUucG9zdEVycm9yfTwvbGFiZWw+O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHByZXZpZXcgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5maWxlSW5mb3MubGVuZ3RoID4gMCB8fCB0aGlzLnN0YXRlLnVwbG9hZHNJblByb2dyZXNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHByZXZpZXcgPSAoXG4gICAgICAgICAgICAgICAgPEZpbGVQcmV2aWV3XG4gICAgICAgICAgICAgICAgICAgIGZpbGVJbmZvcz17dGhpcy5zdGF0ZS5maWxlSW5mb3N9XG4gICAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlPXt0aGlzLnJlbW92ZVByZXZpZXd9XG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZHNJblByb2dyZXNzPXt0aGlzLnN0YXRlLnVwbG9hZHNJblByb2dyZXNzfVxuICAgICAgICAgICAgICAgICAgICByZWY9J3ByZXZpZXcnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdXBsb2Fkc0luUHJvZ3Jlc3NUZXh0ID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUudXBsb2Fkc0luUHJvZ3Jlc3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdXBsb2Fkc0luUHJvZ3Jlc3NUZXh0ID0gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ncHVsbC1yaWdodCBwb3N0LXJpZ2h0LWNvbW1lbnRzLXVwbG9hZC1pbi1wcm9ncmVzcyc+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLnVwbG9hZHNJblByb2dyZXNzLmxlbmd0aCA9PT0gMSA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2NyZWF0ZV9jb21tZW50LmZpbGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZpbGUgdXBsb2FkaW5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2NyZWF0ZV9jb21tZW50LmZpbGVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdGaWxlcyB1cGxvYWRpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYWRkQnV0dG9uQ2xhc3MgPSAnYnRuIGJ0bi1wcmltYXJ5IGNvbW1lbnQtYnRuIHB1bGwtcmlnaHQnO1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuZW5hYmxlQWRkQnV0dG9uKSB7XG4gICAgICAgICAgICBhZGRCdXR0b25DbGFzcyArPSAnIGRpc2FibGVkJztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbGVVcGxvYWQgPSAoXG4gICAgICAgICAgICA8RmlsZVVwbG9hZFxuICAgICAgICAgICAgICAgIHJlZj0nZmlsZVVwbG9hZCdcbiAgICAgICAgICAgICAgICBnZXRGaWxlQ291bnQ9e3RoaXMuZ2V0RmlsZUNvdW50fVxuICAgICAgICAgICAgICAgIGdldFRhcmdldD17dGhpcy5nZXRGaWxlVXBsb2FkVGFyZ2V0fVxuICAgICAgICAgICAgICAgIG9uRmlsZVVwbG9hZENoYW5nZT17dGhpcy5oYW5kbGVGaWxlVXBsb2FkQ2hhbmdlfVxuICAgICAgICAgICAgICAgIG9uVXBsb2FkU3RhcnQ9e3RoaXMuaGFuZGxlVXBsb2FkU3RhcnR9XG4gICAgICAgICAgICAgICAgb25GaWxlVXBsb2FkPXt0aGlzLmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZX1cbiAgICAgICAgICAgICAgICBvblVwbG9hZEVycm9yPXt0aGlzLmhhbmRsZVVwbG9hZEVycm9yfVxuICAgICAgICAgICAgICAgIHBvc3RUeXBlPSdjb21tZW50J1xuICAgICAgICAgICAgICAgIGNoYW5uZWxJZD17dGhpcy5wcm9wcy5jaGFubmVsSWR9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuXG4gICAgICAgIGxldCBlbW9qaVBpY2tlciA9IG51bGw7XG4gICAgICAgIGlmICh3aW5kb3cubW1fY29uZmlnLkVuYWJsZUVtb2ppUGlja2VyID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIGVtb2ppUGlja2VyID0gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZW1vamktcGlja2VyX19jb250YWluZXInPlxuICAgICAgICAgICAgICAgICAgICA8RW1vamlQaWNrZXJPdmVybGF5XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3dFbW9qaVBpY2tlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcj17dGhpcy5wcm9wcy5nZXRTaWRlYmFyQm9keX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD17dGhpcy5nZXRDcmVhdGVDb21tZW50Q29udHJvbHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkhpZGU9e3RoaXMuaGlkZUVtb2ppUGlja2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25FbW9qaUNsaWNrPXt0aGlzLmhhbmRsZUVtb2ppQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodE9mZnNldD17MTV9XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3BPZmZzZXQ9ezU1fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXsnaWNvbiBpY29uLS1lbW9qaSBlbW9qaS1yaHMgJyArICh0aGlzLnN0YXRlLnNob3dFbW9qaVBpY2tlciA/ICdhY3RpdmUnIDogJycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IENvbnN0YW50cy5FTU9KSV9JQ09OX1NWR319XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZUVtb2ppUGlja2VyfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncG9zdC1jcmVhdGUnPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5yb290SWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3Bvc3QtY3JlYXRlLWJvZHkgY29tbWVudC1jcmVhdGUtYm9keSdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Bvc3QtYm9keV9fY2VsbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRleHRib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleVByZXNzPXt0aGlzLmNvbW1lbnRNc2dLZXlQcmVzc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLmhhbmRsZUtleURvd259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVBvc3RFcnJvcj17dGhpcy5oYW5kbGVQb3N0RXJyb3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQmx1cj17dGhpcy5oYW5kbGVCbHVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVNZXNzYWdlPXtVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ2NyZWF0ZV9jb21tZW50LmFkZENvbW1lbnQnLCAnQWRkIGEgY29tbWVudC4uLicpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbW9qaUVuYWJsZWQ9e3dpbmRvdy5tbV9jb25maWcuRW5hYmxlRW1vamlQaWNrZXIgPT09ICd0cnVlJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFRleHQ9JydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbElkPXt0aGlzLnByb3BzLmNoYW5uZWxJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSSFM9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcG92ZXJNZW50aW9uS2V5Q2xpY2s9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdyZXBseV90ZXh0Ym94J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9J3RleHRib3gnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9J2NyZWF0ZUNvbW1lbnRDb250cm9scydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwb3N0LWJvZHlfX2FjdGlvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmlsZVVwbG9hZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Vtb2ppUGlja2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPE1zZ1R5cGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbElkPXt0aGlzLnByb3BzLmNoYW5uZWxJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElkPXt0aGlzLnByb3BzLnJvb3RJZH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Bvc3QtY3JlYXRlLWZvb3Rlcic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXthZGRCdXR0b25DbGFzc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17VXRpbHMubG9jYWxpemVNZXNzYWdlKCdjcmVhdGVfY29tbWVudC5jb21tZW50JywgJ0FkZCBDb21tZW50Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVTdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge3VwbG9hZHNJblByb2dyZXNzVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtwb3N0RXJyb3J9XG4gICAgICAgICAgICAgICAgICAgICAgICB7cHJldmlld31cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzZXJ2ZXJFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPFBvc3REZWxldGVkTW9kYWxcbiAgICAgICAgICAgICAgICAgICAgc2hvdz17dGhpcy5zdGF0ZS5zaG93UG9zdERlbGV0ZWRNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgb25IaWRlPXt0aGlzLmhpZGVQb3N0RGVsZXRlZE1vZGFsfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvY3JlYXRlX2NvbW1lbnQvY3JlYXRlX2NvbW1lbnQuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTtBQWhDQTtBQUNBO0FBZ0NBO0FBQ0E7QUFDQTs7O0FBU0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFVQTtBQXJCQTtBQXNCQTtBQUNBOzs7QUFvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQW1TQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBd0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBTUE7QUFDQTtBQUZBO0FBUEE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFDQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBVkE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFMQTtBQWpCQTtBQUpBO0FBOEJBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQW5DQTtBQWdEQTtBQUNBO0FBQ0E7QUFGQTtBQWpEQTtBQXVEQTs7O0FBdGtCQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTs7OztBQStCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFwYkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2511\n");

/***/ }),

/***/ 2512:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DateSeparator = function (_React$PureComponent) {\n    (0, _inherits3.default)(DateSeparator, _React$PureComponent);\n\n    function DateSeparator() {\n        (0, _classCallCheck3.default)(this, DateSeparator);\n        return (0, _possibleConstructorReturn3.default)(this, (DateSeparator.__proto__ || (0, _getPrototypeOf2.default)(DateSeparator)).apply(this, arguments));\n    }\n\n    (0, _createClass3.default)(DateSeparator, [{\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(\n                'div',\n                {\n                    className: 'date-separator'\n                },\n                _react2.default.createElement('hr', { className: 'separator__hr' }),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'separator__text' },\n                    _react2.default.createElement(_reactIntl.FormattedDate, {\n                        value: this.props.date,\n                        weekday: 'short',\n                        month: 'short',\n                        day: '2-digit',\n                        year: 'numeric'\n                    })\n                )\n            );\n        }\n    }]);\n    return DateSeparator;\n}(_react2.default.PureComponent); // Copyright (c) 2017-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nDateSeparator.propTypes = {\n\n    /*\n     * The date to display in the separator\n     */\n    date: _propTypes2.default.instanceOf(Date)\n};\nexports.default = DateSeparator;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3Bvc3Rfdmlldy9kYXRlX3NlcGFyYXRvci5qc3g/ZTA5NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTctcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtGb3JtYXR0ZWREYXRlfSBmcm9tICdyZWFjdC1pbnRsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0ZVNlcGFyYXRvciBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG5cbiAgICAgICAgLypcbiAgICAgICAgICogVGhlIGRhdGUgdG8gZGlzcGxheSBpbiB0aGUgc2VwYXJhdG9yXG4gICAgICAgICAqL1xuICAgICAgICBkYXRlOiBQcm9wVHlwZXMuaW5zdGFuY2VPZihEYXRlKVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2RhdGUtc2VwYXJhdG9yJ1xuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxociBjbGFzc05hbWU9J3NlcGFyYXRvcl9faHInLz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2VwYXJhdG9yX190ZXh0Jz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLmRhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5PSdzaG9ydCdcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vbnRoPSdzaG9ydCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRheT0nMi1kaWdpdCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXI9J251bWVyaWMnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy9wb3N0X3ZpZXcvZGF0ZV9zZXBhcmF0b3IuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBOzs7Ozs7Ozs7O0FBU0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBSkE7QUFlQTs7O0FBMUJBO0FBTkE7QUFDQTtBQUtBO0FBQ0E7QUFFQTs7O0FBR0E7QUFMQTtBQURBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2512\n");

/***/ }),

/***/ 2513:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _es = __webpack_require__(45);\n\nvar _post_actions = __webpack_require__(75);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _post_utils = __webpack_require__(97);\n\nvar PostUtils = _interopRequireWildcard(_post_utils);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _dot_menu = __webpack_require__(777);\n\nvar _dot_menu2 = _interopRequireDefault(_dot_menu);\n\nvar _emoji_picker_overlay = __webpack_require__(456);\n\nvar _emoji_picker_overlay2 = _interopRequireDefault(_emoji_picker_overlay);\n\nvar _file_attachment_list = __webpack_require__(778);\n\nvar _file_attachment_list2 = _interopRequireDefault(_file_attachment_list);\n\nvar _failed_post_options = __webpack_require__(822);\n\nvar _failed_post_options2 = _interopRequireDefault(_failed_post_options);\n\nvar _post_body_additional_content = __webpack_require__(785);\n\nvar _post_body_additional_content2 = _interopRequireDefault(_post_body_additional_content);\n\nvar _post_flag_icon = __webpack_require__(779);\n\nvar _post_flag_icon2 = _interopRequireDefault(_post_flag_icon);\n\nvar _post_message_view = __webpack_require__(780);\n\nvar _post_message_view2 = _interopRequireDefault(_post_message_view);\n\nvar _reaction_list = __webpack_require__(786);\n\nvar _reaction_list2 = _interopRequireDefault(_reaction_list);\n\nvar _profile_picture = __webpack_require__(185);\n\nvar _profile_picture2 = _interopRequireDefault(_profile_picture);\n\nvar _user_profile = __webpack_require__(460);\n\nvar _user_profile2 = _interopRequireDefault(_user_profile);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar RhsComment = function (_React$Component) {\n    (0, _inherits3.default)(RhsComment, _React$Component);\n\n    function RhsComment(props) {\n        (0, _classCallCheck3.default)(this, RhsComment);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (RhsComment.__proto__ || (0, _getPrototypeOf2.default)(RhsComment)).call(this, props));\n\n        _this.toggleEmojiPicker = function () {\n            var showEmojiPicker = !_this.state.showEmojiPicker;\n\n            _this.setState({\n                showEmojiPicker: showEmojiPicker,\n                dropdownOpened: showEmojiPicker\n            });\n        };\n\n        _this.getClassName = function (post, isSystemMessage) {\n            var className = 'post post--thread';\n\n            if (_this.props.currentUser.id === post.user_id) {\n                className += ' current--user';\n            }\n\n            if (isSystemMessage) {\n                className += ' post--system';\n            }\n\n            if (_this.props.compactDisplay) {\n                className += ' post--compact';\n            }\n\n            if (post.is_pinned) {\n                className += ' post--pinned';\n            }\n\n            if (_this.state.dropdownOpened) {\n                className += ' post--hovered';\n            }\n\n            return className;\n        };\n\n        _this.removePost = _this.removePost.bind(_this);\n        _this.reactEmojiClick = _this.reactEmojiClick.bind(_this);\n        _this.handleDropdownOpened = _this.handleDropdownOpened.bind(_this);\n\n        _this.state = {\n            currentTeamDisplayName: _team_store2.default.getCurrent().name,\n            width: '',\n            height: '',\n            showEmojiPicker: false,\n            dropdownOpened: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(RhsComment, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            window.addEventListener('resize', function () {\n                Utils.updateWindowDimensions(_this2);\n            });\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            var _this3 = this;\n\n            window.removeEventListener('resize', function () {\n                Utils.updateWindowDimensions(_this3);\n            });\n        }\n    }, {\n        key: 'removePost',\n        value: function removePost() {\n            this.props.removePost(this.props.post);\n        }\n    }, {\n        key: 'createRemovePostButton',\n        value: function createRemovePostButton() {\n            return _react2.default.createElement(\n                'button',\n                {\n                    className: 'post__remove theme color--link style--none',\n                    type: 'button',\n                    onClick: this.removePost\n                },\n                ''\n            );\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            if (nextProps.status !== this.props.status) {\n                return true;\n            }\n\n            if (nextProps.isBusy !== this.props.isBusy) {\n                return true;\n            }\n\n            if (nextProps.compactDisplay !== this.props.compactDisplay) {\n                return true;\n            }\n\n            if (nextProps.useMilitaryTime !== this.props.useMilitaryTime) {\n                return true;\n            }\n\n            if (nextProps.isFlagged !== this.props.isFlagged) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(nextProps.post, this.props.post)) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(nextProps.currentUser, this.props.currentUser)) {\n                return true;\n            }\n\n            if (this.state.showEmojiPicker !== nextState.showEmojiPicker) {\n                return true;\n            }\n\n            if (nextProps.lastPostCount !== this.props.lastPostCount) {\n                return true;\n            }\n\n            if (this.state.dropdownOpened !== nextState.dropdownOpened) {\n                return true;\n            }\n\n            if (this.props.previewCollapsed !== nextProps.previewCollapsed) {\n                return true;\n            }\n\n            return false;\n        }\n    }, {\n        key: 'timeTag',\n        value: function timeTag(post, timeOptions) {\n            var date = Utils.getDateForUnixTicks(post.create_at);\n\n            return _react2.default.createElement(\n                'time',\n                {\n                    className: 'post__time',\n                    dateTime: date.toISOString(),\n                    title: date\n                },\n                date.toLocaleString('en', timeOptions)\n            );\n        }\n    }, {\n        key: 'renderTimeTag',\n        value: function renderTimeTag(post, timeOptions) {\n            return Utils.isMobile() ? this.timeTag(post, timeOptions) : _react2.default.createElement(\n                _es.Link,\n                {\n                    to: '/' + this.state.currentTeamDisplayName + '/pl/' + post.id,\n                    target: '_blank',\n                    className: 'post__permalink'\n                },\n                this.timeTag(post, timeOptions)\n            );\n        }\n    }, {\n        key: 'reactEmojiClick',\n        value: function reactEmojiClick(emoji) {\n            this.setState({ showEmojiPicker: false });\n            var emojiName = emoji.name || emoji.aliases[0];\n            (0, _post_actions.addReaction)(this.props.post.channel_id, this.props.post.id, emojiName);\n            (0, _post_actions.emitEmojiPosted)(emojiName);\n            this.handleDropdownOpened(false);\n        }\n    }, {\n        key: 'handleDropdownOpened',\n        value: function handleDropdownOpened(isOpened) {\n            this.setState({\n                dropdownOpened: isOpened\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this4 = this;\n\n            var post = this.props.post;\n            var mattermostLogo = _constants2.default.MATTERMOST_ICON_SVG;\n\n            var idCount = -1;\n            if (this.props.lastPostCount >= 0 && this.props.lastPostCount < _constants2.default.TEST_ID_COUNT) {\n                idCount = this.props.lastPostCount;\n            }\n\n            var isEphemeral = Utils.isPostEphemeral(post);\n            var isSystemMessage = PostUtils.isSystemMessage(post);\n\n            var status = this.props.status;\n            if (post.props && post.props.from_webhook === 'true') {\n                status = null;\n            }\n\n            var botIndicator = void 0;\n            var userProfile = _react2.default.createElement(_user_profile2.default, {\n                user: this.props.user,\n                status: status,\n                isBusy: this.props.isBusy,\n                isRHS: true,\n                hasMention: true\n            });\n\n            var visibleMessage = void 0;\n            if (post.props && post.props.from_webhook) {\n                if (post.props.override_username && global.window.mm_config.EnablePostUsernameOverride === 'true') {\n                    userProfile = _react2.default.createElement(_user_profile2.default, {\n                        user: this.props.user,\n                        overwriteName: post.props.override_username,\n                        disablePopover: true\n                    });\n                } else {\n                    userProfile = _react2.default.createElement(_user_profile2.default, {\n                        user: this.props.user,\n                        disablePopover: true\n                    });\n                }\n\n                botIndicator = _react2.default.createElement(\n                    'div',\n                    { className: 'col col__name bot-indicator' },\n                    'BOT'\n                );\n            } else if (isSystemMessage) {\n                userProfile = _react2.default.createElement(_user_profile2.default, {\n                    user: {},\n                    overwriteName: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'post_info.system',\n                        defaultMessage: 'System'\n                    }),\n                    overwriteImage: _constants2.default.SYSTEM_MESSAGE_PROFILE_IMAGE,\n                    disablePopover: true\n                });\n\n                visibleMessage = _react2.default.createElement(\n                    'span',\n                    { className: 'post__visibility' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'post_info.message.visible',\n                        defaultMessage: '(Only visible to you)'\n                    })\n                );\n            }\n\n            var failedPostOptions = void 0;\n            var postClass = '';\n\n            if (post.failed) {\n                postClass += ' post-failed';\n                failedPostOptions = _react2.default.createElement(_failed_post_options2.default, { post: this.props.post });\n            }\n\n            if (PostUtils.isEdited(this.props.post)) {\n                postClass += ' post--edited';\n            }\n\n            var profilePic = _react2.default.createElement(_profile_picture2.default, {\n                src: PostUtils.getProfilePicSrcForPost(post, this.props.user),\n                status: status,\n                width: '36',\n                height: '36',\n                user: this.props.user,\n                isBusy: this.props.isBusy,\n                isRHS: true,\n                hasMention: true\n            });\n\n            if (post.props && post.props.from_webhook) {\n                profilePic = _react2.default.createElement(_profile_picture2.default, {\n                    src: PostUtils.getProfilePicSrcForPost(post, this.props.user),\n                    width: '36',\n                    height: '36'\n                });\n            }\n\n            if (isSystemMessage) {\n                profilePic = _react2.default.createElement('span', {\n                    className: 'icon',\n                    dangerouslySetInnerHTML: { __html: mattermostLogo }\n                });\n            }\n\n            if (this.props.compactDisplay) {\n                if (post.props && post.props.from_webhook) {\n                    profilePic = _react2.default.createElement(_profile_picture2.default, {\n                        src: ''\n                    });\n                } else {\n                    profilePic = _react2.default.createElement(_profile_picture2.default, {\n                        src: '',\n                        status: status,\n                        user: this.props.user,\n                        isBusy: this.props.isBusy,\n                        isRHS: true,\n                        hasMention: true\n                    });\n                }\n            }\n\n            var profilePicContainer = _react2.default.createElement(\n                'div',\n                { className: 'post__img' },\n                profilePic\n            );\n\n            var fileAttachment = null;\n            if (post.file_ids && post.file_ids.length > 0) {\n                fileAttachment = _react2.default.createElement(_file_attachment_list2.default, {\n                    post: post,\n                    compactDisplay: this.props.compactDisplay\n                });\n            }\n\n            var react = void 0;\n\n            if (!isEphemeral && !post.failed && !isSystemMessage && window.mm_config.EnableEmojiPicker === 'true') {\n                react = _react2.default.createElement(\n                    'span',\n                    null,\n                    _react2.default.createElement(_emoji_picker_overlay2.default, {\n                        show: this.state.showEmojiPicker,\n                        onHide: this.toggleEmojiPicker,\n                        target: function target() {\n                            return _this4.refs.dotMenu;\n                        },\n                        onEmojiClick: this.reactEmojiClick,\n                        rightOffset: 15,\n                        spaceRequiredAbove: 342,\n                        spaceRequiredBelow: 342\n                    }),\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            className: 'reacticon__container reaction color--link style--none',\n                            onClick: this.toggleEmojiPicker,\n                            ref: 'rhs_reacticon_' + post.id\n                        },\n                        _react2.default.createElement('span', {\n                            className: 'icon icon--emoji',\n                            dangerouslySetInnerHTML: { __html: _constants2.default.EMOJI_ICON_SVG }\n                        })\n                    )\n                );\n            }\n\n            var options = void 0;\n            if (isEphemeral) {\n                options = _react2.default.createElement(\n                    'div',\n                    { className: 'col col__remove' },\n                    this.createRemovePostButton()\n                );\n            } else if (!isSystemMessage) {\n                var dotMenu = _react2.default.createElement(_dot_menu2.default, {\n                    idPrefix: _constants2.default.RHS,\n                    idCount: idCount,\n                    post: this.props.post,\n                    isFlagged: this.props.isFlagged,\n                    handleDropdownOpened: this.handleDropdownOpened\n                });\n\n                options = _react2.default.createElement(\n                    'div',\n                    {\n                        ref: 'dotMenu',\n                        className: 'col col__reply'\n                    },\n                    dotMenu,\n                    react\n                );\n            }\n\n            var pinnedBadge = void 0;\n            if (post.is_pinned) {\n                pinnedBadge = _react2.default.createElement(\n                    'span',\n                    { className: 'post__pinned-badge' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'post_info.pinned',\n                        defaultMessage: 'Pinned'\n                    })\n                );\n            }\n\n            var timeOptions = {\n                hour: '2-digit',\n                minute: '2-digit',\n                hour12: !this.props.useMilitaryTime\n            };\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    ref: 'post_body_' + post.id,\n                    className: this.getClassName(post, isSystemMessage)\n                },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'post__content' },\n                    profilePicContainer,\n                    _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'post__header' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col col__name' },\n                                _react2.default.createElement(\n                                    'strong',\n                                    null,\n                                    userProfile\n                                )\n                            ),\n                            botIndicator,\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col' },\n                                this.renderTimeTag(post, timeOptions),\n                                pinnedBadge,\n                                _react2.default.createElement(_post_flag_icon2.default, {\n                                    idPrefix: 'rhsCommentFlag',\n                                    idCount: idCount,\n                                    postId: post.id,\n                                    isFlagged: this.props.isFlagged,\n                                    isEphemeral: isEphemeral\n                                }),\n                                visibleMessage\n                            ),\n                            options\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'post__body' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: postClass },\n                                failedPostOptions,\n                                _react2.default.createElement(\n                                    _post_body_additional_content2.default,\n                                    {\n                                        post: post,\n                                        previewCollapsed: this.props.previewCollapsed\n                                    },\n                                    _react2.default.createElement(_post_message_view2.default, {\n                                        post: post,\n                                        isRHS: true,\n                                        hasMention: true\n                                    })\n                                )\n                            ),\n                            fileAttachment,\n                            _react2.default.createElement(_reaction_list2.default, { post: post })\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return RhsComment;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nRhsComment.propTypes = {\n    post: _propTypes2.default.object,\n    lastPostCount: _propTypes2.default.number,\n    user: _propTypes2.default.object.isRequired,\n    currentUser: _propTypes2.default.object.isRequired,\n    compactDisplay: _propTypes2.default.bool,\n    useMilitaryTime: _propTypes2.default.bool.isRequired,\n    isFlagged: _propTypes2.default.bool,\n    status: _propTypes2.default.string,\n    isBusy: _propTypes2.default.bool,\n    removePost: _propTypes2.default.func.isRequired,\n    previewCollapsed: _propTypes2.default.string.isRequired\n};\nexports.default = RhsComment;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3Joc19jb21tZW50LmpzeD9mZmZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuaW1wb3J0IHtMaW5rfSBmcm9tICdyZWFjdC1yb3V0ZXIvZXM2JztcblxuaW1wb3J0IHthZGRSZWFjdGlvbiwgZW1pdEVtb2ppUG9zdGVkfSBmcm9tICdhY3Rpb25zL3Bvc3RfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IFRlYW1TdG9yZSBmcm9tICdzdG9yZXMvdGVhbV9zdG9yZS5qc3gnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuaW1wb3J0ICogYXMgUG9zdFV0aWxzIGZyb20gJ3V0aWxzL3Bvc3RfdXRpbHMuanN4JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCBEb3RNZW51IGZyb20gJ2NvbXBvbmVudHMvZG90X21lbnUnO1xuaW1wb3J0IEVtb2ppUGlja2VyT3ZlcmxheSBmcm9tICdjb21wb25lbnRzL2Vtb2ppX3BpY2tlci9lbW9qaV9waWNrZXJfb3ZlcmxheS5qc3gnO1xuaW1wb3J0IEZpbGVBdHRhY2htZW50TGlzdENvbnRhaW5lciBmcm9tICdjb21wb25lbnRzL2ZpbGVfYXR0YWNobWVudF9saXN0JztcbmltcG9ydCBGYWlsZWRQb3N0T3B0aW9ucyBmcm9tICdjb21wb25lbnRzL3Bvc3Rfdmlldy9mYWlsZWRfcG9zdF9vcHRpb25zJztcbmltcG9ydCBQb3N0Qm9keUFkZGl0aW9uYWxDb250ZW50IGZyb20gJ2NvbXBvbmVudHMvcG9zdF92aWV3L3Bvc3RfYm9keV9hZGRpdGlvbmFsX2NvbnRlbnQuanN4JztcbmltcG9ydCBQb3N0RmxhZ0ljb24gZnJvbSAnY29tcG9uZW50cy9wb3N0X3ZpZXcvcG9zdF9mbGFnX2ljb24uanN4JztcbmltcG9ydCBQb3N0TWVzc2FnZUNvbnRhaW5lciBmcm9tICdjb21wb25lbnRzL3Bvc3Rfdmlldy9wb3N0X21lc3NhZ2Vfdmlldyc7XG5pbXBvcnQgUmVhY3Rpb25MaXN0Q29udGFpbmVyIGZyb20gJ2NvbXBvbmVudHMvcG9zdF92aWV3L3JlYWN0aW9uX2xpc3QnO1xuaW1wb3J0IFByb2ZpbGVQaWN0dXJlIGZyb20gJ2NvbXBvbmVudHMvcHJvZmlsZV9waWN0dXJlLmpzeCc7XG5cbmltcG9ydCBVc2VyUHJvZmlsZSBmcm9tICcuL3VzZXJfcHJvZmlsZS5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSaHNDb21tZW50IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBwb3N0OiBQcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICBsYXN0UG9zdENvdW50OiBQcm9wVHlwZXMubnVtYmVyLFxuICAgICAgICB1c2VyOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgICAgIGN1cnJlbnRVc2VyOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgICAgIGNvbXBhY3REaXNwbGF5OiBQcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgdXNlTWlsaXRhcnlUaW1lOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgICAgICBpc0ZsYWdnZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICBzdGF0dXM6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIGlzQnVzeTogUHJvcFR5cGVzLmJvb2wsXG4gICAgICAgIHJlbW92ZVBvc3Q6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgICAgIHByZXZpZXdDb2xsYXBzZWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMucmVtb3ZlUG9zdCA9IHRoaXMucmVtb3ZlUG9zdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlYWN0RW1vamlDbGljayA9IHRoaXMucmVhY3RFbW9qaUNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlRHJvcGRvd25PcGVuZWQgPSB0aGlzLmhhbmRsZURyb3Bkb3duT3BlbmVkLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGN1cnJlbnRUZWFtRGlzcGxheU5hbWU6IFRlYW1TdG9yZS5nZXRDdXJyZW50KCkubmFtZSxcbiAgICAgICAgICAgIHdpZHRoOiAnJyxcbiAgICAgICAgICAgIGhlaWdodDogJycsXG4gICAgICAgICAgICBzaG93RW1vamlQaWNrZXI6IGZhbHNlLFxuICAgICAgICAgICAgZHJvcGRvd25PcGVuZWQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICAgICAgICBVdGlscy51cGRhdGVXaW5kb3dEaW1lbnNpb25zKHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgICAgICAgIFV0aWxzLnVwZGF0ZVdpbmRvd0RpbWVuc2lvbnModGhpcyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbW92ZVBvc3QoKSB7XG4gICAgICAgIHRoaXMucHJvcHMucmVtb3ZlUG9zdCh0aGlzLnByb3BzLnBvc3QpO1xuICAgIH1cblxuICAgIGNyZWF0ZVJlbW92ZVBvc3RCdXR0b24oKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwb3N0X19yZW1vdmUgdGhlbWUgY29sb3ItLWxpbmsgc3R5bGUtLW5vbmUnXG4gICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucmVtb3ZlUG9zdH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7J8OXJ31cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgICBpZiAobmV4dFByb3BzLnN0YXR1cyAhPT0gdGhpcy5wcm9wcy5zdGF0dXMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5leHRQcm9wcy5pc0J1c3kgIT09IHRoaXMucHJvcHMuaXNCdXN5KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXh0UHJvcHMuY29tcGFjdERpc3BsYXkgIT09IHRoaXMucHJvcHMuY29tcGFjdERpc3BsYXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5leHRQcm9wcy51c2VNaWxpdGFyeVRpbWUgIT09IHRoaXMucHJvcHMudXNlTWlsaXRhcnlUaW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXh0UHJvcHMuaXNGbGFnZ2VkICE9PSB0aGlzLnByb3BzLmlzRmxhZ2dlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIVV0aWxzLmFyZU9iamVjdHNFcXVhbChuZXh0UHJvcHMucG9zdCwgdGhpcy5wcm9wcy5wb3N0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIVV0aWxzLmFyZU9iamVjdHNFcXVhbChuZXh0UHJvcHMuY3VycmVudFVzZXIsIHRoaXMucHJvcHMuY3VycmVudFVzZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3dFbW9qaVBpY2tlciAhPT0gbmV4dFN0YXRlLnNob3dFbW9qaVBpY2tlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dFByb3BzLmxhc3RQb3N0Q291bnQgIT09IHRoaXMucHJvcHMubGFzdFBvc3RDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5kcm9wZG93bk9wZW5lZCAhPT0gbmV4dFN0YXRlLmRyb3Bkb3duT3BlbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnByZXZpZXdDb2xsYXBzZWQgIT09IG5leHRQcm9wcy5wcmV2aWV3Q29sbGFwc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0aW1lVGFnKHBvc3QsIHRpbWVPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBVdGlscy5nZXREYXRlRm9yVW5peFRpY2tzKHBvc3QuY3JlYXRlX2F0KTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHRpbWVcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3Bvc3RfX3RpbWUnXG4gICAgICAgICAgICAgICAgZGF0ZVRpbWU9e2RhdGUudG9JU09TdHJpbmcoKX1cbiAgICAgICAgICAgICAgICB0aXRsZT17ZGF0ZX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7ZGF0ZS50b0xvY2FsZVN0cmluZygnZW4nLCB0aW1lT3B0aW9ucyl9XG4gICAgICAgICAgICA8L3RpbWU+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmVuZGVyVGltZVRhZyhwb3N0LCB0aW1lT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gVXRpbHMuaXNNb2JpbGUoKSA/XG4gICAgICAgICAgICB0aGlzLnRpbWVUYWcocG9zdCwgdGltZU9wdGlvbnMpIDpcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICB0bz17YC8ke3RoaXMuc3RhdGUuY3VycmVudFRlYW1EaXNwbGF5TmFtZX0vcGwvJHtwb3N0LmlkfWB9XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldD0nX2JsYW5rJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3Bvc3RfX3Blcm1hbGluaydcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnRpbWVUYWcocG9zdCwgdGltZU9wdGlvbnMpfVxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICk7XG4gICAgfVxuXG4gICAgdG9nZ2xlRW1vamlQaWNrZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNob3dFbW9qaVBpY2tlciA9ICF0aGlzLnN0YXRlLnNob3dFbW9qaVBpY2tlcjtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3dFbW9qaVBpY2tlcixcbiAgICAgICAgICAgIGRyb3Bkb3duT3BlbmVkOiBzaG93RW1vamlQaWNrZXJcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVhY3RFbW9qaUNsaWNrKGVtb2ppKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dFbW9qaVBpY2tlcjogZmFsc2V9KTtcbiAgICAgICAgY29uc3QgZW1vamlOYW1lID0gZW1vamkubmFtZSB8fCBlbW9qaS5hbGlhc2VzWzBdO1xuICAgICAgICBhZGRSZWFjdGlvbih0aGlzLnByb3BzLnBvc3QuY2hhbm5lbF9pZCwgdGhpcy5wcm9wcy5wb3N0LmlkLCBlbW9qaU5hbWUpO1xuICAgICAgICBlbWl0RW1vamlQb3N0ZWQoZW1vamlOYW1lKTtcbiAgICAgICAgdGhpcy5oYW5kbGVEcm9wZG93bk9wZW5lZChmYWxzZSk7XG4gICAgfVxuXG4gICAgZ2V0Q2xhc3NOYW1lID0gKHBvc3QsIGlzU3lzdGVtTWVzc2FnZSkgPT4ge1xuICAgICAgICBsZXQgY2xhc3NOYW1lID0gJ3Bvc3QgcG9zdC0tdGhyZWFkJztcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jdXJyZW50VXNlci5pZCA9PT0gcG9zdC51c2VyX2lkKSB7XG4gICAgICAgICAgICBjbGFzc05hbWUgKz0gJyBjdXJyZW50LS11c2VyJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1N5c3RlbU1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSArPSAnIHBvc3QtLXN5c3RlbSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jb21wYWN0RGlzcGxheSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lICs9ICcgcG9zdC0tY29tcGFjdCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zdC5pc19waW5uZWQpIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSArPSAnIHBvc3QtLXBpbm5lZCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5kcm9wZG93bk9wZW5lZCkge1xuICAgICAgICAgICAgY2xhc3NOYW1lICs9ICcgcG9zdC0taG92ZXJlZCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2xhc3NOYW1lO1xuICAgIH1cblxuICAgIGhhbmRsZURyb3Bkb3duT3BlbmVkKGlzT3BlbmVkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZHJvcGRvd25PcGVuZWQ6IGlzT3BlbmVkXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgcG9zdCA9IHRoaXMucHJvcHMucG9zdDtcbiAgICAgICAgY29uc3QgbWF0dGVybW9zdExvZ28gPSBDb25zdGFudHMuTUFUVEVSTU9TVF9JQ09OX1NWRztcblxuICAgICAgICBsZXQgaWRDb3VudCA9IC0xO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5sYXN0UG9zdENvdW50ID49IDAgJiYgdGhpcy5wcm9wcy5sYXN0UG9zdENvdW50IDwgQ29uc3RhbnRzLlRFU1RfSURfQ09VTlQpIHtcbiAgICAgICAgICAgIGlkQ291bnQgPSB0aGlzLnByb3BzLmxhc3RQb3N0Q291bnQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc0VwaGVtZXJhbCA9IFV0aWxzLmlzUG9zdEVwaGVtZXJhbChwb3N0KTtcbiAgICAgICAgY29uc3QgaXNTeXN0ZW1NZXNzYWdlID0gUG9zdFV0aWxzLmlzU3lzdGVtTWVzc2FnZShwb3N0KTtcblxuICAgICAgICBsZXQgc3RhdHVzID0gdGhpcy5wcm9wcy5zdGF0dXM7XG4gICAgICAgIGlmIChwb3N0LnByb3BzICYmIHBvc3QucHJvcHMuZnJvbV93ZWJob29rID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIHN0YXR1cyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYm90SW5kaWNhdG9yO1xuICAgICAgICBsZXQgdXNlclByb2ZpbGUgPSAoXG4gICAgICAgICAgICA8VXNlclByb2ZpbGVcbiAgICAgICAgICAgICAgICB1c2VyPXt0aGlzLnByb3BzLnVzZXJ9XG4gICAgICAgICAgICAgICAgc3RhdHVzPXtzdGF0dXN9XG4gICAgICAgICAgICAgICAgaXNCdXN5PXt0aGlzLnByb3BzLmlzQnVzeX1cbiAgICAgICAgICAgICAgICBpc1JIUz17dHJ1ZX1cbiAgICAgICAgICAgICAgICBoYXNNZW50aW9uPXt0cnVlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgdmlzaWJsZU1lc3NhZ2U7XG4gICAgICAgIGlmIChwb3N0LnByb3BzICYmIHBvc3QucHJvcHMuZnJvbV93ZWJob29rKSB7XG4gICAgICAgICAgICBpZiAocG9zdC5wcm9wcy5vdmVycmlkZV91c2VybmFtZSAmJiBnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5FbmFibGVQb3N0VXNlcm5hbWVPdmVycmlkZSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgdXNlclByb2ZpbGUgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxVc2VyUHJvZmlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcj17dGhpcy5wcm9wcy51c2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcndyaXRlTmFtZT17cG9zdC5wcm9wcy5vdmVycmlkZV91c2VybmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVQb3BvdmVyPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVzZXJQcm9maWxlID0gKFxuICAgICAgICAgICAgICAgICAgICA8VXNlclByb2ZpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI9e3RoaXMucHJvcHMudXNlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVQb3BvdmVyPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJvdEluZGljYXRvciA9IDxkaXYgY2xhc3NOYW1lPSdjb2wgY29sX19uYW1lIGJvdC1pbmRpY2F0b3InPnsnQk9UJ308L2Rpdj47XG4gICAgICAgIH0gZWxzZSBpZiAoaXNTeXN0ZW1NZXNzYWdlKSB7XG4gICAgICAgICAgICB1c2VyUHJvZmlsZSA9IChcbiAgICAgICAgICAgICAgICA8VXNlclByb2ZpbGVcbiAgICAgICAgICAgICAgICAgICAgdXNlcj17e319XG4gICAgICAgICAgICAgICAgICAgIG92ZXJ3cml0ZU5hbWU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ncG9zdF9pbmZvLnN5c3RlbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU3lzdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvdmVyd3JpdGVJbWFnZT17Q29uc3RhbnRzLlNZU1RFTV9NRVNTQUdFX1BST0ZJTEVfSU1BR0V9XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVQb3BvdmVyPXt0cnVlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB2aXNpYmxlTWVzc2FnZSA9IChcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3Bvc3RfX3Zpc2liaWxpdHknPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3Bvc3RfaW5mby5tZXNzYWdlLnZpc2libGUnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nKE9ubHkgdmlzaWJsZSB0byB5b3UpJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZmFpbGVkUG9zdE9wdGlvbnM7XG4gICAgICAgIGxldCBwb3N0Q2xhc3MgPSAnJztcblxuICAgICAgICBpZiAocG9zdC5mYWlsZWQpIHtcbiAgICAgICAgICAgIHBvc3RDbGFzcyArPSAnIHBvc3QtZmFpbGVkJztcbiAgICAgICAgICAgIGZhaWxlZFBvc3RPcHRpb25zID0gPEZhaWxlZFBvc3RPcHRpb25zIHBvc3Q9e3RoaXMucHJvcHMucG9zdH0vPjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChQb3N0VXRpbHMuaXNFZGl0ZWQodGhpcy5wcm9wcy5wb3N0KSkge1xuICAgICAgICAgICAgcG9zdENsYXNzICs9ICcgcG9zdC0tZWRpdGVkJztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwcm9maWxlUGljID0gKFxuICAgICAgICAgICAgPFByb2ZpbGVQaWN0dXJlXG4gICAgICAgICAgICAgICAgc3JjPXtQb3N0VXRpbHMuZ2V0UHJvZmlsZVBpY1NyY0ZvclBvc3QocG9zdCwgdGhpcy5wcm9wcy51c2VyKX1cbiAgICAgICAgICAgICAgICBzdGF0dXM9e3N0YXR1c31cbiAgICAgICAgICAgICAgICB3aWR0aD0nMzYnXG4gICAgICAgICAgICAgICAgaGVpZ2h0PSczNidcbiAgICAgICAgICAgICAgICB1c2VyPXt0aGlzLnByb3BzLnVzZXJ9XG4gICAgICAgICAgICAgICAgaXNCdXN5PXt0aGlzLnByb3BzLmlzQnVzeX1cbiAgICAgICAgICAgICAgICBpc1JIUz17dHJ1ZX1cbiAgICAgICAgICAgICAgICBoYXNNZW50aW9uPXt0cnVlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAocG9zdC5wcm9wcyAmJiBwb3N0LnByb3BzLmZyb21fd2ViaG9vaykge1xuICAgICAgICAgICAgcHJvZmlsZVBpYyA9IChcbiAgICAgICAgICAgICAgICA8UHJvZmlsZVBpY3R1cmVcbiAgICAgICAgICAgICAgICAgICAgc3JjPXtQb3N0VXRpbHMuZ2V0UHJvZmlsZVBpY1NyY0ZvclBvc3QocG9zdCwgdGhpcy5wcm9wcy51c2VyKX1cbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9JzM2J1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9JzM2J1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzU3lzdGVtTWVzc2FnZSkge1xuICAgICAgICAgICAgcHJvZmlsZVBpYyA9IChcbiAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ljb24nXG4gICAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBtYXR0ZXJtb3N0TG9nb319XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jb21wYWN0RGlzcGxheSkge1xuICAgICAgICAgICAgaWYgKHBvc3QucHJvcHMgJiYgcG9zdC5wcm9wcy5mcm9tX3dlYmhvb2spIHtcbiAgICAgICAgICAgICAgICBwcm9maWxlUGljID0gKFxuICAgICAgICAgICAgICAgICAgICA8UHJvZmlsZVBpY3R1cmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYz0nJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb2ZpbGVQaWMgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxQcm9maWxlUGljdHVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjPScnXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM9e3N0YXR1c31cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI9e3RoaXMucHJvcHMudXNlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQnVzeT17dGhpcy5wcm9wcy5pc0J1c3l9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1JIUz17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01lbnRpb249e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb2ZpbGVQaWNDb250YWluZXIgPSAoPGRpdiBjbGFzc05hbWU9J3Bvc3RfX2ltZyc+e3Byb2ZpbGVQaWN9PC9kaXY+KTtcblxuICAgICAgICBsZXQgZmlsZUF0dGFjaG1lbnQgPSBudWxsO1xuICAgICAgICBpZiAocG9zdC5maWxlX2lkcyAmJiBwb3N0LmZpbGVfaWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZpbGVBdHRhY2htZW50ID0gKFxuICAgICAgICAgICAgICAgIDxGaWxlQXR0YWNobWVudExpc3RDb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgcG9zdD17cG9zdH1cbiAgICAgICAgICAgICAgICAgICAgY29tcGFjdERpc3BsYXk9e3RoaXMucHJvcHMuY29tcGFjdERpc3BsYXl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVhY3Q7XG5cbiAgICAgICAgaWYgKCFpc0VwaGVtZXJhbCAmJiAhcG9zdC5mYWlsZWQgJiYgIWlzU3lzdGVtTWVzc2FnZSAmJiB3aW5kb3cubW1fY29uZmlnLkVuYWJsZUVtb2ppUGlja2VyID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIHJlYWN0ID0gKFxuICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICA8RW1vamlQaWNrZXJPdmVybGF5XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3dFbW9qaVBpY2tlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uSGlkZT17dGhpcy50b2dnbGVFbW9qaVBpY2tlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD17KCkgPT4gdGhpcy5yZWZzLmRvdE1lbnV9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVtb2ppQ2xpY2s9e3RoaXMucmVhY3RFbW9qaUNsaWNrfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHRPZmZzZXQ9ezE1fVxuICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VSZXF1aXJlZEFib3ZlPXszNDJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFjZVJlcXVpcmVkQmVsb3c9ezM0Mn1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdyZWFjdGljb25fX2NvbnRhaW5lciByZWFjdGlvbiBjb2xvci0tbGluayBzdHlsZS0tbm9uZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRW1vamlQaWNrZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9eydyaHNfcmVhY3RpY29uXycgKyBwb3N0LmlkfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0naWNvbiBpY29uLS1lbW9qaSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogQ29uc3RhbnRzLkVNT0pJX0lDT05fU1ZHfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cblxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBvcHRpb25zO1xuICAgICAgICBpZiAoaXNFcGhlbWVyYWwpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbCBjb2xfX3JlbW92ZSc+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLmNyZWF0ZVJlbW92ZVBvc3RCdXR0b24oKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzU3lzdGVtTWVzc2FnZSkge1xuICAgICAgICAgICAgY29uc3QgZG90TWVudSA9IChcbiAgICAgICAgICAgICAgICA8RG90TWVudVxuICAgICAgICAgICAgICAgICAgICBpZFByZWZpeD17Q29uc3RhbnRzLlJIU31cbiAgICAgICAgICAgICAgICAgICAgaWRDb3VudD17aWRDb3VudH1cbiAgICAgICAgICAgICAgICAgICAgcG9zdD17dGhpcy5wcm9wcy5wb3N0fVxuICAgICAgICAgICAgICAgICAgICBpc0ZsYWdnZWQ9e3RoaXMucHJvcHMuaXNGbGFnZ2VkfVxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVEcm9wZG93bk9wZW5lZD17dGhpcy5oYW5kbGVEcm9wZG93bk9wZW5lZH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgb3B0aW9ucyA9IChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHJlZj0nZG90TWVudSdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdjb2wgY29sX19yZXBseSdcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkb3RNZW51fVxuICAgICAgICAgICAgICAgICAgICB7cmVhY3R9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHBpbm5lZEJhZGdlO1xuICAgICAgICBpZiAocG9zdC5pc19waW5uZWQpIHtcbiAgICAgICAgICAgIHBpbm5lZEJhZGdlID0gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ncG9zdF9fcGlubmVkLWJhZGdlJz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdwb3N0X2luZm8ucGlubmVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1Bpbm5lZCdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGltZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICBob3VyOiAnMi1kaWdpdCcsXG4gICAgICAgICAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICAgICAgICAgIGhvdXIxMjogIXRoaXMucHJvcHMudXNlTWlsaXRhcnlUaW1lXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICByZWY9eydwb3N0X2JvZHlfJyArIHBvc3QuaWR9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLmdldENsYXNzTmFtZShwb3N0LCBpc1N5c3RlbU1lc3NhZ2UpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwb3N0X19jb250ZW50Jz5cbiAgICAgICAgICAgICAgICAgICAge3Byb2ZpbGVQaWNDb250YWluZXJ9XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncG9zdF9faGVhZGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sIGNvbF9fbmFtZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+e3VzZXJQcm9maWxlfTwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtib3RJbmRpY2F0b3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclRpbWVUYWcocG9zdCwgdGltZU9wdGlvbnMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cGlubmVkQmFkZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQb3N0RmxhZ0ljb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkUHJlZml4PXsncmhzQ29tbWVudEZsYWcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRDb3VudD17aWRDb3VudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RJZD17cG9zdC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRmxhZ2dlZD17dGhpcy5wcm9wcy5pc0ZsYWdnZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0VwaGVtZXJhbD17aXNFcGhlbWVyYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2aXNpYmxlTWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Bvc3RfX2JvZHknID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cG9zdENsYXNzfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZhaWxlZFBvc3RPcHRpb25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UG9zdEJvZHlBZGRpdGlvbmFsQ29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdD17cG9zdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdDb2xsYXBzZWQ9e3RoaXMucHJvcHMucHJldmlld0NvbGxhcHNlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvc3RNZXNzYWdlQ29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdD17cG9zdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1JIUz17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNNZW50aW9uPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3N0Qm9keUFkZGl0aW9uYWxDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWxlQXR0YWNobWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVhY3Rpb25MaXN0Q29udGFpbmVyIHBvc3Q9e3Bvc3R9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3Joc19jb21tZW50LmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7Ozs7OztBQUNBOzs7QUFlQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUF3SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQS9IQTtBQXlJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9KQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBTkE7QUFhQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFRQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBUUE7OztBQUVBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBUUE7OztBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUE0QkE7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBVEE7QUFDQTtBQVlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQVdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBREE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVZBO0FBdUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQVFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFWQTtBQVlBO0FBakJBO0FBbUJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUpBO0FBRkE7QUFhQTtBQUNBO0FBZkE7QUFwQkE7QUFGQTtBQUpBO0FBK0NBOzs7QUF6Y0E7QUExQkE7QUFDQTtBQXlCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQURBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2513\n");

/***/ }),

/***/ 2514:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _global_actions = __webpack_require__(57);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _post_actions = __webpack_require__(75);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _app_dispatcher = __webpack_require__(36);\n\nvar _app_dispatcher2 = _interopRequireDefault(_app_dispatcher);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar ActionTypes = _constants2.default.ActionTypes;\n\nvar RhsHeaderPost = function (_React$Component) {\n    (0, _inherits3.default)(RhsHeaderPost, _React$Component);\n\n    function RhsHeaderPost(props) {\n        (0, _classCallCheck3.default)(this, RhsHeaderPost);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (RhsHeaderPost.__proto__ || (0, _getPrototypeOf2.default)(RhsHeaderPost)).call(this, props));\n\n        _this.handleClose = _this.handleClose.bind(_this);\n        _this.toggleSize = _this.toggleSize.bind(_this);\n        _this.handleBack = _this.handleBack.bind(_this);\n\n        _this.state = {};\n        return _this;\n    }\n\n    (0, _createClass3.default)(RhsHeaderPost, [{\n        key: 'handleClose',\n        value: function handleClose(e) {\n            e.preventDefault();\n            GlobalActions.emitCloseRightHandSide();\n            this.props.shrink();\n        }\n    }, {\n        key: 'toggleSize',\n        value: function toggleSize(e) {\n            e.preventDefault();\n            this.props.toggleSize();\n        }\n    }, {\n        key: 'handleBack',\n        value: function handleBack(e) {\n            e.preventDefault();\n\n            if (this.props.fromSearch || this.props.isWebrtc) {\n                _app_dispatcher2.default.handleServerAction({\n                    type: ActionTypes.RECEIVED_SEARCH_TERM,\n                    term: this.props.fromSearch,\n                    do_search: true,\n                    is_mention_search: this.props.isMentionSearch\n                });\n\n                _app_dispatcher2.default.handleServerAction({\n                    type: ActionTypes.RECEIVED_POST_SELECTED,\n                    postId: null,\n                    channelId: null\n                });\n            } else if (this.props.fromFlaggedPosts) {\n                (0, _post_actions.getFlaggedPosts)();\n            } else if (this.props.fromPinnedPosts) {\n                (0, _post_actions.getPinnedPosts)();\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var back = void 0;\n            var closeSidebarTooltip = _react2.default.createElement(\n                _reactBootstrap.Tooltip,\n                { id: 'closeSidebarTooltip' },\n                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'rhs_header.closeSidebarTooltip',\n                    defaultMessage: 'Close Sidebar'\n                })\n            );\n\n            var backToResultsTooltip = void 0;\n            if (this.props.fromSearch) {\n                backToResultsTooltip = _react2.default.createElement(\n                    _reactBootstrap.Tooltip,\n                    { id: 'backToResultsTooltip' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'rhs_header.backToResultsTooltip',\n                        defaultMessage: 'Back to Search Results'\n                    })\n                );\n            } else if (this.props.fromFlaggedPosts) {\n                backToResultsTooltip = _react2.default.createElement(\n                    _reactBootstrap.Tooltip,\n                    { id: 'backToResultsTooltip' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'rhs_header.backToFlaggedTooltip',\n                        defaultMessage: 'Back to Flagged Posts'\n                    })\n                );\n            } else if (this.props.isWebrtc) {\n                backToResultsTooltip = _react2.default.createElement(\n                    _reactBootstrap.Tooltip,\n                    { id: 'backToResultsTooltip' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'rhs_header.backToCallTooltip',\n                        defaultMessage: 'Back to Call'\n                    })\n                );\n            } else if (this.props.fromPinnedPosts) {\n                backToResultsTooltip = _react2.default.createElement(\n                    _reactBootstrap.Tooltip,\n                    { id: 'backToResultsTooltip' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'rhs_header.backToPinnedTooltip',\n                        defaultMessage: 'Back to Pinned Posts'\n                    })\n                );\n            }\n\n            var expandSidebarTooltip = _react2.default.createElement(\n                _reactBootstrap.Tooltip,\n                { id: 'expandSidebarTooltip' },\n                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'rhs_header.expandSidebarTooltip',\n                    defaultMessage: 'Expand Sidebar'\n                })\n            );\n\n            var shrinkSidebarTooltip = _react2.default.createElement(\n                _reactBootstrap.Tooltip,\n                { id: 'shrinkSidebarTooltip' },\n                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'rhs_header.shrinkSidebarTooltip',\n                    defaultMessage: 'Shrink Sidebar'\n                })\n            );\n\n            if (this.props.fromSearch || this.props.fromFlaggedPosts || this.props.isWebrtc || this.props.fromPinnedPosts) {\n                back = _react2.default.createElement(\n                    'a',\n                    {\n                        href: '#',\n                        onClick: this.handleBack,\n                        className: 'sidebar--right__back'\n                    },\n                    _react2.default.createElement(\n                        _reactBootstrap.OverlayTrigger,\n                        {\n                            trigger: ['hover', 'focus'],\n                            delayShow: _constants2.default.OVERLAY_TIME_DELAY,\n                            placement: 'top',\n                            overlay: backToResultsTooltip\n                        },\n                        _react2.default.createElement('i', { className: 'fa fa-angle-left' })\n                    )\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'sidebar--right__header' },\n                _react2.default.createElement(\n                    'span',\n                    { className: 'sidebar--right__title' },\n                    back,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'rhs_header.details',\n                        defaultMessage: 'Message Details'\n                    })\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'pull-right' },\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            type: 'button',\n                            className: 'sidebar--right__expand',\n                            'aria-label': 'Expand',\n                            onClick: this.toggleSize\n                        },\n                        _react2.default.createElement(\n                            _reactBootstrap.OverlayTrigger,\n                            {\n                                trigger: ['hover', 'focus'],\n                                delayShow: _constants2.default.OVERLAY_TIME_DELAY,\n                                placement: 'top',\n                                overlay: expandSidebarTooltip\n                            },\n                            _react2.default.createElement('i', { className: 'fa fa-expand' })\n                        ),\n                        _react2.default.createElement(\n                            _reactBootstrap.OverlayTrigger,\n                            {\n                                trigger: ['hover', 'focus'],\n                                delayShow: _constants2.default.OVERLAY_TIME_DELAY,\n                                placement: 'top',\n                                overlay: shrinkSidebarTooltip\n                            },\n                            _react2.default.createElement('i', { className: 'fa fa-compress' })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            type: 'button',\n                            className: 'sidebar--right__close',\n                            'aria-label': 'Close',\n                            onClick: this.handleClose\n                        },\n                        _react2.default.createElement(\n                            _reactBootstrap.OverlayTrigger,\n                            {\n                                trigger: ['hover', 'focus'],\n                                delayShow: _constants2.default.OVERLAY_TIME_DELAY,\n                                placement: 'top',\n                                overlay: closeSidebarTooltip\n                            },\n                            _react2.default.createElement('i', { className: 'fa fa-sign-out' })\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return RhsHeaderPost;\n}(_react2.default.Component);\n\nexports.default = RhsHeaderPost;\n\n\nRhsHeaderPost.defaultProps = {\n    isMentionSearch: false,\n    fromSearch: ''\n};\nRhsHeaderPost.propTypes = {\n    isMentionSearch: _propTypes2.default.bool,\n    isWebrtc: _propTypes2.default.bool,\n    fromSearch: _propTypes2.default.string,\n    fromFlaggedPosts: _propTypes2.default.bool,\n    fromPinnedPosts: _propTypes2.default.bool,\n    toggleSize: _propTypes2.default.func,\n    shrink: _propTypes2.default.func\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3Joc19oZWFkZXJfcG9zdC5qc3g/ZmE2NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtPdmVybGF5VHJpZ2dlciwgVG9vbHRpcH0gZnJvbSAncmVhY3QtYm9vdHN0cmFwJztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCAqIGFzIEdsb2JhbEFjdGlvbnMgZnJvbSAnYWN0aW9ucy9nbG9iYWxfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IHtnZXRGbGFnZ2VkUG9zdHMsIGdldFBpbm5lZFBvc3RzfSBmcm9tICdhY3Rpb25zL3Bvc3RfYWN0aW9ucy5qc3gnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuXG5pbXBvcnQgQXBwRGlzcGF0Y2hlciBmcm9tICcuLi9kaXNwYXRjaGVyL2FwcF9kaXNwYXRjaGVyLmpzeCc7XG5cbmNvbnN0IEFjdGlvblR5cGVzID0gQ29uc3RhbnRzLkFjdGlvblR5cGVzO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSaHNIZWFkZXJQb3N0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5oYW5kbGVDbG9zZSA9IHRoaXMuaGFuZGxlQ2xvc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50b2dnbGVTaXplID0gdGhpcy50b2dnbGVTaXplLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQmFjayA9IHRoaXMuaGFuZGxlQmFjay5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7fTtcbiAgICB9XG5cbiAgICBoYW5kbGVDbG9zZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgR2xvYmFsQWN0aW9ucy5lbWl0Q2xvc2VSaWdodEhhbmRTaWRlKCk7XG4gICAgICAgIHRoaXMucHJvcHMuc2hyaW5rKCk7XG4gICAgfVxuXG4gICAgdG9nZ2xlU2l6ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5wcm9wcy50b2dnbGVTaXplKCk7XG4gICAgfVxuXG4gICAgaGFuZGxlQmFjayhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5mcm9tU2VhcmNoIHx8IHRoaXMucHJvcHMuaXNXZWJydGMpIHtcbiAgICAgICAgICAgIEFwcERpc3BhdGNoZXIuaGFuZGxlU2VydmVyQWN0aW9uKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBBY3Rpb25UeXBlcy5SRUNFSVZFRF9TRUFSQ0hfVEVSTSxcbiAgICAgICAgICAgICAgICB0ZXJtOiB0aGlzLnByb3BzLmZyb21TZWFyY2gsXG4gICAgICAgICAgICAgICAgZG9fc2VhcmNoOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzX21lbnRpb25fc2VhcmNoOiB0aGlzLnByb3BzLmlzTWVudGlvblNlYXJjaFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIEFwcERpc3BhdGNoZXIuaGFuZGxlU2VydmVyQWN0aW9uKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBBY3Rpb25UeXBlcy5SRUNFSVZFRF9QT1NUX1NFTEVDVEVELFxuICAgICAgICAgICAgICAgIHBvc3RJZDogbnVsbCxcbiAgICAgICAgICAgICAgICBjaGFubmVsSWQ6IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuZnJvbUZsYWdnZWRQb3N0cykge1xuICAgICAgICAgICAgZ2V0RmxhZ2dlZFBvc3RzKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5mcm9tUGlubmVkUG9zdHMpIHtcbiAgICAgICAgICAgIGdldFBpbm5lZFBvc3RzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBiYWNrO1xuICAgICAgICBjb25zdCBjbG9zZVNpZGViYXJUb29sdGlwID0gKFxuICAgICAgICAgICAgPFRvb2x0aXAgaWQ9J2Nsb3NlU2lkZWJhclRvb2x0aXAnPlxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSdyaHNfaGVhZGVyLmNsb3NlU2lkZWJhclRvb2x0aXAnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDbG9zZSBTaWRlYmFyJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IGJhY2tUb1Jlc3VsdHNUb29sdGlwO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5mcm9tU2VhcmNoKSB7XG4gICAgICAgICAgICBiYWNrVG9SZXN1bHRzVG9vbHRpcCA9IChcbiAgICAgICAgICAgICAgICA8VG9vbHRpcCBpZD0nYmFja1RvUmVzdWx0c1Rvb2x0aXAnPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3Joc19oZWFkZXIuYmFja1RvUmVzdWx0c1Rvb2x0aXAnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQmFjayB0byBTZWFyY2ggUmVzdWx0cydcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuZnJvbUZsYWdnZWRQb3N0cykge1xuICAgICAgICAgICAgYmFja1RvUmVzdWx0c1Rvb2x0aXAgPSAoXG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgaWQ9J2JhY2tUb1Jlc3VsdHNUb29sdGlwJz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdyaHNfaGVhZGVyLmJhY2tUb0ZsYWdnZWRUb29sdGlwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0JhY2sgdG8gRmxhZ2dlZCBQb3N0cydcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuaXNXZWJydGMpIHtcbiAgICAgICAgICAgIGJhY2tUb1Jlc3VsdHNUb29sdGlwID0gKFxuICAgICAgICAgICAgICAgIDxUb29sdGlwIGlkPSdiYWNrVG9SZXN1bHRzVG9vbHRpcCc+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ncmhzX2hlYWRlci5iYWNrVG9DYWxsVG9vbHRpcCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdCYWNrIHRvIENhbGwnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmZyb21QaW5uZWRQb3N0cykge1xuICAgICAgICAgICAgYmFja1RvUmVzdWx0c1Rvb2x0aXAgPSAoXG4gICAgICAgICAgICAgICAgPFRvb2x0aXAgaWQ9J2JhY2tUb1Jlc3VsdHNUb29sdGlwJz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdyaHNfaGVhZGVyLmJhY2tUb1Bpbm5lZFRvb2x0aXAnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQmFjayB0byBQaW5uZWQgUG9zdHMnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGV4cGFuZFNpZGViYXJUb29sdGlwID0gKFxuICAgICAgICAgICAgPFRvb2x0aXAgaWQ9J2V4cGFuZFNpZGViYXJUb29sdGlwJz5cbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ncmhzX2hlYWRlci5leHBhbmRTaWRlYmFyVG9vbHRpcCdcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0V4cGFuZCBTaWRlYmFyJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2hyaW5rU2lkZWJhclRvb2x0aXAgPSAoXG4gICAgICAgICAgICA8VG9vbHRpcCBpZD0nc2hyaW5rU2lkZWJhclRvb2x0aXAnPlxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSdyaHNfaGVhZGVyLnNocmlua1NpZGViYXJUb29sdGlwJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU2hyaW5rIFNpZGViYXInXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5mcm9tU2VhcmNoIHx8IHRoaXMucHJvcHMuZnJvbUZsYWdnZWRQb3N0cyB8fCB0aGlzLnByb3BzLmlzV2VicnRjIHx8IHRoaXMucHJvcHMuZnJvbVBpbm5lZFBvc3RzKSB7XG4gICAgICAgICAgICBiYWNrID0gKFxuICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgIGhyZWY9JyMnXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQmFja31cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzaWRlYmFyLS1yaWdodF9fYmFjaydcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxPdmVybGF5VHJpZ2dlclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcj17Wydob3ZlcicsICdmb2N1cyddfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXlTaG93PXtDb25zdGFudHMuT1ZFUkxBWV9USU1FX0RFTEFZfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PSd0b3AnXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5PXtiYWNrVG9SZXN1bHRzVG9vbHRpcH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1hbmdsZS1sZWZ0Jy8+XG4gICAgICAgICAgICAgICAgICAgIDwvT3ZlcmxheVRyaWdnZXI+XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2lkZWJhci0tcmlnaHRfX2hlYWRlcic+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzaWRlYmFyLS1yaWdodF9fdGl0bGUnPlxuICAgICAgICAgICAgICAgICAgICB7YmFja31cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdyaHNfaGVhZGVyLmRldGFpbHMnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTWVzc2FnZSBEZXRhaWxzJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHVsbC1yaWdodCc+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2lkZWJhci0tcmlnaHRfX2V4cGFuZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9J0V4cGFuZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlU2l6ZX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPE92ZXJsYXlUcmlnZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcj17Wydob3ZlcicsICdmb2N1cyddfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5U2hvdz17Q29uc3RhbnRzLk9WRVJMQVlfVElNRV9ERUxBWX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9J3RvcCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5PXtleHBhbmRTaWRlYmFyVG9vbHRpcH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLWV4cGFuZCcvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9PdmVybGF5VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxPdmVybGF5VHJpZ2dlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI9e1snaG92ZXInLCAnZm9jdXMnXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheVNob3c9e0NvbnN0YW50cy5PVkVSTEFZX1RJTUVfREVMQVl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PSd0b3AnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheT17c2hyaW5rU2lkZWJhclRvb2x0aXB9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1jb21wcmVzcycvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9PdmVybGF5VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2lkZWJhci0tcmlnaHRfX2Nsb3NlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD0nQ2xvc2UnXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsb3NlfVxuICAgICAgICAgICAgICAgICAgICA+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxPdmVybGF5VHJpZ2dlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI9e1snaG92ZXInLCAnZm9jdXMnXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheVNob3c9e0NvbnN0YW50cy5PVkVSTEFZX1RJTUVfREVMQVl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PSd0b3AnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheT17Y2xvc2VTaWRlYmFyVG9vbHRpcH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXNpZ24tb3V0Jy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L092ZXJsYXlUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuUmhzSGVhZGVyUG9zdC5kZWZhdWx0UHJvcHMgPSB7XG4gICAgaXNNZW50aW9uU2VhcmNoOiBmYWxzZSxcbiAgICBmcm9tU2VhcmNoOiAnJ1xufTtcblJoc0hlYWRlclBvc3QucHJvcFR5cGVzID0ge1xuICAgIGlzTWVudGlvblNlYXJjaDogUHJvcFR5cGVzLmJvb2wsXG4gICAgaXNXZWJydGM6IFByb3BUeXBlcy5ib29sLFxuICAgIGZyb21TZWFyY2g6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgZnJvbUZsYWdnZWRQb3N0czogUHJvcFR5cGVzLmJvb2wsXG4gICAgZnJvbVBpbm5lZFBvc3RzOiBQcm9wVHlwZXMuYm9vbCxcbiAgICB0b2dnbGVTaXplOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBzaHJpbms6IFByb3BUeXBlcy5mdW5jXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvcmhzX2hlYWRlcl9wb3N0LmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7Ozs7Ozs7QUFkQTtBQUNBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFRQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBQ0E7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBTkE7QUFMQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFOQTtBQWRBO0FBdUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFOQTtBQVBBO0FBeEJBO0FBUkE7QUFtREE7OztBQXhMQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBeUxBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2514\n");

/***/ }),

/***/ 2515:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _es = __webpack_require__(45);\n\nvar _post_actions = __webpack_require__(75);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _channel_store = __webpack_require__(34);\n\nvar _channel_store2 = _interopRequireDefault(_channel_store);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _post_utils = __webpack_require__(97);\n\nvar PostUtils = _interopRequireWildcard(_post_utils);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _dot_menu = __webpack_require__(777);\n\nvar _dot_menu2 = _interopRequireDefault(_dot_menu);\n\nvar _emoji_picker_overlay = __webpack_require__(456);\n\nvar _emoji_picker_overlay2 = _interopRequireDefault(_emoji_picker_overlay);\n\nvar _file_attachment_list = __webpack_require__(778);\n\nvar _file_attachment_list2 = _interopRequireDefault(_file_attachment_list);\n\nvar _post_body_additional_content = __webpack_require__(785);\n\nvar _post_body_additional_content2 = _interopRequireDefault(_post_body_additional_content);\n\nvar _post_flag_icon = __webpack_require__(779);\n\nvar _post_flag_icon2 = _interopRequireDefault(_post_flag_icon);\n\nvar _post_message_view = __webpack_require__(780);\n\nvar _post_message_view2 = _interopRequireDefault(_post_message_view);\n\nvar _reaction_list = __webpack_require__(786);\n\nvar _reaction_list2 = _interopRequireDefault(_reaction_list);\n\nvar _profile_picture = __webpack_require__(185);\n\nvar _profile_picture2 = _interopRequireDefault(_profile_picture);\n\nvar _user_profile = __webpack_require__(460);\n\nvar _user_profile2 = _interopRequireDefault(_user_profile);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar RhsRootPost = function (_React$Component) {\n    (0, _inherits3.default)(RhsRootPost, _React$Component);\n\n    function RhsRootPost(props) {\n        (0, _classCallCheck3.default)(this, RhsRootPost);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (RhsRootPost.__proto__ || (0, _getPrototypeOf2.default)(RhsRootPost)).call(this, props));\n\n        _this.toggleEmojiPicker = function () {\n            var showEmojiPicker = !_this.state.showEmojiPicker;\n\n            _this.setState({\n                showEmojiPicker: showEmojiPicker,\n                dropdownOpened: showEmojiPicker\n            });\n        };\n\n        _this.getClassName = function (post, isSystemMessage) {\n            var className = 'post post--root post--thread';\n            if (_user_store2.default.getCurrentId() === post.user_id) {\n                className += ' current--user';\n            }\n\n            if (isSystemMessage) {\n                className += ' post--system';\n            }\n\n            if (_this.props.compactDisplay) {\n                className += ' post--compact';\n            }\n\n            if (post.is_pinned) {\n                className += ' post--pinned';\n            }\n\n            if (_this.state.dropdownOpened) {\n                className += ' post--hovered';\n            }\n\n            return className;\n        };\n\n        _this.reactEmojiClick = _this.reactEmojiClick.bind(_this);\n        _this.handleDropdownOpened = _this.handleDropdownOpened.bind(_this);\n\n        _this.state = {\n            currentTeamDisplayName: _team_store2.default.getCurrent().name,\n            width: '',\n            height: '',\n            showEmojiPicker: false,\n            testStateObj: true,\n            dropdownOpened: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(RhsRootPost, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            window.addEventListener('resize', function () {\n                Utils.updateWindowDimensions(_this2);\n            });\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            var _this3 = this;\n\n            window.removeEventListener('resize', function () {\n                Utils.updateWindowDimensions(_this3);\n            });\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            if (nextProps.status !== this.props.status) {\n                return true;\n            }\n\n            if (nextProps.isBusy !== this.props.isBusy) {\n                return true;\n            }\n\n            if (nextProps.compactDisplay !== this.props.compactDisplay) {\n                return true;\n            }\n\n            if (nextProps.useMilitaryTime !== this.props.useMilitaryTime) {\n                return true;\n            }\n\n            if (nextProps.isFlagged !== this.props.isFlagged) {\n                return true;\n            }\n\n            if (nextProps.previewCollapsed !== this.props.previewCollapsed) {\n                return true;\n            }\n\n            if (nextProps.previewEnabled !== this.props.previewEnabled) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(nextProps.post, this.props.post)) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(nextProps.user, this.props.user)) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(nextProps.currentUser, this.props.currentUser)) {\n                return true;\n            }\n\n            if (this.state.showEmojiPicker !== nextState.showEmojiPicker) {\n                return true;\n            }\n\n            if (this.state.dropdownOpened !== nextState.dropdownOpened) {\n                return true;\n            }\n\n            return false;\n        }\n    }, {\n        key: 'timeTag',\n        value: function timeTag(post, timeOptions) {\n            var date = Utils.getDateForUnixTicks(post.create_at);\n\n            return _react2.default.createElement(\n                'time',\n                {\n                    className: 'post__time',\n                    dateTime: date.toISOString(),\n                    title: date\n                },\n                date.toLocaleString('en', timeOptions)\n            );\n        }\n    }, {\n        key: 'renderTimeTag',\n        value: function renderTimeTag(post, timeOptions) {\n            if (post.type === _constants2.default.PostTypes.FAKE_PARENT_DELETED) {\n                return null;\n            }\n\n            if (Utils.isMobile()) {\n                return this.timeTag(post, timeOptions);\n            }\n\n            return _react2.default.createElement(\n                _es.Link,\n                {\n                    to: '/' + this.state.currentTeamDisplayName + '/pl/' + post.id,\n                    target: '_blank',\n                    className: 'post__permalink'\n                },\n                this.timeTag(post, timeOptions)\n            );\n        }\n    }, {\n        key: 'reactEmojiClick',\n        value: function reactEmojiClick(emoji) {\n            this.setState({ showEmojiPicker: false });\n            var emojiName = emoji.name || emoji.aliases[0];\n            (0, _post_actions.addReaction)(this.props.post.channel_id, this.props.post.id, emojiName);\n            (0, _post_actions.emitEmojiPosted)(emojiName);\n            this.handleDropdownOpened(false);\n        }\n    }, {\n        key: 'handleDropdownOpened',\n        value: function handleDropdownOpened(isOpened) {\n            this.setState({\n                dropdownOpened: isOpened\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this4 = this;\n\n            var post = this.props.post;\n            var user = this.props.user;\n            var mattermostLogo = _constants2.default.MATTERMOST_ICON_SVG;\n            var channel = _channel_store2.default.get(post.channel_id);\n\n            var isEphemeral = Utils.isPostEphemeral(post);\n            var isSystemMessage = PostUtils.isSystemMessage(post);\n\n            var channelName;\n            if (channel) {\n                if (channel.type === 'D') {\n                    channelName = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'rhs_root.direct',\n                        defaultMessage: 'Direct Message'\n                    });\n                } else {\n                    channelName = channel.display_name;\n                }\n            }\n\n            var react = void 0;\n\n            if (!isEphemeral && !post.failed && !isSystemMessage && window.mm_config.EnableEmojiPicker === 'true') {\n                react = _react2.default.createElement(\n                    'span',\n                    null,\n                    _react2.default.createElement(_emoji_picker_overlay2.default, {\n                        show: this.state.showEmojiPicker,\n                        onHide: this.toggleEmojiPicker,\n                        target: function target() {\n                            return _this4.refs.dotMenu;\n                        },\n                        onEmojiClick: this.reactEmojiClick,\n                        rightOffset: 15,\n                        spaceRequiredAbove: 342,\n                        spaceRequiredBelow: 342\n                    }),\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            className: 'reacticon__container reaction color--link style--none',\n                            onClick: this.toggleEmojiPicker,\n                            ref: 'rhs_root_reacticon'\n                        },\n                        _react2.default.createElement('span', {\n                            className: 'icon icon--emoji',\n                            dangerouslySetInnerHTML: { __html: _constants2.default.EMOJI_ICON_SVG }\n                        })\n                    )\n                );\n            }\n\n            var fileAttachment = null;\n            if (post.file_ids && post.file_ids.length > 0) {\n                fileAttachment = _react2.default.createElement(_file_attachment_list2.default, {\n                    post: post,\n                    compactDisplay: this.props.compactDisplay\n                });\n            }\n\n            var userProfile = void 0;\n            var botIndicator = void 0;\n            if (isSystemMessage) {\n                userProfile = _react2.default.createElement(_user_profile2.default, {\n                    user: {},\n                    overwriteName: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'post_info.system',\n                        defaultMessage: 'System'\n                    }),\n                    overwriteImage: _constants2.default.SYSTEM_MESSAGE_PROFILE_IMAGE,\n                    disablePopover: true\n                });\n            } else if (post.props && post.props.from_webhook) {\n                if (post.props.override_username && global.window.mm_config.EnablePostUsernameOverride === 'true') {\n                    userProfile = _react2.default.createElement(_user_profile2.default, {\n                        user: user,\n                        overwriteName: post.props.override_username,\n                        disablePopover: true\n                    });\n                } else {\n                    userProfile = _react2.default.createElement(_user_profile2.default, {\n                        user: user,\n                        disablePopover: true\n                    });\n                }\n\n                botIndicator = _react2.default.createElement(\n                    'div',\n                    { className: 'col col__name bot-indicator' },\n                    'BOT'\n                );\n            } else {\n                userProfile = _react2.default.createElement(_user_profile2.default, {\n                    user: user,\n                    status: this.props.status,\n                    isBusy: this.props.isBusy,\n                    isRHS: true,\n                    hasMention: true\n                });\n            }\n\n            var status = this.props.status;\n            if (post.props && post.props.from_webhook === 'true') {\n                status = null;\n            }\n\n            var profilePic = void 0;\n            if (isSystemMessage) {\n                profilePic = _react2.default.createElement('span', {\n                    className: 'icon',\n                    dangerouslySetInnerHTML: { __html: mattermostLogo }\n                });\n            } else if (post.props && post.props.from_webhook) {\n                profilePic = _react2.default.createElement(_profile_picture2.default, {\n                    src: PostUtils.getProfilePicSrcForPost(post, user),\n                    width: '36',\n                    height: '36'\n                });\n            } else {\n                profilePic = _react2.default.createElement(_profile_picture2.default, {\n                    src: PostUtils.getProfilePicSrcForPost(post, user),\n                    status: status,\n                    width: '36',\n                    height: '36',\n                    user: this.props.user,\n                    isBusy: this.props.isBusy,\n                    isRHS: true,\n                    hasMention: true\n                });\n            }\n\n            if (this.props.compactDisplay) {\n                if (post.props && post.props.from_webhook) {\n                    profilePic = _react2.default.createElement(_profile_picture2.default, {\n                        src: ''\n                    });\n                } else {\n                    profilePic = _react2.default.createElement(_profile_picture2.default, {\n                        src: '',\n                        status: status,\n                        user: this.props.user,\n                        isBusy: this.props.isBusy,\n                        isRHS: true,\n                        hasMention: true\n                    });\n                }\n            }\n\n            var postClass = '';\n            if (PostUtils.isEdited(this.props.post)) {\n                postClass += ' post--edited';\n            }\n\n            var profilePicContainer = _react2.default.createElement(\n                'div',\n                { className: 'post__img' },\n                profilePic\n            );\n\n            var pinnedBadge = void 0;\n            if (post.is_pinned) {\n                pinnedBadge = _react2.default.createElement(\n                    'span',\n                    { className: 'post__pinned-badge' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'post_info.pinned',\n                        defaultMessage: 'Pinned'\n                    })\n                );\n            }\n\n            var timeOptions = {\n                hour: '2-digit',\n                minute: '2-digit',\n                hour12: !this.props.useMilitaryTime\n            };\n\n            var dotMenu = _react2.default.createElement(_dot_menu2.default, {\n                idPrefix: _constants2.default.RHS_ROOT,\n                post: this.props.post,\n                isFlagged: this.props.isFlagged,\n                handleDropdownOpened: this.handleDropdownOpened,\n                commentCount: this.props.commentCount\n            });\n\n            var dotMenuContainer = void 0;\n            if (this.props.post.type !== _constants2.default.PostTypes.FAKE_PARENT_DELETED) {\n                dotMenuContainer = _react2.default.createElement(\n                    'div',\n                    {\n                        ref: 'dotMenu',\n                        className: 'col col__reply'\n                    },\n                    dotMenu,\n                    react\n                );\n            }\n\n            var postFlagIcon = void 0;\n            if (this.props.post.type !== _constants2.default.PostTypes.FAKE_PARENT_DELETED) {\n                postFlagIcon = _react2.default.createElement(_post_flag_icon2.default, {\n                    idPrefix: 'rhsRootPostFlag',\n                    postId: post.id,\n                    isFlagged: this.props.isFlagged\n                });\n            }\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    id: 'thread--root',\n                    className: this.getClassName(post, isSystemMessage)\n                },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'post-right-channel__name' },\n                    channelName\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'post__content' },\n                    profilePicContainer,\n                    _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'post__header' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col__name' },\n                                userProfile\n                            ),\n                            botIndicator,\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col' },\n                                this.renderTimeTag(post, timeOptions),\n                                pinnedBadge,\n                                postFlagIcon\n                            ),\n                            dotMenuContainer\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'post__body' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: postClass },\n                                _react2.default.createElement(\n                                    _post_body_additional_content2.default,\n                                    {\n                                        post: post,\n                                        previewCollapsed: this.props.previewCollapsed,\n                                        previewEnabled: this.props.previewEnabled\n                                    },\n                                    _react2.default.createElement(_post_message_view2.default, {\n                                        post: post,\n                                        isRHS: true,\n                                        hasMention: true\n                                    })\n                                )\n                            ),\n                            fileAttachment,\n                            _react2.default.createElement(_reaction_list2.default, { post: post })\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return RhsRootPost;\n}(_react2.default.Component);\n\nRhsRootPost.propTypes = {\n    post: _propTypes2.default.object.isRequired,\n    user: _propTypes2.default.object.isRequired,\n    currentUser: _propTypes2.default.object.isRequired,\n    compactDisplay: _propTypes2.default.bool,\n    useMilitaryTime: _propTypes2.default.bool.isRequired,\n    commentCount: _propTypes2.default.number.isRequired,\n    isFlagged: _propTypes2.default.bool,\n    status: _propTypes2.default.string,\n    previewCollapsed: _propTypes2.default.string,\n    previewEnabled: _propTypes2.default.bool,\n    isBusy: _propTypes2.default.bool\n};\nRhsRootPost.defaultProps = {\n    commentCount: 0\n};\nexports.default = RhsRootPost;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3Joc19yb290X3Bvc3QuanN4PzgzNDkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5pbXBvcnQge0xpbmt9IGZyb20gJ3JlYWN0LXJvdXRlci9lczYnO1xuXG5pbXBvcnQge2FkZFJlYWN0aW9uLCBlbWl0RW1vamlQb3N0ZWR9IGZyb20gJ2FjdGlvbnMvcG9zdF9hY3Rpb25zLmpzeCc7XG5pbXBvcnQgVXNlclN0b3JlIGZyb20gJ3N0b3Jlcy91c2VyX3N0b3JlLmpzeCc7XG5pbXBvcnQgQ2hhbm5lbFN0b3JlIGZyb20gJ3N0b3Jlcy9jaGFubmVsX3N0b3JlLmpzeCc7XG5pbXBvcnQgVGVhbVN0b3JlIGZyb20gJ3N0b3Jlcy90ZWFtX3N0b3JlLmpzeCc7XG5cbmltcG9ydCBDb25zdGFudHMgZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5pbXBvcnQgKiBhcyBQb3N0VXRpbHMgZnJvbSAndXRpbHMvcG9zdF91dGlscy5qc3gnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAndXRpbHMvdXRpbHMuanN4JztcblxuaW1wb3J0IERvdE1lbnUgZnJvbSAnY29tcG9uZW50cy9kb3RfbWVudSc7XG5pbXBvcnQgRW1vamlQaWNrZXJPdmVybGF5IGZyb20gJ2NvbXBvbmVudHMvZW1vamlfcGlja2VyL2Vtb2ppX3BpY2tlcl9vdmVybGF5LmpzeCc7XG5pbXBvcnQgRmlsZUF0dGFjaG1lbnRMaXN0Q29udGFpbmVyIGZyb20gJ2NvbXBvbmVudHMvZmlsZV9hdHRhY2htZW50X2xpc3QnO1xuaW1wb3J0IFBvc3RCb2R5QWRkaXRpb25hbENvbnRlbnQgZnJvbSAnY29tcG9uZW50cy9wb3N0X3ZpZXcvcG9zdF9ib2R5X2FkZGl0aW9uYWxfY29udGVudC5qc3gnO1xuaW1wb3J0IFBvc3RGbGFnSWNvbiBmcm9tICdjb21wb25lbnRzL3Bvc3Rfdmlldy9wb3N0X2ZsYWdfaWNvbi5qc3gnO1xuaW1wb3J0IFBvc3RNZXNzYWdlQ29udGFpbmVyIGZyb20gJ2NvbXBvbmVudHMvcG9zdF92aWV3L3Bvc3RfbWVzc2FnZV92aWV3JztcbmltcG9ydCBSZWFjdGlvbkxpc3RDb250YWluZXIgZnJvbSAnY29tcG9uZW50cy9wb3N0X3ZpZXcvcmVhY3Rpb25fbGlzdCc7XG5pbXBvcnQgUHJvZmlsZVBpY3R1cmUgZnJvbSAnY29tcG9uZW50cy9wcm9maWxlX3BpY3R1cmUuanN4JztcblxuaW1wb3J0IFVzZXJQcm9maWxlIGZyb20gJy4vdXNlcl9wcm9maWxlLmpzeCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJoc1Jvb3RQb3N0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBwb3N0OiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgICAgIHVzZXI6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICAgICAgY3VycmVudFVzZXI6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICAgICAgY29tcGFjdERpc3BsYXk6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICB1c2VNaWxpdGFyeVRpbWU6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgICAgIGNvbW1lbnRDb3VudDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgICAgICBpc0ZsYWdnZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICBzdGF0dXM6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIHByZXZpZXdDb2xsYXBzZWQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIHByZXZpZXdFbmFibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgaXNCdXN5OiBQcm9wVHlwZXMuYm9vbFxuICAgIH1cblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGNvbW1lbnRDb3VudDogMFxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnJlYWN0RW1vamlDbGljayA9IHRoaXMucmVhY3RFbW9qaUNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlRHJvcGRvd25PcGVuZWQgPSB0aGlzLmhhbmRsZURyb3Bkb3duT3BlbmVkLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGN1cnJlbnRUZWFtRGlzcGxheU5hbWU6IFRlYW1TdG9yZS5nZXRDdXJyZW50KCkubmFtZSxcbiAgICAgICAgICAgIHdpZHRoOiAnJyxcbiAgICAgICAgICAgIGhlaWdodDogJycsXG4gICAgICAgICAgICBzaG93RW1vamlQaWNrZXI6IGZhbHNlLFxuICAgICAgICAgICAgdGVzdFN0YXRlT2JqOiB0cnVlLFxuICAgICAgICAgICAgZHJvcGRvd25PcGVuZWQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICAgICAgICBVdGlscy51cGRhdGVXaW5kb3dEaW1lbnNpb25zKHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgICAgICAgIFV0aWxzLnVwZGF0ZVdpbmRvd0RpbWVuc2lvbnModGhpcyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgICBpZiAobmV4dFByb3BzLnN0YXR1cyAhPT0gdGhpcy5wcm9wcy5zdGF0dXMpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5leHRQcm9wcy5pc0J1c3kgIT09IHRoaXMucHJvcHMuaXNCdXN5KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXh0UHJvcHMuY29tcGFjdERpc3BsYXkgIT09IHRoaXMucHJvcHMuY29tcGFjdERpc3BsYXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5leHRQcm9wcy51c2VNaWxpdGFyeVRpbWUgIT09IHRoaXMucHJvcHMudXNlTWlsaXRhcnlUaW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXh0UHJvcHMuaXNGbGFnZ2VkICE9PSB0aGlzLnByb3BzLmlzRmxhZ2dlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dFByb3BzLnByZXZpZXdDb2xsYXBzZWQgIT09IHRoaXMucHJvcHMucHJldmlld0NvbGxhcHNlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dFByb3BzLnByZXZpZXdFbmFibGVkICE9PSB0aGlzLnByb3BzLnByZXZpZXdFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghVXRpbHMuYXJlT2JqZWN0c0VxdWFsKG5leHRQcm9wcy5wb3N0LCB0aGlzLnByb3BzLnBvc3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghVXRpbHMuYXJlT2JqZWN0c0VxdWFsKG5leHRQcm9wcy51c2VyLCB0aGlzLnByb3BzLnVzZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghVXRpbHMuYXJlT2JqZWN0c0VxdWFsKG5leHRQcm9wcy5jdXJyZW50VXNlciwgdGhpcy5wcm9wcy5jdXJyZW50VXNlcikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2hvd0Vtb2ppUGlja2VyICE9PSBuZXh0U3RhdGUuc2hvd0Vtb2ppUGlja2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmRyb3Bkb3duT3BlbmVkICE9PSBuZXh0U3RhdGUuZHJvcGRvd25PcGVuZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRpbWVUYWcocG9zdCwgdGltZU9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IFV0aWxzLmdldERhdGVGb3JVbml4VGlja3MocG9zdC5jcmVhdGVfYXQpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dGltZVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncG9zdF9fdGltZSdcbiAgICAgICAgICAgICAgICBkYXRlVGltZT17ZGF0ZS50b0lTT1N0cmluZygpfVxuICAgICAgICAgICAgICAgIHRpdGxlPXtkYXRlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtkYXRlLnRvTG9jYWxlU3RyaW5nKCdlbicsIHRpbWVPcHRpb25zKX1cbiAgICAgICAgICAgIDwvdGltZT5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJUaW1lVGFnKHBvc3QsIHRpbWVPcHRpb25zKSB7XG4gICAgICAgIGlmIChwb3N0LnR5cGUgPT09IENvbnN0YW50cy5Qb3N0VHlwZXMuRkFLRV9QQVJFTlRfREVMRVRFRCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoVXRpbHMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGltZVRhZyhwb3N0LCB0aW1lT3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPExpbmtcbiAgICAgICAgICAgICAgICB0bz17YC8ke3RoaXMuc3RhdGUuY3VycmVudFRlYW1EaXNwbGF5TmFtZX0vcGwvJHtwb3N0LmlkfWB9XG4gICAgICAgICAgICAgICAgdGFyZ2V0PSdfYmxhbmsnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwb3N0X19wZXJtYWxpbmsnXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3RoaXMudGltZVRhZyhwb3N0LCB0aW1lT3B0aW9ucyl9XG4gICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgdG9nZ2xlRW1vamlQaWNrZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNob3dFbW9qaVBpY2tlciA9ICF0aGlzLnN0YXRlLnNob3dFbW9qaVBpY2tlcjtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3dFbW9qaVBpY2tlcixcbiAgICAgICAgICAgIGRyb3Bkb3duT3BlbmVkOiBzaG93RW1vamlQaWNrZXJcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVhY3RFbW9qaUNsaWNrKGVtb2ppKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dFbW9qaVBpY2tlcjogZmFsc2V9KTtcbiAgICAgICAgY29uc3QgZW1vamlOYW1lID0gZW1vamkubmFtZSB8fCBlbW9qaS5hbGlhc2VzWzBdO1xuICAgICAgICBhZGRSZWFjdGlvbih0aGlzLnByb3BzLnBvc3QuY2hhbm5lbF9pZCwgdGhpcy5wcm9wcy5wb3N0LmlkLCBlbW9qaU5hbWUpO1xuICAgICAgICBlbWl0RW1vamlQb3N0ZWQoZW1vamlOYW1lKTtcbiAgICAgICAgdGhpcy5oYW5kbGVEcm9wZG93bk9wZW5lZChmYWxzZSk7XG4gICAgfVxuXG4gICAgZ2V0Q2xhc3NOYW1lID0gKHBvc3QsIGlzU3lzdGVtTWVzc2FnZSkgPT4ge1xuICAgICAgICBsZXQgY2xhc3NOYW1lID0gJ3Bvc3QgcG9zdC0tcm9vdCBwb3N0LS10aHJlYWQnO1xuICAgICAgICBpZiAoVXNlclN0b3JlLmdldEN1cnJlbnRJZCgpID09PSBwb3N0LnVzZXJfaWQpIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZSArPSAnIGN1cnJlbnQtLXVzZXInO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzU3lzdGVtTWVzc2FnZSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lICs9ICcgcG9zdC0tc3lzdGVtJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNvbXBhY3REaXNwbGF5KSB7XG4gICAgICAgICAgICBjbGFzc05hbWUgKz0gJyBwb3N0LS1jb21wYWN0JztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3N0LmlzX3Bpbm5lZCkge1xuICAgICAgICAgICAgY2xhc3NOYW1lICs9ICcgcG9zdC0tcGlubmVkJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmRyb3Bkb3duT3BlbmVkKSB7XG4gICAgICAgICAgICBjbGFzc05hbWUgKz0gJyBwb3N0LS1ob3ZlcmVkJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbGFzc05hbWU7XG4gICAgfVxuXG4gICAgaGFuZGxlRHJvcGRvd25PcGVuZWQoaXNPcGVuZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBkcm9wZG93bk9wZW5lZDogaXNPcGVuZWRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBwb3N0ID0gdGhpcy5wcm9wcy5wb3N0O1xuICAgICAgICBjb25zdCB1c2VyID0gdGhpcy5wcm9wcy51c2VyO1xuICAgICAgICBjb25zdCBtYXR0ZXJtb3N0TG9nbyA9IENvbnN0YW50cy5NQVRURVJNT1NUX0lDT05fU1ZHO1xuICAgICAgICB2YXIgY2hhbm5lbCA9IENoYW5uZWxTdG9yZS5nZXQocG9zdC5jaGFubmVsX2lkKTtcblxuICAgICAgICBjb25zdCBpc0VwaGVtZXJhbCA9IFV0aWxzLmlzUG9zdEVwaGVtZXJhbChwb3N0KTtcbiAgICAgICAgY29uc3QgaXNTeXN0ZW1NZXNzYWdlID0gUG9zdFV0aWxzLmlzU3lzdGVtTWVzc2FnZShwb3N0KTtcblxuICAgICAgICB2YXIgY2hhbm5lbE5hbWU7XG4gICAgICAgIGlmIChjaGFubmVsKSB7XG4gICAgICAgICAgICBpZiAoY2hhbm5lbC50eXBlID09PSAnRCcpIHtcbiAgICAgICAgICAgICAgICBjaGFubmVsTmFtZSA9IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdyaHNfcm9vdC5kaXJlY3QnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRGlyZWN0IE1lc3NhZ2UnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hhbm5lbE5hbWUgPSBjaGFubmVsLmRpc3BsYXlfbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZWFjdDtcblxuICAgICAgICBpZiAoIWlzRXBoZW1lcmFsICYmICFwb3N0LmZhaWxlZCAmJiAhaXNTeXN0ZW1NZXNzYWdlICYmIHdpbmRvdy5tbV9jb25maWcuRW5hYmxlRW1vamlQaWNrZXIgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgcmVhY3QgPSAoXG4gICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxFbW9qaVBpY2tlck92ZXJsYXlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c9e3RoaXMuc3RhdGUuc2hvd0Vtb2ppUGlja2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25IaWRlPXt0aGlzLnRvZ2dsZUVtb2ppUGlja2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PXsoKSA9PiB0aGlzLnJlZnMuZG90TWVudX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRW1vamlDbGljaz17dGhpcy5yZWFjdEVtb2ppQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodE9mZnNldD17MTV9XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFjZVJlcXVpcmVkQWJvdmU9ezM0Mn1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYWNlUmVxdWlyZWRCZWxvdz17MzQyfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3JlYWN0aWNvbl9fY29udGFpbmVyIHJlYWN0aW9uIGNvbG9yLS1saW5rIHN0eWxlLS1ub25lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy50b2dnbGVFbW9qaVBpY2tlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0ncmhzX3Jvb3RfcmVhY3RpY29uJ1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0naWNvbiBpY29uLS1lbW9qaSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogQ29uc3RhbnRzLkVNT0pJX0lDT05fU1ZHfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cblxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmaWxlQXR0YWNobWVudCA9IG51bGw7XG4gICAgICAgIGlmIChwb3N0LmZpbGVfaWRzICYmIHBvc3QuZmlsZV9pZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZmlsZUF0dGFjaG1lbnQgPSAoXG4gICAgICAgICAgICAgICAgPEZpbGVBdHRhY2htZW50TGlzdENvbnRhaW5lclxuICAgICAgICAgICAgICAgICAgICBwb3N0PXtwb3N0fVxuICAgICAgICAgICAgICAgICAgICBjb21wYWN0RGlzcGxheT17dGhpcy5wcm9wcy5jb21wYWN0RGlzcGxheX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB1c2VyUHJvZmlsZTtcbiAgICAgICAgbGV0IGJvdEluZGljYXRvcjtcbiAgICAgICAgaWYgKGlzU3lzdGVtTWVzc2FnZSkge1xuICAgICAgICAgICAgdXNlclByb2ZpbGUgPSAoXG4gICAgICAgICAgICAgICAgPFVzZXJQcm9maWxlXG4gICAgICAgICAgICAgICAgICAgIHVzZXI9e3t9fVxuICAgICAgICAgICAgICAgICAgICBvdmVyd3JpdGVOYW1lPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3Bvc3RfaW5mby5zeXN0ZW0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1N5c3RlbSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb3ZlcndyaXRlSW1hZ2U9e0NvbnN0YW50cy5TWVNURU1fTUVTU0FHRV9QUk9GSUxFX0lNQUdFfVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlUG9wb3Zlcj17dHJ1ZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChwb3N0LnByb3BzICYmIHBvc3QucHJvcHMuZnJvbV93ZWJob29rKSB7XG4gICAgICAgICAgICBpZiAocG9zdC5wcm9wcy5vdmVycmlkZV91c2VybmFtZSAmJiBnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5FbmFibGVQb3N0VXNlcm5hbWVPdmVycmlkZSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgdXNlclByb2ZpbGUgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxVc2VyUHJvZmlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcj17dXNlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJ3cml0ZU5hbWU9e3Bvc3QucHJvcHMub3ZlcnJpZGVfdXNlcm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlUG9wb3Zlcj17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1c2VyUHJvZmlsZSA9IChcbiAgICAgICAgICAgICAgICAgICAgPFVzZXJQcm9maWxlXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyPXt1c2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZVBvcG92ZXI9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYm90SW5kaWNhdG9yID0gPGRpdiBjbGFzc05hbWU9J2NvbCBjb2xfX25hbWUgYm90LWluZGljYXRvcic+eydCT1QnfTwvZGl2PjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVzZXJQcm9maWxlID0gKFxuICAgICAgICAgICAgICAgIDxVc2VyUHJvZmlsZVxuICAgICAgICAgICAgICAgICAgICB1c2VyPXt1c2VyfVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM9e3RoaXMucHJvcHMuc3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICBpc0J1c3k9e3RoaXMucHJvcHMuaXNCdXN5fVxuICAgICAgICAgICAgICAgICAgICBpc1JIUz17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgaGFzTWVudGlvbj17dHJ1ZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzdGF0dXMgPSB0aGlzLnByb3BzLnN0YXR1cztcbiAgICAgICAgaWYgKHBvc3QucHJvcHMgJiYgcG9zdC5wcm9wcy5mcm9tX3dlYmhvb2sgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgc3RhdHVzID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwcm9maWxlUGljO1xuICAgICAgICBpZiAoaXNTeXN0ZW1NZXNzYWdlKSB7XG4gICAgICAgICAgICBwcm9maWxlUGljID0gKFxuICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0naWNvbidcbiAgICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IG1hdHRlcm1vc3RMb2dvfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChwb3N0LnByb3BzICYmIHBvc3QucHJvcHMuZnJvbV93ZWJob29rKSB7XG4gICAgICAgICAgICBwcm9maWxlUGljID0gKFxuICAgICAgICAgICAgICAgIDxQcm9maWxlUGljdHVyZVxuICAgICAgICAgICAgICAgICAgICBzcmM9e1Bvc3RVdGlscy5nZXRQcm9maWxlUGljU3JjRm9yUG9zdChwb3N0LCB1c2VyKX1cbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9JzM2J1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9JzM2J1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvZmlsZVBpYyA9IChcbiAgICAgICAgICAgICAgICA8UHJvZmlsZVBpY3R1cmVcbiAgICAgICAgICAgICAgICAgICAgc3JjPXtQb3N0VXRpbHMuZ2V0UHJvZmlsZVBpY1NyY0ZvclBvc3QocG9zdCwgdXNlcil9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cz17c3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICB3aWR0aD0nMzYnXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD0nMzYnXG4gICAgICAgICAgICAgICAgICAgIHVzZXI9e3RoaXMucHJvcHMudXNlcn1cbiAgICAgICAgICAgICAgICAgICAgaXNCdXN5PXt0aGlzLnByb3BzLmlzQnVzeX1cbiAgICAgICAgICAgICAgICAgICAgaXNSSFM9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIGhhc01lbnRpb249e3RydWV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jb21wYWN0RGlzcGxheSkge1xuICAgICAgICAgICAgaWYgKHBvc3QucHJvcHMgJiYgcG9zdC5wcm9wcy5mcm9tX3dlYmhvb2spIHtcbiAgICAgICAgICAgICAgICBwcm9maWxlUGljID0gKFxuICAgICAgICAgICAgICAgICAgICA8UHJvZmlsZVBpY3R1cmVcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYz0nJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb2ZpbGVQaWMgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxQcm9maWxlUGljdHVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjPScnXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM9e3N0YXR1c31cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI9e3RoaXMucHJvcHMudXNlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQnVzeT17dGhpcy5wcm9wcy5pc0J1c3l9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1JIUz17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01lbnRpb249e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwb3N0Q2xhc3MgPSAnJztcbiAgICAgICAgaWYgKFBvc3RVdGlscy5pc0VkaXRlZCh0aGlzLnByb3BzLnBvc3QpKSB7XG4gICAgICAgICAgICBwb3N0Q2xhc3MgKz0gJyBwb3N0LS1lZGl0ZWQnO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcHJvZmlsZVBpY0NvbnRhaW5lciA9ICg8ZGl2IGNsYXNzTmFtZT0ncG9zdF9faW1nJz57cHJvZmlsZVBpY308L2Rpdj4pO1xuXG4gICAgICAgIGxldCBwaW5uZWRCYWRnZTtcbiAgICAgICAgaWYgKHBvc3QuaXNfcGlubmVkKSB7XG4gICAgICAgICAgICBwaW5uZWRCYWRnZSA9IChcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3Bvc3RfX3Bpbm5lZC1iYWRnZSc+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ncG9zdF9pbmZvLnBpbm5lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdQaW5uZWQnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRpbWVPcHRpb25zID0ge1xuICAgICAgICAgICAgaG91cjogJzItZGlnaXQnLFxuICAgICAgICAgICAgbWludXRlOiAnMi1kaWdpdCcsXG4gICAgICAgICAgICBob3VyMTI6ICF0aGlzLnByb3BzLnVzZU1pbGl0YXJ5VGltZVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGRvdE1lbnUgPSAoXG4gICAgICAgICAgICA8RG90TWVudVxuICAgICAgICAgICAgICAgIGlkUHJlZml4PXtDb25zdGFudHMuUkhTX1JPT1R9XG4gICAgICAgICAgICAgICAgcG9zdD17dGhpcy5wcm9wcy5wb3N0fVxuICAgICAgICAgICAgICAgIGlzRmxhZ2dlZD17dGhpcy5wcm9wcy5pc0ZsYWdnZWR9XG4gICAgICAgICAgICAgICAgaGFuZGxlRHJvcGRvd25PcGVuZWQ9e3RoaXMuaGFuZGxlRHJvcGRvd25PcGVuZWR9XG4gICAgICAgICAgICAgICAgY29tbWVudENvdW50PXt0aGlzLnByb3BzLmNvbW1lbnRDb3VudH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IGRvdE1lbnVDb250YWluZXI7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnBvc3QudHlwZSAhPT0gQ29uc3RhbnRzLlBvc3RUeXBlcy5GQUtFX1BBUkVOVF9ERUxFVEVEKSB7XG4gICAgICAgICAgICBkb3RNZW51Q29udGFpbmVyID0gKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgcmVmPSdkb3RNZW51J1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2NvbCBjb2xfX3JlcGx5J1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2RvdE1lbnV9XG4gICAgICAgICAgICAgICAgICAgIHtyZWFjdH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcG9zdEZsYWdJY29uO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5wb3N0LnR5cGUgIT09IENvbnN0YW50cy5Qb3N0VHlwZXMuRkFLRV9QQVJFTlRfREVMRVRFRCkge1xuICAgICAgICAgICAgcG9zdEZsYWdJY29uID0gKFxuICAgICAgICAgICAgICAgIDxQb3N0RmxhZ0ljb25cbiAgICAgICAgICAgICAgICAgICAgaWRQcmVmaXg9eydyaHNSb290UG9zdEZsYWcnfVxuICAgICAgICAgICAgICAgICAgICBwb3N0SWQ9e3Bvc3QuaWR9XG4gICAgICAgICAgICAgICAgICAgIGlzRmxhZ2dlZD17dGhpcy5wcm9wcy5pc0ZsYWdnZWR9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGlkPSd0aHJlYWQtLXJvb3QnXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLmdldENsYXNzTmFtZShwb3N0LCBpc1N5c3RlbU1lc3NhZ2UpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwb3N0LXJpZ2h0LWNoYW5uZWxfX25hbWUnPntjaGFubmVsTmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncG9zdF9fY29udGVudCc+XG4gICAgICAgICAgICAgICAgICAgIHtwcm9maWxlUGljQ29udGFpbmVyfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Bvc3RfX2hlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbF9fbmFtZSc+e3VzZXJQcm9maWxlfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtib3RJbmRpY2F0b3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclRpbWVUYWcocG9zdCwgdGltZU9wdGlvbnMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cGlubmVkQmFkZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwb3N0RmxhZ0ljb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvdE1lbnVDb250YWluZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwb3N0X19ib2R5Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cG9zdENsYXNzfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvc3RCb2R5QWRkaXRpb25hbENvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3Q9e3Bvc3R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3Q29sbGFwc2VkPXt0aGlzLnByb3BzLnByZXZpZXdDb2xsYXBzZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3RW5hYmxlZD17dGhpcy5wcm9wcy5wcmV2aWV3RW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFBvc3RNZXNzYWdlQ29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdD17cG9zdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1JIUz17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNNZW50aW9uPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9Qb3N0Qm9keUFkZGl0aW9uYWxDb250ZW50PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWxlQXR0YWNobWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UmVhY3Rpb25MaXN0Q29udGFpbmVyIHBvc3Q9e3Bvc3R9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3Joc19yb290X3Bvc3QuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7Ozs7O0FBM0JBO0FBQ0E7QUFDQTtBQTBCQTs7O0FBbUJBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQW1IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBMUhBO0FBb0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBTkE7QUFjQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBUUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQVFBOzs7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBMkJBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVkE7QUF1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBVEE7QUFZQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFEQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBUkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFMQTtBQURBO0FBYUE7QUFDQTtBQWZBO0FBWEE7QUFGQTtBQUxBO0FBdUNBOzs7QUE5YkE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBREE7QUFnQkE7QUFEQTtBQWZBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2515\n");

/***/ }),

/***/ 2516:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _assign = __webpack_require__(42);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _getIterator2 = __webpack_require__(49);\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _map = __webpack_require__(159);\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _stringify = __webpack_require__(158);\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _channel_store = __webpack_require__(34);\n\nvar _channel_store2 = _interopRequireDefault(_channel_store);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _search_store = __webpack_require__(321);\n\nvar _search_store2 = _interopRequireDefault(_search_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _webrtc_store = __webpack_require__(454);\n\nvar _webrtc_store2 = _interopRequireDefault(_webrtc_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _search_results_header = __webpack_require__(2517);\n\nvar _search_results_header2 = _interopRequireDefault(_search_results_header);\n\nvar _search_results_item = __webpack_require__(2518);\n\nvar _search_results_item2 = _interopRequireDefault(_search_results_item);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Preferences = _constants2.default.Preferences; // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction getStateFromStores() {\n    var results = JSON.parse((0, _stringify2.default)(_search_store2.default.getSearchResults()));\n\n    var channels = new _map2.default();\n\n    if (results && results.order) {\n        var channelIds = results.order.map(function (postId) {\n            return results.posts[postId].channel_id;\n        });\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n            for (var _iterator = (0, _getIterator3.default)(channelIds), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var id = _step.value;\n\n                if (channels.has(id)) {\n                    continue;\n                }\n\n                channels.set(id, _channel_store2.default.get(id));\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n    }\n\n    return {\n        results: results,\n        channels: channels,\n        searchTerm: _search_store2.default.getSearchTerm(),\n        flaggedPosts: _preference_store2.default.getCategory(_constants2.default.Preferences.CATEGORY_FLAGGED_POST),\n        loading: _search_store2.default.isLoading()\n    };\n}\n\nvar SearchResults = function (_React$Component) {\n    (0, _inherits3.default)(SearchResults, _React$Component);\n\n    function SearchResults(props) {\n        (0, _classCallCheck3.default)(this, SearchResults);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SearchResults.__proto__ || (0, _getPrototypeOf2.default)(SearchResults)).call(this, props));\n\n        _this.mounted = false;\n\n        _this.onChange = _this.onChange.bind(_this);\n        _this.onUserChange = _this.onUserChange.bind(_this);\n        _this.onPreferenceChange = _this.onPreferenceChange.bind(_this);\n        _this.onBusy = _this.onBusy.bind(_this);\n        _this.resize = _this.resize.bind(_this);\n        _this.onPreferenceChange = _this.onPreferenceChange.bind(_this);\n        _this.onStatusChange = _this.onStatusChange.bind(_this);\n        _this.handleResize = _this.handleResize.bind(_this);\n\n        var state = getStateFromStores();\n        state.windowWidth = Utils.windowWidth();\n        state.windowHeight = Utils.windowHeight();\n        state.profiles = JSON.parse((0, _stringify2.default)(_user_store2.default.getProfiles()));\n        state.compactDisplay = _preference_store2.default.get(Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.MESSAGE_DISPLAY, Preferences.MESSAGE_DISPLAY_DEFAULT) === Preferences.MESSAGE_DISPLAY_COMPACT;\n        state.isBusy = _webrtc_store2.default.isBusy();\n        state.statuses = (0, _assign2.default)({}, _user_store2.default.getStatuses());\n        _this.state = state;\n        return _this;\n    }\n\n    (0, _createClass3.default)(SearchResults, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.mounted = true;\n\n            _search_store2.default.addSearchTermChangeListener(this.onSearchTermChange);\n            _search_store2.default.addSearchChangeListener(this.onChange);\n            _channel_store2.default.addChangeListener(this.onChange);\n            _preference_store2.default.addChangeListener(this.onPreferenceChange);\n            _user_store2.default.addChangeListener(this.onUserChange);\n            _user_store2.default.addStatusesChangeListener(this.onStatusChange);\n            _preference_store2.default.addChangeListener(this.onPreferenceChange);\n            _webrtc_store2.default.addBusyListener(this.onBusy);\n\n            this.resize();\n            window.addEventListener('resize', this.handleResize);\n            if (!Utils.isMobile()) {\n                (0, _jquery2.default)('.sidebar--right .search-items-container').perfectScrollbar();\n            }\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            if (!Utils.areObjectsEqual(nextState.statuses, this.state.statuses)) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(this.props, nextProps)) {\n                return true;\n            }\n\n            if (!Utils.areObjectsEqual(this.state, nextState)) {\n                return true;\n            }\n\n            if (nextState.compactDisplay !== this.state.compactDisplay) {\n                return true;\n            }\n\n            if (nextState.isBusy !== this.state.isBusy) {\n                return true;\n            }\n\n            return false;\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.mounted = false;\n\n            _search_store2.default.removeSearchTermChangeListener(this.onSearchTermChange);\n            _search_store2.default.removeSearchChangeListener(this.onChange);\n            _channel_store2.default.removeChangeListener(this.onChange);\n            _preference_store2.default.removeChangeListener(this.onPreferenceChange);\n            _user_store2.default.removeChangeListener(this.onUserChange);\n            _user_store2.default.removeStatusesChangeListener(this.onStatusChange);\n            _preference_store2.default.removeChangeListener(this.onPreferenceChange);\n            _webrtc_store2.default.removeBusyListener(this.onBusy);\n\n            window.removeEventListener('resize', this.handleResize);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps, prevState) {\n            if (this.state.searchTerm !== prevState.searchTerm) {\n                this.resize();\n            }\n        }\n    }, {\n        key: 'handleResize',\n        value: function handleResize() {\n            this.setState({\n                windowWidth: Utils.windowWidth(),\n                windowHeight: Utils.windowHeight()\n            });\n        }\n    }, {\n        key: 'onPreferenceChange',\n        value: function onPreferenceChange() {\n            this.setState({\n                compactDisplay: _preference_store2.default.get(Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.MESSAGE_DISPLAY, Preferences.MESSAGE_DISPLAY_DEFAULT) === Preferences.MESSAGE_DISPLAY_COMPACT,\n                flaggedPosts: _preference_store2.default.getCategory(_constants2.default.Preferences.CATEGORY_FLAGGED_POST)\n            });\n        }\n    }, {\n        key: 'onSearchTermChange',\n        value: function onSearchTermChange(doSearch) {\n            if (this.mounted && doSearch) {\n                this.setState({\n                    loading: true\n                });\n            }\n        }\n    }, {\n        key: 'onChange',\n        value: function onChange() {\n            if (this.mounted) {\n                this.setState(getStateFromStores());\n            }\n        }\n    }, {\n        key: 'onUserChange',\n        value: function onUserChange() {\n            this.setState({ profiles: JSON.parse((0, _stringify2.default)(_user_store2.default.getProfiles())) });\n        }\n    }, {\n        key: 'onBusy',\n        value: function onBusy(isBusy) {\n            this.setState({ isBusy: isBusy });\n        }\n    }, {\n        key: 'onStatusChange',\n        value: function onStatusChange() {\n            this.setState({ statuses: (0, _assign2.default)({}, _user_store2.default.getStatuses()) });\n        }\n    }, {\n        key: 'resize',\n        value: function resize() {\n            (0, _jquery2.default)('#search-items-container').scrollTop(0);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var results = this.state.results;\n            var noResults = !results || !results.order || !results.order.length;\n            var searchTerm = this.state.searchTerm;\n            var profiles = this.state.profiles || {};\n            var flagIcon = _constants2.default.FLAG_ICON_SVG;\n\n            var ctls = null;\n\n            if (this.state.loading) {\n                ctls = _react2.default.createElement(\n                    'div',\n                    { className: 'sidebar--right__subheader' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'sidebar--right__loading' },\n                        _react2.default.createElement('i', { className: 'fa fa-spinner fa-spin' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'search_header.loading',\n                            defaultMessage: 'Searching...'\n                        })\n                    )\n                );\n            } else if (this.props.isFlaggedPosts && noResults) {\n                var tips = [_react2.default.createElement(\n                    'li',\n                    { key: 'pin1' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.usageFlag1',\n                        defaultMessage: 'You haven\\'t flagged any messages yet.'\n                    })\n                ), _react2.default.createElement(\n                    'li',\n                    { key: 'pin2' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.usageFlag2',\n                        defaultMessage: 'You can add a flag to messages and comments by clicking the '\n                    }),\n                    _react2.default.createElement('span', {\n                        className: 'usage__icon',\n                        dangerouslySetInnerHTML: { __html: flagIcon }\n                    }),\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.usageFlag3',\n                        defaultMessage: ' icon next to the timestamp.'\n                    })\n                ), _react2.default.createElement(\n                    'li',\n                    { key: 'pin3' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.usageFlag4',\n                        defaultMessage: 'Flags are a way to mark messages for follow up. Your flags are personal, and cannot be seen by other users.'\n                    })\n                )];\n\n                if (global.window.mm_config.DataRetentionEnableMessageDeletion === 'true') {\n                    tips.push(_react2.default.createElement(\n                        'li',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'search_results.usage.dataRetention',\n                            defaultMessage: 'Only messages posted in the last {days} days are returned. Contact your System Administrator for more detail.',\n                            values: {\n                                days: global.window.mm_config.DataRetentionMessageRetentionDays\n                            }\n                        })\n                    ));\n                }\n\n                ctls = _react2.default.createElement(\n                    'div',\n                    { className: 'sidebar--right__subheader' },\n                    _react2.default.createElement(\n                        'ul',\n                        null,\n                        tips\n                    )\n                );\n            } else if (this.props.isPinnedPosts && noResults) {\n                var _tips = [_react2.default.createElement(\n                    'li',\n                    { key: 'pin1' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.usagePin1',\n                        defaultMessage: 'There are no pinned messages yet.'\n                    })\n                ), _react2.default.createElement(\n                    'li',\n                    { key: 'pin2' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.usagePin2',\n                        defaultMessage: 'All members of this channel can pin important or useful messages.'\n                    })\n                ), _react2.default.createElement(\n                    'li',\n                    { key: 'pin3' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.usagePin3',\n                        defaultMessage: 'Pinned messages are visible to all channel members.'\n                    })\n                ), _react2.default.createElement(\n                    'li',\n                    { key: 'pin4' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.usagePin4',\n                        defaultMessage: 'To pin a message: Go to the message that you want to pin and click [...] > \"Pin to channel\".'\n                    })\n                )];\n\n                if (global.window.mm_config.DataRetentionEnableMessageDeletion === 'true') {\n                    _tips.push(_react2.default.createElement(\n                        'li',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'search_results.usage.dataRetention',\n                            defaultMessage: 'Only messages posted in the last {days} days are returned. Contact your System Administrator for more detail.',\n                            values: {\n                                days: global.window.mm_config.DataRetentionMessageRetentionDays\n                            }\n                        })\n                    ));\n                }\n\n                ctls = _react2.default.createElement(\n                    'div',\n                    { className: 'sidebar--right__subheader' },\n                    _react2.default.createElement(\n                        'ul',\n                        null,\n                        _tips\n                    )\n                );\n            } else if (!searchTerm && noResults) {\n                var _tips2 = [_react2.default.createElement(\n                    'li',\n                    { key: 'quotes' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.usage.phrasesSuggestion',\n                        defaultMessage: 'Use {quotationMarks} to search for phrases',\n                        values: {\n                            quotationMarks: _react2.default.createElement(\n                                'b',\n                                null,\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'search_results.usage.phrasesSuggestion.quotationMarks',\n                                    defaultMessage: '\"quotation marks\"'\n                                })\n                            )\n                        }\n                    })\n                ), _react2.default.createElement(\n                    'li',\n                    { key: 'fromIn' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.usage.fromInSuggestion',\n                        defaultMessage: 'Use {fromUser} to find posts from specific users and {inChannel} to find posts in specific channels',\n                        values: {\n                            fromUser: _react2.default.createElement(\n                                'b',\n                                null,\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'search_results.usage.fromInSuggestion.fromUser',\n                                    defaultMessage: 'from:'\n                                })\n                            ),\n                            inChannel: _react2.default.createElement(\n                                'b',\n                                null,\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'search_results.usage.fromInSuggestion.inChannel',\n                                    defaultMessage: 'in:'\n                                })\n                            )\n                        }\n                    })\n                )];\n\n                ctls = _react2.default.createElement(\n                    'div',\n                    { className: 'sidebar--right__subheader' },\n                    _react2.default.createElement(\n                        'ul',\n                        null,\n                        _tips2\n                    )\n                );\n            } else if (noResults) {\n                var _tips3 = [_react2.default.createElement(\n                    'li',\n                    { key: 'partialPhrase' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.noResults.partialPhraseSuggestion',\n                        defaultMessage: 'If you\\'re searching a partial phrase (ex. searching \"rea\", looking for \"reach\" or \"reaction\"), append a * to your search term.'\n                    })\n                ), _react2.default.createElement(\n                    'li',\n                    { key: 'stopWords' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_results.noResults.stopWordsSuggestion',\n                        defaultMessage: 'Two letter searches and common words like \"this\", \"a\" and \"is\" won\\'t appear in search results due to the excessive results returned.'\n                    })\n                )];\n\n                if (global.window.mm_config.DataRetentionEnableMessageDeletion === 'true') {\n                    _tips3.push(_react2.default.createElement(\n                        'li',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'search_results.usage.dataRetention',\n                            defaultMessage: 'Only messages posted in the last {days} days are returned. Contact your System Administrator for more detail.',\n                            values: {\n                                days: global.window.mm_config.DataRetentionMessageRetentionDays\n                            }\n                        })\n                    ));\n                }\n\n                ctls = _react2.default.createElement(\n                    'div',\n                    { className: 'sidebar--right__subheader' },\n                    _react2.default.createElement(\n                        'h4',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'search_results.noResults',\n                            defaultMessage: 'No results found. Try again?'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'ul',\n                        null,\n                        _tips3\n                    )\n                );\n            } else {\n                ctls = results.order.map(function searchResults(id, idx, arr) {\n                    var post = results.posts[id];\n                    var profile = void 0;\n                    if (_user_store2.default.getCurrentId() === post.user_id) {\n                        profile = _user_store2.default.getCurrentUser();\n                    } else {\n                        profile = profiles[post.user_id];\n                    }\n\n                    var status = 'offline';\n                    if (this.state.statuses) {\n                        status = this.state.statuses[post.user_id] || 'offline';\n                    }\n\n                    var isFlagged = false;\n                    if (this.state.flaggedPosts) {\n                        isFlagged = this.state.flaggedPosts.get(post.id) != null;\n                    }\n\n                    var reverseCount = arr.length - idx - 1;\n\n                    return _react2.default.createElement(_search_results_item2.default, {\n                        key: post.id,\n                        channel: this.state.channels.get(post.channel_id),\n                        compactDisplay: this.state.compactDisplay,\n                        post: post,\n                        lastPostCount: reverseCount >= 0 && reverseCount < _constants2.default.TEST_ID_COUNT ? reverseCount : -1,\n                        user: profile,\n                        term: searchTerm,\n                        isMentionSearch: this.props.isMentionSearch,\n                        isFlaggedSearch: this.props.isFlaggedPosts,\n                        useMilitaryTime: this.props.useMilitaryTime,\n                        shrink: this.props.shrink,\n                        isFlagged: isFlagged,\n                        isBusy: this.state.isBusy,\n                        status: status\n                    });\n                }, this);\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'sidebar-right__body' },\n                _react2.default.createElement(_search_results_header2.default, {\n                    isMentionSearch: this.props.isMentionSearch,\n                    toggleSize: this.props.toggleSize,\n                    shrink: this.props.shrink,\n                    isFlaggedPosts: this.props.isFlaggedPosts,\n                    isPinnedPosts: this.props.isPinnedPosts,\n                    channelDisplayName: this.props.channelDisplayName,\n                    isLoading: this.state.loading\n                }),\n                _react2.default.createElement(\n                    'div',\n                    {\n                        id: 'search-items-container',\n                        className: 'search-items-container'\n                    },\n                    ctls\n                )\n            );\n        }\n    }]);\n    return SearchResults;\n}(_react2.default.Component);\n\nexports.default = SearchResults;\n\n\nSearchResults.propTypes = {\n    isMentionSearch: _propTypes2.default.bool,\n    useMilitaryTime: _propTypes2.default.bool.isRequired,\n    toggleSize: _propTypes2.default.func,\n    shrink: _propTypes2.default.func,\n    isFlaggedPosts: _propTypes2.default.bool,\n    isPinnedPosts: _propTypes2.default.bool,\n    channelDisplayName: _propTypes2.default.string.isRequired\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3NlYXJjaF9yZXN1bHRzLmpzeD9lYjdhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgQ2hhbm5lbFN0b3JlIGZyb20gJ3N0b3Jlcy9jaGFubmVsX3N0b3JlLmpzeCc7XG5pbXBvcnQgUHJlZmVyZW5jZVN0b3JlIGZyb20gJ3N0b3Jlcy9wcmVmZXJlbmNlX3N0b3JlLmpzeCc7XG5pbXBvcnQgU2VhcmNoU3RvcmUgZnJvbSAnc3RvcmVzL3NlYXJjaF9zdG9yZS5qc3gnO1xuaW1wb3J0IFVzZXJTdG9yZSBmcm9tICdzdG9yZXMvdXNlcl9zdG9yZS5qc3gnO1xuaW1wb3J0IFdlYnJ0Y1N0b3JlIGZyb20gJ3N0b3Jlcy93ZWJydGNfc3RvcmUuanN4JztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCBTZWFyY2hSZXN1bHRzSGVhZGVyIGZyb20gJy4vc2VhcmNoX3Jlc3VsdHNfaGVhZGVyLmpzeCc7XG5pbXBvcnQgU2VhcmNoUmVzdWx0c0l0ZW0gZnJvbSAnLi9zZWFyY2hfcmVzdWx0c19pdGVtLmpzeCc7XG5cbmNvbnN0IFByZWZlcmVuY2VzID0gQ29uc3RhbnRzLlByZWZlcmVuY2VzO1xuXG5mdW5jdGlvbiBnZXRTdGF0ZUZyb21TdG9yZXMoKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoU2VhcmNoU3RvcmUuZ2V0U2VhcmNoUmVzdWx0cygpKSk7XG5cbiAgICBjb25zdCBjaGFubmVscyA9IG5ldyBNYXAoKTtcblxuICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMub3JkZXIpIHtcbiAgICAgICAgY29uc3QgY2hhbm5lbElkcyA9IHJlc3VsdHMub3JkZXIubWFwKChwb3N0SWQpID0+IHJlc3VsdHMucG9zdHNbcG9zdElkXS5jaGFubmVsX2lkKTtcbiAgICAgICAgZm9yIChjb25zdCBpZCBvZiBjaGFubmVsSWRzKSB7XG4gICAgICAgICAgICBpZiAoY2hhbm5lbHMuaGFzKGlkKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaGFubmVscy5zZXQoaWQsIENoYW5uZWxTdG9yZS5nZXQoaWQpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3VsdHMsXG4gICAgICAgIGNoYW5uZWxzLFxuICAgICAgICBzZWFyY2hUZXJtOiBTZWFyY2hTdG9yZS5nZXRTZWFyY2hUZXJtKCksXG4gICAgICAgIGZsYWdnZWRQb3N0czogUHJlZmVyZW5jZVN0b3JlLmdldENhdGVnb3J5KENvbnN0YW50cy5QcmVmZXJlbmNlcy5DQVRFR09SWV9GTEFHR0VEX1BPU1QpLFxuICAgICAgICBsb2FkaW5nOiBTZWFyY2hTdG9yZS5pc0xvYWRpbmcoKVxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlYXJjaFJlc3VsdHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLm1vdW50ZWQgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uVXNlckNoYW5nZSA9IHRoaXMub25Vc2VyQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25QcmVmZXJlbmNlQ2hhbmdlID0gdGhpcy5vblByZWZlcmVuY2VDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkJ1c3kgPSB0aGlzLm9uQnVzeS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlc2l6ZSA9IHRoaXMucmVzaXplLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25QcmVmZXJlbmNlQ2hhbmdlID0gdGhpcy5vblByZWZlcmVuY2VDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblN0YXR1c0NoYW5nZSA9IHRoaXMub25TdGF0dXNDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVSZXNpemUgPSB0aGlzLmhhbmRsZVJlc2l6ZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGVGcm9tU3RvcmVzKCk7XG4gICAgICAgIHN0YXRlLndpbmRvd1dpZHRoID0gVXRpbHMud2luZG93V2lkdGgoKTtcbiAgICAgICAgc3RhdGUud2luZG93SGVpZ2h0ID0gVXRpbHMud2luZG93SGVpZ2h0KCk7XG4gICAgICAgIHN0YXRlLnByb2ZpbGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShVc2VyU3RvcmUuZ2V0UHJvZmlsZXMoKSkpO1xuICAgICAgICBzdGF0ZS5jb21wYWN0RGlzcGxheSA9IFByZWZlcmVuY2VTdG9yZS5nZXQoUHJlZmVyZW5jZXMuQ0FURUdPUllfRElTUExBWV9TRVRUSU5HUywgUHJlZmVyZW5jZXMuTUVTU0FHRV9ESVNQTEFZLCBQcmVmZXJlbmNlcy5NRVNTQUdFX0RJU1BMQVlfREVGQVVMVCkgPT09IFByZWZlcmVuY2VzLk1FU1NBR0VfRElTUExBWV9DT01QQUNUO1xuICAgICAgICBzdGF0ZS5pc0J1c3kgPSBXZWJydGNTdG9yZS5pc0J1c3koKTtcbiAgICAgICAgc3RhdGUuc3RhdHVzZXMgPSBPYmplY3QuYXNzaWduKHt9LCBVc2VyU3RvcmUuZ2V0U3RhdHVzZXMoKSk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcblxuICAgICAgICBTZWFyY2hTdG9yZS5hZGRTZWFyY2hUZXJtQ2hhbmdlTGlzdGVuZXIodGhpcy5vblNlYXJjaFRlcm1DaGFuZ2UpO1xuICAgICAgICBTZWFyY2hTdG9yZS5hZGRTZWFyY2hDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uQ2hhbmdlKTtcbiAgICAgICAgQ2hhbm5lbFN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMub25DaGFuZ2UpO1xuICAgICAgICBQcmVmZXJlbmNlU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vblByZWZlcmVuY2VDaGFuZ2UpO1xuICAgICAgICBVc2VyU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vblVzZXJDaGFuZ2UpO1xuICAgICAgICBVc2VyU3RvcmUuYWRkU3RhdHVzZXNDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uU3RhdHVzQ2hhbmdlKTtcbiAgICAgICAgUHJlZmVyZW5jZVN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMub25QcmVmZXJlbmNlQ2hhbmdlKTtcbiAgICAgICAgV2VicnRjU3RvcmUuYWRkQnVzeUxpc3RlbmVyKHRoaXMub25CdXN5KTtcblxuICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVSZXNpemUpO1xuICAgICAgICBpZiAoIVV0aWxzLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgICQoJy5zaWRlYmFyLS1yaWdodCAuc2VhcmNoLWl0ZW1zLWNvbnRhaW5lcicpLnBlcmZlY3RTY3JvbGxiYXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgICBpZiAoIVV0aWxzLmFyZU9iamVjdHNFcXVhbChuZXh0U3RhdGUuc3RhdHVzZXMsIHRoaXMuc3RhdGUuc3RhdHVzZXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghVXRpbHMuYXJlT2JqZWN0c0VxdWFsKHRoaXMucHJvcHMsIG5leHRQcm9wcykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFVdGlscy5hcmVPYmplY3RzRXF1YWwodGhpcy5zdGF0ZSwgbmV4dFN0YXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dFN0YXRlLmNvbXBhY3REaXNwbGF5ICE9PSB0aGlzLnN0YXRlLmNvbXBhY3REaXNwbGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXh0U3RhdGUuaXNCdXN5ICE9PSB0aGlzLnN0YXRlLmlzQnVzeSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMubW91bnRlZCA9IGZhbHNlO1xuXG4gICAgICAgIFNlYXJjaFN0b3JlLnJlbW92ZVNlYXJjaFRlcm1DaGFuZ2VMaXN0ZW5lcih0aGlzLm9uU2VhcmNoVGVybUNoYW5nZSk7XG4gICAgICAgIFNlYXJjaFN0b3JlLnJlbW92ZVNlYXJjaENoYW5nZUxpc3RlbmVyKHRoaXMub25DaGFuZ2UpO1xuICAgICAgICBDaGFubmVsU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkNoYW5nZSk7XG4gICAgICAgIFByZWZlcmVuY2VTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uUHJlZmVyZW5jZUNoYW5nZSk7XG4gICAgICAgIFVzZXJTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uVXNlckNoYW5nZSk7XG4gICAgICAgIFVzZXJTdG9yZS5yZW1vdmVTdGF0dXNlc0NoYW5nZUxpc3RlbmVyKHRoaXMub25TdGF0dXNDaGFuZ2UpO1xuICAgICAgICBQcmVmZXJlbmNlU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5vblByZWZlcmVuY2VDaGFuZ2UpO1xuICAgICAgICBXZWJydGNTdG9yZS5yZW1vdmVCdXN5TGlzdGVuZXIodGhpcy5vbkJ1c3kpO1xuXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmhhbmRsZVJlc2l6ZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlYXJjaFRlcm0gIT09IHByZXZTdGF0ZS5zZWFyY2hUZXJtKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlUmVzaXplKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHdpbmRvd1dpZHRoOiBVdGlscy53aW5kb3dXaWR0aCgpLFxuICAgICAgICAgICAgd2luZG93SGVpZ2h0OiBVdGlscy53aW5kb3dIZWlnaHQoKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvblByZWZlcmVuY2VDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgY29tcGFjdERpc3BsYXk6IFByZWZlcmVuY2VTdG9yZS5nZXQoUHJlZmVyZW5jZXMuQ0FURUdPUllfRElTUExBWV9TRVRUSU5HUywgUHJlZmVyZW5jZXMuTUVTU0FHRV9ESVNQTEFZLCBQcmVmZXJlbmNlcy5NRVNTQUdFX0RJU1BMQVlfREVGQVVMVCkgPT09IFByZWZlcmVuY2VzLk1FU1NBR0VfRElTUExBWV9DT01QQUNULFxuICAgICAgICAgICAgZmxhZ2dlZFBvc3RzOiBQcmVmZXJlbmNlU3RvcmUuZ2V0Q2F0ZWdvcnkoQ29uc3RhbnRzLlByZWZlcmVuY2VzLkNBVEVHT1JZX0ZMQUdHRURfUE9TVClcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25TZWFyY2hUZXJtQ2hhbmdlKGRvU2VhcmNoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdW50ZWQgJiYgZG9TZWFyY2gpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGxvYWRpbmc6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25DaGFuZ2UoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoZ2V0U3RhdGVGcm9tU3RvcmVzKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Vc2VyQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtwcm9maWxlczogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShVc2VyU3RvcmUuZ2V0UHJvZmlsZXMoKSkpfSk7XG4gICAgfVxuXG4gICAgb25CdXN5KGlzQnVzeSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc0J1c3l9KTtcbiAgICB9XG5cbiAgICBvblN0YXR1c0NoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c3RhdHVzZXM6IE9iamVjdC5hc3NpZ24oe30sIFVzZXJTdG9yZS5nZXRTdGF0dXNlcygpKX0pO1xuICAgIH1cblxuICAgIHJlc2l6ZSgpIHtcbiAgICAgICAgJCgnI3NlYXJjaC1pdGVtcy1jb250YWluZXInKS5zY3JvbGxUb3AoMCk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gdGhpcy5zdGF0ZS5yZXN1bHRzO1xuICAgICAgICBjb25zdCBub1Jlc3VsdHMgPSAoIXJlc3VsdHMgfHwgIXJlc3VsdHMub3JkZXIgfHwgIXJlc3VsdHMub3JkZXIubGVuZ3RoKTtcbiAgICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IHRoaXMuc3RhdGUuc2VhcmNoVGVybTtcbiAgICAgICAgY29uc3QgcHJvZmlsZXMgPSB0aGlzLnN0YXRlLnByb2ZpbGVzIHx8IHt9O1xuICAgICAgICBjb25zdCBmbGFnSWNvbiA9IENvbnN0YW50cy5GTEFHX0lDT05fU1ZHO1xuXG4gICAgICAgIGxldCBjdGxzID0gbnVsbDtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5sb2FkaW5nKSB7XG4gICAgICAgICAgICBjdGxzID1cbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2lkZWJhci0tcmlnaHRfX3N1YmhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzaWRlYmFyLS1yaWdodF9fbG9hZGluZyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXNwaW5uZXIgZmEtc3BpbicvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX2hlYWRlci5sb2FkaW5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTZWFyY2hpbmcuLi4nXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5pc0ZsYWdnZWRQb3N0cyAmJiBub1Jlc3VsdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRpcHMgPSBbXG4gICAgICAgICAgICAgICAgPGxpIGtleT0ncGluMSc+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX3Jlc3VsdHMudXNhZ2VGbGFnMSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPVwiWW91IGhhdmVuJ3QgZmxhZ2dlZCBhbnkgbWVzc2FnZXMgeWV0LlwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9saT4sXG4gICAgICAgICAgICAgICAgPGxpIGtleT0ncGluMic+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX3Jlc3VsdHMudXNhZ2VGbGFnMidcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdZb3UgY2FuIGFkZCBhIGZsYWcgdG8gbWVzc2FnZXMgYW5kIGNvbW1lbnRzIGJ5IGNsaWNraW5nIHRoZSAnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3VzYWdlX19pY29uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGZsYWdJY29ufX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzZWFyY2hfcmVzdWx0cy51c2FnZUZsYWczJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9JyBpY29uIG5leHQgdG8gdGhlIHRpbWVzdGFtcC4nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9saT4sXG4gICAgICAgICAgICAgICAgPGxpIGtleT0ncGluMyc+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX3Jlc3VsdHMudXNhZ2VGbGFnNCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdGbGFncyBhcmUgYSB3YXkgdG8gbWFyayBtZXNzYWdlcyBmb3IgZm9sbG93IHVwLiBZb3VyIGZsYWdzIGFyZSBwZXJzb25hbCwgYW5kIGNhbm5vdCBiZSBzZWVuIGJ5IG90aGVyIHVzZXJzLidcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkRhdGFSZXRlbnRpb25FbmFibGVNZXNzYWdlRGVsZXRpb24gPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIHRpcHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX3Jlc3VsdHMudXNhZ2UuZGF0YVJldGVudGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nT25seSBtZXNzYWdlcyBwb3N0ZWQgaW4gdGhlIGxhc3Qge2RheXN9IGRheXMgYXJlIHJldHVybmVkLiBDb250YWN0IHlvdXIgU3lzdGVtIEFkbWluaXN0cmF0b3IgZm9yIG1vcmUgZGV0YWlsLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5czogZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuRGF0YVJldGVudGlvbk1lc3NhZ2VSZXRlbnRpb25EYXlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3RscyA9IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2lkZWJhci0tcmlnaHRfX3N1YmhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aXBzfVxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmlzUGlubmVkUG9zdHMgJiYgbm9SZXN1bHRzKSB7XG4gICAgICAgICAgICBjb25zdCB0aXBzID0gW1xuICAgICAgICAgICAgICAgIDxsaSBrZXk9J3BpbjEnPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3NlYXJjaF9yZXN1bHRzLnVzYWdlUGluMSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUaGVyZSBhcmUgbm8gcGlubmVkIG1lc3NhZ2VzIHlldC4nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9saT4sXG4gICAgICAgICAgICAgICAgPGxpIGtleT0ncGluMic+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX3Jlc3VsdHMudXNhZ2VQaW4yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0FsbCBtZW1iZXJzIG9mIHRoaXMgY2hhbm5lbCBjYW4gcGluIGltcG9ydGFudCBvciB1c2VmdWwgbWVzc2FnZXMuJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvbGk+LFxuICAgICAgICAgICAgICAgIDxsaSBrZXk9J3BpbjMnPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3NlYXJjaF9yZXN1bHRzLnVzYWdlUGluMydcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdQaW5uZWQgbWVzc2FnZXMgYXJlIHZpc2libGUgdG8gYWxsIGNoYW5uZWwgbWVtYmVycy4nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9saT4sXG4gICAgICAgICAgICAgICAgPGxpIGtleT0ncGluNCc+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX3Jlc3VsdHMudXNhZ2VQaW40J1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9eydUbyBwaW4gYSBtZXNzYWdlOiBHbyB0byB0aGUgbWVzc2FnZSB0aGF0IHlvdSB3YW50IHRvIHBpbiBhbmQgY2xpY2sgWy4uLl0gPiBcIlBpbiB0byBjaGFubmVsXCIuJ31cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkRhdGFSZXRlbnRpb25FbmFibGVNZXNzYWdlRGVsZXRpb24gPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIHRpcHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX3Jlc3VsdHMudXNhZ2UuZGF0YVJldGVudGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nT25seSBtZXNzYWdlcyBwb3N0ZWQgaW4gdGhlIGxhc3Qge2RheXN9IGRheXMgYXJlIHJldHVybmVkLiBDb250YWN0IHlvdXIgU3lzdGVtIEFkbWluaXN0cmF0b3IgZm9yIG1vcmUgZGV0YWlsLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5czogZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuRGF0YVJldGVudGlvbk1lc3NhZ2VSZXRlbnRpb25EYXlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3RscyA9IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2lkZWJhci0tcmlnaHRfX3N1YmhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aXBzfVxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICghc2VhcmNoVGVybSAmJiBub1Jlc3VsdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRpcHMgPSBbXG4gICAgICAgICAgICAgICAgPGxpIGtleT0ncXVvdGVzJz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzZWFyY2hfcmVzdWx0cy51c2FnZS5waHJhc2VzU3VnZ2VzdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdVc2Uge3F1b3RhdGlvbk1hcmtzfSB0byBzZWFyY2ggZm9yIHBocmFzZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdW90YXRpb25NYXJrczogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Yj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3NlYXJjaF9yZXN1bHRzLnVzYWdlLnBocmFzZXNTdWdnZXN0aW9uLnF1b3RhdGlvbk1hcmtzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdcInF1b3RhdGlvbiBtYXJrc1wiJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9iPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9saT4sXG4gICAgICAgICAgICAgICAgPGxpIGtleT0nZnJvbUluJz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzZWFyY2hfcmVzdWx0cy51c2FnZS5mcm9tSW5TdWdnZXN0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1VzZSB7ZnJvbVVzZXJ9IHRvIGZpbmQgcG9zdHMgZnJvbSBzcGVjaWZpYyB1c2VycyBhbmQge2luQ2hhbm5lbH0gdG8gZmluZCBwb3N0cyBpbiBzcGVjaWZpYyBjaGFubmVscydcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21Vc2VyOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX3Jlc3VsdHMudXNhZ2UuZnJvbUluU3VnZ2VzdGlvbi5mcm9tVXNlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nZnJvbTonXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2I+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbkNoYW5uZWw6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzZWFyY2hfcmVzdWx0cy51c2FnZS5mcm9tSW5TdWdnZXN0aW9uLmluQ2hhbm5lbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0naW46J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9iPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGN0bHMgPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NpZGViYXItLXJpZ2h0X19zdWJoZWFkZXInPlxuICAgICAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGlwc31cbiAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAobm9SZXN1bHRzKSB7XG4gICAgICAgICAgICBjb25zdCB0aXBzID0gW1xuICAgICAgICAgICAgICAgIDxsaSBrZXk9J3BhcnRpYWxQaHJhc2UnPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3NlYXJjaF9yZXN1bHRzLm5vUmVzdWx0cy5wYXJ0aWFsUGhyYXNlU3VnZ2VzdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdJZiB5b3UmIzM5O3JlIHNlYXJjaGluZyBhIHBhcnRpYWwgcGhyYXNlIChleC4gc2VhcmNoaW5nIFwicmVhXCIsIGxvb2tpbmcgZm9yIFwicmVhY2hcIiBvciBcInJlYWN0aW9uXCIpLCBhcHBlbmQgYSAqIHRvIHlvdXIgc2VhcmNoIHRlcm0uJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvbGk+LFxuICAgICAgICAgICAgICAgIDxsaSBrZXk9J3N0b3BXb3Jkcyc+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX3Jlc3VsdHMubm9SZXN1bHRzLnN0b3BXb3Jkc1N1Z2dlc3Rpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVHdvIGxldHRlciBzZWFyY2hlcyBhbmQgY29tbW9uIHdvcmRzIGxpa2UgXCJ0aGlzXCIsIFwiYVwiIGFuZCBcImlzXCIgd29uJiMzOTt0IGFwcGVhciBpbiBzZWFyY2ggcmVzdWx0cyBkdWUgdG8gdGhlIGV4Y2Vzc2l2ZSByZXN1bHRzIHJldHVybmVkLidcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkRhdGFSZXRlbnRpb25FbmFibGVNZXNzYWdlRGVsZXRpb24gPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIHRpcHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX3Jlc3VsdHMudXNhZ2UuZGF0YVJldGVudGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nT25seSBtZXNzYWdlcyBwb3N0ZWQgaW4gdGhlIGxhc3Qge2RheXN9IGRheXMgYXJlIHJldHVybmVkLiBDb250YWN0IHlvdXIgU3lzdGVtIEFkbWluaXN0cmF0b3IgZm9yIG1vcmUgZGV0YWlsLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5czogZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuRGF0YVJldGVudGlvbk1lc3NhZ2VSZXRlbnRpb25EYXlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3RscyA9XG4gICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NpZGViYXItLXJpZ2h0X19zdWJoZWFkZXInPlxuICAgICAgICAgICAgICAgICAgICA8aDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzZWFyY2hfcmVzdWx0cy5ub1Jlc3VsdHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05vIHJlc3VsdHMgZm91bmQuIFRyeSBhZ2Fpbj8nXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGlwc31cbiAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdGxzID0gcmVzdWx0cy5vcmRlci5tYXAoZnVuY3Rpb24gc2VhcmNoUmVzdWx0cyhpZCwgaWR4LCBhcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwb3N0ID0gcmVzdWx0cy5wb3N0c1tpZF07XG4gICAgICAgICAgICAgICAgbGV0IHByb2ZpbGU7XG4gICAgICAgICAgICAgICAgaWYgKFVzZXJTdG9yZS5nZXRDdXJyZW50SWQoKSA9PT0gcG9zdC51c2VyX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2ZpbGUgPSBVc2VyU3RvcmUuZ2V0Q3VycmVudFVzZXIoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9maWxlID0gcHJvZmlsZXNbcG9zdC51c2VyX2lkXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgc3RhdHVzID0gJ29mZmxpbmUnO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnN0YXR1c2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHRoaXMuc3RhdGUuc3RhdHVzZXNbcG9zdC51c2VyX2lkXSB8fCAnb2ZmbGluZSc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IGlzRmxhZ2dlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmZsYWdnZWRQb3N0cykge1xuICAgICAgICAgICAgICAgICAgICBpc0ZsYWdnZWQgPSB0aGlzLnN0YXRlLmZsYWdnZWRQb3N0cy5nZXQocG9zdC5pZCkgIT0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZXZlcnNlQ291bnQgPSBhcnIubGVuZ3RoIC0gaWR4IC0gMTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxTZWFyY2hSZXN1bHRzSXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtwb3N0LmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbm5lbD17dGhpcy5zdGF0ZS5jaGFubmVscy5nZXQocG9zdC5jaGFubmVsX2lkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhY3REaXNwbGF5PXt0aGlzLnN0YXRlLmNvbXBhY3REaXNwbGF5fVxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdD17cG9zdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQb3N0Q291bnQ9eyhyZXZlcnNlQ291bnQgPj0gMCAmJiByZXZlcnNlQ291bnQgPCBDb25zdGFudHMuVEVTVF9JRF9DT1VOVCkgPyByZXZlcnNlQ291bnQgOiAtMX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI9e3Byb2ZpbGV9XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXJtPXtzZWFyY2hUZXJtfVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNNZW50aW9uU2VhcmNoPXt0aGlzLnByb3BzLmlzTWVudGlvblNlYXJjaH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRmxhZ2dlZFNlYXJjaD17dGhpcy5wcm9wcy5pc0ZsYWdnZWRQb3N0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZU1pbGl0YXJ5VGltZT17dGhpcy5wcm9wcy51c2VNaWxpdGFyeVRpbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICBzaHJpbms9e3RoaXMucHJvcHMuc2hyaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNGbGFnZ2VkPXtpc0ZsYWdnZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0J1c3k9e3RoaXMuc3RhdGUuaXNCdXN5fVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzPXtzdGF0dXN9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzaWRlYmFyLXJpZ2h0X19ib2R5Jz5cbiAgICAgICAgICAgICAgICA8U2VhcmNoUmVzdWx0c0hlYWRlclxuICAgICAgICAgICAgICAgICAgICBpc01lbnRpb25TZWFyY2g9e3RoaXMucHJvcHMuaXNNZW50aW9uU2VhcmNofVxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVTaXplPXt0aGlzLnByb3BzLnRvZ2dsZVNpemV9XG4gICAgICAgICAgICAgICAgICAgIHNocmluaz17dGhpcy5wcm9wcy5zaHJpbmt9XG4gICAgICAgICAgICAgICAgICAgIGlzRmxhZ2dlZFBvc3RzPXt0aGlzLnByb3BzLmlzRmxhZ2dlZFBvc3RzfVxuICAgICAgICAgICAgICAgICAgICBpc1Bpbm5lZFBvc3RzPXt0aGlzLnByb3BzLmlzUGlubmVkUG9zdHN9XG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWxEaXNwbGF5TmFtZT17dGhpcy5wcm9wcy5jaGFubmVsRGlzcGxheU5hbWV9XG4gICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZz17dGhpcy5zdGF0ZS5sb2FkaW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoLWl0ZW1zLWNvbnRhaW5lcidcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzZWFyY2gtaXRlbXMtY29udGFpbmVyJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2N0bHN9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblNlYXJjaFJlc3VsdHMucHJvcFR5cGVzID0ge1xuICAgIGlzTWVudGlvblNlYXJjaDogUHJvcFR5cGVzLmJvb2wsXG4gICAgdXNlTWlsaXRhcnlUaW1lOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIHRvZ2dsZVNpemU6IFByb3BUeXBlcy5mdW5jLFxuICAgIHNocmluazogUHJvcFR5cGVzLmZ1bmMsXG4gICAgaXNGbGFnZ2VkUG9zdHM6IFByb3BUeXBlcy5ib29sLFxuICAgIGlzUGlubmVkUG9zdHM6IFByb3BUeXBlcy5ib29sLFxuICAgIGNoYW5uZWxEaXNwbGF5TmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvc2VhcmNoX3Jlc3VsdHMuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7QUFwQkE7QUFDQTtBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBckJBO0FBc0JBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBREE7QUFVQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBVEE7QUFjQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQURBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQURBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBRkE7QUFIQTtBQURBO0FBZ0JBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBVkE7QUFIQTtBQURBO0FBQ0E7QUF5QkE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFEQTtBQVVBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVBBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFkQTtBQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBVkE7QUFrQkE7OztBQTVaQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBNlpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2516\n");

/***/ }),

/***/ 2517:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _global_actions = __webpack_require__(57);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar SearchResultsHeader = function (_React$Component) {\n    (0, _inherits3.default)(SearchResultsHeader, _React$Component);\n\n    function SearchResultsHeader(props) {\n        (0, _classCallCheck3.default)(this, SearchResultsHeader);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SearchResultsHeader.__proto__ || (0, _getPrototypeOf2.default)(SearchResultsHeader)).call(this, props));\n\n        _this.handleClose = _this.handleClose.bind(_this);\n        _this.toggleSize = _this.toggleSize.bind(_this);\n        return _this;\n    }\n\n    (0, _createClass3.default)(SearchResultsHeader, [{\n        key: 'handleClose',\n        value: function handleClose(e) {\n            e.preventDefault();\n\n            GlobalActions.toggleSideBarAction(false);\n\n            this.props.shrink();\n        }\n    }, {\n        key: 'toggleSize',\n        value: function toggleSize(e) {\n            e.preventDefault();\n            this.props.toggleSize();\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var title = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'search_header.results',\n                defaultMessage: 'Search Results'\n            });\n\n            var closeSidebarTooltip = _react2.default.createElement(\n                _reactBootstrap.Tooltip,\n                { id: 'closeSidebarTooltip' },\n                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'rhs_header.closeSidebarTooltip',\n                    defaultMessage: 'Close Sidebar'\n                })\n            );\n\n            var expandSidebarTooltip = _react2.default.createElement(\n                _reactBootstrap.Tooltip,\n                { id: 'expandSidebarTooltip' },\n                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'rhs_header.expandSidebarTooltip',\n                    defaultMessage: 'Expand Sidebar'\n                })\n            );\n\n            var shrinkSidebarTooltip = _react2.default.createElement(\n                _reactBootstrap.Tooltip,\n                { id: 'shrinkSidebarTooltip' },\n                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'rhs_header.shrinkSidebarTooltip',\n                    defaultMessage: 'Shrink Sidebar'\n                })\n            );\n\n            if (this.props.isMentionSearch) {\n                title = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'search_header.title2',\n                    defaultMessage: 'Recent Mentions'\n                });\n            } else if (this.props.isFlaggedPosts) {\n                title = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'search_header.title3',\n                    defaultMessage: 'Flagged Posts'\n                });\n            } else if (this.props.isPinnedPosts) {\n                title = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'search_header.title4',\n                    defaultMessage: 'Pinned posts in {channelDisplayName}',\n                    values: {\n                        channelDisplayName: this.props.channelDisplayName\n                    }\n                });\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'sidebar--right__header' },\n                _react2.default.createElement(\n                    'span',\n                    { className: 'sidebar--right__title' },\n                    title\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'pull-right' },\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            type: 'button',\n                            className: 'sidebar--right__expand',\n                            'aria-label': 'Expand',\n                            onClick: this.toggleSize\n                        },\n                        _react2.default.createElement(\n                            _reactBootstrap.OverlayTrigger,\n                            {\n                                trigger: ['hover', 'focus'],\n                                delayShow: _constants2.default.OVERLAY_TIME_DELAY,\n                                placement: 'top',\n                                overlay: expandSidebarTooltip\n                            },\n                            _react2.default.createElement('i', { className: 'fa fa-expand' })\n                        ),\n                        _react2.default.createElement(\n                            _reactBootstrap.OverlayTrigger,\n                            {\n                                trigger: ['hover', 'focus'],\n                                delayShow: _constants2.default.OVERLAY_TIME_DELAY,\n                                placement: 'top',\n                                overlay: shrinkSidebarTooltip\n                            },\n                            _react2.default.createElement('i', { className: 'fa fa-compress' })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            type: 'button',\n                            className: 'sidebar--right__close',\n                            'aria-label': 'Close',\n                            title: 'Close',\n                            onClick: this.handleClose\n                        },\n                        _react2.default.createElement(\n                            _reactBootstrap.OverlayTrigger,\n                            {\n                                trigger: ['hover', 'focus'],\n                                delayShow: _constants2.default.OVERLAY_TIME_DELAY,\n                                placement: 'top',\n                                overlay: closeSidebarTooltip\n                            },\n                            _react2.default.createElement('i', { className: 'fa fa-sign-out' })\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return SearchResultsHeader;\n}(_react2.default.Component);\n\nexports.default = SearchResultsHeader;\n\n\nSearchResultsHeader.propTypes = {\n    isMentionSearch: _propTypes2.default.bool,\n    toggleSize: _propTypes2.default.func,\n    shrink: _propTypes2.default.func,\n    isFlaggedPosts: _propTypes2.default.bool,\n    isPinnedPosts: _propTypes2.default.bool,\n    channelDisplayName: _propTypes2.default.string.isRequired,\n    isLoading: _propTypes2.default.bool.isRequired\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3NlYXJjaF9yZXN1bHRzX2hlYWRlci5qc3g/ZDkzOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtPdmVybGF5VHJpZ2dlciwgVG9vbHRpcH0gZnJvbSAncmVhY3QtYm9vdHN0cmFwJztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCAqIGFzIEdsb2JhbEFjdGlvbnMgZnJvbSAnYWN0aW9ucy9nbG9iYWxfYWN0aW9ucy5qc3gnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWFyY2hSZXN1bHRzSGVhZGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5oYW5kbGVDbG9zZSA9IHRoaXMuaGFuZGxlQ2xvc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50b2dnbGVTaXplID0gdGhpcy50b2dnbGVTaXplLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2xvc2UoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgR2xvYmFsQWN0aW9ucy50b2dnbGVTaWRlQmFyQWN0aW9uKGZhbHNlKTtcblxuICAgICAgICB0aGlzLnByb3BzLnNocmluaygpO1xuICAgIH1cblxuICAgIHRvZ2dsZVNpemUoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMucHJvcHMudG9nZ2xlU2l6ZSgpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIHRpdGxlID0gKFxuICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX2hlYWRlci5yZXN1bHRzJ1xuICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTZWFyY2ggUmVzdWx0cydcbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgY2xvc2VTaWRlYmFyVG9vbHRpcCA9IChcbiAgICAgICAgICAgIDxUb29sdGlwIGlkPSdjbG9zZVNpZGViYXJUb29sdGlwJz5cbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ncmhzX2hlYWRlci5jbG9zZVNpZGViYXJUb29sdGlwJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ2xvc2UgU2lkZWJhcidcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGV4cGFuZFNpZGViYXJUb29sdGlwID0gKFxuICAgICAgICAgICAgPFRvb2x0aXAgaWQ9J2V4cGFuZFNpZGViYXJUb29sdGlwJz5cbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ncmhzX2hlYWRlci5leHBhbmRTaWRlYmFyVG9vbHRpcCdcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0V4cGFuZCBTaWRlYmFyJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2hyaW5rU2lkZWJhclRvb2x0aXAgPSAoXG4gICAgICAgICAgICA8VG9vbHRpcCBpZD0nc2hyaW5rU2lkZWJhclRvb2x0aXAnPlxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSdyaHNfaGVhZGVyLnNocmlua1NpZGViYXJUb29sdGlwJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU2hyaW5rIFNpZGViYXInXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5pc01lbnRpb25TZWFyY2gpIHtcbiAgICAgICAgICAgIHRpdGxlID0gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSdzZWFyY2hfaGVhZGVyLnRpdGxlMidcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1JlY2VudCBNZW50aW9ucydcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmlzRmxhZ2dlZFBvc3RzKSB7XG4gICAgICAgICAgICB0aXRsZSA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX2hlYWRlci50aXRsZTMnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdGbGFnZ2VkIFBvc3RzJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuaXNQaW5uZWRQb3N0cykge1xuICAgICAgICAgICAgdGl0bGUgPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3NlYXJjaF9oZWFkZXIudGl0bGU0J1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nUGlubmVkIHBvc3RzIGluIHtjaGFubmVsRGlzcGxheU5hbWV9J1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5uZWxEaXNwbGF5TmFtZTogdGhpcy5wcm9wcy5jaGFubmVsRGlzcGxheU5hbWVcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2lkZWJhci0tcmlnaHRfX2hlYWRlcic+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdzaWRlYmFyLS1yaWdodF9fdGl0bGUnPnt0aXRsZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3B1bGwtcmlnaHQnPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3NpZGViYXItLXJpZ2h0X19leHBhbmQnXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSdFeHBhbmQnXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZVNpemV9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxPdmVybGF5VHJpZ2dlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI9e1snaG92ZXInLCAnZm9jdXMnXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxheVNob3c9e0NvbnN0YW50cy5PVkVSTEFZX1RJTUVfREVMQVl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PSd0b3AnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheT17ZXhwYW5kU2lkZWJhclRvb2x0aXB9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1leHBhbmQnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvT3ZlcmxheVRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8T3ZlcmxheVRyaWdnZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyPXtbJ2hvdmVyJywgJ2ZvY3VzJ119XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXlTaG93PXtDb25zdGFudHMuT1ZFUkxBWV9USU1FX0RFTEFZfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudD0ndG9wJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXk9e3Nocmlua1NpZGViYXJUb29sdGlwfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtY29tcHJlc3MnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvT3ZlcmxheVRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3NpZGViYXItLXJpZ2h0X19jbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9J0Nsb3NlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9J0Nsb3NlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVDbG9zZX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPE92ZXJsYXlUcmlnZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcj17Wydob3ZlcicsICdmb2N1cyddfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5U2hvdz17Q29uc3RhbnRzLk9WRVJMQVlfVElNRV9ERUxBWX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9J3RvcCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5PXtjbG9zZVNpZGViYXJUb29sdGlwfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtc2lnbi1vdXQnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvT3ZlcmxheVRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5TZWFyY2hSZXN1bHRzSGVhZGVyLnByb3BUeXBlcyA9IHtcbiAgICBpc01lbnRpb25TZWFyY2g6IFByb3BUeXBlcy5ib29sLFxuICAgIHRvZ2dsZVNpemU6IFByb3BUeXBlcy5mdW5jLFxuICAgIHNocmluazogUHJvcFR5cGVzLmZ1bmMsXG4gICAgaXNGbGFnZ2VkUG9zdHM6IFByb3BUeXBlcy5ib29sLFxuICAgIGlzUGlubmVkUG9zdHM6IFByb3BUeXBlcy5ib29sLFxuICAgIGNoYW5uZWxEaXNwbGF5TmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIGlzTG9hZGluZzogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZFxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3NlYXJjaF9yZXN1bHRzX2hlYWRlci5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFYQTtBQUNBO0FBQ0E7QUFVQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFKQTtBQUtBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFOQTtBQWRBO0FBdUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQU5BO0FBUEE7QUF4QkE7QUFGQTtBQTZDQTs7O0FBaElBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFpSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2517\n");

/***/ }),

/***/ 2518:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _es = __webpack_require__(45);\n\nvar _global_actions = __webpack_require__(57);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _post_message_view = __webpack_require__(780);\n\nvar _post_message_view2 = _interopRequireDefault(_post_message_view);\n\nvar _file_attachment_list = __webpack_require__(778);\n\nvar _file_attachment_list2 = _interopRequireDefault(_file_attachment_list);\n\nvar _comment_icon = __webpack_require__(823);\n\nvar _comment_icon2 = _interopRequireDefault(_comment_icon);\n\nvar _dot_menu = __webpack_require__(777);\n\nvar _dot_menu2 = _interopRequireDefault(_dot_menu);\n\nvar _post_flag_icon = __webpack_require__(779);\n\nvar _post_flag_icon2 = _interopRequireDefault(_post_flag_icon);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _post_utils = __webpack_require__(97);\n\nvar PostUtils = _interopRequireWildcard(_post_utils);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _profile_picture = __webpack_require__(185);\n\nvar _profile_picture2 = _interopRequireDefault(_profile_picture);\n\nvar _user_profile = __webpack_require__(460);\n\nvar _user_profile2 = _interopRequireDefault(_user_profile);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar SearchResultsItem = function (_React$Component) {\n    (0, _inherits3.default)(SearchResultsItem, _React$Component);\n\n    function SearchResultsItem(props) {\n        (0, _classCallCheck3.default)(this, SearchResultsItem);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SearchResultsItem.__proto__ || (0, _getPrototypeOf2.default)(SearchResultsItem)).call(this, props));\n\n        _this.handleDropdownOpened = function (isOpened) {\n            _this.setState({\n                dropdownOpened: isOpened\n            });\n        };\n\n        _this.getClassName = function () {\n            var className = 'post post--thread';\n\n            if (_this.props.compactDisplay) {\n                className += ' post--compact';\n            }\n\n            if (_this.state.dropdownOpened) {\n                className += ' post--hovered';\n            }\n\n            return className;\n        };\n\n        _this.handleFocusRHSClick = _this.handleFocusRHSClick.bind(_this);\n        _this.handleJumpClick = _this.handleJumpClick.bind(_this);\n        _this.handleDropdownOpened = _this.handleDropdownOpened.bind(_this);\n        _this.shrinkSidebar = _this.shrinkSidebar.bind(_this);\n\n        _this.state = {\n            currentTeamDisplayName: _team_store2.default.getCurrent().name,\n            width: '',\n            height: '',\n            dropdownOpened: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(SearchResultsItem, [{\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            if (!Utils.areObjectsEqual(nextState.post, this.props.post)) {\n                return true;\n            }\n\n            if (nextProps.isFlagged !== this.props.isFlagged) {\n                return true;\n            }\n\n            if (nextState.dropdownOpened !== this.state.dropdownOpened) {\n                return true;\n            }\n\n            return false;\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            window.addEventListener('resize', function () {\n                Utils.updateWindowDimensions(_this2);\n            });\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            var _this3 = this;\n\n            window.removeEventListener('resize', function () {\n                Utils.updateWindowDimensions(_this3);\n            });\n        }\n    }, {\n        key: 'shrinkSidebar',\n        value: function shrinkSidebar() {\n            var _this4 = this;\n\n            setTimeout(function () {\n                _this4.props.shrink();\n            });\n        }\n    }, {\n        key: 'handleFocusRHSClick',\n        value: function handleFocusRHSClick(e) {\n            e.preventDefault();\n            GlobalActions.emitPostFocusRightHandSideFromSearch(this.props.post, this.props.isMentionSearch);\n        }\n    }, {\n        key: 'handleJumpClick',\n        value: function handleJumpClick() {\n            if (Utils.isMobile()) {\n                GlobalActions.toggleSideBarAction(false);\n            }\n\n            this.shrinkSidebar();\n            _es.browserHistory.push(_team_store2.default.getCurrentTeamRelativeUrl() + '/pl/' + this.props.post.id);\n        }\n    }, {\n        key: 'timeTag',\n        value: function timeTag(post) {\n            var date = Utils.getDateForUnixTicks(post.create_at);\n\n            return _react2.default.createElement(\n                'time',\n                {\n                    className: 'search-item-time',\n                    dateTime: date.toISOString(),\n                    title: date\n                },\n                _react2.default.createElement(_reactIntl.FormattedDate, {\n                    value: post.create_at,\n                    hour12: !this.props.useMilitaryTime,\n                    hour: '2-digit',\n                    minute: '2-digit'\n                })\n            );\n        }\n    }, {\n        key: 'renderTimeTag',\n        value: function renderTimeTag(post) {\n            return Utils.isMobile() ? this.timeTag(post) : _react2.default.createElement(\n                _es.Link,\n                {\n                    to: '/' + this.state.currentTeamDisplayName + '/pl/' + post.id,\n                    target: '_blank',\n                    className: 'post__permalink'\n                },\n                this.timeTag(post)\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var channelName = null;\n            var channel = this.props.channel;\n            var user = this.props.user || {};\n            var post = this.props.post;\n\n            var idCount = -1;\n            if (this.props.lastPostCount >= 0 && this.props.lastPostCount < _constants2.default.TEST_ID_COUNT) {\n                idCount = this.props.lastPostCount;\n            }\n\n            if (channel) {\n                channelName = channel.display_name;\n                if (channel.type === 'D') {\n                    channelName = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'search_item.direct',\n                        defaultMessage: 'Direct Message (with {username})',\n                        values: {\n                            username: Utils.displayUsernameForUser(Utils.getDirectTeammate(channel.id))\n                        }\n                    });\n                }\n            }\n\n            var overrideUsername = void 0;\n            var disableProfilePopover = false;\n            if (post.props && post.props.from_webhook && post.props.override_username && global.window.mm_config.EnablePostUsernameOverride === 'true') {\n                overrideUsername = post.props.override_username;\n                disableProfilePopover = true;\n            }\n\n            var botIndicator = void 0;\n            if (post.props && post.props.from_webhook) {\n                botIndicator = _react2.default.createElement(\n                    'div',\n                    { className: 'bot-indicator' },\n                    _constants2.default.BOT_NAME\n                );\n            }\n\n            var profilePic = _react2.default.createElement(_profile_picture2.default, {\n                src: PostUtils.getProfilePicSrcForPost(post, user),\n                user: this.props.user,\n                status: this.props.status,\n                isBusy: this.props.isBusy\n            });\n\n            var profilePicContainer = _react2.default.createElement(\n                'div',\n                { className: 'post__img' },\n                profilePic\n            );\n\n            var postClass = '';\n            if (PostUtils.isEdited(this.props.post)) {\n                postClass += ' post--edited';\n            }\n\n            var fileAttachment = null;\n            if (post.file_ids && post.file_ids.length > 0) {\n                fileAttachment = _react2.default.createElement(_file_attachment_list2.default, {\n                    post: post,\n                    compactDisplay: this.props.compactDisplay\n                });\n            }\n\n            var message = void 0;\n            var flagContent = void 0;\n            var rhsControls = void 0;\n            if (post.state === _constants2.default.POST_DELETED) {\n                message = _react2.default.createElement(\n                    'p',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'post_body.deleted',\n                        defaultMessage: '(message deleted)'\n                    })\n                );\n            } else {\n                flagContent = _react2.default.createElement(_post_flag_icon2.default, {\n                    idPrefix: 'searchPostFlag',\n                    idCount: idCount,\n                    postId: post.id,\n                    isFlagged: this.props.isFlagged\n                });\n\n                rhsControls = _react2.default.createElement(\n                    'div',\n                    { className: 'col__controls' },\n                    _react2.default.createElement(_dot_menu2.default, {\n                        idPrefix: _constants2.default.SEARCH_POST,\n                        idCount: idCount,\n                        post: post,\n                        isFlagged: this.props.isFlagged,\n                        handleDropdownOpened: this.handleDropdownOpened\n                    }),\n                    _react2.default.createElement(_comment_icon2.default, {\n                        idPrefix: 'searchCommentIcon',\n                        idCount: idCount,\n                        handleCommentClick: this.handleFocusRHSClick,\n                        searchStyle: 'search-item__comment'\n                    }),\n                    _react2.default.createElement(\n                        'a',\n                        {\n                            onClick: this.handleJumpClick,\n                            className: 'search-item__jump'\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'search_item.jump',\n                            defaultMessage: 'Jump'\n                        })\n                    )\n                );\n\n                message = _react2.default.createElement(_post_message_view2.default, {\n                    post: post,\n                    options: {\n                        searchTerm: this.props.term,\n                        mentionHighlight: this.props.isMentionSearch\n                    }\n                });\n            }\n\n            var pinnedBadge = void 0;\n            if (post.is_pinned) {\n                pinnedBadge = _react2.default.createElement(\n                    'span',\n                    { className: 'post__pinned-badge' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'post_info.pinned',\n                        defaultMessage: 'Pinned'\n                    })\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'search-item__container' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'date-separator' },\n                    _react2.default.createElement('hr', { className: 'separator__hr' }),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'separator__text' },\n                        _react2.default.createElement(_reactIntl.FormattedDate, {\n                            value: post.create_at,\n                            day: 'numeric',\n                            month: 'long',\n                            year: 'numeric'\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: this.getClassName() },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'search-channel__name' },\n                        channelName\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'post__content' },\n                        profilePicContainer,\n                        _react2.default.createElement(\n                            'div',\n                            null,\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'post__header' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'col col__name' },\n                                    _react2.default.createElement(\n                                        'strong',\n                                        null,\n                                        _react2.default.createElement(_user_profile2.default, {\n                                            user: user,\n                                            overwriteName: overrideUsername,\n                                            disablePopover: disableProfilePopover,\n                                            status: this.props.status,\n                                            isBusy: this.props.isBusy\n                                        })\n                                    )\n                                ),\n                                botIndicator,\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'col' },\n                                    this.renderTimeTag(post),\n                                    pinnedBadge,\n                                    flagContent\n                                ),\n                                rhsControls\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'search-item-snippet post__body' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: postClass },\n                                    message,\n                                    fileAttachment\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return SearchResultsItem;\n}(_react2.default.Component);\n\nexports.default = SearchResultsItem;\n\n\nSearchResultsItem.propTypes = {\n    post: _propTypes2.default.object,\n    lastPostCount: _propTypes2.default.number,\n    user: _propTypes2.default.object,\n    channel: _propTypes2.default.object,\n    compactDisplay: _propTypes2.default.bool,\n    isMentionSearch: _propTypes2.default.bool,\n    isFlaggedSearch: _propTypes2.default.bool,\n    term: _propTypes2.default.string,\n    useMilitaryTime: _propTypes2.default.bool.isRequired,\n    shrink: _propTypes2.default.func,\n    isFlagged: _propTypes2.default.bool,\n    isBusy: _propTypes2.default.bool,\n    status: _propTypes2.default.string\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3NlYXJjaF9yZXN1bHRzX2l0ZW0uanN4PzFhN2EiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7Rm9ybWF0dGVkRGF0ZSwgRm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5pbXBvcnQge2Jyb3dzZXJIaXN0b3J5LCBMaW5rfSBmcm9tICdyZWFjdC1yb3V0ZXIvZXM2JztcblxuaW1wb3J0ICogYXMgR2xvYmFsQWN0aW9ucyBmcm9tICdhY3Rpb25zL2dsb2JhbF9hY3Rpb25zLmpzeCc7XG5cbmltcG9ydCBQb3N0TWVzc2FnZUNvbnRhaW5lciBmcm9tICdjb21wb25lbnRzL3Bvc3Rfdmlldy9wb3N0X21lc3NhZ2Vfdmlldyc7XG5pbXBvcnQgRmlsZUF0dGFjaG1lbnRMaXN0Q29udGFpbmVyIGZyb20gJ2NvbXBvbmVudHMvZmlsZV9hdHRhY2htZW50X2xpc3QnO1xuXG5pbXBvcnQgQ29tbWVudEljb24gZnJvbSAnY29tcG9uZW50cy9jb21tb24vY29tbWVudF9pY29uLmpzeCc7XG5pbXBvcnQgRG90TWVudSBmcm9tICdjb21wb25lbnRzL2RvdF9tZW51JztcbmltcG9ydCBQb3N0RmxhZ0ljb24gZnJvbSAnY29tcG9uZW50cy9wb3N0X3ZpZXcvcG9zdF9mbGFnX2ljb24uanN4JztcbmltcG9ydCBUZWFtU3RvcmUgZnJvbSAnc3RvcmVzL3RlYW1fc3RvcmUuanN4JztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFBvc3RVdGlscyBmcm9tICd1dGlscy9wb3N0X3V0aWxzLmpzeCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgUHJvZmlsZVBpY3R1cmUgZnJvbSAnLi9wcm9maWxlX3BpY3R1cmUuanN4JztcbmltcG9ydCBVc2VyUHJvZmlsZSBmcm9tICcuL3VzZXJfcHJvZmlsZS5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWFyY2hSZXN1bHRzSXRlbSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlRm9jdXNSSFNDbGljayA9IHRoaXMuaGFuZGxlRm9jdXNSSFNDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUp1bXBDbGljayA9IHRoaXMuaGFuZGxlSnVtcENsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlRHJvcGRvd25PcGVuZWQgPSB0aGlzLmhhbmRsZURyb3Bkb3duT3BlbmVkLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2hyaW5rU2lkZWJhciA9IHRoaXMuc2hyaW5rU2lkZWJhci5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBjdXJyZW50VGVhbURpc3BsYXlOYW1lOiBUZWFtU3RvcmUuZ2V0Q3VycmVudCgpLm5hbWUsXG4gICAgICAgICAgICB3aWR0aDogJycsXG4gICAgICAgICAgICBoZWlnaHQ6ICcnLFxuICAgICAgICAgICAgZHJvcGRvd25PcGVuZWQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7XG4gICAgICAgIGlmICghVXRpbHMuYXJlT2JqZWN0c0VxdWFsKG5leHRTdGF0ZS5wb3N0LCB0aGlzLnByb3BzLnBvc3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXh0UHJvcHMuaXNGbGFnZ2VkICE9PSB0aGlzLnByb3BzLmlzRmxhZ2dlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmV4dFN0YXRlLmRyb3Bkb3duT3BlbmVkICE9PSB0aGlzLnN0YXRlLmRyb3Bkb3duT3BlbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgICAgICAgIFV0aWxzLnVwZGF0ZVdpbmRvd0RpbWVuc2lvbnModGhpcyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgICAgICAgVXRpbHMudXBkYXRlV2luZG93RGltZW5zaW9ucyh0aGlzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2hyaW5rU2lkZWJhcigpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLnNocmluaygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVGb2N1c1JIU0NsaWNrKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBHbG9iYWxBY3Rpb25zLmVtaXRQb3N0Rm9jdXNSaWdodEhhbmRTaWRlRnJvbVNlYXJjaCh0aGlzLnByb3BzLnBvc3QsIHRoaXMucHJvcHMuaXNNZW50aW9uU2VhcmNoKTtcbiAgICB9XG5cbiAgICBoYW5kbGVKdW1wQ2xpY2soKSB7XG4gICAgICAgIGlmIChVdGlscy5pc01vYmlsZSgpKSB7XG4gICAgICAgICAgICBHbG9iYWxBY3Rpb25zLnRvZ2dsZVNpZGVCYXJBY3Rpb24oZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zaHJpbmtTaWRlYmFyKCk7XG4gICAgICAgIGJyb3dzZXJIaXN0b3J5LnB1c2goVGVhbVN0b3JlLmdldEN1cnJlbnRUZWFtUmVsYXRpdmVVcmwoKSArICcvcGwvJyArIHRoaXMucHJvcHMucG9zdC5pZCk7XG4gICAgfVxuXG4gICAgaGFuZGxlRHJvcGRvd25PcGVuZWQgPSAoaXNPcGVuZWQpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBkcm9wZG93bk9wZW5lZDogaXNPcGVuZWRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGltZVRhZyhwb3N0KSB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBVdGlscy5nZXREYXRlRm9yVW5peFRpY2tzKHBvc3QuY3JlYXRlX2F0KTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHRpbWVcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3NlYXJjaC1pdGVtLXRpbWUnXG4gICAgICAgICAgICAgICAgZGF0ZVRpbWU9e2RhdGUudG9JU09TdHJpbmcoKX1cbiAgICAgICAgICAgICAgICB0aXRsZT17ZGF0ZX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkRGF0ZVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cG9zdC5jcmVhdGVfYXR9XG4gICAgICAgICAgICAgICAgICAgIGhvdXIxMj17IXRoaXMucHJvcHMudXNlTWlsaXRhcnlUaW1lfVxuICAgICAgICAgICAgICAgICAgICBob3VyPScyLWRpZ2l0J1xuICAgICAgICAgICAgICAgICAgICBtaW51dGU9JzItZGlnaXQnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvdGltZT5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXJUaW1lVGFnKHBvc3QpIHtcbiAgICAgICAgcmV0dXJuIFV0aWxzLmlzTW9iaWxlKCkgP1xuICAgICAgICAgICAgdGhpcy50aW1lVGFnKHBvc3QpIDpcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICB0bz17YC8ke3RoaXMuc3RhdGUuY3VycmVudFRlYW1EaXNwbGF5TmFtZX0vcGwvJHtwb3N0LmlkfWB9XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldD0nX2JsYW5rJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3Bvc3RfX3Blcm1hbGluaydcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnRpbWVUYWcocG9zdCl9XG4gICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgKTtcbiAgICB9XG5cbiAgICBnZXRDbGFzc05hbWUgPSAoKSA9PiB7XG4gICAgICAgIGxldCBjbGFzc05hbWUgPSAncG9zdCBwb3N0LS10aHJlYWQnO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNvbXBhY3REaXNwbGF5KSB7XG4gICAgICAgICAgICBjbGFzc05hbWUgKz0gJyBwb3N0LS1jb21wYWN0JztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmRyb3Bkb3duT3BlbmVkKSB7XG4gICAgICAgICAgICBjbGFzc05hbWUgKz0gJyBwb3N0LS1ob3ZlcmVkJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbGFzc05hbWU7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgY2hhbm5lbE5hbWUgPSBudWxsO1xuICAgICAgICBjb25zdCBjaGFubmVsID0gdGhpcy5wcm9wcy5jaGFubmVsO1xuICAgICAgICBjb25zdCB1c2VyID0gdGhpcy5wcm9wcy51c2VyIHx8IHt9O1xuICAgICAgICBjb25zdCBwb3N0ID0gdGhpcy5wcm9wcy5wb3N0O1xuXG4gICAgICAgIGxldCBpZENvdW50ID0gLTE7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmxhc3RQb3N0Q291bnQgPj0gMCAmJiB0aGlzLnByb3BzLmxhc3RQb3N0Q291bnQgPCBDb25zdGFudHMuVEVTVF9JRF9DT1VOVCkge1xuICAgICAgICAgICAgaWRDb3VudCA9IHRoaXMucHJvcHMubGFzdFBvc3RDb3VudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFubmVsKSB7XG4gICAgICAgICAgICBjaGFubmVsTmFtZSA9IGNoYW5uZWwuZGlzcGxheV9uYW1lO1xuICAgICAgICAgICAgaWYgKGNoYW5uZWwudHlwZSA9PT0gJ0QnKSB7XG4gICAgICAgICAgICAgICAgY2hhbm5lbE5hbWUgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2VhcmNoX2l0ZW0uZGlyZWN0J1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0RpcmVjdCBNZXNzYWdlICh3aXRoIHt1c2VybmFtZX0pJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IFV0aWxzLmRpc3BsYXlVc2VybmFtZUZvclVzZXIoVXRpbHMuZ2V0RGlyZWN0VGVhbW1hdGUoY2hhbm5lbC5pZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgb3ZlcnJpZGVVc2VybmFtZTtcbiAgICAgICAgbGV0IGRpc2FibGVQcm9maWxlUG9wb3ZlciA9IGZhbHNlO1xuICAgICAgICBpZiAocG9zdC5wcm9wcyAmJlxuICAgICAgICAgICAgICAgIHBvc3QucHJvcHMuZnJvbV93ZWJob29rICYmXG4gICAgICAgICAgICAgICAgcG9zdC5wcm9wcy5vdmVycmlkZV91c2VybmFtZSAmJlxuICAgICAgICAgICAgICAgIGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkVuYWJsZVBvc3RVc2VybmFtZU92ZXJyaWRlID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIG92ZXJyaWRlVXNlcm5hbWUgPSBwb3N0LnByb3BzLm92ZXJyaWRlX3VzZXJuYW1lO1xuICAgICAgICAgICAgZGlzYWJsZVByb2ZpbGVQb3BvdmVyID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBib3RJbmRpY2F0b3I7XG4gICAgICAgIGlmIChwb3N0LnByb3BzICYmIHBvc3QucHJvcHMuZnJvbV93ZWJob29rKSB7XG4gICAgICAgICAgICBib3RJbmRpY2F0b3IgPSA8ZGl2IGNsYXNzTmFtZT0nYm90LWluZGljYXRvcic+e0NvbnN0YW50cy5CT1RfTkFNRX08L2Rpdj47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcm9maWxlUGljID0gKFxuICAgICAgICAgICAgPFByb2ZpbGVQaWN0dXJlXG4gICAgICAgICAgICAgICAgc3JjPXtQb3N0VXRpbHMuZ2V0UHJvZmlsZVBpY1NyY0ZvclBvc3QocG9zdCwgdXNlcil9XG4gICAgICAgICAgICAgICAgdXNlcj17dGhpcy5wcm9wcy51c2VyfVxuICAgICAgICAgICAgICAgIHN0YXR1cz17dGhpcy5wcm9wcy5zdGF0dXN9XG4gICAgICAgICAgICAgICAgaXNCdXN5PXt0aGlzLnByb3BzLmlzQnVzeX1cbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBwcm9maWxlUGljQ29udGFpbmVyID0gKDxkaXYgY2xhc3NOYW1lPSdwb3N0X19pbWcnPntwcm9maWxlUGljfTwvZGl2Pik7XG5cbiAgICAgICAgbGV0IHBvc3RDbGFzcyA9ICcnO1xuICAgICAgICBpZiAoUG9zdFV0aWxzLmlzRWRpdGVkKHRoaXMucHJvcHMucG9zdCkpIHtcbiAgICAgICAgICAgIHBvc3RDbGFzcyArPSAnIHBvc3QtLWVkaXRlZCc7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZmlsZUF0dGFjaG1lbnQgPSBudWxsO1xuICAgICAgICBpZiAocG9zdC5maWxlX2lkcyAmJiBwb3N0LmZpbGVfaWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZpbGVBdHRhY2htZW50ID0gKFxuICAgICAgICAgICAgICAgIDxGaWxlQXR0YWNobWVudExpc3RDb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgcG9zdD17cG9zdH1cbiAgICAgICAgICAgICAgICAgICAgY29tcGFjdERpc3BsYXk9e3RoaXMucHJvcHMuY29tcGFjdERpc3BsYXl9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbWVzc2FnZTtcbiAgICAgICAgbGV0IGZsYWdDb250ZW50O1xuICAgICAgICBsZXQgcmhzQ29udHJvbHM7XG4gICAgICAgIGlmIChwb3N0LnN0YXRlID09PSBDb25zdGFudHMuUE9TVF9ERUxFVEVEKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gKFxuICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3Bvc3RfYm9keS5kZWxldGVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9JyhtZXNzYWdlIGRlbGV0ZWQpJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmbGFnQ29udGVudCA9IChcbiAgICAgICAgICAgICAgICA8UG9zdEZsYWdJY29uXG4gICAgICAgICAgICAgICAgICAgIGlkUHJlZml4PXsnc2VhcmNoUG9zdEZsYWcnfVxuICAgICAgICAgICAgICAgICAgICBpZENvdW50PXtpZENvdW50fVxuICAgICAgICAgICAgICAgICAgICBwb3N0SWQ9e3Bvc3QuaWR9XG4gICAgICAgICAgICAgICAgICAgIGlzRmxhZ2dlZD17dGhpcy5wcm9wcy5pc0ZsYWdnZWR9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJoc0NvbnRyb2xzID0gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2xfX2NvbnRyb2xzJz5cbiAgICAgICAgICAgICAgICAgICAgPERvdE1lbnVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkUHJlZml4PXtDb25zdGFudHMuU0VBUkNIX1BPU1R9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZENvdW50PXtpZENvdW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdD17cG9zdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRmxhZ2dlZD17dGhpcy5wcm9wcy5pc0ZsYWdnZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVEcm9wZG93bk9wZW5lZD17dGhpcy5oYW5kbGVEcm9wZG93bk9wZW5lZH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPENvbW1lbnRJY29uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZFByZWZpeD17J3NlYXJjaENvbW1lbnRJY29uJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkQ291bnQ9e2lkQ291bnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVDb21tZW50Q2xpY2s9e3RoaXMuaGFuZGxlRm9jdXNSSFNDbGlja31cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFN0eWxlPXsnc2VhcmNoLWl0ZW1fX2NvbW1lbnQnfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVKdW1wQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3NlYXJjaC1pdGVtX19qdW1wJ1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzZWFyY2hfaXRlbS5qdW1wJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdKdW1wJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbWVzc2FnZSA9IChcbiAgICAgICAgICAgICAgICA8UG9zdE1lc3NhZ2VDb250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgcG9zdD17cG9zdH1cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGVybTogdGhpcy5wcm9wcy50ZXJtLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudGlvbkhpZ2hsaWdodDogdGhpcy5wcm9wcy5pc01lbnRpb25TZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwaW5uZWRCYWRnZTtcbiAgICAgICAgaWYgKHBvc3QuaXNfcGlubmVkKSB7XG4gICAgICAgICAgICBwaW5uZWRCYWRnZSA9IChcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3Bvc3RfX3Bpbm5lZC1iYWRnZSc+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ncG9zdF9pbmZvLnBpbm5lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdQaW5uZWQnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2VhcmNoLWl0ZW1fX2NvbnRhaW5lcic+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RhdGUtc2VwYXJhdG9yJz5cbiAgICAgICAgICAgICAgICAgICAgPGhyIGNsYXNzTmFtZT0nc2VwYXJhdG9yX19ocicvPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2VwYXJhdG9yX190ZXh0Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWREYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3Bvc3QuY3JlYXRlX2F0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheT0nbnVtZXJpYydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aD0nbG9uZydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyPSdudW1lcmljJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3RoaXMuZ2V0Q2xhc3NOYW1lKCl9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2VhcmNoLWNoYW5uZWxfX25hbWUnPntjaGFubmVsTmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Bvc3RfX2NvbnRlbnQnPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Byb2ZpbGVQaWNDb250YWluZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwb3N0X19oZWFkZXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sIGNvbF9fbmFtZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxVc2VyUHJvZmlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyPXt1c2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVyd3JpdGVOYW1lPXtvdmVycmlkZVVzZXJuYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlUG9wb3Zlcj17ZGlzYWJsZVByb2ZpbGVQb3BvdmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM9e3RoaXMucHJvcHMuc3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0J1c3k9e3RoaXMucHJvcHMuaXNCdXN5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtib3RJbmRpY2F0b3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyVGltZVRhZyhwb3N0KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwaW5uZWRCYWRnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmbGFnQ29udGVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyaHNDb250cm9sc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2VhcmNoLWl0ZW0tc25pcHBldCBwb3N0X19ib2R5Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3Bvc3RDbGFzc30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaWxlQXR0YWNobWVudH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblNlYXJjaFJlc3VsdHNJdGVtLnByb3BUeXBlcyA9IHtcbiAgICBwb3N0OiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGxhc3RQb3N0Q291bnQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgdXNlcjogUHJvcFR5cGVzLm9iamVjdCxcbiAgICBjaGFubmVsOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGNvbXBhY3REaXNwbGF5OiBQcm9wVHlwZXMuYm9vbCxcbiAgICBpc01lbnRpb25TZWFyY2g6IFByb3BUeXBlcy5ib29sLFxuICAgIGlzRmxhZ2dlZFNlYXJjaDogUHJvcFR5cGVzLmJvb2wsXG4gICAgdGVybTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICB1c2VNaWxpdGFyeVRpbWU6IFByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXG4gICAgc2hyaW5rOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBpc0ZsYWdnZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIGlzQnVzeTogUHJvcFR5cGVzLmJvb2wsXG4gICAgc3RhdHVzOiBQcm9wVHlwZXMuc3RyaW5nXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvc2VhcmNoX3Jlc3VsdHNfaXRlbS5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBeEJBO0FBQ0E7QUFDQTtBQXVCQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBaUVBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFyRUE7QUF3R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVJBO0FBY0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFMQTtBQWFBOzs7QUFFQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQVFBOzs7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQVFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU9BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQWRBO0FBQ0E7QUF5QkE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFEQTtBQUZBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQURBO0FBV0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBbEJBO0FBb0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBckJBO0FBRkE7QUFGQTtBQVpBO0FBZ0RBOzs7QUFuVEE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQW9UQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2518\n");

/***/ }),

/***/ 2519:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _es = __webpack_require__(45);\n\nvar _global_actions = __webpack_require__(57);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _post_actions = __webpack_require__(75);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _search_store = __webpack_require__(321);\n\nvar _search_store2 = _interopRequireDefault(_search_store);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _webrtc_store = __webpack_require__(454);\n\nvar _webrtc_store2 = _interopRequireDefault(_webrtc_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _url = __webpack_require__(79);\n\nvar _user_agent = __webpack_require__(90);\n\nvar UserAgent = _interopRequireWildcard(_user_agent);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _about_build_modal = __webpack_require__(2174);\n\nvar _about_build_modal2 = _interopRequireDefault(_about_build_modal);\n\nvar _add_users_to_team = __webpack_require__(2181);\n\nvar _add_users_to_team2 = _interopRequireDefault(_add_users_to_team);\n\nvar _tutorial_tip = __webpack_require__(776);\n\nvar _team_members_modal = __webpack_require__(788);\n\nvar _team_members_modal2 = _interopRequireDefault(_team_members_modal);\n\nvar _toggle_modal_button = __webpack_require__(459);\n\nvar _toggle_modal_button2 = _interopRequireDefault(_toggle_modal_button);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar Preferences = _constants.Constants.Preferences;\nvar TutorialSteps = _constants.Constants.TutorialSteps;\n\nvar SidebarRightMenu = function (_React$Component) {\n    (0, _inherits3.default)(SidebarRightMenu, _React$Component);\n\n    function SidebarRightMenu(props) {\n        (0, _classCallCheck3.default)(this, SidebarRightMenu);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SidebarRightMenu.__proto__ || (0, _getPrototypeOf2.default)(SidebarRightMenu)).call(this, props));\n\n        _this.onChange = _this.onChange.bind(_this);\n        _this.handleClick = _this.handleClick.bind(_this);\n        _this.handleAboutModal = _this.handleAboutModal.bind(_this);\n        _this.showAddUsersToTeamModal = _this.showAddUsersToTeamModal.bind(_this);\n        _this.hideAddUsersToTeamModal = _this.hideAddUsersToTeamModal.bind(_this);\n        _this.searchMentions = _this.searchMentions.bind(_this);\n        _this.aboutModalDismissed = _this.aboutModalDismissed.bind(_this);\n        _this.getFlagged = _this.getFlagged.bind(_this);\n\n        var state = _this.getStateFromStores();\n        state.showAboutModal = false;\n        state.showAddUsersToTeamModal = false;\n\n        _this.state = state;\n        return _this;\n    }\n\n    (0, _createClass3.default)(SidebarRightMenu, [{\n        key: 'handleClick',\n        value: function handleClick(e) {\n            if (_webrtc_store2.default.isBusy()) {\n                _webrtc_store2.default.emitChanged({ action: _constants.WebrtcActionTypes.IN_PROGRESS });\n                e.preventDefault();\n            }\n        }\n    }, {\n        key: 'handleAboutModal',\n        value: function handleAboutModal() {\n            this.setState({ showAboutModal: true });\n        }\n    }, {\n        key: 'aboutModalDismissed',\n        value: function aboutModalDismissed() {\n            this.setState({ showAboutModal: false });\n        }\n    }, {\n        key: 'showAddUsersToTeamModal',\n        value: function showAddUsersToTeamModal(e) {\n            e.preventDefault();\n\n            this.setState({\n                showAddUsersToTeamModal: true,\n                showDropdown: false\n            });\n        }\n    }, {\n        key: 'hideAddUsersToTeamModal',\n        value: function hideAddUsersToTeamModal() {\n            this.setState({\n                showAddUsersToTeamModal: false\n            });\n        }\n    }, {\n        key: 'getFlagged',\n        value: function getFlagged(e) {\n            e.preventDefault();\n            (0, _post_actions.getFlaggedPosts)();\n            this.closeRightSidebar();\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _team_store2.default.addChangeListener(this.onChange);\n            _preference_store2.default.addChangeListener(this.onChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _team_store2.default.removeChangeListener(this.onChange);\n            _preference_store2.default.removeChangeListener(this.onChange);\n        }\n    }, {\n        key: 'getStateFromStores',\n        value: function getStateFromStores() {\n            var tutorialStep = _preference_store2.default.getInt(Preferences.TUTORIAL_STEP, _user_store2.default.getCurrentId(), 999);\n\n            return {\n                currentUser: _user_store2.default.getCurrentUser(),\n                teamMembers: _team_store2.default.getMyTeamMembers(),\n                teamListings: _team_store2.default.getTeamListings(),\n                showTutorialTip: tutorialStep === TutorialSteps.MENU_POPOVER && Utils.isMobile()\n            };\n        }\n    }, {\n        key: 'onChange',\n        value: function onChange() {\n            this.setState(this.getStateFromStores());\n        }\n    }, {\n        key: 'searchMentions',\n        value: function searchMentions(e) {\n            e.preventDefault();\n            var user = this.state.currentUser;\n\n            if (_search_store2.default.isMentionSearch) {\n                GlobalActions.toggleSideBarAction(false);\n            } else {\n                this.closeRightSidebar();\n                GlobalActions.emitSearchMentionsEvent(user);\n            }\n        }\n    }, {\n        key: 'closeLeftSidebar',\n        value: function closeLeftSidebar() {\n            if (Utils.isMobile()) {\n                setTimeout(function () {\n                    document.querySelector('.app__body .inner-wrap').classList.remove('move--right');\n                    document.querySelector('.app__body .sidebar--left').classList.remove('move--right');\n                });\n            }\n        }\n    }, {\n        key: 'openRightSidebar',\n        value: function openRightSidebar() {\n            if (Utils.isMobile()) {\n                setTimeout(function () {\n                    document.querySelector('.app__body .inner-wrap').classList.add('move--left-small');\n                    document.querySelector('.app__body .sidebar--menu').classList.add('move--left');\n                });\n            }\n        }\n    }, {\n        key: 'closeRightSidebar',\n        value: function closeRightSidebar() {\n            if (Utils.isMobile()) {\n                setTimeout(function () {\n                    document.querySelector('.app__body .inner-wrap').classList.remove('move--left-small');\n                    document.querySelector('.app__body .sidebar--menu').classList.remove('move--left');\n                });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var currentUser = _user_store2.default.getCurrentUser();\n            var teamLink = void 0;\n            var inviteLink = void 0;\n            var addUserToTeamLink = void 0;\n            var teamSettingsLink = void 0;\n            var manageLink = void 0;\n            var consoleLink = void 0;\n            var joinAnotherTeamLink = void 0;\n            var isAdmin = false;\n            var isSystemAdmin = false;\n            var createTeam = null;\n\n            if (currentUser != null) {\n                isAdmin = _team_store2.default.isTeamAdminForCurrentTeam() || _user_store2.default.isSystemAdminForCurrentUser();\n                isSystemAdmin = _user_store2.default.isSystemAdminForCurrentUser();\n\n                inviteLink = _react2.default.createElement(\n                    'li',\n                    null,\n                    _react2.default.createElement(\n                        'a',\n                        {\n                            href: '#',\n                            onClick: GlobalActions.showInviteMemberModal\n                        },\n                        _react2.default.createElement('i', { className: 'icon fa fa-user-plus' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'sidebar_right_menu.inviteNew',\n                            defaultMessage: 'Send Email Invite'\n                        })\n                    )\n                );\n\n                addUserToTeamLink = _react2.default.createElement(\n                    'li',\n                    null,\n                    _react2.default.createElement(\n                        'a',\n                        {\n                            id: 'addUsersToTeam',\n                            href: '#',\n                            onClick: this.showAddUsersToTeamModal\n                        },\n                        _react2.default.createElement('i', { className: 'icon fa fa-user-plus' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'sidebar_right_menu.addMemberToTeam',\n                            defaultMessage: 'Add Members to Team'\n                        })\n                    )\n                );\n\n                if (this.props.teamType === _constants.Constants.OPEN_TEAM && global.mm_config.EnableUserCreation === 'true') {\n                    teamLink = _react2.default.createElement(\n                        'li',\n                        null,\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                href: '#',\n                                onClick: GlobalActions.showGetTeamInviteLinkModal\n                            },\n                            _react2.default.createElement('i', { className: 'icon fa fa-link' }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'sidebar_right_menu.teamLink',\n                                defaultMessage: 'Get Team Invite Link'\n                            })\n                        )\n                    );\n                }\n\n                if (global.window.mm_license.IsLicensed === 'true') {\n                    if (global.window.mm_config.RestrictTeamInvite === _constants.Constants.PERMISSIONS_SYSTEM_ADMIN && !isSystemAdmin) {\n                        teamLink = null;\n                        inviteLink = null;\n                        addUserToTeamLink = null;\n                    } else if (global.window.mm_config.RestrictTeamInvite === _constants.Constants.PERMISSIONS_TEAM_ADMIN && !isAdmin) {\n                        teamLink = null;\n                        inviteLink = null;\n                        addUserToTeamLink = null;\n                    }\n                }\n\n                var moreTeams = false;\n                var isAlreadyMember = this.state.teamMembers.reduce(function (result, item) {\n                    result[item.team_id] = true;\n                    return result;\n                }, {});\n\n                for (var id in this.state.teamListings) {\n                    if (this.state.teamListings.hasOwnProperty(id) && !isAlreadyMember[id]) {\n                        moreTeams = true;\n                        break;\n                    }\n                }\n\n                if (moreTeams) {\n                    joinAnotherTeamLink = _react2.default.createElement(\n                        'li',\n                        { key: 'joinTeam_li' },\n                        _react2.default.createElement(\n                            _es.Link,\n                            { to: '/select_team' },\n                            _react2.default.createElement('i', { className: 'icon fa fa-plus-square' }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'navbar_dropdown.join',\n                                defaultMessage: 'Join Another Team'\n                            })\n                        )\n                    );\n                }\n\n                if (global.window.mm_config.EnableTeamCreation === 'true' || isSystemAdmin) {\n                    createTeam = _react2.default.createElement(\n                        'li',\n                        { key: 'newTeam_li' },\n                        _react2.default.createElement(\n                            _es.Link,\n                            {\n                                id: 'createTeam',\n                                key: 'newTeam_a',\n                                to: '/create_team',\n                                onClick: this.handleClick\n                            },\n                            _react2.default.createElement('i', { className: 'icon fa fa-plus-square' }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'navbar_dropdown.create',\n                                defaultMessage: 'Create a New Team'\n                            })\n                        )\n                    );\n                }\n            }\n\n            manageLink = _react2.default.createElement(\n                'li',\n                null,\n                _react2.default.createElement(\n                    _toggle_modal_button2.default,\n                    { dialogType: _team_members_modal2.default },\n                    _react2.default.createElement('i', { className: 'icon fa fa-users' }),\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'sidebar_right_menu.viewMembers',\n                        defaultMessage: 'View Members'\n                    })\n                )\n            );\n\n            var leaveTeam = _react2.default.createElement(\n                'li',\n                { key: 'leaveTeam_li' },\n                _react2.default.createElement(\n                    'a',\n                    {\n                        id: 'leaveTeam',\n                        href: '#',\n                        onClick: GlobalActions.showLeaveTeamModal\n                    },\n                    _react2.default.createElement('span', {\n                        className: 'icon',\n                        dangerouslySetInnerHTML: { __html: _constants.Constants.LEAVE_TEAM_SVG }\n                    }),\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'navbar_dropdown.leave',\n                        defaultMessage: 'Leave Team'\n                    })\n                )\n            );\n\n            if (isAdmin) {\n                teamSettingsLink = _react2.default.createElement(\n                    'li',\n                    null,\n                    _react2.default.createElement(\n                        'a',\n                        {\n                            href: '#',\n                            'data-toggle': 'modal',\n                            'data-target': '#team_settings'\n                        },\n                        _react2.default.createElement('i', { className: 'icon fa fa-globe' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'sidebar_right_menu.teamSettings',\n                            defaultMessage: 'Team Settings'\n                        })\n                    )\n                );\n                manageLink = _react2.default.createElement(\n                    'li',\n                    null,\n                    _react2.default.createElement(\n                        _toggle_modal_button2.default,\n                        {\n                            dialogType: _team_members_modal2.default,\n                            dialogProps: { isAdmin: isAdmin }\n                        },\n                        _react2.default.createElement('i', { className: 'icon fa fa-users' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'sidebar_right_menu.manageMembers',\n                            defaultMessage: 'Manage Members'\n                        })\n                    )\n                );\n            }\n\n            if (isSystemAdmin && !Utils.isMobile()) {\n                consoleLink = _react2.default.createElement(\n                    'li',\n                    null,\n                    _react2.default.createElement(\n                        _es.Link,\n                        {\n                            to: '/admin_console',\n                            onClick: this.handleClick\n                        },\n                        _react2.default.createElement('i', { className: 'icon fa fa-wrench' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'sidebar_right_menu.console',\n                            defaultMessage: 'System Console'\n                        })\n                    )\n                );\n            }\n\n            var siteName = '';\n            if (global.window.mm_config.SiteName != null) {\n                siteName = global.window.mm_config.SiteName;\n            }\n            var teamDisplayName = siteName;\n            if (this.props.teamDisplayName) {\n                teamDisplayName = this.props.teamDisplayName;\n            }\n\n            var helpLink = null;\n            if (global.window.mm_config.HelpLink) {\n                helpLink = _react2.default.createElement(\n                    'li',\n                    null,\n                    _react2.default.createElement(\n                        _es.Link,\n                        {\n                            target: '_blank',\n                            rel: 'noopener noreferrer',\n                            to: global.window.mm_config.HelpLink\n                        },\n                        _react2.default.createElement('i', { className: 'icon fa fa-question' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'sidebar_right_menu.help',\n                            defaultMessage: 'Help'\n                        })\n                    )\n                );\n            }\n\n            var reportLink = null;\n            if (global.window.mm_config.ReportAProblemLink) {\n                reportLink = _react2.default.createElement(\n                    'li',\n                    null,\n                    _react2.default.createElement(\n                        _es.Link,\n                        {\n                            target: '_blank',\n                            rel: 'noopener noreferrer',\n                            to: global.window.mm_config.ReportAProblemLink\n                        },\n                        _react2.default.createElement('i', { className: 'icon fa fa-phone' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'sidebar_right_menu.report',\n                            defaultMessage: 'Report a Problem'\n                        })\n                    )\n                );\n            }\n\n            var tutorialTip = null;\n            if (this.state.showTutorialTip) {\n                tutorialTip = (0, _tutorial_tip.createMenuTip)(function (e) {\n                    return e.preventDefault();\n                }, true);\n                this.closeLeftSidebar();\n                this.openRightSidebar();\n            }\n\n            var nativeAppLink = null;\n            if (global.window.mm_config.AppDownloadLink && !UserAgent.isMobileApp()) {\n                nativeAppLink = _react2.default.createElement(\n                    'li',\n                    null,\n                    _react2.default.createElement(\n                        _es.Link,\n                        {\n                            target: '_blank',\n                            rel: 'noopener noreferrer',\n                            to: (0, _url.useSafeUrl)(global.window.mm_config.AppDownloadLink)\n                        },\n                        _react2.default.createElement('i', { className: 'icon fa fa-mobile' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'sidebar_right_menu.nativeApps',\n                            defaultMessage: 'Download Apps'\n                        })\n                    )\n                );\n            }\n\n            var addUsersToTeamModal = void 0;\n            if (this.state.showAddUsersToTeamModal) {\n                addUsersToTeamModal = _react2.default.createElement(_add_users_to_team2.default, {\n                    onModalDismissed: this.hideAddUsersToTeamModal\n                });\n            }\n\n            var teamDivider = null;\n            if (teamSettingsLink || manageLink || joinAnotherTeamLink || createTeam || leaveTeam) {\n                teamDivider = _react2.default.createElement('li', { className: 'divider' });\n            }\n\n            var consoleDivider = null;\n            if (consoleLink) {\n                consoleDivider = _react2.default.createElement('li', { className: 'divider' });\n            }\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    className: 'sidebar--menu',\n                    id: 'sidebar-menu'\n                },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'team__header theme' },\n                    _react2.default.createElement(\n                        _es.Link,\n                        {\n                            className: 'team__name',\n                            to: '/channels/town-square'\n                        },\n                        teamDisplayName\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'nav-pills__container' },\n                    tutorialTip,\n                    _react2.default.createElement(\n                        'ul',\n                        { className: 'nav nav-pills nav-stacked' },\n                        _react2.default.createElement(\n                            'li',\n                            null,\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    href: '#',\n                                    onClick: this.searchMentions\n                                },\n                                _react2.default.createElement(\n                                    'i',\n                                    { className: 'icon mentions' },\n                                    '@'\n                                ),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'sidebar_right_menu.recentMentions',\n                                    defaultMessage: 'Recent Mentions'\n                                })\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'li',\n                            null,\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    href: '#',\n                                    onClick: this.getFlagged\n                                },\n                                _react2.default.createElement('i', { className: 'icon fa fa-flag' }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'sidebar_right_menu.flagged',\n                                    defaultMessage: 'Flagged Posts'\n                                })\n                            )\n                        ),\n                        _react2.default.createElement('li', { className: 'divider' }),\n                        _react2.default.createElement(\n                            'li',\n                            null,\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    href: '#',\n                                    onClick: function onClick() {\n                                        return GlobalActions.showAccountSettingsModal();\n                                    }\n                                },\n                                _react2.default.createElement('i', { className: 'icon fa fa-cog' }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'sidebar_right_menu.accountSettings',\n                                    defaultMessage: 'Account Settings'\n                                })\n                            )\n                        ),\n                        _react2.default.createElement('li', { className: 'divider' }),\n                        inviteLink,\n                        teamLink,\n                        addUserToTeamLink,\n                        teamDivider,\n                        teamSettingsLink,\n                        manageLink,\n                        createTeam,\n                        joinAnotherTeamLink,\n                        leaveTeam,\n                        consoleDivider,\n                        consoleLink,\n                        _react2.default.createElement('li', { className: 'divider' }),\n                        helpLink,\n                        reportLink,\n                        nativeAppLink,\n                        _react2.default.createElement(\n                            'li',\n                            null,\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    href: '#',\n                                    onClick: this.handleAboutModal\n                                },\n                                _react2.default.createElement('i', { className: 'icon fa fa-info' }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'navbar_dropdown.about',\n                                    defaultMessage: 'About Mattermost'\n                                })\n                            )\n                        ),\n                        _react2.default.createElement('li', { className: 'divider' }),\n                        _react2.default.createElement(\n                            'li',\n                            null,\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    href: '#',\n                                    onClick: function onClick() {\n                                        return GlobalActions.emitUserLoggedOutEvent();\n                                    }\n                                },\n                                _react2.default.createElement('i', { className: 'icon fa fa-sign-out' }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'sidebar_right_menu.logout',\n                                    defaultMessage: 'Logout'\n                                })\n                            )\n                        )\n                    )\n                ),\n                _react2.default.createElement(_about_build_modal2.default, {\n                    show: this.state.showAboutModal,\n                    onModalDismissed: this.aboutModalDismissed\n                }),\n                addUsersToTeamModal\n            );\n        }\n    }]);\n    return SidebarRightMenu;\n}(_react2.default.Component);\n\nexports.default = SidebarRightMenu;\n\n\nSidebarRightMenu.propTypes = {\n    teamType: _propTypes2.default.string,\n    teamDisplayName: _propTypes2.default.string\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3NpZGViYXJfcmlnaHRfbWVudS5qc3g/MWUwZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcbmltcG9ydCB7TGlua30gZnJvbSAncmVhY3Qtcm91dGVyL2VzNic7XG5cbmltcG9ydCAqIGFzIEdsb2JhbEFjdGlvbnMgZnJvbSAnYWN0aW9ucy9nbG9iYWxfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IHtnZXRGbGFnZ2VkUG9zdHN9IGZyb20gJ2FjdGlvbnMvcG9zdF9hY3Rpb25zLmpzeCc7XG5cbmltcG9ydCBQcmVmZXJlbmNlU3RvcmUgZnJvbSAnc3RvcmVzL3ByZWZlcmVuY2Vfc3RvcmUuanN4JztcbmltcG9ydCBTZWFyY2hTdG9yZSBmcm9tICdzdG9yZXMvc2VhcmNoX3N0b3JlLmpzeCc7XG5pbXBvcnQgVGVhbVN0b3JlIGZyb20gJ3N0b3Jlcy90ZWFtX3N0b3JlLmpzeCc7XG5pbXBvcnQgVXNlclN0b3JlIGZyb20gJ3N0b3Jlcy91c2VyX3N0b3JlLmpzeCc7XG5pbXBvcnQgV2VicnRjU3RvcmUgZnJvbSAnc3RvcmVzL3dlYnJ0Y19zdG9yZS5qc3gnO1xuXG5pbXBvcnQge0NvbnN0YW50cywgV2VicnRjQWN0aW9uVHlwZXN9IGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuaW1wb3J0IHt1c2VTYWZlVXJsfSBmcm9tICd1dGlscy91cmwuanN4JztcbmltcG9ydCAqIGFzIFVzZXJBZ2VudCBmcm9tICd1dGlscy91c2VyX2FnZW50LmpzeCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgQWJvdXRCdWlsZE1vZGFsIGZyb20gJ2NvbXBvbmVudHMvYWJvdXRfYnVpbGRfbW9kYWwnO1xuaW1wb3J0IEFkZFVzZXJzVG9UZWFtIGZyb20gJ2NvbXBvbmVudHMvYWRkX3VzZXJzX3RvX3RlYW0nO1xuaW1wb3J0IHtjcmVhdGVNZW51VGlwfSBmcm9tICdjb21wb25lbnRzL3R1dG9yaWFsL3R1dG9yaWFsX3RpcC5qc3gnO1xuXG5pbXBvcnQgVGVhbU1lbWJlcnNNb2RhbCBmcm9tICcuL3RlYW1fbWVtYmVyc19tb2RhbC5qc3gnO1xuaW1wb3J0IFRvZ2dsZU1vZGFsQnV0dG9uIGZyb20gJy4vdG9nZ2xlX21vZGFsX2J1dHRvbi5qc3gnO1xuXG5jb25zdCBQcmVmZXJlbmNlcyA9IENvbnN0YW50cy5QcmVmZXJlbmNlcztcbmNvbnN0IFR1dG9yaWFsU3RlcHMgPSBDb25zdGFudHMuVHV0b3JpYWxTdGVwcztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2lkZWJhclJpZ2h0TWVudSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpY2sgPSB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQWJvdXRNb2RhbCA9IHRoaXMuaGFuZGxlQWJvdXRNb2RhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNob3dBZGRVc2Vyc1RvVGVhbU1vZGFsID0gdGhpcy5zaG93QWRkVXNlcnNUb1RlYW1Nb2RhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhpZGVBZGRVc2Vyc1RvVGVhbU1vZGFsID0gdGhpcy5oaWRlQWRkVXNlcnNUb1RlYW1Nb2RhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnNlYXJjaE1lbnRpb25zID0gdGhpcy5zZWFyY2hNZW50aW9ucy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFib3V0TW9kYWxEaXNtaXNzZWQgPSB0aGlzLmFib3V0TW9kYWxEaXNtaXNzZWQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5nZXRGbGFnZ2VkID0gdGhpcy5nZXRGbGFnZ2VkLmJpbmQodGhpcyk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmdldFN0YXRlRnJvbVN0b3JlcygpO1xuICAgICAgICBzdGF0ZS5zaG93QWJvdXRNb2RhbCA9IGZhbHNlO1xuICAgICAgICBzdGF0ZS5zaG93QWRkVXNlcnNUb1RlYW1Nb2RhbCA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG5cbiAgICBoYW5kbGVDbGljayhlKSB7XG4gICAgICAgIGlmIChXZWJydGNTdG9yZS5pc0J1c3koKSkge1xuICAgICAgICAgICAgV2VicnRjU3RvcmUuZW1pdENoYW5nZWQoe2FjdGlvbjogV2VicnRjQWN0aW9uVHlwZXMuSU5fUFJPR1JFU1N9KTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUFib3V0TW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dBYm91dE1vZGFsOiB0cnVlfSk7XG4gICAgfVxuXG4gICAgYWJvdXRNb2RhbERpc21pc3NlZCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvd0Fib3V0TW9kYWw6IGZhbHNlfSk7XG4gICAgfVxuXG4gICAgc2hvd0FkZFVzZXJzVG9UZWFtTW9kYWwoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93QWRkVXNlcnNUb1RlYW1Nb2RhbDogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dEcm9wZG93bjogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGlkZUFkZFVzZXJzVG9UZWFtTW9kYWwoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvd0FkZFVzZXJzVG9UZWFtTW9kYWw6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldEZsYWdnZWQoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGdldEZsYWdnZWRQb3N0cygpO1xuICAgICAgICB0aGlzLmNsb3NlUmlnaHRTaWRlYmFyKCk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIFRlYW1TdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uQ2hhbmdlKTtcbiAgICAgICAgUHJlZmVyZW5jZVN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMub25DaGFuZ2UpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBUZWFtU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkNoYW5nZSk7XG4gICAgICAgIFByZWZlcmVuY2VTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uQ2hhbmdlKTtcbiAgICB9XG5cbiAgICBnZXRTdGF0ZUZyb21TdG9yZXMoKSB7XG4gICAgICAgIGNvbnN0IHR1dG9yaWFsU3RlcCA9IFByZWZlcmVuY2VTdG9yZS5nZXRJbnQoUHJlZmVyZW5jZXMuVFVUT1JJQUxfU1RFUCwgVXNlclN0b3JlLmdldEN1cnJlbnRJZCgpLCA5OTkpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjdXJyZW50VXNlcjogVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKCksXG4gICAgICAgICAgICB0ZWFtTWVtYmVyczogVGVhbVN0b3JlLmdldE15VGVhbU1lbWJlcnMoKSxcbiAgICAgICAgICAgIHRlYW1MaXN0aW5nczogVGVhbVN0b3JlLmdldFRlYW1MaXN0aW5ncygpLFxuICAgICAgICAgICAgc2hvd1R1dG9yaWFsVGlwOiB0dXRvcmlhbFN0ZXAgPT09IFR1dG9yaWFsU3RlcHMuTUVOVV9QT1BPVkVSICYmIFV0aWxzLmlzTW9iaWxlKClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBvbkNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmdldFN0YXRlRnJvbVN0b3JlcygpKTtcbiAgICB9XG5cbiAgICBzZWFyY2hNZW50aW9ucyhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgdXNlciA9IHRoaXMuc3RhdGUuY3VycmVudFVzZXI7XG5cbiAgICAgICAgaWYgKFNlYXJjaFN0b3JlLmlzTWVudGlvblNlYXJjaCkge1xuICAgICAgICAgICAgR2xvYmFsQWN0aW9ucy50b2dnbGVTaWRlQmFyQWN0aW9uKGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VSaWdodFNpZGViYXIoKTtcbiAgICAgICAgICAgIEdsb2JhbEFjdGlvbnMuZW1pdFNlYXJjaE1lbnRpb25zRXZlbnQodXNlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjbG9zZUxlZnRTaWRlYmFyKCkge1xuICAgICAgICBpZiAoVXRpbHMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcF9fYm9keSAuaW5uZXItd3JhcCcpLmNsYXNzTGlzdC5yZW1vdmUoJ21vdmUtLXJpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcF9fYm9keSAuc2lkZWJhci0tbGVmdCcpLmNsYXNzTGlzdC5yZW1vdmUoJ21vdmUtLXJpZ2h0Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9wZW5SaWdodFNpZGViYXIoKSB7XG4gICAgICAgIGlmIChVdGlscy5pc01vYmlsZSgpKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwX19ib2R5IC5pbm5lci13cmFwJykuY2xhc3NMaXN0LmFkZCgnbW92ZS0tbGVmdC1zbWFsbCcpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHBfX2JvZHkgLnNpZGViYXItLW1lbnUnKS5jbGFzc0xpc3QuYWRkKCdtb3ZlLS1sZWZ0Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsb3NlUmlnaHRTaWRlYmFyKCkge1xuICAgICAgICBpZiAoVXRpbHMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcF9fYm9keSAuaW5uZXItd3JhcCcpLmNsYXNzTGlzdC5yZW1vdmUoJ21vdmUtLWxlZnQtc21hbGwnKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXBwX19ib2R5IC5zaWRlYmFyLS1tZW51JykuY2xhc3NMaXN0LnJlbW92ZSgnbW92ZS0tbGVmdCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKCk7XG4gICAgICAgIGxldCB0ZWFtTGluaztcbiAgICAgICAgbGV0IGludml0ZUxpbms7XG4gICAgICAgIGxldCBhZGRVc2VyVG9UZWFtTGluaztcbiAgICAgICAgbGV0IHRlYW1TZXR0aW5nc0xpbms7XG4gICAgICAgIGxldCBtYW5hZ2VMaW5rO1xuICAgICAgICBsZXQgY29uc29sZUxpbms7XG4gICAgICAgIGxldCBqb2luQW5vdGhlclRlYW1MaW5rO1xuICAgICAgICBsZXQgaXNBZG1pbiA9IGZhbHNlO1xuICAgICAgICBsZXQgaXNTeXN0ZW1BZG1pbiA9IGZhbHNlO1xuICAgICAgICBsZXQgY3JlYXRlVGVhbSA9IG51bGw7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRVc2VyICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlzQWRtaW4gPSBUZWFtU3RvcmUuaXNUZWFtQWRtaW5Gb3JDdXJyZW50VGVhbSgpIHx8IFVzZXJTdG9yZS5pc1N5c3RlbUFkbWluRm9yQ3VycmVudFVzZXIoKTtcbiAgICAgICAgICAgIGlzU3lzdGVtQWRtaW4gPSBVc2VyU3RvcmUuaXNTeXN0ZW1BZG1pbkZvckN1cnJlbnRVc2VyKCk7XG5cbiAgICAgICAgICAgIGludml0ZUxpbmsgPSAoXG4gICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0nIydcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e0dsb2JhbEFjdGlvbnMuc2hvd0ludml0ZU1lbWJlck1vZGFsfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ljb24gZmEgZmEtdXNlci1wbHVzJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzaWRlYmFyX3JpZ2h0X21lbnUuaW52aXRlTmV3J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTZW5kIEVtYWlsIEludml0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYWRkVXNlclRvVGVhbUxpbmsgPSAoXG4gICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2FkZFVzZXJzVG9UZWFtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0nIydcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2hvd0FkZFVzZXJzVG9UZWFtTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0naWNvbiBmYSBmYS11c2VyLXBsdXMnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3NpZGViYXJfcmlnaHRfbWVudS5hZGRNZW1iZXJUb1RlYW0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0FkZCBNZW1iZXJzIHRvIFRlYW0nXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnRlYW1UeXBlID09PSBDb25zdGFudHMuT1BFTl9URUFNICYmIGdsb2JhbC5tbV9jb25maWcuRW5hYmxlVXNlckNyZWF0aW9uID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICB0ZWFtTGluayA9IChcbiAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e0dsb2JhbEFjdGlvbnMuc2hvd0dldFRlYW1JbnZpdGVMaW5rTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdpY29uIGZhIGZhLWxpbmsnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2lkZWJhcl9yaWdodF9tZW51LnRlYW1MaW5rJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nR2V0IFRlYW0gSW52aXRlIExpbmsnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZ2xvYmFsLndpbmRvdy5tbV9saWNlbnNlLklzTGljZW5zZWQgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgIGlmIChnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5SZXN0cmljdFRlYW1JbnZpdGUgPT09IENvbnN0YW50cy5QRVJNSVNTSU9OU19TWVNURU1fQURNSU4gJiYgIWlzU3lzdGVtQWRtaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdGVhbUxpbmsgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpbnZpdGVMaW5rID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgYWRkVXNlclRvVGVhbUxpbmsgPSBudWxsO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuUmVzdHJpY3RUZWFtSW52aXRlID09PSBDb25zdGFudHMuUEVSTUlTU0lPTlNfVEVBTV9BRE1JTiAmJiAhaXNBZG1pbikge1xuICAgICAgICAgICAgICAgICAgICB0ZWFtTGluayA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGludml0ZUxpbmsgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBhZGRVc2VyVG9UZWFtTGluayA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgbW9yZVRlYW1zID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBpc0FscmVhZHlNZW1iZXIgPSB0aGlzLnN0YXRlLnRlYW1NZW1iZXJzLnJlZHVjZSgocmVzdWx0LCBpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2l0ZW0udGVhbV9pZF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9LCB7fSk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgaWQgaW4gdGhpcy5zdGF0ZS50ZWFtTGlzdGluZ3MpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS50ZWFtTGlzdGluZ3MuaGFzT3duUHJvcGVydHkoaWQpICYmICFpc0FscmVhZHlNZW1iZXJbaWRdKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vcmVUZWFtcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1vcmVUZWFtcykge1xuICAgICAgICAgICAgICAgIGpvaW5Bbm90aGVyVGVhbUxpbmsgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxsaSBrZXk9J2pvaW5UZWFtX2xpJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPScvc2VsZWN0X3RlYW0nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0naWNvbiBmYSBmYS1wbHVzLXNxdWFyZScvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSduYXZiYXJfZHJvcGRvd24uam9pbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0pvaW4gQW5vdGhlciBUZWFtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkVuYWJsZVRlYW1DcmVhdGlvbiA9PT0gJ3RydWUnIHx8IGlzU3lzdGVtQWRtaW4pIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVUZWFtID0gKFxuICAgICAgICAgICAgICAgICAgICA8bGkga2V5PSduZXdUZWFtX2xpJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2NyZWF0ZVRlYW0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PSduZXdUZWFtX2EnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89Jy9jcmVhdGVfdGVhbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0naWNvbiBmYSBmYS1wbHVzLXNxdWFyZScvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSduYXZiYXJfZHJvcGRvd24uY3JlYXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ3JlYXRlIGEgTmV3IFRlYW0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbWFuYWdlTGluayA9IChcbiAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICA8VG9nZ2xlTW9kYWxCdXR0b24gZGlhbG9nVHlwZT17VGVhbU1lbWJlcnNNb2RhbH0+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0naWNvbiBmYSBmYS11c2VycycvPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3NpZGViYXJfcmlnaHRfbWVudS52aWV3TWVtYmVycydcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdWaWV3IE1lbWJlcnMnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9Ub2dnbGVNb2RhbEJ1dHRvbj5cbiAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgbGVhdmVUZWFtID0gKFxuICAgICAgICAgICAgPGxpIGtleT0nbGVhdmVUZWFtX2xpJz5cbiAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICBpZD0nbGVhdmVUZWFtJ1xuICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtHbG9iYWxBY3Rpb25zLnNob3dMZWF2ZVRlYW1Nb2RhbH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ljb24nXG4gICAgICAgICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogQ29uc3RhbnRzLkxFQVZFX1RFQU1fU1ZHfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSduYXZiYXJfZHJvcGRvd24ubGVhdmUnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTGVhdmUgVGVhbSdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChpc0FkbWluKSB7XG4gICAgICAgICAgICB0ZWFtU2V0dGluZ3NMaW5rID0gKFxuICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9JyMnXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRvZ2dsZT0nbW9kYWwnXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRhcmdldD0nI3RlYW1fc2V0dGluZ3MnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0naWNvbiBmYSBmYS1nbG9iZScvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2lkZWJhcl9yaWdodF9tZW51LnRlYW1TZXR0aW5ncydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVGVhbSBTZXR0aW5ncydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG1hbmFnZUxpbmsgPSAoXG4gICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICA8VG9nZ2xlTW9kYWxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ1R5cGU9e1RlYW1NZW1iZXJzTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dQcm9wcz17e2lzQWRtaW59fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ljb24gZmEgZmEtdXNlcnMnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3NpZGViYXJfcmlnaHRfbWVudS5tYW5hZ2VNZW1iZXJzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdNYW5hZ2UgTWVtYmVycydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvVG9nZ2xlTW9kYWxCdXR0b24+XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNTeXN0ZW1BZG1pbiAmJiAhVXRpbHMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgY29uc29sZUxpbmsgPSAoXG4gICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgdG89eycvYWRtaW5fY29uc29sZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ljb24gZmEgZmEtd3JlbmNoJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzaWRlYmFyX3JpZ2h0X21lbnUuY29uc29sZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU3lzdGVtIENvbnNvbGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2l0ZU5hbWUgPSAnJztcbiAgICAgICAgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLlNpdGVOYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNpdGVOYW1lID0gZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuU2l0ZU5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRlYW1EaXNwbGF5TmFtZSA9IHNpdGVOYW1lO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy50ZWFtRGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgIHRlYW1EaXNwbGF5TmFtZSA9IHRoaXMucHJvcHMudGVhbURpc3BsYXlOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGhlbHBMaW5rID0gbnVsbDtcbiAgICAgICAgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkhlbHBMaW5rKSB7XG4gICAgICAgICAgICBoZWxwTGluayA9IChcbiAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9J19ibGFuaydcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbD0nbm9vcGVuZXIgbm9yZWZlcnJlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5IZWxwTGlua31cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdpY29uIGZhIGZhLXF1ZXN0aW9uJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzaWRlYmFyX3JpZ2h0X21lbnUuaGVscCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nSGVscCdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXBvcnRMaW5rID0gbnVsbDtcbiAgICAgICAgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLlJlcG9ydEFQcm9ibGVtTGluaykge1xuICAgICAgICAgICAgcmVwb3J0TGluayA9IChcbiAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9J19ibGFuaydcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbD0nbm9vcGVuZXIgbm9yZWZlcnJlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5SZXBvcnRBUHJvYmxlbUxpbmt9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0naWNvbiBmYSBmYS1waG9uZScvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2lkZWJhcl9yaWdodF9tZW51LnJlcG9ydCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nUmVwb3J0IGEgUHJvYmxlbSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0dXRvcmlhbFRpcCA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3dUdXRvcmlhbFRpcCkge1xuICAgICAgICAgICAgdHV0b3JpYWxUaXAgPSBjcmVhdGVNZW51VGlwKChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCksIHRydWUpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZUxlZnRTaWRlYmFyKCk7XG4gICAgICAgICAgICB0aGlzLm9wZW5SaWdodFNpZGViYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBuYXRpdmVBcHBMaW5rID0gbnVsbDtcbiAgICAgICAgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkFwcERvd25sb2FkTGluayAmJiAhVXNlckFnZW50LmlzTW9iaWxlQXBwKCkpIHtcbiAgICAgICAgICAgIG5hdGl2ZUFwcExpbmsgPSAoXG4gICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PSdfYmxhbmsnXG4gICAgICAgICAgICAgICAgICAgICAgICByZWw9J25vb3BlbmVyIG5vcmVmZXJyZXInXG4gICAgICAgICAgICAgICAgICAgICAgICB0bz17dXNlU2FmZVVybChnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5BcHBEb3dubG9hZExpbmspfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ljb24gZmEgZmEtbW9iaWxlJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzaWRlYmFyX3JpZ2h0X21lbnUubmF0aXZlQXBwcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRG93bmxvYWQgQXBwcydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBhZGRVc2Vyc1RvVGVhbU1vZGFsO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG93QWRkVXNlcnNUb1RlYW1Nb2RhbCkge1xuICAgICAgICAgICAgYWRkVXNlcnNUb1RlYW1Nb2RhbCA9IChcbiAgICAgICAgICAgICAgICA8QWRkVXNlcnNUb1RlYW1cbiAgICAgICAgICAgICAgICAgICAgb25Nb2RhbERpc21pc3NlZD17dGhpcy5oaWRlQWRkVXNlcnNUb1RlYW1Nb2RhbH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0ZWFtRGl2aWRlciA9IG51bGw7XG4gICAgICAgIGlmICh0ZWFtU2V0dGluZ3NMaW5rIHx8IG1hbmFnZUxpbmsgfHwgam9pbkFub3RoZXJUZWFtTGluayB8fCBjcmVhdGVUZWFtIHx8IGxlYXZlVGVhbSkge1xuICAgICAgICAgICAgdGVhbURpdmlkZXIgPSA8bGkgY2xhc3NOYW1lPSdkaXZpZGVyJy8+O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNvbnNvbGVEaXZpZGVyID0gbnVsbDtcbiAgICAgICAgaWYgKGNvbnNvbGVMaW5rKSB7XG4gICAgICAgICAgICBjb25zb2xlRGl2aWRlciA9IDxsaSBjbGFzc05hbWU9J2RpdmlkZXInLz47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2lkZWJhci0tbWVudSdcbiAgICAgICAgICAgICAgICBpZD0nc2lkZWJhci1tZW51J1xuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZWFtX19oZWFkZXIgdGhlbWUnPlxuICAgICAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0ZWFtX19uYW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdG89Jy9jaGFubmVscy90b3duLXNxdWFyZSdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge3RlYW1EaXNwbGF5TmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J25hdi1waWxsc19fY29udGFpbmVyJz5cbiAgICAgICAgICAgICAgICAgICAge3R1dG9yaWFsVGlwfVxuICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPSduYXYgbmF2LXBpbGxzIG5hdi1zdGFja2VkJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnNlYXJjaE1lbnRpb25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdpY29uIG1lbnRpb25zJz57J0AnfTwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzaWRlYmFyX3JpZ2h0X21lbnUucmVjZW50TWVudGlvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nUmVjZW50IE1lbnRpb25zJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0nIydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5nZXRGbGFnZ2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdpY29uIGZhIGZhLWZsYWcnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzaWRlYmFyX3JpZ2h0X21lbnUuZmxhZ2dlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdGbGFnZ2VkIFBvc3RzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPSdkaXZpZGVyJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0nIydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gR2xvYmFsQWN0aW9ucy5zaG93QWNjb3VudFNldHRpbmdzTW9kYWwoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0naWNvbiBmYSBmYS1jb2cnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzaWRlYmFyX3JpZ2h0X21lbnUuYWNjb3VudFNldHRpbmdzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0FjY291bnQgU2V0dGluZ3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9J2RpdmlkZXInLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtpbnZpdGVMaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAge3RlYW1MaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAge2FkZFVzZXJUb1RlYW1MaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAge3RlYW1EaXZpZGVyfVxuICAgICAgICAgICAgICAgICAgICAgICAge3RlYW1TZXR0aW5nc0xpbmt9XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWFuYWdlTGlua31cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjcmVhdGVUZWFtfVxuICAgICAgICAgICAgICAgICAgICAgICAge2pvaW5Bbm90aGVyVGVhbUxpbmt9XG4gICAgICAgICAgICAgICAgICAgICAgICB7bGVhdmVUZWFtfVxuICAgICAgICAgICAgICAgICAgICAgICAge2NvbnNvbGVEaXZpZGVyfVxuICAgICAgICAgICAgICAgICAgICAgICAge2NvbnNvbGVMaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT0nZGl2aWRlcicvPlxuICAgICAgICAgICAgICAgICAgICAgICAge2hlbHBMaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAge3JlcG9ydExpbmt9XG4gICAgICAgICAgICAgICAgICAgICAgICB7bmF0aXZlQXBwTGlua31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUFib3V0TW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ljb24gZmEgZmEtaW5mbycvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J25hdmJhcl9kcm9wZG93bi5hYm91dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdBYm91dCBNYXR0ZXJtb3N0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPSdkaXZpZGVyJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0nIydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gR2xvYmFsQWN0aW9ucy5lbWl0VXNlckxvZ2dlZE91dEV2ZW50KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ljb24gZmEgZmEtc2lnbi1vdXQnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzaWRlYmFyX3JpZ2h0X21lbnUubG9nb3V0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ291dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxBYm91dEJ1aWxkTW9kYWxcbiAgICAgICAgICAgICAgICAgICAgc2hvdz17dGhpcy5zdGF0ZS5zaG93QWJvdXRNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgb25Nb2RhbERpc21pc3NlZD17dGhpcy5hYm91dE1vZGFsRGlzbWlzc2VkfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAge2FkZFVzZXJzVG9UZWFtTW9kYWx9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblNpZGViYXJSaWdodE1lbnUucHJvcFR5cGVzID0ge1xuICAgIHRlYW1UeXBlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHRlYW1EaXNwbGF5TmFtZTogUHJvcFR5cGVzLnN0cmluZ1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3NpZGViYXJfcmlnaHRfbWVudS5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQTVCQTtBQUNBO0FBQ0E7QUEyQkE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaEJBO0FBaUJBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQURBO0FBQ0E7QUFhQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQURBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQURBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFEQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBUEE7QUFEQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQURBO0FBQ0E7QUFVQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFUQTtBQURBO0FBQ0E7QUFpQkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQURBO0FBY0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBREE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFEQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFEQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFEQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFEQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQURBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQURBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBREE7QUFZQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFEQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBREE7QUFZQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFEQTtBQW5FQTtBQUZBO0FBbUZBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFwR0E7QUF1R0E7OztBQXhnQkE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQXlnQkE7QUFDQTtBQUNBO0FBRkE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2519\n");

/***/ }),

/***/ 2520:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(48);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _settings_sidebar = __webpack_require__(2281);\n\nvar _settings_sidebar2 = _interopRequireDefault(_settings_sidebar);\n\nvar _team_settings = __webpack_require__(2521);\n\nvar _team_settings2 = _interopRequireDefault(_team_settings);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar holders = (0, _reactIntl.defineMessages)({\n    generalTab: {\n        id: 'team_settings_modal.generalTab',\n        defaultMessage: 'General'\n    },\n    importTab: {\n        id: 'team_settings_modal.importTab',\n        defaultMessage: 'Import'\n    }\n}); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar TeamSettingsModal = function (_React$Component) {\n    (0, _inherits3.default)(TeamSettingsModal, _React$Component);\n\n    function TeamSettingsModal(props) {\n        (0, _classCallCheck3.default)(this, TeamSettingsModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (TeamSettingsModal.__proto__ || (0, _getPrototypeOf2.default)(TeamSettingsModal)).call(this, props));\n\n        _this.updateTab = _this.updateTab.bind(_this);\n        _this.updateSection = _this.updateSection.bind(_this);\n\n        _this.state = {\n            activeTab: 'general',\n            activeSection: ''\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(TeamSettingsModal, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var modal = (0, _jquery2.default)(_reactDom2.default.findDOMNode(this.refs.modal));\n\n            modal.on('click', '.modal-back', function handleBackClick() {\n                (0, _jquery2.default)(this).closest('.modal-dialog').removeClass('display--content');\n                (0, _jquery2.default)(this).closest('.modal-dialog').find('.settings-table .nav li.active').removeClass('active');\n            });\n            modal.on('click', '.modal-header .close', function () {\n                setTimeout(function () {\n                    (0, _jquery2.default)('.modal-dialog.display--content').removeClass('display--content');\n                }, 500);\n            });\n\n            if (!Utils.isMobile()) {\n                (0, _jquery2.default)('.settings-modal .settings-content').perfectScrollbar();\n            }\n        }\n    }, {\n        key: 'updateTab',\n        value: function updateTab(tab) {\n            this.setState({ activeTab: tab, activeSection: '' });\n            if (!Utils.isMobile()) {\n                (0, _jquery2.default)('.settings-modal .modal-body').scrollTop(0).perfectScrollbar('update');\n            }\n        }\n    }, {\n        key: 'updateSection',\n        value: function updateSection(section) {\n            if ((0, _jquery2.default)('.section-max').length) {\n                (0, _jquery2.default)('.settings-modal .modal-body').scrollTop(0).perfectScrollbar('update');\n            }\n            this.setState({ activeSection: section });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var formatMessage = this.props.intl.formatMessage;\n\n            var tabs = [];\n            tabs.push({ name: 'general', uiName: formatMessage(holders.generalTab), icon: 'icon fa fa-cog' });\n            tabs.push({ name: 'import', uiName: formatMessage(holders.importTab), icon: 'icon fa fa-upload' });\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    className: 'modal fade',\n                    ref: 'modal',\n                    id: 'team_settings',\n                    role: 'dialog',\n                    tabIndex: '-1',\n                    'aria-hidden': 'true'\n                },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'modal-dialog settings-modal' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'modal-content' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-header' },\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    type: 'button',\n                                    className: 'close',\n                                    'data-dismiss': 'modal',\n                                    'aria-label': 'Close'\n                                },\n                                _react2.default.createElement(\n                                    'span',\n                                    { 'aria-hidden': 'true' },\n                                    ''\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'h4',\n                                {\n                                    className: 'modal-title',\n                                    ref: 'title'\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'team_settings_modal.title',\n                                    defaultMessage: 'Team Settings'\n                                })\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-body settings-modal__body' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'settings-table' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'settings-links' },\n                                    _react2.default.createElement(_settings_sidebar2.default, {\n                                        tabs: tabs,\n                                        activeTab: this.state.activeTab,\n                                        updateTab: this.updateTab\n                                    })\n                                ),\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'settings-content minimize-settings' },\n                                    _react2.default.createElement(_team_settings2.default, {\n                                        activeTab: this.state.activeTab,\n                                        activeSection: this.state.activeSection,\n                                        updateSection: this.updateSection\n                                    })\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return TeamSettingsModal;\n}(_react2.default.Component);\n\nTeamSettingsModal.propTypes = {\n    intl: _reactIntl.intlShape.isRequired\n};\n\nexports.default = (0, _reactIntl.injectIntl)(TeamSettingsModal);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3RlYW1fc2V0dGluZ3NfbW9kYWwuanN4PzM1MmYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQge2RlZmluZU1lc3NhZ2VzLCBGb3JtYXR0ZWRNZXNzYWdlLCBpbmplY3RJbnRsLCBpbnRsU2hhcGV9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgU2V0dGluZ3NTaWRlYmFyIGZyb20gJy4vc2V0dGluZ3Nfc2lkZWJhci5qc3gnO1xuaW1wb3J0IFRlYW1TZXR0aW5ncyBmcm9tICcuL3RlYW1fc2V0dGluZ3MuanN4JztcblxuY29uc3QgaG9sZGVycyA9IGRlZmluZU1lc3NhZ2VzKHtcbiAgICBnZW5lcmFsVGFiOiB7XG4gICAgICAgIGlkOiAndGVhbV9zZXR0aW5nc19tb2RhbC5nZW5lcmFsVGFiJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdHZW5lcmFsJ1xuICAgIH0sXG4gICAgaW1wb3J0VGFiOiB7XG4gICAgICAgIGlkOiAndGVhbV9zZXR0aW5nc19tb2RhbC5pbXBvcnRUYWInLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ltcG9ydCdcbiAgICB9XG59KTtcblxuY2xhc3MgVGVhbVNldHRpbmdzTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVRhYiA9IHRoaXMudXBkYXRlVGFiLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbiA9IHRoaXMudXBkYXRlU2VjdGlvbi5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBhY3RpdmVUYWI6ICdnZW5lcmFsJyxcbiAgICAgICAgICAgIGFjdGl2ZVNlY3Rpb246ICcnXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBjb25zdCBtb2RhbCA9ICQoUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzLm1vZGFsKSk7XG5cbiAgICAgICAgbW9kYWwub24oJ2NsaWNrJywgJy5tb2RhbC1iYWNrJywgZnVuY3Rpb24gaGFuZGxlQmFja0NsaWNrKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcubW9kYWwtZGlhbG9nJykucmVtb3ZlQ2xhc3MoJ2Rpc3BsYXktLWNvbnRlbnQnKTtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLm1vZGFsLWRpYWxvZycpLmZpbmQoJy5zZXR0aW5ncy10YWJsZSAubmF2IGxpLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1vZGFsLm9uKCdjbGljaycsICcubW9kYWwtaGVhZGVyIC5jbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICQoJy5tb2RhbC1kaWFsb2cuZGlzcGxheS0tY29udGVudCcpLnJlbW92ZUNsYXNzKCdkaXNwbGF5LS1jb250ZW50Jyk7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIVV0aWxzLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgICQoJy5zZXR0aW5ncy1tb2RhbCAuc2V0dGluZ3MtY29udGVudCcpLnBlcmZlY3RTY3JvbGxiYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVUYWIodGFiKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2FjdGl2ZVRhYjogdGFiLCBhY3RpdmVTZWN0aW9uOiAnJ30pO1xuICAgICAgICBpZiAoIVV0aWxzLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgICQoJy5zZXR0aW5ncy1tb2RhbCAubW9kYWwtYm9keScpLnNjcm9sbFRvcCgwKS5wZXJmZWN0U2Nyb2xsYmFyKCd1cGRhdGUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVTZWN0aW9uKHNlY3Rpb24pIHtcbiAgICAgICAgaWYgKCQoJy5zZWN0aW9uLW1heCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgJCgnLnNldHRpbmdzLW1vZGFsIC5tb2RhbC1ib2R5Jykuc2Nyb2xsVG9wKDApLnBlcmZlY3RTY3JvbGxiYXIoJ3VwZGF0ZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2FjdGl2ZVNlY3Rpb246IHNlY3Rpb259KTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7Zm9ybWF0TWVzc2FnZX0gPSB0aGlzLnByb3BzLmludGw7XG4gICAgICAgIGNvbnN0IHRhYnMgPSBbXTtcbiAgICAgICAgdGFicy5wdXNoKHtuYW1lOiAnZ2VuZXJhbCcsIHVpTmFtZTogZm9ybWF0TWVzc2FnZShob2xkZXJzLmdlbmVyYWxUYWIpLCBpY29uOiAnaWNvbiBmYSBmYS1jb2cnfSk7XG4gICAgICAgIHRhYnMucHVzaCh7bmFtZTogJ2ltcG9ydCcsIHVpTmFtZTogZm9ybWF0TWVzc2FnZShob2xkZXJzLmltcG9ydFRhYiksIGljb246ICdpY29uIGZhIGZhLXVwbG9hZCd9KTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbW9kYWwgZmFkZSdcbiAgICAgICAgICAgICAgICByZWY9J21vZGFsJ1xuICAgICAgICAgICAgICAgIGlkPSd0ZWFtX3NldHRpbmdzJ1xuICAgICAgICAgICAgICAgIHJvbGU9J2RpYWxvZydcbiAgICAgICAgICAgICAgICB0YWJJbmRleD0nLTEnXG4gICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49J3RydWUnXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWRpYWxvZyBzZXR0aW5ncy1tb2RhbCc+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtb2RhbC1jb250ZW50Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtb2RhbC1oZWFkZXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Nsb3NlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWRpc21pc3M9J21vZGFsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSdDbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPSd0cnVlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnw5cnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbW9kYWwtdGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0ndGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3RlYW1fc2V0dGluZ3NfbW9kYWwudGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVGVhbSBTZXR0aW5ncydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbW9kYWwtYm9keSBzZXR0aW5ncy1tb2RhbF9fYm9keSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmdzLXRhYmxlJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmdzLWxpbmtzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZXR0aW5nc1NpZGViYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzPXt0YWJzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17dGhpcy5zdGF0ZS5hY3RpdmVUYWJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGFiPXt0aGlzLnVwZGF0ZVRhYn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2V0dGluZ3MtY29udGVudCBtaW5pbWl6ZS1zZXR0aW5ncyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGVhbVNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiPXt0aGlzLnN0YXRlLmFjdGl2ZVRhYn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVTZWN0aW9uPXt0aGlzLnN0YXRlLmFjdGl2ZVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dGhpcy51cGRhdGVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblRlYW1TZXR0aW5nc01vZGFsLnByb3BUeXBlcyA9IHtcbiAgICBpbnRsOiBpbnRsU2hhcGUuaXNSZXF1aXJlZFxufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5qZWN0SW50bChUZWFtU2V0dGluZ3NNb2RhbCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy90ZWFtX3NldHRpbmdzX21vZGFsLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFiQTtBQUNBO0FBdUJBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFOQTtBQVVBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFOQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUFYQTtBQXFCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFSQTtBQURBO0FBdEJBO0FBREE7QUFSQTtBQXFEQTs7O0FBckdBO0FBQ0E7QUF1R0E7QUFDQTtBQURBO0FBQ0E7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2520\n");

/***/ }),

/***/ 2521:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _team_general_tab = __webpack_require__(2522);\n\nvar _team_general_tab2 = _interopRequireDefault(_team_general_tab);\n\nvar _team_import_tab = __webpack_require__(2523);\n\nvar _team_import_tab2 = _interopRequireDefault(_team_import_tab);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar TeamSettings = function (_React$Component) {\n    (0, _inherits3.default)(TeamSettings, _React$Component);\n\n    function TeamSettings(props) {\n        (0, _classCallCheck3.default)(this, TeamSettings);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (TeamSettings.__proto__ || (0, _getPrototypeOf2.default)(TeamSettings)).call(this, props));\n\n        _this.onChange = _this.onChange.bind(_this);\n\n        _this.state = { team: _team_store2.default.getCurrent() };\n        return _this;\n    }\n\n    (0, _createClass3.default)(TeamSettings, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _team_store2.default.addChangeListener(this.onChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _team_store2.default.removeChangeListener(this.onChange);\n        }\n    }, {\n        key: 'onChange',\n        value: function onChange() {\n            var team = _team_store2.default.getCurrent();\n\n            if (!Utils.areObjectsEqual(this.state.team, team)) {\n                this.setState({ team: team });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!this.state.team) {\n                return null;\n            }\n            var result;\n            switch (this.props.activeTab) {\n                case 'general':\n                    result = _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement(_team_general_tab2.default, {\n                            team: this.state.team,\n                            activeSection: this.props.activeSection,\n                            updateSection: this.props.updateSection\n                        })\n                    );\n                    break;\n                case 'import':\n                    result = _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement(_team_import_tab2.default, {\n                            team: this.state.team,\n                            activeSection: this.props.activeSection,\n                            updateSection: this.props.updateSection\n                        })\n                    );\n                    break;\n                default:\n                    result = _react2.default.createElement('div', null);\n                    break;\n            }\n            return result;\n        }\n    }]);\n    return TeamSettings;\n}(_react2.default.Component);\n\nexports.default = TeamSettings;\n\n\nTeamSettings.defaultProps = {\n    activeTab: '',\n    activeSection: ''\n};\n\nTeamSettings.propTypes = {\n    activeTab: _propTypes2.default.string.isRequired,\n    activeSection: _propTypes2.default.string.isRequired,\n    updateSection: _propTypes2.default.func.isRequired\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3RlYW1fc2V0dGluZ3MuanN4PzYzYjQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IFRlYW1TdG9yZSBmcm9tICdzdG9yZXMvdGVhbV9zdG9yZS5qc3gnO1xuXG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgR2VuZXJhbFRhYiBmcm9tICcuL3RlYW1fZ2VuZXJhbF90YWIuanN4JztcbmltcG9ydCBJbXBvcnRUYWIgZnJvbSAnLi90ZWFtX2ltcG9ydF90YWIuanN4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVhbVNldHRpbmdzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge3RlYW06IFRlYW1TdG9yZS5nZXRDdXJyZW50KCl9O1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgVGVhbVN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMub25DaGFuZ2UpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgVGVhbVN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMub25DaGFuZ2UpO1xuICAgIH1cbiAgICBvbkNoYW5nZSgpIHtcbiAgICAgICAgdmFyIHRlYW0gPSBUZWFtU3RvcmUuZ2V0Q3VycmVudCgpO1xuXG4gICAgICAgIGlmICghVXRpbHMuYXJlT2JqZWN0c0VxdWFsKHRoaXMuc3RhdGUudGVhbSwgdGVhbSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3RlYW19KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS50ZWFtKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICBzd2l0Y2ggKHRoaXMucHJvcHMuYWN0aXZlVGFiKSB7XG4gICAgICAgIGNhc2UgJ2dlbmVyYWwnOlxuICAgICAgICAgICAgcmVzdWx0ID0gKFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxHZW5lcmFsVGFiXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZWFtPXt0aGlzLnN0YXRlLnRlYW19XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVTZWN0aW9uPXt0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2ltcG9ydCc6XG4gICAgICAgICAgICByZXN1bHQgPSAoXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPEltcG9ydFRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgdGVhbT17dGhpcy5zdGF0ZS50ZWFtfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlU2VjdGlvbj17dGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dGhpcy5wcm9wcy51cGRhdGVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmVzdWx0ID0gKFxuICAgICAgICAgICAgICAgIDxkaXYvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuXG5UZWFtU2V0dGluZ3MuZGVmYXVsdFByb3BzID0ge1xuICAgIGFjdGl2ZVRhYjogJycsXG4gICAgYWN0aXZlU2VjdGlvbjogJydcbn07XG5cblRlYW1TZXR0aW5ncy5wcm9wVHlwZXMgPSB7XG4gICAgYWN0aXZlVGFiOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgYWN0aXZlU2VjdGlvbjogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHVwZGF0ZVNlY3Rpb246IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy90ZWFtX3NldHRpbmdzLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFaQTtBQUNBO0FBQ0E7QUFXQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUxBO0FBTUE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFEQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBREE7QUFRQTtBQUNBO0FBQ0E7QUFHQTtBQTNCQTtBQTZCQTtBQUNBOzs7QUF4REE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQXlEQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFIQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2521\n");

/***/ }),

/***/ 2522:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _team_actions = __webpack_require__(453);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _setting_item_max = __webpack_require__(770);\n\nvar _setting_item_max2 = _interopRequireDefault(_setting_item_max);\n\nvar _setting_item_min = __webpack_require__(771);\n\nvar _setting_item_min2 = _interopRequireDefault(_setting_item_min);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar GeneralTab = function (_React$Component) {\n    (0, _inherits3.default)(GeneralTab, _React$Component);\n\n    function GeneralTab(props) {\n        (0, _classCallCheck3.default)(this, GeneralTab);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (GeneralTab.__proto__ || (0, _getPrototypeOf2.default)(GeneralTab)).call(this, props));\n\n        _this.updateSection = _this.updateSection.bind(_this);\n        _this.handleNameSubmit = _this.handleNameSubmit.bind(_this);\n        _this.handleInviteIdSubmit = _this.handleInviteIdSubmit.bind(_this);\n        _this.handleOpenInviteSubmit = _this.handleOpenInviteSubmit.bind(_this);\n        _this.handleDescriptionSubmit = _this.handleDescriptionSubmit.bind(_this);\n        _this.handleClose = _this.handleClose.bind(_this);\n        _this.onUpdateNameSection = _this.onUpdateNameSection.bind(_this);\n        _this.updateName = _this.updateName.bind(_this);\n        _this.updateDescription = _this.updateDescription.bind(_this);\n        _this.onUpdateDescriptionSection = _this.onUpdateDescriptionSection.bind(_this);\n        _this.onUpdateInviteIdSection = _this.onUpdateInviteIdSection.bind(_this);\n        _this.updateInviteId = _this.updateInviteId.bind(_this);\n        _this.onUpdateOpenInviteSection = _this.onUpdateOpenInviteSection.bind(_this);\n        _this.handleOpenInviteRadio = _this.handleOpenInviteRadio.bind(_this);\n        _this.handleGenerateInviteId = _this.handleGenerateInviteId.bind(_this);\n\n        _this.state = _this.setupInitialState(props);\n        return _this;\n    }\n\n    (0, _createClass3.default)(GeneralTab, [{\n        key: 'updateSection',\n        value: function updateSection(section) {\n            if ((0, _jquery2.default)('.section-max').length) {\n                (0, _jquery2.default)('.settings-modal .modal-body').scrollTop(0).perfectScrollbar('update');\n            }\n            this.setState(this.setupInitialState(this.props));\n            this.props.updateSection(section);\n        }\n    }, {\n        key: 'setupInitialState',\n        value: function setupInitialState(props) {\n            var team = props.team;\n\n            return {\n                name: team.display_name,\n                invite_id: team.invite_id,\n                allow_open_invite: team.allow_open_invite,\n                description: team.description,\n                serverError: '',\n                clientError: ''\n            };\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            this.setState({\n                name: nextProps.team.display_name,\n                description: nextProps.team.description,\n                invite_id: nextProps.team.invite_id,\n                allow_open_invite: nextProps.team.allow_open_invite\n            });\n        }\n    }, {\n        key: 'handleGenerateInviteId',\n        value: function handleGenerateInviteId(e) {\n            e.preventDefault();\n\n            var newId = '';\n            for (var i = 0; i < 32; i++) {\n                newId += Math.floor(Math.random() * 16).toString(16);\n            }\n\n            this.setState({ invite_id: newId });\n        }\n    }, {\n        key: 'handleOpenInviteRadio',\n        value: function handleOpenInviteRadio(openInvite) {\n            this.setState({ allow_open_invite: openInvite });\n        }\n    }, {\n        key: 'handleOpenInviteSubmit',\n        value: function handleOpenInviteSubmit(e) {\n            var _this2 = this;\n\n            e.preventDefault();\n\n            var state = { serverError: '', clientError: '' };\n\n            var data = (0, _extends3.default)({}, this.props.team);\n            data.allow_open_invite = this.state.allow_open_invite;\n            (0, _team_actions.updateTeam)(data, function () {\n                _this2.updateSection('');\n            }, function (err) {\n                state.serverError = err.message;\n                _this2.setState(state);\n            });\n        }\n    }, {\n        key: 'handleNameSubmit',\n        value: function handleNameSubmit(e) {\n            var _this3 = this;\n\n            e.preventDefault();\n\n            var state = { serverError: '', clientError: '' };\n            var valid = true;\n\n            var name = this.state.name.trim();\n            if (name) {\n                state.clientError = '';\n            } else {\n                state.clientError = Utils.localizeMessage('general_tab.required', 'This field is required');\n                valid = false;\n            }\n\n            this.setState(state);\n\n            if (!valid) {\n                return;\n            }\n\n            var data = (0, _extends3.default)({}, this.props.team);\n            data.display_name = this.state.name;\n            (0, _team_actions.updateTeam)(data, function () {\n                _this3.updateSection('');\n            }, function (err) {\n                state.serverError = err.message;\n                _this3.setState(state);\n            });\n        }\n    }, {\n        key: 'handleInviteIdSubmit',\n        value: function handleInviteIdSubmit(e) {\n            var _this4 = this;\n\n            e.preventDefault();\n\n            var state = { serverError: '', clientError: '' };\n            var valid = true;\n\n            var inviteId = this.state.invite_id.trim();\n            if (inviteId) {\n                state.clientError = '';\n            } else {\n                state.clientError = Utils.localizeMessage('general_tab.required', 'This field is required');\n                valid = false;\n            }\n\n            this.setState(state);\n\n            if (!valid) {\n                return;\n            }\n\n            var data = (0, _extends3.default)({}, this.props.team);\n            data.invite_id = this.state.invite_id;\n            (0, _team_actions.updateTeam)(data, function () {\n                _this4.updateSection('');\n            }, function (err) {\n                state.serverError = err.message;\n                _this4.setState(state);\n            });\n        }\n    }, {\n        key: 'handleClose',\n        value: function handleClose() {\n            this.updateSection('');\n        }\n    }, {\n        key: 'handleDescriptionSubmit',\n        value: function handleDescriptionSubmit(e) {\n            var _this5 = this;\n\n            e.preventDefault();\n\n            var state = { serverError: '', clientError: '' };\n            var valid = true;\n\n            var description = this.state.description.trim();\n            if (description === this.props.team.description) {\n                state.clientError = Utils.localizeMessage('general_tab.chooseDescription', 'Please choose a new description for your team');\n                valid = false;\n            } else {\n                state.clientError = '';\n            }\n\n            this.setState(state);\n\n            if (!valid) {\n                return;\n            }\n\n            var data = (0, _extends3.default)({}, this.props.team);\n            data.description = this.state.description;\n            (0, _team_actions.updateTeam)(data, function () {\n                _this5.updateSection('');\n            }, function (err) {\n                state.serverError = err.message;\n                _this5.setState(state);\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            (0, _jquery2.default)('#team_settings').on('hidden.bs.modal', this.handleClose);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            (0, _jquery2.default)('#team_settings').off('hidden.bs.modal', this.handleClose);\n        }\n    }, {\n        key: 'onUpdateNameSection',\n        value: function onUpdateNameSection(e) {\n            e.preventDefault();\n            if (this.props.activeSection === 'name') {\n                this.updateSection('');\n            } else {\n                this.updateSection('name');\n            }\n        }\n    }, {\n        key: 'onUpdateDescriptionSection',\n        value: function onUpdateDescriptionSection(e) {\n            e.preventDefault();\n            if (this.props.activeSection === 'description') {\n                this.updateSection('');\n            } else {\n                this.updateSection('description');\n            }\n        }\n    }, {\n        key: 'onUpdateInviteIdSection',\n        value: function onUpdateInviteIdSection(e) {\n            e.preventDefault();\n            if (this.props.activeSection === 'invite_id') {\n                this.updateSection('');\n            } else {\n                this.updateSection('invite_id');\n            }\n        }\n    }, {\n        key: 'onUpdateOpenInviteSection',\n        value: function onUpdateOpenInviteSection(e) {\n            e.preventDefault();\n            if (this.props.activeSection === 'open_invite') {\n                this.updateSection('');\n            } else {\n                this.updateSection('open_invite');\n            }\n        }\n    }, {\n        key: 'updateName',\n        value: function updateName(e) {\n            this.setState({ name: e.target.value });\n        }\n    }, {\n        key: 'updateDescription',\n        value: function updateDescription(e) {\n            this.setState({ description: e.target.value });\n        }\n    }, {\n        key: 'updateInviteId',\n        value: function updateInviteId(e) {\n            this.setState({ invite_id: e.target.value });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var clientError = null;\n            var serverError = null;\n            if (this.state.clientError) {\n                clientError = this.state.clientError;\n            }\n            if (this.state.serverError) {\n                serverError = this.state.serverError;\n            }\n\n            var openInviteSection = void 0;\n            if (this.props.activeSection === 'open_invite') {\n                var inputs = [_react2.default.createElement(\n                    'div',\n                    { key: 'userOpenInviteOptions' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'teamOpenInvite',\n                                name: 'userOpenInviteOptions',\n                                type: 'radio',\n                                defaultChecked: this.state.allow_open_invite,\n                                onChange: this.handleOpenInviteRadio.bind(this, true)\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'general_tab.yes',\n                                defaultMessage: 'Yes'\n                            })\n                        ),\n                        _react2.default.createElement('br', null)\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'teamOpenInviteNo',\n                                name: 'userOpenInviteOptions',\n                                type: 'radio',\n                                defaultChecked: !this.state.allow_open_invite,\n                                onChange: this.handleOpenInviteRadio.bind(this, false)\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'general_tab.no',\n                                defaultMessage: 'No'\n                            })\n                        ),\n                        _react2.default.createElement('br', null)\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'general_tab.openInviteDesc',\n                            defaultMessage: 'When allowed, a link to this team will be included on the landing page allowing anyone with an account to join this team.'\n                        })\n                    )\n                )];\n\n                openInviteSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: Utils.localizeMessage('general_tab.openInviteTitle', 'Allow any user with an account on this server to join this team'),\n                    inputs: inputs,\n                    submit: this.handleOpenInviteSubmit,\n                    server_error: serverError,\n                    updateSection: this.onUpdateOpenInviteSection\n                });\n            } else {\n                var _describe = '';\n                if (this.state.allow_open_invite === true) {\n                    _describe = Utils.localizeMessage('general_tab.yes', 'Yes');\n                } else {\n                    _describe = Utils.localizeMessage('general_tab.no', 'No');\n                }\n\n                openInviteSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: Utils.localizeMessage('general_tab.openInviteTitle', 'Allow any user with an account on this server to join this team'),\n                    describe: _describe,\n                    updateSection: this.onUpdateOpenInviteSection\n                });\n            }\n\n            var inviteSection = void 0;\n\n            if (this.props.activeSection === 'invite_id') {\n                var _inputs = [];\n\n                _inputs.push(_react2.default.createElement(\n                    'div',\n                    { key: 'teamInviteSetting' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'row' },\n                        _react2.default.createElement('label', { className: 'col-sm-5 control-label visible-xs-block' }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-sm-12' },\n                            _react2.default.createElement('input', {\n                                id: 'teamInviteId',\n                                className: 'form-control',\n                                type: 'text',\n                                onChange: this.updateInviteId,\n                                value: this.state.invite_id,\n                                maxLength: '32'\n                            }),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'padding-top x2' },\n                                _react2.default.createElement(\n                                    'button',\n                                    {\n                                        id: 'teamInviteIdRegenerate',\n                                        className: 'color--link style--none',\n                                        onClick: this.handleGenerateInviteId\n                                    },\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'general_tab.regenerate',\n                                        defaultMessage: 'Regenerate'\n                                    })\n                                )\n                            )\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'setting-list__hint' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'general_tab.codeLongDesc',\n                            defaultMessage: 'The Invite Code is used as part of the URL in the team invitation link created by {getTeamInviteLink} in the main menu. Regenerating creates a new team invitation link and invalidates the previous link.',\n                            values: {\n                                getTeamInviteLink: _react2.default.createElement(\n                                    'strong',\n                                    null,\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'general_tab.getTeamInviteLink',\n                                        defaultMessage: 'Get Team Invite Link'\n                                    })\n                                )\n                            }\n                        })\n                    )\n                ));\n\n                inviteSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: Utils.localizeMessage('general_tab.codeTitle', 'Invite Code'),\n                    inputs: _inputs,\n                    submit: this.handleInviteIdSubmit,\n                    server_error: serverError,\n                    client_error: clientError,\n                    updateSection: this.onUpdateInviteIdSection\n                });\n            } else {\n                inviteSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: Utils.localizeMessage('general_tab.codeTitle', 'Invite Code'),\n                    describe: Utils.localizeMessage('general_tab.codeDesc', \"Click 'Edit' to regenerate Invite Code.\"),\n                    updateSection: this.onUpdateInviteIdSection\n                });\n            }\n\n            var nameSection = void 0;\n\n            if (this.props.activeSection === 'name') {\n                var _inputs2 = [];\n\n                var teamNameLabel = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'general_tab.teamName',\n                    defaultMessage: 'Team Name'\n                });\n                if (Utils.isMobile()) {\n                    teamNameLabel = '';\n                }\n\n                _inputs2.push(_react2.default.createElement(\n                    'div',\n                    {\n                        key: 'teamNameSetting',\n                        className: 'form-group'\n                    },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'col-sm-5 control-label' },\n                        teamNameLabel\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'col-sm-7' },\n                        _react2.default.createElement('input', {\n                            id: 'teamName',\n                            className: 'form-control',\n                            type: 'text',\n                            maxLength: _constants2.default.MAX_TEAMNAME_LENGTH.toString(),\n                            onChange: this.updateName,\n                            value: this.state.name\n                        })\n                    )\n                ));\n\n                var nameExtraInfo = _react2.default.createElement(\n                    'span',\n                    null,\n                    Utils.localizeMessage('general_tab.teamNameInfo', 'Set the name of the team as it appears on your sign-in screen and at the top of the left-hand sidebar.')\n                );\n\n                nameSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: Utils.localizeMessage('general_tab.teamName', 'Team Name'),\n                    inputs: _inputs2,\n                    submit: this.handleNameSubmit,\n                    server_error: serverError,\n                    client_error: clientError,\n                    updateSection: this.onUpdateNameSection,\n                    extraInfo: nameExtraInfo\n                });\n            } else {\n                var describe = this.state.name;\n\n                nameSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: Utils.localizeMessage('general_tab.teamName', 'Team Name'),\n                    describe: describe,\n                    updateSection: this.onUpdateNameSection\n                });\n            }\n\n            var descriptionSection = void 0;\n\n            if (this.props.activeSection === 'description') {\n                var _inputs3 = [];\n\n                var teamDescriptionLabel = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'general_tab.teamDescription',\n                    defaultMessage: 'Team Description'\n                });\n                if (Utils.isMobile()) {\n                    teamDescriptionLabel = '';\n                }\n\n                _inputs3.push(_react2.default.createElement(\n                    'div',\n                    {\n                        key: 'teamDescriptionSetting',\n                        className: 'form-group'\n                    },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'col-sm-5 control-label' },\n                        teamDescriptionLabel\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'col-sm-7' },\n                        _react2.default.createElement('input', {\n                            id: 'teamDescription',\n                            className: 'form-control',\n                            type: 'text',\n                            maxLength: _constants2.default.MAX_TEAMDESCRIPTION_LENGTH.toString(),\n                            onChange: this.updateDescription,\n                            value: this.state.description\n                        })\n                    )\n                ));\n\n                var descriptionExtraInfo = _react2.default.createElement(\n                    'span',\n                    null,\n                    Utils.localizeMessage('general_tab.teamDescriptionInfo', 'Team description provides additional information to help users select the right team. Maximum of 50 characters.')\n                );\n\n                descriptionSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: Utils.localizeMessage('general_tab.teamDescription', 'Team Description'),\n                    inputs: _inputs3,\n                    submit: this.handleDescriptionSubmit,\n                    server_error: serverError,\n                    client_error: clientError,\n                    updateSection: this.onUpdateDescriptionSection,\n                    extraInfo: descriptionExtraInfo\n                });\n            } else {\n                var describemsg = '';\n                if (this.state.description) {\n                    describemsg = this.state.description;\n                } else {\n                    describemsg = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'general_tab.emptyDescription',\n                        defaultMessage: 'Click \\'Edit\\' to add a team description.'\n                    });\n                }\n\n                descriptionSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: Utils.localizeMessage('general_tab.teamDescription', 'Team Description'),\n                    describe: describemsg,\n                    updateSection: this.onUpdateDescriptionSection\n                });\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'div',\n                    { className: 'modal-header' },\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            id: 'closeButton',\n                            type: 'button',\n                            className: 'close',\n                            'data-dismiss': 'modal',\n                            'aria-label': 'Close'\n                        },\n                        _react2.default.createElement(\n                            'span',\n                            { 'aria-hidden': 'true' },\n                            ''\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'h4',\n                        {\n                            className: 'modal-title',\n                            ref: 'title'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-back' },\n                            _react2.default.createElement('i', { className: 'fa fa-angle-left' })\n                        ),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'general_tab.title',\n                            defaultMessage: 'General Settings'\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    {\n                        ref: 'wrapper',\n                        className: 'user-settings'\n                    },\n                    _react2.default.createElement(\n                        'h3',\n                        { className: 'tab-header' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'general_tab.title',\n                            defaultMessage: 'General Settings'\n                        })\n                    ),\n                    _react2.default.createElement('div', { className: 'divider-dark first' }),\n                    nameSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    descriptionSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    openInviteSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    inviteSection,\n                    _react2.default.createElement('div', { className: 'divider-dark' })\n                )\n            );\n        }\n    }]);\n    return GeneralTab;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nGeneralTab.propTypes = {\n    updateSection: _propTypes2.default.func.isRequired,\n    team: _propTypes2.default.object.isRequired,\n    activeSection: _propTypes2.default.string.isRequired\n};\n\nexports.default = GeneralTab;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3RlYW1fZ2VuZXJhbF90YWIuanN4PzlkMTciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCB7dXBkYXRlVGVhbX0gZnJvbSAnYWN0aW9ucy90ZWFtX2FjdGlvbnMuanN4JztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCBTZXR0aW5nSXRlbU1heCBmcm9tICcuL3NldHRpbmdfaXRlbV9tYXguanN4JztcbmltcG9ydCBTZXR0aW5nSXRlbU1pbiBmcm9tICcuL3NldHRpbmdfaXRlbV9taW4uanN4JztcblxuY2xhc3MgR2VuZXJhbFRhYiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbiA9IHRoaXMudXBkYXRlU2VjdGlvbi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZU5hbWVTdWJtaXQgPSB0aGlzLmhhbmRsZU5hbWVTdWJtaXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVJbnZpdGVJZFN1Ym1pdCA9IHRoaXMuaGFuZGxlSW52aXRlSWRTdWJtaXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVPcGVuSW52aXRlU3VibWl0ID0gdGhpcy5oYW5kbGVPcGVuSW52aXRlU3VibWl0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlRGVzY3JpcHRpb25TdWJtaXQgPSB0aGlzLmhhbmRsZURlc2NyaXB0aW9uU3VibWl0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2xvc2UgPSB0aGlzLmhhbmRsZUNsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25VcGRhdGVOYW1lU2VjdGlvbiA9IHRoaXMub25VcGRhdGVOYW1lU2VjdGlvbi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZU5hbWUgPSB0aGlzLnVwZGF0ZU5hbWUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVEZXNjcmlwdGlvbiA9IHRoaXMudXBkYXRlRGVzY3JpcHRpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblVwZGF0ZURlc2NyaXB0aW9uU2VjdGlvbiA9IHRoaXMub25VcGRhdGVEZXNjcmlwdGlvblNlY3Rpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblVwZGF0ZUludml0ZUlkU2VjdGlvbiA9IHRoaXMub25VcGRhdGVJbnZpdGVJZFNlY3Rpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVJbnZpdGVJZCA9IHRoaXMudXBkYXRlSW52aXRlSWQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblVwZGF0ZU9wZW5JbnZpdGVTZWN0aW9uID0gdGhpcy5vblVwZGF0ZU9wZW5JbnZpdGVTZWN0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlT3Blbkludml0ZVJhZGlvID0gdGhpcy5oYW5kbGVPcGVuSW52aXRlUmFkaW8uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVHZW5lcmF0ZUludml0ZUlkID0gdGhpcy5oYW5kbGVHZW5lcmF0ZUludml0ZUlkLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuc2V0dXBJbml0aWFsU3RhdGUocHJvcHMpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNlY3Rpb24oc2VjdGlvbikge1xuICAgICAgICBpZiAoJCgnLnNlY3Rpb24tbWF4JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAkKCcuc2V0dGluZ3MtbW9kYWwgLm1vZGFsLWJvZHknKS5zY3JvbGxUb3AoMCkucGVyZmVjdFNjcm9sbGJhcigndXBkYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnNldHVwSW5pdGlhbFN0YXRlKHRoaXMucHJvcHMpKTtcbiAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVTZWN0aW9uKHNlY3Rpb24pO1xuICAgIH1cblxuICAgIHNldHVwSW5pdGlhbFN0YXRlKHByb3BzKSB7XG4gICAgICAgIGNvbnN0IHRlYW0gPSBwcm9wcy50ZWFtO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0ZWFtLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgICAgIGludml0ZV9pZDogdGVhbS5pbnZpdGVfaWQsXG4gICAgICAgICAgICBhbGxvd19vcGVuX2ludml0ZTogdGVhbS5hbGxvd19vcGVuX2ludml0ZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0ZWFtLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgc2VydmVyRXJyb3I6ICcnLFxuICAgICAgICAgICAgY2xpZW50RXJyb3I6ICcnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBuYW1lOiBuZXh0UHJvcHMudGVhbS5kaXNwbGF5X25hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogbmV4dFByb3BzLnRlYW0uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBpbnZpdGVfaWQ6IG5leHRQcm9wcy50ZWFtLmludml0ZV9pZCxcbiAgICAgICAgICAgIGFsbG93X29wZW5faW52aXRlOiBuZXh0UHJvcHMudGVhbS5hbGxvd19vcGVuX2ludml0ZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVHZW5lcmF0ZUludml0ZUlkKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBuZXdJZCA9ICcnO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMyOyBpKyspIHtcbiAgICAgICAgICAgIG5ld0lkICs9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE2KS50b1N0cmluZygxNik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpbnZpdGVfaWQ6IG5ld0lkfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlT3Blbkludml0ZVJhZGlvKG9wZW5JbnZpdGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWxsb3dfb3Blbl9pbnZpdGU6IG9wZW5JbnZpdGV9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVPcGVuSW52aXRlU3VibWl0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBzdGF0ZSA9IHtzZXJ2ZXJFcnJvcjogJycsIGNsaWVudEVycm9yOiAnJ307XG5cbiAgICAgICAgdmFyIGRhdGEgPSB7Li4udGhpcy5wcm9wcy50ZWFtfTtcbiAgICAgICAgZGF0YS5hbGxvd19vcGVuX2ludml0ZSA9IHRoaXMuc3RhdGUuYWxsb3dfb3Blbl9pbnZpdGU7XG4gICAgICAgIHVwZGF0ZVRlYW0oZGF0YSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5zZXJ2ZXJFcnJvciA9IGVyci5tZXNzYWdlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGhhbmRsZU5hbWVTdWJtaXQoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIHN0YXRlID0ge3NlcnZlckVycm9yOiAnJywgY2xpZW50RXJyb3I6ICcnfTtcbiAgICAgICAgbGV0IHZhbGlkID0gdHJ1ZTtcblxuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5zdGF0ZS5uYW1lLnRyaW0oKTtcbiAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgIHN0YXRlLmNsaWVudEVycm9yID0gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZS5jbGllbnRFcnJvciA9IFV0aWxzLmxvY2FsaXplTWVzc2FnZSgnZ2VuZXJhbF90YWIucmVxdWlyZWQnLCAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZCcpO1xuICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuXG4gICAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRhID0gey4uLnRoaXMucHJvcHMudGVhbX07XG4gICAgICAgIGRhdGEuZGlzcGxheV9uYW1lID0gdGhpcy5zdGF0ZS5uYW1lO1xuICAgICAgICB1cGRhdGVUZWFtKGRhdGEsXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCcnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RhdGUuc2VydmVyRXJyb3IgPSBlcnIubWVzc2FnZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBoYW5kbGVJbnZpdGVJZFN1Ym1pdChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB2YXIgc3RhdGUgPSB7c2VydmVyRXJyb3I6ICcnLCBjbGllbnRFcnJvcjogJyd9O1xuICAgICAgICBsZXQgdmFsaWQgPSB0cnVlO1xuXG4gICAgICAgIGNvbnN0IGludml0ZUlkID0gdGhpcy5zdGF0ZS5pbnZpdGVfaWQudHJpbSgpO1xuICAgICAgICBpZiAoaW52aXRlSWQpIHtcbiAgICAgICAgICAgIHN0YXRlLmNsaWVudEVycm9yID0gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZS5jbGllbnRFcnJvciA9IFV0aWxzLmxvY2FsaXplTWVzc2FnZSgnZ2VuZXJhbF90YWIucmVxdWlyZWQnLCAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZCcpO1xuICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuXG4gICAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRhID0gey4uLnRoaXMucHJvcHMudGVhbX07XG4gICAgICAgIGRhdGEuaW52aXRlX2lkID0gdGhpcy5zdGF0ZS5pbnZpdGVfaWQ7XG4gICAgICAgIHVwZGF0ZVRlYW0oZGF0YSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5zZXJ2ZXJFcnJvciA9IGVyci5tZXNzYWdlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGhhbmRsZUNsb3NlKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgIH1cblxuICAgIGhhbmRsZURlc2NyaXB0aW9uU3VibWl0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBzdGF0ZSA9IHtzZXJ2ZXJFcnJvcjogJycsIGNsaWVudEVycm9yOiAnJ307XG4gICAgICAgIGxldCB2YWxpZCA9IHRydWU7XG5cbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLnN0YXRlLmRlc2NyaXB0aW9uLnRyaW0oKTtcbiAgICAgICAgaWYgKGRlc2NyaXB0aW9uID09PSB0aGlzLnByb3BzLnRlYW0uZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHN0YXRlLmNsaWVudEVycm9yID0gVXRpbHMubG9jYWxpemVNZXNzYWdlKCdnZW5lcmFsX3RhYi5jaG9vc2VEZXNjcmlwdGlvbicsICdQbGVhc2UgY2hvb3NlIGEgbmV3IGRlc2NyaXB0aW9uIGZvciB5b3VyIHRlYW0nKTtcbiAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZS5jbGllbnRFcnJvciA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSk7XG5cbiAgICAgICAgaWYgKCF2YWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGEgPSB7Li4udGhpcy5wcm9wcy50ZWFtfTtcbiAgICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IHRoaXMuc3RhdGUuZGVzY3JpcHRpb247XG4gICAgICAgIHVwZGF0ZVRlYW0oZGF0YSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5zZXJ2ZXJFcnJvciA9IGVyci5tZXNzYWdlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICAkKCcjdGVhbV9zZXR0aW5ncycpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCB0aGlzLmhhbmRsZUNsb3NlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgJCgnI3RlYW1fc2V0dGluZ3MnKS5vZmYoJ2hpZGRlbi5icy5tb2RhbCcsIHRoaXMuaGFuZGxlQ2xvc2UpO1xuICAgIH1cblxuICAgIG9uVXBkYXRlTmFtZVNlY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb24gPT09ICduYW1lJykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignbmFtZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25VcGRhdGVEZXNjcmlwdGlvblNlY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb24gPT09ICdkZXNjcmlwdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblVwZGF0ZUludml0ZUlkU2VjdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlU2VjdGlvbiA9PT0gJ2ludml0ZV9pZCcpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJ2ludml0ZV9pZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25VcGRhdGVPcGVuSW52aXRlU2VjdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlU2VjdGlvbiA9PT0gJ29wZW5faW52aXRlJykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignb3Blbl9pbnZpdGUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZU5hbWUoZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtuYW1lOiBlLnRhcmdldC52YWx1ZX0pO1xuICAgIH1cblxuICAgIHVwZGF0ZURlc2NyaXB0aW9uKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZGVzY3JpcHRpb246IGUudGFyZ2V0LnZhbHVlfSk7XG4gICAgfVxuXG4gICAgdXBkYXRlSW52aXRlSWQoZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtpbnZpdGVfaWQ6IGUudGFyZ2V0LnZhbHVlfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgY2xpZW50RXJyb3IgPSBudWxsO1xuICAgICAgICBsZXQgc2VydmVyRXJyb3IgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5jbGllbnRFcnJvcikge1xuICAgICAgICAgICAgY2xpZW50RXJyb3IgPSB0aGlzLnN0YXRlLmNsaWVudEVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlcnZlckVycm9yKSB7XG4gICAgICAgICAgICBzZXJ2ZXJFcnJvciA9IHRoaXMuc3RhdGUuc2VydmVyRXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgb3Blbkludml0ZVNlY3Rpb247XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb24gPT09ICdvcGVuX2ludml0ZScpIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0cyA9IFtcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT0ndXNlck9wZW5JbnZpdGVPcHRpb25zJz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JhZGlvJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3RlYW1PcGVuSW52aXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSd1c2VyT3Blbkludml0ZU9wdGlvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17dGhpcy5zdGF0ZS5hbGxvd19vcGVuX2ludml0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlT3Blbkludml0ZVJhZGlvLmJpbmQodGhpcywgdHJ1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nZ2VuZXJhbF90YWIueWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nWWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd0ZWFtT3Blbkludml0ZU5vJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSd1c2VyT3Blbkludml0ZU9wdGlvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17IXRoaXMuc3RhdGUuYWxsb3dfb3Blbl9pbnZpdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZU9wZW5JbnZpdGVSYWRpby5iaW5kKHRoaXMsIGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdnZW5lcmFsX3RhYi5ubydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05vJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nZ2VuZXJhbF90YWIub3Blbkludml0ZURlc2MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1doZW4gYWxsb3dlZCwgYSBsaW5rIHRvIHRoaXMgdGVhbSB3aWxsIGJlIGluY2x1ZGVkIG9uIHRoZSBsYW5kaW5nIHBhZ2UgYWxsb3dpbmcgYW55b25lIHdpdGggYW4gYWNjb3VudCB0byBqb2luIHRoaXMgdGVhbS4nXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIG9wZW5JbnZpdGVTZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1heFxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17VXRpbHMubG9jYWxpemVNZXNzYWdlKCdnZW5lcmFsX3RhYi5vcGVuSW52aXRlVGl0bGUnLCAnQWxsb3cgYW55IHVzZXIgd2l0aCBhbiBhY2NvdW50IG9uIHRoaXMgc2VydmVyIHRvIGpvaW4gdGhpcyB0ZWFtJyl9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17aW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ9e3RoaXMuaGFuZGxlT3Blbkludml0ZVN1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXtzZXJ2ZXJFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dGhpcy5vblVwZGF0ZU9wZW5JbnZpdGVTZWN0aW9ufVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRlc2NyaWJlID0gJyc7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5hbGxvd19vcGVuX2ludml0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gVXRpbHMubG9jYWxpemVNZXNzYWdlKCdnZW5lcmFsX3RhYi55ZXMnLCAnWWVzJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gVXRpbHMubG9jYWxpemVNZXNzYWdlKCdnZW5lcmFsX3RhYi5ubycsICdObycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvcGVuSW52aXRlU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NaW5cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgnZ2VuZXJhbF90YWIub3Blbkludml0ZVRpdGxlJywgJ0FsbG93IGFueSB1c2VyIHdpdGggYW4gYWNjb3VudCBvbiB0aGlzIHNlcnZlciB0byBqb2luIHRoaXMgdGVhbScpfVxuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZT17ZGVzY3JpYmV9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3RoaXMub25VcGRhdGVPcGVuSW52aXRlU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpbnZpdGVTZWN0aW9uO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb24gPT09ICdpbnZpdGVfaWQnKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBbXTtcblxuICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9J3RlYW1JbnZpdGVTZXR0aW5nJz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jvdyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdjb2wtc20tNSBjb250cm9sLWxhYmVsIHZpc2libGUteHMtYmxvY2snLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tMTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndGVhbUludml0ZUlkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tY29udHJvbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlSW52aXRlSWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmludml0ZV9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoPSczMidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYWRkaW5nLXRvcCB4Mic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd0ZWFtSW52aXRlSWRSZWdlbmVyYXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdjb2xvci0tbGluayBzdHlsZS0tbm9uZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlR2VuZXJhdGVJbnZpdGVJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nZ2VuZXJhbF90YWIucmVnZW5lcmF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nUmVnZW5lcmF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2V0dGluZy1saXN0X19oaW50Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2dlbmVyYWxfdGFiLmNvZGVMb25nRGVzYydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVGhlIEludml0ZSBDb2RlIGlzIHVzZWQgYXMgcGFydCBvZiB0aGUgVVJMIGluIHRoZSB0ZWFtIGludml0YXRpb24gbGluayBjcmVhdGVkIGJ5IHtnZXRUZWFtSW52aXRlTGlua30gaW4gdGhlIG1haW4gbWVudS4gUmVnZW5lcmF0aW5nIGNyZWF0ZXMgYSBuZXcgdGVhbSBpbnZpdGF0aW9uIGxpbmsgYW5kIGludmFsaWRhdGVzIHRoZSBwcmV2aW91cyBsaW5rLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VGVhbUludml0ZUxpbms6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2dlbmVyYWxfdGFiLmdldFRlYW1JbnZpdGVMaW5rJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nR2V0IFRlYW0gSW52aXRlIExpbmsnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaW52aXRlU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NYXhcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgnZ2VuZXJhbF90YWIuY29kZVRpdGxlJywgJ0ludml0ZSBDb2RlJyl9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17aW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ9e3RoaXMuaGFuZGxlSW52aXRlSWRTdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9lcnJvcj17c2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudF9lcnJvcj17Y2xpZW50RXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3RoaXMub25VcGRhdGVJbnZpdGVJZFNlY3Rpb259XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnZpdGVTZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1pblxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17VXRpbHMubG9jYWxpemVNZXNzYWdlKCdnZW5lcmFsX3RhYi5jb2RlVGl0bGUnLCAnSW52aXRlIENvZGUnKX1cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgnZ2VuZXJhbF90YWIuY29kZURlc2MnLCBcIkNsaWNrICdFZGl0JyB0byByZWdlbmVyYXRlIEludml0ZSBDb2RlLlwiKX1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dGhpcy5vblVwZGF0ZUludml0ZUlkU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBuYW1lU2VjdGlvbjtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uID09PSAnbmFtZScpIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0cyA9IFtdO1xuXG4gICAgICAgICAgICBsZXQgdGVhbU5hbWVMYWJlbCA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0nZ2VuZXJhbF90YWIudGVhbU5hbWUnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUZWFtIE5hbWUnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoVXRpbHMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgICAgIHRlYW1OYW1lTGFiZWwgPSAnJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9J3RlYW1OYW1lU2V0dGluZydcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmb3JtLWdyb3VwJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nY29sLXNtLTUgY29udHJvbC1sYWJlbCc+e3RlYW1OYW1lTGFiZWx9PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbC1zbS03Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd0ZWFtTmFtZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tY29udHJvbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heExlbmd0aD17Q29uc3RhbnRzLk1BWF9URUFNTkFNRV9MRU5HVEgudG9TdHJpbmcoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IG5hbWVFeHRyYUluZm8gPSA8c3Bhbj57VXRpbHMubG9jYWxpemVNZXNzYWdlKCdnZW5lcmFsX3RhYi50ZWFtTmFtZUluZm8nLCAnU2V0IHRoZSBuYW1lIG9mIHRoZSB0ZWFtIGFzIGl0IGFwcGVhcnMgb24geW91ciBzaWduLWluIHNjcmVlbiBhbmQgYXQgdGhlIHRvcCBvZiB0aGUgbGVmdC1oYW5kIHNpZGViYXIuJyl9PC9zcGFuPjtcblxuICAgICAgICAgICAgbmFtZVNlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWF4XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ2dlbmVyYWxfdGFiLnRlYW1OYW1lJywgJ1RlYW0gTmFtZScpfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dHM9e2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgc3VibWl0PXt0aGlzLmhhbmRsZU5hbWVTdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9lcnJvcj17c2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudF9lcnJvcj17Y2xpZW50RXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3RoaXMub25VcGRhdGVOYW1lU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgZXh0cmFJbmZvPXtuYW1lRXh0cmFJbmZvfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGRlc2NyaWJlID0gdGhpcy5zdGF0ZS5uYW1lO1xuXG4gICAgICAgICAgICBuYW1lU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NaW5cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgnZ2VuZXJhbF90YWIudGVhbU5hbWUnLCAnVGVhbSBOYW1lJyl9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlPXtkZXNjcmliZX1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dGhpcy5vblVwZGF0ZU5hbWVTZWN0aW9ufVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uU2VjdGlvbjtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uID09PSAnZGVzY3JpcHRpb24nKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBbXTtcblxuICAgICAgICAgICAgbGV0IHRlYW1EZXNjcmlwdGlvbkxhYmVsID0gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSdnZW5lcmFsX3RhYi50ZWFtRGVzY3JpcHRpb24nXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUZWFtIERlc2NyaXB0aW9uJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKFV0aWxzLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgICAgICB0ZWFtRGVzY3JpcHRpb25MYWJlbCA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT0ndGVhbURlc2NyaXB0aW9uU2V0dGluZydcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmb3JtLWdyb3VwJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nY29sLXNtLTUgY29udHJvbC1sYWJlbCc+e3RlYW1EZXNjcmlwdGlvbkxhYmVsfTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndGVhbURlc2NyaXB0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoPXtDb25zdGFudHMuTUFYX1RFQU1ERVNDUklQVElPTl9MRU5HVEgudG9TdHJpbmcoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVEZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb25FeHRyYUluZm8gPSA8c3Bhbj57VXRpbHMubG9jYWxpemVNZXNzYWdlKCdnZW5lcmFsX3RhYi50ZWFtRGVzY3JpcHRpb25JbmZvJywgJ1RlYW0gZGVzY3JpcHRpb24gcHJvdmlkZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiB0byBoZWxwIHVzZXJzIHNlbGVjdCB0aGUgcmlnaHQgdGVhbS4gTWF4aW11bSBvZiA1MCBjaGFyYWN0ZXJzLicpfTwvc3Bhbj47XG5cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NYXhcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgnZ2VuZXJhbF90YWIudGVhbURlc2NyaXB0aW9uJywgJ1RlYW0gRGVzY3JpcHRpb24nKX1cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzPXtpbnB1dHN9XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdD17dGhpcy5oYW5kbGVEZXNjcmlwdGlvblN1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXtzZXJ2ZXJFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgY2xpZW50X2Vycm9yPXtjbGllbnRFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dGhpcy5vblVwZGF0ZURlc2NyaXB0aW9uU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgZXh0cmFJbmZvPXtkZXNjcmlwdGlvbkV4dHJhSW5mb31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBkZXNjcmliZW1zZyA9ICcnO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICBkZXNjcmliZW1zZyA9IHRoaXMuc3RhdGUuZGVzY3JpcHRpb247XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlc2NyaWJlbXNnID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2dlbmVyYWxfdGFiLmVtcHR5RGVzY3JpcHRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT1cIkNsaWNrICdFZGl0JyB0byBhZGQgYSB0ZWFtIGRlc2NyaXB0aW9uLlwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVzY3JpcHRpb25TZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1pblxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17VXRpbHMubG9jYWxpemVNZXNzYWdlKCdnZW5lcmFsX3RhYi50ZWFtRGVzY3JpcHRpb24nLCAnVGVhbSBEZXNjcmlwdGlvbicpfVxuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZT17ZGVzY3JpYmVtc2d9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3RoaXMub25VcGRhdGVEZXNjcmlwdGlvblNlY3Rpb259XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbW9kYWwtaGVhZGVyJz5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2Nsb3NlQnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdjbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtZGlzbWlzcz0nbW9kYWwnXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSdDbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49J3RydWUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnw5cnfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGg0XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J21vZGFsLXRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSd0aXRsZSdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWJhY2snPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtYW5nbGUtbGVmdCcvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdnZW5lcmFsX3RhYi50aXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nR2VuZXJhbCBTZXR0aW5ncydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICByZWY9J3dyYXBwZXInXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndXNlci1zZXR0aW5ncydcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J3RhYi1oZWFkZXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nZ2VuZXJhbF90YWIudGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0dlbmVyYWwgU2V0dGluZ3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1kYXJrIGZpcnN0Jy8+XG4gICAgICAgICAgICAgICAgICAgIHtuYW1lU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItbGlnaHQnLz5cbiAgICAgICAgICAgICAgICAgICAge2Rlc2NyaXB0aW9uU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItbGlnaHQnLz5cbiAgICAgICAgICAgICAgICAgICAge29wZW5JbnZpdGVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1saWdodCcvPlxuICAgICAgICAgICAgICAgICAgICB7aW52aXRlU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItZGFyaycvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5HZW5lcmFsVGFiLnByb3BUeXBlcyA9IHtcbiAgICB1cGRhdGVTZWN0aW9uOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHRlYW06IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBhY3RpdmVTZWN0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWRcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEdlbmVyYWxUYWI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy90ZWFtX2dlbmVyYWxfdGFiLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQkE7QUFvQkE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQWFBO0FBZEE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVJBO0FBYUE7QUFkQTtBQWdCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFqQ0E7QUFDQTtBQTBDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFEQTtBQVRBO0FBRkE7QUF5QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBRkE7QUFIQTtBQURBO0FBMUJBO0FBQ0E7QUE0Q0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBREE7QUFMQTtBQUNBO0FBaUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQURBO0FBTEE7QUFDQTtBQWlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBUEE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFQQTtBQVpBO0FBeUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQkE7QUExQkE7QUFnREE7OztBQS9qQkE7QUFoQkE7QUFDQTtBQWlsQkE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2522\n");

/***/ }),

/***/ 2523:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _utils = __webpack_require__(17);\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _setting_upload = __webpack_require__(2524);\n\nvar _setting_upload2 = _interopRequireDefault(_setting_upload);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar holders = (0, _reactIntl.defineMessages)({\n    importSlack: {\n        id: 'team_import_tab.importSlack',\n        defaultMessage: 'Import from Slack (Beta)'\n    }\n});\n\nvar TeamImportTab = function (_React$Component) {\n    (0, _inherits3.default)(TeamImportTab, _React$Component);\n\n    function TeamImportTab(props) {\n        (0, _classCallCheck3.default)(this, TeamImportTab);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (TeamImportTab.__proto__ || (0, _getPrototypeOf2.default)(TeamImportTab)).call(this, props));\n\n        _this.onImportFailure = _this.onImportFailure.bind(_this);\n        _this.onImportSuccess = _this.onImportSuccess.bind(_this);\n        _this.doImportSlack = _this.doImportSlack.bind(_this);\n\n        _this.state = {\n            status: 'ready',\n            link: ''\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(TeamImportTab, [{\n        key: 'onImportFailure',\n        value: function onImportFailure() {\n            this.setState({ status: 'fail' });\n        }\n    }, {\n        key: 'onImportSuccess',\n        value: function onImportSuccess(data) {\n            this.setState({ status: 'done', link: 'data:application/octet-stream;charset=utf-8,' + encodeURIComponent(atob(data.results)) });\n        }\n    }, {\n        key: 'doImportSlack',\n        value: function doImportSlack(file) {\n            this.setState({ status: 'in-progress', link: '' });\n            utils.importSlack(file, this.onImportSuccess, this.onImportFailure);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var formatMessage = this.props.intl.formatMessage;\n\n            var uploadDocsLink = _react2.default.createElement(\n                'a',\n                {\n                    href: 'https://docs.mattermost.com/administration/migrating.html#migrating-from-slack',\n                    target: '_blank',\n                    rel: 'noopener noreferrer'\n                },\n                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'team_import_tab.importHelpDocsLink',\n                    defaultMessage: 'documentation'\n                })\n            );\n\n            var uploadExportInstructions = _react2.default.createElement(\n                'strong',\n                null,\n                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'team_import_tab.importHelpExportInstructions',\n                    defaultMessage: 'Slack > Team Settings > Import/Export Data > Export > Start Export'\n                })\n            );\n\n            var uploadExporterLink = _react2.default.createElement(\n                'a',\n                {\n                    href: 'https://github.com/grundleborg/slack-advanced-exporter',\n                    target: '_blank',\n                    rel: 'noopener noreferrer'\n                },\n                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'team_import_tab.importHelpExporterLink',\n                    defaultMessage: 'Slack Advanced Exporter'\n                })\n            );\n\n            var uploadHelpText = _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'p',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'team_import_tab.importHelpLine1',\n                        defaultMessage: 'Slack import to Mattermost supports importing of messages in your Slack team\\'s public channels.'\n                    })\n                ),\n                _react2.default.createElement(\n                    'p',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'team_import_tab.importHelpLine2',\n                        defaultMessage: 'To import a team from Slack, go to {exportInstructions}. See {uploadDocsLink} to learn more.',\n                        values: {\n                            exportInstructions: uploadExportInstructions,\n                            uploadDocsLink: uploadDocsLink\n                        }\n                    })\n                ),\n                _react2.default.createElement(\n                    'p',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'team_import_tab.importHelpLine3',\n                        defaultMessage: 'To import posts with attached files, see {slackAdvancedExporterLink} for details.',\n                        values: {\n                            slackAdvancedExporterLink: uploadExporterLink\n                        }\n                    })\n                )\n            );\n\n            var uploadSection = _react2.default.createElement(_setting_upload2.default, {\n                title: formatMessage(holders.importSlack),\n                submit: this.doImportSlack,\n                helpText: uploadHelpText,\n                fileTypesAccepted: '.zip'\n            });\n\n            var messageSection;\n            switch (this.state.status) {\n\n                case 'ready':\n                    messageSection = '';\n                    break;\n                case 'in-progress':\n                    messageSection = _react2.default.createElement(\n                        'p',\n                        { className: 'confirm-import alert alert-warning' },\n                        _react2.default.createElement('i', { className: 'fa fa-spinner fa-pulse' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'team_import_tab.importing',\n                            defaultMessage: ' Importing...'\n                        })\n                    );\n                    break;\n                case 'done':\n                    messageSection = _react2.default.createElement(\n                        'p',\n                        { className: 'confirm-import alert alert-success' },\n                        _react2.default.createElement('i', { className: 'fa fa-check' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'team_import_tab.successful',\n                            defaultMessage: ' Import successful: '\n                        }),\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                href: this.state.link,\n                                download: 'MattermostImportSummary.txt'\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'team_import_tab.summary',\n                                defaultMessage: 'View Summary'\n                            })\n                        )\n                    );\n                    break;\n                case 'fail':\n                    messageSection = _react2.default.createElement(\n                        'p',\n                        { className: 'confirm-import alert alert-warning' },\n                        _react2.default.createElement('i', { className: 'fa fa-warning' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'team_import_tab.failure',\n                            defaultMessage: ' Import failure: '\n                        }),\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                href: this.state.link,\n                                download: 'MattermostImportSummary.txt'\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'team_import_tab.summary',\n                                defaultMessage: 'View Summary'\n                            })\n                        )\n                    );\n                    break;\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'div',\n                    { className: 'modal-header' },\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            type: 'button',\n                            className: 'close',\n                            'data-dismiss': 'modal',\n                            'aria-label': 'Close'\n                        },\n                        _react2.default.createElement(\n                            'span',\n                            { 'aria-hidden': 'true' },\n                            ''\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'h4',\n                        {\n                            className: 'modal-title',\n                            ref: 'title'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-back' },\n                            _react2.default.createElement('i', { className: 'fa fa-angle-left' })\n                        ),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'team_import_tab.import',\n                            defaultMessage: 'Import'\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    {\n                        ref: 'wrapper',\n                        className: 'user-settings'\n                    },\n                    _react2.default.createElement(\n                        'h3',\n                        { className: 'tab-header' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'team_import_tab.import',\n                            defaultMessage: 'Import'\n                        })\n                    ),\n                    _react2.default.createElement('div', { className: 'divider-dark first' }),\n                    uploadSection,\n                    _react2.default.createElement('div', { className: 'divider-dark' }),\n                    messageSection\n                )\n            );\n        }\n    }]);\n    return TeamImportTab;\n}(_react2.default.Component);\n\nTeamImportTab.propTypes = {\n    intl: _reactIntl.intlShape.isRequired\n};\n\nexports.default = (0, _reactIntl.injectIntl)(TeamImportTab);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3RlYW1faW1wb3J0X3RhYi5qc3g/NjU5MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge2RlZmluZU1lc3NhZ2VzLCBGb3JtYXR0ZWRNZXNzYWdlLCBpbmplY3RJbnRsLCBpbnRsU2hhcGV9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgU2V0dGluZ1VwbG9hZCBmcm9tICcuL3NldHRpbmdfdXBsb2FkLmpzeCc7XG5cbmNvbnN0IGhvbGRlcnMgPSBkZWZpbmVNZXNzYWdlcyh7XG4gICAgaW1wb3J0U2xhY2s6IHtcbiAgICAgICAgaWQ6ICd0ZWFtX2ltcG9ydF90YWIuaW1wb3J0U2xhY2snLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0ltcG9ydCBmcm9tIFNsYWNrIChCZXRhKSdcbiAgICB9XG59KTtcblxuY2xhc3MgVGVhbUltcG9ydFRhYiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMub25JbXBvcnRGYWlsdXJlID0gdGhpcy5vbkltcG9ydEZhaWx1cmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkltcG9ydFN1Y2Nlc3MgPSB0aGlzLm9uSW1wb3J0U3VjY2Vzcy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRvSW1wb3J0U2xhY2sgPSB0aGlzLmRvSW1wb3J0U2xhY2suYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuICAgICAgICAgICAgbGluazogJydcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBvbkltcG9ydEZhaWx1cmUoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3N0YXR1czogJ2ZhaWwnfSk7XG4gICAgfVxuXG4gICAgb25JbXBvcnRTdWNjZXNzKGRhdGEpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c3RhdHVzOiAnZG9uZScsIGxpbms6ICdkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtjaGFyc2V0PXV0Zi04LCcgKyBlbmNvZGVVUklDb21wb25lbnQoYXRvYihkYXRhLnJlc3VsdHMpKX0pO1xuICAgIH1cblxuICAgIGRvSW1wb3J0U2xhY2soZmlsZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzdGF0dXM6ICdpbi1wcm9ncmVzcycsIGxpbms6ICcnfSk7XG4gICAgICAgIHV0aWxzLmltcG9ydFNsYWNrKGZpbGUsIHRoaXMub25JbXBvcnRTdWNjZXNzLCB0aGlzLm9uSW1wb3J0RmFpbHVyZSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7Zm9ybWF0TWVzc2FnZX0gPSB0aGlzLnByb3BzLmludGw7XG4gICAgICAgIHZhciB1cGxvYWREb2NzTGluayA9IChcbiAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgaHJlZj0naHR0cHM6Ly9kb2NzLm1hdHRlcm1vc3QuY29tL2FkbWluaXN0cmF0aW9uL21pZ3JhdGluZy5odG1sI21pZ3JhdGluZy1mcm9tLXNsYWNrJ1xuICAgICAgICAgICAgICAgIHRhcmdldD0nX2JsYW5rJ1xuICAgICAgICAgICAgICAgIHJlbD0nbm9vcGVuZXIgbm9yZWZlcnJlcidcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ndGVhbV9pbXBvcnRfdGFiLmltcG9ydEhlbHBEb2NzTGluaydcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J2RvY3VtZW50YXRpb24nXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgKTtcblxuICAgICAgICB2YXIgdXBsb2FkRXhwb3J0SW5zdHJ1Y3Rpb25zID0gKFxuICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ndGVhbV9pbXBvcnRfdGFiLmltcG9ydEhlbHBFeHBvcnRJbnN0cnVjdGlvbnMnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTbGFjayA+IFRlYW0gU2V0dGluZ3MgPiBJbXBvcnQvRXhwb3J0IERhdGEgPiBFeHBvcnQgPiBTdGFydCBFeHBvcnQnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvc3Ryb25nPlxuICAgICAgICApO1xuXG4gICAgICAgIHZhciB1cGxvYWRFeHBvcnRlckxpbmsgPSAoXG4gICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgIGhyZWY9J2h0dHBzOi8vZ2l0aHViLmNvbS9ncnVuZGxlYm9yZy9zbGFjay1hZHZhbmNlZC1leHBvcnRlcidcbiAgICAgICAgICAgICAgICB0YXJnZXQ9J19ibGFuaydcbiAgICAgICAgICAgICAgICByZWw9J25vb3BlbmVyIG5vcmVmZXJyZXInXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3RlYW1faW1wb3J0X3RhYi5pbXBvcnRIZWxwRXhwb3J0ZXJMaW5rJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU2xhY2sgQWR2YW5jZWQgRXhwb3J0ZXInXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgKTtcblxuICAgICAgICB2YXIgdXBsb2FkSGVscFRleHQgPSAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3RlYW1faW1wb3J0X3RhYi5pbXBvcnRIZWxwTGluZTEnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT1cIlNsYWNrIGltcG9ydCB0byBNYXR0ZXJtb3N0IHN1cHBvcnRzIGltcG9ydGluZyBvZiBtZXNzYWdlcyBpbiB5b3VyIFNsYWNrIHRlYW0ncyBwdWJsaWMgY2hhbm5lbHMuXCJcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndGVhbV9pbXBvcnRfdGFiLmltcG9ydEhlbHBMaW5lMidcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUbyBpbXBvcnQgYSB0ZWFtIGZyb20gU2xhY2ssIGdvIHRvIHtleHBvcnRJbnN0cnVjdGlvbnN9LiBTZWUge3VwbG9hZERvY3NMaW5rfSB0byBsZWFybiBtb3JlLidcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydEluc3RydWN0aW9uczogdXBsb2FkRXhwb3J0SW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZERvY3NMaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd0ZWFtX2ltcG9ydF90YWIuaW1wb3J0SGVscExpbmUzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1RvIGltcG9ydCBwb3N0cyB3aXRoIGF0dGFjaGVkIGZpbGVzLCBzZWUge3NsYWNrQWR2YW5jZWRFeHBvcnRlckxpbmt9IGZvciBkZXRhaWxzLidcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsYWNrQWR2YW5jZWRFeHBvcnRlckxpbms6IHVwbG9hZEV4cG9ydGVyTGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcblxuICAgICAgICB2YXIgdXBsb2FkU2VjdGlvbiA9IChcbiAgICAgICAgICAgIDxTZXR0aW5nVXBsb2FkXG4gICAgICAgICAgICAgICAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoaG9sZGVycy5pbXBvcnRTbGFjayl9XG4gICAgICAgICAgICAgICAgc3VibWl0PXt0aGlzLmRvSW1wb3J0U2xhY2t9XG4gICAgICAgICAgICAgICAgaGVscFRleHQ9e3VwbG9hZEhlbHBUZXh0fVxuICAgICAgICAgICAgICAgIGZpbGVUeXBlc0FjY2VwdGVkPScuemlwJ1xuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICB2YXIgbWVzc2FnZVNlY3Rpb247XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZS5zdGF0dXMpIHtcblxuICAgICAgICBjYXNlICdyZWFkeSc6XG4gICAgICAgICAgICBtZXNzYWdlU2VjdGlvbiA9ICcnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2luLXByb2dyZXNzJzpcbiAgICAgICAgICAgIG1lc3NhZ2VTZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0nY29uZmlybS1pbXBvcnQgYWxlcnQgYWxlcnQtd2FybmluZyc+PGkgY2xhc3NOYW1lPSdmYSBmYS1zcGlubmVyIGZhLXB1bHNlJy8+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndGVhbV9pbXBvcnRfdGFiLmltcG9ydGluZydcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPScgSW1wb3J0aW5nLi4uJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZG9uZSc6XG4gICAgICAgICAgICBtZXNzYWdlU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J2NvbmZpcm0taW1wb3J0IGFsZXJ0IGFsZXJ0LXN1Y2Nlc3MnPlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLWNoZWNrJy8+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndGVhbV9pbXBvcnRfdGFiLnN1Y2Nlc3NmdWwnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nIEltcG9ydCBzdWNjZXNzZnVsOiAnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmPXt0aGlzLnN0YXRlLmxpbmt9XG4gICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZD0nTWF0dGVybW9zdEltcG9ydFN1bW1hcnkudHh0J1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd0ZWFtX2ltcG9ydF90YWIuc3VtbWFyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVmlldyBTdW1tYXJ5J1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdmYWlsJzpcbiAgICAgICAgICAgIG1lc3NhZ2VTZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0nY29uZmlybS1pbXBvcnQgYWxlcnQgYWxlcnQtd2FybmluZyc+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtd2FybmluZycvPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3RlYW1faW1wb3J0X3RhYi5mYWlsdXJlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9JyBJbXBvcnQgZmFpbHVyZTogJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj17dGhpcy5zdGF0ZS5saW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWQ9J01hdHRlcm1vc3RJbXBvcnRTdW1tYXJ5LnR4dCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndGVhbV9pbXBvcnRfdGFiLnN1bW1hcnknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1ZpZXcgU3VtbWFyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbW9kYWwtaGVhZGVyJz5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdjbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtZGlzbWlzcz0nbW9kYWwnXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSdDbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49J3RydWUnPnsnw5cnfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxoNFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtb2RhbC10aXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0ndGl0bGUnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtb2RhbC1iYWNrJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLWFuZ2xlLWxlZnQnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndGVhbV9pbXBvcnRfdGFiLmltcG9ydCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nSW1wb3J0J1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd1c2VyLXNldHRpbmdzJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGFiLWhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd0ZWFtX2ltcG9ydF90YWIuaW1wb3J0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdJbXBvcnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1kYXJrIGZpcnN0Jy8+XG4gICAgICAgICAgICAgICAgICAgIHt1cGxvYWRTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1kYXJrJy8+XG4gICAgICAgICAgICAgICAgICAgIHttZXNzYWdlU2VjdGlvbn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuVGVhbUltcG9ydFRhYi5wcm9wVHlwZXMgPSB7XG4gICAgaW50bDogaW50bFNoYXBlLmlzUmVxdWlyZWRcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGluamVjdEludGwoVGVhbUltcG9ydFRhYik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy90ZWFtX2ltcG9ydF90YWIuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFUQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTtBQU1BOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQVBBO0FBV0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFDQTtBQVdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTtBQU9BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQUNBO0FBV0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSEE7QUFEQTtBQVVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBREE7QUFqQkE7QUFDQTtBQTRCQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBTkE7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBTkE7QUFpQkE7QUF0REE7QUFDQTtBQXdEQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBUEE7QUFUQTtBQXNCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQXZCQTtBQXdDQTs7O0FBMU1BO0FBQ0E7QUE0TUE7QUFDQTtBQURBO0FBQ0E7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2523\n");

/***/ }),

/***/ 2524:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(48);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactIntl = __webpack_require__(18);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SettingsUpload = function (_React$Component) {\n    (0, _inherits3.default)(SettingsUpload, _React$Component);\n\n    function SettingsUpload(props) {\n        (0, _classCallCheck3.default)(this, SettingsUpload);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SettingsUpload.__proto__ || (0, _getPrototypeOf2.default)(SettingsUpload)).call(this, props));\n\n        _this.doFileSelect = _this.doFileSelect.bind(_this);\n        _this.doSubmit = _this.doSubmit.bind(_this);\n\n        _this.state = {\n            clientError: _this.props.clientError,\n            serverError: _this.props.serverError,\n            filename: ''\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(SettingsUpload, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps() {\n            this.setState({\n                clientError: this.props.clientError,\n                serverError: this.props.serverError\n            });\n        }\n    }, {\n        key: 'doFileSelect',\n        value: function doFileSelect(e) {\n            e.preventDefault();\n            var filename = (0, _jquery2.default)(e.target).val();\n            if (filename.substring(3, 11) === 'fakepath') {\n                filename = filename.substring(12);\n            }\n            this.setState({\n                clientError: '',\n                serverError: '',\n                filename: filename\n            });\n        }\n    }, {\n        key: 'doSubmit',\n        value: function doSubmit(e) {\n            e.preventDefault();\n            var inputnode = _reactDom2.default.findDOMNode(this.refs.uploadinput);\n            if (inputnode.files && inputnode.files[0]) {\n                this.props.submit(inputnode.files[0]);\n            } else {\n                this.setState({ clientError: true });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var clientError = null;\n            if (this.state.clientError) {\n                clientError = _react2.default.createElement(\n                    'div',\n                    { className: 'file-status' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'setting_upload.noFile',\n                        defaultMessage: 'No file selected.'\n                    })\n                );\n            }\n            var serverError = null;\n            if (this.state.serverError) {\n                serverError = _react2.default.createElement(\n                    'div',\n                    { className: 'file-status' },\n                    this.state.serverError\n                );\n            }\n            var fileNameText = null;\n            var submitButtonClass = 'btn btn-sm btn-primary disabled';\n            if (this.state.filename) {\n                fileNameText = _react2.default.createElement(\n                    'div',\n                    { className: 'file-status file-name' },\n                    this.state.filename\n                );\n                submitButtonClass = 'btn btn-sm btn-primary';\n            }\n\n            return _react2.default.createElement(\n                'ul',\n                { className: 'section-max' },\n                _react2.default.createElement(\n                    'li',\n                    { className: 'col-sm-12 section-title' },\n                    this.props.title\n                ),\n                _react2.default.createElement(\n                    'li',\n                    { className: 'col-sm-offset-3 col-sm-9' },\n                    this.props.helpText\n                ),\n                _react2.default.createElement(\n                    'li',\n                    { className: 'col-sm-offset-3 col-sm-9' },\n                    _react2.default.createElement(\n                        'ul',\n                        { className: 'setting-list' },\n                        _react2.default.createElement(\n                            'li',\n                            { className: 'setting-list-item' },\n                            _react2.default.createElement(\n                                'span',\n                                { className: 'btn btn-sm btn-primary btn-file sel-btn' },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'setting_upload.select',\n                                    defaultMessage: 'Select file'\n                                }),\n                                _react2.default.createElement('input', {\n                                    ref: 'uploadinput',\n                                    accept: this.props.fileTypesAccepted,\n                                    type: 'file',\n                                    onChange: this.doFileSelect\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    className: submitButtonClass,\n                                    onClick: this.doSubmit\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'setting_upload.import',\n                                    defaultMessage: 'Import'\n                                })\n                            ),\n                            fileNameText,\n                            serverError,\n                            clientError\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return SettingsUpload;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = SettingsUpload;\n\n\nSettingsUpload.propTypes = {\n    title: _propTypes2.default.string.isRequired,\n    submit: _propTypes2.default.func.isRequired,\n    fileTypesAccepted: _propTypes2.default.string.isRequired,\n    clientError: _propTypes2.default.string,\n    serverError: _propTypes2.default.string,\n    helpText: _propTypes2.default.object\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3NldHRpbmdfdXBsb2FkLmpzeD8xOTIzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNldHRpbmdzVXBsb2FkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5kb0ZpbGVTZWxlY3QgPSB0aGlzLmRvRmlsZVNlbGVjdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRvU3VibWl0ID0gdGhpcy5kb1N1Ym1pdC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBjbGllbnRFcnJvcjogdGhpcy5wcm9wcy5jbGllbnRFcnJvcixcbiAgICAgICAgICAgIHNlcnZlckVycm9yOiB0aGlzLnByb3BzLnNlcnZlckVycm9yLFxuICAgICAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcygpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjbGllbnRFcnJvcjogdGhpcy5wcm9wcy5jbGllbnRFcnJvcixcbiAgICAgICAgICAgIHNlcnZlckVycm9yOiB0aGlzLnByb3BzLnNlcnZlckVycm9yXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGRvRmlsZVNlbGVjdChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGZpbGVuYW1lID0gJChlLnRhcmdldCkudmFsKCk7XG4gICAgICAgIGlmIChmaWxlbmFtZS5zdWJzdHJpbmcoMywgMTEpID09PSAnZmFrZXBhdGgnKSB7XG4gICAgICAgICAgICBmaWxlbmFtZSA9IGZpbGVuYW1lLnN1YnN0cmluZygxMik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjbGllbnRFcnJvcjogJycsXG4gICAgICAgICAgICBzZXJ2ZXJFcnJvcjogJycsXG4gICAgICAgICAgICBmaWxlbmFtZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkb1N1Ym1pdChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGlucHV0bm9kZSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmcy51cGxvYWRpbnB1dCk7XG4gICAgICAgIGlmIChpbnB1dG5vZGUuZmlsZXMgJiYgaW5wdXRub2RlLmZpbGVzWzBdKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLnN1Ym1pdChpbnB1dG5vZGUuZmlsZXNbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y2xpZW50RXJyb3I6IHRydWV9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IGNsaWVudEVycm9yID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY2xpZW50RXJyb3IpIHtcbiAgICAgICAgICAgIGNsaWVudEVycm9yID0gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmaWxlLXN0YXR1cyc+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2V0dGluZ191cGxvYWQubm9GaWxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05vIGZpbGUgc2VsZWN0ZWQuJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2VydmVyRXJyb3IgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZXJ2ZXJFcnJvcikge1xuICAgICAgICAgICAgc2VydmVyRXJyb3IgPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2ZpbGUtc3RhdHVzJz57dGhpcy5zdGF0ZS5zZXJ2ZXJFcnJvcn08L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZpbGVOYW1lVGV4dCA9IG51bGw7XG4gICAgICAgIGxldCBzdWJtaXRCdXR0b25DbGFzcyA9ICdidG4gYnRuLXNtIGJ0bi1wcmltYXJ5IGRpc2FibGVkJztcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZmlsZW5hbWUpIHtcbiAgICAgICAgICAgIGZpbGVOYW1lVGV4dCA9IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZmlsZS1zdGF0dXMgZmlsZS1uYW1lJz57dGhpcy5zdGF0ZS5maWxlbmFtZX08L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzdWJtaXRCdXR0b25DbGFzcyA9ICdidG4gYnRuLXNtIGJ0bi1wcmltYXJ5JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8dWwgY2xhc3NOYW1lPSdzZWN0aW9uLW1heCc+XG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT0nY29sLXNtLTEyIHNlY3Rpb24tdGl0bGUnPnt0aGlzLnByb3BzLnRpdGxlfTwvbGk+XG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT0nY29sLXNtLW9mZnNldC0zIGNvbC1zbS05Jz57dGhpcy5wcm9wcy5oZWxwVGV4dH08L2xpPlxuICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9J2NvbC1zbS1vZmZzZXQtMyBjb2wtc20tOSc+XG4gICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9J3NldHRpbmctbGlzdCc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPSdzZXR0aW5nLWxpc3QtaXRlbSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdidG4gYnRuLXNtIGJ0bi1wcmltYXJ5IGJ0bi1maWxlIHNlbC1idG4nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3NldHRpbmdfdXBsb2FkLnNlbGVjdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTZWxlY3QgZmlsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9J3VwbG9hZGlucHV0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXB0PXt0aGlzLnByb3BzLmZpbGVUeXBlc0FjY2VwdGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nZmlsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmRvRmlsZVNlbGVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzdWJtaXRCdXR0b25DbGFzc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5kb1N1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2V0dGluZ191cGxvYWQuaW1wb3J0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ltcG9ydCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZpbGVOYW1lVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NsaWVudEVycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgPC91bD5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblNldHRpbmdzVXBsb2FkLnByb3BUeXBlcyA9IHtcbiAgICB0aXRsZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIHN1Ym1pdDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBmaWxlVHlwZXNBY2NlcHRlZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIGNsaWVudEVycm9yOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHNlcnZlckVycm9yOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGhlbHBUZXh0OiBQcm9wVHlwZXMub2JqZWN0XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvc2V0dGluZ191cGxvYWQuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU5BO0FBV0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTEE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBU0E7QUFDQTtBQUNBO0FBeEJBO0FBREE7QUFEQTtBQUhBO0FBbUNBOzs7QUEzR0E7QUFUQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBNEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2524\n");

/***/ }),

/***/ 2525:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _modal_store = __webpack_require__(2164);\n\nvar _modal_store2 = _interopRequireDefault(_modal_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ActionTypes = _constants2.default.ActionTypes; // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar ImportThemeModal = function (_React$Component) {\n    (0, _inherits3.default)(ImportThemeModal, _React$Component);\n\n    function ImportThemeModal(props) {\n        (0, _classCallCheck3.default)(this, ImportThemeModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (ImportThemeModal.__proto__ || (0, _getPrototypeOf2.default)(ImportThemeModal)).call(this, props));\n\n        _this.updateShow = _this.updateShow.bind(_this);\n        _this.handleSubmit = _this.handleSubmit.bind(_this);\n        _this.handleChange = _this.handleChange.bind(_this);\n\n        _this.state = {\n            value: '',\n            inputError: '',\n            show: false,\n            callback: null\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(ImportThemeModal, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _modal_store2.default.addModalListener(ActionTypes.TOGGLE_IMPORT_THEME_MODAL, this.updateShow);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _modal_store2.default.removeModalListener(ActionTypes.TOGGLE_IMPORT_THEME_MODAL, this.updateShow);\n        }\n    }, {\n        key: 'updateShow',\n        value: function updateShow(show, args) {\n            this.setState({\n                show: show,\n                callback: args.callback\n            });\n        }\n    }, {\n        key: 'handleSubmit',\n        value: function handleSubmit(e) {\n            e.preventDefault();\n\n            var text = this.state.value;\n\n            if (!this.isInputValid(text)) {\n                this.setState({\n                    inputError: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.import_theme.submitError',\n                        defaultMessage: 'Invalid format, please try copying and pasting in again.'\n                    })\n                });\n                return;\n            }\n\n            var colors = text.split(',');\n            var theme = { type: 'custom' };\n\n            theme.sidebarBg = colors[0];\n            theme.sidebarText = colors[5];\n            theme.sidebarUnreadText = colors[5];\n            theme.sidebarTextHoverBg = colors[4];\n            theme.sidebarTextActiveBorder = colors[2];\n            theme.sidebarTextActiveColor = colors[3];\n            theme.sidebarHeaderBg = colors[1];\n            theme.sidebarHeaderTextColor = colors[5];\n            theme.onlineIndicator = colors[6];\n            theme.awayIndicator = '#E0B333';\n            theme.mentionBj = colors[7];\n            theme.mentionColor = '#ffffff';\n            theme.centerChannelBg = '#ffffff';\n            theme.centerChannelColor = '#333333';\n            theme.newMessageSeparator = '#F80';\n            theme.linkColor = '#2389d7';\n            theme.buttonBg = '#26a970';\n            theme.buttonColor = '#ffffff';\n            theme.mentionHighlightBg = '#fff2bb';\n            theme.mentionHighlightLink = '#2f81b7';\n            theme.codeTheme = 'github';\n\n            this.state.callback(theme);\n            this.setState({\n                show: false,\n                callback: null\n            });\n        }\n    }, {\n        key: 'isInputValid',\n        value: function isInputValid(text) {\n            if (text.length === 0) {\n                return false;\n            }\n\n            if (text.indexOf(' ') !== -1) {\n                return false;\n            }\n\n            if (text.length > 0 && text.indexOf(',') === -1) {\n                return false;\n            }\n\n            if (text.length > 0) {\n                var colors = text.split(',');\n\n                if (colors.length !== 8) {\n                    return false;\n                }\n\n                for (var i = 0; i < colors.length; i++) {\n                    if (colors[i].length !== 7 && colors[i].length !== 4) {\n                        return false;\n                    }\n\n                    if (colors[i].charAt(0) !== '#') {\n                        return false;\n                    }\n                }\n            }\n\n            return true;\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange(e) {\n            var value = e.target.value;\n            this.setState({ value: value });\n\n            if (this.isInputValid(value)) {\n                this.setState({ inputError: null });\n            } else {\n                this.setState({\n                    inputError: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.import_theme.submitError',\n                        defaultMessage: 'Invalid format, please try copying and pasting in again.'\n                    })\n                });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            return _react2.default.createElement(\n                'span',\n                null,\n                _react2.default.createElement(\n                    _reactBootstrap.Modal,\n                    {\n                        show: this.state.show,\n                        onHide: function onHide() {\n                            return _this2.setState({ show: false });\n                        }\n                    },\n                    _react2.default.createElement(\n                        _reactBootstrap.Modal.Header,\n                        { closeButton: true },\n                        _react2.default.createElement(\n                            _reactBootstrap.Modal.Title,\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.import_theme.importHeader',\n                                defaultMessage: 'Import Slack Theme'\n                            })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'form',\n                        {\n                            role: 'form',\n                            className: 'form-horizontal'\n                        },\n                        _react2.default.createElement(\n                            _reactBootstrap.Modal.Body,\n                            null,\n                            _react2.default.createElement(\n                                'p',\n                                null,\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.import_theme.importBody',\n                                    defaultMessage: 'To import a theme, go to a Slack team and look for \"Preferences -> Sidebar Theme\". Open the custom theme option, copy the theme color values and paste them here:'\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'form-group less' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'col-sm-12' },\n                                    _react2.default.createElement('input', {\n                                        id: 'themeVector',\n                                        type: 'text',\n                                        className: 'form-control',\n                                        value: this.state.value,\n                                        onChange: this.handleChange\n                                    }),\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: 'input__help' },\n                                        this.state.inputError\n                                    )\n                                )\n                            )\n                        ),\n                        _react2.default.createElement(\n                            _reactBootstrap.Modal.Footer,\n                            null,\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    id: 'cancelButton',\n                                    type: 'button',\n                                    className: 'btn btn-default',\n                                    onClick: function onClick() {\n                                        return _this2.setState({ show: false });\n                                    }\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.import_theme.cancel',\n                                    defaultMessage: 'Cancel'\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    id: 'submitButton',\n                                    onClick: this.handleSubmit,\n                                    type: 'submit',\n                                    className: 'btn btn-primary',\n                                    tabIndex: '3'\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.import_theme.submit',\n                                    defaultMessage: 'Submit'\n                                })\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return ImportThemeModal;\n}(_react2.default.Component);\n\nexports.default = ImportThemeModal;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvaW1wb3J0X3RoZW1lX21vZGFsLmpzeD9jMWEzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7TW9kYWx9IGZyb20gJ3JlYWN0LWJvb3RzdHJhcCc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgTW9kYWxTdG9yZSBmcm9tICdzdG9yZXMvbW9kYWxfc3RvcmUuanN4JztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcblxuY29uc3QgQWN0aW9uVHlwZXMgPSBDb25zdGFudHMuQWN0aW9uVHlwZXM7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltcG9ydFRoZW1lTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVNob3cgPSB0aGlzLnVwZGF0ZVNob3cuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiAnJyxcbiAgICAgICAgICAgIGlucHV0RXJyb3I6ICcnLFxuICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICBjYWxsYmFjazogbnVsbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBNb2RhbFN0b3JlLmFkZE1vZGFsTGlzdGVuZXIoQWN0aW9uVHlwZXMuVE9HR0xFX0lNUE9SVF9USEVNRV9NT0RBTCwgdGhpcy51cGRhdGVTaG93KTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgTW9kYWxTdG9yZS5yZW1vdmVNb2RhbExpc3RlbmVyKEFjdGlvblR5cGVzLlRPR0dMRV9JTVBPUlRfVEhFTUVfTU9EQUwsIHRoaXMudXBkYXRlU2hvdyk7XG4gICAgfVxuXG4gICAgdXBkYXRlU2hvdyhzaG93LCBhcmdzKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvdyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhcmdzLmNhbGxiYWNrXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhbmRsZVN1Ym1pdChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5zdGF0ZS52YWx1ZTtcblxuICAgICAgICBpZiAoIXRoaXMuaXNJbnB1dFZhbGlkKHRleHQpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBpbnB1dEVycm9yOiAoXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5pbXBvcnRfdGhlbWUuc3VibWl0RXJyb3InXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nSW52YWxpZCBmb3JtYXQsIHBsZWFzZSB0cnkgY29weWluZyBhbmQgcGFzdGluZyBpbiBhZ2Fpbi4nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb2xvcnMgPSB0ZXh0LnNwbGl0KCcsJyk7XG4gICAgICAgIGNvbnN0IHRoZW1lID0ge3R5cGU6ICdjdXN0b20nfTtcblxuICAgICAgICB0aGVtZS5zaWRlYmFyQmcgPSBjb2xvcnNbMF07XG4gICAgICAgIHRoZW1lLnNpZGViYXJUZXh0ID0gY29sb3JzWzVdO1xuICAgICAgICB0aGVtZS5zaWRlYmFyVW5yZWFkVGV4dCA9IGNvbG9yc1s1XTtcbiAgICAgICAgdGhlbWUuc2lkZWJhclRleHRIb3ZlckJnID0gY29sb3JzWzRdO1xuICAgICAgICB0aGVtZS5zaWRlYmFyVGV4dEFjdGl2ZUJvcmRlciA9IGNvbG9yc1syXTtcbiAgICAgICAgdGhlbWUuc2lkZWJhclRleHRBY3RpdmVDb2xvciA9IGNvbG9yc1szXTtcbiAgICAgICAgdGhlbWUuc2lkZWJhckhlYWRlckJnID0gY29sb3JzWzFdO1xuICAgICAgICB0aGVtZS5zaWRlYmFySGVhZGVyVGV4dENvbG9yID0gY29sb3JzWzVdO1xuICAgICAgICB0aGVtZS5vbmxpbmVJbmRpY2F0b3IgPSBjb2xvcnNbNl07XG4gICAgICAgIHRoZW1lLmF3YXlJbmRpY2F0b3IgPSAnI0UwQjMzMyc7XG4gICAgICAgIHRoZW1lLm1lbnRpb25CaiA9IGNvbG9yc1s3XTtcbiAgICAgICAgdGhlbWUubWVudGlvbkNvbG9yID0gJyNmZmZmZmYnO1xuICAgICAgICB0aGVtZS5jZW50ZXJDaGFubmVsQmcgPSAnI2ZmZmZmZic7XG4gICAgICAgIHRoZW1lLmNlbnRlckNoYW5uZWxDb2xvciA9ICcjMzMzMzMzJztcbiAgICAgICAgdGhlbWUubmV3TWVzc2FnZVNlcGFyYXRvciA9ICcjRjgwJztcbiAgICAgICAgdGhlbWUubGlua0NvbG9yID0gJyMyMzg5ZDcnO1xuICAgICAgICB0aGVtZS5idXR0b25CZyA9ICcjMjZhOTcwJztcbiAgICAgICAgdGhlbWUuYnV0dG9uQ29sb3IgPSAnI2ZmZmZmZic7XG4gICAgICAgIHRoZW1lLm1lbnRpb25IaWdobGlnaHRCZyA9ICcjZmZmMmJiJztcbiAgICAgICAgdGhlbWUubWVudGlvbkhpZ2hsaWdodExpbmsgPSAnIzJmODFiNyc7XG4gICAgICAgIHRoZW1lLmNvZGVUaGVtZSA9ICdnaXRodWInO1xuXG4gICAgICAgIHRoaXMuc3RhdGUuY2FsbGJhY2sodGhlbWUpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3c6IGZhbHNlLFxuICAgICAgICAgICAgY2FsbGJhY2s6IG51bGxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaXNJbnB1dFZhbGlkKHRleHQpIHtcbiAgICAgICAgaWYgKHRleHQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGV4dC5pbmRleE9mKCcgJykgIT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGV4dC5sZW5ndGggPiAwICYmIHRleHQuaW5kZXhPZignLCcpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY29sb3JzID0gdGV4dC5zcGxpdCgnLCcpO1xuXG4gICAgICAgICAgICBpZiAoY29sb3JzLmxlbmd0aCAhPT0gOCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sb3JzW2ldLmxlbmd0aCAhPT0gNyAmJiBjb2xvcnNbaV0ubGVuZ3RoICE9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY29sb3JzW2ldLmNoYXJBdCgwKSAhPT0gJyMnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBoYW5kbGVDaGFuZ2UoZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHt2YWx1ZX0pO1xuXG4gICAgICAgIGlmICh0aGlzLmlzSW5wdXRWYWxpZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lucHV0RXJyb3I6IG51bGx9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGlucHV0RXJyb3I6IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmltcG9ydF90aGVtZS5zdWJtaXRFcnJvcidcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdJbnZhbGlkIGZvcm1hdCwgcGxlYXNlIHRyeSBjb3B5aW5nIGFuZCBwYXN0aW5nIGluIGFnYWluLidcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3d9XG4gICAgICAgICAgICAgICAgICAgIG9uSGlkZT17KCkgPT4gdGhpcy5zZXRTdGF0ZSh7c2hvdzogZmFsc2V9KX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxNb2RhbC5IZWFkZXIgY2xvc2VCdXR0b249e3RydWV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPE1vZGFsLlRpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmltcG9ydF90aGVtZS5pbXBvcnRIZWFkZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdJbXBvcnQgU2xhY2sgVGhlbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTW9kYWwuVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgIDwvTW9kYWwuSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgICA8Zm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT0nZm9ybSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1ob3Jpem9udGFsJ1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TW9kYWwuQm9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmltcG9ydF90aGVtZS5pbXBvcnRCb2R5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1RvIGltcG9ydCBhIHRoZW1lLCBnbyB0byBhIFNsYWNrIHRlYW0gYW5kIGxvb2sgZm9yIFwiUHJlZmVyZW5jZXMgLT4gU2lkZWJhciBUaGVtZVwiLiBPcGVuIHRoZSBjdXN0b20gdGhlbWUgb3B0aW9uLCBjb3B5IHRoZSB0aGVtZSBjb2xvciB2YWx1ZXMgYW5kIHBhc3RlIHRoZW0gaGVyZTonXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmb3JtLWdyb3VwIGxlc3MnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTEyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd0aGVtZVZlY3RvcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naW5wdXRfX2hlbHAnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmlucHV0RXJyb3J9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L01vZGFsLkJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TW9kYWwuRm9vdGVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2NhbmNlbEJ1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tZGVmYXVsdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy5zZXRTdGF0ZSh7c2hvdzogZmFsc2V9KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5pbXBvcnRfdGhlbWUuY2FuY2VsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0NhbmNlbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzdWJtaXRCdXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuaGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdzdWJtaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYnRuIGJ0bi1wcmltYXJ5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJJbmRleD0nMydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5pbXBvcnRfdGhlbWUuc3VibWl0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1N1Ym1pdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvTW9kYWwuRm9vdGVyPlxuICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy91c2VyX3NldHRpbmdzL2ltcG9ydF90aGVtZV9tb2RhbC5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOzs7OztBQUNBO0FBVkE7QUFDQTtBQVdBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFQQTtBQWFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFGQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUZBO0FBUUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFSQTtBQURBO0FBUEE7QUFzQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFQQTtBQVpBO0FBMUJBO0FBWkE7QUFEQTtBQW9FQTs7O0FBMU1BO0FBQ0E7QUFEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2525\n");

/***/ }),

/***/ 2526:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactDom = __webpack_require__(48);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _modal_store = __webpack_require__(2164);\n\nvar _modal_store2 = _interopRequireDefault(_modal_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _confirm_modal = __webpack_require__(319);\n\nvar _confirm_modal2 = _interopRequireDefault(_confirm_modal);\n\nvar _settings_sidebar = __webpack_require__(2281);\n\nvar _settings_sidebar2 = _interopRequireDefault(_settings_sidebar);\n\nvar _user_settings = __webpack_require__(2527);\n\nvar _user_settings2 = _interopRequireDefault(_user_settings);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar holders = (0, _reactIntl.defineMessages)({\n    general: {\n        id: 'user.settings.modal.general',\n        defaultMessage: 'General'\n    },\n    security: {\n        id: 'user.settings.modal.security',\n        defaultMessage: 'Security'\n    },\n    notifications: {\n        id: 'user.settings.modal.notifications',\n        defaultMessage: 'Notifications'\n    },\n    display: {\n        id: 'user.settings.modal.display',\n        defaultMessage: 'Display'\n    },\n    advanced: {\n        id: 'user.settings.modal.advanced',\n        defaultMessage: 'Advanced'\n    },\n    confirmTitle: {\n        id: 'user.settings.modal.confirmTitle',\n        defaultMessage: 'Discard Changes?'\n    },\n    confirmMsg: {\n        id: 'user.settings.modal.confirmMsg',\n        defaultMessage: 'You have unsaved changes, are you sure you want to discard them?'\n    },\n    confirmBtns: {\n        id: 'user.settings.modal.confirmBtns',\n        defaultMessage: 'Yes, Discard'\n    }\n});\n\nvar UserSettingsModal = function (_React$Component) {\n    (0, _inherits3.default)(UserSettingsModal, _React$Component);\n\n    function UserSettingsModal(props) {\n        (0, _classCallCheck3.default)(this, UserSettingsModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (UserSettingsModal.__proto__ || (0, _getPrototypeOf2.default)(UserSettingsModal)).call(this, props));\n\n        _this.handleHide = _this.handleHide.bind(_this);\n        _this.handleHidden = _this.handleHidden.bind(_this);\n        _this.handleCollapse = _this.handleCollapse.bind(_this);\n        _this.handleConfirm = _this.handleConfirm.bind(_this);\n        _this.handleCancelConfirmation = _this.handleCancelConfirmation.bind(_this);\n        _this.handleToggle = _this.handleToggle.bind(_this);\n        _this.handleKeyDown = _this.handleKeyDown.bind(_this);\n\n        _this.closeModal = _this.closeModal.bind(_this);\n        _this.collapseModal = _this.collapseModal.bind(_this);\n\n        _this.updateTab = _this.updateTab.bind(_this);\n        _this.updateSection = _this.updateSection.bind(_this);\n        _this.onUserChanged = _this.onUserChanged.bind(_this);\n\n        _this.state = {\n            active_tab: 'general',\n            active_section: '',\n            showConfirmModal: false,\n            enforceFocus: true,\n            currentUser: _user_store2.default.getCurrentUser(),\n            show: false\n        };\n\n        _this.requireConfirm = false;\n        _this.mounted = false;\n        return _this;\n    }\n\n    (0, _createClass3.default)(UserSettingsModal, [{\n        key: 'onUserChanged',\n        value: function onUserChanged() {\n            if (this.mounted) {\n                this.setState({ currentUser: _user_store2.default.getCurrentUser() });\n            }\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            this.mounted = true;\n            _user_store2.default.addChangeListener(this.onUserChanged);\n            _modal_store2.default.addModalListener(_constants2.default.ActionTypes.TOGGLE_ACCOUNT_SETTINGS_MODAL, this.handleToggle);\n            document.addEventListener('keydown', this.handleKeyDown);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.mounted = false;\n            _modal_store2.default.removeModalListener(_constants2.default.ActionTypes.TOGGLE_ACCOUNT_SETTINGS_MODAL, this.handleToggle);\n            document.removeEventListener('keydown', this.handleKeyDown);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            _user_store2.default.removeChangeListener(this.onUserChanged);\n            if (!Utils.isMobile()) {\n                (0, _jquery2.default)('.settings-content .minimize-settings').perfectScrollbar('update');\n            }\n        }\n    }, {\n        key: 'handleKeyDown',\n        value: function handleKeyDown(e) {\n            if (Utils.cmdOrCtrlPressed(e) && e.shiftKey && e.keyCode === _constants2.default.KeyCodes.A) {\n                this.setState({\n                    show: !this.state.show\n                });\n            }\n        }\n    }, {\n        key: 'handleToggle',\n        value: function handleToggle(value) {\n            this.setState({\n                show: value\n            });\n        }\n\n        // Called when the close button is pressed on the main modal\n\n    }, {\n        key: 'handleHide',\n        value: function handleHide() {\n            var _this2 = this;\n\n            if (this.requireConfirm) {\n                this.afterConfirm = function () {\n                    return _this2.handleHide();\n                };\n                this.showConfirmModal();\n\n                return;\n            }\n\n            this.setState({\n                show: false\n            });\n        }\n\n        // called after the dialog is fully hidden and faded out\n\n    }, {\n        key: 'handleHidden',\n        value: function handleHidden() {\n            this.setState({\n                active_tab: 'general',\n                active_section: ''\n            });\n        }\n\n        // Called to hide the settings pane when on mobile\n\n    }, {\n        key: 'handleCollapse',\n        value: function handleCollapse() {\n            (0, _jquery2.default)(_reactDom2.default.findDOMNode(this.refs.modalBody)).closest('.modal-dialog').removeClass('display--content');\n\n            this.setState({\n                active_tab: '',\n                active_section: ''\n            });\n        }\n    }, {\n        key: 'handleConfirm',\n        value: function handleConfirm() {\n            this.setState({\n                showConfirmModal: false,\n                enforceFocus: true\n            });\n\n            this.requireConfirm = false;\n\n            if (this.afterConfirm) {\n                this.afterConfirm();\n                this.afterConfirm = null;\n            }\n        }\n    }, {\n        key: 'handleCancelConfirmation',\n        value: function handleCancelConfirmation() {\n            this.setState({\n                showConfirmModal: false,\n                enforceFocus: true\n            });\n\n            this.afterConfirm = null;\n        }\n    }, {\n        key: 'showConfirmModal',\n        value: function showConfirmModal(afterConfirm) {\n            this.setState({\n                showConfirmModal: true,\n                enforceFocus: false\n            });\n\n            if (afterConfirm) {\n                this.afterConfirm = afterConfirm;\n            }\n        }\n\n        // Called by settings tabs when their close button is pressed\n\n    }, {\n        key: 'closeModal',\n        value: function closeModal() {\n            if (this.requireConfirm) {\n                this.showConfirmModal(this.closeModal);\n            } else {\n                this.handleHide();\n            }\n        }\n\n        // Called by settings tabs when their back button is pressed\n\n    }, {\n        key: 'collapseModal',\n        value: function collapseModal() {\n            if (this.requireConfirm) {\n                this.showConfirmModal(this.collapseModal);\n            } else {\n                this.handleCollapse();\n            }\n        }\n    }, {\n        key: 'updateTab',\n        value: function updateTab(tab, skipConfirm) {\n            var _this3 = this;\n\n            if (!skipConfirm && this.requireConfirm) {\n                this.showConfirmModal(function () {\n                    return _this3.updateTab(tab, true);\n                });\n            } else {\n                this.setState({\n                    active_tab: tab,\n                    active_section: ''\n                });\n            }\n        }\n    }, {\n        key: 'updateSection',\n        value: function updateSection(section, skipConfirm) {\n            var _this4 = this;\n\n            if (!skipConfirm && this.requireConfirm) {\n                this.showConfirmModal(function () {\n                    return _this4.updateSection(section, true);\n                });\n            } else {\n                this.setState({ active_section: section });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this5 = this;\n\n            var formatMessage = this.props.intl.formatMessage;\n\n            if (this.state.currentUser == null) {\n                return _react2.default.createElement('div', null);\n            }\n            var tabs = [];\n\n            tabs.push({ name: 'general', uiName: formatMessage(holders.general), icon: 'icon fa fa-gear' });\n            tabs.push({ name: 'security', uiName: formatMessage(holders.security), icon: 'icon fa fa-lock' });\n            tabs.push({ name: 'notifications', uiName: formatMessage(holders.notifications), icon: 'icon fa fa-exclamation-circle' });\n            tabs.push({ name: 'display', uiName: formatMessage(holders.display), icon: 'icon fa fa-eye' });\n            tabs.push({ name: 'advanced', uiName: formatMessage(holders.advanced), icon: 'icon fa fa-list-alt' });\n\n            return _react2.default.createElement(\n                _reactBootstrap.Modal,\n                {\n                    id: 'accountSettingsModal',\n                    dialogClassName: 'settings-modal',\n                    show: this.state.show,\n                    onHide: this.handleHide,\n                    onExited: this.handleHidden,\n                    enforceFocus: this.state.enforceFocus\n                },\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Header,\n                    {\n                        id: 'accountSettingsHeader',\n                        closeButton: true\n                    },\n                    _react2.default.createElement(\n                        _reactBootstrap.Modal.Title,\n                        { id: 'accountSettingsTitle' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.modal.title',\n                            defaultMessage: 'Account Settings'\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Body,\n                    { ref: 'modalBody' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'settings-table' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'settings-links' },\n                            _react2.default.createElement(_settings_sidebar2.default, {\n                                tabs: tabs,\n                                activeTab: this.state.active_tab,\n                                updateTab: this.updateTab\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'settings-content minimize-settings' },\n                            _react2.default.createElement(_user_settings2.default, {\n                                ref: 'userSettings',\n                                activeTab: this.state.active_tab,\n                                activeSection: this.state.active_section,\n                                updateSection: this.updateSection,\n                                updateTab: this.updateTab,\n                                closeModal: this.closeModal,\n                                collapseModal: this.collapseModal,\n                                setEnforceFocus: function setEnforceFocus(enforceFocus) {\n                                    return _this5.setState({ enforceFocus: enforceFocus });\n                                },\n                                setRequireConfirm: function setRequireConfirm(requireConfirm) {\n                                    _this5.requireConfirm = requireConfirm;\n                                }\n                            })\n                        )\n                    )\n                ),\n                _react2.default.createElement(_confirm_modal2.default, {\n                    title: formatMessage(holders.confirmTitle),\n                    message: formatMessage(holders.confirmMsg),\n                    confirmButtonText: formatMessage(holders.confirmBtns),\n                    show: this.state.showConfirmModal,\n                    onConfirm: this.handleConfirm,\n                    onCancel: this.handleCancelConfirmation\n                })\n            );\n        }\n    }]);\n    return UserSettingsModal;\n}(_react2.default.Component);\n\nUserSettingsModal.propTypes = {\n    intl: _reactIntl.intlShape.isRequired\n};\n\nexports.default = (0, _reactIntl.injectIntl)(UserSettingsModal);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19tb2RhbC5qc3g/MGIxNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge01vZGFsfSBmcm9tICdyZWFjdC1ib290c3RyYXAnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQge2RlZmluZU1lc3NhZ2VzLCBGb3JtYXR0ZWRNZXNzYWdlLCBpbmplY3RJbnRsLCBpbnRsU2hhcGV9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgTW9kYWxTdG9yZSBmcm9tICdzdG9yZXMvbW9kYWxfc3RvcmUuanN4JztcbmltcG9ydCBVc2VyU3RvcmUgZnJvbSAnc3RvcmVzL3VzZXJfc3RvcmUuanN4JztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCBDb25maXJtTW9kYWwgZnJvbSAnLi4vY29uZmlybV9tb2RhbC5qc3gnO1xuaW1wb3J0IFNldHRpbmdzU2lkZWJhciBmcm9tICcuLi9zZXR0aW5nc19zaWRlYmFyLmpzeCc7XG5cbmltcG9ydCBVc2VyU2V0dGluZ3MgZnJvbSAnLi91c2VyX3NldHRpbmdzLmpzeCc7XG5cbmNvbnN0IGhvbGRlcnMgPSBkZWZpbmVNZXNzYWdlcyh7XG4gICAgZ2VuZXJhbDoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MubW9kYWwuZ2VuZXJhbCcsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnR2VuZXJhbCdcbiAgICB9LFxuICAgIHNlY3VyaXR5OiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5tb2RhbC5zZWN1cml0eScsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnU2VjdXJpdHknXG4gICAgfSxcbiAgICBub3RpZmljYXRpb25zOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5tb2RhbC5ub3RpZmljYXRpb25zJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdOb3RpZmljYXRpb25zJ1xuICAgIH0sXG4gICAgZGlzcGxheToge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MubW9kYWwuZGlzcGxheScsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGlzcGxheSdcbiAgICB9LFxuICAgIGFkdmFuY2VkOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5tb2RhbC5hZHZhbmNlZCcsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQWR2YW5jZWQnXG4gICAgfSxcbiAgICBjb25maXJtVGl0bGU6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLm1vZGFsLmNvbmZpcm1UaXRsZScsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRGlzY2FyZCBDaGFuZ2VzPydcbiAgICB9LFxuICAgIGNvbmZpcm1Nc2c6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLm1vZGFsLmNvbmZpcm1Nc2cnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1lvdSBoYXZlIHVuc2F2ZWQgY2hhbmdlcywgYXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRpc2NhcmQgdGhlbT8nXG4gICAgfSxcbiAgICBjb25maXJtQnRuczoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MubW9kYWwuY29uZmlybUJ0bnMnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1llcywgRGlzY2FyZCdcbiAgICB9XG59KTtcblxuY2xhc3MgVXNlclNldHRpbmdzTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLmhhbmRsZUhpZGUgPSB0aGlzLmhhbmRsZUhpZGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVIaWRkZW4gPSB0aGlzLmhhbmRsZUhpZGRlbi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUNvbGxhcHNlID0gdGhpcy5oYW5kbGVDb2xsYXBzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUNvbmZpcm0gPSB0aGlzLmhhbmRsZUNvbmZpcm0uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVDYW5jZWxDb25maXJtYXRpb24gPSB0aGlzLmhhbmRsZUNhbmNlbENvbmZpcm1hdGlvbi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZSA9IHRoaXMuaGFuZGxlVG9nZ2xlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlS2V5RG93biA9IHRoaXMuaGFuZGxlS2V5RG93bi5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuY2xvc2VNb2RhbCA9IHRoaXMuY2xvc2VNb2RhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNvbGxhcHNlTW9kYWwgPSB0aGlzLmNvbGxhcHNlTW9kYWwuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVRhYiA9IHRoaXMudXBkYXRlVGFiLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbiA9IHRoaXMudXBkYXRlU2VjdGlvbi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uVXNlckNoYW5nZWQgPSB0aGlzLm9uVXNlckNoYW5nZWQuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgYWN0aXZlX3RhYjogJ2dlbmVyYWwnLFxuICAgICAgICAgICAgYWN0aXZlX3NlY3Rpb246ICcnLFxuICAgICAgICAgICAgc2hvd0NvbmZpcm1Nb2RhbDogZmFsc2UsXG4gICAgICAgICAgICBlbmZvcmNlRm9jdXM6IHRydWUsXG4gICAgICAgICAgICBjdXJyZW50VXNlcjogVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKCksXG4gICAgICAgICAgICBzaG93OiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVxdWlyZUNvbmZpcm0gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgb25Vc2VyQ2hhbmdlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMubW91bnRlZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFVzZXI6IFVzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgVXNlclN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMub25Vc2VyQ2hhbmdlZCk7XG4gICAgICAgIE1vZGFsU3RvcmUuYWRkTW9kYWxMaXN0ZW5lcihDb25zdGFudHMuQWN0aW9uVHlwZXMuVE9HR0xFX0FDQ09VTlRfU0VUVElOR1NfTU9EQUwsIHRoaXMuaGFuZGxlVG9nZ2xlKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RG93bik7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMubW91bnRlZCA9IGZhbHNlO1xuICAgICAgICBNb2RhbFN0b3JlLnJlbW92ZU1vZGFsTGlzdGVuZXIoQ29uc3RhbnRzLkFjdGlvblR5cGVzLlRPR0dMRV9BQ0NPVU5UX1NFVFRJTkdTX01PREFMLCB0aGlzLmhhbmRsZVRvZ2dsZSk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleURvd24pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgVXNlclN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMub25Vc2VyQ2hhbmdlZCk7XG4gICAgICAgIGlmICghVXRpbHMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgJCgnLnNldHRpbmdzLWNvbnRlbnQgLm1pbmltaXplLXNldHRpbmdzJykucGVyZmVjdFNjcm9sbGJhcigndXBkYXRlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVLZXlEb3duKGUpIHtcbiAgICAgICAgaWYgKFV0aWxzLmNtZE9yQ3RybFByZXNzZWQoZSkgJiYgZS5zaGlmdEtleSAmJiBlLmtleUNvZGUgPT09IENvbnN0YW50cy5LZXlDb2Rlcy5BKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBzaG93OiAhdGhpcy5zdGF0ZS5zaG93XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZVRvZ2dsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3c6IHZhbHVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENhbGxlZCB3aGVuIHRoZSBjbG9zZSBidXR0b24gaXMgcHJlc3NlZCBvbiB0aGUgbWFpbiBtb2RhbFxuICAgIGhhbmRsZUhpZGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlcXVpcmVDb25maXJtKSB7XG4gICAgICAgICAgICB0aGlzLmFmdGVyQ29uZmlybSA9ICgpID0+IHRoaXMuaGFuZGxlSGlkZSgpO1xuICAgICAgICAgICAgdGhpcy5zaG93Q29uZmlybU1vZGFsKCk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvdzogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gY2FsbGVkIGFmdGVyIHRoZSBkaWFsb2cgaXMgZnVsbHkgaGlkZGVuIGFuZCBmYWRlZCBvdXRcbiAgICBoYW5kbGVIaWRkZW4oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgYWN0aXZlX3RhYjogJ2dlbmVyYWwnLFxuICAgICAgICAgICAgYWN0aXZlX3NlY3Rpb246ICcnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENhbGxlZCB0byBoaWRlIHRoZSBzZXR0aW5ncyBwYW5lIHdoZW4gb24gbW9iaWxlXG4gICAgaGFuZGxlQ29sbGFwc2UoKSB7XG4gICAgICAgICQoUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzLm1vZGFsQm9keSkpLmNsb3Nlc3QoJy5tb2RhbC1kaWFsb2cnKS5yZW1vdmVDbGFzcygnZGlzcGxheS0tY29udGVudCcpO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgYWN0aXZlX3RhYjogJycsXG4gICAgICAgICAgICBhY3RpdmVfc2VjdGlvbjogJydcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlQ29uZmlybSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93Q29uZmlybU1vZGFsOiBmYWxzZSxcbiAgICAgICAgICAgIGVuZm9yY2VGb2N1czogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnJlcXVpcmVDb25maXJtID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHRoaXMuYWZ0ZXJDb25maXJtKSB7XG4gICAgICAgICAgICB0aGlzLmFmdGVyQ29uZmlybSgpO1xuICAgICAgICAgICAgdGhpcy5hZnRlckNvbmZpcm0gPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlQ2FuY2VsQ29uZmlybWF0aW9uKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3dDb25maXJtTW9kYWw6IGZhbHNlLFxuICAgICAgICAgICAgZW5mb3JjZUZvY3VzOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWZ0ZXJDb25maXJtID0gbnVsbDtcbiAgICB9XG5cbiAgICBzaG93Q29uZmlybU1vZGFsKGFmdGVyQ29uZmlybSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHNob3dDb25maXJtTW9kYWw6IHRydWUsXG4gICAgICAgICAgICBlbmZvcmNlRm9jdXM6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChhZnRlckNvbmZpcm0pIHtcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJDb25maXJtID0gYWZ0ZXJDb25maXJtO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FsbGVkIGJ5IHNldHRpbmdzIHRhYnMgd2hlbiB0aGVpciBjbG9zZSBidXR0b24gaXMgcHJlc3NlZFxuICAgIGNsb3NlTW9kYWwoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlcXVpcmVDb25maXJtKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dDb25maXJtTW9kYWwodGhpcy5jbG9zZU1vZGFsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlSGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FsbGVkIGJ5IHNldHRpbmdzIHRhYnMgd2hlbiB0aGVpciBiYWNrIGJ1dHRvbiBpcyBwcmVzc2VkXG4gICAgY29sbGFwc2VNb2RhbCgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVxdWlyZUNvbmZpcm0pIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbmZpcm1Nb2RhbCh0aGlzLmNvbGxhcHNlTW9kYWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVDb2xsYXBzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlVGFiKHRhYiwgc2tpcENvbmZpcm0pIHtcbiAgICAgICAgaWYgKCFza2lwQ29uZmlybSAmJiB0aGlzLnJlcXVpcmVDb25maXJtKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dDb25maXJtTW9kYWwoKCkgPT4gdGhpcy51cGRhdGVUYWIodGFiLCB0cnVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBhY3RpdmVfdGFiOiB0YWIsXG4gICAgICAgICAgICAgICAgYWN0aXZlX3NlY3Rpb246ICcnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHVwZGF0ZVNlY3Rpb24oc2VjdGlvbiwgc2tpcENvbmZpcm0pIHtcbiAgICAgICAgaWYgKCFza2lwQ29uZmlybSAmJiB0aGlzLnJlcXVpcmVDb25maXJtKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dDb25maXJtTW9kYWwoKCkgPT4gdGhpcy51cGRhdGVTZWN0aW9uKHNlY3Rpb24sIHRydWUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2FjdGl2ZV9zZWN0aW9uOiBzZWN0aW9ufSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHtmb3JtYXRNZXNzYWdlfSA9IHRoaXMucHJvcHMuaW50bDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFVzZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuICg8ZGl2Lz4pO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0YWJzID0gW107XG5cbiAgICAgICAgdGFicy5wdXNoKHtuYW1lOiAnZ2VuZXJhbCcsIHVpTmFtZTogZm9ybWF0TWVzc2FnZShob2xkZXJzLmdlbmVyYWwpLCBpY29uOiAnaWNvbiBmYSBmYS1nZWFyJ30pO1xuICAgICAgICB0YWJzLnB1c2goe25hbWU6ICdzZWN1cml0eScsIHVpTmFtZTogZm9ybWF0TWVzc2FnZShob2xkZXJzLnNlY3VyaXR5KSwgaWNvbjogJ2ljb24gZmEgZmEtbG9jayd9KTtcbiAgICAgICAgdGFicy5wdXNoKHtuYW1lOiAnbm90aWZpY2F0aW9ucycsIHVpTmFtZTogZm9ybWF0TWVzc2FnZShob2xkZXJzLm5vdGlmaWNhdGlvbnMpLCBpY29uOiAnaWNvbiBmYSBmYS1leGNsYW1hdGlvbi1jaXJjbGUnfSk7XG4gICAgICAgIHRhYnMucHVzaCh7bmFtZTogJ2Rpc3BsYXknLCB1aU5hbWU6IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy5kaXNwbGF5KSwgaWNvbjogJ2ljb24gZmEgZmEtZXllJ30pO1xuICAgICAgICB0YWJzLnB1c2goe25hbWU6ICdhZHZhbmNlZCcsIHVpTmFtZTogZm9ybWF0TWVzc2FnZShob2xkZXJzLmFkdmFuY2VkKSwgaWNvbjogJ2ljb24gZmEgZmEtbGlzdC1hbHQnfSk7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgICAgIGlkPSdhY2NvdW50U2V0dGluZ3NNb2RhbCdcbiAgICAgICAgICAgICAgICBkaWFsb2dDbGFzc05hbWU9J3NldHRpbmdzLW1vZGFsJ1xuICAgICAgICAgICAgICAgIHNob3c9e3RoaXMuc3RhdGUuc2hvd31cbiAgICAgICAgICAgICAgICBvbkhpZGU9e3RoaXMuaGFuZGxlSGlkZX1cbiAgICAgICAgICAgICAgICBvbkV4aXRlZD17dGhpcy5oYW5kbGVIaWRkZW59XG4gICAgICAgICAgICAgICAgZW5mb3JjZUZvY3VzPXt0aGlzLnN0YXRlLmVuZm9yY2VGb2N1c31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8TW9kYWwuSGVhZGVyXG4gICAgICAgICAgICAgICAgICAgIGlkPSdhY2NvdW50U2V0dGluZ3NIZWFkZXInXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlQnV0dG9uPXt0cnVlfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPE1vZGFsLlRpdGxlIGlkPSdhY2NvdW50U2V0dGluZ3NUaXRsZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm1vZGFsLnRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdBY2NvdW50IFNldHRpbmdzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbC5UaXRsZT5cbiAgICAgICAgICAgICAgICA8L01vZGFsLkhlYWRlcj5cbiAgICAgICAgICAgICAgICA8TW9kYWwuQm9keSByZWY9J21vZGFsQm9keSc+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzZXR0aW5ncy10YWJsZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2V0dGluZ3MtbGlua3MnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTZXR0aW5nc1NpZGViYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFicz17dGFic31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiPXt0aGlzLnN0YXRlLmFjdGl2ZV90YWJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRhYj17dGhpcy51cGRhdGVUYWJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmdzLWNvbnRlbnQgbWluaW1pemUtc2V0dGluZ3MnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxVc2VyU2V0dGluZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSd1c2VyU2V0dGluZ3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYj17dGhpcy5zdGF0ZS5hY3RpdmVfdGFifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVTZWN0aW9uPXt0aGlzLnN0YXRlLmFjdGl2ZV9zZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt0aGlzLnVwZGF0ZVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRhYj17dGhpcy51cGRhdGVUYWJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlTW9kYWw9e3RoaXMuY2xvc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VNb2RhbD17dGhpcy5jb2xsYXBzZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFbmZvcmNlRm9jdXM9eyhlbmZvcmNlRm9jdXMpID0+IHRoaXMuc2V0U3RhdGUoe2VuZm9yY2VGb2N1c30pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXF1aXJlQ29uZmlybT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVxdWlyZUNvbmZpcm0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcXVpcmVDb25maXJtID0gcmVxdWlyZUNvbmZpcm07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvTW9kYWwuQm9keT5cbiAgICAgICAgICAgICAgICA8Q29uZmlybU1vZGFsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtmb3JtYXRNZXNzYWdlKGhvbGRlcnMuY29uZmlybVRpdGxlKX1cbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17Zm9ybWF0TWVzc2FnZShob2xkZXJzLmNvbmZpcm1Nc2cpfVxuICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dD17Zm9ybWF0TWVzc2FnZShob2xkZXJzLmNvbmZpcm1CdG5zKX1cbiAgICAgICAgICAgICAgICAgICAgc2hvdz17dGhpcy5zdGF0ZS5zaG93Q29uZmlybU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09e3RoaXMuaGFuZGxlQ29uZmlybX1cbiAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw9e3RoaXMuaGFuZGxlQ2FuY2VsQ29uZmlybWF0aW9ufVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuVXNlclNldHRpbmdzTW9kYWwucHJvcFR5cGVzID0ge1xuICAgIGludGw6IGludGxTaGFwZS5pc1JlcXVpcmVkXG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbmplY3RJbnRsKFVzZXJTZXR0aW5nc01vZGFsKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19tb2RhbC5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7Ozs7Ozs7QUFwQkE7QUFDQTtBQUNBO0FBbUJBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQTdCQTtBQUNBO0FBa0NBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUNBO0FBUUE7QUFDQTtBQTVCQTtBQTZCQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUpBO0FBV0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQVpBO0FBREE7QUFSQTtBQURBO0FBNEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUEvQ0E7QUF5REE7OztBQXRQQTtBQUNBO0FBd1BBO0FBQ0E7QUFEQTtBQUNBO0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2526\n");

/***/ }),

/***/ 2527:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _utils = __webpack_require__(17);\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _user_settings_advanced = __webpack_require__(2528);\n\nvar _user_settings_advanced2 = _interopRequireDefault(_user_settings_advanced);\n\nvar _user_settings_display = __webpack_require__(2529);\n\nvar _user_settings_display2 = _interopRequireDefault(_user_settings_display);\n\nvar _user_settings_general = __webpack_require__(2537);\n\nvar _user_settings_general2 = _interopRequireDefault(_user_settings_general);\n\nvar _user_settings_notifications = __webpack_require__(2541);\n\nvar _user_settings_notifications2 = _interopRequireDefault(_user_settings_notifications);\n\nvar _user_settings_security = __webpack_require__(2544);\n\nvar _user_settings_security2 = _interopRequireDefault(_user_settings_security);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar UserSettings = function (_React$Component) {\n    (0, _inherits3.default)(UserSettings, _React$Component);\n\n    function UserSettings(props) {\n        (0, _classCallCheck3.default)(this, UserSettings);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (UserSettings.__proto__ || (0, _getPrototypeOf2.default)(UserSettings)).call(this, props));\n\n        _this.onListenerChange = _this.onListenerChange.bind(_this);\n\n        _this.state = { user: _user_store2.default.getCurrentUser() };\n        return _this;\n    }\n\n    (0, _createClass3.default)(UserSettings, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _user_store2.default.addChangeListener(this.onListenerChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _user_store2.default.removeChangeListener(this.onListenerChange);\n        }\n    }, {\n        key: 'onListenerChange',\n        value: function onListenerChange() {\n            var user = _user_store2.default.getCurrentUser();\n            if (!utils.areObjectsEqual(this.state.user, user)) {\n                this.setState({ user: user });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (this.props.activeTab === 'general') {\n                return _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement(_user_settings_general2.default, {\n                        user: this.state.user,\n                        activeSection: this.props.activeSection,\n                        updateSection: this.props.updateSection,\n                        updateTab: this.props.updateTab,\n                        closeModal: this.props.closeModal,\n                        collapseModal: this.props.collapseModal\n                    })\n                );\n            } else if (this.props.activeTab === 'security') {\n                return _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement(_user_settings_security2.default, {\n                        user: this.state.user,\n                        activeSection: this.props.activeSection,\n                        updateSection: this.props.updateSection,\n                        updateTab: this.props.updateTab,\n                        closeModal: this.props.closeModal,\n                        collapseModal: this.props.collapseModal,\n                        setEnforceFocus: this.props.setEnforceFocus\n                    })\n                );\n            } else if (this.props.activeTab === 'notifications') {\n                return _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement(_user_settings_notifications2.default, {\n                        user: this.state.user,\n                        activeSection: this.props.activeSection,\n                        updateSection: this.props.updateSection,\n                        updateTab: this.props.updateTab,\n                        closeModal: this.props.closeModal,\n                        collapseModal: this.props.collapseModal\n                    })\n                );\n            } else if (this.props.activeTab === 'display') {\n                return _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement(_user_settings_display2.default, {\n                        user: this.state.user,\n                        activeSection: this.props.activeSection,\n                        updateSection: this.props.updateSection,\n                        updateTab: this.props.updateTab,\n                        closeModal: this.props.closeModal,\n                        collapseModal: this.props.collapseModal,\n                        setEnforceFocus: this.props.setEnforceFocus,\n                        setRequireConfirm: this.props.setRequireConfirm\n                    })\n                );\n            } else if (this.props.activeTab === 'advanced') {\n                return _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement(_user_settings_advanced2.default, {\n                        user: this.state.user,\n                        activeSection: this.props.activeSection,\n                        updateSection: this.props.updateSection,\n                        updateTab: this.props.updateTab,\n                        closeModal: this.props.closeModal,\n                        collapseModal: this.props.collapseModal\n                    })\n                );\n            }\n\n            return _react2.default.createElement('div', null);\n        }\n    }]);\n    return UserSettings;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = UserSettings;\n\n\nUserSettings.propTypes = {\n    activeTab: _propTypes2.default.string,\n    activeSection: _propTypes2.default.string,\n    updateSection: _propTypes2.default.func,\n    updateTab: _propTypes2.default.func,\n    closeModal: _propTypes2.default.func.isRequired,\n    collapseModal: _propTypes2.default.func.isRequired,\n    setEnforceFocus: _propTypes2.default.func.isRequired,\n    setRequireConfirm: _propTypes2.default.func.isRequired\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5ncy5qc3g/NGVhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgVXNlclN0b3JlIGZyb20gJ3N0b3Jlcy91c2VyX3N0b3JlLmpzeCc7XG5cbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCBBZHZhbmNlZFRhYiBmcm9tICcuL3VzZXJfc2V0dGluZ3NfYWR2YW5jZWQuanN4JztcbmltcG9ydCBEaXNwbGF5VGFiIGZyb20gJy4vdXNlcl9zZXR0aW5nc19kaXNwbGF5LmpzeCc7XG5pbXBvcnQgR2VuZXJhbFRhYiBmcm9tICcuL3VzZXJfc2V0dGluZ3NfZ2VuZXJhbCc7XG5pbXBvcnQgTm90aWZpY2F0aW9uc1RhYiBmcm9tICcuL3VzZXJfc2V0dGluZ3Nfbm90aWZpY2F0aW9ucy5qc3gnO1xuaW1wb3J0IFNlY3VyaXR5VGFiIGZyb20gJy4vdXNlcl9zZXR0aW5nc19zZWN1cml0eSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJTZXR0aW5ncyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMub25MaXN0ZW5lckNoYW5nZSA9IHRoaXMub25MaXN0ZW5lckNoYW5nZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7dXNlcjogVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKCl9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBVc2VyU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkxpc3RlbmVyQ2hhbmdlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgVXNlclN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMub25MaXN0ZW5lckNoYW5nZSk7XG4gICAgfVxuXG4gICAgb25MaXN0ZW5lckNoYW5nZSgpIHtcbiAgICAgICAgdmFyIHVzZXIgPSBVc2VyU3RvcmUuZ2V0Q3VycmVudFVzZXIoKTtcbiAgICAgICAgaWYgKCF1dGlscy5hcmVPYmplY3RzRXF1YWwodGhpcy5zdGF0ZS51c2VyLCB1c2VyKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dXNlcn0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVUYWIgPT09ICdnZW5lcmFsJykge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8R2VuZXJhbFRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcj17dGhpcy5zdGF0ZS51c2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlU2VjdGlvbj17dGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dGhpcy5wcm9wcy51cGRhdGVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGFiPXt0aGlzLnByb3BzLnVwZGF0ZVRhYn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlTW9kYWw9e3RoaXMucHJvcHMuY2xvc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlTW9kYWw9e3RoaXMucHJvcHMuY29sbGFwc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5hY3RpdmVUYWIgPT09ICdzZWN1cml0eScpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPFNlY3VyaXR5VGFiXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyPXt0aGlzLnN0YXRlLnVzZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVTZWN0aW9uPXt0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVUYWI9e3RoaXMucHJvcHMudXBkYXRlVGFifVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VNb2RhbD17dGhpcy5wcm9wcy5jbG9zZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VNb2RhbD17dGhpcy5wcm9wcy5jb2xsYXBzZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RW5mb3JjZUZvY3VzPXt0aGlzLnByb3BzLnNldEVuZm9yY2VGb2N1c31cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5hY3RpdmVUYWIgPT09ICdub3RpZmljYXRpb25zJykge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8Tm90aWZpY2F0aW9uc1RhYlxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcj17dGhpcy5zdGF0ZS51c2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlU2VjdGlvbj17dGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dGhpcy5wcm9wcy51cGRhdGVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGFiPXt0aGlzLnByb3BzLnVwZGF0ZVRhYn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlTW9kYWw9e3RoaXMucHJvcHMuY2xvc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlTW9kYWw9e3RoaXMucHJvcHMuY29sbGFwc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5hY3RpdmVUYWIgPT09ICdkaXNwbGF5Jykge1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8RGlzcGxheVRhYlxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcj17dGhpcy5zdGF0ZS51c2VyfVxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlU2VjdGlvbj17dGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dGhpcy5wcm9wcy51cGRhdGVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGFiPXt0aGlzLnByb3BzLnVwZGF0ZVRhYn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlTW9kYWw9e3RoaXMucHJvcHMuY2xvc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxhcHNlTW9kYWw9e3RoaXMucHJvcHMuY29sbGFwc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEVuZm9yY2VGb2N1cz17dGhpcy5wcm9wcy5zZXRFbmZvcmNlRm9jdXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXF1aXJlQ29uZmlybT17dGhpcy5wcm9wcy5zZXRSZXF1aXJlQ29uZmlybX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5hY3RpdmVUYWIgPT09ICdhZHZhbmNlZCcpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPEFkdmFuY2VkVGFiXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyPXt0aGlzLnN0YXRlLnVzZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVTZWN0aW9uPXt0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVUYWI9e3RoaXMucHJvcHMudXBkYXRlVGFifVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VNb2RhbD17dGhpcy5wcm9wcy5jbG9zZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VNb2RhbD17dGhpcy5wcm9wcy5jb2xsYXBzZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiA8ZGl2Lz47XG4gICAgfVxufVxuXG5Vc2VyU2V0dGluZ3MucHJvcFR5cGVzID0ge1xuICAgIGFjdGl2ZVRhYjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBhY3RpdmVTZWN0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHVwZGF0ZVNlY3Rpb246IFByb3BUeXBlcy5mdW5jLFxuICAgIHVwZGF0ZVRhYjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgY2xvc2VNb2RhbDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBjb2xsYXBzZU1vZGFsOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHNldEVuZm9yY2VGb2N1czogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBzZXRSZXF1aXJlQ29uZmlybTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5ncy5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFMQTtBQU1BO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBREE7QUFXQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQURBO0FBWUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBREE7QUFXQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBREE7QUFhQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFEQTtBQVdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFoR0E7QUFmQTtBQUNBO0FBY0E7QUFDQTtBQUNBO0FBaUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2527\n");

/***/ }),

/***/ 2528:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray2 = __webpack_require__(187);\n\nvar _slicedToArray3 = _interopRequireDefault(_slicedToArray2);\n\nvar _getIterator2 = __webpack_require__(49);\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _keys = __webpack_require__(60);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _user_actions = __webpack_require__(71);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _setting_item_max = __webpack_require__(770);\n\nvar _setting_item_max2 = _interopRequireDefault(_setting_item_max);\n\nvar _setting_item_min = __webpack_require__(771);\n\nvar _setting_item_min2 = _interopRequireDefault(_setting_item_min);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar PreReleaseFeatures = _constants2.default.PRE_RELEASE_FEATURES;\n\nvar AdvancedSettingsDisplay = function (_React$Component) {\n    (0, _inherits3.default)(AdvancedSettingsDisplay, _React$Component);\n\n    function AdvancedSettingsDisplay(props) {\n        (0, _classCallCheck3.default)(this, AdvancedSettingsDisplay);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (AdvancedSettingsDisplay.__proto__ || (0, _getPrototypeOf2.default)(AdvancedSettingsDisplay)).call(this, props));\n\n        _this.getStateFromStores = _this.getStateFromStores.bind(_this);\n        _this.updateSection = _this.updateSection.bind(_this);\n        _this.updateSetting = _this.updateSetting.bind(_this);\n        _this.toggleFeature = _this.toggleFeature.bind(_this);\n        _this.saveEnabledFeatures = _this.saveEnabledFeatures.bind(_this);\n\n        _this.renderFormattingSection = _this.renderFormattingSection.bind(_this);\n        _this.renderJoinLeaveSection = _this.renderJoinLeaveSection.bind(_this);\n\n        _this.state = _this.getStateFromStores();\n        return _this;\n    }\n\n    (0, _createClass3.default)(AdvancedSettingsDisplay, [{\n        key: 'getStateFromStores',\n        value: function getStateFromStores() {\n            var preReleaseFeaturesKeys = (0, _keys2.default)(PreReleaseFeatures);\n            var advancedSettings = _preference_store2.default.getCategory(_constants2.default.Preferences.CATEGORY_ADVANCED_SETTINGS);\n            var settings = {\n                send_on_ctrl_enter: _preference_store2.default.get(_constants2.default.Preferences.CATEGORY_ADVANCED_SETTINGS, 'send_on_ctrl_enter', 'false'),\n                formatting: _preference_store2.default.get(_constants2.default.Preferences.CATEGORY_ADVANCED_SETTINGS, 'formatting', 'true'),\n                join_leave: _preference_store2.default.get(_constants2.default.Preferences.CATEGORY_ADVANCED_SETTINGS, 'join_leave', 'true')\n            };\n\n            var webrtcEnabled = global.mm_config.EnableWebrtc === 'true';\n\n            if (!webrtcEnabled) {\n                preReleaseFeaturesKeys = preReleaseFeaturesKeys.filter(function (f) {\n                    return f !== 'WEBRTC_PREVIEW';\n                });\n            }\n\n            var enabledFeatures = 0;\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = (0, _getIterator3.default)(advancedSettings), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var _step$value = (0, _slicedToArray3.default)(_step.value, 2),\n                        name = _step$value[0],\n                        value = _step$value[1];\n\n                    var _iteratorNormalCompletion2 = true;\n                    var _didIteratorError2 = false;\n                    var _iteratorError2 = undefined;\n\n                    try {\n                        for (var _iterator2 = (0, _getIterator3.default)(preReleaseFeaturesKeys), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                            var key = _step2.value;\n\n                            var feature = PreReleaseFeatures[key];\n\n                            if (name === _constants2.default.FeatureTogglePrefix + feature.label) {\n                                settings[name] = value;\n\n                                if (value === 'true') {\n                                    enabledFeatures += 1;\n                                }\n                            }\n                        }\n                    } catch (err) {\n                        _didIteratorError2 = true;\n                        _iteratorError2 = err;\n                    } finally {\n                        try {\n                            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                                _iterator2.return();\n                            }\n                        } finally {\n                            if (_didIteratorError2) {\n                                throw _iteratorError2;\n                            }\n                        }\n                    }\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            var isSaving = false;\n\n            return { preReleaseFeatures: PreReleaseFeatures,\n                settings: settings,\n                preReleaseFeaturesKeys: preReleaseFeaturesKeys,\n                enabledFeatures: enabledFeatures,\n                isSaving: isSaving\n            };\n        }\n    }, {\n        key: 'updateSetting',\n        value: function updateSetting(setting, value) {\n            var settings = this.state.settings;\n            settings[setting] = value;\n            this.setState(settings);\n        }\n    }, {\n        key: 'toggleFeature',\n        value: function toggleFeature(feature, checked) {\n            var _this2 = this;\n\n            var settings = this.state.settings;\n            settings[_constants2.default.FeatureTogglePrefix + feature] = String(checked);\n\n            var enabledFeatures = 0;\n            (0, _keys2.default)(this.state.settings).forEach(function (setting) {\n                if (setting.lastIndexOf(_constants2.default.FeatureTogglePrefix) === 0 && _this2.state.settings[setting] === 'true') {\n                    enabledFeatures++;\n                }\n            });\n\n            this.setState({ settings: settings, enabledFeatures: enabledFeatures });\n        }\n    }, {\n        key: 'saveEnabledFeatures',\n        value: function saveEnabledFeatures() {\n            var features = [];\n            (0, _keys2.default)(this.state.settings).forEach(function (setting) {\n                if (setting.lastIndexOf(_constants2.default.FeatureTogglePrefix) === 0) {\n                    features.push(setting);\n                }\n            });\n\n            this.handleSubmit(features);\n        }\n    }, {\n        key: 'handleSubmit',\n        value: function handleSubmit(settings) {\n            var _this3 = this;\n\n            var preferences = [];\n            var userId = _user_store2.default.getCurrentId();\n\n            // this should be refactored so we can actually be certain about what type everything is\n            (Array.isArray(settings) ? settings : [settings]).forEach(function (setting) {\n                preferences.push({\n                    user_id: userId,\n                    category: _constants2.default.Preferences.CATEGORY_ADVANCED_SETTINGS,\n                    name: setting,\n                    value: _this3.state.settings[setting]\n                });\n            });\n\n            this.setState({ isSaving: true });\n\n            (0, _user_actions.savePreferences)(preferences, function () {\n                _this3.updateSection('');\n            });\n        }\n    }, {\n        key: 'updateSection',\n        value: function updateSection(section) {\n            if (!section) {\n                this.setState(this.getStateFromStores());\n            }\n            this.setState({ isSaving: false });\n            this.props.updateSection(section);\n        }\n    }, {\n        key: 'renderOnOffLabel',\n        value: function renderOnOffLabel(enabled) {\n            if (enabled === 'false') {\n                return _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.advance.off',\n                    defaultMessage: 'Off'\n                });\n            }\n\n            return _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'user.settings.advance.on',\n                defaultMessage: 'On'\n            });\n        }\n    }, {\n        key: 'renderFormattingSection',\n        value: function renderFormattingSection() {\n            var _this4 = this;\n\n            if (this.props.activeSection === 'formatting') {\n                return _react2.default.createElement(_setting_item_max2.default, {\n                    title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.advance.formattingTitle',\n                        defaultMessage: 'Enable Post Formatting'\n                    }),\n                    inputs: [_react2.default.createElement(\n                        'div',\n                        { key: 'formattingSetting' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'radio' },\n                            _react2.default.createElement(\n                                'label',\n                                null,\n                                _react2.default.createElement('input', {\n                                    id: 'postFormattingOn',\n                                    type: 'radio',\n                                    name: 'formatting',\n                                    checked: this.state.settings.formatting !== 'false',\n                                    onChange: this.updateSetting.bind(this, 'formatting', 'true')\n                                }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.advance.on',\n                                    defaultMessage: 'On'\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'radio' },\n                            _react2.default.createElement(\n                                'label',\n                                null,\n                                _react2.default.createElement('input', {\n                                    id: 'postFormattingOff',\n                                    type: 'radio',\n                                    name: 'formatting',\n                                    checked: this.state.settings.formatting === 'false',\n                                    onChange: this.updateSetting.bind(this, 'formatting', 'false')\n                                }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.advance.off',\n                                    defaultMessage: 'Off'\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            null,\n                            _react2.default.createElement('br', null),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.advance.formattingDesc',\n                                defaultMessage: 'If enabled, posts will be formatted to create links, show emoji, style the text, and add line breaks. By default, this setting is enabled. Changing this setting requires the page to be refreshed.'\n                            })\n                        )\n                    )],\n                    submit: function submit() {\n                        return _this4.handleSubmit('formatting');\n                    },\n                    saving: this.state.isSaving,\n                    server_error: this.state.serverError,\n                    updateSection: function updateSection(e) {\n                        _this4.updateSection('');\n                        e.preventDefault();\n                    }\n                });\n            }\n\n            return _react2.default.createElement(_setting_item_min2.default, {\n                title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.advance.formattingTitle',\n                    defaultMessage: 'Enable Post Formatting'\n                }),\n                describe: this.renderOnOffLabel(this.state.settings.formatting),\n                updateSection: function updateSection() {\n                    return _this4.props.updateSection('formatting');\n                }\n            });\n        }\n    }, {\n        key: 'renderJoinLeaveSection',\n        value: function renderJoinLeaveSection() {\n            var _this5 = this;\n\n            if (window.mm_config.BuildEnterpriseReady === 'true' && window.mm_license && window.mm_license.IsLicensed === 'true') {\n                if (this.props.activeSection === 'join_leave') {\n                    return _react2.default.createElement(_setting_item_max2.default, {\n                        title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.advance.joinLeaveTitle',\n                            defaultMessage: 'Enable Join/Leave Messages'\n                        }),\n                        inputs: [_react2.default.createElement(\n                            'div',\n                            { key: 'joinLeaveSetting' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'radio' },\n                                _react2.default.createElement(\n                                    'label',\n                                    null,\n                                    _react2.default.createElement('input', {\n                                        id: 'joinLeaveOn',\n                                        type: 'radio',\n                                        name: 'join_leave',\n                                        checked: this.state.settings.join_leave !== 'false',\n                                        onChange: this.updateSetting.bind(this, 'join_leave', 'true')\n                                    }),\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'user.settings.advance.on',\n                                        defaultMessage: 'On'\n                                    })\n                                ),\n                                _react2.default.createElement('br', null)\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'radio' },\n                                _react2.default.createElement(\n                                    'label',\n                                    null,\n                                    _react2.default.createElement('input', {\n                                        id: 'joinLeaveOff',\n                                        type: 'radio',\n                                        name: 'join_leave',\n                                        checked: this.state.settings.join_leave === 'false',\n                                        onChange: this.updateSetting.bind(this, 'join_leave', 'false')\n                                    }),\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'user.settings.advance.off',\n                                        defaultMessage: 'Off'\n                                    })\n                                ),\n                                _react2.default.createElement('br', null)\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                null,\n                                _react2.default.createElement('br', null),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.advance.joinLeaveDesc',\n                                    defaultMessage: 'When \"On\", System Messages saying a user has joined or left a channel will be visible. When \"Off\", the System Messages about joining or leaving a channel will be hidden. A message will still show up when you are added to a channel, so you can receive a notification.'\n                                })\n                            )\n                        )],\n                        submit: function submit() {\n                            return _this5.handleSubmit('join_leave');\n                        },\n                        saving: this.state.isSaving,\n                        server_error: this.state.serverError,\n                        updateSection: function updateSection(e) {\n                            _this5.updateSection('');\n                            e.preventDefault();\n                        }\n                    });\n                }\n\n                return _react2.default.createElement(_setting_item_min2.default, {\n                    title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.advance.joinLeaveTitle',\n                        defaultMessage: 'Enable Join/Leave Messages'\n                    }),\n                    describe: this.renderOnOffLabel(this.state.settings.join_leave),\n                    updateSection: function updateSection() {\n                        return _this5.props.updateSection('join_leave');\n                    }\n                });\n            }\n\n            return null;\n        }\n    }, {\n        key: 'renderFeatureLabel',\n        value: function renderFeatureLabel(feature) {\n            switch (feature) {\n                case 'MARKDOWN_PREVIEW':\n                    return _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.advance.markdown_preview',\n                        defaultMessage: 'Show markdown preview option in message input box'\n                    });\n                case 'WEBRTC_PREVIEW':\n                    return _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.advance.webrtc_preview',\n                        defaultMessage: 'Enable the ability to make and receive one-on-one WebRTC calls'\n                    });\n                default:\n                    return null;\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this6 = this;\n\n            var serverError = this.state.serverError || null;\n            var ctrlSendSection = void 0;\n\n            if (this.props.activeSection === 'advancedCtrlSend') {\n                var ctrlSendActive = [this.state.settings.send_on_ctrl_enter === 'true', this.state.settings.send_on_ctrl_enter === 'false'];\n\n                var inputs = [_react2.default.createElement(\n                    'div',\n                    { key: 'ctrlSendSetting' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'ctrlSendOn',\n                                type: 'radio',\n                                name: 'sendOnCtrlEnter',\n                                checked: ctrlSendActive[0],\n                                onChange: this.updateSetting.bind(this, 'send_on_ctrl_enter', 'true')\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.advance.on',\n                                defaultMessage: 'On'\n                            })\n                        ),\n                        _react2.default.createElement('br', null)\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'ctrlSendOff',\n                                type: 'radio',\n                                name: 'sendOnCtrlEnter',\n                                checked: ctrlSendActive[1],\n                                onChange: this.updateSetting.bind(this, 'send_on_ctrl_enter', 'false')\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.advance.off',\n                                defaultMessage: 'Off'\n                            })\n                        ),\n                        _react2.default.createElement('br', null)\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.advance.sendDesc',\n                            defaultMessage: 'If enabled ENTER inserts a new line and CTRL+ENTER submits the message.'\n                        })\n                    )\n                )];\n                ctrlSendSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.advance.sendTitle',\n                        defaultMessage: 'Send messages on CTRL+ENTER'\n                    }),\n                    inputs: inputs,\n                    submit: function submit() {\n                        return _this6.handleSubmit('send_on_ctrl_enter');\n                    },\n                    saving: this.state.isSaving,\n                    server_error: serverError,\n                    updateSection: function updateSection(e) {\n                        _this6.updateSection('');\n                        e.preventDefault();\n                    }\n                });\n            } else {\n                ctrlSendSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.advance.sendTitle',\n                        defaultMessage: 'Send messages on CTRL+ENTER'\n                    }),\n                    describe: this.renderOnOffLabel(this.state.settings.send_on_ctrl_enter),\n                    updateSection: function updateSection() {\n                        return _this6.props.updateSection('advancedCtrlSend');\n                    }\n                });\n            }\n\n            var formattingSection = this.renderFormattingSection();\n            var formattingSectionDivider = null;\n            if (formattingSection) {\n                formattingSectionDivider = _react2.default.createElement('div', { className: 'divider-light' });\n            }\n\n            var displayJoinLeaveSection = this.renderJoinLeaveSection();\n            var displayJoinLeaveSectionDivider = null;\n            if (displayJoinLeaveSection) {\n                displayJoinLeaveSectionDivider = _react2.default.createElement('div', { className: 'divider-light' });\n            }\n\n            var previewFeaturesSection = void 0;\n            var previewFeaturesSectionDivider = void 0;\n            if (this.state.preReleaseFeaturesKeys.length > 0) {\n                previewFeaturesSectionDivider = _react2.default.createElement('div', { className: 'divider-light' });\n\n                if (this.props.activeSection === 'advancedPreviewFeatures') {\n                    var _inputs = [];\n\n                    this.state.preReleaseFeaturesKeys.forEach(function (key) {\n                        var feature = _this6.state.preReleaseFeatures[key];\n                        _inputs.push(_react2.default.createElement(\n                            'div',\n                            { key: 'advancedPreviewFeatures_' + feature.label },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'checkbox' },\n                                _react2.default.createElement(\n                                    'label',\n                                    null,\n                                    _react2.default.createElement('input', {\n                                        id: 'advancedPreviewFeatures' + feature.label,\n                                        type: 'checkbox',\n                                        checked: _this6.state.settings[_constants2.default.FeatureTogglePrefix + feature.label] === 'true',\n                                        onChange: function onChange(e) {\n                                            _this6.toggleFeature(feature.label, e.target.checked);\n                                        }\n                                    }),\n                                    _this6.renderFeatureLabel(key)\n                                )\n                            )\n                        ));\n                    });\n\n                    _inputs.push(_react2.default.createElement(\n                        'div',\n                        { key: 'advancedPreviewFeatures_helptext' },\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.advance.preReleaseDesc',\n                            defaultMessage: 'Check any pre-released features you\\'d like to preview.  You may also need to refresh the page before the setting will take effect.'\n                        })\n                    ));\n                    previewFeaturesSection = _react2.default.createElement(_setting_item_max2.default, {\n                        title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.advance.preReleaseTitle',\n                            defaultMessage: 'Preview pre-release features'\n                        }),\n                        inputs: _inputs,\n                        submit: this.saveEnabledFeatures,\n                        saving: this.state.isSaving,\n                        server_error: serverError,\n                        updateSection: function updateSection(e) {\n                            _this6.updateSection('');\n                            e.preventDefault();\n                        }\n                    });\n                } else {\n                    previewFeaturesSection = _react2.default.createElement(_setting_item_min2.default, {\n                        title: Utils.localizeMessage('user.settings.advance.preReleaseTitle', 'Preview pre-release features'),\n                        describe: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.advance.enabledFeatures',\n                            defaultMessage: '{count, number} {count, plural, one {Feature} other {Features}} Enabled',\n                            values: { count: this.state.enabledFeatures }\n                        }),\n                        updateSection: function updateSection() {\n                            return _this6.props.updateSection('advancedPreviewFeatures');\n                        }\n                    });\n                }\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'div',\n                    { className: 'modal-header' },\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            id: 'closeButton',\n                            type: 'button',\n                            className: 'close',\n                            'data-dismiss': 'modal',\n                            'aria-label': 'Close',\n                            onClick: this.props.closeModal\n                        },\n                        _react2.default.createElement(\n                            'span',\n                            { 'aria-hidden': 'true' },\n                            ''\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'h4',\n                        {\n                            className: 'modal-title',\n                            ref: 'title'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-back' },\n                            _react2.default.createElement('i', {\n                                className: 'fa fa-angle-left',\n                                onClick: this.props.collapseModal\n                            })\n                        ),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.advance.title',\n                            defaultMessage: 'Advanced Settings'\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'user-settings' },\n                    _react2.default.createElement(\n                        'h3',\n                        { className: 'tab-header' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.advance.title',\n                            defaultMessage: 'Advanced Settings'\n                        })\n                    ),\n                    _react2.default.createElement('div', { className: 'divider-dark first' }),\n                    ctrlSendSection,\n                    formattingSectionDivider,\n                    formattingSection,\n                    displayJoinLeaveSectionDivider,\n                    displayJoinLeaveSection,\n                    previewFeaturesSectionDivider,\n                    previewFeaturesSection,\n                    _react2.default.createElement('div', { className: 'divider-dark' })\n                )\n            );\n        }\n    }]);\n    return AdvancedSettingsDisplay;\n}(_react2.default.Component);\n\nexports.default = AdvancedSettingsDisplay;\n\n\nAdvancedSettingsDisplay.propTypes = {\n    user: _propTypes2.default.object,\n    updateSection: _propTypes2.default.func,\n    updateTab: _propTypes2.default.func,\n    activeSection: _propTypes2.default.string,\n    closeModal: _propTypes2.default.func.isRequired,\n    collapseModal: _propTypes2.default.func.isRequired\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19hZHZhbmNlZC5qc3g/NGY5OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcblxuaW1wb3J0IHtzYXZlUHJlZmVyZW5jZXN9IGZyb20gJ2FjdGlvbnMvdXNlcl9hY3Rpb25zLmpzeCc7XG5pbXBvcnQgUHJlZmVyZW5jZVN0b3JlIGZyb20gJ3N0b3Jlcy9wcmVmZXJlbmNlX3N0b3JlLmpzeCc7XG5pbXBvcnQgVXNlclN0b3JlIGZyb20gJ3N0b3Jlcy91c2VyX3N0b3JlLmpzeCc7XG5cbmltcG9ydCBDb25zdGFudHMgZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgU2V0dGluZ0l0ZW1NYXggZnJvbSAnLi4vc2V0dGluZ19pdGVtX21heC5qc3gnO1xuaW1wb3J0IFNldHRpbmdJdGVtTWluIGZyb20gJy4uL3NldHRpbmdfaXRlbV9taW4uanN4JztcblxuY29uc3QgUHJlUmVsZWFzZUZlYXR1cmVzID0gQ29uc3RhbnRzLlBSRV9SRUxFQVNFX0ZFQVRVUkVTO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZHZhbmNlZFNldHRpbmdzRGlzcGxheSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuZ2V0U3RhdGVGcm9tU3RvcmVzID0gdGhpcy5nZXRTdGF0ZUZyb21TdG9yZXMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uID0gdGhpcy51cGRhdGVTZWN0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlU2V0dGluZyA9IHRoaXMudXBkYXRlU2V0dGluZy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRvZ2dsZUZlYXR1cmUgPSB0aGlzLnRvZ2dsZUZlYXR1cmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYXZlRW5hYmxlZEZlYXR1cmVzID0gdGhpcy5zYXZlRW5hYmxlZEZlYXR1cmVzLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJGb3JtYXR0aW5nU2VjdGlvbiA9IHRoaXMucmVuZGVyRm9ybWF0dGluZ1NlY3Rpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZW5kZXJKb2luTGVhdmVTZWN0aW9uID0gdGhpcy5yZW5kZXJKb2luTGVhdmVTZWN0aW9uLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuZ2V0U3RhdGVGcm9tU3RvcmVzKCk7XG4gICAgfVxuXG4gICAgZ2V0U3RhdGVGcm9tU3RvcmVzKCkge1xuICAgICAgICBsZXQgcHJlUmVsZWFzZUZlYXR1cmVzS2V5cyA9IE9iamVjdC5rZXlzKFByZVJlbGVhc2VGZWF0dXJlcyk7XG4gICAgICAgIGNvbnN0IGFkdmFuY2VkU2V0dGluZ3MgPSBQcmVmZXJlbmNlU3RvcmUuZ2V0Q2F0ZWdvcnkoQ29uc3RhbnRzLlByZWZlcmVuY2VzLkNBVEVHT1JZX0FEVkFOQ0VEX1NFVFRJTkdTKTtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB7XG4gICAgICAgICAgICBzZW5kX29uX2N0cmxfZW50ZXI6IFByZWZlcmVuY2VTdG9yZS5nZXQoXG4gICAgICAgICAgICAgICAgQ29uc3RhbnRzLlByZWZlcmVuY2VzLkNBVEVHT1JZX0FEVkFOQ0VEX1NFVFRJTkdTLFxuICAgICAgICAgICAgICAgICdzZW5kX29uX2N0cmxfZW50ZXInLFxuICAgICAgICAgICAgICAgICdmYWxzZSdcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBmb3JtYXR0aW5nOiBQcmVmZXJlbmNlU3RvcmUuZ2V0KFxuICAgICAgICAgICAgICAgIENvbnN0YW50cy5QcmVmZXJlbmNlcy5DQVRFR09SWV9BRFZBTkNFRF9TRVRUSU5HUyxcbiAgICAgICAgICAgICAgICAnZm9ybWF0dGluZycsXG4gICAgICAgICAgICAgICAgJ3RydWUnXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgam9pbl9sZWF2ZTogUHJlZmVyZW5jZVN0b3JlLmdldChcbiAgICAgICAgICAgICAgICBDb25zdGFudHMuUHJlZmVyZW5jZXMuQ0FURUdPUllfQURWQU5DRURfU0VUVElOR1MsXG4gICAgICAgICAgICAgICAgJ2pvaW5fbGVhdmUnLFxuICAgICAgICAgICAgICAgICd0cnVlJ1xuICAgICAgICAgICAgKVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHdlYnJ0Y0VuYWJsZWQgPSBnbG9iYWwubW1fY29uZmlnLkVuYWJsZVdlYnJ0YyA9PT0gJ3RydWUnO1xuXG4gICAgICAgIGlmICghd2VicnRjRW5hYmxlZCkge1xuICAgICAgICAgICAgcHJlUmVsZWFzZUZlYXR1cmVzS2V5cyA9IHByZVJlbGVhc2VGZWF0dXJlc0tleXMuZmlsdGVyKChmKSA9PiBmICE9PSAnV0VCUlRDX1BSRVZJRVcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbmFibGVkRmVhdHVyZXMgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgYWR2YW5jZWRTZXR0aW5ncykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgcHJlUmVsZWFzZUZlYXR1cmVzS2V5cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlYXR1cmUgPSBQcmVSZWxlYXNlRmVhdHVyZXNba2V5XTtcblxuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSBDb25zdGFudHMuRmVhdHVyZVRvZ2dsZVByZWZpeCArIGZlYXR1cmUubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NbbmFtZV0gPSB2YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZEZlYXR1cmVzICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc1NhdmluZyA9IGZhbHNlO1xuXG4gICAgICAgIHJldHVybiB7cHJlUmVsZWFzZUZlYXR1cmVzOiBQcmVSZWxlYXNlRmVhdHVyZXMsXG4gICAgICAgICAgICBzZXR0aW5ncyxcbiAgICAgICAgICAgIHByZVJlbGVhc2VGZWF0dXJlc0tleXMsXG4gICAgICAgICAgICBlbmFibGVkRmVhdHVyZXMsXG4gICAgICAgICAgICBpc1NhdmluZ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHVwZGF0ZVNldHRpbmcoc2V0dGluZywgdmFsdWUpIHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnN0YXRlLnNldHRpbmdzO1xuICAgICAgICBzZXR0aW5nc1tzZXR0aW5nXSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHNldHRpbmdzKTtcbiAgICB9XG5cbiAgICB0b2dnbGVGZWF0dXJlKGZlYXR1cmUsIGNoZWNrZWQpIHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnN0YXRlLnNldHRpbmdzO1xuICAgICAgICBzZXR0aW5nc1tDb25zdGFudHMuRmVhdHVyZVRvZ2dsZVByZWZpeCArIGZlYXR1cmVdID0gU3RyaW5nKGNoZWNrZWQpO1xuXG4gICAgICAgIGxldCBlbmFibGVkRmVhdHVyZXMgPSAwO1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnN0YXRlLnNldHRpbmdzKS5mb3JFYWNoKChzZXR0aW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2V0dGluZy5sYXN0SW5kZXhPZihDb25zdGFudHMuRmVhdHVyZVRvZ2dsZVByZWZpeCkgPT09IDAgJiYgdGhpcy5zdGF0ZS5zZXR0aW5nc1tzZXR0aW5nXSA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZEZlYXR1cmVzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3NldHRpbmdzLCBlbmFibGVkRmVhdHVyZXN9KTtcbiAgICB9XG5cbiAgICBzYXZlRW5hYmxlZEZlYXR1cmVzKCkge1xuICAgICAgICBjb25zdCBmZWF0dXJlcyA9IFtdO1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnN0YXRlLnNldHRpbmdzKS5mb3JFYWNoKChzZXR0aW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2V0dGluZy5sYXN0SW5kZXhPZihDb25zdGFudHMuRmVhdHVyZVRvZ2dsZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKHNldHRpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmhhbmRsZVN1Ym1pdChmZWF0dXJlcyk7XG4gICAgfVxuXG4gICAgaGFuZGxlU3VibWl0KHNldHRpbmdzKSB7XG4gICAgICAgIGNvbnN0IHByZWZlcmVuY2VzID0gW107XG4gICAgICAgIGNvbnN0IHVzZXJJZCA9IFVzZXJTdG9yZS5nZXRDdXJyZW50SWQoKTtcblxuICAgICAgICAvLyB0aGlzIHNob3VsZCBiZSByZWZhY3RvcmVkIHNvIHdlIGNhbiBhY3R1YWxseSBiZSBjZXJ0YWluIGFib3V0IHdoYXQgdHlwZSBldmVyeXRoaW5nIGlzXG4gICAgICAgIChBcnJheS5pc0FycmF5KHNldHRpbmdzKSA/IHNldHRpbmdzIDogW3NldHRpbmdzXSkuZm9yRWFjaCgoc2V0dGluZykgPT4ge1xuICAgICAgICAgICAgcHJlZmVyZW5jZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBDb25zdGFudHMuUHJlZmVyZW5jZXMuQ0FURUdPUllfQURWQU5DRURfU0VUVElOR1MsXG4gICAgICAgICAgICAgICAgbmFtZTogc2V0dGluZyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5zZXR0aW5nc1tzZXR0aW5nXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzU2F2aW5nOiB0cnVlfSk7XG5cbiAgICAgICAgc2F2ZVByZWZlcmVuY2VzKFxuICAgICAgICAgICAgcHJlZmVyZW5jZXMsXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICB1cGRhdGVTZWN0aW9uKHNlY3Rpb24pIHtcbiAgICAgICAgaWYgKCFzZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuZ2V0U3RhdGVGcm9tU3RvcmVzKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzU2F2aW5nOiBmYWxzZX0pO1xuICAgICAgICB0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb24oc2VjdGlvbik7XG4gICAgfVxuXG4gICAgcmVuZGVyT25PZmZMYWJlbChlbmFibGVkKSB7XG4gICAgICAgIGlmIChlbmFibGVkID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmFkdmFuY2Uub2ZmJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nT2ZmJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuYWR2YW5jZS5vbidcbiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nT24nXG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlckZvcm1hdHRpbmdTZWN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uID09PSAnZm9ybWF0dGluZycpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWF4XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuYWR2YW5jZS5mb3JtYXR0aW5nVGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0VuYWJsZSBQb3N0IEZvcm1hdHRpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9J2Zvcm1hdHRpbmdTZXR0aW5nJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmFkaW8nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ncG9zdEZvcm1hdHRpbmdPbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdmb3JtYXR0aW5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUuc2V0dGluZ3MuZm9ybWF0dGluZyAhPT0gJ2ZhbHNlJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVTZXR0aW5nLmJpbmQodGhpcywgJ2Zvcm1hdHRpbmcnLCAndHJ1ZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuYWR2YW5jZS5vbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nT24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdwb3N0Rm9ybWF0dGluZ09mZidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdmb3JtYXR0aW5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUuc2V0dGluZ3MuZm9ybWF0dGluZyA9PT0gJ2ZhbHNlJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVTZXR0aW5nLmJpbmQodGhpcywgJ2Zvcm1hdHRpbmcnLCAnZmFsc2UnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmFkdmFuY2Uub2ZmJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdPZmYnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5hZHZhbmNlLmZvcm1hdHRpbmdEZXNjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0lmIGVuYWJsZWQsIHBvc3RzIHdpbGwgYmUgZm9ybWF0dGVkIHRvIGNyZWF0ZSBsaW5rcywgc2hvdyBlbW9qaSwgc3R5bGUgdGhlIHRleHQsIGFuZCBhZGQgbGluZSBicmVha3MuIEJ5IGRlZmF1bHQsIHRoaXMgc2V0dGluZyBpcyBlbmFibGVkLiBDaGFuZ2luZyB0aGlzIHNldHRpbmcgcmVxdWlyZXMgdGhlIHBhZ2UgdG8gYmUgcmVmcmVzaGVkLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ9eygpID0+IHRoaXMuaGFuZGxlU3VibWl0KCdmb3JtYXR0aW5nJyl9XG4gICAgICAgICAgICAgICAgICAgIHNhdmluZz17dGhpcy5zdGF0ZS5pc1NhdmluZ31cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXt0aGlzLnN0YXRlLnNlcnZlckVycm9yfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2V0dGluZ0l0ZW1NaW5cbiAgICAgICAgICAgICAgICB0aXRsZT17XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5hZHZhbmNlLmZvcm1hdHRpbmdUaXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdFbmFibGUgUG9zdCBGb3JtYXR0aW5nJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZXNjcmliZT17dGhpcy5yZW5kZXJPbk9mZkxhYmVsKHRoaXMuc3RhdGUuc2V0dGluZ3MuZm9ybWF0dGluZyl9XG4gICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17KCkgPT4gdGhpcy5wcm9wcy51cGRhdGVTZWN0aW9uKCdmb3JtYXR0aW5nJyl9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlckpvaW5MZWF2ZVNlY3Rpb24oKSB7XG4gICAgICAgIGlmICh3aW5kb3cubW1fY29uZmlnLkJ1aWxkRW50ZXJwcmlzZVJlYWR5ID09PSAndHJ1ZScgJiYgd2luZG93Lm1tX2xpY2Vuc2UgJiYgd2luZG93Lm1tX2xpY2Vuc2UuSXNMaWNlbnNlZCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uID09PSAnam9pbl9sZWF2ZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NYXhcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5hZHZhbmNlLmpvaW5MZWF2ZVRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRW5hYmxlIEpvaW4vTGVhdmUgTWVzc2FnZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0cz17W1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PSdqb2luTGVhdmVTZXR0aW5nJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JhZGlvJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2pvaW5MZWF2ZU9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0nam9pbl9sZWF2ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5zZXR0aW5ncy5qb2luX2xlYXZlICE9PSAnZmFsc2UnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVTZXR0aW5nLmJpbmQodGhpcywgJ2pvaW5fbGVhdmUnLCAndHJ1ZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuYWR2YW5jZS5vbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J09uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdqb2luTGVhdmVPZmYnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdqb2luX2xlYXZlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLnNldHRpbmdzLmpvaW5fbGVhdmUgPT09ICdmYWxzZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZVNldHRpbmcuYmluZCh0aGlzLCAnam9pbl9sZWF2ZScsICdmYWxzZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuYWR2YW5jZS5vZmYnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdPZmYnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmFkdmFuY2Uuam9pbkxlYXZlRGVzYydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nV2hlbiBcIk9uXCIsIFN5c3RlbSBNZXNzYWdlcyBzYXlpbmcgYSB1c2VyIGhhcyBqb2luZWQgb3IgbGVmdCBhIGNoYW5uZWwgd2lsbCBiZSB2aXNpYmxlLiBXaGVuIFwiT2ZmXCIsIHRoZSBTeXN0ZW0gTWVzc2FnZXMgYWJvdXQgam9pbmluZyBvciBsZWF2aW5nIGEgY2hhbm5lbCB3aWxsIGJlIGhpZGRlbi4gQSBtZXNzYWdlIHdpbGwgc3RpbGwgc2hvdyB1cCB3aGVuIHlvdSBhcmUgYWRkZWQgdG8gYSBjaGFubmVsLCBzbyB5b3UgY2FuIHJlY2VpdmUgYSBub3RpZmljYXRpb24uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICBdfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3VibWl0PXsoKSA9PiB0aGlzLmhhbmRsZVN1Ym1pdCgnam9pbl9sZWF2ZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2aW5nPXt0aGlzLnN0YXRlLmlzU2F2aW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXt0aGlzLnN0YXRlLnNlcnZlckVycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NaW5cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5hZHZhbmNlLmpvaW5MZWF2ZVRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdFbmFibGUgSm9pbi9MZWF2ZSBNZXNzYWdlcydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmU9e3RoaXMucmVuZGVyT25PZmZMYWJlbCh0aGlzLnN0YXRlLnNldHRpbmdzLmpvaW5fbGVhdmUpfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXsoKSA9PiB0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb24oJ2pvaW5fbGVhdmUnKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJlbmRlckZlYXR1cmVMYWJlbChmZWF0dXJlKSB7XG4gICAgICAgIHN3aXRjaCAoZmVhdHVyZSkge1xuICAgICAgICBjYXNlICdNQVJLRE9XTl9QUkVWSUVXJzpcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuYWR2YW5jZS5tYXJrZG93bl9wcmV2aWV3J1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU2hvdyBtYXJrZG93biBwcmV2aWV3IG9wdGlvbiBpbiBtZXNzYWdlIGlucHV0IGJveCdcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgY2FzZSAnV0VCUlRDX1BSRVZJRVcnOlxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5hZHZhbmNlLndlYnJ0Y19wcmV2aWV3J1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRW5hYmxlIHRoZSBhYmlsaXR5IHRvIG1ha2UgYW5kIHJlY2VpdmUgb25lLW9uLW9uZSBXZWJSVEMgY2FsbHMnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qgc2VydmVyRXJyb3IgPSB0aGlzLnN0YXRlLnNlcnZlckVycm9yIHx8IG51bGw7XG4gICAgICAgIGxldCBjdHJsU2VuZFNlY3Rpb247XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlU2VjdGlvbiA9PT0gJ2FkdmFuY2VkQ3RybFNlbmQnKSB7XG4gICAgICAgICAgICBjb25zdCBjdHJsU2VuZEFjdGl2ZSA9IFtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnNldHRpbmdzLnNlbmRfb25fY3RybF9lbnRlciA9PT0gJ3RydWUnLFxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc2V0dGluZ3Muc2VuZF9vbl9jdHJsX2VudGVyID09PSAnZmFsc2UnXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBbXG4gICAgICAgICAgICAgICAgPGRpdiBrZXk9J2N0cmxTZW5kU2V0dGluZyc+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdjdHJsU2VuZE9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0nc2VuZE9uQ3RybEVudGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjdHJsU2VuZEFjdGl2ZVswXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlU2V0dGluZy5iaW5kKHRoaXMsICdzZW5kX29uX2N0cmxfZW50ZXInLCAndHJ1ZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuYWR2YW5jZS5vbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J09uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdjdHJsU2VuZE9mZidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J3NlbmRPbkN0cmxFbnRlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3RybFNlbmRBY3RpdmVbMV19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZVNldHRpbmcuYmluZCh0aGlzLCAnc2VuZF9vbl9jdHJsX2VudGVyJywgJ2ZhbHNlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5hZHZhbmNlLm9mZidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J09mZidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuYWR2YW5jZS5zZW5kRGVzYydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nSWYgZW5hYmxlZCBFTlRFUiBpbnNlcnRzIGEgbmV3IGxpbmUgYW5kIENUUkwrRU5URVIgc3VibWl0cyB0aGUgbWVzc2FnZS4nXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBjdHJsU2VuZFNlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWF4XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuYWR2YW5jZS5zZW5kVGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1NlbmQgbWVzc2FnZXMgb24gQ1RSTCtFTlRFUidcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzPXtpbnB1dHN9XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdD17KCkgPT4gdGhpcy5oYW5kbGVTdWJtaXQoJ3NlbmRfb25fY3RybF9lbnRlcicpfVxuICAgICAgICAgICAgICAgICAgICBzYXZpbmc9e3RoaXMuc3RhdGUuaXNTYXZpbmd9XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9lcnJvcj17c2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3RybFNlbmRTZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1pblxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmFkdmFuY2Uuc2VuZFRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTZW5kIG1lc3NhZ2VzIG9uIENUUkwrRU5URVInXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlPXt0aGlzLnJlbmRlck9uT2ZmTGFiZWwodGhpcy5zdGF0ZS5zZXR0aW5ncy5zZW5kX29uX2N0cmxfZW50ZXIpfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXsoKSA9PiB0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb24oJ2FkdmFuY2VkQ3RybFNlbmQnKX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcm1hdHRpbmdTZWN0aW9uID0gdGhpcy5yZW5kZXJGb3JtYXR0aW5nU2VjdGlvbigpO1xuICAgICAgICBsZXQgZm9ybWF0dGluZ1NlY3Rpb25EaXZpZGVyID0gbnVsbDtcbiAgICAgICAgaWYgKGZvcm1hdHRpbmdTZWN0aW9uKSB7XG4gICAgICAgICAgICBmb3JtYXR0aW5nU2VjdGlvbkRpdmlkZXIgPSA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1saWdodCcvPjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRpc3BsYXlKb2luTGVhdmVTZWN0aW9uID0gdGhpcy5yZW5kZXJKb2luTGVhdmVTZWN0aW9uKCk7XG4gICAgICAgIGxldCBkaXNwbGF5Sm9pbkxlYXZlU2VjdGlvbkRpdmlkZXIgPSBudWxsO1xuICAgICAgICBpZiAoZGlzcGxheUpvaW5MZWF2ZVNlY3Rpb24pIHtcbiAgICAgICAgICAgIGRpc3BsYXlKb2luTGVhdmVTZWN0aW9uRGl2aWRlciA9IDxkaXYgY2xhc3NOYW1lPSdkaXZpZGVyLWxpZ2h0Jy8+O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHByZXZpZXdGZWF0dXJlc1NlY3Rpb247XG4gICAgICAgIGxldCBwcmV2aWV3RmVhdHVyZXNTZWN0aW9uRGl2aWRlcjtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucHJlUmVsZWFzZUZlYXR1cmVzS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBwcmV2aWV3RmVhdHVyZXNTZWN0aW9uRGl2aWRlciA9IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1saWdodCcvPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlU2VjdGlvbiA9PT0gJ2FkdmFuY2VkUHJldmlld0ZlYXR1cmVzJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0cyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5wcmVSZWxlYXNlRmVhdHVyZXNLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWF0dXJlID0gdGhpcy5zdGF0ZS5wcmVSZWxlYXNlRmVhdHVyZXNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17J2FkdmFuY2VkUHJldmlld0ZlYXR1cmVzXycgKyBmZWF0dXJlLmxhYmVsfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY2hlY2tib3gnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17J2FkdmFuY2VkUHJldmlld0ZlYXR1cmVzJyArIGZlYXR1cmUubGFiZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nY2hlY2tib3gnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5zZXR0aW5nc1tDb25zdGFudHMuRmVhdHVyZVRvZ2dsZVByZWZpeCArIGZlYXR1cmUubGFiZWxdID09PSAndHJ1ZSd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlRmVhdHVyZShmZWF0dXJlLmxhYmVsLCBlLnRhcmdldC5jaGVja2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckZlYXR1cmVMYWJlbChrZXkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9J2FkdmFuY2VkUHJldmlld0ZlYXR1cmVzX2hlbHB0ZXh0Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmFkdmFuY2UucHJlUmVsZWFzZURlc2MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9XCJDaGVjayBhbnkgcHJlLXJlbGVhc2VkIGZlYXR1cmVzIHlvdSdkIGxpa2UgdG8gcHJldmlldy4gIFlvdSBtYXkgYWxzbyBuZWVkIHRvIHJlZnJlc2ggdGhlIHBhZ2UgYmVmb3JlIHRoZSBzZXR0aW5nIHdpbGwgdGFrZSBlZmZlY3QuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcHJldmlld0ZlYXR1cmVzU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWF4XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuYWR2YW5jZS5wcmVSZWxlYXNlVGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdQcmV2aWV3IHByZS1yZWxlYXNlIGZlYXR1cmVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dHM9e2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdD17dGhpcy5zYXZlRW5hYmxlZEZlYXR1cmVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2aW5nPXt0aGlzLnN0YXRlLmlzU2F2aW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXtzZXJ2ZXJFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXZpZXdGZWF0dXJlc1NlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1pblxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgndXNlci5zZXR0aW5ncy5hZHZhbmNlLnByZVJlbGVhc2VUaXRsZScsICdQcmV2aWV3IHByZS1yZWxlYXNlIGZlYXR1cmVzJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmliZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuYWR2YW5jZS5lbmFibGVkRmVhdHVyZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSd7Y291bnQsIG51bWJlcn0ge2NvdW50LCBwbHVyYWwsIG9uZSB7RmVhdHVyZX0gb3RoZXIge0ZlYXR1cmVzfX0gRW5hYmxlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7Y291bnQ6IHRoaXMuc3RhdGUuZW5hYmxlZEZlYXR1cmVzfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17KCkgPT4gdGhpcy5wcm9wcy51cGRhdGVTZWN0aW9uKCdhZHZhbmNlZFByZXZpZXdGZWF0dXJlcycpfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbW9kYWwtaGVhZGVyJz5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2Nsb3NlQnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdjbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtZGlzbWlzcz0nbW9kYWwnXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSdDbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuY2xvc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49J3RydWUnPnsnw5cnfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxoNFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtb2RhbC10aXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0ndGl0bGUnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtb2RhbC1iYWNrJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZhIGZhLWFuZ2xlLWxlZnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuY29sbGFwc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmFkdmFuY2UudGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0FkdmFuY2VkIFNldHRpbmdzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndXNlci1zZXR0aW5ncyc+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9J3RhYi1oZWFkZXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5hZHZhbmNlLnRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdBZHZhbmNlZCBTZXR0aW5ncydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkaXZpZGVyLWRhcmsgZmlyc3QnLz5cbiAgICAgICAgICAgICAgICAgICAge2N0cmxTZW5kU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAge2Zvcm1hdHRpbmdTZWN0aW9uRGl2aWRlcn1cbiAgICAgICAgICAgICAgICAgICAge2Zvcm1hdHRpbmdTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICB7ZGlzcGxheUpvaW5MZWF2ZVNlY3Rpb25EaXZpZGVyfVxuICAgICAgICAgICAgICAgICAgICB7ZGlzcGxheUpvaW5MZWF2ZVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgIHtwcmV2aWV3RmVhdHVyZXNTZWN0aW9uRGl2aWRlcn1cbiAgICAgICAgICAgICAgICAgICAge3ByZXZpZXdGZWF0dXJlc1NlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkaXZpZGVyLWRhcmsnLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuQWR2YW5jZWRTZXR0aW5nc0Rpc3BsYXkucHJvcFR5cGVzID0ge1xuICAgIHVzZXI6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgdXBkYXRlU2VjdGlvbjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgdXBkYXRlVGFiOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBhY3RpdmVTZWN0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGNsb3NlTW9kYWw6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgY29sbGFwc2VNb2RhbDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19hZHZhbmNlZC5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFoQkE7QUFDQTtBQUNBO0FBZUE7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUtBO0FBWEE7QUFDQTtBQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUEzQkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQTRCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVlBO0FBeENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQWFBO0FBZEE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVJBO0FBYUE7QUFkQTtBQWdCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFqQ0E7QUEwQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeERBO0FBMkRBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFSQTtBQVdBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQWFBO0FBZEE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVJBO0FBYUE7QUFkQTtBQWdCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFqQ0E7QUEwQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeERBO0FBMkRBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFSQTtBQVdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBaEJBO0FBa0JBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFhQTtBQWRBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQWFBO0FBZEE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBakNBO0FBMENBO0FBRUE7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBaUJBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFBQTtBQUFBO0FBUkE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFUQTtBQURBO0FBREE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQVFBO0FBRUE7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBZEE7QUFpQkE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQUE7QUFBQTtBQVRBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFWQTtBQVhBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFmQTtBQTVCQTtBQStDQTs7O0FBdmlCQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBd2lCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2528\n");

/***/ }),

/***/ 2529:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _user_actions = __webpack_require__(71);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _i18n = __webpack_require__(457);\n\nvar I18n = _interopRequireWildcard(_i18n);\n\nvar _setting_item_max = __webpack_require__(770);\n\nvar _setting_item_max2 = _interopRequireDefault(_setting_item_max);\n\nvar _setting_item_min = __webpack_require__(771);\n\nvar _setting_item_min2 = _interopRequireDefault(_setting_item_min);\n\nvar _manage_languages = __webpack_require__(2530);\n\nvar _manage_languages2 = _interopRequireDefault(_manage_languages);\n\nvar _user_settings_theme = __webpack_require__(2531);\n\nvar _user_settings_theme2 = _interopRequireDefault(_user_settings_theme);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Preferences = _constants2.default.Preferences; // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction getDisplayStateFromStores() {\n    return {\n        militaryTime: _preference_store2.default.get(Preferences.CATEGORY_DISPLAY_SETTINGS, 'use_military_time', 'false'),\n        channelDisplayMode: _preference_store2.default.get(Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.CHANNEL_DISPLAY_MODE, Preferences.CHANNEL_DISPLAY_MODE_DEFAULT),\n        messageDisplay: _preference_store2.default.get(Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.MESSAGE_DISPLAY, Preferences.MESSAGE_DISPLAY_DEFAULT),\n        collapseDisplay: _preference_store2.default.get(Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.COLLAPSE_DISPLAY, Preferences.COLLAPSE_DISPLAY_DEFAULT),\n        linkPreviewDisplay: _preference_store2.default.get(Preferences.CATEGORY_DISPLAY_SETTINGS, Preferences.LINK_PREVIEW_DISPLAY, Preferences.LINK_PREVIEW_DISPLAY_DEFAULT)\n    };\n}\n\nvar UserSettingsDisplay = function (_React$Component) {\n    (0, _inherits3.default)(UserSettingsDisplay, _React$Component);\n\n    function UserSettingsDisplay(props) {\n        (0, _classCallCheck3.default)(this, UserSettingsDisplay);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (UserSettingsDisplay.__proto__ || (0, _getPrototypeOf2.default)(UserSettingsDisplay)).call(this, props));\n\n        _this.handleSubmit = _this.handleSubmit.bind(_this);\n        _this.handleClockRadio = _this.handleClockRadio.bind(_this);\n        _this.updateSection = _this.updateSection.bind(_this);\n        _this.updateState = _this.updateState.bind(_this);\n\n        _this.state = getDisplayStateFromStores();\n        _this.setState({ isSaving: false });\n        return _this;\n    }\n\n    (0, _createClass3.default)(UserSettingsDisplay, [{\n        key: 'handleSubmit',\n        value: function handleSubmit() {\n            var _this2 = this;\n\n            var userId = _user_store2.default.getCurrentId();\n\n            var timePreference = {\n                user_id: userId,\n                category: Preferences.CATEGORY_DISPLAY_SETTINGS,\n                name: 'use_military_time',\n                value: this.state.militaryTime\n            };\n\n            var channelDisplayModePreference = {\n                user_id: userId,\n                category: Preferences.CATEGORY_DISPLAY_SETTINGS,\n                name: Preferences.CHANNEL_DISPLAY_MODE,\n                value: this.state.channelDisplayMode\n            };\n            var messageDisplayPreference = {\n                user_id: userId,\n                category: Preferences.CATEGORY_DISPLAY_SETTINGS,\n                name: Preferences.MESSAGE_DISPLAY,\n                value: this.state.messageDisplay\n            };\n            var collapseDisplayPreference = {\n                user_id: userId,\n                category: Preferences.CATEGORY_DISPLAY_SETTINGS,\n                name: Preferences.COLLAPSE_DISPLAY,\n                value: this.state.collapseDisplay\n            };\n            var linkPreviewDisplayPreference = {\n                user_id: userId,\n                category: Preferences.CATEGORY_DISPLAY_SETTINGS,\n                name: Preferences.LINK_PREVIEW_DISPLAY,\n                value: this.state.linkPreviewDisplay\n            };\n\n            this.setState({ isSaving: true });\n\n            (0, _user_actions.savePreferences)([timePreference, channelDisplayModePreference, messageDisplayPreference, collapseDisplayPreference, linkPreviewDisplayPreference], function () {\n                _this2.updateSection('');\n            });\n        }\n    }, {\n        key: 'handleClockRadio',\n        value: function handleClockRadio(militaryTime) {\n            this.setState({ militaryTime: militaryTime });\n        }\n    }, {\n        key: 'handleChannelDisplayModeRadio',\n        value: function handleChannelDisplayModeRadio(channelDisplayMode) {\n            this.setState({ channelDisplayMode: channelDisplayMode });\n        }\n    }, {\n        key: 'handlemessageDisplayRadio',\n        value: function handlemessageDisplayRadio(messageDisplay) {\n            this.setState({ messageDisplay: messageDisplay });\n        }\n    }, {\n        key: 'handleCollapseRadio',\n        value: function handleCollapseRadio(collapseDisplay) {\n            this.setState({ collapseDisplay: collapseDisplay });\n        }\n    }, {\n        key: 'handleLinkPreviewRadio',\n        value: function handleLinkPreviewRadio(linkPreviewDisplay) {\n            this.setState({ linkPreviewDisplay: linkPreviewDisplay });\n        }\n    }, {\n        key: 'handleOnChange',\n        value: function handleOnChange(display) {\n            this.setState((0, _extends3.default)({}, display));\n        }\n    }, {\n        key: 'updateSection',\n        value: function updateSection(section) {\n            this.updateState();\n            this.props.updateSection(section);\n        }\n    }, {\n        key: 'updateState',\n        value: function updateState() {\n            var newState = getDisplayStateFromStores();\n            if (!Utils.areObjectsEqual(newState, this.state)) {\n                this.setState(newState);\n            }\n\n            this.setState({ isSaving: false });\n        }\n    }, {\n        key: 'createSection',\n        value: function createSection(props) {\n            var _this3 = this;\n\n            var section = props.section,\n                display = props.display,\n                value = props.value,\n                title = props.title,\n                firstOption = props.firstOption,\n                secondOption = props.secondOption,\n                description = props.description;\n\n\n            var firstMessage = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: firstOption.radionButtonText.id,\n                defaultMessage: firstOption.radionButtonText.message\n            });\n\n            var moreColon = void 0;\n            var firstMessageMore = void 0;\n            if (firstOption.radionButtonText.moreId) {\n                moreColon = ': ';\n                firstMessageMore = _react2.default.createElement(\n                    'span',\n                    { className: 'font-weight--normal' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: firstOption.radionButtonText.moreId,\n                        defaultMessage: firstOption.radionButtonText.moreMessage\n                    })\n                );\n            }\n\n            var secondMessageMore = void 0;\n            if (secondOption.radionButtonText.moreId) {\n                secondMessageMore = _react2.default.createElement(\n                    'span',\n                    { className: 'font-weight--normal' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: secondOption.radionButtonText.moreId,\n                        defaultMessage: secondOption.radionButtonText.moreMessage\n                    })\n                );\n            }\n\n            var secondMessage = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: secondOption.radionButtonText.id,\n                defaultMessage: secondOption.radionButtonText.message\n            });\n\n            var messageTitle = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: title.id,\n                defaultMessage: title.message\n            });\n\n            var messageDesc = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: description.id,\n                defaultMessage: description.message\n            });\n\n            if (this.props.activeSection === section) {\n                var format = [false, false];\n                if (value === firstOption.value) {\n                    format[0] = true;\n                } else {\n                    format[1] = true;\n                }\n\n                var _handleUpdateSection = function _handleUpdateSection(e) {\n                    _this3.updateSection('');\n                    e.preventDefault();\n                };\n\n                var name = section + 'Format';\n                var key = section + 'UserDisplay';\n\n                var firstDisplay = {};\n                firstDisplay[display] = firstOption.value;\n\n                var secondDisplay = {};\n                secondDisplay[display] = secondOption.value;\n\n                var inputs = [_react2.default.createElement(\n                    'div',\n                    { key: key },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: name + 'A',\n                                type: 'radio',\n                                name: name,\n                                checked: format[0],\n                                onChange: function onChange() {\n                                    return _this3.handleOnChange(firstDisplay);\n                                }\n                            }),\n                            firstMessage,\n                            moreColon,\n                            firstMessageMore\n                        ),\n                        _react2.default.createElement('br', null)\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: name + 'B',\n                                type: 'radio',\n                                name: name,\n                                checked: format[1],\n                                onChange: function onChange() {\n                                    return _this3.handleOnChange(secondDisplay);\n                                }\n                            }),\n                            secondMessage,\n                            moreColon,\n                            secondMessageMore\n                        ),\n                        _react2.default.createElement('br', null)\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement('br', null),\n                        messageDesc\n                    )\n                )];\n\n                return _react2.default.createElement(_setting_item_max2.default, {\n                    title: messageTitle,\n                    inputs: inputs,\n                    submit: this.handleSubmit,\n                    saving: this.state.isSaving,\n                    server_error: this.state.serverError,\n                    updateSection: _handleUpdateSection\n                });\n            }\n\n            var describe = void 0;\n            if (value === firstOption.value) {\n                describe = firstMessage;\n            } else {\n                describe = secondMessage;\n            }\n\n            var handleUpdateSection = function handleUpdateSection() {\n                _this3.props.updateSection(section);\n            };\n\n            return _react2.default.createElement(_setting_item_min2.default, {\n                title: messageTitle,\n                describe: describe,\n                updateSection: handleUpdateSection\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this4 = this;\n\n            var collapseSection = this.createSection({\n                section: 'collapse',\n                display: 'collapseDisplay',\n                value: this.state.collapseDisplay,\n                defaultDisplay: 'false',\n                title: {\n                    id: 'user.settings.display.collapseDisplay',\n                    message: 'Default appearance of image link previews'\n                },\n                firstOption: {\n                    value: 'false',\n                    radionButtonText: {\n                        id: 'user.settings.display.collapseOn',\n                        message: 'On'\n                    }\n                },\n                secondOption: {\n                    value: 'true',\n                    radionButtonText: {\n                        id: 'user.settings.display.collapseOff',\n                        message: 'Off'\n                    }\n                },\n                description: {\n                    id: 'user.settings.display.collapseDesc',\n                    message: 'Set whether previews of image links show as expanded or collapsed by default. This setting can also be controlled using the slash commands /expand and /collapse.'\n                }\n            });\n\n            var isEnableLinkPreviews = global.window.mm_config.EnableLinkPreviews === 'true';\n            var linkPreviewSection = null;\n            var divider = null;\n            if (isEnableLinkPreviews) {\n                linkPreviewSection = this.createSection({\n                    section: 'linkpreview',\n                    display: 'linkPreviewDisplay',\n                    value: this.state.linkPreviewDisplay,\n                    defaultDisplay: 'true',\n                    title: {\n                        id: 'user.settings.display.linkPreviewDisplay',\n                        message: 'Website Link Previews'\n                    },\n                    firstOption: {\n                        value: 'true',\n                        radionButtonText: {\n                            id: 'user.settings.display.linkPreviewOn',\n                            message: 'On'\n                        }\n                    },\n                    secondOption: {\n                        value: 'false',\n                        radionButtonText: {\n                            id: 'user.settings.display.linkPreviewOff',\n                            message: 'Off'\n                        }\n                    },\n                    description: {\n                        id: 'user.settings.display.linkPreviewDesc',\n                        message: 'When available, the first web link in a message will show a preview of the website content below the message.'\n                    }\n                });\n                divider = _react2.default.createElement('div', { className: 'divider-dark' });\n            }\n\n            var clockSection = this.createSection({\n                section: 'clock',\n                display: 'militaryTime',\n                value: this.state.militaryTime,\n                defaultDisplay: 'false',\n                title: {\n                    id: 'user.settings.display.clockDisplay',\n                    message: 'Clock Display'\n                },\n                firstOption: {\n                    value: 'false',\n                    radionButtonText: {\n                        id: 'user.settings.display.normalClock',\n                        message: '12-hour clock (example: 4:00 PM)'\n                    }\n                },\n                secondOption: {\n                    value: 'true',\n                    radionButtonText: {\n                        id: 'user.settings.display.militaryClock',\n                        message: '24-hour clock (example: 16:00)'\n                    }\n                },\n                description: {\n                    id: 'user.settings.display.preferTime',\n                    message: 'Select how you prefer time displayed.'\n                }\n            });\n\n            var messageDisplaySection = this.createSection({\n                section: Preferences.MESSAGE_DISPLAY,\n                display: 'messageDisplay',\n                value: this.state.messageDisplay,\n                defaultDisplay: Preferences.MESSAGE_DISPLAY_CLEAN,\n                title: {\n                    id: 'user.settings.display.messageDisplayTitle',\n                    message: 'Message Display'\n                },\n                firstOption: {\n                    value: Preferences.MESSAGE_DISPLAY_CLEAN,\n                    radionButtonText: {\n                        id: 'user.settings.display.messageDisplayClean',\n                        message: 'Standard',\n                        moreId: 'user.settings.display.messageDisplayCleanDes',\n                        moreMessage: 'Easy to scan and read.'\n                    }\n                },\n                secondOption: {\n                    value: Preferences.MESSAGE_DISPLAY_COMPACT,\n                    radionButtonText: {\n                        id: 'user.settings.display.messageDisplayCompact',\n                        message: 'Compact',\n                        moreId: 'user.settings.display.messageDisplayCompactDes',\n                        moreMessage: 'Fit as many messages on the screen as we can.'\n                    }\n                },\n                description: {\n                    id: 'user.settings.display.messageDisplayDescription',\n                    message: 'Select how messages in a channel should be displayed.'\n                }\n            });\n\n            var channelDisplayModeSection = this.createSection({\n                section: Preferences.CHANNEL_DISPLAY_MODE,\n                display: 'channelDisplayMode',\n                value: this.state.channelDisplayMode,\n                defaultDisplay: Preferences.CHANNEL_DISPLAY_MODE_FULL_SCREEN,\n                title: {\n                    id: 'user.settings.display.channelDisplayTitle',\n                    message: 'Channel Display Mode'\n                },\n                firstOption: {\n                    value: Preferences.CHANNEL_DISPLAY_MODE_FULL_SCREEN,\n                    radionButtonText: {\n                        id: 'user.settings.display.fullScreen',\n                        message: 'Full width'\n                    }\n                },\n                secondOption: {\n                    value: Preferences.CHANNEL_DISPLAY_MODE_CENTERED,\n                    radionButtonText: {\n                        id: 'user.settings.display.fixedWidthCentered',\n                        message: 'Fixed width, centered'\n                    }\n                },\n                description: {\n                    id: 'user.settings.display.channeldisplaymode',\n                    message: 'Select the width of the center channel.'\n                }\n            });\n\n            var languagesSection = void 0;\n            var userLocale = this.props.user.locale;\n            if (this.props.activeSection === 'languages') {\n                if (!I18n.isLanguageAvailable(userLocale)) {\n                    userLocale = global.window.mm_config.DefaultClientLocale;\n                }\n                languagesSection = _react2.default.createElement(_manage_languages2.default, {\n                    user: this.props.user,\n                    locale: userLocale,\n                    updateSection: function updateSection(e) {\n                        _this4.updateSection('');\n                        e.preventDefault();\n                    }\n                });\n            } else {\n                var locale = void 0;\n                if (I18n.isLanguageAvailable(userLocale)) {\n                    locale = I18n.getLanguageInfo(userLocale).name;\n                } else {\n                    locale = I18n.getLanguageInfo(global.window.mm_config.DefaultClientLocale).name;\n                }\n\n                languagesSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.display.language',\n                        defaultMessage: 'Language'\n                    }),\n                    width: 'medium',\n                    describe: locale,\n                    updateSection: function updateSection() {\n                        _this4.updateSection('languages');\n                    }\n                });\n            }\n\n            var themeSection = void 0;\n            if (global.mm_config.EnableThemeSelection !== 'false') {\n                themeSection = _react2.default.createElement(_user_settings_theme2.default, {\n                    selected: this.props.activeSection === 'theme',\n                    updateSection: this.updateSection,\n                    setRequireConfirm: this.props.setRequireConfirm,\n                    setEnforceFocus: this.props.setEnforceFocus\n                });\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { id: 'displaySettings' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'modal-header' },\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            id: 'closeButton',\n                            type: 'button',\n                            className: 'close',\n                            'data-dismiss': 'modal',\n                            'aria-label': 'Close',\n                            onClick: this.props.closeModal\n                        },\n                        _react2.default.createElement(\n                            'span',\n                            { 'aria-hidden': 'true' },\n                            ''\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'h4',\n                        {\n                            className: 'modal-title',\n                            ref: 'title'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-back' },\n                            _react2.default.createElement('i', {\n                                className: 'fa fa-angle-left',\n                                onClick: this.props.collapseModal\n                            })\n                        ),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.display.title',\n                            defaultMessage: 'Display Settings'\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'user-settings' },\n                    _react2.default.createElement(\n                        'h3',\n                        {\n                            id: 'displaySettingsTitle',\n                            className: 'tab-header'\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.display.title',\n                            defaultMessage: 'Display Settings'\n                        })\n                    ),\n                    _react2.default.createElement('div', { className: 'divider-dark first' }),\n                    themeSection,\n                    _react2.default.createElement('div', { className: 'divider-dark' }),\n                    clockSection,\n                    divider,\n                    linkPreviewSection,\n                    _react2.default.createElement('div', { className: 'divider-dark' }),\n                    collapseSection,\n                    _react2.default.createElement('div', { className: 'divider-dark' }),\n                    messageDisplaySection,\n                    _react2.default.createElement('div', { className: 'divider-dark' }),\n                    channelDisplayModeSection,\n                    _react2.default.createElement('div', { className: 'divider-dark' }),\n                    languagesSection\n                )\n            );\n        }\n    }]);\n    return UserSettingsDisplay;\n}(_react2.default.Component);\n\nexports.default = UserSettingsDisplay;\n\n\nUserSettingsDisplay.propTypes = {\n    user: _propTypes2.default.object,\n    updateSection: _propTypes2.default.func,\n    updateTab: _propTypes2.default.func,\n    activeSection: _propTypes2.default.string,\n    closeModal: _propTypes2.default.func.isRequired,\n    collapseModal: _propTypes2.default.func.isRequired,\n    setRequireConfirm: _propTypes2.default.func.isRequired,\n    setEnforceFocus: _propTypes2.default.func.isRequired\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19kaXNwbGF5LmpzeD83MGRmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQge3NhdmVQcmVmZXJlbmNlc30gZnJvbSAnYWN0aW9ucy91c2VyX2FjdGlvbnMuanN4JztcbmltcG9ydCBQcmVmZXJlbmNlU3RvcmUgZnJvbSAnc3RvcmVzL3ByZWZlcmVuY2Vfc3RvcmUuanN4JztcbmltcG9ydCBVc2VyU3RvcmUgZnJvbSAnc3RvcmVzL3VzZXJfc3RvcmUuanN4JztcblxuaW1wb3J0IENvbnN0YW50cyBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCAqIGFzIEkxOG4gZnJvbSAnaTE4bi9pMThuLmpzeCc7XG5cbmltcG9ydCBTZXR0aW5nSXRlbU1heCBmcm9tICcuLi9zZXR0aW5nX2l0ZW1fbWF4LmpzeCc7XG5pbXBvcnQgU2V0dGluZ0l0ZW1NaW4gZnJvbSAnLi4vc2V0dGluZ19pdGVtX21pbi5qc3gnO1xuXG5pbXBvcnQgTWFuYWdlTGFuZ3VhZ2VzIGZyb20gJy4vbWFuYWdlX2xhbmd1YWdlcy5qc3gnO1xuaW1wb3J0IFRoZW1lU2V0dGluZyBmcm9tICcuL3VzZXJfc2V0dGluZ3NfdGhlbWUuanN4JztcblxuY29uc3QgUHJlZmVyZW5jZXMgPSBDb25zdGFudHMuUHJlZmVyZW5jZXM7XG5cbmZ1bmN0aW9uIGdldERpc3BsYXlTdGF0ZUZyb21TdG9yZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWlsaXRhcnlUaW1lOiBQcmVmZXJlbmNlU3RvcmUuZ2V0KFByZWZlcmVuY2VzLkNBVEVHT1JZX0RJU1BMQVlfU0VUVElOR1MsICd1c2VfbWlsaXRhcnlfdGltZScsICdmYWxzZScpLFxuICAgICAgICBjaGFubmVsRGlzcGxheU1vZGU6IFByZWZlcmVuY2VTdG9yZS5nZXQoUHJlZmVyZW5jZXMuQ0FURUdPUllfRElTUExBWV9TRVRUSU5HUywgUHJlZmVyZW5jZXMuQ0hBTk5FTF9ESVNQTEFZX01PREUsIFByZWZlcmVuY2VzLkNIQU5ORUxfRElTUExBWV9NT0RFX0RFRkFVTFQpLFxuICAgICAgICBtZXNzYWdlRGlzcGxheTogUHJlZmVyZW5jZVN0b3JlLmdldChQcmVmZXJlbmNlcy5DQVRFR09SWV9ESVNQTEFZX1NFVFRJTkdTLCBQcmVmZXJlbmNlcy5NRVNTQUdFX0RJU1BMQVksIFByZWZlcmVuY2VzLk1FU1NBR0VfRElTUExBWV9ERUZBVUxUKSxcbiAgICAgICAgY29sbGFwc2VEaXNwbGF5OiBQcmVmZXJlbmNlU3RvcmUuZ2V0KFByZWZlcmVuY2VzLkNBVEVHT1JZX0RJU1BMQVlfU0VUVElOR1MsIFByZWZlcmVuY2VzLkNPTExBUFNFX0RJU1BMQVksIFByZWZlcmVuY2VzLkNPTExBUFNFX0RJU1BMQVlfREVGQVVMVCksXG4gICAgICAgIGxpbmtQcmV2aWV3RGlzcGxheTogUHJlZmVyZW5jZVN0b3JlLmdldChQcmVmZXJlbmNlcy5DQVRFR09SWV9ESVNQTEFZX1NFVFRJTkdTLCBQcmVmZXJlbmNlcy5MSU5LX1BSRVZJRVdfRElTUExBWSwgUHJlZmVyZW5jZXMuTElOS19QUkVWSUVXX0RJU1BMQVlfREVGQVVMVClcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyU2V0dGluZ3NEaXNwbGF5IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUNsb2NrUmFkaW8gPSB0aGlzLmhhbmRsZUNsb2NrUmFkaW8uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uID0gdGhpcy51cGRhdGVTZWN0aW9uLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGUgPSB0aGlzLnVwZGF0ZVN0YXRlLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IGdldERpc3BsYXlTdGF0ZUZyb21TdG9yZXMoKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNTYXZpbmc6IGZhbHNlfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlU3VibWl0KCkge1xuICAgICAgICBjb25zdCB1c2VySWQgPSBVc2VyU3RvcmUuZ2V0Q3VycmVudElkKCk7XG5cbiAgICAgICAgY29uc3QgdGltZVByZWZlcmVuY2UgPSB7XG4gICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICBjYXRlZ29yeTogUHJlZmVyZW5jZXMuQ0FURUdPUllfRElTUExBWV9TRVRUSU5HUyxcbiAgICAgICAgICAgIG5hbWU6ICd1c2VfbWlsaXRhcnlfdGltZScsXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5taWxpdGFyeVRpbWVcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBjaGFubmVsRGlzcGxheU1vZGVQcmVmZXJlbmNlID0ge1xuICAgICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IFByZWZlcmVuY2VzLkNBVEVHT1JZX0RJU1BMQVlfU0VUVElOR1MsXG4gICAgICAgICAgICBuYW1lOiBQcmVmZXJlbmNlcy5DSEFOTkVMX0RJU1BMQVlfTU9ERSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmNoYW5uZWxEaXNwbGF5TW9kZVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtZXNzYWdlRGlzcGxheVByZWZlcmVuY2UgPSB7XG4gICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICBjYXRlZ29yeTogUHJlZmVyZW5jZXMuQ0FURUdPUllfRElTUExBWV9TRVRUSU5HUyxcbiAgICAgICAgICAgIG5hbWU6IFByZWZlcmVuY2VzLk1FU1NBR0VfRElTUExBWSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLm1lc3NhZ2VEaXNwbGF5XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbGxhcHNlRGlzcGxheVByZWZlcmVuY2UgPSB7XG4gICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgICBjYXRlZ29yeTogUHJlZmVyZW5jZXMuQ0FURUdPUllfRElTUExBWV9TRVRUSU5HUyxcbiAgICAgICAgICAgIG5hbWU6IFByZWZlcmVuY2VzLkNPTExBUFNFX0RJU1BMQVksXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5jb2xsYXBzZURpc3BsYXlcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbGlua1ByZXZpZXdEaXNwbGF5UHJlZmVyZW5jZSA9IHtcbiAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIGNhdGVnb3J5OiBQcmVmZXJlbmNlcy5DQVRFR09SWV9ESVNQTEFZX1NFVFRJTkdTLFxuICAgICAgICAgICAgbmFtZTogUHJlZmVyZW5jZXMuTElOS19QUkVWSUVXX0RJU1BMQVksXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5saW5rUHJldmlld0Rpc3BsYXlcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1NhdmluZzogdHJ1ZX0pO1xuXG4gICAgICAgIHNhdmVQcmVmZXJlbmNlcyhbdGltZVByZWZlcmVuY2UsIGNoYW5uZWxEaXNwbGF5TW9kZVByZWZlcmVuY2UsIG1lc3NhZ2VEaXNwbGF5UHJlZmVyZW5jZSwgY29sbGFwc2VEaXNwbGF5UHJlZmVyZW5jZSwgbGlua1ByZXZpZXdEaXNwbGF5UHJlZmVyZW5jZV0sXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBoYW5kbGVDbG9ja1JhZGlvKG1pbGl0YXJ5VGltZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHttaWxpdGFyeVRpbWV9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVDaGFubmVsRGlzcGxheU1vZGVSYWRpbyhjaGFubmVsRGlzcGxheU1vZGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y2hhbm5lbERpc3BsYXlNb2RlfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlbWVzc2FnZURpc3BsYXlSYWRpbyhtZXNzYWdlRGlzcGxheSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHttZXNzYWdlRGlzcGxheX0pO1xuICAgIH1cblxuICAgIGhhbmRsZUNvbGxhcHNlUmFkaW8oY29sbGFwc2VEaXNwbGF5KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbGxhcHNlRGlzcGxheX0pO1xuICAgIH1cblxuICAgIGhhbmRsZUxpbmtQcmV2aWV3UmFkaW8obGlua1ByZXZpZXdEaXNwbGF5KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2xpbmtQcmV2aWV3RGlzcGxheX0pO1xuICAgIH1cblxuICAgIGhhbmRsZU9uQ2hhbmdlKGRpc3BsYXkpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Li4uZGlzcGxheX0pO1xuICAgIH1cblxuICAgIHVwZGF0ZVNlY3Rpb24oc2VjdGlvbikge1xuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKCk7XG4gICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbihzZWN0aW9uKTtcbiAgICB9XG5cbiAgICB1cGRhdGVTdGF0ZSgpIHtcbiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSBnZXREaXNwbGF5U3RhdGVGcm9tU3RvcmVzKCk7XG4gICAgICAgIGlmICghVXRpbHMuYXJlT2JqZWN0c0VxdWFsKG5ld1N0YXRlLCB0aGlzLnN0YXRlKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1NhdmluZzogZmFsc2V9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVTZWN0aW9uKHByb3BzKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHNlY3Rpb24sXG4gICAgICAgICAgICBkaXNwbGF5LFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICAgIGZpcnN0T3B0aW9uLFxuICAgICAgICAgICAgc2Vjb25kT3B0aW9uLFxuICAgICAgICAgICAgZGVzY3JpcHRpb25cbiAgICAgICAgfSA9IHByb3BzO1xuXG4gICAgICAgIGNvbnN0IGZpcnN0TWVzc2FnZSA9IChcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgaWQ9e2ZpcnN0T3B0aW9uLnJhZGlvbkJ1dHRvblRleHQuaWR9XG4gICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9e2ZpcnN0T3B0aW9uLnJhZGlvbkJ1dHRvblRleHQubWVzc2FnZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IG1vcmVDb2xvbjtcbiAgICAgICAgbGV0IGZpcnN0TWVzc2FnZU1vcmU7XG4gICAgICAgIGlmIChmaXJzdE9wdGlvbi5yYWRpb25CdXR0b25UZXh0Lm1vcmVJZCkge1xuICAgICAgICAgICAgbW9yZUNvbG9uID0gJzogJztcbiAgICAgICAgICAgIGZpcnN0TWVzc2FnZU1vcmUgPSAoXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSdmb250LXdlaWdodC0tbm9ybWFsJz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtmaXJzdE9wdGlvbi5yYWRpb25CdXR0b25UZXh0Lm1vcmVJZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPXtmaXJzdE9wdGlvbi5yYWRpb25CdXR0b25UZXh0Lm1vcmVNZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc2Vjb25kTWVzc2FnZU1vcmU7XG4gICAgICAgIGlmIChzZWNvbmRPcHRpb24ucmFkaW9uQnV0dG9uVGV4dC5tb3JlSWQpIHtcbiAgICAgICAgICAgIHNlY29uZE1lc3NhZ2VNb3JlID0gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nZm9udC13ZWlnaHQtLW5vcm1hbCc+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD17c2Vjb25kT3B0aW9uLnJhZGlvbkJ1dHRvblRleHQubW9yZUlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9e3NlY29uZE9wdGlvbi5yYWRpb25CdXR0b25UZXh0Lm1vcmVNZXNzYWdlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzZWNvbmRNZXNzYWdlID0gKFxuICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICBpZD17c2Vjb25kT3B0aW9uLnJhZGlvbkJ1dHRvblRleHQuaWR9XG4gICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9e3NlY29uZE9wdGlvbi5yYWRpb25CdXR0b25UZXh0Lm1lc3NhZ2V9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VUaXRsZSA9IChcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgaWQ9e3RpdGxlLmlkfVxuICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPXt0aXRsZS5tZXNzYWdlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBtZXNzYWdlRGVzYyA9IChcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgaWQ9e2Rlc2NyaXB0aW9uLmlkfVxuICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPXtkZXNjcmlwdGlvbi5tZXNzYWdlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uID09PSBzZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXQgPSBbZmFsc2UsIGZhbHNlXTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gZmlyc3RPcHRpb24udmFsdWUpIHtcbiAgICAgICAgICAgICAgICBmb3JtYXRbMF0gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtYXRbMV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVVcGRhdGVTZWN0aW9uID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBzZWN0aW9uICsgJ0Zvcm1hdCc7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBzZWN0aW9uICsgJ1VzZXJEaXNwbGF5JztcblxuICAgICAgICAgICAgY29uc3QgZmlyc3REaXNwbGF5ID0ge307XG4gICAgICAgICAgICBmaXJzdERpc3BsYXlbZGlzcGxheV0gPSBmaXJzdE9wdGlvbi52YWx1ZTtcblxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kRGlzcGxheSA9IHt9O1xuICAgICAgICAgICAgc2Vjb25kRGlzcGxheVtkaXNwbGF5XSA9IHNlY29uZE9wdGlvbi52YWx1ZTtcblxuICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gW1xuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtrZXl9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmFkaW8nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17bmFtZSArICdBJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9e25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2Zvcm1hdFswXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHRoaXMuaGFuZGxlT25DaGFuZ2UoZmlyc3REaXNwbGF5KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmaXJzdE1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge21vcmVDb2xvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zmlyc3RNZXNzYWdlTW9yZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JhZGlvJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e25hbWUgKyAnQid9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtuYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtmb3JtYXRbMV19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB0aGlzLmhhbmRsZU9uQ2hhbmdlKHNlY29uZERpc3BsYXkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3NlY29uZE1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge21vcmVDb2xvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2Vjb25kTWVzc2FnZU1vcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2VEZXNjfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWF4XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXttZXNzYWdlVGl0bGV9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17aW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgICAgICAgICBzYXZpbmc9e3RoaXMuc3RhdGUuaXNTYXZpbmd9XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9lcnJvcj17dGhpcy5zdGF0ZS5zZXJ2ZXJFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17aGFuZGxlVXBkYXRlU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkZXNjcmliZTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBmaXJzdE9wdGlvbi52YWx1ZSkge1xuICAgICAgICAgICAgZGVzY3JpYmUgPSBmaXJzdE1lc3NhZ2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZXNjcmliZSA9IHNlY29uZE1lc3NhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBoYW5kbGVVcGRhdGVTZWN0aW9uID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVTZWN0aW9uKHNlY3Rpb24pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2V0dGluZ0l0ZW1NaW5cbiAgICAgICAgICAgICAgICB0aXRsZT17bWVzc2FnZVRpdGxlfVxuICAgICAgICAgICAgICAgIGRlc2NyaWJlPXtkZXNjcmliZX1cbiAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXtoYW5kbGVVcGRhdGVTZWN0aW9ufVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IGNvbGxhcHNlU2VjdGlvbiA9IHRoaXMuY3JlYXRlU2VjdGlvbih7XG4gICAgICAgICAgICBzZWN0aW9uOiAnY29sbGFwc2UnLFxuICAgICAgICAgICAgZGlzcGxheTogJ2NvbGxhcHNlRGlzcGxheScsXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5jb2xsYXBzZURpc3BsYXksXG4gICAgICAgICAgICBkZWZhdWx0RGlzcGxheTogJ2ZhbHNlJyxcbiAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmRpc3BsYXkuY29sbGFwc2VEaXNwbGF5JyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVmYXVsdCBhcHBlYXJhbmNlIG9mIGltYWdlIGxpbmsgcHJldmlld3MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmlyc3RPcHRpb246IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogJ2ZhbHNlJyxcbiAgICAgICAgICAgICAgICByYWRpb25CdXR0b25UZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5kaXNwbGF5LmNvbGxhcHNlT24nLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnT24nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlY29uZE9wdGlvbjoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiAndHJ1ZScsXG4gICAgICAgICAgICAgICAgcmFkaW9uQnV0dG9uVGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZGlzcGxheS5jb2xsYXBzZU9mZicsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdPZmYnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmRpc3BsYXkuY29sbGFwc2VEZXNjJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnU2V0IHdoZXRoZXIgcHJldmlld3Mgb2YgaW1hZ2UgbGlua3Mgc2hvdyBhcyBleHBhbmRlZCBvciBjb2xsYXBzZWQgYnkgZGVmYXVsdC4gVGhpcyBzZXR0aW5nIGNhbiBhbHNvIGJlIGNvbnRyb2xsZWQgdXNpbmcgdGhlIHNsYXNoIGNvbW1hbmRzIC9leHBhbmQgYW5kIC9jb2xsYXBzZS4nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGlzRW5hYmxlTGlua1ByZXZpZXdzID0gZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuRW5hYmxlTGlua1ByZXZpZXdzID09PSAndHJ1ZSc7XG4gICAgICAgIGxldCBsaW5rUHJldmlld1NlY3Rpb24gPSBudWxsO1xuICAgICAgICBsZXQgZGl2aWRlciA9IG51bGw7XG4gICAgICAgIGlmIChpc0VuYWJsZUxpbmtQcmV2aWV3cykge1xuICAgICAgICAgICAgbGlua1ByZXZpZXdTZWN0aW9uID0gdGhpcy5jcmVhdGVTZWN0aW9uKHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uOiAnbGlua3ByZXZpZXcnLFxuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdsaW5rUHJldmlld0Rpc3BsYXknLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLmxpbmtQcmV2aWV3RGlzcGxheSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0RGlzcGxheTogJ3RydWUnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5kaXNwbGF5LmxpbmtQcmV2aWV3RGlzcGxheScsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdXZWJzaXRlIExpbmsgUHJldmlld3MnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmaXJzdE9wdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ3RydWUnLFxuICAgICAgICAgICAgICAgICAgICByYWRpb25CdXR0b25UZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZGlzcGxheS5saW5rUHJldmlld09uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdPbidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2Vjb25kT3B0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnZmFsc2UnLFxuICAgICAgICAgICAgICAgICAgICByYWRpb25CdXR0b25UZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZGlzcGxheS5saW5rUHJldmlld09mZicsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnT2ZmJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZGlzcGxheS5saW5rUHJldmlld0Rlc2MnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnV2hlbiBhdmFpbGFibGUsIHRoZSBmaXJzdCB3ZWIgbGluayBpbiBhIG1lc3NhZ2Ugd2lsbCBzaG93IGEgcHJldmlldyBvZiB0aGUgd2Vic2l0ZSBjb250ZW50IGJlbG93IHRoZSBtZXNzYWdlLidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRpdmlkZXIgPSA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1kYXJrJy8+O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xvY2tTZWN0aW9uID0gdGhpcy5jcmVhdGVTZWN0aW9uKHtcbiAgICAgICAgICAgIHNlY3Rpb246ICdjbG9jaycsXG4gICAgICAgICAgICBkaXNwbGF5OiAnbWlsaXRhcnlUaW1lJyxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLm1pbGl0YXJ5VGltZSxcbiAgICAgICAgICAgIGRlZmF1bHREaXNwbGF5OiAnZmFsc2UnLFxuICAgICAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZGlzcGxheS5jbG9ja0Rpc3BsYXknLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDbG9jayBEaXNwbGF5J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZpcnN0T3B0aW9uOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6ICdmYWxzZScsXG4gICAgICAgICAgICAgICAgcmFkaW9uQnV0dG9uVGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZGlzcGxheS5ub3JtYWxDbG9jaycsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICcxMi1ob3VyIGNsb2NrIChleGFtcGxlOiA0OjAwIFBNKSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2Vjb25kT3B0aW9uOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6ICd0cnVlJyxcbiAgICAgICAgICAgICAgICByYWRpb25CdXR0b25UZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5kaXNwbGF5Lm1pbGl0YXJ5Q2xvY2snLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnMjQtaG91ciBjbG9jayAoZXhhbXBsZTogMTY6MDApJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5kaXNwbGF5LnByZWZlclRpbWUnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTZWxlY3QgaG93IHlvdSBwcmVmZXIgdGltZSBkaXNwbGF5ZWQuJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBtZXNzYWdlRGlzcGxheVNlY3Rpb24gPSB0aGlzLmNyZWF0ZVNlY3Rpb24oe1xuICAgICAgICAgICAgc2VjdGlvbjogUHJlZmVyZW5jZXMuTUVTU0FHRV9ESVNQTEFZLFxuICAgICAgICAgICAgZGlzcGxheTogJ21lc3NhZ2VEaXNwbGF5JyxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLm1lc3NhZ2VEaXNwbGF5LFxuICAgICAgICAgICAgZGVmYXVsdERpc3BsYXk6IFByZWZlcmVuY2VzLk1FU1NBR0VfRElTUExBWV9DTEVBTixcbiAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmRpc3BsYXkubWVzc2FnZURpc3BsYXlUaXRsZScsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ01lc3NhZ2UgRGlzcGxheSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmaXJzdE9wdGlvbjoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBQcmVmZXJlbmNlcy5NRVNTQUdFX0RJU1BMQVlfQ0xFQU4sXG4gICAgICAgICAgICAgICAgcmFkaW9uQnV0dG9uVGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZGlzcGxheS5tZXNzYWdlRGlzcGxheUNsZWFuJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1N0YW5kYXJkJyxcbiAgICAgICAgICAgICAgICAgICAgbW9yZUlkOiAndXNlci5zZXR0aW5ncy5kaXNwbGF5Lm1lc3NhZ2VEaXNwbGF5Q2xlYW5EZXMnLFxuICAgICAgICAgICAgICAgICAgICBtb3JlTWVzc2FnZTogJ0Vhc3kgdG8gc2NhbiBhbmQgcmVhZC4nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlY29uZE9wdGlvbjoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBQcmVmZXJlbmNlcy5NRVNTQUdFX0RJU1BMQVlfQ09NUEFDVCxcbiAgICAgICAgICAgICAgICByYWRpb25CdXR0b25UZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5kaXNwbGF5Lm1lc3NhZ2VEaXNwbGF5Q29tcGFjdCcsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb21wYWN0JyxcbiAgICAgICAgICAgICAgICAgICAgbW9yZUlkOiAndXNlci5zZXR0aW5ncy5kaXNwbGF5Lm1lc3NhZ2VEaXNwbGF5Q29tcGFjdERlcycsXG4gICAgICAgICAgICAgICAgICAgIG1vcmVNZXNzYWdlOiAnRml0IGFzIG1hbnkgbWVzc2FnZXMgb24gdGhlIHNjcmVlbiBhcyB3ZSBjYW4uJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5kaXNwbGF5Lm1lc3NhZ2VEaXNwbGF5RGVzY3JpcHRpb24nLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTZWxlY3QgaG93IG1lc3NhZ2VzIGluIGEgY2hhbm5lbCBzaG91bGQgYmUgZGlzcGxheWVkLidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2hhbm5lbERpc3BsYXlNb2RlU2VjdGlvbiA9IHRoaXMuY3JlYXRlU2VjdGlvbih7XG4gICAgICAgICAgICBzZWN0aW9uOiBQcmVmZXJlbmNlcy5DSEFOTkVMX0RJU1BMQVlfTU9ERSxcbiAgICAgICAgICAgIGRpc3BsYXk6ICdjaGFubmVsRGlzcGxheU1vZGUnLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUuY2hhbm5lbERpc3BsYXlNb2RlLFxuICAgICAgICAgICAgZGVmYXVsdERpc3BsYXk6IFByZWZlcmVuY2VzLkNIQU5ORUxfRElTUExBWV9NT0RFX0ZVTExfU0NSRUVOLFxuICAgICAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZGlzcGxheS5jaGFubmVsRGlzcGxheVRpdGxlJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ2hhbm5lbCBEaXNwbGF5IE1vZGUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmlyc3RPcHRpb246IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogUHJlZmVyZW5jZXMuQ0hBTk5FTF9ESVNQTEFZX01PREVfRlVMTF9TQ1JFRU4sXG4gICAgICAgICAgICAgICAgcmFkaW9uQnV0dG9uVGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZGlzcGxheS5mdWxsU2NyZWVuJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Z1bGwgd2lkdGgnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlY29uZE9wdGlvbjoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBQcmVmZXJlbmNlcy5DSEFOTkVMX0RJU1BMQVlfTU9ERV9DRU5URVJFRCxcbiAgICAgICAgICAgICAgICByYWRpb25CdXR0b25UZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5kaXNwbGF5LmZpeGVkV2lkdGhDZW50ZXJlZCcsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdGaXhlZCB3aWR0aCwgY2VudGVyZWQnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmRpc3BsYXkuY2hhbm5lbGRpc3BsYXltb2RlJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnU2VsZWN0IHRoZSB3aWR0aCBvZiB0aGUgY2VudGVyIGNoYW5uZWwuJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgbGFuZ3VhZ2VzU2VjdGlvbjtcbiAgICAgICAgbGV0IHVzZXJMb2NhbGUgPSB0aGlzLnByb3BzLnVzZXIubG9jYWxlO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uID09PSAnbGFuZ3VhZ2VzJykge1xuICAgICAgICAgICAgaWYgKCFJMThuLmlzTGFuZ3VhZ2VBdmFpbGFibGUodXNlckxvY2FsZSkpIHtcbiAgICAgICAgICAgICAgICB1c2VyTG9jYWxlID0gZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuRGVmYXVsdENsaWVudExvY2FsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhbmd1YWdlc1NlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgPE1hbmFnZUxhbmd1YWdlc1xuICAgICAgICAgICAgICAgICAgICB1c2VyPXt0aGlzLnByb3BzLnVzZXJ9XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZT17dXNlckxvY2FsZX1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgbG9jYWxlO1xuICAgICAgICAgICAgaWYgKEkxOG4uaXNMYW5ndWFnZUF2YWlsYWJsZSh1c2VyTG9jYWxlKSkge1xuICAgICAgICAgICAgICAgIGxvY2FsZSA9IEkxOG4uZ2V0TGFuZ3VhZ2VJbmZvKHVzZXJMb2NhbGUpLm5hbWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2FsZSA9IEkxOG4uZ2V0TGFuZ3VhZ2VJbmZvKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkRlZmF1bHRDbGllbnRMb2NhbGUpLm5hbWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxhbmd1YWdlc1NlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWluXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZGlzcGxheS5sYW5ndWFnZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTGFuZ3VhZ2UnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPSdtZWRpdW0nXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlPXtsb2NhbGV9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignbGFuZ3VhZ2VzJyk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGhlbWVTZWN0aW9uO1xuICAgICAgICBpZiAoZ2xvYmFsLm1tX2NvbmZpZy5FbmFibGVUaGVtZVNlbGVjdGlvbiAhPT0gJ2ZhbHNlJykge1xuICAgICAgICAgICAgdGhlbWVTZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxUaGVtZVNldHRpbmdcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ9e3RoaXMucHJvcHMuYWN0aXZlU2VjdGlvbiA9PT0gJ3RoZW1lJ31cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dGhpcy51cGRhdGVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXF1aXJlQ29uZmlybT17dGhpcy5wcm9wcy5zZXRSZXF1aXJlQ29uZmlybX1cbiAgICAgICAgICAgICAgICAgICAgc2V0RW5mb3JjZUZvY3VzPXt0aGlzLnByb3BzLnNldEVuZm9yY2VGb2N1c31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGlkPSdkaXNwbGF5U2V0dGluZ3MnPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtb2RhbC1oZWFkZXInPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nY2xvc2VCdXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Nsb3NlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1kaXNtaXNzPSdtb2RhbCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9J0Nsb3NlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5jbG9zZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj0ndHJ1ZSc+eyfDlyd9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGg0XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J21vZGFsLXRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSd0aXRsZSdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWJhY2snPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmEgZmEtYW5nbGUtbGVmdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5jb2xsYXBzZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZGlzcGxheS50aXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRGlzcGxheSBTZXR0aW5ncydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3VzZXItc2V0dGluZ3MnPlxuICAgICAgICAgICAgICAgICAgICA8aDNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdkaXNwbGF5U2V0dGluZ3NUaXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndGFiLWhlYWRlcidcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5kaXNwbGF5LnRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdEaXNwbGF5IFNldHRpbmdzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItZGFyayBmaXJzdCcvPlxuICAgICAgICAgICAgICAgICAgICB7dGhlbWVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1kYXJrJy8+XG4gICAgICAgICAgICAgICAgICAgIHtjbG9ja1NlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgIHtkaXZpZGVyfVxuICAgICAgICAgICAgICAgICAgICB7bGlua1ByZXZpZXdTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1kYXJrJy8+XG4gICAgICAgICAgICAgICAgICAgIHtjb2xsYXBzZVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkaXZpZGVyLWRhcmsnLz5cbiAgICAgICAgICAgICAgICAgICAge21lc3NhZ2VEaXNwbGF5U2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItZGFyaycvPlxuICAgICAgICAgICAgICAgICAgICB7Y2hhbm5lbERpc3BsYXlNb2RlU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItZGFyaycvPlxuICAgICAgICAgICAgICAgICAgICB7bGFuZ3VhZ2VzU2VjdGlvbn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuVXNlclNldHRpbmdzRGlzcGxheS5wcm9wVHlwZXMgPSB7XG4gICAgdXNlcjogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB1cGRhdGVTZWN0aW9uOiBQcm9wVHlwZXMuZnVuYyxcbiAgICB1cGRhdGVUYWI6IFByb3BUeXBlcy5mdW5jLFxuICAgIGFjdGl2ZVNlY3Rpb246IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2xvc2VNb2RhbDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICBjb2xsYXBzZU1vZGFsOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHNldFJlcXVpcmVDb25maXJtOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHNldEVuZm9yY2VGb2N1czogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19kaXNwbGF5LmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBO0FBckJBO0FBQ0E7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFVQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQVNBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFDQTtBQUtBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFWQTtBQVlBO0FBYkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFWQTtBQVlBO0FBYkE7QUFlQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUEvQkE7QUFDQTtBQXFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQXZCQTtBQUNBO0FBNEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBdkJBO0FBNEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQXZCQTtBQUNBO0FBNEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFGQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFGQTtBQVNBO0FBQ0E7QUFDQTtBQUZBO0FBM0JBO0FBQ0E7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBdkJBO0FBQ0E7QUE0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFWQTtBQVhBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkJBO0FBNUJBO0FBdURBOzs7QUF0Z0JBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUF1Z0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2529\n");

/***/ }),

/***/ 2530:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _keys = __webpack_require__(60);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _global_actions = __webpack_require__(57);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _user_actions = __webpack_require__(71);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _i18n = __webpack_require__(457);\n\nvar I18n = _interopRequireWildcard(_i18n);\n\nvar _setting_item_max = __webpack_require__(770);\n\nvar _setting_item_max2 = _interopRequireDefault(_setting_item_max);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar ManageLanguage = function (_React$Component) {\n    (0, _inherits3.default)(ManageLanguage, _React$Component);\n\n    function ManageLanguage(props) {\n        (0, _classCallCheck3.default)(this, ManageLanguage);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (ManageLanguage.__proto__ || (0, _getPrototypeOf2.default)(ManageLanguage)).call(this, props));\n\n        _this.setLanguage = _this.setLanguage.bind(_this);\n        _this.changeLanguage = _this.changeLanguage.bind(_this);\n        _this.submitUser = _this.submitUser.bind(_this);\n        _this.state = {\n            locale: props.locale,\n            isSaving: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(ManageLanguage, [{\n        key: 'setLanguage',\n        value: function setLanguage(e) {\n            this.setState({ locale: e.target.value });\n        }\n    }, {\n        key: 'changeLanguage',\n        value: function changeLanguage(e) {\n            e.preventDefault();\n\n            this.submitUser((0, _extends3.default)({}, this.props.user, {\n                locale: this.state.locale\n            }));\n        }\n    }, {\n        key: 'submitUser',\n        value: function submitUser(user) {\n            var _this2 = this;\n\n            this.setState({ isSaving: true });\n\n            (0, _user_actions.updateUser)(user, _constants2.default.UserUpdateEvents.LANGUAGE, function () {\n                GlobalActions.newLocalizationSelected(user.locale);\n                _this2.setState({ isSaving: false });\n            }, function (err) {\n                var serverError = void 0;\n                if (err.message) {\n                    serverError = err.message;\n                } else {\n                    serverError = err;\n                }\n                _this2.setState({ serverError: serverError, isSaving: false });\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var serverError = void 0;\n            if (this.state.serverError) {\n                serverError = _react2.default.createElement(\n                    'label',\n                    { className: 'has-error' },\n                    this.state.serverError\n                );\n            }\n\n            var options = [];\n            var locales = I18n.getLanguages();\n\n            var languages = (0, _keys2.default)(locales).map(function (l) {\n                return {\n                    value: locales[l].value,\n                    name: locales[l].name,\n                    order: locales[l].order\n                };\n            }).sort(function (a, b) {\n                return a.order - b.order;\n            });\n\n            languages.forEach(function (lang) {\n                options.push(_react2.default.createElement(\n                    'option',\n                    {\n                        key: lang.value,\n                        value: lang.value\n                    },\n                    lang.name\n                ));\n            });\n\n            var input = _react2.default.createElement(\n                'div',\n                { key: 'changeLanguage' },\n                _react2.default.createElement('br', null),\n                _react2.default.createElement(\n                    'label',\n                    { className: 'control-label' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.languages.change',\n                        defaultMessage: 'Change interface language'\n                    })\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'padding-top' },\n                    _react2.default.createElement(\n                        'select',\n                        {\n                            id: 'displayLanguage',\n                            ref: 'language',\n                            className: 'form-control',\n                            value: this.state.locale,\n                            onChange: this.setLanguage\n                        },\n                        options\n                    ),\n                    serverError\n                ),\n                _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement('br', null),\n                    _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                        id: 'user.settings.languages.promote',\n                        defaultMessage: 'Select which language Mattermost displays in the user interface.<br /><br />Would like to help with translations? Join the <a href=\"http://translate.mattermost.com/\" target=\"_blank\">Mattermost Translation Server</a> to contribute.'\n                    })\n                )\n            );\n\n            return _react2.default.createElement(_setting_item_max2.default, {\n                title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.display.language',\n                    defaultMessage: 'Language'\n                }),\n                width: 'medium',\n                submit: this.changeLanguage,\n                saving: this.state.isSaving,\n                inputs: [input],\n                updateSection: this.props.updateSection\n            });\n        }\n    }]);\n    return ManageLanguage;\n}(_react2.default.Component);\n\nexports.default = ManageLanguage;\n\n\nManageLanguage.propTypes = {\n    user: _propTypes2.default.object.isRequired,\n    locale: _propTypes2.default.string.isRequired,\n    updateSection: _propTypes2.default.func.isRequired\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvbWFuYWdlX2xhbmd1YWdlcy5qc3g/OTBiNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtGb3JtYXR0ZWRIVE1MTWVzc2FnZSwgRm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCAqIGFzIEdsb2JhbEFjdGlvbnMgZnJvbSAnYWN0aW9ucy9nbG9iYWxfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IHt1cGRhdGVVc2VyfSBmcm9tICdhY3Rpb25zL3VzZXJfYWN0aW9ucy5qc3gnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuXG5pbXBvcnQgKiBhcyBJMThuIGZyb20gJ2kxOG4vaTE4bi5qc3gnO1xuXG5pbXBvcnQgU2V0dGluZ0l0ZW1NYXggZnJvbSAnLi4vc2V0dGluZ19pdGVtX21heC5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYW5hZ2VMYW5ndWFnZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuc2V0TGFuZ3VhZ2UgPSB0aGlzLnNldExhbmd1YWdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2hhbmdlTGFuZ3VhZ2UgPSB0aGlzLmNoYW5nZUxhbmd1YWdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VibWl0VXNlciA9IHRoaXMuc3VibWl0VXNlci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgbG9jYWxlOiBwcm9wcy5sb2NhbGUsXG4gICAgICAgICAgICBpc1NhdmluZzogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzZXRMYW5ndWFnZShlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2xvY2FsZTogZS50YXJnZXQudmFsdWV9KTtcbiAgICB9XG4gICAgY2hhbmdlTGFuZ3VhZ2UoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdGhpcy5zdWJtaXRVc2VyKHtcbiAgICAgICAgICAgIC4uLnRoaXMucHJvcHMudXNlcixcbiAgICAgICAgICAgIGxvY2FsZTogdGhpcy5zdGF0ZS5sb2NhbGVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN1Ym1pdFVzZXIodXNlcikge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1NhdmluZzogdHJ1ZX0pO1xuXG4gICAgICAgIHVwZGF0ZVVzZXIodXNlciwgQ29uc3RhbnRzLlVzZXJVcGRhdGVFdmVudHMuTEFOR1VBR0UsXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgR2xvYmFsQWN0aW9ucy5uZXdMb2NhbGl6YXRpb25TZWxlY3RlZCh1c2VyLmxvY2FsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNTYXZpbmc6IGZhbHNlfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzZXJ2ZXJFcnJvcjtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyRXJyb3IgPSBlcnIubWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJFcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VydmVyRXJyb3IsIGlzU2F2aW5nOiBmYWxzZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBzZXJ2ZXJFcnJvcjtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2VydmVyRXJyb3IpIHtcbiAgICAgICAgICAgIHNlcnZlckVycm9yID0gPGxhYmVsIGNsYXNzTmFtZT0naGFzLWVycm9yJz57dGhpcy5zdGF0ZS5zZXJ2ZXJFcnJvcn08L2xhYmVsPjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXTtcbiAgICAgICAgY29uc3QgbG9jYWxlcyA9IEkxOG4uZ2V0TGFuZ3VhZ2VzKCk7XG5cbiAgICAgICAgY29uc3QgbGFuZ3VhZ2VzID0gT2JqZWN0LmtleXMobG9jYWxlcykubWFwKChsKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBsb2NhbGVzW2xdLnZhbHVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IGxvY2FsZXNbbF0ubmFtZSxcbiAgICAgICAgICAgICAgICBvcmRlcjogbG9jYWxlc1tsXS5vcmRlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkuXG4gICAgICAgIHNvcnQoKGEsIGIpID0+IGEub3JkZXIgLSBiLm9yZGVyKTtcblxuICAgICAgICBsYW5ndWFnZXMuZm9yRWFjaCgobGFuZykgPT4ge1xuICAgICAgICAgICAgb3B0aW9ucy5wdXNoKFxuICAgICAgICAgICAgICAgIDxvcHRpb25cbiAgICAgICAgICAgICAgICAgICAga2V5PXtsYW5nLnZhbHVlfVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17bGFuZy52YWx1ZX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtsYW5nLm5hbWV9XG4gICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBpbnB1dCA9IChcbiAgICAgICAgICAgIDxkaXYga2V5PSdjaGFuZ2VMYW5ndWFnZSc+XG4gICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdjb250cm9sLWxhYmVsJz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmxhbmd1YWdlcy5jaGFuZ2UnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ2hhbmdlIGludGVyZmFjZSBsYW5ndWFnZSdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYWRkaW5nLXRvcCc+XG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdkaXNwbGF5TGFuZ3VhZ2UnXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9J2xhbmd1YWdlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmb3JtLWNvbnRyb2wnXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5sb2NhbGV9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5zZXRMYW5ndWFnZX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge29wdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICB7c2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEhUTUxNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5sYW5ndWFnZXMucHJvbW90ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTZWxlY3Qgd2hpY2ggbGFuZ3VhZ2UgTWF0dGVybW9zdCBkaXNwbGF5cyBpbiB0aGUgdXNlciBpbnRlcmZhY2UuPGJyIC8+PGJyIC8+V291bGQgbGlrZSB0byBoZWxwIHdpdGggdHJhbnNsYXRpb25zPyBKb2luIHRoZSA8YSBocmVmPVwiaHR0cDovL3RyYW5zbGF0ZS5tYXR0ZXJtb3N0LmNvbS9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5NYXR0ZXJtb3N0IFRyYW5zbGF0aW9uIFNlcnZlcjwvYT4gdG8gY29udHJpYnV0ZS4nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFNldHRpbmdJdGVtTWF4XG4gICAgICAgICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZGlzcGxheS5sYW5ndWFnZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdMYW5ndWFnZSdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd2lkdGg9J21lZGl1bSdcbiAgICAgICAgICAgICAgICBzdWJtaXQ9e3RoaXMuY2hhbmdlTGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgc2F2aW5nPXt0aGlzLnN0YXRlLmlzU2F2aW5nfVxuICAgICAgICAgICAgICAgIGlucHV0cz17W2lucHV0XX1cbiAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb259XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuTWFuYWdlTGFuZ3VhZ2UucHJvcFR5cGVzID0ge1xuICAgIHVzZXI6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICBsb2NhbGU6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICB1cGRhdGVTZWN0aW9uOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvdXNlcl9zZXR0aW5ncy9tYW5hZ2VfbGFuZ3VhZ2VzLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFmQTtBQUNBO0FBQ0E7QUFjQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFVQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFGQTtBQUlBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFQQTtBQVNBO0FBVkE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFwQkE7QUFDQTtBQTZCQTtBQUVBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBY0E7OztBQXRIQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBdUhBO0FBQ0E7QUFDQTtBQUNBO0FBSEEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2530\n");

/***/ }),

/***/ 2531:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _keys = __webpack_require__(60);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _assign = __webpack_require__(42);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(48);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _user_actions = __webpack_require__(71);\n\nvar UserActions = _interopRequireWildcard(_user_actions);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _team_store = __webpack_require__(38);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _app_dispatcher = __webpack_require__(36);\n\nvar _app_dispatcher2 = _interopRequireDefault(_app_dispatcher);\n\nvar _setting_item_max = __webpack_require__(770);\n\nvar _setting_item_max2 = _interopRequireDefault(_setting_item_max);\n\nvar _setting_item_min = __webpack_require__(771);\n\nvar _setting_item_min2 = _interopRequireDefault(_setting_item_min);\n\nvar _custom_theme_chooser = __webpack_require__(2532);\n\nvar _custom_theme_chooser2 = _interopRequireDefault(_custom_theme_chooser);\n\nvar _premade_theme_chooser = __webpack_require__(2536);\n\nvar _premade_theme_chooser2 = _interopRequireDefault(_premade_theme_chooser);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar ThemeSetting = function (_React$Component) {\n    (0, _inherits3.default)(ThemeSetting, _React$Component);\n\n    function ThemeSetting(props) {\n        (0, _classCallCheck3.default)(this, ThemeSetting);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (ThemeSetting.__proto__ || (0, _getPrototypeOf2.default)(ThemeSetting)).call(this, props));\n\n        _this.onChange = _this.onChange.bind(_this);\n        _this.submitTheme = _this.submitTheme.bind(_this);\n        _this.updateTheme = _this.updateTheme.bind(_this);\n        _this.resetFields = _this.resetFields.bind(_this);\n        _this.handleImportModal = _this.handleImportModal.bind(_this);\n\n        _this.state = _this.getStateFromStores();\n        _this.setState({ isSaving: false });\n\n        _this.originalTheme = (0, _assign2.default)({}, _this.state.theme);\n        return _this;\n    }\n\n    (0, _createClass3.default)(ThemeSetting, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _user_store2.default.addChangeListener(this.onChange);\n\n            if (this.props.selected) {\n                (0, _jquery2.default)(_reactDom2.default.findDOMNode(this.refs[this.state.theme])).addClass('active-border');\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            if (this.props.selected) {\n                (0, _jquery2.default)('.color-btn').removeClass('active-border');\n                (0, _jquery2.default)(_reactDom2.default.findDOMNode(this.refs[this.state.theme])).addClass('active-border');\n            }\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (this.props.selected && !nextProps.selected) {\n                this.resetFields();\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _user_store2.default.removeChangeListener(this.onChange);\n\n            if (this.props.selected) {\n                var state = this.getStateFromStores();\n                Utils.applyTheme(state.theme);\n            }\n        }\n    }, {\n        key: 'getStateFromStores',\n        value: function getStateFromStores() {\n            var teamId = _team_store2.default.getCurrentId();\n\n            var theme = _preference_store2.default.getTheme(teamId);\n            if (!theme.codeTheme) {\n                theme.codeTheme = _constants.Constants.DEFAULT_CODE_THEME;\n            }\n\n            var showAllTeamsCheckbox = false;\n            var applyToAllTeams = true;\n\n            if (global.window.mm_license.IsLicensed === 'true' && global.window.mm_license.LDAP === 'true') {\n                // show the \"apply to all teams\" checkbox if the user is on more than one team\n                showAllTeamsCheckbox = (0, _keys2.default)(_team_store2.default.getAll()).length > 1;\n\n                // check the \"apply to all teams\" checkbox by default if the user has any team-specific themes\n                applyToAllTeams = _preference_store2.default.getCategory(_constants.Preferences.CATEGORY_THEME).size <= 1;\n            }\n\n            return {\n                teamId: _team_store2.default.getCurrentId(),\n                theme: theme,\n                type: theme.type || 'premade',\n                showAllTeamsCheckbox: showAllTeamsCheckbox,\n                applyToAllTeams: applyToAllTeams\n            };\n        }\n    }, {\n        key: 'onChange',\n        value: function onChange() {\n            var newState = this.getStateFromStores();\n\n            if (!Utils.areObjectsEqual(this.state, newState)) {\n                this.setState(newState);\n            }\n\n            this.props.setEnforceFocus(true);\n        }\n    }, {\n        key: 'scrollToTop',\n        value: function scrollToTop() {\n            (0, _jquery2.default)('.ps-container.modal-body').scrollTop(0);\n        }\n    }, {\n        key: 'submitTheme',\n        value: function submitTheme(e) {\n            var _this2 = this;\n\n            e.preventDefault();\n\n            var teamId = this.state.applyToAllTeams ? '' : this.state.teamId;\n\n            this.setState({ isSaving: true });\n\n            UserActions.saveTheme(teamId, this.state.theme, function () {\n                _this2.props.setRequireConfirm(false);\n                _this2.originalTheme = (0, _assign2.default)({}, _this2.state.theme);\n                _this2.scrollToTop();\n                _this2.props.updateSection('');\n                _this2.setState({ isSaving: false });\n            });\n        }\n    }, {\n        key: 'updateTheme',\n        value: function updateTheme(theme) {\n            var themeChanged = this.state.theme.length === theme.length;\n            if (!themeChanged) {\n                for (var field in theme) {\n                    if (theme.hasOwnProperty(field)) {\n                        if (this.state.theme[field] !== theme[field]) {\n                            themeChanged = true;\n                            break;\n                        }\n                    }\n                }\n            }\n\n            this.props.setRequireConfirm(themeChanged);\n\n            this.setState({ theme: theme });\n            Utils.applyTheme(theme);\n        }\n    }, {\n        key: 'updateType',\n        value: function updateType(type) {\n            this.setState({ type: type });\n        }\n    }, {\n        key: 'resetFields',\n        value: function resetFields() {\n            var state = this.getStateFromStores();\n            state.serverError = null;\n            this.setState(state);\n            this.scrollToTop();\n\n            Utils.applyTheme(state.theme);\n\n            this.props.setRequireConfirm(false);\n        }\n    }, {\n        key: 'handleImportModal',\n        value: function handleImportModal() {\n            _app_dispatcher2.default.handleViewAction({\n                type: _constants.ActionTypes.TOGGLE_IMPORT_THEME_MODAL,\n                value: true,\n                callback: this.updateTheme\n            });\n\n            this.props.setEnforceFocus(false);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this3 = this;\n\n            var serverError;\n            if (this.state.serverError) {\n                serverError = this.state.serverError;\n            }\n\n            var displayCustom = this.state.type === 'custom';\n            var allowCustomThemes = global.mm_config.AllowCustomThemes !== 'false';\n\n            var custom = void 0;\n            var premade = void 0;\n            if (displayCustom && allowCustomThemes) {\n                custom = _react2.default.createElement(\n                    'div',\n                    { key: 'customThemeChooser' },\n                    _react2.default.createElement(_custom_theme_chooser2.default, {\n                        theme: this.state.theme,\n                        updateTheme: this.updateTheme\n                    })\n                );\n            } else {\n                premade = _react2.default.createElement(\n                    'div',\n                    { key: 'premadeThemeChooser' },\n                    _react2.default.createElement('br', null),\n                    _react2.default.createElement(_premade_theme_chooser2.default, {\n                        theme: this.state.theme,\n                        updateTheme: this.updateTheme\n                    })\n                );\n            }\n\n            var themeUI = void 0;\n            if (this.props.selected) {\n                var inputs = [];\n\n                if (allowCustomThemes) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            className: 'radio',\n                            key: 'premadeThemeColorLabel'\n                        },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'standardThemes',\n                                type: 'radio',\n                                name: 'theme',\n                                checked: !displayCustom,\n                                onChange: this.updateType.bind(this, 'premade')\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.display.theme.themeColors',\n                                defaultMessage: 'Theme Colors'\n                            })\n                        ),\n                        _react2.default.createElement('br', null)\n                    ));\n                }\n\n                inputs.push(premade);\n\n                if (allowCustomThemes) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            className: 'radio',\n                            key: 'customThemeColorLabel'\n                        },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'customThemes',\n                                type: 'radio',\n                                name: 'theme',\n                                checked: displayCustom,\n                                onChange: this.updateType.bind(this, 'custom')\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.display.theme.customTheme',\n                                defaultMessage: 'Custom Theme'\n                            })\n                        )\n                    ));\n\n                    inputs.push(custom);\n\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        { key: 'otherThemes' },\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                id: 'otherThemes',\n                                href: 'http://docs.mattermost.com/help/settings/theme-colors.html#custom-theme-examples',\n                                target: '_blank',\n                                rel: 'noopener noreferrer'\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.display.theme.otherThemes',\n                                defaultMessage: 'See other themes'\n                            })\n                        )\n                    ));\n\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'importSlackThemeButton',\n                            className: 'padding-top'\n                        },\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                id: 'slackImportTheme',\n                                className: 'theme',\n                                onClick: this.handleImportModal\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.display.theme.import',\n                                defaultMessage: 'Import theme colors from Slack'\n                            })\n                        )\n                    ));\n                }\n\n                var allTeamsCheckbox = null;\n                if (this.state.showAllTeamsCheckbox) {\n                    allTeamsCheckbox = _react2.default.createElement(\n                        'div',\n                        { className: 'checkbox user-settings__submit-checkbox' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'applyThemeToAllTeams',\n                                type: 'checkbox',\n                                checked: this.state.applyToAllTeams,\n                                onChange: function onChange(e) {\n                                    return _this3.setState({ applyToAllTeams: e.target.checked });\n                                }\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.display.theme.applyToAllTeams',\n                                defaultMessage: 'Apply new theme to all my teams'\n                            })\n                        )\n                    );\n                }\n\n                themeUI = _react2.default.createElement(_setting_item_max2.default, {\n                    inputs: inputs,\n                    submitExtra: allTeamsCheckbox,\n                    submit: this.submitTheme,\n                    saving: this.state.isSaving,\n                    server_error: serverError,\n                    width: 'full',\n                    updateSection: function updateSection(e) {\n                        _this3.props.updateSection('');\n                        e.preventDefault();\n                    }\n                });\n            } else {\n                themeUI = _react2.default.createElement(_setting_item_min2.default, {\n                    title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.display.theme.title',\n                        defaultMessage: 'Theme'\n                    }),\n                    describe: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.display.theme.describe',\n                        defaultMessage: 'Open to manage your theme'\n                    }),\n                    updateSection: function updateSection() {\n                        _this3.props.updateSection('theme');\n                    }\n                });\n            }\n\n            return themeUI;\n        }\n    }]);\n    return ThemeSetting;\n}(_react2.default.Component);\n\nexports.default = ThemeSetting;\n\n\nThemeSetting.propTypes = {\n    selected: _propTypes2.default.bool.isRequired,\n    updateSection: _propTypes2.default.func.isRequired,\n    setRequireConfirm: _propTypes2.default.func.isRequired,\n    setEnforceFocus: _propTypes2.default.func.isRequired\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc190aGVtZS5qc3g/ZThlOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTYtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgKiBhcyBVc2VyQWN0aW9ucyBmcm9tICdhY3Rpb25zL3VzZXJfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IFByZWZlcmVuY2VTdG9yZSBmcm9tICdzdG9yZXMvcHJlZmVyZW5jZV9zdG9yZS5qc3gnO1xuaW1wb3J0IFRlYW1TdG9yZSBmcm9tICdzdG9yZXMvdGVhbV9zdG9yZS5qc3gnO1xuaW1wb3J0IFVzZXJTdG9yZSBmcm9tICdzdG9yZXMvdXNlcl9zdG9yZS5qc3gnO1xuXG5pbXBvcnQge0FjdGlvblR5cGVzLCBDb25zdGFudHMsIFByZWZlcmVuY2VzfSBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCBBcHBEaXNwYXRjaGVyIGZyb20gJy4uLy4uL2Rpc3BhdGNoZXIvYXBwX2Rpc3BhdGNoZXIuanN4JztcbmltcG9ydCBTZXR0aW5nSXRlbU1heCBmcm9tICcuLi9zZXR0aW5nX2l0ZW1fbWF4LmpzeCc7XG5pbXBvcnQgU2V0dGluZ0l0ZW1NaW4gZnJvbSAnLi4vc2V0dGluZ19pdGVtX21pbi5qc3gnO1xuXG5pbXBvcnQgQ3VzdG9tVGhlbWVDaG9vc2VyIGZyb20gJy4vY3VzdG9tX3RoZW1lX2Nob29zZXIuanN4JztcbmltcG9ydCBQcmVtYWRlVGhlbWVDaG9vc2VyIGZyb20gJy4vcHJlbWFkZV90aGVtZV9jaG9vc2VyLmpzeCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRoZW1lU2V0dGluZyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VibWl0VGhlbWUgPSB0aGlzLnN1Ym1pdFRoZW1lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlVGhlbWUgPSB0aGlzLnVwZGF0ZVRoZW1lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVzZXRGaWVsZHMgPSB0aGlzLnJlc2V0RmllbGRzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlSW1wb3J0TW9kYWwgPSB0aGlzLmhhbmRsZUltcG9ydE1vZGFsLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuZ2V0U3RhdGVGcm9tU3RvcmVzKCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzU2F2aW5nOiBmYWxzZX0pO1xuXG4gICAgICAgIHRoaXMub3JpZ2luYWxUaGVtZSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc3RhdGUudGhlbWUpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBVc2VyU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkNoYW5nZSk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICQoUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzW3RoaXMuc3RhdGUudGhlbWVdKSkuYWRkQ2xhc3MoJ2FjdGl2ZS1ib3JkZXInKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICQoJy5jb2xvci1idG4nKS5yZW1vdmVDbGFzcygnYWN0aXZlLWJvcmRlcicpO1xuICAgICAgICAgICAgJChSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnNbdGhpcy5zdGF0ZS50aGVtZV0pKS5hZGRDbGFzcygnYWN0aXZlLWJvcmRlcicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc2VsZWN0ZWQgJiYgIW5leHRQcm9wcy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldEZpZWxkcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIFVzZXJTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uQ2hhbmdlKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmdldFN0YXRlRnJvbVN0b3JlcygpO1xuICAgICAgICAgICAgVXRpbHMuYXBwbHlUaGVtZShzdGF0ZS50aGVtZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRTdGF0ZUZyb21TdG9yZXMoKSB7XG4gICAgICAgIGNvbnN0IHRlYW1JZCA9IFRlYW1TdG9yZS5nZXRDdXJyZW50SWQoKTtcblxuICAgICAgICBjb25zdCB0aGVtZSA9IFByZWZlcmVuY2VTdG9yZS5nZXRUaGVtZSh0ZWFtSWQpO1xuICAgICAgICBpZiAoIXRoZW1lLmNvZGVUaGVtZSkge1xuICAgICAgICAgICAgdGhlbWUuY29kZVRoZW1lID0gQ29uc3RhbnRzLkRFRkFVTFRfQ09ERV9USEVNRTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzaG93QWxsVGVhbXNDaGVja2JveCA9IGZhbHNlO1xuICAgICAgICBsZXQgYXBwbHlUb0FsbFRlYW1zID0gdHJ1ZTtcblxuICAgICAgICBpZiAoZ2xvYmFsLndpbmRvdy5tbV9saWNlbnNlLklzTGljZW5zZWQgPT09ICd0cnVlJyAmJiBnbG9iYWwud2luZG93Lm1tX2xpY2Vuc2UuTERBUCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAvLyBzaG93IHRoZSBcImFwcGx5IHRvIGFsbCB0ZWFtc1wiIGNoZWNrYm94IGlmIHRoZSB1c2VyIGlzIG9uIG1vcmUgdGhhbiBvbmUgdGVhbVxuICAgICAgICAgICAgc2hvd0FsbFRlYW1zQ2hlY2tib3ggPSBPYmplY3Qua2V5cyhUZWFtU3RvcmUuZ2V0QWxsKCkpLmxlbmd0aCA+IDE7XG5cbiAgICAgICAgICAgIC8vIGNoZWNrIHRoZSBcImFwcGx5IHRvIGFsbCB0ZWFtc1wiIGNoZWNrYm94IGJ5IGRlZmF1bHQgaWYgdGhlIHVzZXIgaGFzIGFueSB0ZWFtLXNwZWNpZmljIHRoZW1lc1xuICAgICAgICAgICAgYXBwbHlUb0FsbFRlYW1zID0gUHJlZmVyZW5jZVN0b3JlLmdldENhdGVnb3J5KFByZWZlcmVuY2VzLkNBVEVHT1JZX1RIRU1FKS5zaXplIDw9IDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVhbUlkOiBUZWFtU3RvcmUuZ2V0Q3VycmVudElkKCksXG4gICAgICAgICAgICB0aGVtZSxcbiAgICAgICAgICAgIHR5cGU6IHRoZW1lLnR5cGUgfHwgJ3ByZW1hZGUnLFxuICAgICAgICAgICAgc2hvd0FsbFRlYW1zQ2hlY2tib3gsXG4gICAgICAgICAgICBhcHBseVRvQWxsVGVhbXNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBvbkNoYW5nZSgpIHtcbiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSB0aGlzLmdldFN0YXRlRnJvbVN0b3JlcygpO1xuXG4gICAgICAgIGlmICghVXRpbHMuYXJlT2JqZWN0c0VxdWFsKHRoaXMuc3RhdGUsIG5ld1N0YXRlKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnByb3BzLnNldEVuZm9yY2VGb2N1cyh0cnVlKTtcbiAgICB9XG5cbiAgICBzY3JvbGxUb1RvcCgpIHtcbiAgICAgICAgJCgnLnBzLWNvbnRhaW5lci5tb2RhbC1ib2R5Jykuc2Nyb2xsVG9wKDApO1xuICAgIH1cblxuICAgIHN1Ym1pdFRoZW1lKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IHRlYW1JZCA9IHRoaXMuc3RhdGUuYXBwbHlUb0FsbFRlYW1zID8gJycgOiB0aGlzLnN0YXRlLnRlYW1JZDtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1NhdmluZzogdHJ1ZX0pO1xuXG4gICAgICAgIFVzZXJBY3Rpb25zLnNhdmVUaGVtZShcbiAgICAgICAgICAgIHRlYW1JZCxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudGhlbWUsXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZXRSZXF1aXJlQ29uZmlybShmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmlnaW5hbFRoZW1lID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zdGF0ZS50aGVtZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNTYXZpbmc6IGZhbHNlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgdXBkYXRlVGhlbWUodGhlbWUpIHtcbiAgICAgICAgbGV0IHRoZW1lQ2hhbmdlZCA9IHRoaXMuc3RhdGUudGhlbWUubGVuZ3RoID09PSB0aGVtZS5sZW5ndGg7XG4gICAgICAgIGlmICghdGhlbWVDaGFuZ2VkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkIGluIHRoZW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoZW1lLmhhc093blByb3BlcnR5KGZpZWxkKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS50aGVtZVtmaWVsZF0gIT09IHRoZW1lW2ZpZWxkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWVDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wcm9wcy5zZXRSZXF1aXJlQ29uZmlybSh0aGVtZUNoYW5nZWQpO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3RoZW1lfSk7XG4gICAgICAgIFV0aWxzLmFwcGx5VGhlbWUodGhlbWUpO1xuICAgIH1cblxuICAgIHVwZGF0ZVR5cGUodHlwZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHt0eXBlfSk7XG4gICAgfVxuXG4gICAgcmVzZXRGaWVsZHMoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRTdGF0ZUZyb21TdG9yZXMoKTtcbiAgICAgICAgc3RhdGUuc2VydmVyRXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcbiAgICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpO1xuXG4gICAgICAgIFV0aWxzLmFwcGx5VGhlbWUoc3RhdGUudGhlbWUpO1xuXG4gICAgICAgIHRoaXMucHJvcHMuc2V0UmVxdWlyZUNvbmZpcm0oZmFsc2UpO1xuICAgIH1cblxuICAgIGhhbmRsZUltcG9ydE1vZGFsKCkge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmhhbmRsZVZpZXdBY3Rpb24oe1xuICAgICAgICAgICAgdHlwZTogQWN0aW9uVHlwZXMuVE9HR0xFX0lNUE9SVF9USEVNRV9NT0RBTCxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMudXBkYXRlVGhlbWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5wcm9wcy5zZXRFbmZvcmNlRm9jdXMoZmFsc2UpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdmFyIHNlcnZlckVycm9yO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZXJ2ZXJFcnJvcikge1xuICAgICAgICAgICAgc2VydmVyRXJyb3IgPSB0aGlzLnN0YXRlLnNlcnZlckVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGlzcGxheUN1c3RvbSA9IHRoaXMuc3RhdGUudHlwZSA9PT0gJ2N1c3RvbSc7XG4gICAgICAgIGNvbnN0IGFsbG93Q3VzdG9tVGhlbWVzID0gZ2xvYmFsLm1tX2NvbmZpZy5BbGxvd0N1c3RvbVRoZW1lcyAhPT0gJ2ZhbHNlJztcblxuICAgICAgICBsZXQgY3VzdG9tO1xuICAgICAgICBsZXQgcHJlbWFkZTtcbiAgICAgICAgaWYgKGRpc3BsYXlDdXN0b20gJiYgYWxsb3dDdXN0b21UaGVtZXMpIHtcbiAgICAgICAgICAgIGN1c3RvbSA9IChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT0nY3VzdG9tVGhlbWVDaG9vc2VyJz5cbiAgICAgICAgICAgICAgICAgICAgPEN1c3RvbVRoZW1lQ2hvb3NlclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU9e3RoaXMuc3RhdGUudGhlbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaGVtZT17dGhpcy51cGRhdGVUaGVtZX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcmVtYWRlID0gKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PSdwcmVtYWRlVGhlbWVDaG9vc2VyJz5cbiAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPFByZW1hZGVUaGVtZUNob29zZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lPXt0aGlzLnN0YXRlLnRoZW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGhlbWU9e3RoaXMudXBkYXRlVGhlbWV9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRoZW1lVUk7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBbXTtcblxuICAgICAgICAgICAgaWYgKGFsbG93Q3VzdG9tVGhlbWVzKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9J3ByZW1hZGVUaGVtZUNvbG9yTGFiZWwnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3N0YW5kYXJkVGhlbWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0ndGhlbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9eyFkaXNwbGF5Q3VzdG9tfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVUeXBlLmJpbmQodGhpcywgJ3ByZW1hZGUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmRpc3BsYXkudGhlbWUudGhlbWVDb2xvcnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUaGVtZSBDb2xvcnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbnB1dHMucHVzaChwcmVtYWRlKTtcblxuICAgICAgICAgICAgaWYgKGFsbG93Q3VzdG9tVGhlbWVzKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9J2N1c3RvbVRoZW1lQ29sb3JMYWJlbCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nY3VzdG9tVGhlbWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0ndGhlbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2Rpc3BsYXlDdXN0b219XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZVR5cGUuYmluZCh0aGlzLCAnY3VzdG9tJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5kaXNwbGF5LnRoZW1lLmN1c3RvbVRoZW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ3VzdG9tIFRoZW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaW5wdXRzLnB1c2goY3VzdG9tKTtcblxuICAgICAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT0nb3RoZXJUaGVtZXMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J290aGVyVGhlbWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9J2h0dHA6Ly9kb2NzLm1hdHRlcm1vc3QuY29tL2hlbHAvc2V0dGluZ3MvdGhlbWUtY29sb3JzLmh0bWwjY3VzdG9tLXRoZW1lLWV4YW1wbGVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD0nX2JsYW5rJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbD0nbm9vcGVuZXIgbm9yZWZlcnJlcidcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5kaXNwbGF5LnRoZW1lLm90aGVyVGhlbWVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU2VlIG90aGVyIHRoZW1lcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT0naW1wb3J0U2xhY2tUaGVtZUJ1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncGFkZGluZy10b3AnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3NsYWNrSW1wb3J0VGhlbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0aGVtZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUltcG9ydE1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmRpc3BsYXkudGhlbWUuaW1wb3J0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nSW1wb3J0IHRoZW1lIGNvbG9ycyBmcm9tIFNsYWNrJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBhbGxUZWFtc0NoZWNrYm94ID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3dBbGxUZWFtc0NoZWNrYm94KSB7XG4gICAgICAgICAgICAgICAgYWxsVGVhbXNDaGVja2JveCA9IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NoZWNrYm94IHVzZXItc2V0dGluZ3NfX3N1Ym1pdC1jaGVja2JveCc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdhcHBseVRoZW1lVG9BbGxUZWFtcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0nY2hlY2tib3gnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUuYXBwbHlUb0FsbFRlYW1zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHRoaXMuc2V0U3RhdGUoe2FwcGx5VG9BbGxUZWFtczogZS50YXJnZXQuY2hlY2tlZH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZGlzcGxheS50aGVtZS5hcHBseVRvQWxsVGVhbXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdBcHBseSBuZXcgdGhlbWUgdG8gYWxsIG15IHRlYW1zJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGVtZVVJID0gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1heFxuICAgICAgICAgICAgICAgICAgICBpbnB1dHM9e2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgc3VibWl0RXh0cmE9e2FsbFRlYW1zQ2hlY2tib3h9XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdD17dGhpcy5zdWJtaXRUaGVtZX1cbiAgICAgICAgICAgICAgICAgICAgc2F2aW5nPXt0aGlzLnN0YXRlLmlzU2F2aW5nfVxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJfZXJyb3I9e3NlcnZlckVycm9yfVxuICAgICAgICAgICAgICAgICAgICB3aWR0aD0nZnVsbCdcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGVtZVVJID0gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1pblxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmRpc3BsYXkudGhlbWUudGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1RoZW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZT17XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmRpc3BsYXkudGhlbWUuZGVzY3JpYmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J09wZW4gdG8gbWFuYWdlIHlvdXIgdGhlbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbigndGhlbWUnKTtcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGVtZVVJO1xuICAgIH1cbn1cblxuVGhlbWVTZXR0aW5nLnByb3BUeXBlcyA9IHtcbiAgICBzZWxlY3RlZDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICB1cGRhdGVTZWN0aW9uOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHNldFJlcXVpcmVDb25maXJtOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgIHNldEVuZm9yY2VGb2N1czogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc190aGVtZS5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBeEJBO0FBQ0E7QUFDQTtBQXVCQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFhQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVJBO0FBYUE7QUFqQkE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQUpBO0FBQ0E7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBTkE7QUFGQTtBQUNBO0FBZUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBSkE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFQQTtBQURBO0FBZUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQWFBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBZkE7QUFrQkE7QUFDQTtBQUNBO0FBQ0E7OztBQTNVQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBNFVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2531\n");

/***/ }),

/***/ 2532:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _assign = __webpack_require__(42);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _stringify = __webpack_require__(158);\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _defineProperty2 = __webpack_require__(211);\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _extends3 = __webpack_require__(20);\n\nvar _extends4 = _interopRequireDefault(_extends3);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\n__webpack_require__(2533);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _user_agent = __webpack_require__(90);\n\nvar UserAgent = _interopRequireWildcard(_user_agent);\n\nvar _color_chooser = __webpack_require__(2534);\n\nvar _color_chooser2 = _interopRequireDefault(_color_chooser);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar messages = (0, _reactIntl.defineMessages)({\n    sidebarBg: {\n        id: 'user.settings.custom_theme.sidebarBg',\n        defaultMessage: 'Sidebar BG'\n    },\n    sidebarText: {\n        id: 'user.settings.custom_theme.sidebarText',\n        defaultMessage: 'Sidebar Text'\n    },\n    sidebarHeaderBg: {\n        id: 'user.settings.custom_theme.sidebarHeaderBg',\n        defaultMessage: 'Sidebar Header BG'\n    },\n    sidebarHeaderTextColor: {\n        id: 'user.settings.custom_theme.sidebarHeaderTextColor',\n        defaultMessage: 'Sidebar Header Text'\n    },\n    sidebarUnreadText: {\n        id: 'user.settings.custom_theme.sidebarUnreadText',\n        defaultMessage: 'Sidebar Unread Text'\n    },\n    sidebarTextHoverBg: {\n        id: 'user.settings.custom_theme.sidebarTextHoverBg',\n        defaultMessage: 'Sidebar Text Hover BG'\n    },\n    sidebarTextActiveBorder: {\n        id: 'user.settings.custom_theme.sidebarTextActiveBorder',\n        defaultMessage: 'Sidebar Text Active Border'\n    },\n    sidebarTextActiveColor: {\n        id: 'user.settings.custom_theme.sidebarTextActiveColor',\n        defaultMessage: 'Sidebar Text Active Color'\n    },\n    onlineIndicator: {\n        id: 'user.settings.custom_theme.onlineIndicator',\n        defaultMessage: 'Online Indicator'\n    },\n    awayIndicator: {\n        id: 'user.settings.custom_theme.awayIndicator',\n        defaultMessage: 'Away Indicator'\n    },\n    mentionBj: {\n        id: 'user.settings.custom_theme.mentionBj',\n        defaultMessage: 'Mention Jewel BG'\n    },\n    mentionColor: {\n        id: 'user.settings.custom_theme.mentionColor',\n        defaultMessage: 'Mention Jewel Text'\n    },\n    centerChannelBg: {\n        id: 'user.settings.custom_theme.centerChannelBg',\n        defaultMessage: 'Center Channel BG'\n    },\n    centerChannelColor: {\n        id: 'user.settings.custom_theme.centerChannelColor',\n        defaultMessage: 'Center Channel Text'\n    },\n    newMessageSeparator: {\n        id: 'user.settings.custom_theme.newMessageSeparator',\n        defaultMessage: 'New Message Separator'\n    },\n    linkColor: {\n        id: 'user.settings.custom_theme.linkColor',\n        defaultMessage: 'Link Color'\n    },\n    buttonBg: {\n        id: 'user.settings.custom_theme.buttonBg',\n        defaultMessage: 'Button BG'\n    },\n    buttonColor: {\n        id: 'user.settings.custom_theme.buttonColor',\n        defaultMessage: 'Button Text'\n    },\n    errorTextColor: {\n        id: 'user.settings.custom_theme.errorTextColor',\n        defaultMessage: 'Error Text Color'\n    },\n    mentionHighlightBg: {\n        id: 'user.settings.custom_theme.mentionHighlightBg',\n        defaultMessage: 'Mention Highlight BG'\n    },\n    mentionHighlightLink: {\n        id: 'user.settings.custom_theme.mentionHighlightLink',\n        defaultMessage: 'Mention Highlight Link'\n    },\n    codeTheme: {\n        id: 'user.settings.custom_theme.codeTheme',\n        defaultMessage: 'Code Theme'\n    }\n}); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar CustomThemeChooser = function (_React$Component) {\n    (0, _inherits3.default)(CustomThemeChooser, _React$Component);\n\n    function CustomThemeChooser(props) {\n        (0, _classCallCheck3.default)(this, CustomThemeChooser);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (CustomThemeChooser.__proto__ || (0, _getPrototypeOf2.default)(CustomThemeChooser)).call(this, props));\n\n        _this.handleColorChange = function (settingId, color) {\n            var _this$props = _this.props,\n                updateTheme = _this$props.updateTheme,\n                theme = _this$props.theme;\n\n            if (theme[settingId] !== color) {\n                updateTheme((0, _extends4.default)({}, theme, (0, _defineProperty3.default)({\n                    type: 'custom'\n                }, settingId, color)));\n            }\n        };\n\n        _this.pasteBoxChange = function (e) {\n            var text = '';\n\n            if (window.clipboardData && window.clipboardData.getData) {\n                // IE\n                text = window.clipboardData.getData('Text');\n            } else {\n                text = e.clipboardData.getData('Text'); //e.clipboardData.getData('text/plain');\n            }\n\n            if (text.length === 0) {\n                return;\n            }\n\n            var theme = void 0;\n            try {\n                theme = JSON.parse(text);\n            } catch (err) {\n                return;\n            }\n\n            _this.setState({\n                copyTheme: (0, _stringify2.default)(theme)\n            });\n\n            theme.type = 'custom';\n            _this.props.updateTheme(theme);\n        };\n\n        _this.onChangeHandle = function (e) {\n            e.stopPropagation();\n        };\n\n        _this.toggleSidebarStyles = function (e) {\n            e.preventDefault();\n\n            (0, _jquery2.default)(_this.refs.sidebarStylesHeader).toggleClass('open');\n            _this.toggleSection(_this.refs.sidebarStyles);\n        };\n\n        _this.toggleCenterChannelStyles = function (e) {\n            e.preventDefault();\n\n            (0, _jquery2.default)(_this.refs.centerChannelStylesHeader).toggleClass('open');\n            _this.toggleSection(_this.refs.centerChannelStyles);\n        };\n\n        _this.toggleLinkAndButtonStyles = function (e) {\n            e.preventDefault();\n\n            (0, _jquery2.default)(_this.refs.linkAndButtonStylesHeader).toggleClass('open');\n            _this.toggleSection(_this.refs.linkAndButtonStyles);\n        };\n\n        _this.onCodeThemeChange = function (e) {\n            var theme = _this.props.theme;\n            theme.codeTheme = e.target.value;\n            _this.props.updateTheme(theme);\n        };\n\n        _this.selectTheme = _this.selectTheme.bind(_this);\n\n        var copyTheme = (0, _assign2.default)({}, _this.props.theme);\n        delete copyTheme.type;\n        delete copyTheme.image;\n\n        _this.state = {\n            copyTheme: (0, _stringify2.default)(copyTheme)\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(CustomThemeChooser, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            (0, _jquery2.default)('.group--code').on('change', this.onCodeThemeChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            (0, _jquery2.default)('.group--code').off('change', this.onCodeThemeChange);\n        }\n    }, {\n        key: 'selectTheme',\n        value: function selectTheme() {\n            var textarea = this.refs.textarea;\n            textarea.focus();\n            textarea.setSelectionRange(0, this.state.copyTheme.length);\n        }\n    }, {\n        key: 'toggleSection',\n        value: function toggleSection(node) {\n            if (UserAgent.isIos()) {\n                // iOS doesn't support jQuery animations\n                (0, _jquery2.default)(node).toggleClass('open');\n            } else {\n                (0, _jquery2.default)(node).slideToggle();\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var formatMessage = this.props.intl.formatMessage;\n\n            var theme = this.props.theme;\n\n            var sidebarElements = [];\n            var centerChannelElements = [];\n            var linkAndButtonElements = [];\n            _constants2.default.THEME_ELEMENTS.forEach(function (element, index) {\n                if (element.id === 'codeTheme') {\n                    var codeThemeOptions = [];\n                    var codeThemeURL = '';\n\n                    element.themes.forEach(function (codeTheme, codeThemeIndex) {\n                        if (codeTheme.id === theme[element.id]) {\n                            codeThemeURL = codeTheme.iconURL;\n                        }\n                        codeThemeOptions.push(_react2.default.createElement(\n                            'option',\n                            {\n                                key: 'code-theme-key' + codeThemeIndex,\n                                value: codeTheme.id\n                            },\n                            codeTheme.uiName\n                        ));\n                    });\n\n                    var popoverContent = _react2.default.createElement(\n                        _reactBootstrap.Popover,\n                        {\n                            bsStyle: 'info',\n                            id: 'code-popover',\n                            className: 'code-popover'\n                        },\n                        _react2.default.createElement('img', {\n                            width: '200',\n                            src: codeThemeURL\n                        })\n                    );\n\n                    centerChannelElements.push(_react2.default.createElement(\n                        'div',\n                        {\n                            className: 'col-sm-6 form-group',\n                            key: 'custom-theme-key' + index\n                        },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'custom-label' },\n                            formatMessage(messages[element.id])\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            {\n                                className: 'input-group theme-group group--code dropdown',\n                                id: element.id\n                            },\n                            _react2.default.createElement(\n                                'select',\n                                {\n                                    className: 'form-control',\n                                    type: 'text',\n                                    defaultValue: theme[element.id]\n                                },\n                                codeThemeOptions\n                            ),\n                            _react2.default.createElement(\n                                _reactBootstrap.OverlayTrigger,\n                                {\n                                    trigger: ['hover', 'focus'],\n                                    placement: 'top',\n                                    overlay: popoverContent,\n                                    ref: 'headerOverlay'\n                                },\n                                _react2.default.createElement(\n                                    'span',\n                                    { className: 'input-group-addon' },\n                                    _react2.default.createElement('img', {\n                                        src: codeThemeURL\n                                    })\n                                )\n                            )\n                        )\n                    ));\n                } else if (element.group === 'centerChannelElements') {\n                    centerChannelElements.push(_react2.default.createElement(\n                        'div',\n                        {\n                            className: 'col-sm-6 form-group element',\n                            key: 'custom-theme-key' + index\n                        },\n                        _react2.default.createElement(_color_chooser2.default, {\n                            id: element.id,\n                            label: formatMessage(messages[element.id]),\n                            color: theme[element.id],\n                            onChange: _this2.handleColorChange\n                        })\n                    ));\n                } else if (element.group === 'sidebarElements') {\n                    sidebarElements.push(_react2.default.createElement(\n                        'div',\n                        {\n                            className: 'col-sm-6 form-group element',\n                            key: 'custom-theme-key' + index\n                        },\n                        _react2.default.createElement(_color_chooser2.default, {\n                            id: element.id,\n                            label: formatMessage(messages[element.id]),\n                            color: theme[element.id],\n                            onChange: _this2.handleColorChange\n                        })\n                    ));\n                } else {\n                    linkAndButtonElements.push(_react2.default.createElement(\n                        'div',\n                        {\n                            className: 'col-sm-6 form-group element',\n                            key: 'custom-theme-key' + index\n                        },\n                        _react2.default.createElement(_color_chooser2.default, {\n                            id: element.id,\n                            label: formatMessage(messages[element.id]),\n                            color: theme[element.id],\n                            onChange: _this2.handleColorChange\n                        })\n                    ));\n                }\n            });\n\n            var pasteBox = _react2.default.createElement(\n                'div',\n                { className: 'col-sm-12' },\n                _react2.default.createElement(\n                    'label',\n                    { className: 'custom-label' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.custom_theme.copyPaste',\n                        defaultMessage: 'Copy and paste to share theme colors:'\n                    })\n                ),\n                _react2.default.createElement('textarea', {\n                    ref: 'textarea',\n                    className: 'form-control',\n                    value: this.state.copyTheme,\n                    onPaste: this.pasteBoxChange,\n                    onChange: this.onChangeHandle,\n                    onClick: this.selectTheme\n                })\n            );\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'appearance-section padding-top' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'theme-elements row' },\n                    _react2.default.createElement(\n                        'div',\n                        {\n                            ref: 'sidebarStylesHeader',\n                            className: 'theme-elements__header',\n                            onClick: this.toggleSidebarStyles\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.custom_theme.sidebarTitle',\n                            defaultMessage: 'Sidebar Styles'\n                        }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'header__icon' },\n                            _react2.default.createElement('i', { className: 'fa fa-plus' }),\n                            _react2.default.createElement('i', { className: 'fa fa-minus' })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        {\n                            ref: 'sidebarStyles',\n                            className: 'theme-elements__body'\n                        },\n                        sidebarElements\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'theme-elements row' },\n                    _react2.default.createElement(\n                        'div',\n                        {\n                            ref: 'centerChannelStylesHeader',\n                            className: 'theme-elements__header',\n                            onClick: this.toggleCenterChannelStyles\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.custom_theme.centerChannelTitle',\n                            defaultMessage: 'Center Channel Styles'\n                        }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'header__icon' },\n                            _react2.default.createElement('i', { className: 'fa fa-plus' }),\n                            _react2.default.createElement('i', { className: 'fa fa-minus' })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        {\n                            ref: 'centerChannelStyles',\n                            className: 'theme-elements__body'\n                        },\n                        centerChannelElements\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'theme-elements row form-group' },\n                    _react2.default.createElement(\n                        'div',\n                        {\n                            ref: 'linkAndButtonStylesHeader',\n                            className: 'theme-elements__header',\n                            onClick: this.toggleLinkAndButtonStyles\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.custom_theme.linkButtonTitle',\n                            defaultMessage: 'Link and Button Styles'\n                        }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'header__icon' },\n                            _react2.default.createElement('i', { className: 'fa fa-plus' }),\n                            _react2.default.createElement('i', { className: 'fa fa-minus' })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        {\n                            ref: 'linkAndButtonStyles',\n                            className: 'theme-elements__body'\n                        },\n                        linkAndButtonElements\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'row' },\n                    pasteBox\n                )\n            );\n        }\n    }]);\n    return CustomThemeChooser;\n}(_react2.default.Component);\n\nCustomThemeChooser.propTypes = {\n    intl: _reactIntl.intlShape.isRequired,\n    theme: _propTypes2.default.object.isRequired,\n    updateTheme: _propTypes2.default.func.isRequired\n};\n\nexports.default = (0, _reactIntl.injectIntl)(CustomThemeChooser);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvY3VzdG9tX3RoZW1lX2Nob29zZXIuanN4PzllZDIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7T3ZlcmxheVRyaWdnZXIsIFBvcG92ZXJ9IGZyb20gJ3JlYWN0LWJvb3RzdHJhcCc7XG5pbXBvcnQge2RlZmluZU1lc3NhZ2VzLCBGb3JtYXR0ZWRNZXNzYWdlLCBpbmplY3RJbnRsLCBpbnRsU2hhcGV9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgJ2Jvb3RzdHJhcC1jb2xvcnBpY2tlcic7XG5cbmltcG9ydCBDb25zdGFudHMgZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5pbXBvcnQgKiBhcyBVc2VyQWdlbnQgZnJvbSAndXRpbHMvdXNlcl9hZ2VudC5qc3gnO1xuXG5pbXBvcnQgQ29sb3JDaG9vc2VyIGZyb20gJy4vY29sb3JfY2hvb3Nlci5qc3gnO1xuXG5jb25zdCBtZXNzYWdlcyA9IGRlZmluZU1lc3NhZ2VzKHtcbiAgICBzaWRlYmFyQmc6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmN1c3RvbV90aGVtZS5zaWRlYmFyQmcnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NpZGViYXIgQkcnXG4gICAgfSxcbiAgICBzaWRlYmFyVGV4dDoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuY3VzdG9tX3RoZW1lLnNpZGViYXJUZXh0JyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaWRlYmFyIFRleHQnXG4gICAgfSxcbiAgICBzaWRlYmFySGVhZGVyQmc6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmN1c3RvbV90aGVtZS5zaWRlYmFySGVhZGVyQmcnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NpZGViYXIgSGVhZGVyIEJHJ1xuICAgIH0sXG4gICAgc2lkZWJhckhlYWRlclRleHRDb2xvcjoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuY3VzdG9tX3RoZW1lLnNpZGViYXJIZWFkZXJUZXh0Q29sb3InLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1NpZGViYXIgSGVhZGVyIFRleHQnXG4gICAgfSxcbiAgICBzaWRlYmFyVW5yZWFkVGV4dDoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuY3VzdG9tX3RoZW1lLnNpZGViYXJVbnJlYWRUZXh0JyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaWRlYmFyIFVucmVhZCBUZXh0J1xuICAgIH0sXG4gICAgc2lkZWJhclRleHRIb3ZlckJnOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5jdXN0b21fdGhlbWUuc2lkZWJhclRleHRIb3ZlckJnJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaWRlYmFyIFRleHQgSG92ZXIgQkcnXG4gICAgfSxcbiAgICBzaWRlYmFyVGV4dEFjdGl2ZUJvcmRlcjoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuY3VzdG9tX3RoZW1lLnNpZGViYXJUZXh0QWN0aXZlQm9yZGVyJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaWRlYmFyIFRleHQgQWN0aXZlIEJvcmRlcidcbiAgICB9LFxuICAgIHNpZGViYXJUZXh0QWN0aXZlQ29sb3I6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmN1c3RvbV90aGVtZS5zaWRlYmFyVGV4dEFjdGl2ZUNvbG9yJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdTaWRlYmFyIFRleHQgQWN0aXZlIENvbG9yJ1xuICAgIH0sXG4gICAgb25saW5lSW5kaWNhdG9yOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5jdXN0b21fdGhlbWUub25saW5lSW5kaWNhdG9yJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdPbmxpbmUgSW5kaWNhdG9yJ1xuICAgIH0sXG4gICAgYXdheUluZGljYXRvcjoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuY3VzdG9tX3RoZW1lLmF3YXlJbmRpY2F0b3InLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0F3YXkgSW5kaWNhdG9yJ1xuICAgIH0sXG4gICAgbWVudGlvbkJqOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5jdXN0b21fdGhlbWUubWVudGlvbkJqJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdNZW50aW9uIEpld2VsIEJHJ1xuICAgIH0sXG4gICAgbWVudGlvbkNvbG9yOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5jdXN0b21fdGhlbWUubWVudGlvbkNvbG9yJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdNZW50aW9uIEpld2VsIFRleHQnXG4gICAgfSxcbiAgICBjZW50ZXJDaGFubmVsQmc6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmN1c3RvbV90aGVtZS5jZW50ZXJDaGFubmVsQmcnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0NlbnRlciBDaGFubmVsIEJHJ1xuICAgIH0sXG4gICAgY2VudGVyQ2hhbm5lbENvbG9yOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5jdXN0b21fdGhlbWUuY2VudGVyQ2hhbm5lbENvbG9yJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDZW50ZXIgQ2hhbm5lbCBUZXh0J1xuICAgIH0sXG4gICAgbmV3TWVzc2FnZVNlcGFyYXRvcjoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuY3VzdG9tX3RoZW1lLm5ld01lc3NhZ2VTZXBhcmF0b3InLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ05ldyBNZXNzYWdlIFNlcGFyYXRvcidcbiAgICB9LFxuICAgIGxpbmtDb2xvcjoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuY3VzdG9tX3RoZW1lLmxpbmtDb2xvcicsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTGluayBDb2xvcidcbiAgICB9LFxuICAgIGJ1dHRvbkJnOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5jdXN0b21fdGhlbWUuYnV0dG9uQmcnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0J1dHRvbiBCRydcbiAgICB9LFxuICAgIGJ1dHRvbkNvbG9yOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5jdXN0b21fdGhlbWUuYnV0dG9uQ29sb3InLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0J1dHRvbiBUZXh0J1xuICAgIH0sXG4gICAgZXJyb3JUZXh0Q29sb3I6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmN1c3RvbV90aGVtZS5lcnJvclRleHRDb2xvcicsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRXJyb3IgVGV4dCBDb2xvcidcbiAgICB9LFxuICAgIG1lbnRpb25IaWdobGlnaHRCZzoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuY3VzdG9tX3RoZW1lLm1lbnRpb25IaWdobGlnaHRCZycsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnTWVudGlvbiBIaWdobGlnaHQgQkcnXG4gICAgfSxcbiAgICBtZW50aW9uSGlnaGxpZ2h0TGluazoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuY3VzdG9tX3RoZW1lLm1lbnRpb25IaWdobGlnaHRMaW5rJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdNZW50aW9uIEhpZ2hsaWdodCBMaW5rJ1xuICAgIH0sXG4gICAgY29kZVRoZW1lOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5jdXN0b21fdGhlbWUuY29kZVRoZW1lJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDb2RlIFRoZW1lJ1xuICAgIH1cbn0pO1xuXG5jbGFzcyBDdXN0b21UaGVtZUNob29zZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zZWxlY3RUaGVtZSA9IHRoaXMuc2VsZWN0VGhlbWUuYmluZCh0aGlzKTtcblxuICAgICAgICBjb25zdCBjb3B5VGhlbWUgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb3BzLnRoZW1lKTtcbiAgICAgICAgZGVsZXRlIGNvcHlUaGVtZS50eXBlO1xuICAgICAgICBkZWxldGUgY29weVRoZW1lLmltYWdlO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBjb3B5VGhlbWU6IEpTT04uc3RyaW5naWZ5KGNvcHlUaGVtZSlcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgJCgnLmdyb3VwLS1jb2RlJykub24oJ2NoYW5nZScsIHRoaXMub25Db2RlVGhlbWVDaGFuZ2UpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAkKCcuZ3JvdXAtLWNvZGUnKS5vZmYoJ2NoYW5nZScsIHRoaXMub25Db2RlVGhlbWVDaGFuZ2UpO1xuICAgIH1cblxuICAgIGhhbmRsZUNvbG9yQ2hhbmdlID0gKHNldHRpbmdJZCwgY29sb3IpID0+IHtcbiAgICAgICAgY29uc3Qge3VwZGF0ZVRoZW1lLCB0aGVtZX0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAodGhlbWVbc2V0dGluZ0lkXSAhPT0gY29sb3IpIHtcbiAgICAgICAgICAgIHVwZGF0ZVRoZW1lKHtcbiAgICAgICAgICAgICAgICAuLi50aGVtZSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnY3VzdG9tJyxcbiAgICAgICAgICAgICAgICBbc2V0dGluZ0lkXTogY29sb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcGFzdGVCb3hDaGFuZ2UgPSAoZSkgPT4ge1xuICAgICAgICBsZXQgdGV4dCA9ICcnO1xuXG4gICAgICAgIGlmICh3aW5kb3cuY2xpcGJvYXJkRGF0YSAmJiB3aW5kb3cuY2xpcGJvYXJkRGF0YS5nZXREYXRhKSB7IC8vIElFXG4gICAgICAgICAgICB0ZXh0ID0gd2luZG93LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgnVGV4dCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dCA9IGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCdUZXh0Jyk7Ly9lLmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRleHQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGhlbWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGVtZSA9IEpTT04ucGFyc2UodGV4dCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBjb3B5VGhlbWU6IEpTT04uc3RyaW5naWZ5KHRoZW1lKVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGVtZS50eXBlID0gJ2N1c3RvbSc7XG4gICAgICAgIHRoaXMucHJvcHMudXBkYXRlVGhlbWUodGhlbWUpO1xuICAgIH1cblxuICAgIG9uQ2hhbmdlSGFuZGxlID0gKGUpID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG5cbiAgICBzZWxlY3RUaGVtZSgpIHtcbiAgICAgICAgY29uc3QgdGV4dGFyZWEgPSB0aGlzLnJlZnMudGV4dGFyZWE7XG4gICAgICAgIHRleHRhcmVhLmZvY3VzKCk7XG4gICAgICAgIHRleHRhcmVhLnNldFNlbGVjdGlvblJhbmdlKDAsIHRoaXMuc3RhdGUuY29weVRoZW1lLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgdG9nZ2xlU2lkZWJhclN0eWxlcyA9IChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAkKHRoaXMucmVmcy5zaWRlYmFyU3R5bGVzSGVhZGVyKS50b2dnbGVDbGFzcygnb3BlbicpO1xuICAgICAgICB0aGlzLnRvZ2dsZVNlY3Rpb24odGhpcy5yZWZzLnNpZGViYXJTdHlsZXMpO1xuICAgIH1cblxuICAgIHRvZ2dsZUNlbnRlckNoYW5uZWxTdHlsZXMgPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgJCh0aGlzLnJlZnMuY2VudGVyQ2hhbm5lbFN0eWxlc0hlYWRlcikudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgdGhpcy50b2dnbGVTZWN0aW9uKHRoaXMucmVmcy5jZW50ZXJDaGFubmVsU3R5bGVzKTtcbiAgICB9XG5cbiAgICB0b2dnbGVMaW5rQW5kQnV0dG9uU3R5bGVzID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICQodGhpcy5yZWZzLmxpbmtBbmRCdXR0b25TdHlsZXNIZWFkZXIpLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgIHRoaXMudG9nZ2xlU2VjdGlvbih0aGlzLnJlZnMubGlua0FuZEJ1dHRvblN0eWxlcyk7XG4gICAgfVxuXG4gICAgdG9nZ2xlU2VjdGlvbihub2RlKSB7XG4gICAgICAgIGlmIChVc2VyQWdlbnQuaXNJb3MoKSkge1xuICAgICAgICAgICAgLy8gaU9TIGRvZXNuJ3Qgc3VwcG9ydCBqUXVlcnkgYW5pbWF0aW9uc1xuICAgICAgICAgICAgJChub2RlKS50b2dnbGVDbGFzcygnb3BlbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChub2RlKS5zbGlkZVRvZ2dsZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25Db2RlVGhlbWVDaGFuZ2UgPSAoZSkgPT4ge1xuICAgICAgICBjb25zdCB0aGVtZSA9IHRoaXMucHJvcHMudGhlbWU7XG4gICAgICAgIHRoZW1lLmNvZGVUaGVtZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnByb3BzLnVwZGF0ZVRoZW1lKHRoZW1lKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHtmb3JtYXRNZXNzYWdlfSA9IHRoaXMucHJvcHMuaW50bDtcbiAgICAgICAgY29uc3QgdGhlbWUgPSB0aGlzLnByb3BzLnRoZW1lO1xuXG4gICAgICAgIGNvbnN0IHNpZGViYXJFbGVtZW50cyA9IFtdO1xuICAgICAgICBjb25zdCBjZW50ZXJDaGFubmVsRWxlbWVudHMgPSBbXTtcbiAgICAgICAgY29uc3QgbGlua0FuZEJ1dHRvbkVsZW1lbnRzID0gW107XG4gICAgICAgIENvbnN0YW50cy5USEVNRV9FTEVNRU5UUy5mb3JFYWNoKChlbGVtZW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQuaWQgPT09ICdjb2RlVGhlbWUnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29kZVRoZW1lT3B0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIGxldCBjb2RlVGhlbWVVUkwgPSAnJztcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQudGhlbWVzLmZvckVhY2goKGNvZGVUaGVtZSwgY29kZVRoZW1lSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGVUaGVtZS5pZCA9PT0gdGhlbWVbZWxlbWVudC5pZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVUaGVtZVVSTCA9IGNvZGVUaGVtZS5pY29uVVJMO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvZGVUaGVtZU9wdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9eydjb2RlLXRoZW1lLWtleScgKyBjb2RlVGhlbWVJbmRleH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Y29kZVRoZW1lLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb2RlVGhlbWUudWlOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcG9wb3ZlckNvbnRlbnQgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxQb3BvdmVyXG4gICAgICAgICAgICAgICAgICAgICAgICBic1N0eWxlPSdpbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2NvZGUtcG9wb3ZlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY29kZS1wb3BvdmVyJ1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9JzIwMCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e2NvZGVUaGVtZVVSTH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvUG9wb3Zlcj5cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY2VudGVyQ2hhbm5lbEVsZW1lbnRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY29sLXNtLTYgZm9ybS1ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17J2N1c3RvbS10aGVtZS1rZXknICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2N1c3RvbS1sYWJlbCc+e2Zvcm1hdE1lc3NhZ2UobWVzc2FnZXNbZWxlbWVudC5pZF0pfTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdpbnB1dC1ncm91cCB0aGVtZS1ncm91cCBncm91cC0tY29kZSBkcm9wZG93bidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17ZWxlbWVudC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU9e3RoZW1lW2VsZW1lbnQuaWRdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvZGVUaGVtZU9wdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE92ZXJsYXlUcmlnZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI9e1snaG92ZXInLCAnZm9jdXMnXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PSd0b3AnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXk9e3BvcG92ZXJDb250ZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9J2hlYWRlck92ZXJsYXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J2lucHV0LWdyb3VwLWFkZG9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e2NvZGVUaGVtZVVSTH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L092ZXJsYXlUcmlnZ2VyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuZ3JvdXAgPT09ICdjZW50ZXJDaGFubmVsRWxlbWVudHMnKSB7XG4gICAgICAgICAgICAgICAgY2VudGVyQ2hhbm5lbEVsZW1lbnRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY29sLXNtLTYgZm9ybS1ncm91cCBlbGVtZW50J1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXsnY3VzdG9tLXRoZW1lLWtleScgKyBpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENvbG9yQ2hvb3NlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtlbGVtZW50LmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtmb3JtYXRNZXNzYWdlKG1lc3NhZ2VzW2VsZW1lbnQuaWRdKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17dGhlbWVbZWxlbWVudC5pZF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ29sb3JDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50Lmdyb3VwID09PSAnc2lkZWJhckVsZW1lbnRzJykge1xuICAgICAgICAgICAgICAgIHNpZGViYXJFbGVtZW50cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2NvbC1zbS02IGZvcm0tZ3JvdXAgZWxlbWVudCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17J2N1c3RvbS10aGVtZS1rZXknICsgaW5kZXh9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxDb2xvckNob29zZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17ZWxlbWVudC5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD17Zm9ybWF0TWVzc2FnZShtZXNzYWdlc1tlbGVtZW50LmlkXSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I9e3RoZW1lW2VsZW1lbnQuaWRdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNvbG9yQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGlua0FuZEJ1dHRvbkVsZW1lbnRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY29sLXNtLTYgZm9ybS1ncm91cCBlbGVtZW50J1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXsnY3VzdG9tLXRoZW1lLWtleScgKyBpbmRleH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPENvbG9yQ2hvb3NlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtlbGVtZW50LmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtmb3JtYXRNZXNzYWdlKG1lc3NhZ2VzW2VsZW1lbnQuaWRdKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17dGhlbWVbZWxlbWVudC5pZF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ29sb3JDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBwYXN0ZUJveCA9IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tMTInPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2N1c3RvbS1sYWJlbCc+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5jdXN0b21fdGhlbWUuY29weVBhc3RlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0NvcHkgYW5kIHBhc3RlIHRvIHNoYXJlIHRoZW1lIGNvbG9yczonXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgICAgcmVmPSd0ZXh0YXJlYSdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmb3JtLWNvbnRyb2wnXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmNvcHlUaGVtZX1cbiAgICAgICAgICAgICAgICAgICAgb25QYXN0ZT17dGhpcy5wYXN0ZUJveENoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VIYW5kbGV9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2VsZWN0VGhlbWV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYXBwZWFyYW5jZS1zZWN0aW9uIHBhZGRpbmctdG9wJz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGhlbWUtZWxlbWVudHMgcm93Jz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSdzaWRlYmFyU3R5bGVzSGVhZGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0aGVtZS1lbGVtZW50c19faGVhZGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy50b2dnbGVTaWRlYmFyU3R5bGVzfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmN1c3RvbV90aGVtZS5zaWRlYmFyVGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1NpZGViYXIgU3R5bGVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdoZWFkZXJfX2ljb24nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtcGx1cycvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtbWludXMnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSdzaWRlYmFyU3R5bGVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd0aGVtZS1lbGVtZW50c19fYm9keSdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge3NpZGViYXJFbGVtZW50c31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RoZW1lLWVsZW1lbnRzIHJvdyc+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0nY2VudGVyQ2hhbm5lbFN0eWxlc0hlYWRlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndGhlbWUtZWxlbWVudHNfX2hlYWRlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlQ2VudGVyQ2hhbm5lbFN0eWxlc31cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5jdXN0b21fdGhlbWUuY2VudGVyQ2hhbm5lbFRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDZW50ZXIgQ2hhbm5lbCBTdHlsZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2hlYWRlcl9faWNvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1wbHVzJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1taW51cycvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9J2NlbnRlckNoYW5uZWxTdHlsZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RoZW1lLWVsZW1lbnRzX19ib2R5J1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7Y2VudGVyQ2hhbm5lbEVsZW1lbnRzfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGhlbWUtZWxlbWVudHMgcm93IGZvcm0tZ3JvdXAnPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9J2xpbmtBbmRCdXR0b25TdHlsZXNIZWFkZXInXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3RoZW1lLWVsZW1lbnRzX19oZWFkZXInXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnRvZ2dsZUxpbmtBbmRCdXR0b25TdHlsZXN9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuY3VzdG9tX3RoZW1lLmxpbmtCdXR0b25UaXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTGluayBhbmQgQnV0dG9uIFN0eWxlcydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naGVhZGVyX19pY29uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXBsdXMnLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLW1pbnVzJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0nbGlua0FuZEJ1dHRvblN0eWxlcydcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndGhlbWUtZWxlbWVudHNfX2JvZHknXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5rQW5kQnV0dG9uRWxlbWVudHN9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyb3cnPlxuICAgICAgICAgICAgICAgICAgICB7cGFzdGVCb3h9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbkN1c3RvbVRoZW1lQ2hvb3Nlci5wcm9wVHlwZXMgPSB7XG4gICAgaW50bDogaW50bFNoYXBlLmlzUmVxdWlyZWQsXG4gICAgdGhlbWU6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICB1cGRhdGVUaGVtZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxufTtcblxuZXhwb3J0IGRlZmF1bHQgaW5qZWN0SW50bChDdXN0b21UaGVtZUNob29zZXIpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvdXNlcl9zZXR0aW5ncy9jdXN0b21fdGhlbWVfY2hvb3Nlci5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFyRkE7QUFoQkE7QUFDQTtBQTBHQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBcUJBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUEvQkE7QUFpQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUEzREE7QUE2REE7QUFDQTtBQUNBO0FBL0RBO0FBdUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVFQTtBQThFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuRkE7QUFxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMUZBO0FBcUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBUkE7QUFXQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBNkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFRQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBQ0E7QUFXQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBTkE7QUFYQTtBQUxBO0FBK0JBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBSkE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUpBO0FBWUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFKQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUEE7QUFDQTtBQWlCQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBVEE7QUFjQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBZkE7QUFzQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQVRBO0FBY0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQWZBO0FBc0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFUQTtBQWNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBSkE7QUFmQTtBQXNCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBbkVBO0FBd0VBOzs7QUEzVEE7QUFDQTtBQTZUQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2532\n");

/***/ }),

/***/ 2533:
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*!\n * Bootstrap Colorpicker v2.5.2\n * https://itsjavi.com/bootstrap-colorpicker/\n *\n * Originally written by (c) 2012 Stefan Petre\n * Licensed under the Apache License v2.0\n * http://www.apache.org/licenses/LICENSE-2.0.txt\n *\n */\n\n(function(root, factory) {\n  if (true) {\n    // AMD. Register as an anonymous module unless amdModuleId is set\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0)], __WEBPACK_AMD_DEFINE_RESULT__ = function(jq) {\n      return (factory(jq));\n    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like Node.\n    module.exports = factory(require(\"jquery\"));\n  } else if (jQuery && !jQuery.fn.colorpicker) {\n    factory(jQuery);\n  }\n}(this, function($) {\n  'use strict';\n  /**\n   * Color manipulation helper class\n   *\n   * @param {Object|String} [val]\n   * @param {Object} [predefinedColors]\n   * @param {String|null} [fallbackColor]\n   * @param {String|null} [fallbackFormat]\n   * @param {Boolean} [hexNumberSignPrefix]\n   * @constructor\n   */\n  var Color = function(\n    val, predefinedColors, fallbackColor, fallbackFormat, hexNumberSignPrefix) {\n    this.fallbackValue = fallbackColor ?\n      (\n        fallbackColor && (typeof fallbackColor.h !== 'undefined') ?\n        fallbackColor :\n        this.value = {\n          h: 0,\n          s: 0,\n          b: 0,\n          a: 1\n        }\n      ) :\n      null;\n\n    this.fallbackFormat = fallbackFormat ? fallbackFormat : 'rgba';\n\n    this.hexNumberSignPrefix = hexNumberSignPrefix === true;\n\n    this.value = this.fallbackValue;\n\n    this.origFormat = null; // original string format\n\n    this.predefinedColors = predefinedColors ? predefinedColors : {};\n\n    // We don't want to share aliases across instances so we extend new object\n    this.colors = $.extend({}, Color.webColors, this.predefinedColors);\n\n    if (val) {\n      if (typeof val.h !== 'undefined') {\n        this.value = val;\n      } else {\n        this.setColor(String(val));\n      }\n    }\n\n    if (!this.value) {\n      // Initial value is always black if no arguments are passed or val is empty\n      this.value = {\n        h: 0,\n        s: 0,\n        b: 0,\n        a: 1\n      };\n    }\n  };\n\n  Color.webColors = { // 140 predefined colors from the HTML Colors spec\n    \"aliceblue\": \"f0f8ff\",\n    \"antiquewhite\": \"faebd7\",\n    \"aqua\": \"00ffff\",\n    \"aquamarine\": \"7fffd4\",\n    \"azure\": \"f0ffff\",\n    \"beige\": \"f5f5dc\",\n    \"bisque\": \"ffe4c4\",\n    \"black\": \"000000\",\n    \"blanchedalmond\": \"ffebcd\",\n    \"blue\": \"0000ff\",\n    \"blueviolet\": \"8a2be2\",\n    \"brown\": \"a52a2a\",\n    \"burlywood\": \"deb887\",\n    \"cadetblue\": \"5f9ea0\",\n    \"chartreuse\": \"7fff00\",\n    \"chocolate\": \"d2691e\",\n    \"coral\": \"ff7f50\",\n    \"cornflowerblue\": \"6495ed\",\n    \"cornsilk\": \"fff8dc\",\n    \"crimson\": \"dc143c\",\n    \"cyan\": \"00ffff\",\n    \"darkblue\": \"00008b\",\n    \"darkcyan\": \"008b8b\",\n    \"darkgoldenrod\": \"b8860b\",\n    \"darkgray\": \"a9a9a9\",\n    \"darkgreen\": \"006400\",\n    \"darkkhaki\": \"bdb76b\",\n    \"darkmagenta\": \"8b008b\",\n    \"darkolivegreen\": \"556b2f\",\n    \"darkorange\": \"ff8c00\",\n    \"darkorchid\": \"9932cc\",\n    \"darkred\": \"8b0000\",\n    \"darksalmon\": \"e9967a\",\n    \"darkseagreen\": \"8fbc8f\",\n    \"darkslateblue\": \"483d8b\",\n    \"darkslategray\": \"2f4f4f\",\n    \"darkturquoise\": \"00ced1\",\n    \"darkviolet\": \"9400d3\",\n    \"deeppink\": \"ff1493\",\n    \"deepskyblue\": \"00bfff\",\n    \"dimgray\": \"696969\",\n    \"dodgerblue\": \"1e90ff\",\n    \"firebrick\": \"b22222\",\n    \"floralwhite\": \"fffaf0\",\n    \"forestgreen\": \"228b22\",\n    \"fuchsia\": \"ff00ff\",\n    \"gainsboro\": \"dcdcdc\",\n    \"ghostwhite\": \"f8f8ff\",\n    \"gold\": \"ffd700\",\n    \"goldenrod\": \"daa520\",\n    \"gray\": \"808080\",\n    \"green\": \"008000\",\n    \"greenyellow\": \"adff2f\",\n    \"honeydew\": \"f0fff0\",\n    \"hotpink\": \"ff69b4\",\n    \"indianred\": \"cd5c5c\",\n    \"indigo\": \"4b0082\",\n    \"ivory\": \"fffff0\",\n    \"khaki\": \"f0e68c\",\n    \"lavender\": \"e6e6fa\",\n    \"lavenderblush\": \"fff0f5\",\n    \"lawngreen\": \"7cfc00\",\n    \"lemonchiffon\": \"fffacd\",\n    \"lightblue\": \"add8e6\",\n    \"lightcoral\": \"f08080\",\n    \"lightcyan\": \"e0ffff\",\n    \"lightgoldenrodyellow\": \"fafad2\",\n    \"lightgrey\": \"d3d3d3\",\n    \"lightgreen\": \"90ee90\",\n    \"lightpink\": \"ffb6c1\",\n    \"lightsalmon\": \"ffa07a\",\n    \"lightseagreen\": \"20b2aa\",\n    \"lightskyblue\": \"87cefa\",\n    \"lightslategray\": \"778899\",\n    \"lightsteelblue\": \"b0c4de\",\n    \"lightyellow\": \"ffffe0\",\n    \"lime\": \"00ff00\",\n    \"limegreen\": \"32cd32\",\n    \"linen\": \"faf0e6\",\n    \"magenta\": \"ff00ff\",\n    \"maroon\": \"800000\",\n    \"mediumaquamarine\": \"66cdaa\",\n    \"mediumblue\": \"0000cd\",\n    \"mediumorchid\": \"ba55d3\",\n    \"mediumpurple\": \"9370d8\",\n    \"mediumseagreen\": \"3cb371\",\n    \"mediumslateblue\": \"7b68ee\",\n    \"mediumspringgreen\": \"00fa9a\",\n    \"mediumturquoise\": \"48d1cc\",\n    \"mediumvioletred\": \"c71585\",\n    \"midnightblue\": \"191970\",\n    \"mintcream\": \"f5fffa\",\n    \"mistyrose\": \"ffe4e1\",\n    \"moccasin\": \"ffe4b5\",\n    \"navajowhite\": \"ffdead\",\n    \"navy\": \"000080\",\n    \"oldlace\": \"fdf5e6\",\n    \"olive\": \"808000\",\n    \"olivedrab\": \"6b8e23\",\n    \"orange\": \"ffa500\",\n    \"orangered\": \"ff4500\",\n    \"orchid\": \"da70d6\",\n    \"palegoldenrod\": \"eee8aa\",\n    \"palegreen\": \"98fb98\",\n    \"paleturquoise\": \"afeeee\",\n    \"palevioletred\": \"d87093\",\n    \"papayawhip\": \"ffefd5\",\n    \"peachpuff\": \"ffdab9\",\n    \"peru\": \"cd853f\",\n    \"pink\": \"ffc0cb\",\n    \"plum\": \"dda0dd\",\n    \"powderblue\": \"b0e0e6\",\n    \"purple\": \"800080\",\n    \"red\": \"ff0000\",\n    \"rosybrown\": \"bc8f8f\",\n    \"royalblue\": \"4169e1\",\n    \"saddlebrown\": \"8b4513\",\n    \"salmon\": \"fa8072\",\n    \"sandybrown\": \"f4a460\",\n    \"seagreen\": \"2e8b57\",\n    \"seashell\": \"fff5ee\",\n    \"sienna\": \"a0522d\",\n    \"silver\": \"c0c0c0\",\n    \"skyblue\": \"87ceeb\",\n    \"slateblue\": \"6a5acd\",\n    \"slategray\": \"708090\",\n    \"snow\": \"fffafa\",\n    \"springgreen\": \"00ff7f\",\n    \"steelblue\": \"4682b4\",\n    \"tan\": \"d2b48c\",\n    \"teal\": \"008080\",\n    \"thistle\": \"d8bfd8\",\n    \"tomato\": \"ff6347\",\n    \"turquoise\": \"40e0d0\",\n    \"violet\": \"ee82ee\",\n    \"wheat\": \"f5deb3\",\n    \"white\": \"ffffff\",\n    \"whitesmoke\": \"f5f5f5\",\n    \"yellow\": \"ffff00\",\n    \"yellowgreen\": \"9acd32\",\n    \"transparent\": \"transparent\"\n  };\n\n  Color.prototype = {\n    constructor: Color,\n    colors: {}, // merged web and predefined colors\n    predefinedColors: {},\n    /**\n     * @return {Object}\n     */\n    getValue: function() {\n      return this.value;\n    },\n    /**\n     * @param {Object} val\n     */\n    setValue: function(val) {\n      this.value = val;\n    },\n    _sanitizeNumber: function(val) {\n      if (typeof val === 'number') {\n        return val;\n      }\n      if (isNaN(val) || (val === null) || (val === '') || (val === undefined)) {\n        return 1;\n      }\n      if (val === '') {\n        return 0;\n      }\n      if (typeof val.toLowerCase !== 'undefined') {\n        if (val.match(/^\\./)) {\n          val = \"0\" + val;\n        }\n        return Math.ceil(parseFloat(val) * 100) / 100;\n      }\n      return 1;\n    },\n    isTransparent: function(strVal) {\n      if (!strVal || !(typeof strVal === 'string' || strVal instanceof String)) {\n        return false;\n      }\n      strVal = strVal.toLowerCase().trim();\n      return (strVal === 'transparent') || (strVal.match(/#?00000000/)) || (strVal.match(/(rgba|hsla)\\(0,0,0,0?\\.?0\\)/));\n    },\n    rgbaIsTransparent: function(rgba) {\n      return ((rgba.r === 0) && (rgba.g === 0) && (rgba.b === 0) && (rgba.a === 0));\n    },\n    // parse a string to HSB\n    /**\n     * @protected\n     * @param {String} strVal\n     * @returns {boolean} Returns true if it could be parsed, false otherwise\n     */\n    setColor: function(strVal) {\n      strVal = strVal.toLowerCase().trim();\n      if (strVal) {\n        if (this.isTransparent(strVal)) {\n          this.value = {\n            h: 0,\n            s: 0,\n            b: 0,\n            a: 0\n          };\n          return true;\n        } else {\n          var parsedColor = this.parse(strVal);\n          if (parsedColor) {\n            this.value = this.value = {\n              h: parsedColor.h,\n              s: parsedColor.s,\n              b: parsedColor.b,\n              a: parsedColor.a\n            };\n            if (!this.origFormat) {\n              this.origFormat = parsedColor.format;\n            }\n          } else if (this.fallbackValue) {\n            // if parser fails, defaults to fallbackValue if defined, otherwise the value won't be changed\n            this.value = this.fallbackValue;\n          }\n        }\n      }\n      return false;\n    },\n    setHue: function(h) {\n      this.value.h = 1 - h;\n    },\n    setSaturation: function(s) {\n      this.value.s = s;\n    },\n    setBrightness: function(b) {\n      this.value.b = 1 - b;\n    },\n    setAlpha: function(a) {\n      this.value.a = Math.round((parseInt((1 - a) * 100, 10) / 100) * 100) / 100;\n    },\n    toRGB: function(h, s, b, a) {\n      if (arguments.length === 0) {\n        h = this.value.h;\n        s = this.value.s;\n        b = this.value.b;\n        a = this.value.a;\n      }\n\n      h *= 360;\n      var R, G, B, X, C;\n      h = (h % 360) / 60;\n      C = b * s;\n      X = C * (1 - Math.abs(h % 2 - 1));\n      R = G = B = b - C;\n\n      h = ~~h;\n      R += [C, X, 0, 0, X, C][h];\n      G += [X, C, C, X, 0, 0][h];\n      B += [0, 0, X, C, C, X][h];\n\n      return {\n        r: Math.round(R * 255),\n        g: Math.round(G * 255),\n        b: Math.round(B * 255),\n        a: a\n      };\n    },\n    toHex: function(ignoreFormat, h, s, b, a) {\n      if (arguments.length <= 1) {\n        h = this.value.h;\n        s = this.value.s;\n        b = this.value.b;\n        a = this.value.a;\n      }\n\n      var prefix = '#';\n      var rgb = this.toRGB(h, s, b, a);\n\n      if (this.rgbaIsTransparent(rgb)) {\n        return 'transparent';\n      }\n\n      if (!ignoreFormat) {\n        prefix = (this.hexNumberSignPrefix ? '#' : '');\n      }\n\n      var hexStr = prefix + (\n          (1 << 24) +\n          (parseInt(rgb.r) << 16) +\n          (parseInt(rgb.g) << 8) +\n          parseInt(rgb.b))\n        .toString(16)\n        .slice(1);\n\n      return hexStr;\n    },\n    toHSL: function(h, s, b, a) {\n      if (arguments.length === 0) {\n        h = this.value.h;\n        s = this.value.s;\n        b = this.value.b;\n        a = this.value.a;\n      }\n\n      var H = h,\n        L = (2 - s) * b,\n        S = s * b;\n      if (L > 0 && L <= 1) {\n        S /= L;\n      } else {\n        S /= 2 - L;\n      }\n      L /= 2;\n      if (S > 1) {\n        S = 1;\n      }\n      return {\n        h: isNaN(H) ? 0 : H,\n        s: isNaN(S) ? 0 : S,\n        l: isNaN(L) ? 0 : L,\n        a: isNaN(a) ? 0 : a\n      };\n    },\n    toAlias: function(r, g, b, a) {\n      var c, rgb = (arguments.length === 0) ? this.toHex(true) : this.toHex(true, r, g, b, a);\n\n      // support predef. colors in non-hex format too, as defined in the alias itself\n      var original = this.origFormat === 'alias' ? rgb : this.toString(false, this.origFormat);\n\n      for (var alias in this.colors) {\n        c = this.colors[alias].toLowerCase().trim();\n        if ((c === rgb) || (c === original)) {\n          return alias;\n        }\n      }\n      return false;\n    },\n    RGBtoHSB: function(r, g, b, a) {\n      r /= 255;\n      g /= 255;\n      b /= 255;\n\n      var H, S, V, C;\n      V = Math.max(r, g, b);\n      C = V - Math.min(r, g, b);\n      H = (C === 0 ? null :\n        V === r ? (g - b) / C :\n        V === g ? (b - r) / C + 2 :\n        (r - g) / C + 4\n      );\n      H = ((H + 360) % 6) * 60 / 360;\n      S = C === 0 ? 0 : C / V;\n      return {\n        h: this._sanitizeNumber(H),\n        s: S,\n        b: V,\n        a: this._sanitizeNumber(a)\n      };\n    },\n    HueToRGB: function(p, q, h) {\n      if (h < 0) {\n        h += 1;\n      } else if (h > 1) {\n        h -= 1;\n      }\n      if ((h * 6) < 1) {\n        return p + (q - p) * h * 6;\n      } else if ((h * 2) < 1) {\n        return q;\n      } else if ((h * 3) < 2) {\n        return p + (q - p) * ((2 / 3) - h) * 6;\n      } else {\n        return p;\n      }\n    },\n    HSLtoRGB: function(h, s, l, a) {\n      if (s < 0) {\n        s = 0;\n      }\n      var q;\n      if (l <= 0.5) {\n        q = l * (1 + s);\n      } else {\n        q = l + s - (l * s);\n      }\n\n      var p = 2 * l - q;\n\n      var tr = h + (1 / 3);\n      var tg = h;\n      var tb = h - (1 / 3);\n\n      var r = Math.round(this.HueToRGB(p, q, tr) * 255);\n      var g = Math.round(this.HueToRGB(p, q, tg) * 255);\n      var b = Math.round(this.HueToRGB(p, q, tb) * 255);\n      return [r, g, b, this._sanitizeNumber(a)];\n    },\n    /**\n     * @param {String} strVal\n     * @returns {Object} Object containing h,s,b,a,format properties or FALSE if failed to parse\n     */\n    parse: function(strVal) {\n      if (arguments.length === 0) {\n        return false;\n      }\n\n      var that = this,\n        result = false,\n        isAlias = (typeof this.colors[strVal] !== 'undefined'),\n        values, format;\n\n      if (isAlias) {\n        strVal = this.colors[strVal].toLowerCase().trim();\n      }\n\n      $.each(this.stringParsers, function(i, parser) {\n        var match = parser.re.exec(strVal);\n        values = match && parser.parse.apply(that, [match]);\n        if (values) {\n          result = {};\n          format = (isAlias ? 'alias' : (parser.format ? parser.format : that.getValidFallbackFormat()));\n          if (format.match(/hsla?/)) {\n            result = that.RGBtoHSB.apply(that, that.HSLtoRGB.apply(that, values));\n          } else {\n            result = that.RGBtoHSB.apply(that, values);\n          }\n          if (result instanceof Object) {\n            result.format = format;\n          }\n          return false; // stop iterating\n        }\n        return true;\n      });\n      return result;\n    },\n    getValidFallbackFormat: function() {\n      var formats = [\n        'rgba', 'rgb', 'hex', 'hsla', 'hsl'\n      ];\n      if (this.origFormat && (formats.indexOf(this.origFormat) !== -1)) {\n        return this.origFormat;\n      }\n      if (this.fallbackFormat && (formats.indexOf(this.fallbackFormat) !== -1)) {\n        return this.fallbackFormat;\n      }\n\n      return 'rgba'; // By default, return a format that will not lose the alpha info\n    },\n    /**\n     *\n     * @param {string} [format] (default: rgba)\n     * @param {boolean} [translateAlias] Return real color for pre-defined (non-standard) aliases (default: false)\n     * @param {boolean} [forceRawValue] Forces hashtag prefix when getting hex color (default: false)\n     * @returns {String}\n     */\n    toString: function(forceRawValue, format, translateAlias) {\n      format = format || this.origFormat || this.fallbackFormat;\n      translateAlias = translateAlias || false;\n\n      var c = false;\n\n      switch (format) {\n        case 'rgb':\n          {\n            c = this.toRGB();\n            if (this.rgbaIsTransparent(c)) {\n              return 'transparent';\n            }\n            return 'rgb(' + c.r + ',' + c.g + ',' + c.b + ')';\n          }\n          break;\n        case 'rgba':\n          {\n            c = this.toRGB();\n            return 'rgba(' + c.r + ',' + c.g + ',' + c.b + ',' + c.a + ')';\n          }\n          break;\n        case 'hsl':\n          {\n            c = this.toHSL();\n            return 'hsl(' + Math.round(c.h * 360) + ',' + Math.round(c.s * 100) + '%,' + Math.round(c.l * 100) + '%)';\n          }\n          break;\n        case 'hsla':\n          {\n            c = this.toHSL();\n            return 'hsla(' + Math.round(c.h * 360) + ',' + Math.round(c.s * 100) + '%,' + Math.round(c.l * 100) + '%,' + c.a + ')';\n          }\n          break;\n        case 'hex':\n          {\n            return this.toHex(forceRawValue);\n          }\n          break;\n        case 'alias':\n          {\n            c = this.toAlias();\n\n            if (c === false) {\n              return this.toString(forceRawValue, this.getValidFallbackFormat());\n            }\n\n            if (translateAlias && !(c in Color.webColors) && (c in this.predefinedColors)) {\n              return this.predefinedColors[c];\n            }\n\n            return c;\n          }\n        default:\n          {\n            return c;\n          }\n          break;\n      }\n    },\n    // a set of RE's that can match strings and generate color tuples.\n    // from John Resig color plugin\n    // https://github.com/jquery/jquery-color/\n    stringParsers: [{\n      re: /rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*?\\)/,\n      format: 'rgb',\n      parse: function(execResult) {\n        return [\n          execResult[1],\n          execResult[2],\n          execResult[3],\n          1\n        ];\n      }\n    }, {\n      re: /rgb\\(\\s*(\\d*(?:\\.\\d+)?)\\%\\s*,\\s*(\\d*(?:\\.\\d+)?)\\%\\s*,\\s*(\\d*(?:\\.\\d+)?)\\%\\s*?\\)/,\n      format: 'rgb',\n      parse: function(execResult) {\n        return [\n          2.55 * execResult[1],\n          2.55 * execResult[2],\n          2.55 * execResult[3],\n          1\n        ];\n      }\n    }, {\n      re: /rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d*(?:\\.\\d+)?)\\s*)?\\)/,\n      format: 'rgba',\n      parse: function(execResult) {\n        return [\n          execResult[1],\n          execResult[2],\n          execResult[3],\n          execResult[4]\n        ];\n      }\n    }, {\n      re: /rgba\\(\\s*(\\d*(?:\\.\\d+)?)\\%\\s*,\\s*(\\d*(?:\\.\\d+)?)\\%\\s*,\\s*(\\d*(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d*(?:\\.\\d+)?)\\s*)?\\)/,\n      format: 'rgba',\n      parse: function(execResult) {\n        return [\n          2.55 * execResult[1],\n          2.55 * execResult[2],\n          2.55 * execResult[3],\n          execResult[4]\n        ];\n      }\n    }, {\n      re: /hsl\\(\\s*(\\d*(?:\\.\\d+)?)\\s*,\\s*(\\d*(?:\\.\\d+)?)\\%\\s*,\\s*(\\d*(?:\\.\\d+)?)\\%\\s*?\\)/,\n      format: 'hsl',\n      parse: function(execResult) {\n        return [\n          execResult[1] / 360,\n          execResult[2] / 100,\n          execResult[3] / 100,\n          execResult[4]\n        ];\n      }\n    }, {\n      re: /hsla\\(\\s*(\\d*(?:\\.\\d+)?)\\s*,\\s*(\\d*(?:\\.\\d+)?)\\%\\s*,\\s*(\\d*(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d*(?:\\.\\d+)?)\\s*)?\\)/,\n      format: 'hsla',\n      parse: function(execResult) {\n        return [\n          execResult[1] / 360,\n          execResult[2] / 100,\n          execResult[3] / 100,\n          execResult[4]\n        ];\n      }\n    }, {\n      re: /#?([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,\n      format: 'hex',\n      parse: function(execResult) {\n        return [\n          parseInt(execResult[1], 16),\n          parseInt(execResult[2], 16),\n          parseInt(execResult[3], 16),\n          1\n        ];\n      }\n    }, {\n      re: /#?([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,\n      format: 'hex',\n      parse: function(execResult) {\n        return [\n          parseInt(execResult[1] + execResult[1], 16),\n          parseInt(execResult[2] + execResult[2], 16),\n          parseInt(execResult[3] + execResult[3], 16),\n          1\n        ];\n      }\n    }],\n    colorNameToHex: function(name) {\n      if (typeof this.colors[name.toLowerCase()] !== 'undefined') {\n        return this.colors[name.toLowerCase()];\n      }\n      return false;\n    }\n  };\n\n  /*\n   * Default plugin options\n   */\n  var defaults = {\n    horizontal: false, // horizontal mode layout ?\n    inline: false, //forces to show the colorpicker as an inline element\n    color: false, //forces a color\n    format: false, //forces a format\n    input: 'input', // children input selector\n    container: false, // container selector\n    component: '.add-on, .input-group-addon', // children component selector\n    fallbackColor: false, // fallback color value. null = keeps current color.\n    fallbackFormat: 'hex', // fallback color format\n    hexNumberSignPrefix: true, // put a '#' (number sign) before hex strings\n    sliders: {\n      saturation: {\n        maxLeft: 100,\n        maxTop: 100,\n        callLeft: 'setSaturation',\n        callTop: 'setBrightness'\n      },\n      hue: {\n        maxLeft: 0,\n        maxTop: 100,\n        callLeft: false,\n        callTop: 'setHue'\n      },\n      alpha: {\n        maxLeft: 0,\n        maxTop: 100,\n        callLeft: false,\n        callTop: 'setAlpha'\n      }\n    },\n    slidersHorz: {\n      saturation: {\n        maxLeft: 100,\n        maxTop: 100,\n        callLeft: 'setSaturation',\n        callTop: 'setBrightness'\n      },\n      hue: {\n        maxLeft: 100,\n        maxTop: 0,\n        callLeft: 'setHue',\n        callTop: false\n      },\n      alpha: {\n        maxLeft: 100,\n        maxTop: 0,\n        callLeft: 'setAlpha',\n        callTop: false\n      }\n    },\n    template: '<div class=\"colorpicker dropdown-menu\">' +\n      '<div class=\"colorpicker-saturation\"><i><b></b></i></div>' +\n      '<div class=\"colorpicker-hue\"><i></i></div>' +\n      '<div class=\"colorpicker-alpha\"><i></i></div>' +\n      '<div class=\"colorpicker-color\"><div /></div>' +\n      '<div class=\"colorpicker-selectors\"></div>' +\n      '</div>',\n    align: 'right',\n    customClass: null, // custom class added to the colorpicker element\n    colorSelectors: null // custom color aliases\n  };\n\n  /**\n   * Colorpicker component class\n   *\n   * @param {Object|String} element\n   * @param {Object} options\n   * @constructor\n   */\n  var Colorpicker = function(element, options) {\n    this.element = $(element).addClass('colorpicker-element');\n    this.options = $.extend(true, {}, defaults, this.element.data(), options);\n    this.component = this.options.component;\n    this.component = (this.component !== false) ? this.element.find(this.component) : false;\n    if (this.component && (this.component.length === 0)) {\n      this.component = false;\n    }\n    this.container = (this.options.container === true) ? this.element : this.options.container;\n    this.container = (this.container !== false) ? $(this.container) : false;\n\n    // Is the element an input? Should we search inside for any input?\n    this.input = this.element.is('input') ? this.element : (this.options.input ?\n      this.element.find(this.options.input) : false);\n    if (this.input && (this.input.length === 0)) {\n      this.input = false;\n    }\n    // Set HSB color\n    this.color = this.createColor(this.options.color !== false ? this.options.color : this.getValue());\n\n    this.format = this.options.format !== false ? this.options.format : this.color.origFormat;\n\n    if (this.options.color !== false) {\n      this.updateInput(this.color);\n      this.updateData(this.color);\n    }\n\n    this.disabled = false;\n\n    // Setup picker\n    var $picker = this.picker = $(this.options.template);\n    if (this.options.customClass) {\n      $picker.addClass(this.options.customClass);\n    }\n    if (this.options.inline) {\n      $picker.addClass('colorpicker-inline colorpicker-visible');\n    } else {\n      $picker.addClass('colorpicker-hidden');\n    }\n    if (this.options.horizontal) {\n      $picker.addClass('colorpicker-horizontal');\n    }\n    if (\n      (['rgba', 'hsla', 'alias'].indexOf(this.format) !== -1) ||\n      this.options.format === false ||\n      this.getValue() === 'transparent'\n    ) {\n      $picker.addClass('colorpicker-with-alpha');\n    }\n    if (this.options.align === 'right') {\n      $picker.addClass('colorpicker-right');\n    }\n    if (this.options.inline === true) {\n      $picker.addClass('colorpicker-no-arrow');\n    }\n    if (this.options.colorSelectors) {\n      var colorpicker = this,\n        selectorsContainer = colorpicker.picker.find('.colorpicker-selectors');\n\n      if (selectorsContainer.length > 0) {\n        $.each(this.options.colorSelectors, function(name, color) {\n          var $btn = $('<i />')\n            .addClass('colorpicker-selectors-color')\n            .css('background-color', color)\n            .data('class', name).data('alias', name);\n\n          $btn.on('mousedown.colorpicker touchstart.colorpicker', function(event) {\n            event.preventDefault();\n            colorpicker.setValue(\n              colorpicker.format === 'alias' ? $(this).data('alias') : $(this).css('background-color')\n            );\n          });\n          selectorsContainer.append($btn);\n        });\n        selectorsContainer.show().addClass('colorpicker-visible');\n      }\n    }\n\n    // Prevent closing the colorpicker when clicking on itself\n    $picker.on('mousedown.colorpicker touchstart.colorpicker', $.proxy(function(e) {\n      if (e.target === e.currentTarget) {\n        e.preventDefault();\n      }\n    }, this));\n\n    // Bind click/tap events on the sliders\n    $picker.find('.colorpicker-saturation, .colorpicker-hue, .colorpicker-alpha')\n      .on('mousedown.colorpicker touchstart.colorpicker', $.proxy(this.mousedown, this));\n\n    $picker.appendTo(this.container ? this.container : $('body'));\n\n    // Bind other events\n    if (this.input !== false) {\n      this.input.on({\n        'keyup.colorpicker': $.proxy(this.keyup, this)\n      });\n      this.input.on({\n        'change.colorpicker': $.proxy(this.change, this)\n      });\n      if (this.component === false) {\n        this.element.on({\n          'focus.colorpicker': $.proxy(this.show, this)\n        });\n      }\n      if (this.options.inline === false) {\n        this.element.on({\n          'focusout.colorpicker': $.proxy(this.hide, this)\n        });\n      }\n    }\n\n    if (this.component !== false) {\n      this.component.on({\n        'click.colorpicker': $.proxy(this.show, this)\n      });\n    }\n\n    if ((this.input === false) && (this.component === false)) {\n      this.element.on({\n        'click.colorpicker': $.proxy(this.show, this)\n      });\n    }\n\n    // for HTML5 input[type='color']\n    if ((this.input !== false) && (this.component !== false) && (this.input.attr('type') === 'color')) {\n\n      this.input.on({\n        'click.colorpicker': $.proxy(this.show, this),\n        'focus.colorpicker': $.proxy(this.show, this)\n      });\n    }\n    this.update();\n\n    $($.proxy(function() {\n      this.element.trigger('create');\n    }, this));\n  };\n\n  Colorpicker.Color = Color;\n\n  Colorpicker.prototype = {\n    constructor: Colorpicker,\n    destroy: function() {\n      this.picker.remove();\n      this.element.removeData('colorpicker', 'color').off('.colorpicker');\n      if (this.input !== false) {\n        this.input.off('.colorpicker');\n      }\n      if (this.component !== false) {\n        this.component.off('.colorpicker');\n      }\n      this.element.removeClass('colorpicker-element');\n      this.element.trigger({\n        type: 'destroy'\n      });\n    },\n    reposition: function() {\n      if (this.options.inline !== false || this.options.container) {\n        return false;\n      }\n      var type = this.container && this.container[0] !== window.document.body ? 'position' : 'offset';\n      var element = this.component || this.element;\n      var offset = element[type]();\n      if (this.options.align === 'right') {\n        offset.left -= this.picker.outerWidth() - element.outerWidth();\n      }\n      this.picker.css({\n        top: offset.top + element.outerHeight(),\n        left: offset.left\n      });\n    },\n    show: function(e) {\n      if (this.isDisabled()) {\n        // Don't show the widget if it's disabled (the input)\n        return;\n      }\n      this.picker.addClass('colorpicker-visible').removeClass('colorpicker-hidden');\n      this.reposition();\n      $(window).on('resize.colorpicker', $.proxy(this.reposition, this));\n      if (e && (!this.hasInput() || this.input.attr('type') === 'color')) {\n        if (e.stopPropagation && e.preventDefault) {\n          e.stopPropagation();\n          e.preventDefault();\n        }\n      }\n      if ((this.component || !this.input) && (this.options.inline === false)) {\n        $(window.document).on({\n          'mousedown.colorpicker': $.proxy(this.hide, this)\n        });\n      }\n      this.element.trigger({\n        type: 'showPicker',\n        color: this.color\n      });\n    },\n    hide: function(e) {\n      if ((typeof e !== 'undefined') && e.target) {\n        // Prevent hide if triggered by an event and an element inside the colorpicker has been clicked/touched\n        if (\n          $(e.currentTarget).parents('.colorpicker').length > 0 ||\n          $(e.target).parents('.colorpicker').length > 0\n        ) {\n          return false;\n        }\n      }\n      this.picker.addClass('colorpicker-hidden').removeClass('colorpicker-visible');\n      $(window).off('resize.colorpicker', this.reposition);\n      $(window.document).off({\n        'mousedown.colorpicker': this.hide\n      });\n      this.update();\n      this.element.trigger({\n        type: 'hidePicker',\n        color: this.color\n      });\n    },\n    updateData: function(val) {\n      val = val || this.color.toString(false, this.format);\n      this.element.data('color', val);\n      return val;\n    },\n    updateInput: function(val) {\n      val = val || this.color.toString(false, this.format);\n      if (this.input !== false) {\n        this.input.prop('value', val);\n        this.input.trigger('change');\n      }\n      return val;\n    },\n    updatePicker: function(val) {\n      if (typeof val !== 'undefined') {\n        this.color = this.createColor(val);\n      }\n      var sl = (this.options.horizontal === false) ? this.options.sliders : this.options.slidersHorz;\n      var icns = this.picker.find('i');\n      if (icns.length === 0) {\n        return;\n      }\n      if (this.options.horizontal === false) {\n        sl = this.options.sliders;\n        icns.eq(1).css('top', sl.hue.maxTop * (1 - this.color.value.h)).end()\n          .eq(2).css('top', sl.alpha.maxTop * (1 - this.color.value.a));\n      } else {\n        sl = this.options.slidersHorz;\n        icns.eq(1).css('left', sl.hue.maxLeft * (1 - this.color.value.h)).end()\n          .eq(2).css('left', sl.alpha.maxLeft * (1 - this.color.value.a));\n      }\n      icns.eq(0).css({\n        'top': sl.saturation.maxTop - this.color.value.b * sl.saturation.maxTop,\n        'left': this.color.value.s * sl.saturation.maxLeft\n      });\n\n      this.picker.find('.colorpicker-saturation')\n        .css('backgroundColor', this.color.toHex(true, this.color.value.h, 1, 1, 1));\n\n      this.picker.find('.colorpicker-alpha')\n        .css('backgroundColor', this.color.toHex(true));\n\n      this.picker.find('.colorpicker-color, .colorpicker-color div')\n        .css('backgroundColor', this.color.toString(true, this.format));\n\n      return val;\n    },\n    updateComponent: function(val) {\n      var color;\n\n      if (typeof val !== 'undefined') {\n        color = this.createColor(val);\n      } else {\n        color = this.color;\n      }\n\n      if (this.component !== false) {\n        var icn = this.component.find('i').eq(0);\n        if (icn.length > 0) {\n          icn.css({\n            'backgroundColor': color.toString(true, this.format)\n          });\n        } else {\n          this.component.css({\n            'backgroundColor': color.toString(true, this.format)\n          });\n        }\n      }\n\n      return color.toString(false, this.format);\n    },\n    update: function(force) {\n      var val;\n      if ((this.getValue(false) !== false) || (force === true)) {\n        // Update input/data only if the current value is not empty\n        val = this.updateComponent();\n        this.updateInput(val);\n        this.updateData(val);\n        this.updatePicker(); // only update picker if value is not empty\n      }\n      return val;\n\n    },\n    setValue: function(val) { // set color manually\n      this.color = this.createColor(val);\n      this.update(true);\n      this.element.trigger({\n        type: 'changeColor',\n        color: this.color,\n        value: val\n      });\n    },\n    /**\n     * Creates a new color using the instance options\n     * @protected\n     * @param {String} val\n     * @returns {Color}\n     */\n    createColor: function(val) {\n      return new Color(\n        val ? val : null,\n        this.options.colorSelectors,\n        this.options.fallbackColor ? this.options.fallbackColor : this.color,\n        this.options.fallbackFormat,\n        this.options.hexNumberSignPrefix\n      );\n    },\n    getValue: function(defaultValue) {\n      defaultValue = (typeof defaultValue === 'undefined') ? this.options.fallbackColor : defaultValue;\n      var val;\n      if (this.hasInput()) {\n        val = this.input.val();\n      } else {\n        val = this.element.data('color');\n      }\n      if ((val === undefined) || (val === '') || (val === null)) {\n        // if not defined or empty, return default\n        val = defaultValue;\n      }\n      return val;\n    },\n    hasInput: function() {\n      return (this.input !== false);\n    },\n    isDisabled: function() {\n      return this.disabled;\n    },\n    disable: function() {\n      if (this.hasInput()) {\n        this.input.prop('disabled', true);\n      }\n      this.disabled = true;\n      this.element.trigger({\n        type: 'disable',\n        color: this.color,\n        value: this.getValue()\n      });\n      return true;\n    },\n    enable: function() {\n      if (this.hasInput()) {\n        this.input.prop('disabled', false);\n      }\n      this.disabled = false;\n      this.element.trigger({\n        type: 'enable',\n        color: this.color,\n        value: this.getValue()\n      });\n      return true;\n    },\n    currentSlider: null,\n    mousePointer: {\n      left: 0,\n      top: 0\n    },\n    mousedown: function(e) {\n      if (!e.pageX && !e.pageY && e.originalEvent && e.originalEvent.touches) {\n        e.pageX = e.originalEvent.touches[0].pageX;\n        e.pageY = e.originalEvent.touches[0].pageY;\n      }\n      e.stopPropagation();\n      e.preventDefault();\n\n      var target = $(e.target);\n\n      //detect the slider and set the limits and callbacks\n      var zone = target.closest('div');\n      var sl = this.options.horizontal ? this.options.slidersHorz : this.options.sliders;\n      if (!zone.is('.colorpicker')) {\n        if (zone.is('.colorpicker-saturation')) {\n          this.currentSlider = $.extend({}, sl.saturation);\n        } else if (zone.is('.colorpicker-hue')) {\n          this.currentSlider = $.extend({}, sl.hue);\n        } else if (zone.is('.colorpicker-alpha')) {\n          this.currentSlider = $.extend({}, sl.alpha);\n        } else {\n          return false;\n        }\n        var offset = zone.offset();\n        //reference to guide's style\n        this.currentSlider.guide = zone.find('i')[0].style;\n        this.currentSlider.left = e.pageX - offset.left;\n        this.currentSlider.top = e.pageY - offset.top;\n        this.mousePointer = {\n          left: e.pageX,\n          top: e.pageY\n        };\n        //trigger mousemove to move the guide to the current position\n        $(window.document).on({\n          'mousemove.colorpicker': $.proxy(this.mousemove, this),\n          'touchmove.colorpicker': $.proxy(this.mousemove, this),\n          'mouseup.colorpicker': $.proxy(this.mouseup, this),\n          'touchend.colorpicker': $.proxy(this.mouseup, this)\n        }).trigger('mousemove');\n      }\n      return false;\n    },\n    mousemove: function(e) {\n      if (!e.pageX && !e.pageY && e.originalEvent && e.originalEvent.touches) {\n        e.pageX = e.originalEvent.touches[0].pageX;\n        e.pageY = e.originalEvent.touches[0].pageY;\n      }\n      e.stopPropagation();\n      e.preventDefault();\n      var left = Math.max(\n        0,\n        Math.min(\n          this.currentSlider.maxLeft,\n          this.currentSlider.left + ((e.pageX || this.mousePointer.left) - this.mousePointer.left)\n        )\n      );\n      var top = Math.max(\n        0,\n        Math.min(\n          this.currentSlider.maxTop,\n          this.currentSlider.top + ((e.pageY || this.mousePointer.top) - this.mousePointer.top)\n        )\n      );\n      this.currentSlider.guide.left = left + 'px';\n      this.currentSlider.guide.top = top + 'px';\n      if (this.currentSlider.callLeft) {\n        this.color[this.currentSlider.callLeft].call(this.color, left / this.currentSlider.maxLeft);\n      }\n      if (this.currentSlider.callTop) {\n        this.color[this.currentSlider.callTop].call(this.color, top / this.currentSlider.maxTop);\n      }\n      // Change format dynamically\n      // Only occurs if user choose the dynamic format by\n      // setting option format to false\n      if (\n        this.options.format === false &&\n        (this.currentSlider.callTop === 'setAlpha' ||\n          this.currentSlider.callLeft === 'setAlpha')\n      ) {\n\n        // Converting from hex / rgb to rgba\n        if (this.color.value.a !== 1) {\n          this.format = 'rgba';\n          this.color.origFormat = 'rgba';\n        }\n\n        // Converting from rgba to hex\n        else {\n          this.format = 'hex';\n          this.color.origFormat = 'hex';\n        }\n      }\n      this.update(true);\n\n      this.element.trigger({\n        type: 'changeColor',\n        color: this.color\n      });\n      return false;\n    },\n    mouseup: function(e) {\n      e.stopPropagation();\n      e.preventDefault();\n      $(window.document).off({\n        'mousemove.colorpicker': this.mousemove,\n        'touchmove.colorpicker': this.mousemove,\n        'mouseup.colorpicker': this.mouseup,\n        'touchend.colorpicker': this.mouseup\n      });\n      return false;\n    },\n    change: function(e) {\n      this.keyup(e);\n    },\n    keyup: function(e) {\n      if ((e.keyCode === 38)) {\n        if (this.color.value.a < 1) {\n          this.color.value.a = Math.round((this.color.value.a + 0.01) * 100) / 100;\n        }\n        this.update(true);\n      } else if ((e.keyCode === 40)) {\n        if (this.color.value.a > 0) {\n          this.color.value.a = Math.round((this.color.value.a - 0.01) * 100) / 100;\n        }\n        this.update(true);\n      } else {\n        this.color = this.createColor(this.input.val());\n        // Change format dynamically\n        // Only occurs if user choose the dynamic format by\n        // setting option format to false\n        if (this.color.origFormat && this.options.format === false) {\n          this.format = this.color.origFormat;\n        }\n        if (this.getValue(false) !== false) {\n          this.updateData();\n          this.updateComponent();\n          this.updatePicker();\n        }\n      }\n      this.element.trigger({\n        type: 'changeColor',\n        color: this.color,\n        value: this.input.val()\n      });\n    }\n  };\n\n  $.colorpicker = Colorpicker;\n\n  $.fn.colorpicker = function(option) {\n    var apiArgs = Array.prototype.slice.call(arguments, 1),\n      isSingleElement = (this.length === 1),\n      returnValue = null;\n\n    var $jq = this.each(function() {\n      var $this = $(this),\n        inst = $this.data('colorpicker'),\n        options = ((typeof option === 'object') ? option : {});\n\n      if (!inst) {\n        inst = new Colorpicker(this, options);\n        $this.data('colorpicker', inst);\n      }\n\n      if (typeof option === 'string') {\n        if ($.isFunction(inst[option])) {\n          returnValue = inst[option].apply(inst, apiArgs);\n        } else { // its a property ?\n          if (apiArgs.length) {\n            // set property\n            inst[option] = apiArgs[0];\n          }\n          returnValue = inst[option];\n        }\n      } else {\n        returnValue = $this;\n      }\n    });\n    return isSingleElement ? returnValue : $jq;\n  };\n\n  $.fn.colorpicker.constructor = Colorpicker;\n\n}));\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9ib290c3RyYXAtY29sb3JwaWNrZXIvZGlzdC9qcy9ib290c3RyYXAtY29sb3JwaWNrZXIuanM/Y2Q1YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuLyohXG4gKiBCb290c3RyYXAgQ29sb3JwaWNrZXIgdjIuNS4yXG4gKiBodHRwczovL2l0c2phdmkuY29tL2Jvb3RzdHJhcC1jb2xvcnBpY2tlci9cbiAqXG4gKiBPcmlnaW5hbGx5IHdyaXR0ZW4gYnkgKGMpIDIwMTIgU3RlZmFuIFBldHJlXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UgdjIuMFxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wLnR4dFxuICpcbiAqL1xuXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlIHVubGVzcyBhbWRNb2R1bGVJZCBpcyBzZXRcbiAgICBkZWZpbmUoW1wianF1ZXJ5XCJdLCBmdW5jdGlvbihqcSkge1xuICAgICAgcmV0dXJuIChmYWN0b3J5KGpxKSk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgLy8gbGlrZSBOb2RlLlxuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwianF1ZXJ5XCIpKTtcbiAgfSBlbHNlIGlmIChqUXVlcnkgJiYgIWpRdWVyeS5mbi5jb2xvcnBpY2tlcikge1xuICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbigkKSB7XG4gICd1c2Ugc3RyaWN0JztcbiAgLyoqXG4gICAqIENvbG9yIG1hbmlwdWxhdGlvbiBoZWxwZXIgY2xhc3NcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBbdmFsXVxuICAgKiBAcGFyYW0ge09iamVjdH0gW3ByZWRlZmluZWRDb2xvcnNdXG4gICAqIEBwYXJhbSB7U3RyaW5nfG51bGx9IFtmYWxsYmFja0NvbG9yXVxuICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSBbZmFsbGJhY2tGb3JtYXRdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2hleE51bWJlclNpZ25QcmVmaXhdXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgdmFyIENvbG9yID0gZnVuY3Rpb24oXG4gICAgdmFsLCBwcmVkZWZpbmVkQ29sb3JzLCBmYWxsYmFja0NvbG9yLCBmYWxsYmFja0Zvcm1hdCwgaGV4TnVtYmVyU2lnblByZWZpeCkge1xuICAgIHRoaXMuZmFsbGJhY2tWYWx1ZSA9IGZhbGxiYWNrQ29sb3IgP1xuICAgICAgKFxuICAgICAgICBmYWxsYmFja0NvbG9yICYmICh0eXBlb2YgZmFsbGJhY2tDb2xvci5oICE9PSAndW5kZWZpbmVkJykgP1xuICAgICAgICBmYWxsYmFja0NvbG9yIDpcbiAgICAgICAgdGhpcy52YWx1ZSA9IHtcbiAgICAgICAgICBoOiAwLFxuICAgICAgICAgIHM6IDAsXG4gICAgICAgICAgYjogMCxcbiAgICAgICAgICBhOiAxXG4gICAgICAgIH1cbiAgICAgICkgOlxuICAgICAgbnVsbDtcblxuICAgIHRoaXMuZmFsbGJhY2tGb3JtYXQgPSBmYWxsYmFja0Zvcm1hdCA/IGZhbGxiYWNrRm9ybWF0IDogJ3JnYmEnO1xuXG4gICAgdGhpcy5oZXhOdW1iZXJTaWduUHJlZml4ID0gaGV4TnVtYmVyU2lnblByZWZpeCA9PT0gdHJ1ZTtcblxuICAgIHRoaXMudmFsdWUgPSB0aGlzLmZhbGxiYWNrVmFsdWU7XG5cbiAgICB0aGlzLm9yaWdGb3JtYXQgPSBudWxsOyAvLyBvcmlnaW5hbCBzdHJpbmcgZm9ybWF0XG5cbiAgICB0aGlzLnByZWRlZmluZWRDb2xvcnMgPSBwcmVkZWZpbmVkQ29sb3JzID8gcHJlZGVmaW5lZENvbG9ycyA6IHt9O1xuXG4gICAgLy8gV2UgZG9uJ3Qgd2FudCB0byBzaGFyZSBhbGlhc2VzIGFjcm9zcyBpbnN0YW5jZXMgc28gd2UgZXh0ZW5kIG5ldyBvYmplY3RcbiAgICB0aGlzLmNvbG9ycyA9ICQuZXh0ZW5kKHt9LCBDb2xvci53ZWJDb2xvcnMsIHRoaXMucHJlZGVmaW5lZENvbG9ycyk7XG5cbiAgICBpZiAodmFsKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbC5oICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRDb2xvcihTdHJpbmcodmFsKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnZhbHVlKSB7XG4gICAgICAvLyBJbml0aWFsIHZhbHVlIGlzIGFsd2F5cyBibGFjayBpZiBubyBhcmd1bWVudHMgYXJlIHBhc3NlZCBvciB2YWwgaXMgZW1wdHlcbiAgICAgIHRoaXMudmFsdWUgPSB7XG4gICAgICAgIGg6IDAsXG4gICAgICAgIHM6IDAsXG4gICAgICAgIGI6IDAsXG4gICAgICAgIGE6IDFcbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIENvbG9yLndlYkNvbG9ycyA9IHsgLy8gMTQwIHByZWRlZmluZWQgY29sb3JzIGZyb20gdGhlIEhUTUwgQ29sb3JzIHNwZWNcbiAgICBcImFsaWNlYmx1ZVwiOiBcImYwZjhmZlwiLFxuICAgIFwiYW50aXF1ZXdoaXRlXCI6IFwiZmFlYmQ3XCIsXG4gICAgXCJhcXVhXCI6IFwiMDBmZmZmXCIsXG4gICAgXCJhcXVhbWFyaW5lXCI6IFwiN2ZmZmQ0XCIsXG4gICAgXCJhenVyZVwiOiBcImYwZmZmZlwiLFxuICAgIFwiYmVpZ2VcIjogXCJmNWY1ZGNcIixcbiAgICBcImJpc3F1ZVwiOiBcImZmZTRjNFwiLFxuICAgIFwiYmxhY2tcIjogXCIwMDAwMDBcIixcbiAgICBcImJsYW5jaGVkYWxtb25kXCI6IFwiZmZlYmNkXCIsXG4gICAgXCJibHVlXCI6IFwiMDAwMGZmXCIsXG4gICAgXCJibHVldmlvbGV0XCI6IFwiOGEyYmUyXCIsXG4gICAgXCJicm93blwiOiBcImE1MmEyYVwiLFxuICAgIFwiYnVybHl3b29kXCI6IFwiZGViODg3XCIsXG4gICAgXCJjYWRldGJsdWVcIjogXCI1ZjllYTBcIixcbiAgICBcImNoYXJ0cmV1c2VcIjogXCI3ZmZmMDBcIixcbiAgICBcImNob2NvbGF0ZVwiOiBcImQyNjkxZVwiLFxuICAgIFwiY29yYWxcIjogXCJmZjdmNTBcIixcbiAgICBcImNvcm5mbG93ZXJibHVlXCI6IFwiNjQ5NWVkXCIsXG4gICAgXCJjb3Juc2lsa1wiOiBcImZmZjhkY1wiLFxuICAgIFwiY3JpbXNvblwiOiBcImRjMTQzY1wiLFxuICAgIFwiY3lhblwiOiBcIjAwZmZmZlwiLFxuICAgIFwiZGFya2JsdWVcIjogXCIwMDAwOGJcIixcbiAgICBcImRhcmtjeWFuXCI6IFwiMDA4YjhiXCIsXG4gICAgXCJkYXJrZ29sZGVucm9kXCI6IFwiYjg4NjBiXCIsXG4gICAgXCJkYXJrZ3JheVwiOiBcImE5YTlhOVwiLFxuICAgIFwiZGFya2dyZWVuXCI6IFwiMDA2NDAwXCIsXG4gICAgXCJkYXJra2hha2lcIjogXCJiZGI3NmJcIixcbiAgICBcImRhcmttYWdlbnRhXCI6IFwiOGIwMDhiXCIsXG4gICAgXCJkYXJrb2xpdmVncmVlblwiOiBcIjU1NmIyZlwiLFxuICAgIFwiZGFya29yYW5nZVwiOiBcImZmOGMwMFwiLFxuICAgIFwiZGFya29yY2hpZFwiOiBcIjk5MzJjY1wiLFxuICAgIFwiZGFya3JlZFwiOiBcIjhiMDAwMFwiLFxuICAgIFwiZGFya3NhbG1vblwiOiBcImU5OTY3YVwiLFxuICAgIFwiZGFya3NlYWdyZWVuXCI6IFwiOGZiYzhmXCIsXG4gICAgXCJkYXJrc2xhdGVibHVlXCI6IFwiNDgzZDhiXCIsXG4gICAgXCJkYXJrc2xhdGVncmF5XCI6IFwiMmY0ZjRmXCIsXG4gICAgXCJkYXJrdHVycXVvaXNlXCI6IFwiMDBjZWQxXCIsXG4gICAgXCJkYXJrdmlvbGV0XCI6IFwiOTQwMGQzXCIsXG4gICAgXCJkZWVwcGlua1wiOiBcImZmMTQ5M1wiLFxuICAgIFwiZGVlcHNreWJsdWVcIjogXCIwMGJmZmZcIixcbiAgICBcImRpbWdyYXlcIjogXCI2OTY5NjlcIixcbiAgICBcImRvZGdlcmJsdWVcIjogXCIxZTkwZmZcIixcbiAgICBcImZpcmVicmlja1wiOiBcImIyMjIyMlwiLFxuICAgIFwiZmxvcmFsd2hpdGVcIjogXCJmZmZhZjBcIixcbiAgICBcImZvcmVzdGdyZWVuXCI6IFwiMjI4YjIyXCIsXG4gICAgXCJmdWNoc2lhXCI6IFwiZmYwMGZmXCIsXG4gICAgXCJnYWluc2Jvcm9cIjogXCJkY2RjZGNcIixcbiAgICBcImdob3N0d2hpdGVcIjogXCJmOGY4ZmZcIixcbiAgICBcImdvbGRcIjogXCJmZmQ3MDBcIixcbiAgICBcImdvbGRlbnJvZFwiOiBcImRhYTUyMFwiLFxuICAgIFwiZ3JheVwiOiBcIjgwODA4MFwiLFxuICAgIFwiZ3JlZW5cIjogXCIwMDgwMDBcIixcbiAgICBcImdyZWVueWVsbG93XCI6IFwiYWRmZjJmXCIsXG4gICAgXCJob25leWRld1wiOiBcImYwZmZmMFwiLFxuICAgIFwiaG90cGlua1wiOiBcImZmNjliNFwiLFxuICAgIFwiaW5kaWFucmVkXCI6IFwiY2Q1YzVjXCIsXG4gICAgXCJpbmRpZ29cIjogXCI0YjAwODJcIixcbiAgICBcIml2b3J5XCI6IFwiZmZmZmYwXCIsXG4gICAgXCJraGFraVwiOiBcImYwZTY4Y1wiLFxuICAgIFwibGF2ZW5kZXJcIjogXCJlNmU2ZmFcIixcbiAgICBcImxhdmVuZGVyYmx1c2hcIjogXCJmZmYwZjVcIixcbiAgICBcImxhd25ncmVlblwiOiBcIjdjZmMwMFwiLFxuICAgIFwibGVtb25jaGlmZm9uXCI6IFwiZmZmYWNkXCIsXG4gICAgXCJsaWdodGJsdWVcIjogXCJhZGQ4ZTZcIixcbiAgICBcImxpZ2h0Y29yYWxcIjogXCJmMDgwODBcIixcbiAgICBcImxpZ2h0Y3lhblwiOiBcImUwZmZmZlwiLFxuICAgIFwibGlnaHRnb2xkZW5yb2R5ZWxsb3dcIjogXCJmYWZhZDJcIixcbiAgICBcImxpZ2h0Z3JleVwiOiBcImQzZDNkM1wiLFxuICAgIFwibGlnaHRncmVlblwiOiBcIjkwZWU5MFwiLFxuICAgIFwibGlnaHRwaW5rXCI6IFwiZmZiNmMxXCIsXG4gICAgXCJsaWdodHNhbG1vblwiOiBcImZmYTA3YVwiLFxuICAgIFwibGlnaHRzZWFncmVlblwiOiBcIjIwYjJhYVwiLFxuICAgIFwibGlnaHRza3libHVlXCI6IFwiODdjZWZhXCIsXG4gICAgXCJsaWdodHNsYXRlZ3JheVwiOiBcIjc3ODg5OVwiLFxuICAgIFwibGlnaHRzdGVlbGJsdWVcIjogXCJiMGM0ZGVcIixcbiAgICBcImxpZ2h0eWVsbG93XCI6IFwiZmZmZmUwXCIsXG4gICAgXCJsaW1lXCI6IFwiMDBmZjAwXCIsXG4gICAgXCJsaW1lZ3JlZW5cIjogXCIzMmNkMzJcIixcbiAgICBcImxpbmVuXCI6IFwiZmFmMGU2XCIsXG4gICAgXCJtYWdlbnRhXCI6IFwiZmYwMGZmXCIsXG4gICAgXCJtYXJvb25cIjogXCI4MDAwMDBcIixcbiAgICBcIm1lZGl1bWFxdWFtYXJpbmVcIjogXCI2NmNkYWFcIixcbiAgICBcIm1lZGl1bWJsdWVcIjogXCIwMDAwY2RcIixcbiAgICBcIm1lZGl1bW9yY2hpZFwiOiBcImJhNTVkM1wiLFxuICAgIFwibWVkaXVtcHVycGxlXCI6IFwiOTM3MGQ4XCIsXG4gICAgXCJtZWRpdW1zZWFncmVlblwiOiBcIjNjYjM3MVwiLFxuICAgIFwibWVkaXVtc2xhdGVibHVlXCI6IFwiN2I2OGVlXCIsXG4gICAgXCJtZWRpdW1zcHJpbmdncmVlblwiOiBcIjAwZmE5YVwiLFxuICAgIFwibWVkaXVtdHVycXVvaXNlXCI6IFwiNDhkMWNjXCIsXG4gICAgXCJtZWRpdW12aW9sZXRyZWRcIjogXCJjNzE1ODVcIixcbiAgICBcIm1pZG5pZ2h0Ymx1ZVwiOiBcIjE5MTk3MFwiLFxuICAgIFwibWludGNyZWFtXCI6IFwiZjVmZmZhXCIsXG4gICAgXCJtaXN0eXJvc2VcIjogXCJmZmU0ZTFcIixcbiAgICBcIm1vY2Nhc2luXCI6IFwiZmZlNGI1XCIsXG4gICAgXCJuYXZham93aGl0ZVwiOiBcImZmZGVhZFwiLFxuICAgIFwibmF2eVwiOiBcIjAwMDA4MFwiLFxuICAgIFwib2xkbGFjZVwiOiBcImZkZjVlNlwiLFxuICAgIFwib2xpdmVcIjogXCI4MDgwMDBcIixcbiAgICBcIm9saXZlZHJhYlwiOiBcIjZiOGUyM1wiLFxuICAgIFwib3JhbmdlXCI6IFwiZmZhNTAwXCIsXG4gICAgXCJvcmFuZ2VyZWRcIjogXCJmZjQ1MDBcIixcbiAgICBcIm9yY2hpZFwiOiBcImRhNzBkNlwiLFxuICAgIFwicGFsZWdvbGRlbnJvZFwiOiBcImVlZThhYVwiLFxuICAgIFwicGFsZWdyZWVuXCI6IFwiOThmYjk4XCIsXG4gICAgXCJwYWxldHVycXVvaXNlXCI6IFwiYWZlZWVlXCIsXG4gICAgXCJwYWxldmlvbGV0cmVkXCI6IFwiZDg3MDkzXCIsXG4gICAgXCJwYXBheWF3aGlwXCI6IFwiZmZlZmQ1XCIsXG4gICAgXCJwZWFjaHB1ZmZcIjogXCJmZmRhYjlcIixcbiAgICBcInBlcnVcIjogXCJjZDg1M2ZcIixcbiAgICBcInBpbmtcIjogXCJmZmMwY2JcIixcbiAgICBcInBsdW1cIjogXCJkZGEwZGRcIixcbiAgICBcInBvd2RlcmJsdWVcIjogXCJiMGUwZTZcIixcbiAgICBcInB1cnBsZVwiOiBcIjgwMDA4MFwiLFxuICAgIFwicmVkXCI6IFwiZmYwMDAwXCIsXG4gICAgXCJyb3N5YnJvd25cIjogXCJiYzhmOGZcIixcbiAgICBcInJveWFsYmx1ZVwiOiBcIjQxNjllMVwiLFxuICAgIFwic2FkZGxlYnJvd25cIjogXCI4YjQ1MTNcIixcbiAgICBcInNhbG1vblwiOiBcImZhODA3MlwiLFxuICAgIFwic2FuZHlicm93blwiOiBcImY0YTQ2MFwiLFxuICAgIFwic2VhZ3JlZW5cIjogXCIyZThiNTdcIixcbiAgICBcInNlYXNoZWxsXCI6IFwiZmZmNWVlXCIsXG4gICAgXCJzaWVubmFcIjogXCJhMDUyMmRcIixcbiAgICBcInNpbHZlclwiOiBcImMwYzBjMFwiLFxuICAgIFwic2t5Ymx1ZVwiOiBcIjg3Y2VlYlwiLFxuICAgIFwic2xhdGVibHVlXCI6IFwiNmE1YWNkXCIsXG4gICAgXCJzbGF0ZWdyYXlcIjogXCI3MDgwOTBcIixcbiAgICBcInNub3dcIjogXCJmZmZhZmFcIixcbiAgICBcInNwcmluZ2dyZWVuXCI6IFwiMDBmZjdmXCIsXG4gICAgXCJzdGVlbGJsdWVcIjogXCI0NjgyYjRcIixcbiAgICBcInRhblwiOiBcImQyYjQ4Y1wiLFxuICAgIFwidGVhbFwiOiBcIjAwODA4MFwiLFxuICAgIFwidGhpc3RsZVwiOiBcImQ4YmZkOFwiLFxuICAgIFwidG9tYXRvXCI6IFwiZmY2MzQ3XCIsXG4gICAgXCJ0dXJxdW9pc2VcIjogXCI0MGUwZDBcIixcbiAgICBcInZpb2xldFwiOiBcImVlODJlZVwiLFxuICAgIFwid2hlYXRcIjogXCJmNWRlYjNcIixcbiAgICBcIndoaXRlXCI6IFwiZmZmZmZmXCIsXG4gICAgXCJ3aGl0ZXNtb2tlXCI6IFwiZjVmNWY1XCIsXG4gICAgXCJ5ZWxsb3dcIjogXCJmZmZmMDBcIixcbiAgICBcInllbGxvd2dyZWVuXCI6IFwiOWFjZDMyXCIsXG4gICAgXCJ0cmFuc3BhcmVudFwiOiBcInRyYW5zcGFyZW50XCJcbiAgfTtcblxuICBDb2xvci5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbG9yLFxuICAgIGNvbG9yczoge30sIC8vIG1lcmdlZCB3ZWIgYW5kIHByZWRlZmluZWQgY29sb3JzXG4gICAgcHJlZGVmaW5lZENvbG9yczoge30sXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqL1xuICAgIGdldFZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHZhbFxuICAgICAqL1xuICAgIHNldFZhbHVlOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWw7XG4gICAgfSxcbiAgICBfc2FuaXRpemVOdW1iZXI6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgICB9XG4gICAgICBpZiAoaXNOYU4odmFsKSB8fCAodmFsID09PSBudWxsKSB8fCAodmFsID09PSAnJykgfHwgKHZhbCA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWwgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2YWwudG9Mb3dlckNhc2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh2YWwubWF0Y2goL15cXC4vKSkge1xuICAgICAgICAgIHZhbCA9IFwiMFwiICsgdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNYXRoLmNlaWwocGFyc2VGbG9hdCh2YWwpICogMTAwKSAvIDEwMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAxO1xuICAgIH0sXG4gICAgaXNUcmFuc3BhcmVudDogZnVuY3Rpb24oc3RyVmFsKSB7XG4gICAgICBpZiAoIXN0clZhbCB8fCAhKHR5cGVvZiBzdHJWYWwgPT09ICdzdHJpbmcnIHx8IHN0clZhbCBpbnN0YW5jZW9mIFN0cmluZykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgc3RyVmFsID0gc3RyVmFsLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgcmV0dXJuIChzdHJWYWwgPT09ICd0cmFuc3BhcmVudCcpIHx8IChzdHJWYWwubWF0Y2goLyM/MDAwMDAwMDAvKSkgfHwgKHN0clZhbC5tYXRjaCgvKHJnYmF8aHNsYSlcXCgwLDAsMCwwP1xcLj8wXFwpLykpO1xuICAgIH0sXG4gICAgcmdiYUlzVHJhbnNwYXJlbnQ6IGZ1bmN0aW9uKHJnYmEpIHtcbiAgICAgIHJldHVybiAoKHJnYmEuciA9PT0gMCkgJiYgKHJnYmEuZyA9PT0gMCkgJiYgKHJnYmEuYiA9PT0gMCkgJiYgKHJnYmEuYSA9PT0gMCkpO1xuICAgIH0sXG4gICAgLy8gcGFyc2UgYSBzdHJpbmcgdG8gSFNCXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJWYWxcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGl0IGNvdWxkIGJlIHBhcnNlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAgICovXG4gICAgc2V0Q29sb3I6IGZ1bmN0aW9uKHN0clZhbCkge1xuICAgICAgc3RyVmFsID0gc3RyVmFsLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgaWYgKHN0clZhbCkge1xuICAgICAgICBpZiAodGhpcy5pc1RyYW5zcGFyZW50KHN0clZhbCkpIHtcbiAgICAgICAgICB0aGlzLnZhbHVlID0ge1xuICAgICAgICAgICAgaDogMCxcbiAgICAgICAgICAgIHM6IDAsXG4gICAgICAgICAgICBiOiAwLFxuICAgICAgICAgICAgYTogMFxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHBhcnNlZENvbG9yID0gdGhpcy5wYXJzZShzdHJWYWwpO1xuICAgICAgICAgIGlmIChwYXJzZWRDb2xvcikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMudmFsdWUgPSB7XG4gICAgICAgICAgICAgIGg6IHBhcnNlZENvbG9yLmgsXG4gICAgICAgICAgICAgIHM6IHBhcnNlZENvbG9yLnMsXG4gICAgICAgICAgICAgIGI6IHBhcnNlZENvbG9yLmIsXG4gICAgICAgICAgICAgIGE6IHBhcnNlZENvbG9yLmFcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIXRoaXMub3JpZ0Zvcm1hdCkge1xuICAgICAgICAgICAgICB0aGlzLm9yaWdGb3JtYXQgPSBwYXJzZWRDb2xvci5mb3JtYXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmZhbGxiYWNrVmFsdWUpIHtcbiAgICAgICAgICAgIC8vIGlmIHBhcnNlciBmYWlscywgZGVmYXVsdHMgdG8gZmFsbGJhY2tWYWx1ZSBpZiBkZWZpbmVkLCBvdGhlcndpc2UgdGhlIHZhbHVlIHdvbid0IGJlIGNoYW5nZWRcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmZhbGxiYWNrVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBzZXRIdWU6IGZ1bmN0aW9uKGgpIHtcbiAgICAgIHRoaXMudmFsdWUuaCA9IDEgLSBoO1xuICAgIH0sXG4gICAgc2V0U2F0dXJhdGlvbjogZnVuY3Rpb24ocykge1xuICAgICAgdGhpcy52YWx1ZS5zID0gcztcbiAgICB9LFxuICAgIHNldEJyaWdodG5lc3M6IGZ1bmN0aW9uKGIpIHtcbiAgICAgIHRoaXMudmFsdWUuYiA9IDEgLSBiO1xuICAgIH0sXG4gICAgc2V0QWxwaGE6IGZ1bmN0aW9uKGEpIHtcbiAgICAgIHRoaXMudmFsdWUuYSA9IE1hdGgucm91bmQoKHBhcnNlSW50KCgxIC0gYSkgKiAxMDAsIDEwKSAvIDEwMCkgKiAxMDApIC8gMTAwO1xuICAgIH0sXG4gICAgdG9SR0I6IGZ1bmN0aW9uKGgsIHMsIGIsIGEpIHtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGggPSB0aGlzLnZhbHVlLmg7XG4gICAgICAgIHMgPSB0aGlzLnZhbHVlLnM7XG4gICAgICAgIGIgPSB0aGlzLnZhbHVlLmI7XG4gICAgICAgIGEgPSB0aGlzLnZhbHVlLmE7XG4gICAgICB9XG5cbiAgICAgIGggKj0gMzYwO1xuICAgICAgdmFyIFIsIEcsIEIsIFgsIEM7XG4gICAgICBoID0gKGggJSAzNjApIC8gNjA7XG4gICAgICBDID0gYiAqIHM7XG4gICAgICBYID0gQyAqICgxIC0gTWF0aC5hYnMoaCAlIDIgLSAxKSk7XG4gICAgICBSID0gRyA9IEIgPSBiIC0gQztcblxuICAgICAgaCA9IH5+aDtcbiAgICAgIFIgKz0gW0MsIFgsIDAsIDAsIFgsIENdW2hdO1xuICAgICAgRyArPSBbWCwgQywgQywgWCwgMCwgMF1baF07XG4gICAgICBCICs9IFswLCAwLCBYLCBDLCBDLCBYXVtoXTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcjogTWF0aC5yb3VuZChSICogMjU1KSxcbiAgICAgICAgZzogTWF0aC5yb3VuZChHICogMjU1KSxcbiAgICAgICAgYjogTWF0aC5yb3VuZChCICogMjU1KSxcbiAgICAgICAgYTogYVxuICAgICAgfTtcbiAgICB9LFxuICAgIHRvSGV4OiBmdW5jdGlvbihpZ25vcmVGb3JtYXQsIGgsIHMsIGIsIGEpIHtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgaCA9IHRoaXMudmFsdWUuaDtcbiAgICAgICAgcyA9IHRoaXMudmFsdWUucztcbiAgICAgICAgYiA9IHRoaXMudmFsdWUuYjtcbiAgICAgICAgYSA9IHRoaXMudmFsdWUuYTtcbiAgICAgIH1cblxuICAgICAgdmFyIHByZWZpeCA9ICcjJztcbiAgICAgIHZhciByZ2IgPSB0aGlzLnRvUkdCKGgsIHMsIGIsIGEpO1xuXG4gICAgICBpZiAodGhpcy5yZ2JhSXNUcmFuc3BhcmVudChyZ2IpKSB7XG4gICAgICAgIHJldHVybiAndHJhbnNwYXJlbnQnO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlnbm9yZUZvcm1hdCkge1xuICAgICAgICBwcmVmaXggPSAodGhpcy5oZXhOdW1iZXJTaWduUHJlZml4ID8gJyMnIDogJycpO1xuICAgICAgfVxuXG4gICAgICB2YXIgaGV4U3RyID0gcHJlZml4ICsgKFxuICAgICAgICAgICgxIDw8IDI0KSArXG4gICAgICAgICAgKHBhcnNlSW50KHJnYi5yKSA8PCAxNikgK1xuICAgICAgICAgIChwYXJzZUludChyZ2IuZykgPDwgOCkgK1xuICAgICAgICAgIHBhcnNlSW50KHJnYi5iKSlcbiAgICAgICAgLnRvU3RyaW5nKDE2KVxuICAgICAgICAuc2xpY2UoMSk7XG5cbiAgICAgIHJldHVybiBoZXhTdHI7XG4gICAgfSxcbiAgICB0b0hTTDogZnVuY3Rpb24oaCwgcywgYiwgYSkge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaCA9IHRoaXMudmFsdWUuaDtcbiAgICAgICAgcyA9IHRoaXMudmFsdWUucztcbiAgICAgICAgYiA9IHRoaXMudmFsdWUuYjtcbiAgICAgICAgYSA9IHRoaXMudmFsdWUuYTtcbiAgICAgIH1cblxuICAgICAgdmFyIEggPSBoLFxuICAgICAgICBMID0gKDIgLSBzKSAqIGIsXG4gICAgICAgIFMgPSBzICogYjtcbiAgICAgIGlmIChMID4gMCAmJiBMIDw9IDEpIHtcbiAgICAgICAgUyAvPSBMO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgUyAvPSAyIC0gTDtcbiAgICAgIH1cbiAgICAgIEwgLz0gMjtcbiAgICAgIGlmIChTID4gMSkge1xuICAgICAgICBTID0gMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGg6IGlzTmFOKEgpID8gMCA6IEgsXG4gICAgICAgIHM6IGlzTmFOKFMpID8gMCA6IFMsXG4gICAgICAgIGw6IGlzTmFOKEwpID8gMCA6IEwsXG4gICAgICAgIGE6IGlzTmFOKGEpID8gMCA6IGFcbiAgICAgIH07XG4gICAgfSxcbiAgICB0b0FsaWFzOiBmdW5jdGlvbihyLCBnLCBiLCBhKSB7XG4gICAgICB2YXIgYywgcmdiID0gKGFyZ3VtZW50cy5sZW5ndGggPT09IDApID8gdGhpcy50b0hleCh0cnVlKSA6IHRoaXMudG9IZXgodHJ1ZSwgciwgZywgYiwgYSk7XG5cbiAgICAgIC8vIHN1cHBvcnQgcHJlZGVmLiBjb2xvcnMgaW4gbm9uLWhleCBmb3JtYXQgdG9vLCBhcyBkZWZpbmVkIGluIHRoZSBhbGlhcyBpdHNlbGZcbiAgICAgIHZhciBvcmlnaW5hbCA9IHRoaXMub3JpZ0Zvcm1hdCA9PT0gJ2FsaWFzJyA/IHJnYiA6IHRoaXMudG9TdHJpbmcoZmFsc2UsIHRoaXMub3JpZ0Zvcm1hdCk7XG5cbiAgICAgIGZvciAodmFyIGFsaWFzIGluIHRoaXMuY29sb3JzKSB7XG4gICAgICAgIGMgPSB0aGlzLmNvbG9yc1thbGlhc10udG9Mb3dlckNhc2UoKS50cmltKCk7XG4gICAgICAgIGlmICgoYyA9PT0gcmdiKSB8fCAoYyA9PT0gb3JpZ2luYWwpKSB7XG4gICAgICAgICAgcmV0dXJuIGFsaWFzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBSR0J0b0hTQjogZnVuY3Rpb24ociwgZywgYiwgYSkge1xuICAgICAgciAvPSAyNTU7XG4gICAgICBnIC89IDI1NTtcbiAgICAgIGIgLz0gMjU1O1xuXG4gICAgICB2YXIgSCwgUywgViwgQztcbiAgICAgIFYgPSBNYXRoLm1heChyLCBnLCBiKTtcbiAgICAgIEMgPSBWIC0gTWF0aC5taW4ociwgZywgYik7XG4gICAgICBIID0gKEMgPT09IDAgPyBudWxsIDpcbiAgICAgICAgViA9PT0gciA/IChnIC0gYikgLyBDIDpcbiAgICAgICAgViA9PT0gZyA/IChiIC0gcikgLyBDICsgMiA6XG4gICAgICAgIChyIC0gZykgLyBDICsgNFxuICAgICAgKTtcbiAgICAgIEggPSAoKEggKyAzNjApICUgNikgKiA2MCAvIDM2MDtcbiAgICAgIFMgPSBDID09PSAwID8gMCA6IEMgLyBWO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaDogdGhpcy5fc2FuaXRpemVOdW1iZXIoSCksXG4gICAgICAgIHM6IFMsXG4gICAgICAgIGI6IFYsXG4gICAgICAgIGE6IHRoaXMuX3Nhbml0aXplTnVtYmVyKGEpXG4gICAgICB9O1xuICAgIH0sXG4gICAgSHVlVG9SR0I6IGZ1bmN0aW9uKHAsIHEsIGgpIHtcbiAgICAgIGlmIChoIDwgMCkge1xuICAgICAgICBoICs9IDE7XG4gICAgICB9IGVsc2UgaWYgKGggPiAxKSB7XG4gICAgICAgIGggLT0gMTtcbiAgICAgIH1cbiAgICAgIGlmICgoaCAqIDYpIDwgMSkge1xuICAgICAgICByZXR1cm4gcCArIChxIC0gcCkgKiBoICogNjtcbiAgICAgIH0gZWxzZSBpZiAoKGggKiAyKSA8IDEpIHtcbiAgICAgICAgcmV0dXJuIHE7XG4gICAgICB9IGVsc2UgaWYgKChoICogMykgPCAyKSB7XG4gICAgICAgIHJldHVybiBwICsgKHEgLSBwKSAqICgoMiAvIDMpIC0gaCkgKiA2O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9XG4gICAgfSxcbiAgICBIU0x0b1JHQjogZnVuY3Rpb24oaCwgcywgbCwgYSkge1xuICAgICAgaWYgKHMgPCAwKSB7XG4gICAgICAgIHMgPSAwO1xuICAgICAgfVxuICAgICAgdmFyIHE7XG4gICAgICBpZiAobCA8PSAwLjUpIHtcbiAgICAgICAgcSA9IGwgKiAoMSArIHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcSA9IGwgKyBzIC0gKGwgKiBzKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHAgPSAyICogbCAtIHE7XG5cbiAgICAgIHZhciB0ciA9IGggKyAoMSAvIDMpO1xuICAgICAgdmFyIHRnID0gaDtcbiAgICAgIHZhciB0YiA9IGggLSAoMSAvIDMpO1xuXG4gICAgICB2YXIgciA9IE1hdGgucm91bmQodGhpcy5IdWVUb1JHQihwLCBxLCB0cikgKiAyNTUpO1xuICAgICAgdmFyIGcgPSBNYXRoLnJvdW5kKHRoaXMuSHVlVG9SR0IocCwgcSwgdGcpICogMjU1KTtcbiAgICAgIHZhciBiID0gTWF0aC5yb3VuZCh0aGlzLkh1ZVRvUkdCKHAsIHEsIHRiKSAqIDI1NSk7XG4gICAgICByZXR1cm4gW3IsIGcsIGIsIHRoaXMuX3Nhbml0aXplTnVtYmVyKGEpXTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJWYWxcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSBPYmplY3QgY29udGFpbmluZyBoLHMsYixhLGZvcm1hdCBwcm9wZXJ0aWVzIG9yIEZBTFNFIGlmIGZhaWxlZCB0byBwYXJzZVxuICAgICAqL1xuICAgIHBhcnNlOiBmdW5jdGlvbihzdHJWYWwpIHtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICByZXN1bHQgPSBmYWxzZSxcbiAgICAgICAgaXNBbGlhcyA9ICh0eXBlb2YgdGhpcy5jb2xvcnNbc3RyVmFsXSAhPT0gJ3VuZGVmaW5lZCcpLFxuICAgICAgICB2YWx1ZXMsIGZvcm1hdDtcblxuICAgICAgaWYgKGlzQWxpYXMpIHtcbiAgICAgICAgc3RyVmFsID0gdGhpcy5jb2xvcnNbc3RyVmFsXS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgIH1cblxuICAgICAgJC5lYWNoKHRoaXMuc3RyaW5nUGFyc2VycywgZnVuY3Rpb24oaSwgcGFyc2VyKSB7XG4gICAgICAgIHZhciBtYXRjaCA9IHBhcnNlci5yZS5leGVjKHN0clZhbCk7XG4gICAgICAgIHZhbHVlcyA9IG1hdGNoICYmIHBhcnNlci5wYXJzZS5hcHBseSh0aGF0LCBbbWF0Y2hdKTtcbiAgICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICAgIHJlc3VsdCA9IHt9O1xuICAgICAgICAgIGZvcm1hdCA9IChpc0FsaWFzID8gJ2FsaWFzJyA6IChwYXJzZXIuZm9ybWF0ID8gcGFyc2VyLmZvcm1hdCA6IHRoYXQuZ2V0VmFsaWRGYWxsYmFja0Zvcm1hdCgpKSk7XG4gICAgICAgICAgaWYgKGZvcm1hdC5tYXRjaCgvaHNsYT8vKSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gdGhhdC5SR0J0b0hTQi5hcHBseSh0aGF0LCB0aGF0LkhTTHRvUkdCLmFwcGx5KHRoYXQsIHZhbHVlcykpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGF0LlJHQnRvSFNCLmFwcGx5KHRoYXQsIHZhbHVlcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgIHJlc3VsdC5mb3JtYXQgPSBmb3JtYXQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gc3RvcCBpdGVyYXRpbmdcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuICAgIGdldFZhbGlkRmFsbGJhY2tGb3JtYXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGZvcm1hdHMgPSBbXG4gICAgICAgICdyZ2JhJywgJ3JnYicsICdoZXgnLCAnaHNsYScsICdoc2wnXG4gICAgICBdO1xuICAgICAgaWYgKHRoaXMub3JpZ0Zvcm1hdCAmJiAoZm9ybWF0cy5pbmRleE9mKHRoaXMub3JpZ0Zvcm1hdCkgIT09IC0xKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmlnRm9ybWF0O1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZmFsbGJhY2tGb3JtYXQgJiYgKGZvcm1hdHMuaW5kZXhPZih0aGlzLmZhbGxiYWNrRm9ybWF0KSAhPT0gLTEpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZhbGxiYWNrRm9ybWF0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJ3JnYmEnOyAvLyBCeSBkZWZhdWx0LCByZXR1cm4gYSBmb3JtYXQgdGhhdCB3aWxsIG5vdCBsb3NlIHRoZSBhbHBoYSBpbmZvXG4gICAgfSxcbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZm9ybWF0XSAoZGVmYXVsdDogcmdiYSlcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFt0cmFuc2xhdGVBbGlhc10gUmV0dXJuIHJlYWwgY29sb3IgZm9yIHByZS1kZWZpbmVkIChub24tc3RhbmRhcmQpIGFsaWFzZXMgKGRlZmF1bHQ6IGZhbHNlKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2ZvcmNlUmF3VmFsdWVdIEZvcmNlcyBoYXNodGFnIHByZWZpeCB3aGVuIGdldHRpbmcgaGV4IGNvbG9yIChkZWZhdWx0OiBmYWxzZSlcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfVxuICAgICAqL1xuICAgIHRvU3RyaW5nOiBmdW5jdGlvbihmb3JjZVJhd1ZhbHVlLCBmb3JtYXQsIHRyYW5zbGF0ZUFsaWFzKSB7XG4gICAgICBmb3JtYXQgPSBmb3JtYXQgfHwgdGhpcy5vcmlnRm9ybWF0IHx8IHRoaXMuZmFsbGJhY2tGb3JtYXQ7XG4gICAgICB0cmFuc2xhdGVBbGlhcyA9IHRyYW5zbGF0ZUFsaWFzIHx8IGZhbHNlO1xuXG4gICAgICB2YXIgYyA9IGZhbHNlO1xuXG4gICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlICdyZ2InOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGMgPSB0aGlzLnRvUkdCKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZ2JhSXNUcmFuc3BhcmVudChjKSkge1xuICAgICAgICAgICAgICByZXR1cm4gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAncmdiKCcgKyBjLnIgKyAnLCcgKyBjLmcgKyAnLCcgKyBjLmIgKyAnKSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyZ2JhJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjID0gdGhpcy50b1JHQigpO1xuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKCcgKyBjLnIgKyAnLCcgKyBjLmcgKyAnLCcgKyBjLmIgKyAnLCcgKyBjLmEgKyAnKSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdoc2wnOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGMgPSB0aGlzLnRvSFNMKCk7XG4gICAgICAgICAgICByZXR1cm4gJ2hzbCgnICsgTWF0aC5yb3VuZChjLmggKiAzNjApICsgJywnICsgTWF0aC5yb3VuZChjLnMgKiAxMDApICsgJyUsJyArIE1hdGgucm91bmQoYy5sICogMTAwKSArICclKSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdoc2xhJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjID0gdGhpcy50b0hTTCgpO1xuICAgICAgICAgICAgcmV0dXJuICdoc2xhKCcgKyBNYXRoLnJvdW5kKGMuaCAqIDM2MCkgKyAnLCcgKyBNYXRoLnJvdW5kKGMucyAqIDEwMCkgKyAnJSwnICsgTWF0aC5yb3VuZChjLmwgKiAxMDApICsgJyUsJyArIGMuYSArICcpJztcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9IZXgoZm9yY2VSYXdWYWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdhbGlhcyc6XG4gICAgICAgICAge1xuICAgICAgICAgICAgYyA9IHRoaXMudG9BbGlhcygpO1xuXG4gICAgICAgICAgICBpZiAoYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoZm9yY2VSYXdWYWx1ZSwgdGhpcy5nZXRWYWxpZEZhbGxiYWNrRm9ybWF0KCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHJhbnNsYXRlQWxpYXMgJiYgIShjIGluIENvbG9yLndlYkNvbG9ycykgJiYgKGMgaW4gdGhpcy5wcmVkZWZpbmVkQ29sb3JzKSkge1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcmVkZWZpbmVkQ29sb3JzW2NdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIGM7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy8gYSBzZXQgb2YgUkUncyB0aGF0IGNhbiBtYXRjaCBzdHJpbmdzIGFuZCBnZW5lcmF0ZSBjb2xvciB0dXBsZXMuXG4gICAgLy8gZnJvbSBKb2huIFJlc2lnIGNvbG9yIHBsdWdpblxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LWNvbG9yL1xuICAgIHN0cmluZ1BhcnNlcnM6IFt7XG4gICAgICByZTogL3JnYlxcKFxccyooXFxkezEsM30pXFxzKixcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqP1xcKS8sXG4gICAgICBmb3JtYXQ6ICdyZ2InLFxuICAgICAgcGFyc2U6IGZ1bmN0aW9uKGV4ZWNSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBleGVjUmVzdWx0WzFdLFxuICAgICAgICAgIGV4ZWNSZXN1bHRbMl0sXG4gICAgICAgICAgZXhlY1Jlc3VsdFszXSxcbiAgICAgICAgICAxXG4gICAgICAgIF07XG4gICAgICB9XG4gICAgfSwge1xuICAgICAgcmU6IC9yZ2JcXChcXHMqKFxcZCooPzpcXC5cXGQrKT8pXFwlXFxzKixcXHMqKFxcZCooPzpcXC5cXGQrKT8pXFwlXFxzKixcXHMqKFxcZCooPzpcXC5cXGQrKT8pXFwlXFxzKj9cXCkvLFxuICAgICAgZm9ybWF0OiAncmdiJyxcbiAgICAgIHBhcnNlOiBmdW5jdGlvbihleGVjUmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgMi41NSAqIGV4ZWNSZXN1bHRbMV0sXG4gICAgICAgICAgMi41NSAqIGV4ZWNSZXN1bHRbMl0sXG4gICAgICAgICAgMi41NSAqIGV4ZWNSZXN1bHRbM10sXG4gICAgICAgICAgMVxuICAgICAgICBdO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHJlOiAvcmdiYVxcKFxccyooXFxkezEsM30pXFxzKixcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqKD86LFxccyooXFxkKig/OlxcLlxcZCspPylcXHMqKT9cXCkvLFxuICAgICAgZm9ybWF0OiAncmdiYScsXG4gICAgICBwYXJzZTogZnVuY3Rpb24oZXhlY1Jlc3VsdCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIGV4ZWNSZXN1bHRbMV0sXG4gICAgICAgICAgZXhlY1Jlc3VsdFsyXSxcbiAgICAgICAgICBleGVjUmVzdWx0WzNdLFxuICAgICAgICAgIGV4ZWNSZXN1bHRbNF1cbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICByZTogL3JnYmFcXChcXHMqKFxcZCooPzpcXC5cXGQrKT8pXFwlXFxzKixcXHMqKFxcZCooPzpcXC5cXGQrKT8pXFwlXFxzKixcXHMqKFxcZCooPzpcXC5cXGQrKT8pXFwlXFxzKig/OixcXHMqKFxcZCooPzpcXC5cXGQrKT8pXFxzKik/XFwpLyxcbiAgICAgIGZvcm1hdDogJ3JnYmEnLFxuICAgICAgcGFyc2U6IGZ1bmN0aW9uKGV4ZWNSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAyLjU1ICogZXhlY1Jlc3VsdFsxXSxcbiAgICAgICAgICAyLjU1ICogZXhlY1Jlc3VsdFsyXSxcbiAgICAgICAgICAyLjU1ICogZXhlY1Jlc3VsdFszXSxcbiAgICAgICAgICBleGVjUmVzdWx0WzRdXG4gICAgICAgIF07XG4gICAgICB9XG4gICAgfSwge1xuICAgICAgcmU6IC9oc2xcXChcXHMqKFxcZCooPzpcXC5cXGQrKT8pXFxzKixcXHMqKFxcZCooPzpcXC5cXGQrKT8pXFwlXFxzKixcXHMqKFxcZCooPzpcXC5cXGQrKT8pXFwlXFxzKj9cXCkvLFxuICAgICAgZm9ybWF0OiAnaHNsJyxcbiAgICAgIHBhcnNlOiBmdW5jdGlvbihleGVjUmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgZXhlY1Jlc3VsdFsxXSAvIDM2MCxcbiAgICAgICAgICBleGVjUmVzdWx0WzJdIC8gMTAwLFxuICAgICAgICAgIGV4ZWNSZXN1bHRbM10gLyAxMDAsXG4gICAgICAgICAgZXhlY1Jlc3VsdFs0XVxuICAgICAgICBdO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHJlOiAvaHNsYVxcKFxccyooXFxkKig/OlxcLlxcZCspPylcXHMqLFxccyooXFxkKig/OlxcLlxcZCspPylcXCVcXHMqLFxccyooXFxkKig/OlxcLlxcZCspPylcXCVcXHMqKD86LFxccyooXFxkKig/OlxcLlxcZCspPylcXHMqKT9cXCkvLFxuICAgICAgZm9ybWF0OiAnaHNsYScsXG4gICAgICBwYXJzZTogZnVuY3Rpb24oZXhlY1Jlc3VsdCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIGV4ZWNSZXN1bHRbMV0gLyAzNjAsXG4gICAgICAgICAgZXhlY1Jlc3VsdFsyXSAvIDEwMCxcbiAgICAgICAgICBleGVjUmVzdWx0WzNdIC8gMTAwLFxuICAgICAgICAgIGV4ZWNSZXN1bHRbNF1cbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICByZTogLyM/KFthLWZBLUYwLTldezJ9KShbYS1mQS1GMC05XXsyfSkoW2EtZkEtRjAtOV17Mn0pLyxcbiAgICAgIGZvcm1hdDogJ2hleCcsXG4gICAgICBwYXJzZTogZnVuY3Rpb24oZXhlY1Jlc3VsdCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHBhcnNlSW50KGV4ZWNSZXN1bHRbMV0sIDE2KSxcbiAgICAgICAgICBwYXJzZUludChleGVjUmVzdWx0WzJdLCAxNiksXG4gICAgICAgICAgcGFyc2VJbnQoZXhlY1Jlc3VsdFszXSwgMTYpLFxuICAgICAgICAgIDFcbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICByZTogLyM/KFthLWZBLUYwLTldKShbYS1mQS1GMC05XSkoW2EtZkEtRjAtOV0pLyxcbiAgICAgIGZvcm1hdDogJ2hleCcsXG4gICAgICBwYXJzZTogZnVuY3Rpb24oZXhlY1Jlc3VsdCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHBhcnNlSW50KGV4ZWNSZXN1bHRbMV0gKyBleGVjUmVzdWx0WzFdLCAxNiksXG4gICAgICAgICAgcGFyc2VJbnQoZXhlY1Jlc3VsdFsyXSArIGV4ZWNSZXN1bHRbMl0sIDE2KSxcbiAgICAgICAgICBwYXJzZUludChleGVjUmVzdWx0WzNdICsgZXhlY1Jlc3VsdFszXSwgMTYpLFxuICAgICAgICAgIDFcbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICB9XSxcbiAgICBjb2xvck5hbWVUb0hleDogZnVuY3Rpb24obmFtZSkge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmNvbG9yc1tuYW1lLnRvTG93ZXJDYXNlKCldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcnNbbmFtZS50b0xvd2VyQ2FzZSgpXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgLypcbiAgICogRGVmYXVsdCBwbHVnaW4gb3B0aW9uc1xuICAgKi9cbiAgdmFyIGRlZmF1bHRzID0ge1xuICAgIGhvcml6b250YWw6IGZhbHNlLCAvLyBob3Jpem9udGFsIG1vZGUgbGF5b3V0ID9cbiAgICBpbmxpbmU6IGZhbHNlLCAvL2ZvcmNlcyB0byBzaG93IHRoZSBjb2xvcnBpY2tlciBhcyBhbiBpbmxpbmUgZWxlbWVudFxuICAgIGNvbG9yOiBmYWxzZSwgLy9mb3JjZXMgYSBjb2xvclxuICAgIGZvcm1hdDogZmFsc2UsIC8vZm9yY2VzIGEgZm9ybWF0XG4gICAgaW5wdXQ6ICdpbnB1dCcsIC8vIGNoaWxkcmVuIGlucHV0IHNlbGVjdG9yXG4gICAgY29udGFpbmVyOiBmYWxzZSwgLy8gY29udGFpbmVyIHNlbGVjdG9yXG4gICAgY29tcG9uZW50OiAnLmFkZC1vbiwgLmlucHV0LWdyb3VwLWFkZG9uJywgLy8gY2hpbGRyZW4gY29tcG9uZW50IHNlbGVjdG9yXG4gICAgZmFsbGJhY2tDb2xvcjogZmFsc2UsIC8vIGZhbGxiYWNrIGNvbG9yIHZhbHVlLiBudWxsID0ga2VlcHMgY3VycmVudCBjb2xvci5cbiAgICBmYWxsYmFja0Zvcm1hdDogJ2hleCcsIC8vIGZhbGxiYWNrIGNvbG9yIGZvcm1hdFxuICAgIGhleE51bWJlclNpZ25QcmVmaXg6IHRydWUsIC8vIHB1dCBhICcjJyAobnVtYmVyIHNpZ24pIGJlZm9yZSBoZXggc3RyaW5nc1xuICAgIHNsaWRlcnM6IHtcbiAgICAgIHNhdHVyYXRpb246IHtcbiAgICAgICAgbWF4TGVmdDogMTAwLFxuICAgICAgICBtYXhUb3A6IDEwMCxcbiAgICAgICAgY2FsbExlZnQ6ICdzZXRTYXR1cmF0aW9uJyxcbiAgICAgICAgY2FsbFRvcDogJ3NldEJyaWdodG5lc3MnXG4gICAgICB9LFxuICAgICAgaHVlOiB7XG4gICAgICAgIG1heExlZnQ6IDAsXG4gICAgICAgIG1heFRvcDogMTAwLFxuICAgICAgICBjYWxsTGVmdDogZmFsc2UsXG4gICAgICAgIGNhbGxUb3A6ICdzZXRIdWUnXG4gICAgICB9LFxuICAgICAgYWxwaGE6IHtcbiAgICAgICAgbWF4TGVmdDogMCxcbiAgICAgICAgbWF4VG9wOiAxMDAsXG4gICAgICAgIGNhbGxMZWZ0OiBmYWxzZSxcbiAgICAgICAgY2FsbFRvcDogJ3NldEFscGhhJ1xuICAgICAgfVxuICAgIH0sXG4gICAgc2xpZGVyc0hvcno6IHtcbiAgICAgIHNhdHVyYXRpb246IHtcbiAgICAgICAgbWF4TGVmdDogMTAwLFxuICAgICAgICBtYXhUb3A6IDEwMCxcbiAgICAgICAgY2FsbExlZnQ6ICdzZXRTYXR1cmF0aW9uJyxcbiAgICAgICAgY2FsbFRvcDogJ3NldEJyaWdodG5lc3MnXG4gICAgICB9LFxuICAgICAgaHVlOiB7XG4gICAgICAgIG1heExlZnQ6IDEwMCxcbiAgICAgICAgbWF4VG9wOiAwLFxuICAgICAgICBjYWxsTGVmdDogJ3NldEh1ZScsXG4gICAgICAgIGNhbGxUb3A6IGZhbHNlXG4gICAgICB9LFxuICAgICAgYWxwaGE6IHtcbiAgICAgICAgbWF4TGVmdDogMTAwLFxuICAgICAgICBtYXhUb3A6IDAsXG4gICAgICAgIGNhbGxMZWZ0OiAnc2V0QWxwaGEnLFxuICAgICAgICBjYWxsVG9wOiBmYWxzZVxuICAgICAgfVxuICAgIH0sXG4gICAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPVwiY29sb3JwaWNrZXIgZHJvcGRvd24tbWVudVwiPicgK1xuICAgICAgJzxkaXYgY2xhc3M9XCJjb2xvcnBpY2tlci1zYXR1cmF0aW9uXCI+PGk+PGI+PC9iPjwvaT48L2Rpdj4nICtcbiAgICAgICc8ZGl2IGNsYXNzPVwiY29sb3JwaWNrZXItaHVlXCI+PGk+PC9pPjwvZGl2PicgK1xuICAgICAgJzxkaXYgY2xhc3M9XCJjb2xvcnBpY2tlci1hbHBoYVwiPjxpPjwvaT48L2Rpdj4nICtcbiAgICAgICc8ZGl2IGNsYXNzPVwiY29sb3JwaWNrZXItY29sb3JcIj48ZGl2IC8+PC9kaXY+JyArXG4gICAgICAnPGRpdiBjbGFzcz1cImNvbG9ycGlja2VyLXNlbGVjdG9yc1wiPjwvZGl2PicgK1xuICAgICAgJzwvZGl2PicsXG4gICAgYWxpZ246ICdyaWdodCcsXG4gICAgY3VzdG9tQ2xhc3M6IG51bGwsIC8vIGN1c3RvbSBjbGFzcyBhZGRlZCB0byB0aGUgY29sb3JwaWNrZXIgZWxlbWVudFxuICAgIGNvbG9yU2VsZWN0b3JzOiBudWxsIC8vIGN1c3RvbSBjb2xvciBhbGlhc2VzXG4gIH07XG5cbiAgLyoqXG4gICAqIENvbG9ycGlja2VyIGNvbXBvbmVudCBjbGFzc1xuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGVsZW1lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICB2YXIgQ29sb3JwaWNrZXIgPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5lbGVtZW50ID0gJChlbGVtZW50KS5hZGRDbGFzcygnY29sb3JwaWNrZXItZWxlbWVudCcpO1xuICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBkZWZhdWx0cywgdGhpcy5lbGVtZW50LmRhdGEoKSwgb3B0aW9ucyk7XG4gICAgdGhpcy5jb21wb25lbnQgPSB0aGlzLm9wdGlvbnMuY29tcG9uZW50O1xuICAgIHRoaXMuY29tcG9uZW50ID0gKHRoaXMuY29tcG9uZW50ICE9PSBmYWxzZSkgPyB0aGlzLmVsZW1lbnQuZmluZCh0aGlzLmNvbXBvbmVudCkgOiBmYWxzZTtcbiAgICBpZiAodGhpcy5jb21wb25lbnQgJiYgKHRoaXMuY29tcG9uZW50Lmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgIHRoaXMuY29tcG9uZW50ID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuY29udGFpbmVyID0gKHRoaXMub3B0aW9ucy5jb250YWluZXIgPT09IHRydWUpID8gdGhpcy5lbGVtZW50IDogdGhpcy5vcHRpb25zLmNvbnRhaW5lcjtcbiAgICB0aGlzLmNvbnRhaW5lciA9ICh0aGlzLmNvbnRhaW5lciAhPT0gZmFsc2UpID8gJCh0aGlzLmNvbnRhaW5lcikgOiBmYWxzZTtcblxuICAgIC8vIElzIHRoZSBlbGVtZW50IGFuIGlucHV0PyBTaG91bGQgd2Ugc2VhcmNoIGluc2lkZSBmb3IgYW55IGlucHV0P1xuICAgIHRoaXMuaW5wdXQgPSB0aGlzLmVsZW1lbnQuaXMoJ2lucHV0JykgPyB0aGlzLmVsZW1lbnQgOiAodGhpcy5vcHRpb25zLmlucHV0ID9cbiAgICAgIHRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pbnB1dCkgOiBmYWxzZSk7XG4gICAgaWYgKHRoaXMuaW5wdXQgJiYgKHRoaXMuaW5wdXQubGVuZ3RoID09PSAwKSkge1xuICAgICAgdGhpcy5pbnB1dCA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBTZXQgSFNCIGNvbG9yXG4gICAgdGhpcy5jb2xvciA9IHRoaXMuY3JlYXRlQ29sb3IodGhpcy5vcHRpb25zLmNvbG9yICE9PSBmYWxzZSA/IHRoaXMub3B0aW9ucy5jb2xvciA6IHRoaXMuZ2V0VmFsdWUoKSk7XG5cbiAgICB0aGlzLmZvcm1hdCA9IHRoaXMub3B0aW9ucy5mb3JtYXQgIT09IGZhbHNlID8gdGhpcy5vcHRpb25zLmZvcm1hdCA6IHRoaXMuY29sb3Iub3JpZ0Zvcm1hdDtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMuY29sb3IgIT09IGZhbHNlKSB7XG4gICAgICB0aGlzLnVwZGF0ZUlucHV0KHRoaXMuY29sb3IpO1xuICAgICAgdGhpcy51cGRhdGVEYXRhKHRoaXMuY29sb3IpO1xuICAgIH1cblxuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcblxuICAgIC8vIFNldHVwIHBpY2tlclxuICAgIHZhciAkcGlja2VyID0gdGhpcy5waWNrZXIgPSAkKHRoaXMub3B0aW9ucy50ZW1wbGF0ZSk7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5jdXN0b21DbGFzcykge1xuICAgICAgJHBpY2tlci5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuY3VzdG9tQ2xhc3MpO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLmlubGluZSkge1xuICAgICAgJHBpY2tlci5hZGRDbGFzcygnY29sb3JwaWNrZXItaW5saW5lIGNvbG9ycGlja2VyLXZpc2libGUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJHBpY2tlci5hZGRDbGFzcygnY29sb3JwaWNrZXItaGlkZGVuJyk7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuaG9yaXpvbnRhbCkge1xuICAgICAgJHBpY2tlci5hZGRDbGFzcygnY29sb3JwaWNrZXItaG9yaXpvbnRhbCcpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAoWydyZ2JhJywgJ2hzbGEnLCAnYWxpYXMnXS5pbmRleE9mKHRoaXMuZm9ybWF0KSAhPT0gLTEpIHx8XG4gICAgICB0aGlzLm9wdGlvbnMuZm9ybWF0ID09PSBmYWxzZSB8fFxuICAgICAgdGhpcy5nZXRWYWx1ZSgpID09PSAndHJhbnNwYXJlbnQnXG4gICAgKSB7XG4gICAgICAkcGlja2VyLmFkZENsYXNzKCdjb2xvcnBpY2tlci13aXRoLWFscGhhJyk7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuYWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgICRwaWNrZXIuYWRkQ2xhc3MoJ2NvbG9ycGlja2VyLXJpZ2h0Jyk7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuaW5saW5lID09PSB0cnVlKSB7XG4gICAgICAkcGlja2VyLmFkZENsYXNzKCdjb2xvcnBpY2tlci1uby1hcnJvdycpO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbG9yU2VsZWN0b3JzKSB7XG4gICAgICB2YXIgY29sb3JwaWNrZXIgPSB0aGlzLFxuICAgICAgICBzZWxlY3RvcnNDb250YWluZXIgPSBjb2xvcnBpY2tlci5waWNrZXIuZmluZCgnLmNvbG9ycGlja2VyLXNlbGVjdG9ycycpO1xuXG4gICAgICBpZiAoc2VsZWN0b3JzQ29udGFpbmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgJC5lYWNoKHRoaXMub3B0aW9ucy5jb2xvclNlbGVjdG9ycywgZnVuY3Rpb24obmFtZSwgY29sb3IpIHtcbiAgICAgICAgICB2YXIgJGJ0biA9ICQoJzxpIC8+JylcbiAgICAgICAgICAgIC5hZGRDbGFzcygnY29sb3JwaWNrZXItc2VsZWN0b3JzLWNvbG9yJylcbiAgICAgICAgICAgIC5jc3MoJ2JhY2tncm91bmQtY29sb3InLCBjb2xvcilcbiAgICAgICAgICAgIC5kYXRhKCdjbGFzcycsIG5hbWUpLmRhdGEoJ2FsaWFzJywgbmFtZSk7XG5cbiAgICAgICAgICAkYnRuLm9uKCdtb3VzZWRvd24uY29sb3JwaWNrZXIgdG91Y2hzdGFydC5jb2xvcnBpY2tlcicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29sb3JwaWNrZXIuc2V0VmFsdWUoXG4gICAgICAgICAgICAgIGNvbG9ycGlja2VyLmZvcm1hdCA9PT0gJ2FsaWFzJyA/ICQodGhpcykuZGF0YSgnYWxpYXMnKSA6ICQodGhpcykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJylcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2VsZWN0b3JzQ29udGFpbmVyLmFwcGVuZCgkYnRuKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGVjdG9yc0NvbnRhaW5lci5zaG93KCkuYWRkQ2xhc3MoJ2NvbG9ycGlja2VyLXZpc2libGUnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IGNsb3NpbmcgdGhlIGNvbG9ycGlja2VyIHdoZW4gY2xpY2tpbmcgb24gaXRzZWxmXG4gICAgJHBpY2tlci5vbignbW91c2Vkb3duLmNvbG9ycGlja2VyIHRvdWNoc3RhcnQuY29sb3JwaWNrZXInLCAkLnByb3h5KGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKSk7XG5cbiAgICAvLyBCaW5kIGNsaWNrL3RhcCBldmVudHMgb24gdGhlIHNsaWRlcnNcbiAgICAkcGlja2VyLmZpbmQoJy5jb2xvcnBpY2tlci1zYXR1cmF0aW9uLCAuY29sb3JwaWNrZXItaHVlLCAuY29sb3JwaWNrZXItYWxwaGEnKVxuICAgICAgLm9uKCdtb3VzZWRvd24uY29sb3JwaWNrZXIgdG91Y2hzdGFydC5jb2xvcnBpY2tlcicsICQucHJveHkodGhpcy5tb3VzZWRvd24sIHRoaXMpKTtcblxuICAgICRwaWNrZXIuYXBwZW5kVG8odGhpcy5jb250YWluZXIgPyB0aGlzLmNvbnRhaW5lciA6ICQoJ2JvZHknKSk7XG5cbiAgICAvLyBCaW5kIG90aGVyIGV2ZW50c1xuICAgIGlmICh0aGlzLmlucHV0ICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy5pbnB1dC5vbih7XG4gICAgICAgICdrZXl1cC5jb2xvcnBpY2tlcic6ICQucHJveHkodGhpcy5rZXl1cCwgdGhpcylcbiAgICAgIH0pO1xuICAgICAgdGhpcy5pbnB1dC5vbih7XG4gICAgICAgICdjaGFuZ2UuY29sb3JwaWNrZXInOiAkLnByb3h5KHRoaXMuY2hhbmdlLCB0aGlzKVxuICAgICAgfSk7XG4gICAgICBpZiAodGhpcy5jb21wb25lbnQgPT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vbih7XG4gICAgICAgICAgJ2ZvY3VzLmNvbG9ycGlja2VyJzogJC5wcm94eSh0aGlzLnNob3csIHRoaXMpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmxpbmUgPT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vbih7XG4gICAgICAgICAgJ2ZvY3Vzb3V0LmNvbG9ycGlja2VyJzogJC5wcm94eSh0aGlzLmhpZGUsIHRoaXMpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbXBvbmVudCAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuY29tcG9uZW50Lm9uKHtcbiAgICAgICAgJ2NsaWNrLmNvbG9ycGlja2VyJzogJC5wcm94eSh0aGlzLnNob3csIHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoKHRoaXMuaW5wdXQgPT09IGZhbHNlKSAmJiAodGhpcy5jb21wb25lbnQgPT09IGZhbHNlKSkge1xuICAgICAgdGhpcy5lbGVtZW50Lm9uKHtcbiAgICAgICAgJ2NsaWNrLmNvbG9ycGlja2VyJzogJC5wcm94eSh0aGlzLnNob3csIHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBmb3IgSFRNTDUgaW5wdXRbdHlwZT0nY29sb3InXVxuICAgIGlmICgodGhpcy5pbnB1dCAhPT0gZmFsc2UpICYmICh0aGlzLmNvbXBvbmVudCAhPT0gZmFsc2UpICYmICh0aGlzLmlucHV0LmF0dHIoJ3R5cGUnKSA9PT0gJ2NvbG9yJykpIHtcblxuICAgICAgdGhpcy5pbnB1dC5vbih7XG4gICAgICAgICdjbGljay5jb2xvcnBpY2tlcic6ICQucHJveHkodGhpcy5zaG93LCB0aGlzKSxcbiAgICAgICAgJ2ZvY3VzLmNvbG9ycGlja2VyJzogJC5wcm94eSh0aGlzLnNob3csIHRoaXMpXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGUoKTtcblxuICAgICQoJC5wcm94eShmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKCdjcmVhdGUnKTtcbiAgICB9LCB0aGlzKSk7XG4gIH07XG5cbiAgQ29sb3JwaWNrZXIuQ29sb3IgPSBDb2xvcjtcblxuICBDb2xvcnBpY2tlci5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbG9ycGlja2VyLFxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5waWNrZXIucmVtb3ZlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRGF0YSgnY29sb3JwaWNrZXInLCAnY29sb3InKS5vZmYoJy5jb2xvcnBpY2tlcicpO1xuICAgICAgaWYgKHRoaXMuaW5wdXQgIT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuaW5wdXQub2ZmKCcuY29sb3JwaWNrZXInKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbXBvbmVudCAhPT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5jb21wb25lbnQub2ZmKCcuY29sb3JwaWNrZXInKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygnY29sb3JwaWNrZXItZWxlbWVudCcpO1xuICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAnZGVzdHJveSdcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVwb3NpdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmlubGluZSAhPT0gZmFsc2UgfHwgdGhpcy5vcHRpb25zLmNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgdHlwZSA9IHRoaXMuY29udGFpbmVyICYmIHRoaXMuY29udGFpbmVyWzBdICE9PSB3aW5kb3cuZG9jdW1lbnQuYm9keSA/ICdwb3NpdGlvbicgOiAnb2Zmc2V0JztcbiAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5jb21wb25lbnQgfHwgdGhpcy5lbGVtZW50O1xuICAgICAgdmFyIG9mZnNldCA9IGVsZW1lbnRbdHlwZV0oKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYWxpZ24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgb2Zmc2V0LmxlZnQgLT0gdGhpcy5waWNrZXIub3V0ZXJXaWR0aCgpIC0gZWxlbWVudC5vdXRlcldpZHRoKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnBpY2tlci5jc3Moe1xuICAgICAgICB0b3A6IG9mZnNldC50b3AgKyBlbGVtZW50Lm91dGVySGVpZ2h0KCksXG4gICAgICAgIGxlZnQ6IG9mZnNldC5sZWZ0XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHNob3c6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICh0aGlzLmlzRGlzYWJsZWQoKSkge1xuICAgICAgICAvLyBEb24ndCBzaG93IHRoZSB3aWRnZXQgaWYgaXQncyBkaXNhYmxlZCAodGhlIGlucHV0KVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnBpY2tlci5hZGRDbGFzcygnY29sb3JwaWNrZXItdmlzaWJsZScpLnJlbW92ZUNsYXNzKCdjb2xvcnBpY2tlci1oaWRkZW4nKTtcbiAgICAgIHRoaXMucmVwb3NpdGlvbigpO1xuICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUuY29sb3JwaWNrZXInLCAkLnByb3h5KHRoaXMucmVwb3NpdGlvbiwgdGhpcykpO1xuICAgICAgaWYgKGUgJiYgKCF0aGlzLmhhc0lucHV0KCkgfHwgdGhpcy5pbnB1dC5hdHRyKCd0eXBlJykgPT09ICdjb2xvcicpKSB7XG4gICAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbiAmJiBlLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodGhpcy5jb21wb25lbnQgfHwgIXRoaXMuaW5wdXQpICYmICh0aGlzLm9wdGlvbnMuaW5saW5lID09PSBmYWxzZSkpIHtcbiAgICAgICAgJCh3aW5kb3cuZG9jdW1lbnQpLm9uKHtcbiAgICAgICAgICAnbW91c2Vkb3duLmNvbG9ycGlja2VyJzogJC5wcm94eSh0aGlzLmhpZGUsIHRoaXMpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAnc2hvd1BpY2tlcicsXG4gICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGhpZGU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICgodHlwZW9mIGUgIT09ICd1bmRlZmluZWQnKSAmJiBlLnRhcmdldCkge1xuICAgICAgICAvLyBQcmV2ZW50IGhpZGUgaWYgdHJpZ2dlcmVkIGJ5IGFuIGV2ZW50IGFuZCBhbiBlbGVtZW50IGluc2lkZSB0aGUgY29sb3JwaWNrZXIgaGFzIGJlZW4gY2xpY2tlZC90b3VjaGVkXG4gICAgICAgIGlmIChcbiAgICAgICAgICAkKGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLmNvbG9ycGlja2VyJykubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICQoZS50YXJnZXQpLnBhcmVudHMoJy5jb2xvcnBpY2tlcicpLmxlbmd0aCA+IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnBpY2tlci5hZGRDbGFzcygnY29sb3JwaWNrZXItaGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2NvbG9ycGlja2VyLXZpc2libGUnKTtcbiAgICAgICQod2luZG93KS5vZmYoJ3Jlc2l6ZS5jb2xvcnBpY2tlcicsIHRoaXMucmVwb3NpdGlvbik7XG4gICAgICAkKHdpbmRvdy5kb2N1bWVudCkub2ZmKHtcbiAgICAgICAgJ21vdXNlZG93bi5jb2xvcnBpY2tlcic6IHRoaXMuaGlkZVxuICAgICAgfSk7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAnaGlkZVBpY2tlcicsXG4gICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHVwZGF0ZURhdGE6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgdmFsID0gdmFsIHx8IHRoaXMuY29sb3IudG9TdHJpbmcoZmFsc2UsIHRoaXMuZm9ybWF0KTtcbiAgICAgIHRoaXMuZWxlbWVudC5kYXRhKCdjb2xvcicsIHZhbCk7XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG4gICAgdXBkYXRlSW5wdXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgdmFsID0gdmFsIHx8IHRoaXMuY29sb3IudG9TdHJpbmcoZmFsc2UsIHRoaXMuZm9ybWF0KTtcbiAgICAgIGlmICh0aGlzLmlucHV0ICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmlucHV0LnByb3AoJ3ZhbHVlJywgdmFsKTtcbiAgICAgICAgdGhpcy5pbnB1dC50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfSxcbiAgICB1cGRhdGVQaWNrZXI6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMuY29sb3IgPSB0aGlzLmNyZWF0ZUNvbG9yKHZhbCk7XG4gICAgICB9XG4gICAgICB2YXIgc2wgPSAodGhpcy5vcHRpb25zLmhvcml6b250YWwgPT09IGZhbHNlKSA/IHRoaXMub3B0aW9ucy5zbGlkZXJzIDogdGhpcy5vcHRpb25zLnNsaWRlcnNIb3J6O1xuICAgICAgdmFyIGljbnMgPSB0aGlzLnBpY2tlci5maW5kKCdpJyk7XG4gICAgICBpZiAoaWNucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ob3Jpem9udGFsID09PSBmYWxzZSkge1xuICAgICAgICBzbCA9IHRoaXMub3B0aW9ucy5zbGlkZXJzO1xuICAgICAgICBpY25zLmVxKDEpLmNzcygndG9wJywgc2wuaHVlLm1heFRvcCAqICgxIC0gdGhpcy5jb2xvci52YWx1ZS5oKSkuZW5kKClcbiAgICAgICAgICAuZXEoMikuY3NzKCd0b3AnLCBzbC5hbHBoYS5tYXhUb3AgKiAoMSAtIHRoaXMuY29sb3IudmFsdWUuYSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2wgPSB0aGlzLm9wdGlvbnMuc2xpZGVyc0hvcno7XG4gICAgICAgIGljbnMuZXEoMSkuY3NzKCdsZWZ0Jywgc2wuaHVlLm1heExlZnQgKiAoMSAtIHRoaXMuY29sb3IudmFsdWUuaCkpLmVuZCgpXG4gICAgICAgICAgLmVxKDIpLmNzcygnbGVmdCcsIHNsLmFscGhhLm1heExlZnQgKiAoMSAtIHRoaXMuY29sb3IudmFsdWUuYSkpO1xuICAgICAgfVxuICAgICAgaWNucy5lcSgwKS5jc3Moe1xuICAgICAgICAndG9wJzogc2wuc2F0dXJhdGlvbi5tYXhUb3AgLSB0aGlzLmNvbG9yLnZhbHVlLmIgKiBzbC5zYXR1cmF0aW9uLm1heFRvcCxcbiAgICAgICAgJ2xlZnQnOiB0aGlzLmNvbG9yLnZhbHVlLnMgKiBzbC5zYXR1cmF0aW9uLm1heExlZnRcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnBpY2tlci5maW5kKCcuY29sb3JwaWNrZXItc2F0dXJhdGlvbicpXG4gICAgICAgIC5jc3MoJ2JhY2tncm91bmRDb2xvcicsIHRoaXMuY29sb3IudG9IZXgodHJ1ZSwgdGhpcy5jb2xvci52YWx1ZS5oLCAxLCAxLCAxKSk7XG5cbiAgICAgIHRoaXMucGlja2VyLmZpbmQoJy5jb2xvcnBpY2tlci1hbHBoYScpXG4gICAgICAgIC5jc3MoJ2JhY2tncm91bmRDb2xvcicsIHRoaXMuY29sb3IudG9IZXgodHJ1ZSkpO1xuXG4gICAgICB0aGlzLnBpY2tlci5maW5kKCcuY29sb3JwaWNrZXItY29sb3IsIC5jb2xvcnBpY2tlci1jb2xvciBkaXYnKVxuICAgICAgICAuY3NzKCdiYWNrZ3JvdW5kQ29sb3InLCB0aGlzLmNvbG9yLnRvU3RyaW5nKHRydWUsIHRoaXMuZm9ybWF0KSk7XG5cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfSxcbiAgICB1cGRhdGVDb21wb25lbnQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgdmFyIGNvbG9yO1xuXG4gICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29sb3IgPSB0aGlzLmNyZWF0ZUNvbG9yKHZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb2xvciA9IHRoaXMuY29sb3I7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNvbXBvbmVudCAhPT0gZmFsc2UpIHtcbiAgICAgICAgdmFyIGljbiA9IHRoaXMuY29tcG9uZW50LmZpbmQoJ2knKS5lcSgwKTtcbiAgICAgICAgaWYgKGljbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWNuLmNzcyh7XG4gICAgICAgICAgICAnYmFja2dyb3VuZENvbG9yJzogY29sb3IudG9TdHJpbmcodHJ1ZSwgdGhpcy5mb3JtYXQpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5jb21wb25lbnQuY3NzKHtcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kQ29sb3InOiBjb2xvci50b1N0cmluZyh0cnVlLCB0aGlzLmZvcm1hdClcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29sb3IudG9TdHJpbmcoZmFsc2UsIHRoaXMuZm9ybWF0KTtcbiAgICB9LFxuICAgIHVwZGF0ZTogZnVuY3Rpb24oZm9yY2UpIHtcbiAgICAgIHZhciB2YWw7XG4gICAgICBpZiAoKHRoaXMuZ2V0VmFsdWUoZmFsc2UpICE9PSBmYWxzZSkgfHwgKGZvcmNlID09PSB0cnVlKSkge1xuICAgICAgICAvLyBVcGRhdGUgaW5wdXQvZGF0YSBvbmx5IGlmIHRoZSBjdXJyZW50IHZhbHVlIGlzIG5vdCBlbXB0eVxuICAgICAgICB2YWwgPSB0aGlzLnVwZGF0ZUNvbXBvbmVudCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZUlucHV0KHZhbCk7XG4gICAgICAgIHRoaXMudXBkYXRlRGF0YSh2YWwpO1xuICAgICAgICB0aGlzLnVwZGF0ZVBpY2tlcigpOyAvLyBvbmx5IHVwZGF0ZSBwaWNrZXIgaWYgdmFsdWUgaXMgbm90IGVtcHR5XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsO1xuXG4gICAgfSxcbiAgICBzZXRWYWx1ZTogZnVuY3Rpb24odmFsKSB7IC8vIHNldCBjb2xvciBtYW51YWxseVxuICAgICAgdGhpcy5jb2xvciA9IHRoaXMuY3JlYXRlQ29sb3IodmFsKTtcbiAgICAgIHRoaXMudXBkYXRlKHRydWUpO1xuICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoe1xuICAgICAgICB0eXBlOiAnY2hhbmdlQ29sb3InLFxuICAgICAgICBjb2xvcjogdGhpcy5jb2xvcixcbiAgICAgICAgdmFsdWU6IHZhbFxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGNvbG9yIHVzaW5nIHRoZSBpbnN0YW5jZSBvcHRpb25zXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWxcbiAgICAgKiBAcmV0dXJucyB7Q29sb3J9XG4gICAgICovXG4gICAgY3JlYXRlQ29sb3I6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgdmFsID8gdmFsIDogbnVsbCxcbiAgICAgICAgdGhpcy5vcHRpb25zLmNvbG9yU2VsZWN0b3JzLFxuICAgICAgICB0aGlzLm9wdGlvbnMuZmFsbGJhY2tDb2xvciA/IHRoaXMub3B0aW9ucy5mYWxsYmFja0NvbG9yIDogdGhpcy5jb2xvcixcbiAgICAgICAgdGhpcy5vcHRpb25zLmZhbGxiYWNrRm9ybWF0LFxuICAgICAgICB0aGlzLm9wdGlvbnMuaGV4TnVtYmVyU2lnblByZWZpeFxuICAgICAgKTtcbiAgICB9LFxuICAgIGdldFZhbHVlOiBmdW5jdGlvbihkZWZhdWx0VmFsdWUpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9ICh0eXBlb2YgZGVmYXVsdFZhbHVlID09PSAndW5kZWZpbmVkJykgPyB0aGlzLm9wdGlvbnMuZmFsbGJhY2tDb2xvciA6IGRlZmF1bHRWYWx1ZTtcbiAgICAgIHZhciB2YWw7XG4gICAgICBpZiAodGhpcy5oYXNJbnB1dCgpKSB7XG4gICAgICAgIHZhbCA9IHRoaXMuaW5wdXQudmFsKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWwgPSB0aGlzLmVsZW1lbnQuZGF0YSgnY29sb3InKTtcbiAgICAgIH1cbiAgICAgIGlmICgodmFsID09PSB1bmRlZmluZWQpIHx8ICh2YWwgPT09ICcnKSB8fCAodmFsID09PSBudWxsKSkge1xuICAgICAgICAvLyBpZiBub3QgZGVmaW5lZCBvciBlbXB0eSwgcmV0dXJuIGRlZmF1bHRcbiAgICAgICAgdmFsID0gZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9LFxuICAgIGhhc0lucHV0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAodGhpcy5pbnB1dCAhPT0gZmFsc2UpO1xuICAgIH0sXG4gICAgaXNEaXNhYmxlZDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZDtcbiAgICB9LFxuICAgIGRpc2FibGU6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuaGFzSW5wdXQoKSkge1xuICAgICAgICB0aGlzLmlucHV0LnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKHtcbiAgICAgICAgdHlwZTogJ2Rpc2FibGUnLFxuICAgICAgICBjb2xvcjogdGhpcy5jb2xvcixcbiAgICAgICAgdmFsdWU6IHRoaXMuZ2V0VmFsdWUoKVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGVuYWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5oYXNJbnB1dCgpKSB7XG4gICAgICAgIHRoaXMuaW5wdXQucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmVsZW1lbnQudHJpZ2dlcih7XG4gICAgICAgIHR5cGU6ICdlbmFibGUnLFxuICAgICAgICBjb2xvcjogdGhpcy5jb2xvcixcbiAgICAgICAgdmFsdWU6IHRoaXMuZ2V0VmFsdWUoKVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGN1cnJlbnRTbGlkZXI6IG51bGwsXG4gICAgbW91c2VQb2ludGVyOiB7XG4gICAgICBsZWZ0OiAwLFxuICAgICAgdG9wOiAwXG4gICAgfSxcbiAgICBtb3VzZWRvd246IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICghZS5wYWdlWCAmJiAhZS5wYWdlWSAmJiBlLm9yaWdpbmFsRXZlbnQgJiYgZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXMpIHtcbiAgICAgICAgZS5wYWdlWCA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICBlLnBhZ2VZID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgICB9XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB2YXIgdGFyZ2V0ID0gJChlLnRhcmdldCk7XG5cbiAgICAgIC8vZGV0ZWN0IHRoZSBzbGlkZXIgYW5kIHNldCB0aGUgbGltaXRzIGFuZCBjYWxsYmFja3NcbiAgICAgIHZhciB6b25lID0gdGFyZ2V0LmNsb3Nlc3QoJ2RpdicpO1xuICAgICAgdmFyIHNsID0gdGhpcy5vcHRpb25zLmhvcml6b250YWwgPyB0aGlzLm9wdGlvbnMuc2xpZGVyc0hvcnogOiB0aGlzLm9wdGlvbnMuc2xpZGVycztcbiAgICAgIGlmICghem9uZS5pcygnLmNvbG9ycGlja2VyJykpIHtcbiAgICAgICAgaWYgKHpvbmUuaXMoJy5jb2xvcnBpY2tlci1zYXR1cmF0aW9uJykpIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZXIgPSAkLmV4dGVuZCh7fSwgc2wuc2F0dXJhdGlvbik7XG4gICAgICAgIH0gZWxzZSBpZiAoem9uZS5pcygnLmNvbG9ycGlja2VyLWh1ZScpKSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50U2xpZGVyID0gJC5leHRlbmQoe30sIHNsLmh1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoem9uZS5pcygnLmNvbG9ycGlja2VyLWFscGhhJykpIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZXIgPSAkLmV4dGVuZCh7fSwgc2wuYWxwaGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb2Zmc2V0ID0gem9uZS5vZmZzZXQoKTtcbiAgICAgICAgLy9yZWZlcmVuY2UgdG8gZ3VpZGUncyBzdHlsZVxuICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZXIuZ3VpZGUgPSB6b25lLmZpbmQoJ2knKVswXS5zdHlsZTtcbiAgICAgICAgdGhpcy5jdXJyZW50U2xpZGVyLmxlZnQgPSBlLnBhZ2VYIC0gb2Zmc2V0LmxlZnQ7XG4gICAgICAgIHRoaXMuY3VycmVudFNsaWRlci50b3AgPSBlLnBhZ2VZIC0gb2Zmc2V0LnRvcDtcbiAgICAgICAgdGhpcy5tb3VzZVBvaW50ZXIgPSB7XG4gICAgICAgICAgbGVmdDogZS5wYWdlWCxcbiAgICAgICAgICB0b3A6IGUucGFnZVlcbiAgICAgICAgfTtcbiAgICAgICAgLy90cmlnZ2VyIG1vdXNlbW92ZSB0byBtb3ZlIHRoZSBndWlkZSB0byB0aGUgY3VycmVudCBwb3NpdGlvblxuICAgICAgICAkKHdpbmRvdy5kb2N1bWVudCkub24oe1xuICAgICAgICAgICdtb3VzZW1vdmUuY29sb3JwaWNrZXInOiAkLnByb3h5KHRoaXMubW91c2Vtb3ZlLCB0aGlzKSxcbiAgICAgICAgICAndG91Y2htb3ZlLmNvbG9ycGlja2VyJzogJC5wcm94eSh0aGlzLm1vdXNlbW92ZSwgdGhpcyksXG4gICAgICAgICAgJ21vdXNldXAuY29sb3JwaWNrZXInOiAkLnByb3h5KHRoaXMubW91c2V1cCwgdGhpcyksXG4gICAgICAgICAgJ3RvdWNoZW5kLmNvbG9ycGlja2VyJzogJC5wcm94eSh0aGlzLm1vdXNldXAsIHRoaXMpXG4gICAgICAgIH0pLnRyaWdnZXIoJ21vdXNlbW92ZScpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgbW91c2Vtb3ZlOiBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoIWUucGFnZVggJiYgIWUucGFnZVkgJiYgZS5vcmlnaW5hbEV2ZW50ICYmIGUub3JpZ2luYWxFdmVudC50b3VjaGVzKSB7XG4gICAgICAgIGUucGFnZVggPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgZS5wYWdlWSA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VZO1xuICAgICAgfVxuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHZhciBsZWZ0ID0gTWF0aC5tYXgoXG4gICAgICAgIDAsXG4gICAgICAgIE1hdGgubWluKFxuICAgICAgICAgIHRoaXMuY3VycmVudFNsaWRlci5tYXhMZWZ0LFxuICAgICAgICAgIHRoaXMuY3VycmVudFNsaWRlci5sZWZ0ICsgKChlLnBhZ2VYIHx8IHRoaXMubW91c2VQb2ludGVyLmxlZnQpIC0gdGhpcy5tb3VzZVBvaW50ZXIubGVmdClcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIHZhciB0b3AgPSBNYXRoLm1heChcbiAgICAgICAgMCxcbiAgICAgICAgTWF0aC5taW4oXG4gICAgICAgICAgdGhpcy5jdXJyZW50U2xpZGVyLm1heFRvcCxcbiAgICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZXIudG9wICsgKChlLnBhZ2VZIHx8IHRoaXMubW91c2VQb2ludGVyLnRvcCkgLSB0aGlzLm1vdXNlUG9pbnRlci50b3ApXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICB0aGlzLmN1cnJlbnRTbGlkZXIuZ3VpZGUubGVmdCA9IGxlZnQgKyAncHgnO1xuICAgICAgdGhpcy5jdXJyZW50U2xpZGVyLmd1aWRlLnRvcCA9IHRvcCArICdweCc7XG4gICAgICBpZiAodGhpcy5jdXJyZW50U2xpZGVyLmNhbGxMZWZ0KSB7XG4gICAgICAgIHRoaXMuY29sb3JbdGhpcy5jdXJyZW50U2xpZGVyLmNhbGxMZWZ0XS5jYWxsKHRoaXMuY29sb3IsIGxlZnQgLyB0aGlzLmN1cnJlbnRTbGlkZXIubWF4TGVmdCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJyZW50U2xpZGVyLmNhbGxUb3ApIHtcbiAgICAgICAgdGhpcy5jb2xvclt0aGlzLmN1cnJlbnRTbGlkZXIuY2FsbFRvcF0uY2FsbCh0aGlzLmNvbG9yLCB0b3AgLyB0aGlzLmN1cnJlbnRTbGlkZXIubWF4VG9wKTtcbiAgICAgIH1cbiAgICAgIC8vIENoYW5nZSBmb3JtYXQgZHluYW1pY2FsbHlcbiAgICAgIC8vIE9ubHkgb2NjdXJzIGlmIHVzZXIgY2hvb3NlIHRoZSBkeW5hbWljIGZvcm1hdCBieVxuICAgICAgLy8gc2V0dGluZyBvcHRpb24gZm9ybWF0IHRvIGZhbHNlXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMub3B0aW9ucy5mb3JtYXQgPT09IGZhbHNlICYmXG4gICAgICAgICh0aGlzLmN1cnJlbnRTbGlkZXIuY2FsbFRvcCA9PT0gJ3NldEFscGhhJyB8fFxuICAgICAgICAgIHRoaXMuY3VycmVudFNsaWRlci5jYWxsTGVmdCA9PT0gJ3NldEFscGhhJylcbiAgICAgICkge1xuXG4gICAgICAgIC8vIENvbnZlcnRpbmcgZnJvbSBoZXggLyByZ2IgdG8gcmdiYVxuICAgICAgICBpZiAodGhpcy5jb2xvci52YWx1ZS5hICE9PSAxKSB7XG4gICAgICAgICAgdGhpcy5mb3JtYXQgPSAncmdiYSc7XG4gICAgICAgICAgdGhpcy5jb2xvci5vcmlnRm9ybWF0ID0gJ3JnYmEnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29udmVydGluZyBmcm9tIHJnYmEgdG8gaGV4XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHRoaXMuZm9ybWF0ID0gJ2hleCc7XG4gICAgICAgICAgdGhpcy5jb2xvci5vcmlnRm9ybWF0ID0gJ2hleCc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlKHRydWUpO1xuXG4gICAgICB0aGlzLmVsZW1lbnQudHJpZ2dlcih7XG4gICAgICAgIHR5cGU6ICdjaGFuZ2VDb2xvcicsXG4gICAgICAgIGNvbG9yOiB0aGlzLmNvbG9yXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuICAgIG1vdXNldXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkKHdpbmRvdy5kb2N1bWVudCkub2ZmKHtcbiAgICAgICAgJ21vdXNlbW92ZS5jb2xvcnBpY2tlcic6IHRoaXMubW91c2Vtb3ZlLFxuICAgICAgICAndG91Y2htb3ZlLmNvbG9ycGlja2VyJzogdGhpcy5tb3VzZW1vdmUsXG4gICAgICAgICdtb3VzZXVwLmNvbG9ycGlja2VyJzogdGhpcy5tb3VzZXVwLFxuICAgICAgICAndG91Y2hlbmQuY29sb3JwaWNrZXInOiB0aGlzLm1vdXNldXBcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgY2hhbmdlOiBmdW5jdGlvbihlKSB7XG4gICAgICB0aGlzLmtleXVwKGUpO1xuICAgIH0sXG4gICAga2V5dXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmICgoZS5rZXlDb2RlID09PSAzOCkpIHtcbiAgICAgICAgaWYgKHRoaXMuY29sb3IudmFsdWUuYSA8IDEpIHtcbiAgICAgICAgICB0aGlzLmNvbG9yLnZhbHVlLmEgPSBNYXRoLnJvdW5kKCh0aGlzLmNvbG9yLnZhbHVlLmEgKyAwLjAxKSAqIDEwMCkgLyAxMDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGUodHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKChlLmtleUNvZGUgPT09IDQwKSkge1xuICAgICAgICBpZiAodGhpcy5jb2xvci52YWx1ZS5hID4gMCkge1xuICAgICAgICAgIHRoaXMuY29sb3IudmFsdWUuYSA9IE1hdGgucm91bmQoKHRoaXMuY29sb3IudmFsdWUuYSAtIDAuMDEpICogMTAwKSAvIDEwMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZSh0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY29sb3IgPSB0aGlzLmNyZWF0ZUNvbG9yKHRoaXMuaW5wdXQudmFsKCkpO1xuICAgICAgICAvLyBDaGFuZ2UgZm9ybWF0IGR5bmFtaWNhbGx5XG4gICAgICAgIC8vIE9ubHkgb2NjdXJzIGlmIHVzZXIgY2hvb3NlIHRoZSBkeW5hbWljIGZvcm1hdCBieVxuICAgICAgICAvLyBzZXR0aW5nIG9wdGlvbiBmb3JtYXQgdG8gZmFsc2VcbiAgICAgICAgaWYgKHRoaXMuY29sb3Iub3JpZ0Zvcm1hdCAmJiB0aGlzLm9wdGlvbnMuZm9ybWF0ID09PSBmYWxzZSkge1xuICAgICAgICAgIHRoaXMuZm9ybWF0ID0gdGhpcy5jb2xvci5vcmlnRm9ybWF0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdldFZhbHVlKGZhbHNlKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZURhdGEoKTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudCgpO1xuICAgICAgICAgIHRoaXMudXBkYXRlUGlja2VyKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKHtcbiAgICAgICAgdHlwZTogJ2NoYW5nZUNvbG9yJyxcbiAgICAgICAgY29sb3I6IHRoaXMuY29sb3IsXG4gICAgICAgIHZhbHVlOiB0aGlzLmlucHV0LnZhbCgpXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgJC5jb2xvcnBpY2tlciA9IENvbG9ycGlja2VyO1xuXG4gICQuZm4uY29sb3JwaWNrZXIgPSBmdW5jdGlvbihvcHRpb24pIHtcbiAgICB2YXIgYXBpQXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSksXG4gICAgICBpc1NpbmdsZUVsZW1lbnQgPSAodGhpcy5sZW5ndGggPT09IDEpLFxuICAgICAgcmV0dXJuVmFsdWUgPSBudWxsO1xuXG4gICAgdmFyICRqcSA9IHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgIGluc3QgPSAkdGhpcy5kYXRhKCdjb2xvcnBpY2tlcicpLFxuICAgICAgICBvcHRpb25zID0gKCh0eXBlb2Ygb3B0aW9uID09PSAnb2JqZWN0JykgPyBvcHRpb24gOiB7fSk7XG5cbiAgICAgIGlmICghaW5zdCkge1xuICAgICAgICBpbnN0ID0gbmV3IENvbG9ycGlja2VyKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICAkdGhpcy5kYXRhKCdjb2xvcnBpY2tlcicsIGluc3QpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKCQuaXNGdW5jdGlvbihpbnN0W29wdGlvbl0pKSB7XG4gICAgICAgICAgcmV0dXJuVmFsdWUgPSBpbnN0W29wdGlvbl0uYXBwbHkoaW5zdCwgYXBpQXJncyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGl0cyBhIHByb3BlcnR5ID9cbiAgICAgICAgICBpZiAoYXBpQXJncy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIHNldCBwcm9wZXJ0eVxuICAgICAgICAgICAgaW5zdFtvcHRpb25dID0gYXBpQXJnc1swXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuVmFsdWUgPSBpbnN0W29wdGlvbl07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVyblZhbHVlID0gJHRoaXM7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGlzU2luZ2xlRWxlbWVudCA/IHJldHVyblZhbHVlIDogJGpxO1xuICB9O1xuXG4gICQuZm4uY29sb3JwaWNrZXIuY29uc3RydWN0b3IgPSBDb2xvcnBpY2tlcjtcblxufSkpO1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9ib290c3RyYXAtY29sb3JwaWNrZXIvZGlzdC9qcy9ib290c3RyYXAtY29sb3JwaWNrZXIuanNcbi8vIG1vZHVsZSBpZCA9IDI1MzNcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2533\n");

/***/ }),

/***/ 2534:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _color_input = __webpack_require__(2535);\n\nvar _color_input2 = _interopRequireDefault(_color_input);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ColorChooser = function (_React$Component) {\n    (0, _inherits3.default)(ColorChooser, _React$Component);\n\n    function ColorChooser() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        (0, _classCallCheck3.default)(this, ColorChooser);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = (0, _possibleConstructorReturn3.default)(this, (_ref = ColorChooser.__proto__ || (0, _getPrototypeOf2.default)(ColorChooser)).call.apply(_ref, [this].concat(args))), _this), _this.handleChange = function (newColor) {\n            var _this$props = _this.props,\n                id = _this$props.id,\n                handleChange = _this$props.onChange;\n\n            if (handleChange) {\n                handleChange(id, newColor);\n            }\n        }, _temp), (0, _possibleConstructorReturn3.default)(_this, _ret);\n    }\n\n    (0, _createClass3.default)(ColorChooser, [{\n        key: 'render',\n        value: function render() {\n            var _props = this.props,\n                label = _props.label,\n                color = _props.color;\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'label',\n                    { className: 'custom-label' },\n                    label\n                ),\n                _react2.default.createElement(_color_input2.default, {\n                    color: color,\n                    onChange: this.handleChange\n                })\n            );\n        }\n    }]);\n    return ColorChooser;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nColorChooser.propTypes = {\n\n    /*\n     * The id of setting that we will change\n     */\n    id: _propTypes2.default.string.isRequired,\n\n    /*\n     * The label of setting that we will choose\n     */\n    label: _propTypes2.default.string.isRequired,\n\n    /*\n     * Selected color\n     */\n    color: _propTypes2.default.string.isRequired,\n\n    /*\n     * Function called when color changed takes 2 arguments: Id of changing setting and new color\n     */\n    onChange: _propTypes2.default.func\n};\nexports.default = ColorChooser;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvY29sb3JfY2hvb3Nlci5qc3g/MmVmMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuXG5pbXBvcnQgQ29sb3JJbnB1dCBmcm9tICdjb21wb25lbnRzL2NvbG9yX2lucHV0JztcblxuY2xhc3MgQ29sb3JDaG9vc2VyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIFRoZSBpZCBvZiBzZXR0aW5nIHRoYXQgd2Ugd2lsbCBjaGFuZ2VcbiAgICAgICAgICovXG4gICAgICAgIGlkOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgLypcbiAgICAgICAgICogVGhlIGxhYmVsIG9mIHNldHRpbmcgdGhhdCB3ZSB3aWxsIGNob29zZVxuICAgICAgICAgKi9cbiAgICAgICAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblxuICAgICAgICAvKlxuICAgICAgICAgKiBTZWxlY3RlZCBjb2xvclxuICAgICAgICAgKi9cbiAgICAgICAgY29sb3I6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcblxuICAgICAgICAvKlxuICAgICAgICAgKiBGdW5jdGlvbiBjYWxsZWQgd2hlbiBjb2xvciBjaGFuZ2VkIHRha2VzIDIgYXJndW1lbnRzOiBJZCBvZiBjaGFuZ2luZyBzZXR0aW5nIGFuZCBuZXcgY29sb3JcbiAgICAgICAgICovXG4gICAgICAgIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuY1xuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZSA9IChuZXdDb2xvcikgPT4ge1xuICAgICAgICBjb25zdCB7aWQsIG9uQ2hhbmdlOiBoYW5kbGVDaGFuZ2V9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgaWYgKGhhbmRsZUNoYW5nZSkge1xuICAgICAgICAgICAgaGFuZGxlQ2hhbmdlKGlkLCBuZXdDb2xvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHtsYWJlbCwgY29sb3J9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nY3VzdG9tLWxhYmVsJz57bGFiZWx9PC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8Q29sb3JJbnB1dFxuICAgICAgICAgICAgICAgICAgICBjb2xvcj17Y29sb3J9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb2xvckNob29zZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy91c2VyX3NldHRpbmdzL2NvbG9yX2Nob29zZXIuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7Ozs7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7O0FBd0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFRQTs7O0FBMUNBO0FBUEE7QUFDQTtBQU1BO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFwQkE7QUE0Q0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2534\n");

/***/ }),

/***/ 2535:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(48);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactColor = __webpack_require__(2182);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar ColorInput = function (_React$Component) {\n    (0, _inherits3.default)(ColorInput, _React$Component);\n\n    function ColorInput(props) {\n        (0, _classCallCheck3.default)(this, ColorInput);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (ColorInput.__proto__ || (0, _getPrototypeOf2.default)(ColorInput)).call(this, props));\n\n        _this.checkClick = function (e) {\n            var colorPickerDOMNode = _reactDom2.default.findDOMNode(_this.colorPicker);\n            if (!colorPickerDOMNode.contains(e.target)) {\n                _this.setState({ isOpened: false });\n            }\n        };\n\n        _this.togglePicker = function () {\n            _this.setState({ isOpened: !_this.state.isOpened });\n        };\n\n        _this.handleChange = function (newColorData) {\n            var hex = newColorData.hex;\n            var handleChange = _this.props.onChange;\n\n\n            if (handleChange) {\n                handleChange(hex);\n            }\n        };\n\n        _this.state = {\n            idOpened: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(ColorInput, [{\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps, prevState) {\n            var prevIsOpened = prevState.isOpened;\n            var isOpened = this.state.isOpened;\n\n\n            if (isOpened !== prevIsOpened) {\n                if (isOpened) {\n                    document.addEventListener('click', this.checkClick);\n                } else {\n                    document.removeEventListener('click', this.checkClick);\n                }\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var color = this.props.color;\n            var isOpened = this.state.isOpened;\n\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'color-input input-group' },\n                _react2.default.createElement('input', {\n                    className: 'form-control',\n                    type: 'text',\n                    value: color,\n                    style: {\n                        background: '#fff'\n                    },\n                    readOnly: true\n                }),\n                _react2.default.createElement(\n                    'span',\n                    {\n                        className: 'input-group-addon',\n                        onClick: this.togglePicker\n                    },\n                    _react2.default.createElement('i', {\n                        className: 'color-icon',\n                        style: {\n                            backgroundColor: color\n                        }\n                    })\n                ),\n                isOpened && _react2.default.createElement(\n                    'div',\n                    {\n                        ref: function ref(item) {\n                            _this2.colorPicker = item;\n                        },\n                        className: 'color-popover'\n                    },\n                    _react2.default.createElement(_reactColor.ChromePicker, {\n                        color: color,\n                        onChange: this.handleChange\n                    })\n                )\n            );\n        }\n    }]);\n    return ColorInput;\n}(_react2.default.Component);\n\nColorInput.propTypes = {\n\n    /*\n     * Selected color\n     */\n    color: _propTypes2.default.string.isRequired,\n\n    /*\n     * Function called when color changed. Takes hex format of color Ex: #ffeec0\n     */\n    onChange: _propTypes2.default.func\n};\nexports.default = ColorInput;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2NvbG9yX2lucHV0LmpzeD80MDY1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERvbSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7Q2hyb21lUGlja2VyfSBmcm9tICdyZWFjdC1jb2xvcic7XG5cbmNsYXNzIENvbG9ySW5wdXQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG5cbiAgICAgICAgLypcbiAgICAgICAgICogU2VsZWN0ZWQgY29sb3JcbiAgICAgICAgICovXG4gICAgICAgIGNvbG9yOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgLypcbiAgICAgICAgICogRnVuY3Rpb24gY2FsbGVkIHdoZW4gY29sb3IgY2hhbmdlZC4gVGFrZXMgaGV4IGZvcm1hdCBvZiBjb2xvciBFeDogI2ZmZWVjMFxuICAgICAgICAgKi9cbiAgICAgICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGlkT3BlbmVkOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMsIHByZXZTdGF0ZSkge1xuICAgICAgICBjb25zdCB7aXNPcGVuZWQ6IHByZXZJc09wZW5lZH0gPSBwcmV2U3RhdGU7XG4gICAgICAgIGNvbnN0IHtpc09wZW5lZH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIGlmIChpc09wZW5lZCAhPT0gcHJldklzT3BlbmVkKSB7XG4gICAgICAgICAgICBpZiAoaXNPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2hlY2tDbGljayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jaGVja0NsaWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrQ2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICBjb25zdCBjb2xvclBpY2tlckRPTU5vZGUgPSBSZWFjdERvbS5maW5kRE9NTm9kZSh0aGlzLmNvbG9yUGlja2VyKTtcbiAgICAgICAgaWYgKCFjb2xvclBpY2tlckRPTU5vZGUuY29udGFpbnMoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc09wZW5lZDogZmFsc2V9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0b2dnbGVQaWNrZXIgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzT3BlbmVkOiAhdGhpcy5zdGF0ZS5pc09wZW5lZH0pO1xuICAgIH07XG5cbiAgICBoYW5kbGVDaGFuZ2UgPSAobmV3Q29sb3JEYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IHtoZXh9ID0gbmV3Q29sb3JEYXRhO1xuICAgICAgICBjb25zdCB7b25DaGFuZ2U6IGhhbmRsZUNoYW5nZX0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGlmIChoYW5kbGVDaGFuZ2UpIHtcbiAgICAgICAgICAgIGhhbmRsZUNoYW5nZShoZXgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge2NvbG9yfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHtpc09wZW5lZH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sb3ItaW5wdXQgaW5wdXQtZ3JvdXAnPlxuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tY29udHJvbCdcbiAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvbG9yfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJyNmZmYnXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5PXt0cnVlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdpbnB1dC1ncm91cC1hZGRvbidcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy50b2dnbGVQaWNrZXJ9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdjb2xvci1pY29uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICB7aXNPcGVuZWQgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9eyhpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xvclBpY2tlciA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdjb2xvci1wb3BvdmVyJ1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2hyb21lUGlja2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbG9ySW5wdXQ7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy9jb2xvcl9pbnB1dC5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBUEE7QUFDQTtBQUNBO0FBTUE7OztBQWNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExQkE7QUE0QkE7QUFDQTtBQUNBO0FBOUJBO0FBK0JBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXJDQTtBQUNBO0FBREE7QUFGQTtBQUtBO0FBQ0E7OztBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFzQkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFKQTtBQVdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBdEJBO0FBb0NBOzs7QUEvRkE7QUFDQTtBQURBO0FBQ0E7QUFFQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQVZBO0FBaUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2535\n");

/***/ }),

/***/ 2536:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PremadeThemeChooser = function (_React$Component) {\n    (0, _inherits3.default)(PremadeThemeChooser, _React$Component);\n\n    function PremadeThemeChooser(props) {\n        (0, _classCallCheck3.default)(this, PremadeThemeChooser);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (PremadeThemeChooser.__proto__ || (0, _getPrototypeOf2.default)(PremadeThemeChooser)).call(this, props));\n\n        _this.state = {};\n        return _this;\n    }\n\n    (0, _createClass3.default)(PremadeThemeChooser, [{\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var theme = this.props.theme;\n\n            var premadeThemes = [];\n            var allowedThemes = global.mm_config.AllowedThemes ? global.mm_config.AllowedThemes.split(',') : [];\n            var hasAllowedThemes = allowedThemes.length > 1 || allowedThemes[0] && allowedThemes[0].trim().length > 0;\n\n            for (var k in _constants2.default.THEMES) {\n                if (_constants2.default.THEMES.hasOwnProperty(k)) {\n                    var _ret = function () {\n                        if (hasAllowedThemes && allowedThemes.indexOf(k) < 0) {\n                            return 'continue';\n                        }\n\n                        var premadeTheme = _jquery2.default.extend(true, {}, _constants2.default.THEMES[k]);\n\n                        var activeClass = '';\n                        if (premadeTheme.type === theme.type) {\n                            activeClass = 'active';\n                        }\n\n                        premadeThemes.push(_react2.default.createElement(\n                            'div',\n                            {\n                                className: 'col-xs-6 col-sm-3 premade-themes',\n                                key: 'premade-theme-key' + k\n                            },\n                            _react2.default.createElement(\n                                'div',\n                                {\n                                    className: activeClass,\n                                    onClick: function onClick() {\n                                        return _this2.props.updateTheme(premadeTheme);\n                                    }\n                                },\n                                _react2.default.createElement(\n                                    'label',\n                                    null,\n                                    _react2.default.createElement('img', {\n                                        className: 'img-responsive',\n                                        src: premadeTheme.image\n                                    }),\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: 'theme-label' },\n                                        Utils.toTitleCase(premadeTheme.type)\n                                    )\n                                )\n                            )\n                        ));\n                    }();\n\n                    if (_ret === 'continue') continue;\n                }\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'row appearance-section' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'clearfix' },\n                    premadeThemes\n                )\n            );\n        }\n    }]);\n    return PremadeThemeChooser;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = PremadeThemeChooser;\n\n\nPremadeThemeChooser.propTypes = {\n    theme: _propTypes2.default.object.isRequired,\n    updateTheme: _propTypes2.default.func.isRequired\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvcHJlbWFkZV90aGVtZV9jaG9vc2VyLmpzeD9hNTk4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCBDb25zdGFudHMgZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVtYWRlVGhlbWVDaG9vc2VyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7fTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB0aGVtZSA9IHRoaXMucHJvcHMudGhlbWU7XG5cbiAgICAgICAgY29uc3QgcHJlbWFkZVRoZW1lcyA9IFtdO1xuICAgICAgICBjb25zdCBhbGxvd2VkVGhlbWVzID0gZ2xvYmFsLm1tX2NvbmZpZy5BbGxvd2VkVGhlbWVzID8gZ2xvYmFsLm1tX2NvbmZpZy5BbGxvd2VkVGhlbWVzLnNwbGl0KCcsJykgOiBbXTtcbiAgICAgICAgY29uc3QgaGFzQWxsb3dlZFRoZW1lcyA9IGFsbG93ZWRUaGVtZXMubGVuZ3RoID4gMSB8fCAoYWxsb3dlZFRoZW1lc1swXSAmJiBhbGxvd2VkVGhlbWVzWzBdLnRyaW0oKS5sZW5ndGggPiAwKTtcblxuICAgICAgICBmb3IgKGNvbnN0IGsgaW4gQ29uc3RhbnRzLlRIRU1FUykge1xuICAgICAgICAgICAgaWYgKENvbnN0YW50cy5USEVNRVMuaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFzQWxsb3dlZFRoZW1lcyAmJiBhbGxvd2VkVGhlbWVzLmluZGV4T2YoaykgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHByZW1hZGVUaGVtZSA9ICQuZXh0ZW5kKHRydWUsIHt9LCBDb25zdGFudHMuVEhFTUVTW2tdKTtcblxuICAgICAgICAgICAgICAgIGxldCBhY3RpdmVDbGFzcyA9ICcnO1xuICAgICAgICAgICAgICAgIGlmIChwcmVtYWRlVGhlbWUudHlwZSA9PT0gdGhlbWUudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVDbGFzcyA9ICdhY3RpdmUnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHByZW1hZGVUaGVtZXMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdjb2wteHMtNiBjb2wtc20tMyBwcmVtYWRlLXRoZW1lcydcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT17J3ByZW1hZGUtdGhlbWUta2V5JyArIGt9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2FjdGl2ZUNsYXNzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMucHJvcHMudXBkYXRlVGhlbWUocHJlbWFkZVRoZW1lKX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0naW1nLXJlc3BvbnNpdmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e3ByZW1hZGVUaGVtZS5pbWFnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RoZW1lLWxhYmVsJz57VXRpbHMudG9UaXRsZUNhc2UocHJlbWFkZVRoZW1lLnR5cGUpfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncm93IGFwcGVhcmFuY2Utc2VjdGlvbic+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NsZWFyZml4Jz5cbiAgICAgICAgICAgICAgICAgICAge3ByZW1hZGVUaGVtZXN9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblByZW1hZGVUaGVtZUNob29zZXIucHJvcFR5cGVzID0ge1xuICAgIHRoZW1lOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXG4gICAgdXBkYXRlVGhlbWU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWRcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy91c2VyX3NldHRpbmdzL3ByZW1hZGVfdGhlbWVfY2hvb3Nlci5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7Ozs7O0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFDQTs7O0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFMQTtBQUpBO0FBSkE7QUFiQTtBQUNBO0FBREE7QUErQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQURBO0FBTUE7OztBQXREQTtBQVZBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUF1REE7QUFDQTtBQUNBO0FBRkE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2536\n");

/***/ }),

/***/ 2537:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(33);\n\nvar _redux = __webpack_require__(22);\n\nvar _users = __webpack_require__(62);\n\nvar _user_settings_general = __webpack_require__(2538);\n\nvar _user_settings_general2 = _interopRequireDefault(_user_settings_general);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapStateToProps(state, ownProps) {\n    return (0, _extends3.default)({}, ownProps);\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: (0, _redux.bindActionCreators)({\n            getMe: _users.getMe\n        }, dispatch)\n    };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_user_settings_general2.default);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19nZW5lcmFsL2luZGV4LmpzP2U2ZDMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE3IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IHtjb25uZWN0fSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQge2JpbmRBY3Rpb25DcmVhdG9yc30gZnJvbSAncmVkdXgnO1xuXG5pbXBvcnQge2dldE1lfSBmcm9tICdtYXR0ZXJtb3N0LXJlZHV4L2FjdGlvbnMvdXNlcnMnO1xuXG5pbXBvcnQgVXNlclNldHRpbmdzR2VuZXJhbFRhYiBmcm9tICcuL3VzZXJfc2V0dGluZ3NfZ2VuZXJhbC5qc3gnO1xuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUsIG93blByb3BzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ub3duUHJvcHNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBtYXBEaXNwYXRjaFRvUHJvcHMoZGlzcGF0Y2gpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBhY3Rpb25zOiBiaW5kQWN0aW9uQ3JlYXRvcnMoe1xuICAgICAgICAgICAgZ2V0TWVcbiAgICAgICAgfSwgZGlzcGF0Y2gpXG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChtYXBTdGF0ZVRvUHJvcHMsIG1hcERpc3BhdGNoVG9Qcm9wcykoVXNlclNldHRpbmdzR2VuZXJhbFRhYik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy91c2VyX3NldHRpbmdzL3VzZXJfc2V0dGluZ3NfZ2VuZXJhbC9pbmRleC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBVEE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2537\n");

/***/ }),

/***/ 2538:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _assign = __webpack_require__(42);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _diagnostics_actions = __webpack_require__(239);\n\nvar _user_actions = __webpack_require__(71);\n\nvar _error_store = __webpack_require__(210);\n\nvar _error_store2 = _interopRequireDefault(_error_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _setting_item_max = __webpack_require__(770);\n\nvar _setting_item_max2 = _interopRequireDefault(_setting_item_max);\n\nvar _setting_item_min = __webpack_require__(771);\n\nvar _setting_item_min2 = _interopRequireDefault(_setting_item_min);\n\nvar _setting_picture = __webpack_require__(2539);\n\nvar _setting_picture2 = _interopRequireDefault(_setting_picture);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar holders = (0, _reactIntl.defineMessages)({\n    usernameReserved: {\n        id: 'user.settings.general.usernameReserved',\n        defaultMessage: 'This username is reserved, please choose a new one.'\n    },\n    usernameRestrictions: {\n        id: 'user.settings.general.usernameRestrictions',\n        defaultMessage: \"Username must begin with a letter, and contain between {min} to {max} lowercase characters made up of numbers, letters, and the symbols '.', '-', and '_'.\"\n    },\n    validEmail: {\n        id: 'user.settings.general.validEmail',\n        defaultMessage: 'Please enter a valid email address.'\n    },\n    emailMatch: {\n        id: 'user.settings.general.emailMatch',\n        defaultMessage: 'The new emails you entered do not match.'\n    },\n    checkEmail: {\n        id: 'user.settings.general.checkEmail',\n        defaultMessage: 'Check your email at {email} to verify the address.'\n    },\n    validImage: {\n        id: 'user.settings.general.validImage',\n        defaultMessage: 'Only JPG or PNG images may be used for profile pictures'\n    },\n    imageTooLarge: {\n        id: 'user.settings.general.imageTooLarge',\n        defaultMessage: 'Unable to upload profile image. File is too large.'\n    },\n    uploadImage: {\n        id: 'user.settings.general.uploadImage',\n        defaultMessage: \"Click 'Edit' to upload an image.\"\n    },\n    uploadImageMobile: {\n        id: 'user.settings.general.mobile.uploadImage',\n        defaultMessage: 'Click to upload an image.'\n    },\n    fullName: {\n        id: 'user.settings.general.fullName',\n        defaultMessage: 'Full Name'\n    },\n    nickname: {\n        id: 'user.settings.general.nickname',\n        defaultMessage: 'Nickname'\n    },\n    username: {\n        id: 'user.settings.general.username',\n        defaultMessage: 'Username'\n    },\n    profilePicture: {\n        id: 'user.settings.general.profilePicture',\n        defaultMessage: 'Profile Picture'\n    },\n    close: {\n        id: 'user.settings.general.close',\n        defaultMessage: 'Close'\n    },\n    position: {\n        id: 'user.settings.general.position',\n        defaultMessage: 'Position'\n    }\n});\n\nvar UserSettingsGeneralTab = function (_React$Component) {\n    (0, _inherits3.default)(UserSettingsGeneralTab, _React$Component);\n\n    function UserSettingsGeneralTab(props) {\n        (0, _classCallCheck3.default)(this, UserSettingsGeneralTab);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (UserSettingsGeneralTab.__proto__ || (0, _getPrototypeOf2.default)(UserSettingsGeneralTab)).call(this, props));\n\n        _this.submitActive = false;\n\n        _this.submitUsername = _this.submitUsername.bind(_this);\n        _this.submitNickname = _this.submitNickname.bind(_this);\n        _this.submitName = _this.submitName.bind(_this);\n        _this.submitEmail = _this.submitEmail.bind(_this);\n        _this.submitUser = _this.submitUser.bind(_this);\n        _this.submitPicture = _this.submitPicture.bind(_this);\n        _this.submitPosition = _this.submitPosition.bind(_this);\n\n        _this.updateUsername = _this.updateUsername.bind(_this);\n        _this.updateFirstName = _this.updateFirstName.bind(_this);\n        _this.updateLastName = _this.updateLastName.bind(_this);\n        _this.updateNickname = _this.updateNickname.bind(_this);\n        _this.updateEmail = _this.updateEmail.bind(_this);\n        _this.updateConfirmEmail = _this.updateConfirmEmail.bind(_this);\n        _this.updatePicture = _this.updatePicture.bind(_this);\n        _this.updateSection = _this.updateSection.bind(_this);\n        _this.updatePosition = _this.updatePosition.bind(_this);\n\n        _this.state = _this.setupInitialState(props);\n        return _this;\n    }\n\n    (0, _createClass3.default)(UserSettingsGeneralTab, [{\n        key: 'submitUsername',\n        value: function submitUsername(e) {\n            e.preventDefault();\n\n            var user = (0, _assign2.default)({}, this.props.user);\n            var username = this.state.username.trim().toLowerCase();\n\n            var formatMessage = this.props.intl.formatMessage;\n\n            var usernameError = Utils.isValidUsername(username);\n            if (usernameError === 'Cannot use a reserved word as a username.') {\n                this.setState({ clientError: formatMessage(holders.usernameReserved), serverError: '' });\n                return;\n            } else if (usernameError) {\n                this.setState({ clientError: formatMessage(holders.usernameRestrictions, { min: _constants2.default.MIN_USERNAME_LENGTH, max: _constants2.default.MAX_USERNAME_LENGTH }), serverError: '' });\n                return;\n            }\n\n            if (user.username === username) {\n                this.updateSection('');\n                return;\n            }\n\n            user.username = username;\n\n            (0, _diagnostics_actions.trackEvent)('settings', 'user_settings_update', { field: 'username' });\n\n            this.submitUser(user, _constants2.default.UserUpdateEvents.USERNAME, false);\n        }\n    }, {\n        key: 'submitNickname',\n        value: function submitNickname(e) {\n            e.preventDefault();\n\n            var user = (0, _assign2.default)({}, this.props.user);\n            var nickname = this.state.nickname.trim();\n\n            if (user.nickname === nickname) {\n                this.updateSection('');\n                return;\n            }\n\n            user.nickname = nickname;\n\n            (0, _diagnostics_actions.trackEvent)('settings', 'user_settings_update', { field: 'username' });\n\n            this.submitUser(user, _constants2.default.UserUpdateEvents.NICKNAME, false);\n        }\n    }, {\n        key: 'submitName',\n        value: function submitName(e) {\n            e.preventDefault();\n\n            var user = (0, _assign2.default)({}, this.props.user);\n            var firstName = this.state.firstName.trim();\n            var lastName = this.state.lastName.trim();\n\n            if (user.first_name === firstName && user.last_name === lastName) {\n                this.updateSection('');\n                return;\n            }\n\n            user.first_name = firstName;\n            user.last_name = lastName;\n\n            (0, _diagnostics_actions.trackEvent)('settings', 'user_settings_update', { field: 'fullname' });\n\n            this.submitUser(user, _constants2.default.UserUpdateEvents.FULLNAME, false);\n        }\n    }, {\n        key: 'submitEmail',\n        value: function submitEmail(e) {\n            e.preventDefault();\n\n            var user = (0, _assign2.default)({}, this.props.user);\n            var email = this.state.email.trim().toLowerCase();\n            var confirmEmail = this.state.confirmEmail.trim().toLowerCase();\n\n            var formatMessage = this.props.intl.formatMessage;\n\n\n            if (email === user.email && (confirmEmail === '' || confirmEmail === user.email)) {\n                this.updateSection('');\n                return;\n            }\n\n            if (email === '' || !Utils.isEmail(email)) {\n                this.setState({ emailError: formatMessage(holders.validEmail), clientError: '', serverError: '' });\n                return;\n            }\n\n            if (email !== confirmEmail) {\n                this.setState({ emailError: formatMessage(holders.emailMatch), clientError: '', serverError: '' });\n                return;\n            }\n\n            user.email = email;\n            (0, _diagnostics_actions.trackEvent)('settings', 'user_settings_update', { field: 'email' });\n            this.submitUser(user, _constants2.default.UserUpdateEvents.EMAIL, true);\n        }\n    }, {\n        key: 'submitUser',\n        value: function submitUser(user, type, emailUpdated) {\n            var _this2 = this;\n\n            this.setState({ sectionIsSaving: true });\n\n            (0, _user_actions.updateUser)(user, type, function () {\n                _this2.updateSection('');\n                _this2.props.actions.getMe();\n                var verificationEnabled = global.window.mm_config.SendEmailNotifications === 'true' && global.window.mm_config.RequireEmailVerification === 'true' && emailUpdated;\n\n                if (verificationEnabled) {\n                    _error_store2.default.storeLastError({ message: _this2.props.intl.formatMessage(holders.checkEmail, { email: user.email }) });\n                    _error_store2.default.emitChange();\n                    _this2.setState({ emailChangeInProgress: true });\n                }\n            }, function (err) {\n                var serverError = void 0;\n                if (err.message) {\n                    serverError = err.message;\n                } else {\n                    serverError = err;\n                }\n                _this2.setState({ serverError: serverError, emailError: '', clientError: '', sectionIsSaving: false });\n            });\n        }\n    }, {\n        key: 'submitPicture',\n        value: function submitPicture(e) {\n            var _this3 = this;\n\n            e.preventDefault();\n\n            if (!this.state.pictureFile) {\n                return;\n            }\n\n            if (!this.submitActive) {\n                return;\n            }\n\n            (0, _diagnostics_actions.trackEvent)('settings', 'user_settings_update', { field: 'picture' });\n\n            var formatMessage = this.props.intl.formatMessage;\n\n            var file = this.state.pictureFile;\n\n            if (file.type !== 'image/jpeg' && file.type !== 'image/png') {\n                this.setState({ clientError: formatMessage(holders.validImage), serverError: '' });\n                return;\n            } else if (file.size > this.state.maxFileSize) {\n                this.setState({ clientError: formatMessage(holders.imageTooLarge), serverError: '' });\n                return;\n            }\n\n            this.setState({ loadingPicture: true });\n\n            (0, _user_actions.uploadProfileImage)(file, function () {\n                _this3.updateSection('');\n                _this3.submitActive = false;\n            }, function (err) {\n                var state = _this3.setupInitialState(_this3.props);\n                state.serverError = err.message;\n                _this3.setState(state);\n            });\n        }\n    }, {\n        key: 'submitPosition',\n        value: function submitPosition(e) {\n            e.preventDefault();\n\n            var user = (0, _assign2.default)({}, this.props.user);\n            var position = this.state.position.trim();\n\n            if (user.position === position) {\n                this.updateSection('');\n                return;\n            }\n\n            user.position = position;\n\n            (0, _diagnostics_actions.trackEvent)('settings', 'user_settings_update', { field: 'position' });\n\n            this.submitUser(user, _constants2.default.UserUpdateEvents.Position, false);\n        }\n    }, {\n        key: 'updateUsername',\n        value: function updateUsername(e) {\n            this.setState({ username: e.target.value });\n        }\n    }, {\n        key: 'updateFirstName',\n        value: function updateFirstName(e) {\n            this.setState({ firstName: e.target.value });\n        }\n    }, {\n        key: 'updateLastName',\n        value: function updateLastName(e) {\n            this.setState({ lastName: e.target.value });\n        }\n    }, {\n        key: 'updateNickname',\n        value: function updateNickname(e) {\n            this.setState({ nickname: e.target.value });\n        }\n    }, {\n        key: 'updatePosition',\n        value: function updatePosition(e) {\n            this.setState({ position: e.target.value });\n        }\n    }, {\n        key: 'updateEmail',\n        value: function updateEmail(e) {\n            this.setState({ email: e.target.value });\n        }\n    }, {\n        key: 'updateConfirmEmail',\n        value: function updateConfirmEmail(e) {\n            this.setState({ confirmEmail: e.target.value });\n        }\n    }, {\n        key: 'updatePicture',\n        value: function updatePicture(e) {\n            if (e.target.files && e.target.files[0]) {\n                this.setState({ pictureFile: e.target.files[0] });\n\n                this.submitActive = true;\n                this.setState({ clientError: null });\n            } else {\n                this.setState({ pictureFile: null });\n            }\n        }\n    }, {\n        key: 'updateSection',\n        value: function updateSection(section) {\n            var emailChangeInProgress = this.state.emailChangeInProgress;\n            this.setState((0, _assign2.default)({}, this.setupInitialState(this.props), { emailChangeInProgress: emailChangeInProgress, clientError: '', serverError: '', emailError: '', sectionIsSaving: false }));\n            this.submitActive = false;\n            this.props.updateSection(section);\n        }\n    }, {\n        key: 'setupInitialState',\n        value: function setupInitialState(props) {\n            var user = props.user;\n\n            return {\n                username: user.username,\n                firstName: user.first_name,\n                lastName: user.last_name,\n                nickname: user.nickname,\n                position: user.position,\n                originalEmail: user.email,\n                email: '',\n                confirmEmail: '',\n                pictureFile: null,\n                loadingPicture: false,\n                emailChangeInProgress: false,\n                maxFileSize: global.window.mm_config.MaxFileSize,\n                sectionIsSaving: false\n            };\n        }\n    }, {\n        key: 'createEmailSection',\n        value: function createEmailSection() {\n            var _this4 = this;\n\n            var emailSection = void 0;\n\n            if (this.props.activeSection === 'email') {\n                var emailEnabled = global.window.mm_config.SendEmailNotifications === 'true';\n                var emailVerificationEnabled = global.window.mm_config.RequireEmailVerification === 'true';\n                var inputs = [];\n\n                var helpText = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.general.emailHelp1',\n                    defaultMessage: 'Email is used for sign-in, notifications, and password reset. Email requires verification if changed.'\n                });\n\n                if (!emailEnabled) {\n                    helpText = _react2.default.createElement(\n                        'div',\n                        { className: 'setting-list__hint col-sm-12 text-danger' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.emailHelp2',\n                            defaultMessage: 'Email has been disabled by your System Administrator. No notification emails will be sent until it is enabled.'\n                        })\n                    );\n                } else if (!emailVerificationEnabled) {\n                    helpText = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.emailHelp3',\n                        defaultMessage: 'Email is used for sign-in, notifications, and password reset.'\n                    });\n                } else if (this.state.emailChangeInProgress) {\n                    var newEmail = _user_store2.default.getCurrentUser().email;\n                    if (newEmail) {\n                        helpText = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.emailHelp4',\n                            defaultMessage: 'A verification email was sent to {email}.',\n                            values: {\n                                email: newEmail\n                            }\n                        });\n                    }\n                }\n\n                var submit = null;\n\n                if (this.props.user.auth_service === '') {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        { key: 'currentEmailSetting' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'form-group' },\n                            _react2.default.createElement(\n                                'label',\n                                { className: 'col-sm-5 control-label' },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.general.currentEmail',\n                                    defaultMessage: 'Current Email'\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col-sm-7' },\n                                _react2.default.createElement(\n                                    'label',\n                                    { className: 'control-label' },\n                                    this.state.originalEmail\n                                )\n                            )\n                        )\n                    ));\n\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        { key: 'emailSetting' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'form-group' },\n                            _react2.default.createElement(\n                                'label',\n                                { className: 'col-sm-5 control-label' },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.general.newEmail',\n                                    defaultMessage: 'New Email'\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col-sm-7' },\n                                _react2.default.createElement('input', {\n                                    id: 'primaryEmail',\n                                    className: 'form-control',\n                                    type: 'email',\n                                    onChange: this.updateEmail,\n                                    value: this.state.email\n                                })\n                            )\n                        )\n                    ));\n\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        { key: 'confirmEmailSetting' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'form-group' },\n                            _react2.default.createElement(\n                                'label',\n                                { className: 'col-sm-5 control-label' },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.general.confirmEmail',\n                                    defaultMessage: 'Confirm Email'\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col-sm-7' },\n                                _react2.default.createElement('input', {\n                                    id: 'confirmEmail',\n                                    className: 'form-control',\n                                    type: 'email',\n                                    onChange: this.updateConfirmEmail,\n                                    value: this.state.confirmEmail\n                                })\n                            )\n                        ),\n                        helpText\n                    ));\n\n                    submit = this.submitEmail;\n                } else if (this.props.user.auth_service === _constants2.default.GITLAB_SERVICE) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'oauthEmailInfo',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-list__hint col-sm-12' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.general.emailGitlabCantUpdate',\n                                defaultMessage: 'Login occurs through GitLab. Email cannot be updated. Email address used for notifications is {email}.',\n                                values: {\n                                    email: this.state.originalEmail\n                                }\n                            })\n                        ),\n                        helpText\n                    ));\n                } else if (this.props.user.auth_service === _constants2.default.GOOGLE_SERVICE) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'oauthEmailInfo',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-list__hint col-sm-12' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.general.emailGoogleCantUpdate',\n                                defaultMessage: 'Login occurs through Google Apps. Email cannot be updated. Email address used for notifications is {email}.',\n                                values: {\n                                    email: this.state.originalEmail\n                                }\n                            })\n                        ),\n                        helpText\n                    ));\n                } else if (this.props.user.auth_service === _constants2.default.OFFICE365_SERVICE) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'oauthEmailInfo',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-list__hint col-sm-12' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.general.emailOffice365CantUpdate',\n                                defaultMessage: 'Login occurs through Office 365. Email cannot be updated. Email address used for notifications is {email}.',\n                                values: {\n                                    email: this.state.originalEmail\n                                }\n                            })\n                        ),\n                        helpText\n                    ));\n                } else if (this.props.user.auth_service === _constants2.default.LDAP_SERVICE) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'oauthEmailInfo',\n                            className: 'padding-bottom'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-list__hint col-sm-12' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.general.emailLdapCantUpdate',\n                                defaultMessage: 'Login occurs through AD/LDAP. Email cannot be updated. Email address used for notifications is {email}.',\n                                values: {\n                                    email: this.state.originalEmail\n                                }\n                            })\n                        )\n                    ));\n                } else if (this.props.user.auth_service === _constants2.default.SAML_SERVICE) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'oauthEmailInfo',\n                            className: 'padding-bottom'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-list__hint col-sm-12' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.general.emailSamlCantUpdate',\n                                defaultMessage: 'Login occurs through SAML. Email cannot be updated. Email address used for notifications is {email}.',\n                                values: {\n                                    email: this.state.originalEmail\n                                }\n                            })\n                        ),\n                        helpText\n                    ));\n                }\n\n                emailSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.email',\n                        defaultMessage: 'Email'\n                    }),\n                    inputs: inputs,\n                    submit: submit,\n                    saving: this.state.sectionIsSaving,\n                    server_error: this.state.serverError,\n                    client_error: this.state.emailError,\n                    updateSection: function updateSection(e) {\n                        _this4.updateSection('');\n                        e.preventDefault();\n                    }\n                });\n            } else {\n                var describe = '';\n                if (this.props.user.auth_service === '') {\n                    if (this.state.emailChangeInProgress) {\n                        var _newEmail = _user_store2.default.getCurrentUser().email;\n                        if (_newEmail) {\n                            describe = _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                                id: 'user.settings.general.newAddress',\n                                defaultMessage: 'New Address: {email}<br />Check your email to verify the above address.',\n                                values: {\n                                    email: _newEmail\n                                }\n                            });\n                        } else {\n                            describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.general.checkEmailNoAddress',\n                                defaultMessage: 'Check your email to verify your new address'\n                            });\n                        }\n                    } else {\n                        describe = _user_store2.default.getCurrentUser().email;\n                    }\n                } else if (this.props.user.auth_service === _constants2.default.GITLAB_SERVICE) {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.loginGitlab',\n                        defaultMessage: 'Login done through GitLab ({email})',\n                        values: {\n                            email: this.state.originalEmail\n                        }\n                    });\n                } else if (this.props.user.auth_service === _constants2.default.GOOGLE_SERVICE) {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.loginGoogle',\n                        defaultMessage: 'Login done through Google Apps ({email})',\n                        values: {\n                            email: this.state.originalEmail\n                        }\n                    });\n                } else if (this.props.user.auth_service === _constants2.default.OFFICE365_SERVICE) {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.loginOffice365',\n                        defaultMessage: 'Login done through Office 365 ({email})',\n                        values: {\n                            email: this.state.originalEmail\n                        }\n                    });\n                } else if (this.props.user.auth_service === _constants2.default.LDAP_SERVICE) {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.loginLdap',\n                        defaultMessage: 'Login done through AD/LDAP ({email})',\n                        values: {\n                            email: this.state.originalEmail\n                        }\n                    });\n                } else if (this.props.user.auth_service === _constants2.default.SAML_SERVICE) {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.loginSaml',\n                        defaultMessage: 'Login done through SAML ({email})',\n                        values: {\n                            email: this.state.originalEmail\n                        }\n                    });\n                }\n\n                emailSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.email',\n                        defaultMessage: 'Email'\n                    }),\n                    describe: describe,\n                    updateSection: function updateSection() {\n                        _this4.updateSection('email');\n                    }\n                });\n            }\n\n            return emailSection;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this5 = this;\n\n            var user = this.props.user;\n            var formatMessage = this.props.intl.formatMessage;\n\n\n            var clientError = null;\n            if (this.state.clientError) {\n                clientError = this.state.clientError;\n            }\n            var serverError = null;\n            if (this.state.serverError) {\n                serverError = this.state.serverError;\n            }\n\n            var nameSection = void 0;\n            var inputs = [];\n\n            if (this.props.activeSection === 'name') {\n                var extraInfo = void 0;\n                var submit = null;\n                if (this.props.user.auth_service === 'ldap' && (global.window.mm_config.LdapFristNameAttributeSet === 'true' || global.window.mm_config.LdapLastNameAttributeSet === 'true') || this.props.user.auth_service === _constants2.default.SAML_SERVICE && (global.window.mm_config.SamlFirstNameAttributeSet === 'true' || global.window.mm_config.SamlLastNameAttributeSet === 'true')) {\n                    extraInfo = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.field_handled_externally',\n                            defaultMessage: 'This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\n                        })\n                    );\n                } else {\n                    var notifClick = function notifClick(e) {\n                        e.preventDefault();\n                        this.updateSection('');\n                        this.props.updateTab('notifications');\n                    };\n\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'firstNameSetting',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'col-sm-5 control-label' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.general.firstName',\n                                defaultMessage: 'First Name'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-sm-7' },\n                            _react2.default.createElement('input', {\n                                id: 'firstName',\n                                className: 'form-control',\n                                type: 'text',\n                                onChange: this.updateFirstName,\n                                value: this.state.firstName\n                            })\n                        )\n                    ));\n\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'lastNameSetting',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'col-sm-5 control-label' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.general.lastName',\n                                defaultMessage: 'Last Name'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-sm-7' },\n                            _react2.default.createElement('input', {\n                                id: 'lastName',\n                                className: 'form-control',\n                                type: 'text',\n                                onChange: this.updateLastName,\n                                value: this.state.lastName\n                            })\n                        )\n                    ));\n\n                    var notifLink = _react2.default.createElement(\n                        'a',\n                        {\n                            href: '#',\n                            onClick: notifClick.bind(this)\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.notificationsLink',\n                            defaultMessage: 'Notifications'\n                        })\n                    );\n\n                    extraInfo = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.notificationsExtra',\n                            defaultMessage: 'By default, you will receive mention notifications when someone types your first name. Go to {notify} settings to change this default.',\n                            values: {\n                                notify: notifLink\n                            }\n                        })\n                    );\n\n                    submit = this.submitName;\n                }\n\n                nameSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: formatMessage(holders.fullName),\n                    inputs: inputs,\n                    submit: submit,\n                    saving: this.state.sectionIsSaving,\n                    server_error: serverError,\n                    client_error: clientError,\n                    updateSection: function updateSection(e) {\n                        _this5.updateSection('');\n                        e.preventDefault();\n                    },\n                    extraInfo: extraInfo\n                });\n            } else {\n                var describe = '';\n\n                if (user.first_name && user.last_name) {\n                    describe = user.first_name + ' ' + user.last_name;\n                } else if (user.first_name) {\n                    describe = user.first_name;\n                } else if (user.last_name) {\n                    describe = user.last_name;\n                } else {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.emptyName',\n                        defaultMessage: 'Click \\'Edit\\' to add your full name'\n                    });\n                    if (Utils.isMobile()) {\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.mobile.emptyName',\n                            defaultMessage: 'Click to add your full name'\n                        });\n                    }\n                }\n\n                nameSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: formatMessage(holders.fullName),\n                    describe: describe,\n                    updateSection: function updateSection() {\n                        _this5.updateSection('name');\n                    }\n                });\n            }\n\n            var nicknameSection = void 0;\n            if (this.props.activeSection === 'nickname') {\n                var _extraInfo = void 0;\n                var _submit = null;\n                if (this.props.user.auth_service === 'ldap' && global.window.mm_config.LdapNicknameAttributeSet || this.props.user.auth_service === _constants2.default.SAML_SERVICE && global.window.mm_config.LdapNicknameAttributeSet) {\n                    _extraInfo = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.field_handled_externally',\n                            defaultMessage: 'This field is handled through your login provider. If you want to change it, you need to do so though your login provider.'\n                        })\n                    );\n                } else {\n                    var nicknameLabel = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.nickname',\n                        defaultMessage: 'Nickname'\n                    });\n                    if (Utils.isMobile()) {\n                        nicknameLabel = '';\n                    }\n\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'nicknameSetting',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'col-sm-5 control-label' },\n                            nicknameLabel\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-sm-7' },\n                            _react2.default.createElement('input', {\n                                id: 'nickname',\n                                className: 'form-control',\n                                type: 'text',\n                                onChange: this.updateNickname,\n                                value: this.state.nickname,\n                                maxLength: _constants2.default.MAX_NICKNAME_LENGTH,\n                                autoCapitalize: 'off'\n                            })\n                        )\n                    ));\n\n                    _extraInfo = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.nicknameExtra',\n                            defaultMessage: 'Use Nickname for a name you might be called that is different from your first name and username. This is most often used when two or more people have similar sounding names and usernames.'\n                        })\n                    );\n\n                    _submit = this.submitNickname;\n                }\n\n                nicknameSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: formatMessage(holders.nickname),\n                    inputs: inputs,\n                    submit: _submit,\n                    saving: this.state.sectionIsSaving,\n                    server_error: serverError,\n                    client_error: clientError,\n                    updateSection: function updateSection(e) {\n                        _this5.updateSection('');\n                        e.preventDefault();\n                    },\n                    extraInfo: _extraInfo\n                });\n            } else {\n                var _describe = '';\n                if (user.nickname) {\n                    _describe = user.nickname;\n                } else {\n                    _describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.emptyNickname',\n                        defaultMessage: 'Click \\'Edit\\' to add a nickname'\n                    });\n                    if (Utils.isMobile()) {\n                        _describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.mobile.emptyNickname',\n                            defaultMessage: 'Click to add a nickname'\n                        });\n                    }\n                }\n\n                nicknameSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: formatMessage(holders.nickname),\n                    describe: _describe,\n                    updateSection: function updateSection() {\n                        _this5.updateSection('nickname');\n                    }\n                });\n            }\n\n            var usernameSection = void 0;\n            if (this.props.activeSection === 'username') {\n                var _extraInfo2 = void 0;\n                var _submit2 = null;\n                if (this.props.user.auth_service === '') {\n                    var usernameLabel = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.username',\n                        defaultMessage: 'Username'\n                    });\n                    if (Utils.isMobile()) {\n                        usernameLabel = '';\n                    }\n\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'usernameSetting',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'col-sm-5 control-label' },\n                            usernameLabel\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-sm-7' },\n                            _react2.default.createElement('input', {\n                                id: 'username',\n                                maxLength: _constants2.default.MAX_USERNAME_LENGTH,\n                                className: 'form-control',\n                                type: 'text',\n                                onChange: this.updateUsername,\n                                value: this.state.username,\n                                autoCapitalize: 'off'\n                            })\n                        )\n                    ));\n\n                    _extraInfo2 = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.usernameInfo',\n                            defaultMessage: 'Pick something easy for teammates to recognize and recall.'\n                        })\n                    );\n\n                    _submit2 = this.submitUsername;\n                } else {\n                    _extraInfo2 = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.field_handled_externally',\n                            defaultMessage: 'This field is handled through your login provider. If you want to change it, you need to do so though your login provider.'\n                        })\n                    );\n                }\n\n                usernameSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: formatMessage(holders.username),\n                    inputs: inputs,\n                    submit: _submit2,\n                    saving: this.state.sectionIsSaving,\n                    server_error: serverError,\n                    client_error: clientError,\n                    updateSection: function updateSection(e) {\n                        _this5.updateSection('');\n                        e.preventDefault();\n                    },\n                    extraInfo: _extraInfo2\n                });\n            } else {\n                usernameSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: formatMessage(holders.username),\n                    describe: _user_store2.default.getCurrentUser().username,\n                    updateSection: function updateSection() {\n                        _this5.updateSection('username');\n                    }\n                });\n            }\n\n            var positionSection = void 0;\n            if (this.props.activeSection === 'position') {\n                var _extraInfo3 = void 0;\n                var _submit3 = null;\n                if ((this.props.user.auth_service === 'ldap' || this.props.user.auth_service === _constants2.default.SAML_SERVICE) && global.window.mm_config.PositionAttributeSet === 'true') {\n                    _extraInfo3 = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.field_handled_externally',\n                            defaultMessage: 'This field is handled through your login provider. If you want to change it, you need to do so though your login provider.'\n                        })\n                    );\n                } else {\n                    var positionLabel = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.position',\n                        defaultMessage: 'Position'\n                    });\n                    if (Utils.isMobile()) {\n                        positionLabel = '';\n                    }\n\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'positionSetting',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'col-sm-5 control-label' },\n                            positionLabel\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-sm-7' },\n                            _react2.default.createElement('input', {\n                                id: 'position',\n                                className: 'form-control',\n                                type: 'text',\n                                onChange: this.updatePosition,\n                                value: this.state.position,\n                                maxLength: _constants2.default.MAX_POSITION_LENGTH,\n                                autoCapitalize: 'off'\n                            })\n                        )\n                    ));\n\n                    _extraInfo3 = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.positionExtra',\n                            defaultMessage: 'Use Position for your role or job title. This will be shown in your profile popover.'\n                        })\n                    );\n\n                    _submit3 = this.submitPosition;\n                }\n\n                positionSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: formatMessage(holders.position),\n                    inputs: inputs,\n                    submit: _submit3,\n                    saving: this.state.sectionIsSaving,\n                    server_error: serverError,\n                    client_error: clientError,\n                    updateSection: function updateSection(e) {\n                        _this5.updateSection('');\n                        e.preventDefault();\n                    },\n                    extraInfo: _extraInfo3\n                });\n            } else {\n                var _describe2 = '';\n                if (user.position) {\n                    _describe2 = user.position;\n                } else {\n                    _describe2 = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.emptyPosition',\n                        defaultMessage: 'Click \\'Edit\\' to add your job title / position'\n                    });\n                    if (Utils.isMobile()) {\n                        _describe2 = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.mobile.emptyPosition',\n                            defaultMessage: 'Click to add your job title / position'\n                        });\n                    }\n                }\n\n                positionSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: formatMessage(holders.position),\n                    describe: _describe2,\n                    updateSection: function updateSection() {\n                        _this5.updateSection('position');\n                    }\n                });\n            }\n\n            var emailSection = this.createEmailSection();\n\n            var pictureSection = void 0;\n            if (this.props.activeSection === 'picture') {\n                pictureSection = _react2.default.createElement(_setting_picture2.default, {\n                    title: formatMessage(holders.profilePicture),\n                    submit: this.submitPicture,\n                    src: Utils.imageURLForUser(user),\n                    serverError: serverError,\n                    clientError: clientError,\n                    updateSection: function updateSection(e) {\n                        _this5.updateSection('');\n                        e.preventDefault();\n                    },\n                    file: this.state.pictureFile,\n                    onFileChange: this.updatePicture,\n                    submitActive: this.submitActive,\n                    loadingPicture: this.state.loadingPicture\n                });\n            } else {\n                var minMessage = formatMessage(holders.uploadImage);\n                if (Utils.isMobile()) {\n                    minMessage = formatMessage(holders.uploadImageMobile);\n                }\n                if (user.last_picture_update) {\n                    minMessage = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.general.imageUpdated',\n                        defaultMessage: 'Image last updated {date}',\n                        values: {\n                            date: _react2.default.createElement(_reactIntl.FormattedDate, {\n                                value: new Date(user.last_picture_update),\n                                day: '2-digit',\n                                month: 'short',\n                                year: 'numeric'\n                            })\n                        }\n                    });\n                }\n                pictureSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: formatMessage(holders.profilePicture),\n                    describe: minMessage,\n                    updateSection: function updateSection() {\n                        _this5.updateSection('picture');\n                    }\n                });\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'div',\n                    { className: 'modal-header' },\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            id: 'closeUserSettings',\n                            type: 'button',\n                            className: 'close',\n                            'data-dismiss': 'modal',\n                            'aria-label': formatMessage(holders.close),\n                            onClick: this.props.closeModal\n                        },\n                        _react2.default.createElement(\n                            'span',\n                            { 'aria-hidden': 'true' },\n                            ''\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'h4',\n                        {\n                            className: 'modal-title',\n                            ref: 'title'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-back' },\n                            _react2.default.createElement('i', {\n                                className: 'fa fa-angle-left',\n                                onClick: this.props.collapseModal\n                            })\n                        ),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.title',\n                            defaultMessage: 'General Settings'\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'user-settings' },\n                    _react2.default.createElement(\n                        'h3',\n                        { className: 'tab-header' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.general.title',\n                            defaultMessage: 'General Settings'\n                        })\n                    ),\n                    _react2.default.createElement('div', { className: 'divider-dark first' }),\n                    nameSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    usernameSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    nicknameSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    positionSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    emailSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    pictureSection,\n                    _react2.default.createElement('div', { className: 'divider-dark' })\n                )\n            );\n        }\n    }]);\n    return UserSettingsGeneralTab;\n}(_react2.default.Component);\n\nUserSettingsGeneralTab.propTypes = {\n    intl: _reactIntl.intlShape.isRequired,\n    user: _propTypes2.default.object.isRequired,\n    updateSection: _propTypes2.default.func.isRequired,\n    updateTab: _propTypes2.default.func.isRequired,\n    activeSection: _propTypes2.default.string.isRequired,\n    closeModal: _propTypes2.default.func.isRequired,\n    collapseModal: _propTypes2.default.func.isRequired,\n    actions: _propTypes2.default.shape({\n        getMe: _propTypes2.default.func.isRequired\n    }).isRequired\n};\nexports.default = (0, _reactIntl.injectIntl)(UserSettingsGeneralTab);\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19nZW5lcmFsL3VzZXJfc2V0dGluZ3NfZ2VuZXJhbC5qc3g/ZGZkYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtkZWZpbmVNZXNzYWdlcywgRm9ybWF0dGVkRGF0ZSwgRm9ybWF0dGVkSFRNTE1lc3NhZ2UsIEZvcm1hdHRlZE1lc3NhZ2UsIGluamVjdEludGwsIGludGxTaGFwZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCB7dHJhY2tFdmVudH0gZnJvbSAnYWN0aW9ucy9kaWFnbm9zdGljc19hY3Rpb25zLmpzeCc7XG5pbXBvcnQge3VwZGF0ZVVzZXIsIHVwbG9hZFByb2ZpbGVJbWFnZX0gZnJvbSAnYWN0aW9ucy91c2VyX2FjdGlvbnMuanN4JztcbmltcG9ydCBFcnJvclN0b3JlIGZyb20gJ3N0b3Jlcy9lcnJvcl9zdG9yZS5qc3gnO1xuaW1wb3J0IFVzZXJTdG9yZSBmcm9tICdzdG9yZXMvdXNlcl9zdG9yZS5qc3gnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAndXRpbHMvdXRpbHMuanN4JztcblxuaW1wb3J0IFNldHRpbmdJdGVtTWF4IGZyb20gJ2NvbXBvbmVudHMvc2V0dGluZ19pdGVtX21heC5qc3gnO1xuaW1wb3J0IFNldHRpbmdJdGVtTWluIGZyb20gJ2NvbXBvbmVudHMvc2V0dGluZ19pdGVtX21pbi5qc3gnO1xuaW1wb3J0IFNldHRpbmdQaWN0dXJlIGZyb20gJ2NvbXBvbmVudHMvc2V0dGluZ19waWN0dXJlLmpzeCc7XG5cbmNvbnN0IGhvbGRlcnMgPSBkZWZpbmVNZXNzYWdlcyh7XG4gICAgdXNlcm5hbWVSZXNlcnZlZDoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC51c2VybmFtZVJlc2VydmVkJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdUaGlzIHVzZXJuYW1lIGlzIHJlc2VydmVkLCBwbGVhc2UgY2hvb3NlIGEgbmV3IG9uZS4nXG4gICAgfSxcbiAgICB1c2VybmFtZVJlc3RyaWN0aW9uczoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC51c2VybmFtZVJlc3RyaWN0aW9ucycsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiBcIlVzZXJuYW1lIG11c3QgYmVnaW4gd2l0aCBhIGxldHRlciwgYW5kIGNvbnRhaW4gYmV0d2VlbiB7bWlufSB0byB7bWF4fSBsb3dlcmNhc2UgY2hhcmFjdGVycyBtYWRlIHVwIG9mIG51bWJlcnMsIGxldHRlcnMsIGFuZCB0aGUgc3ltYm9scyAnLicsICctJywgYW5kICdfJy5cIlxuICAgIH0sXG4gICAgdmFsaWRFbWFpbDoge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC52YWxpZEVtYWlsJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLidcbiAgICB9LFxuICAgIGVtYWlsTWF0Y2g6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmdlbmVyYWwuZW1haWxNYXRjaCcsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnVGhlIG5ldyBlbWFpbHMgeW91IGVudGVyZWQgZG8gbm90IG1hdGNoLidcbiAgICB9LFxuICAgIGNoZWNrRW1haWw6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmdlbmVyYWwuY2hlY2tFbWFpbCcsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnQ2hlY2sgeW91ciBlbWFpbCBhdCB7ZW1haWx9IHRvIHZlcmlmeSB0aGUgYWRkcmVzcy4nXG4gICAgfSxcbiAgICB2YWxpZEltYWdlOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5nZW5lcmFsLnZhbGlkSW1hZ2UnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ09ubHkgSlBHIG9yIFBORyBpbWFnZXMgbWF5IGJlIHVzZWQgZm9yIHByb2ZpbGUgcGljdHVyZXMnXG4gICAgfSxcbiAgICBpbWFnZVRvb0xhcmdlOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5nZW5lcmFsLmltYWdlVG9vTGFyZ2UnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VuYWJsZSB0byB1cGxvYWQgcHJvZmlsZSBpbWFnZS4gRmlsZSBpcyB0b28gbGFyZ2UuJ1xuICAgIH0sXG4gICAgdXBsb2FkSW1hZ2U6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmdlbmVyYWwudXBsb2FkSW1hZ2UnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogXCJDbGljayAnRWRpdCcgdG8gdXBsb2FkIGFuIGltYWdlLlwiXG4gICAgfSxcbiAgICB1cGxvYWRJbWFnZU1vYmlsZToge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5tb2JpbGUudXBsb2FkSW1hZ2UnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ0NsaWNrIHRvIHVwbG9hZCBhbiBpbWFnZS4nXG4gICAgfSxcbiAgICBmdWxsTmFtZToge1xuICAgICAgICBpZDogJ3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5mdWxsTmFtZScsXG4gICAgICAgIGRlZmF1bHRNZXNzYWdlOiAnRnVsbCBOYW1lJ1xuICAgIH0sXG4gICAgbmlja25hbWU6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmdlbmVyYWwubmlja25hbWUnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ05pY2tuYW1lJ1xuICAgIH0sXG4gICAgdXNlcm5hbWU6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmdlbmVyYWwudXNlcm5hbWUnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1VzZXJuYW1lJ1xuICAgIH0sXG4gICAgcHJvZmlsZVBpY3R1cmU6IHtcbiAgICAgICAgaWQ6ICd1c2VyLnNldHRpbmdzLmdlbmVyYWwucHJvZmlsZVBpY3R1cmUnLFxuICAgICAgICBkZWZhdWx0TWVzc2FnZTogJ1Byb2ZpbGUgUGljdHVyZSdcbiAgICB9LFxuICAgIGNsb3NlOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5nZW5lcmFsLmNsb3NlJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdDbG9zZSdcbiAgICB9LFxuICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIGlkOiAndXNlci5zZXR0aW5ncy5nZW5lcmFsLnBvc2l0aW9uJyxcbiAgICAgICAgZGVmYXVsdE1lc3NhZ2U6ICdQb3NpdGlvbidcbiAgICB9XG59KTtcblxuY2xhc3MgVXNlclNldHRpbmdzR2VuZXJhbFRhYiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgaW50bDogaW50bFNoYXBlLmlzUmVxdWlyZWQsXG4gICAgICAgIHVzZXI6IFByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcbiAgICAgICAgdXBkYXRlU2VjdGlvbjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgICAgdXBkYXRlVGFiOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgICBhY3RpdmVTZWN0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIGNsb3NlTW9kYWw6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgICAgIGNvbGxhcHNlTW9kYWw6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgICAgIGFjdGlvbnM6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgICAgICBnZXRNZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuICAgICAgICB9KS5pc1JlcXVpcmVkXG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN1Ym1pdEFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuc3VibWl0VXNlcm5hbWUgPSB0aGlzLnN1Ym1pdFVzZXJuYW1lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VibWl0Tmlja25hbWUgPSB0aGlzLnN1Ym1pdE5pY2tuYW1lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VibWl0TmFtZSA9IHRoaXMuc3VibWl0TmFtZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1Ym1pdEVtYWlsID0gdGhpcy5zdWJtaXRFbWFpbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1Ym1pdFVzZXIgPSB0aGlzLnN1Ym1pdFVzZXIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zdWJtaXRQaWN0dXJlID0gdGhpcy5zdWJtaXRQaWN0dXJlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3VibWl0UG9zaXRpb24gPSB0aGlzLnN1Ym1pdFBvc2l0aW9uLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVVc2VybmFtZSA9IHRoaXMudXBkYXRlVXNlcm5hbWUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVGaXJzdE5hbWUgPSB0aGlzLnVwZGF0ZUZpcnN0TmFtZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZUxhc3ROYW1lID0gdGhpcy51cGRhdGVMYXN0TmFtZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZU5pY2tuYW1lID0gdGhpcy51cGRhdGVOaWNrbmFtZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZUVtYWlsID0gdGhpcy51cGRhdGVFbWFpbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbmZpcm1FbWFpbCA9IHRoaXMudXBkYXRlQ29uZmlybUVtYWlsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlUGljdHVyZSA9IHRoaXMudXBkYXRlUGljdHVyZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24gPSB0aGlzLnVwZGF0ZVNlY3Rpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbiA9IHRoaXMudXBkYXRlUG9zaXRpb24uYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5zZXR1cEluaXRpYWxTdGF0ZShwcm9wcyk7XG4gICAgfVxuXG4gICAgc3VibWl0VXNlcm5hbWUoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgY29uc3QgdXNlciA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvcHMudXNlcik7XG4gICAgICAgIGNvbnN0IHVzZXJuYW1lID0gdGhpcy5zdGF0ZS51c2VybmFtZS50cmltKCkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBjb25zdCB7Zm9ybWF0TWVzc2FnZX0gPSB0aGlzLnByb3BzLmludGw7XG4gICAgICAgIGNvbnN0IHVzZXJuYW1lRXJyb3IgPSBVdGlscy5pc1ZhbGlkVXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICBpZiAodXNlcm5hbWVFcnJvciA9PT0gJ0Nhbm5vdCB1c2UgYSByZXNlcnZlZCB3b3JkIGFzIGEgdXNlcm5hbWUuJykge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y2xpZW50RXJyb3I6IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy51c2VybmFtZVJlc2VydmVkKSwgc2VydmVyRXJyb3I6ICcnfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZiAodXNlcm5hbWVFcnJvcikge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y2xpZW50RXJyb3I6IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy51c2VybmFtZVJlc3RyaWN0aW9ucywge21pbjogQ29uc3RhbnRzLk1JTl9VU0VSTkFNRV9MRU5HVEgsIG1heDogQ29uc3RhbnRzLk1BWF9VU0VSTkFNRV9MRU5HVEh9KSwgc2VydmVyRXJyb3I6ICcnfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlci51c2VybmFtZSA9PT0gdXNlcm5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB1c2VyLnVzZXJuYW1lID0gdXNlcm5hbWU7XG5cbiAgICAgICAgdHJhY2tFdmVudCgnc2V0dGluZ3MnLCAndXNlcl9zZXR0aW5nc191cGRhdGUnLCB7ZmllbGQ6ICd1c2VybmFtZSd9KTtcblxuICAgICAgICB0aGlzLnN1Ym1pdFVzZXIodXNlciwgQ29uc3RhbnRzLlVzZXJVcGRhdGVFdmVudHMuVVNFUk5BTUUsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBzdWJtaXROaWNrbmFtZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCB1c2VyID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9wcy51c2VyKTtcbiAgICAgICAgY29uc3Qgbmlja25hbWUgPSB0aGlzLnN0YXRlLm5pY2tuYW1lLnRyaW0oKTtcblxuICAgICAgICBpZiAodXNlci5uaWNrbmFtZSA9PT0gbmlja25hbWUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB1c2VyLm5pY2tuYW1lID0gbmlja25hbWU7XG5cbiAgICAgICAgdHJhY2tFdmVudCgnc2V0dGluZ3MnLCAndXNlcl9zZXR0aW5nc191cGRhdGUnLCB7ZmllbGQ6ICd1c2VybmFtZSd9KTtcblxuICAgICAgICB0aGlzLnN1Ym1pdFVzZXIodXNlciwgQ29uc3RhbnRzLlVzZXJVcGRhdGVFdmVudHMuTklDS05BTUUsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBzdWJtaXROYW1lKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IHVzZXIgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb3BzLnVzZXIpO1xuICAgICAgICBjb25zdCBmaXJzdE5hbWUgPSB0aGlzLnN0YXRlLmZpcnN0TmFtZS50cmltKCk7XG4gICAgICAgIGNvbnN0IGxhc3ROYW1lID0gdGhpcy5zdGF0ZS5sYXN0TmFtZS50cmltKCk7XG5cbiAgICAgICAgaWYgKHVzZXIuZmlyc3RfbmFtZSA9PT0gZmlyc3ROYW1lICYmIHVzZXIubGFzdF9uYW1lID09PSBsYXN0TmFtZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCcnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHVzZXIuZmlyc3RfbmFtZSA9IGZpcnN0TmFtZTtcbiAgICAgICAgdXNlci5sYXN0X25hbWUgPSBsYXN0TmFtZTtcblxuICAgICAgICB0cmFja0V2ZW50KCdzZXR0aW5ncycsICd1c2VyX3NldHRpbmdzX3VwZGF0ZScsIHtmaWVsZDogJ2Z1bGxuYW1lJ30pO1xuXG4gICAgICAgIHRoaXMuc3VibWl0VXNlcih1c2VyLCBDb25zdGFudHMuVXNlclVwZGF0ZUV2ZW50cy5GVUxMTkFNRSwgZmFsc2UpO1xuICAgIH1cblxuICAgIHN1Ym1pdEVtYWlsKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGNvbnN0IHVzZXIgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb3BzLnVzZXIpO1xuICAgICAgICBjb25zdCBlbWFpbCA9IHRoaXMuc3RhdGUuZW1haWwudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGNvbmZpcm1FbWFpbCA9IHRoaXMuc3RhdGUuY29uZmlybUVtYWlsLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGNvbnN0IHtmb3JtYXRNZXNzYWdlfSA9IHRoaXMucHJvcHMuaW50bDtcblxuICAgICAgICBpZiAoZW1haWwgPT09IHVzZXIuZW1haWwgJiYgKGNvbmZpcm1FbWFpbCA9PT0gJycgfHwgY29uZmlybUVtYWlsID09PSB1c2VyLmVtYWlsKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCcnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbWFpbCA9PT0gJycgfHwgIVV0aWxzLmlzRW1haWwoZW1haWwpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtlbWFpbEVycm9yOiBmb3JtYXRNZXNzYWdlKGhvbGRlcnMudmFsaWRFbWFpbCksIGNsaWVudEVycm9yOiAnJywgc2VydmVyRXJyb3I6ICcnfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW1haWwgIT09IGNvbmZpcm1FbWFpbCkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZW1haWxFcnJvcjogZm9ybWF0TWVzc2FnZShob2xkZXJzLmVtYWlsTWF0Y2gpLCBjbGllbnRFcnJvcjogJycsIHNlcnZlckVycm9yOiAnJ30pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdXNlci5lbWFpbCA9IGVtYWlsO1xuICAgICAgICB0cmFja0V2ZW50KCdzZXR0aW5ncycsICd1c2VyX3NldHRpbmdzX3VwZGF0ZScsIHtmaWVsZDogJ2VtYWlsJ30pO1xuICAgICAgICB0aGlzLnN1Ym1pdFVzZXIodXNlciwgQ29uc3RhbnRzLlVzZXJVcGRhdGVFdmVudHMuRU1BSUwsIHRydWUpO1xuICAgIH1cblxuICAgIHN1Ym1pdFVzZXIodXNlciwgdHlwZSwgZW1haWxVcGRhdGVkKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlY3Rpb25Jc1NhdmluZzogdHJ1ZX0pO1xuXG4gICAgICAgIHVwZGF0ZVVzZXIodXNlciwgdHlwZSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuYWN0aW9ucy5nZXRNZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZlcmlmaWNhdGlvbkVuYWJsZWQgPSBnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5TZW5kRW1haWxOb3RpZmljYXRpb25zID09PSAndHJ1ZScgJiYgZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuUmVxdWlyZUVtYWlsVmVyaWZpY2F0aW9uID09PSAndHJ1ZScgJiYgZW1haWxVcGRhdGVkO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZlcmlmaWNhdGlvbkVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgRXJyb3JTdG9yZS5zdG9yZUxhc3RFcnJvcih7bWVzc2FnZTogdGhpcy5wcm9wcy5pbnRsLmZvcm1hdE1lc3NhZ2UoaG9sZGVycy5jaGVja0VtYWlsLCB7ZW1haWw6IHVzZXIuZW1haWx9KX0pO1xuICAgICAgICAgICAgICAgICAgICBFcnJvclN0b3JlLmVtaXRDaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZW1haWxDaGFuZ2VJblByb2dyZXNzOiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc2VydmVyRXJyb3I7XG4gICAgICAgICAgICAgICAgaWYgKGVyci5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckVycm9yID0gZXJyLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlcnZlckVycm9yLCBlbWFpbEVycm9yOiAnJywgY2xpZW50RXJyb3I6ICcnLCBzZWN0aW9uSXNTYXZpbmc6IGZhbHNlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgc3VibWl0UGljdHVyZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUucGljdHVyZUZpbGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5zdWJtaXRBY3RpdmUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyYWNrRXZlbnQoJ3NldHRpbmdzJywgJ3VzZXJfc2V0dGluZ3NfdXBkYXRlJywge2ZpZWxkOiAncGljdHVyZSd9KTtcblxuICAgICAgICBjb25zdCB7Zm9ybWF0TWVzc2FnZX0gPSB0aGlzLnByb3BzLmludGw7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnN0YXRlLnBpY3R1cmVGaWxlO1xuXG4gICAgICAgIGlmIChmaWxlLnR5cGUgIT09ICdpbWFnZS9qcGVnJyAmJiBmaWxlLnR5cGUgIT09ICdpbWFnZS9wbmcnKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjbGllbnRFcnJvcjogZm9ybWF0TWVzc2FnZShob2xkZXJzLnZhbGlkSW1hZ2UpLCBzZXJ2ZXJFcnJvcjogJyd9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlLnNpemUgPiB0aGlzLnN0YXRlLm1heEZpbGVTaXplKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjbGllbnRFcnJvcjogZm9ybWF0TWVzc2FnZShob2xkZXJzLmltYWdlVG9vTGFyZ2UpLCBzZXJ2ZXJFcnJvcjogJyd9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2xvYWRpbmdQaWN0dXJlOiB0cnVlfSk7XG5cbiAgICAgICAgdXBsb2FkUHJvZmlsZUltYWdlKFxuICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0QWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc2V0dXBJbml0aWFsU3RhdGUodGhpcy5wcm9wcyk7XG4gICAgICAgICAgICAgICAgc3RhdGUuc2VydmVyRXJyb3IgPSBlcnIubWVzc2FnZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBzdWJtaXRQb3NpdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCB1c2VyID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9wcy51c2VyKTtcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLnN0YXRlLnBvc2l0aW9uLnRyaW0oKTtcblxuICAgICAgICBpZiAodXNlci5wb3NpdGlvbiA9PT0gcG9zaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB1c2VyLnBvc2l0aW9uID0gcG9zaXRpb247XG5cbiAgICAgICAgdHJhY2tFdmVudCgnc2V0dGluZ3MnLCAndXNlcl9zZXR0aW5nc191cGRhdGUnLCB7ZmllbGQ6ICdwb3NpdGlvbid9KTtcblxuICAgICAgICB0aGlzLnN1Ym1pdFVzZXIodXNlciwgQ29uc3RhbnRzLlVzZXJVcGRhdGVFdmVudHMuUG9zaXRpb24sIGZhbHNlKTtcbiAgICB9XG5cbiAgICB1cGRhdGVVc2VybmFtZShlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3VzZXJuYW1lOiBlLnRhcmdldC52YWx1ZX0pO1xuICAgIH1cblxuICAgIHVwZGF0ZUZpcnN0TmFtZShlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2ZpcnN0TmFtZTogZS50YXJnZXQudmFsdWV9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVMYXN0TmFtZShlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2xhc3ROYW1lOiBlLnRhcmdldC52YWx1ZX0pO1xuICAgIH1cblxuICAgIHVwZGF0ZU5pY2tuYW1lKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bmlja25hbWU6IGUudGFyZ2V0LnZhbHVlfSk7XG4gICAgfVxuXG4gICAgdXBkYXRlUG9zaXRpb24oZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtwb3NpdGlvbjogZS50YXJnZXQudmFsdWV9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVFbWFpbChlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2VtYWlsOiBlLnRhcmdldC52YWx1ZX0pO1xuICAgIH1cblxuICAgIHVwZGF0ZUNvbmZpcm1FbWFpbChlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbmZpcm1FbWFpbDogZS50YXJnZXQudmFsdWV9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVQaWN0dXJlKGUpIHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmZpbGVzICYmIGUudGFyZ2V0LmZpbGVzWzBdKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtwaWN0dXJlRmlsZTogZS50YXJnZXQuZmlsZXNbMF19KTtcblxuICAgICAgICAgICAgdGhpcy5zdWJtaXRBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y2xpZW50RXJyb3I6IG51bGx9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3BpY3R1cmVGaWxlOiBudWxsfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVTZWN0aW9uKHNlY3Rpb24pIHtcbiAgICAgICAgY29uc3QgZW1haWxDaGFuZ2VJblByb2dyZXNzID0gdGhpcy5zdGF0ZS5lbWFpbENoYW5nZUluUHJvZ3Jlc3M7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZXR1cEluaXRpYWxTdGF0ZSh0aGlzLnByb3BzKSwge2VtYWlsQ2hhbmdlSW5Qcm9ncmVzcywgY2xpZW50RXJyb3I6ICcnLCBzZXJ2ZXJFcnJvcjogJycsIGVtYWlsRXJyb3I6ICcnLCBzZWN0aW9uSXNTYXZpbmc6IGZhbHNlfSkpO1xuICAgICAgICB0aGlzLnN1Ym1pdEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb24oc2VjdGlvbik7XG4gICAgfVxuXG4gICAgc2V0dXBJbml0aWFsU3RhdGUocHJvcHMpIHtcbiAgICAgICAgY29uc3QgdXNlciA9IHByb3BzLnVzZXI7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiB1c2VyLmZpcnN0X25hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogdXNlci5sYXN0X25hbWUsXG4gICAgICAgICAgICBuaWNrbmFtZTogdXNlci5uaWNrbmFtZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiB1c2VyLnBvc2l0aW9uLFxuICAgICAgICAgICAgb3JpZ2luYWxFbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgICAgIGNvbmZpcm1FbWFpbDogJycsXG4gICAgICAgICAgICBwaWN0dXJlRmlsZTogbnVsbCxcbiAgICAgICAgICAgIGxvYWRpbmdQaWN0dXJlOiBmYWxzZSxcbiAgICAgICAgICAgIGVtYWlsQ2hhbmdlSW5Qcm9ncmVzczogZmFsc2UsXG4gICAgICAgICAgICBtYXhGaWxlU2l6ZTogZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuTWF4RmlsZVNpemUsXG4gICAgICAgICAgICBzZWN0aW9uSXNTYXZpbmc6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY3JlYXRlRW1haWxTZWN0aW9uKCkge1xuICAgICAgICBsZXQgZW1haWxTZWN0aW9uO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb24gPT09ICdlbWFpbCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGVtYWlsRW5hYmxlZCA9IGdsb2JhbC53aW5kb3cubW1fY29uZmlnLlNlbmRFbWFpbE5vdGlmaWNhdGlvbnMgPT09ICd0cnVlJztcbiAgICAgICAgICAgIGNvbnN0IGVtYWlsVmVyaWZpY2F0aW9uRW5hYmxlZCA9IGdsb2JhbC53aW5kb3cubW1fY29uZmlnLlJlcXVpcmVFbWFpbFZlcmlmaWNhdGlvbiA9PT0gJ3RydWUnO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gW107XG5cbiAgICAgICAgICAgIGxldCBoZWxwVGV4dCA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLmVtYWlsSGVscDEnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdFbWFpbCBpcyB1c2VkIGZvciBzaWduLWluLCBub3RpZmljYXRpb25zLCBhbmQgcGFzc3dvcmQgcmVzZXQuIEVtYWlsIHJlcXVpcmVzIHZlcmlmaWNhdGlvbiBpZiBjaGFuZ2VkLidcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKCFlbWFpbEVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBoZWxwVGV4dCA9IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmctbGlzdF9faGludCBjb2wtc20tMTIgdGV4dC1kYW5nZXInPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLmVtYWlsSGVscDInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0VtYWlsIGhhcyBiZWVuIGRpc2FibGVkIGJ5IHlvdXIgU3lzdGVtIEFkbWluaXN0cmF0b3IuIE5vIG5vdGlmaWNhdGlvbiBlbWFpbHMgd2lsbCBiZSBzZW50IHVudGlsIGl0IGlzIGVuYWJsZWQuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWVtYWlsVmVyaWZpY2F0aW9uRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGhlbHBUZXh0ID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5lbWFpbEhlbHAzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0VtYWlsIGlzIHVzZWQgZm9yIHNpZ24taW4sIG5vdGlmaWNhdGlvbnMsIGFuZCBwYXNzd29yZCByZXNldC4nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5lbWFpbENoYW5nZUluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdFbWFpbCA9IFVzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpLmVtYWlsO1xuICAgICAgICAgICAgICAgIGlmIChuZXdFbWFpbCkge1xuICAgICAgICAgICAgICAgICAgICBoZWxwVGV4dCA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5lbWFpbEhlbHA0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdBIHZlcmlmaWNhdGlvbiBlbWFpbCB3YXMgc2VudCB0byB7ZW1haWx9LidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IG5ld0VtYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgc3VibWl0ID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PSdjdXJyZW50RW1haWxTZXR0aW5nJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmb3JtLWdyb3VwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdjb2wtc20tNSBjb250cm9sLWxhYmVsJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwuY3VycmVudEVtYWlsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0N1cnJlbnQgRW1haWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTcnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdjb250cm9sLWxhYmVsJz57dGhpcy5zdGF0ZS5vcmlnaW5hbEVtYWlsfTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT0nZW1haWxTZXR0aW5nJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmb3JtLWdyb3VwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSdjb2wtc20tNSBjb250cm9sLWxhYmVsJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwubmV3RW1haWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTmV3IEVtYWlsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbC1zbS03Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ncHJpbWFyeUVtYWlsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmb3JtLWNvbnRyb2wnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdlbWFpbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZUVtYWlsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuZW1haWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT0nY29uZmlybUVtYWlsU2V0dGluZyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZm9ybS1ncm91cCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nY29sLXNtLTUgY29udHJvbC1sYWJlbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLmNvbmZpcm1FbWFpbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDb25maXJtIEVtYWlsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NvbC1zbS03Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nY29uZmlybUVtYWlsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmb3JtLWNvbnRyb2wnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdlbWFpbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZUNvbmZpcm1FbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmNvbmZpcm1FbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAge2hlbHBUZXh0fVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgc3VibWl0ID0gdGhpcy5zdWJtaXRFbWFpbDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLkdJVExBQl9TRVJWSUNFKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT0nb2F1dGhFbWFpbEluZm8nXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tZ3JvdXAnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzZXR0aW5nLWxpc3RfX2hpbnQgY29sLXNtLTEyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLmVtYWlsR2l0bGFiQ2FudFVwZGF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIG9jY3VycyB0aHJvdWdoIEdpdExhYi4gRW1haWwgY2Fubm90IGJlIHVwZGF0ZWQuIEVtYWlsIGFkZHJlc3MgdXNlZCBmb3Igbm90aWZpY2F0aW9ucyBpcyB7ZW1haWx9LidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5zdGF0ZS5vcmlnaW5hbEVtYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAge2hlbHBUZXh0fVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnVzZXIuYXV0aF9zZXJ2aWNlID09PSBDb25zdGFudHMuR09PR0xFX1NFUlZJQ0UpIHtcbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdvYXV0aEVtYWlsSW5mbydcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmctbGlzdF9faGludCBjb2wtc20tMTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwuZW1haWxHb29nbGVDYW50VXBkYXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTG9naW4gb2NjdXJzIHRocm91Z2ggR29vZ2xlIEFwcHMuIEVtYWlsIGNhbm5vdCBiZSB1cGRhdGVkLiBFbWFpbCBhZGRyZXNzIHVzZWQgZm9yIG5vdGlmaWNhdGlvbnMgaXMge2VtYWlsfS4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuc3RhdGUub3JpZ2luYWxFbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtoZWxwVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLk9GRklDRTM2NV9TRVJWSUNFKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT0nb2F1dGhFbWFpbEluZm8nXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tZ3JvdXAnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzZXR0aW5nLWxpc3RfX2hpbnQgY29sLXNtLTEyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLmVtYWlsT2ZmaWNlMzY1Q2FudFVwZGF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIG9jY3VycyB0aHJvdWdoIE9mZmljZSAzNjUuIEVtYWlsIGNhbm5vdCBiZSB1cGRhdGVkLiBFbWFpbCBhZGRyZXNzIHVzZWQgZm9yIG5vdGlmaWNhdGlvbnMgaXMge2VtYWlsfS4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuc3RhdGUub3JpZ2luYWxFbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtoZWxwVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLkxEQVBfU0VSVklDRSkge1xuICAgICAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9J29hdXRoRW1haWxJbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwYWRkaW5nLWJvdHRvbSdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmctbGlzdF9faGludCBjb2wtc20tMTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwuZW1haWxMZGFwQ2FudFVwZGF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIG9jY3VycyB0aHJvdWdoIEFEL0xEQVAuIEVtYWlsIGNhbm5vdCBiZSB1cGRhdGVkLiBFbWFpbCBhZGRyZXNzIHVzZWQgZm9yIG5vdGlmaWNhdGlvbnMgaXMge2VtYWlsfS4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuc3RhdGUub3JpZ2luYWxFbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLlNBTUxfU0VSVklDRSkge1xuICAgICAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9J29hdXRoRW1haWxJbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwYWRkaW5nLWJvdHRvbSdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmctbGlzdF9faGludCBjb2wtc20tMTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwuZW1haWxTYW1sQ2FudFVwZGF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIG9jY3VycyB0aHJvdWdoIFNBTUwuIEVtYWlsIGNhbm5vdCBiZSB1cGRhdGVkLiBFbWFpbCBhZGRyZXNzIHVzZWQgZm9yIG5vdGlmaWNhdGlvbnMgaXMge2VtYWlsfS4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuc3RhdGUub3JpZ2luYWxFbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtoZWxwVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZW1haWxTZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1heFxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwuZW1haWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0VtYWlsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dHM9e2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgc3VibWl0PXtzdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgIHNhdmluZz17dGhpcy5zdGF0ZS5zZWN0aW9uSXNTYXZpbmd9XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9lcnJvcj17dGhpcy5zdGF0ZS5zZXJ2ZXJFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgY2xpZW50X2Vycm9yPXt0aGlzLnN0YXRlLmVtYWlsRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRlc2NyaWJlID0gJyc7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5lbWFpbENoYW5nZUluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RW1haWwgPSBVc2VyU3RvcmUuZ2V0Q3VycmVudFVzZXIoKS5lbWFpbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0VtYWlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkSFRNTE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5uZXdBZGRyZXNzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTmV3IEFkZHJlc3M6IHtlbWFpbH08YnIgLz5DaGVjayB5b3VyIGVtYWlsIHRvIHZlcmlmeSB0aGUgYWJvdmUgYWRkcmVzcy4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IG5ld0VtYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLmNoZWNrRW1haWxOb0FkZHJlc3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDaGVjayB5b3VyIGVtYWlsIHRvIHZlcmlmeSB5b3VyIG5ldyBhZGRyZXNzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmUgPSBVc2VyU3RvcmUuZ2V0Q3VycmVudFVzZXIoKS5lbWFpbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5HSVRMQUJfU0VSVklDRSkge1xuICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5sb2dpbkdpdGxhYidcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdMb2dpbiBkb25lIHRocm91Z2ggR2l0TGFiICh7ZW1haWx9KSdcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLnN0YXRlLm9yaWdpbmFsRW1haWxcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLkdPT0dMRV9TRVJWSUNFKSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLmxvZ2luR29vZ2xlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIGRvbmUgdGhyb3VnaCBHb29nbGUgQXBwcyAoe2VtYWlsfSknXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5zdGF0ZS5vcmlnaW5hbEVtYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5PRkZJQ0UzNjVfU0VSVklDRSkge1xuICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5sb2dpbk9mZmljZTM2NSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdMb2dpbiBkb25lIHRocm91Z2ggT2ZmaWNlIDM2NSAoe2VtYWlsfSknXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5zdGF0ZS5vcmlnaW5hbEVtYWlsXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5MREFQX1NFUlZJQ0UpIHtcbiAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwubG9naW5MZGFwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIGRvbmUgdGhyb3VnaCBBRC9MREFQICh7ZW1haWx9KSdcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLnN0YXRlLm9yaWdpbmFsRW1haWxcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLlNBTUxfU0VSVklDRSkge1xuICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5sb2dpblNhbWwnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTG9naW4gZG9uZSB0aHJvdWdoIFNBTUwgKHtlbWFpbH0pJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuc3RhdGUub3JpZ2luYWxFbWFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbWFpbFNlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWluXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5lbWFpbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRW1haWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlPXtkZXNjcmliZX1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCdlbWFpbCcpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVtYWlsU2VjdGlvbjtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSB0aGlzLnByb3BzLnVzZXI7XG4gICAgICAgIGNvbnN0IHtmb3JtYXRNZXNzYWdlfSA9IHRoaXMucHJvcHMuaW50bDtcblxuICAgICAgICBsZXQgY2xpZW50RXJyb3IgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5jbGllbnRFcnJvcikge1xuICAgICAgICAgICAgY2xpZW50RXJyb3IgPSB0aGlzLnN0YXRlLmNsaWVudEVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzZXJ2ZXJFcnJvciA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlcnZlckVycm9yKSB7XG4gICAgICAgICAgICBzZXJ2ZXJFcnJvciA9IHRoaXMuc3RhdGUuc2VydmVyRXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbmFtZVNlY3Rpb247XG4gICAgICAgIGNvbnN0IGlucHV0cyA9IFtdO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb24gPT09ICduYW1lJykge1xuICAgICAgICAgICAgbGV0IGV4dHJhSW5mbztcbiAgICAgICAgICAgIGxldCBzdWJtaXQgPSBudWxsO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICh0aGlzLnByb3BzLnVzZXIuYXV0aF9zZXJ2aWNlID09PSAnbGRhcCcgJiZcbiAgICAgICAgICAgICAgICAgICAgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkxkYXBGcmlzdE5hbWVBdHRyaWJ1dGVTZXQgPT09ICd0cnVlJyB8fCBnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5MZGFwTGFzdE5hbWVBdHRyaWJ1dGVTZXQgPT09ICd0cnVlJykpIHx8XG4gICAgICAgICAgICAgICAgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5TQU1MX1NFUlZJQ0UgJiZcbiAgICAgICAgICAgICAgICAgICAgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLlNhbWxGaXJzdE5hbWVBdHRyaWJ1dGVTZXQgPT09ICd0cnVlJyB8fCBnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5TYW1sTGFzdE5hbWVBdHRyaWJ1dGVTZXQgPT09ICd0cnVlJykpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBleHRyYUluZm8gPSAoXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLmZpZWxkX2hhbmRsZWRfZXh0ZXJuYWxseSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVGhpcyBmaWVsZCBpcyBoYW5kbGVkIHRocm91Z2ggeW91ciBsb2dpbiBwcm92aWRlci4gSWYgeW91IHdhbnQgdG8gY2hhbmdlIGl0LCB5b3UgbmVlZCB0byBkbyBzbyB0aHJvdWdoIHlvdXIgbG9naW4gcHJvdmlkZXIuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9J2ZpcnN0TmFtZVNldHRpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tZ3JvdXAnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2NvbC1zbS01IGNvbnRyb2wtbGFiZWwnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwuZmlyc3ROYW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRmlyc3QgTmFtZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdmaXJzdE5hbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVGaXJzdE5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmZpcnN0TmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdsYXN0TmFtZVNldHRpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tZ3JvdXAnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2NvbC1zbS01IGNvbnRyb2wtbGFiZWwnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwubGFzdE5hbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdMYXN0IE5hbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTcnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbGFzdE5hbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVMYXN0TmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubGFzdE5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbm90aWZDbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVUYWIoJ25vdGlmaWNhdGlvbnMnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBub3RpZkxpbmsgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17bm90aWZDbGljay5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwubm90aWZpY2F0aW9uc0xpbmsnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05vdGlmaWNhdGlvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGV4dHJhSW5mbyA9IChcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwubm90aWZpY2F0aW9uc0V4dHJhJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdCeSBkZWZhdWx0LCB5b3Ugd2lsbCByZWNlaXZlIG1lbnRpb24gbm90aWZpY2F0aW9ucyB3aGVuIHNvbWVvbmUgdHlwZXMgeW91ciBmaXJzdCBuYW1lLiBHbyB0byB7bm90aWZ5fSBzZXR0aW5ncyB0byBjaGFuZ2UgdGhpcyBkZWZhdWx0LidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZ5OiAobm90aWZMaW5rKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHN1Ym1pdCA9IHRoaXMuc3VibWl0TmFtZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmFtZVNlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWF4XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtmb3JtYXRNZXNzYWdlKGhvbGRlcnMuZnVsbE5hbWUpfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dHM9e2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgc3VibWl0PXtzdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgIHNhdmluZz17dGhpcy5zdGF0ZS5zZWN0aW9uSXNTYXZpbmd9XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9lcnJvcj17c2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudF9lcnJvcj17Y2xpZW50RXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBleHRyYUluZm89e2V4dHJhSW5mb31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBkZXNjcmliZSA9ICcnO1xuXG4gICAgICAgICAgICBpZiAodXNlci5maXJzdF9uYW1lICYmIHVzZXIubGFzdF9uYW1lKSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpYmUgPSB1c2VyLmZpcnN0X25hbWUgKyAnICcgKyB1c2VyLmxhc3RfbmFtZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNlci5maXJzdF9uYW1lKSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpYmUgPSB1c2VyLmZpcnN0X25hbWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHVzZXIubGFzdF9uYW1lKSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpYmUgPSB1c2VyLmxhc3RfbmFtZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLmVtcHR5TmFtZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPVwiQ2xpY2sgJ0VkaXQnIHRvIGFkZCB5b3VyIGZ1bGwgbmFtZVwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoVXRpbHMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5tb2JpbGUuZW1wdHlOYW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDbGljayB0byBhZGQgeW91ciBmdWxsIG5hbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmFtZVNlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWluXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtmb3JtYXRNZXNzYWdlKGhvbGRlcnMuZnVsbE5hbWUpfVxuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZT17ZGVzY3JpYmV9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignbmFtZScpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG5pY2tuYW1lU2VjdGlvbjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlU2VjdGlvbiA9PT0gJ25pY2tuYW1lJykge1xuICAgICAgICAgICAgbGV0IGV4dHJhSW5mbztcbiAgICAgICAgICAgIGxldCBzdWJtaXQgPSBudWxsO1xuICAgICAgICAgICAgaWYgKCh0aGlzLnByb3BzLnVzZXIuYXV0aF9zZXJ2aWNlID09PSAnbGRhcCcgJiYgZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuTGRhcE5pY2tuYW1lQXR0cmlidXRlU2V0KSB8fCAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLlNBTUxfU0VSVklDRSAmJiBnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5MZGFwTmlja25hbWVBdHRyaWJ1dGVTZXQpKSB7XG4gICAgICAgICAgICAgICAgZXh0cmFJbmZvID0gKFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5maWVsZF9oYW5kbGVkX2V4dGVybmFsbHknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1RoaXMgZmllbGQgaXMgaGFuZGxlZCB0aHJvdWdoIHlvdXIgbG9naW4gcHJvdmlkZXIuIElmIHlvdSB3YW50IHRvIGNoYW5nZSBpdCwgeW91IG5lZWQgdG8gZG8gc28gdGhvdWdoIHlvdXIgbG9naW4gcHJvdmlkZXIuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBuaWNrbmFtZUxhYmVsID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5uaWNrbmFtZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdOaWNrbmFtZSdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChVdGlscy5pc01vYmlsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lTGFiZWwgPSAnJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSduaWNrbmFtZVNldHRpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tZ3JvdXAnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2NvbC1zbS01IGNvbnRyb2wtbGFiZWwnPntuaWNrbmFtZUxhYmVsfTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTcnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbmlja25hbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVOaWNrbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubmlja25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heExlbmd0aD17Q29uc3RhbnRzLk1BWF9OSUNLTkFNRV9MRU5HVEh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9DYXBpdGFsaXplPSdvZmYnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgZXh0cmFJbmZvID0gKFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5uaWNrbmFtZUV4dHJhJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdVc2UgTmlja25hbWUgZm9yIGEgbmFtZSB5b3UgbWlnaHQgYmUgY2FsbGVkIHRoYXQgaXMgZGlmZmVyZW50IGZyb20geW91ciBmaXJzdCBuYW1lIGFuZCB1c2VybmFtZS4gVGhpcyBpcyBtb3N0IG9mdGVuIHVzZWQgd2hlbiB0d28gb3IgbW9yZSBwZW9wbGUgaGF2ZSBzaW1pbGFyIHNvdW5kaW5nIG5hbWVzIGFuZCB1c2VybmFtZXMuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBzdWJtaXQgPSB0aGlzLnN1Ym1pdE5pY2tuYW1lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuaWNrbmFtZVNlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWF4XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtmb3JtYXRNZXNzYWdlKGhvbGRlcnMubmlja25hbWUpfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dHM9e2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgc3VibWl0PXtzdWJtaXR9XG4gICAgICAgICAgICAgICAgICAgIHNhdmluZz17dGhpcy5zdGF0ZS5zZWN0aW9uSXNTYXZpbmd9XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9lcnJvcj17c2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudF9lcnJvcj17Y2xpZW50RXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBleHRyYUluZm89e2V4dHJhSW5mb31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBkZXNjcmliZSA9ICcnO1xuICAgICAgICAgICAgaWYgKHVzZXIubmlja25hbWUpIHtcbiAgICAgICAgICAgICAgICBkZXNjcmliZSA9IHVzZXIubmlja25hbWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5lbXB0eU5pY2tuYW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9XCJDbGljayAnRWRpdCcgdG8gYWRkIGEgbmlja25hbWVcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKFV0aWxzLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwubW9iaWxlLmVtcHR5Tmlja25hbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0NsaWNrIHRvIGFkZCBhIG5pY2tuYW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5pY2tuYW1lU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NaW5cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoaG9sZGVycy5uaWNrbmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlPXtkZXNjcmliZX1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTZWN0aW9uKCduaWNrbmFtZScpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHVzZXJuYW1lU2VjdGlvbjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlU2VjdGlvbiA9PT0gJ3VzZXJuYW1lJykge1xuICAgICAgICAgICAgbGV0IGV4dHJhSW5mbztcbiAgICAgICAgICAgIGxldCBzdWJtaXQgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgbGV0IHVzZXJuYW1lTGFiZWwgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLnVzZXJuYW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1VzZXJuYW1lJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKFV0aWxzLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWVMYWJlbCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9J3VzZXJuYW1lU2V0dGluZydcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nY29sLXNtLTUgY29udHJvbC1sYWJlbCc+e3VzZXJuYW1lTGFiZWx9PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VybmFtZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoPXtDb25zdGFudHMuTUFYX1VTRVJOQU1FX0xFTkdUSH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmb3JtLWNvbnRyb2wnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZVVzZXJuYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS51c2VybmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0NhcGl0YWxpemU9J29mZidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBleHRyYUluZm8gPSAoXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLnVzZXJuYW1lSW5mbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nUGljayBzb21ldGhpbmcgZWFzeSBmb3IgdGVhbW1hdGVzIHRvIHJlY29nbml6ZSBhbmQgcmVjYWxsLidcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgc3VibWl0ID0gdGhpcy5zdWJtaXRVc2VybmFtZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXh0cmFJbmZvID0gKFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5maWVsZF9oYW5kbGVkX2V4dGVybmFsbHknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1RoaXMgZmllbGQgaXMgaGFuZGxlZCB0aHJvdWdoIHlvdXIgbG9naW4gcHJvdmlkZXIuIElmIHlvdSB3YW50IHRvIGNoYW5nZSBpdCwgeW91IG5lZWQgdG8gZG8gc28gdGhvdWdoIHlvdXIgbG9naW4gcHJvdmlkZXIuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVzZXJuYW1lU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NYXhcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoaG9sZGVycy51c2VybmFtZSl9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17aW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ9e3N1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgc2F2aW5nPXt0aGlzLnN0YXRlLnNlY3Rpb25Jc1NhdmluZ31cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXtzZXJ2ZXJFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgY2xpZW50X2Vycm9yPXtjbGllbnRFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhSW5mbz17ZXh0cmFJbmZvfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXNlcm5hbWVTZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1pblxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17Zm9ybWF0TWVzc2FnZShob2xkZXJzLnVzZXJuYW1lKX1cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmU9e1VzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpLnVzZXJuYW1lfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJ3VzZXJuYW1lJyk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcG9zaXRpb25TZWN0aW9uO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uID09PSAncG9zaXRpb24nKSB7XG4gICAgICAgICAgICBsZXQgZXh0cmFJbmZvO1xuICAgICAgICAgICAgbGV0IHN1Ym1pdCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09ICdsZGFwJyB8fCB0aGlzLnByb3BzLnVzZXIuYXV0aF9zZXJ2aWNlID09PSBDb25zdGFudHMuU0FNTF9TRVJWSUNFKSAmJiBnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5Qb3NpdGlvbkF0dHJpYnV0ZVNldCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgZXh0cmFJbmZvID0gKFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5maWVsZF9oYW5kbGVkX2V4dGVybmFsbHknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1RoaXMgZmllbGQgaXMgaGFuZGxlZCB0aHJvdWdoIHlvdXIgbG9naW4gcHJvdmlkZXIuIElmIHlvdSB3YW50IHRvIGNoYW5nZSBpdCwgeW91IG5lZWQgdG8gZG8gc28gdGhvdWdoIHlvdXIgbG9naW4gcHJvdmlkZXIuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBwb3NpdGlvbkxhYmVsID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5wb3NpdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdQb3NpdGlvbidcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChVdGlscy5pc01vYmlsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uTGFiZWwgPSAnJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdwb3NpdGlvblNldHRpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tZ3JvdXAnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2NvbC1zbS01IGNvbnRyb2wtbGFiZWwnPntwb3NpdGlvbkxhYmVsfTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTcnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ncG9zaXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVQb3NpdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUucG9zaXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heExlbmd0aD17Q29uc3RhbnRzLk1BWF9QT1NJVElPTl9MRU5HVEh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9DYXBpdGFsaXplPSdvZmYnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgZXh0cmFJbmZvID0gKFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5wb3NpdGlvbkV4dHJhJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdVc2UgUG9zaXRpb24gZm9yIHlvdXIgcm9sZSBvciBqb2IgdGl0bGUuIFRoaXMgd2lsbCBiZSBzaG93biBpbiB5b3VyIHByb2ZpbGUgcG9wb3Zlci4nXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHN1Ym1pdCA9IHRoaXMuc3VibWl0UG9zaXRpb247XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBvc2l0aW9uU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NYXhcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoaG9sZGVycy5wb3NpdGlvbil9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17aW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ9e3N1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgc2F2aW5nPXt0aGlzLnN0YXRlLnNlY3Rpb25Jc1NhdmluZ31cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXtzZXJ2ZXJFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgY2xpZW50X2Vycm9yPXtjbGllbnRFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhSW5mbz17ZXh0cmFJbmZvfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRlc2NyaWJlID0gJyc7XG4gICAgICAgICAgICBpZiAodXNlci5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gdXNlci5wb3NpdGlvbjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLmVtcHR5UG9zaXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT1cIkNsaWNrICdFZGl0JyB0byBhZGQgeW91ciBqb2IgdGl0bGUgLyBwb3NpdGlvblwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoVXRpbHMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MuZ2VuZXJhbC5tb2JpbGUuZW1wdHlQb3NpdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ2xpY2sgdG8gYWRkIHlvdXIgam9iIHRpdGxlIC8gcG9zaXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcG9zaXRpb25TZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1pblxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17Zm9ybWF0TWVzc2FnZShob2xkZXJzLnBvc2l0aW9uKX1cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmU9e2Rlc2NyaWJlfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJ3Bvc2l0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbWFpbFNlY3Rpb24gPSB0aGlzLmNyZWF0ZUVtYWlsU2VjdGlvbigpO1xuXG4gICAgICAgIGxldCBwaWN0dXJlU2VjdGlvbjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlU2VjdGlvbiA9PT0gJ3BpY3R1cmUnKSB7XG4gICAgICAgICAgICBwaWN0dXJlU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ1BpY3R1cmVcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2Zvcm1hdE1lc3NhZ2UoaG9sZGVycy5wcm9maWxlUGljdHVyZSl9XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdD17dGhpcy5zdWJtaXRQaWN0dXJlfVxuICAgICAgICAgICAgICAgICAgICBzcmM9e1V0aWxzLmltYWdlVVJMRm9yVXNlcih1c2VyKX1cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyRXJyb3I9e3NlcnZlckVycm9yfVxuICAgICAgICAgICAgICAgICAgICBjbGllbnRFcnJvcj17Y2xpZW50RXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBmaWxlPXt0aGlzLnN0YXRlLnBpY3R1cmVGaWxlfVxuICAgICAgICAgICAgICAgICAgICBvbkZpbGVDaGFuZ2U9e3RoaXMudXBkYXRlUGljdHVyZX1cbiAgICAgICAgICAgICAgICAgICAgc3VibWl0QWN0aXZlPXt0aGlzLnN1Ym1pdEFjdGl2ZX1cbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ1BpY3R1cmU9e3RoaXMuc3RhdGUubG9hZGluZ1BpY3R1cmV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgbWluTWVzc2FnZSA9IGZvcm1hdE1lc3NhZ2UoaG9sZGVycy51cGxvYWRJbWFnZSk7XG4gICAgICAgICAgICBpZiAoVXRpbHMuaXNNb2JpbGUoKSkge1xuICAgICAgICAgICAgICAgIG1pbk1lc3NhZ2UgPSBmb3JtYXRNZXNzYWdlKGhvbGRlcnMudXBsb2FkSW1hZ2VNb2JpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHVzZXIubGFzdF9waWN0dXJlX3VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIG1pbk1lc3NhZ2UgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5nZW5lcmFsLmltYWdlVXBkYXRlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdJbWFnZSBsYXN0IHVwZGF0ZWQge2RhdGV9J1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e25ldyBEYXRlKHVzZXIubGFzdF9waWN0dXJlX3VwZGF0ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXk9JzItZGlnaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aD0nc2hvcnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyPSdudW1lcmljJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBpY3R1cmVTZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1pblxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17Zm9ybWF0TWVzc2FnZShob2xkZXJzLnByb2ZpbGVQaWN0dXJlKX1cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmU9e21pbk1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2VjdGlvbigncGljdHVyZScpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdjbG9zZVVzZXJTZXR0aW5ncydcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY2xvc2UnXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWRpc21pc3M9J21vZGFsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17Zm9ybWF0TWVzc2FnZShob2xkZXJzLmNsb3NlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuY2xvc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49J3RydWUnPnsnw5cnfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxoNFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdtb2RhbC10aXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0ndGl0bGUnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdtb2RhbC1iYWNrJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2ZhIGZhLWFuZ2xlLWxlZnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuY29sbGFwc2VNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwudGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0dlbmVyYWwgU2V0dGluZ3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd1c2VyLXNldHRpbmdzJz5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGFiLWhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLmdlbmVyYWwudGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0dlbmVyYWwgU2V0dGluZ3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1kYXJrIGZpcnN0Jy8+XG4gICAgICAgICAgICAgICAgICAgIHtuYW1lU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItbGlnaHQnLz5cbiAgICAgICAgICAgICAgICAgICAge3VzZXJuYW1lU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItbGlnaHQnLz5cbiAgICAgICAgICAgICAgICAgICAge25pY2tuYW1lU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItbGlnaHQnLz5cbiAgICAgICAgICAgICAgICAgICAge3Bvc2l0aW9uU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItbGlnaHQnLz5cbiAgICAgICAgICAgICAgICAgICAge2VtYWlsU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItbGlnaHQnLz5cbiAgICAgICAgICAgICAgICAgICAge3BpY3R1cmVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1kYXJrJy8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGluamVjdEludGwoVXNlclNldHRpbmdzR2VuZXJhbFRhYik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy91c2VyX3NldHRpbmdzL3VzZXJfc2V0dGluZ3NfZ2VuZXJhbC91c2VyX3NldHRpbmdzX2dlbmVyYWwuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFsQkE7QUFDQTtBQUNBO0FBaUJBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBekRBO0FBQ0E7QUE4REE7OztBQWNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0QkE7QUF1QkE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFDQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFlQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQVBBO0FBREE7QUFDQTtBQWNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBUEE7QUFEQTtBQUNBO0FBb0JBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBUEE7QUFpQkE7QUFsQkE7QUFDQTtBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFEQTtBQVNBO0FBYkE7QUFnQkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQURBO0FBU0E7QUFiQTtBQWdCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBREE7QUFTQTtBQWJBO0FBZ0JBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFEQTtBQUpBO0FBZUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQURBO0FBU0E7QUFiQTtBQWdCQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWZBO0FBa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFRQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFRQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFhQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUFBO0FBZ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBREE7QUFWQTtBQUNBO0FBcUJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBVkE7QUFDQTtBQTJCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBQ0E7QUFVQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQURBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBREE7QUFMQTtBQUNBO0FBa0JBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQURBO0FBTEE7QUFDQTtBQWtCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBREE7QUFMQTtBQUNBO0FBa0JBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBRkE7QUFIQTtBQWVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFWQTtBQVhBO0FBMkJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5CQTtBQTVCQTtBQW1EQTs7O0FBNW9DQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQVJBO0FBOG9DQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2538\n");

/***/ }),

/***/ 2539:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _exif2css2 = __webpack_require__(2540);\n\nvar _exif2css3 = _interopRequireDefault(_exif2css2);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _load = __webpack_require__(212);\n\nvar _load2 = _interopRequireDefault(_load);\n\nvar _form_error = __webpack_require__(240);\n\nvar _form_error2 = _interopRequireDefault(_form_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SettingPicture = function (_Component) {\n    (0, _inherits3.default)(SettingPicture, _Component);\n\n    function SettingPicture(props) {\n        (0, _classCallCheck3.default)(this, SettingPicture);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SettingPicture.__proto__ || (0, _getPrototypeOf2.default)(SettingPicture)).call(this, props));\n\n        _this.setPicture = function (file) {\n            if (file) {\n                _this.previewBlob = URL.createObjectURL(file);\n\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                    var orientation = _this.getExifOrientation(e.target.result);\n                    var orientationStyles = _this.getOrientationStyles(orientation);\n\n                    _this.setState({\n                        image: _this.previewBlob,\n                        orientationStyles: orientationStyles\n                    });\n                };\n                reader.readAsArrayBuffer(file);\n            }\n        };\n\n        _this.state = {\n            image: null\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(SettingPicture, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.file !== this.props.file) {\n                this.setState({ image: null });\n\n                this.setPicture(nextProps.file);\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            if (this.previewBlob) {\n                URL.revokeObjectURL(this.previewBlob);\n            }\n        }\n    }, {\n        key: 'getExifOrientation',\n\n\n        // based on https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\n        value: function getExifOrientation(data) {\n            var view = new DataView(data);\n\n            if (view.getUint16(0, false) !== 0xFFD8) {\n                return -2;\n            }\n\n            var length = view.byteLength;\n            var offset = 2;\n\n            while (offset < length) {\n                var marker = view.getUint16(offset, false);\n                offset += 2;\n\n                if (marker === 0xFFE1) {\n                    if (view.getUint32(offset += 2, false) !== 0x45786966) {\n                        return -1;\n                    }\n\n                    var little = view.getUint16(offset += 6, false) === 0x4949;\n                    offset += view.getUint32(offset + 4, little);\n                    var tags = view.getUint16(offset, little);\n                    offset += 2;\n\n                    for (var i = 0; i < tags; i++) {\n                        if (view.getUint16(offset + i * 12, little) === 0x0112) {\n                            return view.getUint16(offset + i * 12 + 8, little);\n                        }\n                    }\n                } else if ((marker & 0xFF00) === 0xFF00) {\n                    offset += view.getUint16(offset, false);\n                } else {\n                    break;\n                }\n            }\n            return -1;\n        }\n    }, {\n        key: 'getOrientationStyles',\n        value: function getOrientationStyles(orientation) {\n            var _exif2css = (0, _exif2css3.default)(orientation),\n                transform = _exif2css.transform,\n                transformOrigin = _exif2css['transform-origin'];\n\n            return { transform: transform, transformOrigin: transformOrigin };\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var img = void 0;\n            if (this.props.file) {\n                var imageStyles = (0, _extends3.default)({\n                    backgroundImage: 'url(' + this.state.image + ')'\n                }, this.state.orientationStyles);\n\n                img = _react2.default.createElement('div', {\n                    className: 'profile-img-preview',\n                    style: imageStyles\n                });\n            } else {\n                img = _react2.default.createElement('img', {\n                    ref: 'image',\n                    className: 'profile-img rounded',\n                    src: this.props.src\n                });\n            }\n\n            var confirmButton = void 0;\n            var selectButtonSpinner = void 0;\n            var fileInputDisabled = false;\n            if (this.props.loadingPicture) {\n                confirmButton = _react2.default.createElement('img', {\n                    className: 'spinner',\n                    src: _load2.default\n                });\n                selectButtonSpinner = _react2.default.createElement('span', { className: 'icon fa fa-refresh icon--rotate' });\n                fileInputDisabled = true;\n            } else {\n                var confirmButtonClass = 'btn btn-sm';\n                if (this.props.submitActive) {\n                    confirmButtonClass += ' btn-primary';\n                } else {\n                    confirmButtonClass += ' btn-inactive disabled';\n                }\n\n                confirmButton = _react2.default.createElement(\n                    'a',\n                    {\n                        className: confirmButtonClass,\n                        onClick: this.props.submit\n                    },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'setting_picture.save',\n                        defaultMessage: 'Save'\n                    })\n                );\n            }\n\n            return _react2.default.createElement(\n                'ul',\n                { className: 'section-max form-horizontal' },\n                _react2.default.createElement(\n                    'li',\n                    { className: 'col-xs-12 section-title' },\n                    this.props.title\n                ),\n                _react2.default.createElement(\n                    'li',\n                    { className: 'col-xs-offset-3 col-xs-8' },\n                    _react2.default.createElement(\n                        'ul',\n                        { className: 'setting-list' },\n                        _react2.default.createElement(\n                            'li',\n                            { className: 'setting-list-item' },\n                            img\n                        ),\n                        _react2.default.createElement(\n                            'li',\n                            { className: 'setting-list-item padding-top x2' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'setting_picture.help',\n                                defaultMessage: 'Upload a profile picture in BMP, JPG, JPEG or PNG format, at least {width}px in width and {height}px height.',\n                                values: {\n                                    width: _constants2.default.PROFILE_WIDTH,\n                                    height: _constants2.default.PROFILE_WIDTH\n                                }\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'li',\n                            { className: 'setting-list-item' },\n                            _react2.default.createElement('hr', null),\n                            _react2.default.createElement(_form_error2.default, {\n                                errors: [this.props.clientError, this.props.serverError],\n                                type: 'modal'\n                            }),\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    className: 'btn btn-sm btn-primary btn-file sel-btn',\n                                    disabled: fileInputDisabled\n                                },\n                                selectButtonSpinner,\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'setting_picture.select',\n                                    defaultMessage: 'Select'\n                                }),\n                                _react2.default.createElement('input', {\n                                    ref: 'input',\n                                    accept: '.jpg,.png,.bmp',\n                                    type: 'file',\n                                    onChange: this.props.onFileChange,\n                                    disabled: fileInputDisabled\n                                })\n                            ),\n                            confirmButton,\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    className: 'btn btn-sm theme',\n                                    href: '#',\n                                    onClick: this.props.updateSection\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'setting_picture.cancel',\n                                    defaultMessage: 'Cancel'\n                                })\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return SettingPicture;\n}(_react.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nSettingPicture.propTypes = {\n    clientError: _propTypes2.default.string,\n    serverError: _propTypes2.default.string,\n    src: _propTypes2.default.string,\n    file: _propTypes2.default.object,\n    loadingPicture: _propTypes2.default.bool,\n    submitActive: _propTypes2.default.bool,\n    submit: _propTypes2.default.func,\n    title: _propTypes2.default.string,\n    onFileChange: _propTypes2.default.func,\n    updateSection: _propTypes2.default.func\n};\nexports.default = SettingPicture;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3NldHRpbmdfcGljdHVyZS5qc3g/YmYyZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCBleGlmMmNzcyBmcm9tICdleGlmMmNzcyc7XG5cbmltcG9ydCBDb25zdGFudHMgZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5cbmltcG9ydCBsb2FkaW5nR2lmIGZyb20gJ2ltYWdlcy9sb2FkLmdpZic7XG5cbmltcG9ydCBGb3JtRXJyb3IgZnJvbSAnY29tcG9uZW50cy9mb3JtX2Vycm9yLmpzeCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNldHRpbmdQaWN0dXJlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBjbGllbnRFcnJvcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgc2VydmVyRXJyb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIHNyYzogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgZmlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICAgICAgbG9hZGluZ1BpY3R1cmU6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICBzdWJtaXRBY3RpdmU6IFByb3BUeXBlcy5ib29sLFxuICAgICAgICBzdWJtaXQ6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgICB0aXRsZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICAgICAgb25GaWxlQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgdXBkYXRlU2VjdGlvbjogUHJvcFR5cGVzLmZ1bmNcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBpbWFnZTogbnVsbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcHMuZmlsZSAhPT0gdGhpcy5wcm9wcy5maWxlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpbWFnZTogbnVsbH0pO1xuXG4gICAgICAgICAgICB0aGlzLnNldFBpY3R1cmUobmV4dFByb3BzLmZpbGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByZXZpZXdCbG9iKSB7XG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMucHJldmlld0Jsb2IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0UGljdHVyZSA9IChmaWxlKSA9PiB7XG4gICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpZXdCbG9iID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcblxuICAgICAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcmllbnRhdGlvbiA9IHRoaXMuZ2V0RXhpZk9yaWVudGF0aW9uKGUudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3JpZW50YXRpb25TdHlsZXMgPSB0aGlzLmdldE9yaWVudGF0aW9uU3R5bGVzKG9yaWVudGF0aW9uKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBpbWFnZTogdGhpcy5wcmV2aWV3QmxvYixcbiAgICAgICAgICAgICAgICAgICAgb3JpZW50YXRpb25TdHlsZXNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBiYXNlZCBvbiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83NTg0Nzk0L2FjY2Vzc2luZy1qcGVnLWV4aWYtcm90YXRpb24tZGF0YS1pbi1qYXZhc2NyaXB0LW9uLXRoZS1jbGllbnQtc2lkZS8zMjQ5MDYwMyMzMjQ5MDYwM1xuICAgIGdldEV4aWZPcmllbnRhdGlvbihkYXRhKSB7XG4gICAgICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGRhdGEpO1xuXG4gICAgICAgIGlmICh2aWV3LmdldFVpbnQxNigwLCBmYWxzZSkgIT09IDB4RkZEOCkge1xuICAgICAgICAgICAgcmV0dXJuIC0yO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGxlbmd0aCA9IHZpZXcuYnl0ZUxlbmd0aDtcbiAgICAgICAgdmFyIG9mZnNldCA9IDI7XG5cbiAgICAgICAgd2hpbGUgKG9mZnNldCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIG1hcmtlciA9IHZpZXcuZ2V0VWludDE2KG9mZnNldCwgZmFsc2UpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IDI7XG5cbiAgICAgICAgICAgIGlmIChtYXJrZXIgPT09IDB4RkZFMSkge1xuICAgICAgICAgICAgICAgIGlmICh2aWV3LmdldFVpbnQzMihvZmZzZXQgKz0gMiwgZmFsc2UpICE9PSAweDQ1Nzg2OTY2KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbGl0dGxlID0gdmlldy5nZXRVaW50MTYob2Zmc2V0ICs9IDYsIGZhbHNlKSA9PT0gMHg0OTQ5O1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSB2aWV3LmdldFVpbnQzMihvZmZzZXQgKyA0LCBsaXR0bGUpO1xuICAgICAgICAgICAgICAgIHZhciB0YWdzID0gdmlldy5nZXRVaW50MTYob2Zmc2V0LCBsaXR0bGUpO1xuICAgICAgICAgICAgICAgIG9mZnNldCArPSAyO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWdzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXcuZ2V0VWludDE2KG9mZnNldCArIChpICogMTIpLCBsaXR0bGUpID09PSAweDAxMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2aWV3LmdldFVpbnQxNihvZmZzZXQgKyAoaSAqIDEyKSArIDgsIGxpdHRsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChtYXJrZXIgJiAweEZGMDApID09PSAweEZGMDApIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gdmlldy5nZXRVaW50MTYob2Zmc2V0LCBmYWxzZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICBnZXRPcmllbnRhdGlvblN0eWxlcyhvcmllbnRhdGlvbikge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICB0cmFuc2Zvcm0sXG4gICAgICAgICAgICAndHJhbnNmb3JtLW9yaWdpbic6IHRyYW5zZm9ybU9yaWdpblxuICAgICAgICB9ID0gZXhpZjJjc3Mob3JpZW50YXRpb24pO1xuICAgICAgICByZXR1cm4ge3RyYW5zZm9ybSwgdHJhbnNmb3JtT3JpZ2lufTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBpbWc7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlU3R5bGVzID0ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogJ3VybCgnICsgdGhpcy5zdGF0ZS5pbWFnZSArICcpJyxcbiAgICAgICAgICAgICAgICAuLi50aGlzLnN0YXRlLm9yaWVudGF0aW9uU3R5bGVzXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpbWcgPSAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3Byb2ZpbGUtaW1nLXByZXZpZXcnXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXtpbWFnZVN0eWxlc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGltZyA9IChcbiAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgIHJlZj0naW1hZ2UnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ncHJvZmlsZS1pbWcgcm91bmRlZCdcbiAgICAgICAgICAgICAgICAgICAgc3JjPXt0aGlzLnByb3BzLnNyY31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjb25maXJtQnV0dG9uO1xuICAgICAgICBsZXQgc2VsZWN0QnV0dG9uU3Bpbm5lcjtcbiAgICAgICAgbGV0IGZpbGVJbnB1dERpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmxvYWRpbmdQaWN0dXJlKSB7XG4gICAgICAgICAgICBjb25maXJtQnV0dG9uID0gKFxuICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzcGlubmVyJ1xuICAgICAgICAgICAgICAgICAgICBzcmM9e2xvYWRpbmdHaWZ9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZWxlY3RCdXR0b25TcGlubmVyID0gKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0naWNvbiBmYSBmYS1yZWZyZXNoIGljb24tLXJvdGF0ZScvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGZpbGVJbnB1dERpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBjb25maXJtQnV0dG9uQ2xhc3MgPSAnYnRuIGJ0bi1zbSc7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5zdWJtaXRBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uQ2xhc3MgKz0gJyBidG4tcHJpbWFyeSc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25DbGFzcyArPSAnIGJ0bi1pbmFjdGl2ZSBkaXNhYmxlZCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b24gPSAoXG4gICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjb25maXJtQnV0dG9uQ2xhc3N9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuc3VibWl0fVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzZXR0aW5nX3BpY3R1cmUuc2F2ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTYXZlJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT0nc2VjdGlvbi1tYXggZm9ybS1ob3Jpem9udGFsJz5cbiAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPSdjb2wteHMtMTIgc2VjdGlvbi10aXRsZSc+e3RoaXMucHJvcHMudGl0bGV9PC9saT5cbiAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPSdjb2wteHMtb2Zmc2V0LTMgY29sLXhzLTgnPlxuICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPSdzZXR0aW5nLWxpc3QnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT0nc2V0dGluZy1saXN0LWl0ZW0nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpbWd9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT0nc2V0dGluZy1saXN0LWl0ZW0gcGFkZGluZy10b3AgeDInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzZXR0aW5nX3BpY3R1cmUuaGVscCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1VwbG9hZCBhIHByb2ZpbGUgcGljdHVyZSBpbiBCTVAsIEpQRywgSlBFRyBvciBQTkcgZm9ybWF0LCBhdCBsZWFzdCB7d2lkdGh9cHggaW4gd2lkdGggYW5kIHtoZWlnaHR9cHggaGVpZ2h0LidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogQ29uc3RhbnRzLlBST0ZJTEVfV0lEVEgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IENvbnN0YW50cy5QUk9GSUxFX1dJRFRIXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPSdzZXR0aW5nLWxpc3QtaXRlbSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycz17W3RoaXMucHJvcHMuY2xpZW50RXJyb3IsIHRoaXMucHJvcHMuc2VydmVyRXJyb3JdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPXsnbW9kYWwnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tc20gYnRuLXByaW1hcnkgYnRuLWZpbGUgc2VsLWJ0bidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZpbGVJbnB1dERpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NlbGVjdEJ1dHRvblNwaW5uZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nc2V0dGluZ19waWN0dXJlLnNlbGVjdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTZWxlY3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSdpbnB1dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdD0nLmpwZywucG5nLC5ibXAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdmaWxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMucHJvcHMub25GaWxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZpbGVJbnB1dERpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjb25maXJtQnV0dG9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYnRuIGJ0bi1zbSB0aGVtZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj0nIydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy51cGRhdGVTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzZXR0aW5nX3BpY3R1cmUuY2FuY2VsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0NhbmNlbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICA8L3VsPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3NldHRpbmdfcGljdHVyZS5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFDQTtBQUNBOzs7OztBQUNBOzs7QUFjQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUF1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBDQTtBQUNBO0FBREE7QUFIQTtBQU1BO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFIQTtBQURBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVRBO0FBaUJBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBeEJBO0FBZEE7QUFEQTtBQUZBO0FBd0RBOzs7QUF4T0E7QUFDQTtBQUNBO0FBYUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBO0FBREEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2539\n");

/***/ }),

/***/ 2540:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\nvar propMap = {\n    r: 'rotate',\n    ry: 'rotateY',\n    t: 'translateX',\n    ty: 'translateY',\n}\n\nvar transformsMap = {\n    '2': {\n        ry: 180,\n    },\n    '3': {\n        r: 180,\n    },\n    '4': {\n        r: 180,\n        ry: 180,\n    },\n    '5': {\n        r: 270,\n        ry: 180,\n    },\n    '6': {\n        ty: -1,\n        r: 90,\n    },\n    '7': {\n        ty: -1,\n        t: -1,\n        r: 90,\n        ry: 180,\n    },\n    '8': {\n        t: -1,\n        r: 270,\n    },\n}\n\nvar transformOriginMap = {\n    '5': 'top left',\n    '6': 'bottom left',\n    '7': 'bottom right',\n    '8': 'top right',\n}\n\nfunction expandTransforms(transforms) {\n    var o = {}\n    var expanded = false\n    for (var prop in transforms) {\n        if (!expanded) expanded = true\n        var ep = propMap[prop]\n        o[ep] = transforms[prop]\n    }\n    return expanded ? o : null\n}\n\nfunction getValue(prop, value) {\n    if (prop === 'r' || prop === 'ry') {\n        return value + 'deg'\n    }\n    if (prop === 't' || prop === 'ty') {\n        return value * 100 + '%'\n    }\n}\n\nfunction expandTransform(transforms) {\n    var a = []\n    for (var prop in transforms) {\n        var ep = propMap[prop]\n        a.push(ep + '(' + getValue(prop, transforms[prop]) + ')')\n    }\n    return a.length ? a.join(' ') : null\n}\n\n\nfunction expandTransformStrings(transforms) {\n    var o = {}\n    var expanded = false\n    for (var prop in transforms) {\n        if (!expanded) expanded = true\n        var ep = propMap[prop]\n        o[ep] = ep + '(' + getValue(prop, transforms[prop]) + ')'\n    }\n    return expanded ? o : null\n}\n\nfunction exif2css(orientation) {\n    var s = String(orientation)\n    var transforms = transformsMap[s]\n\n    var transform = expandTransform(transforms)\n    var transformOrigin = transformOriginMap[s]\n    var allTransforms = expandTransforms(transforms)\n    var allTransformStrings = expandTransformStrings(transforms)\n\n    var css = {}\n    if (transform) {\n        css.transform = transform\n    }\n    if (transformOrigin) {\n        css['transform-origin'] = transformOrigin\n    }\n    if (allTransforms) {\n        css.transforms = allTransforms\n    }\n    if (allTransformStrings) {\n        css.transformStrings = allTransformStrings\n    }\n    return css\n}\n\nmodule.exports = exif2css\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0MC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9leGlmMmNzcy9zcmMvaW5kZXguanM/ZmM0OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxudmFyIHByb3BNYXAgPSB7XG4gICAgcjogJ3JvdGF0ZScsXG4gICAgcnk6ICdyb3RhdGVZJyxcbiAgICB0OiAndHJhbnNsYXRlWCcsXG4gICAgdHk6ICd0cmFuc2xhdGVZJyxcbn1cblxudmFyIHRyYW5zZm9ybXNNYXAgPSB7XG4gICAgJzInOiB7XG4gICAgICAgIHJ5OiAxODAsXG4gICAgfSxcbiAgICAnMyc6IHtcbiAgICAgICAgcjogMTgwLFxuICAgIH0sXG4gICAgJzQnOiB7XG4gICAgICAgIHI6IDE4MCxcbiAgICAgICAgcnk6IDE4MCxcbiAgICB9LFxuICAgICc1Jzoge1xuICAgICAgICByOiAyNzAsXG4gICAgICAgIHJ5OiAxODAsXG4gICAgfSxcbiAgICAnNic6IHtcbiAgICAgICAgdHk6IC0xLFxuICAgICAgICByOiA5MCxcbiAgICB9LFxuICAgICc3Jzoge1xuICAgICAgICB0eTogLTEsXG4gICAgICAgIHQ6IC0xLFxuICAgICAgICByOiA5MCxcbiAgICAgICAgcnk6IDE4MCxcbiAgICB9LFxuICAgICc4Jzoge1xuICAgICAgICB0OiAtMSxcbiAgICAgICAgcjogMjcwLFxuICAgIH0sXG59XG5cbnZhciB0cmFuc2Zvcm1PcmlnaW5NYXAgPSB7XG4gICAgJzUnOiAndG9wIGxlZnQnLFxuICAgICc2JzogJ2JvdHRvbSBsZWZ0JyxcbiAgICAnNyc6ICdib3R0b20gcmlnaHQnLFxuICAgICc4JzogJ3RvcCByaWdodCcsXG59XG5cbmZ1bmN0aW9uIGV4cGFuZFRyYW5zZm9ybXModHJhbnNmb3Jtcykge1xuICAgIHZhciBvID0ge31cbiAgICB2YXIgZXhwYW5kZWQgPSBmYWxzZVxuICAgIGZvciAodmFyIHByb3AgaW4gdHJhbnNmb3Jtcykge1xuICAgICAgICBpZiAoIWV4cGFuZGVkKSBleHBhbmRlZCA9IHRydWVcbiAgICAgICAgdmFyIGVwID0gcHJvcE1hcFtwcm9wXVxuICAgICAgICBvW2VwXSA9IHRyYW5zZm9ybXNbcHJvcF1cbiAgICB9XG4gICAgcmV0dXJuIGV4cGFuZGVkID8gbyA6IG51bGxcbn1cblxuZnVuY3Rpb24gZ2V0VmFsdWUocHJvcCwgdmFsdWUpIHtcbiAgICBpZiAocHJvcCA9PT0gJ3InIHx8IHByb3AgPT09ICdyeScpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICsgJ2RlZydcbiAgICB9XG4gICAgaWYgKHByb3AgPT09ICd0JyB8fCBwcm9wID09PSAndHknKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSAqIDEwMCArICclJ1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZXhwYW5kVHJhbnNmb3JtKHRyYW5zZm9ybXMpIHtcbiAgICB2YXIgYSA9IFtdXG4gICAgZm9yICh2YXIgcHJvcCBpbiB0cmFuc2Zvcm1zKSB7XG4gICAgICAgIHZhciBlcCA9IHByb3BNYXBbcHJvcF1cbiAgICAgICAgYS5wdXNoKGVwICsgJygnICsgZ2V0VmFsdWUocHJvcCwgdHJhbnNmb3Jtc1twcm9wXSkgKyAnKScpXG4gICAgfVxuICAgIHJldHVybiBhLmxlbmd0aCA/IGEuam9pbignICcpIDogbnVsbFxufVxuXG5cbmZ1bmN0aW9uIGV4cGFuZFRyYW5zZm9ybVN0cmluZ3ModHJhbnNmb3Jtcykge1xuICAgIHZhciBvID0ge31cbiAgICB2YXIgZXhwYW5kZWQgPSBmYWxzZVxuICAgIGZvciAodmFyIHByb3AgaW4gdHJhbnNmb3Jtcykge1xuICAgICAgICBpZiAoIWV4cGFuZGVkKSBleHBhbmRlZCA9IHRydWVcbiAgICAgICAgdmFyIGVwID0gcHJvcE1hcFtwcm9wXVxuICAgICAgICBvW2VwXSA9IGVwICsgJygnICsgZ2V0VmFsdWUocHJvcCwgdHJhbnNmb3Jtc1twcm9wXSkgKyAnKSdcbiAgICB9XG4gICAgcmV0dXJuIGV4cGFuZGVkID8gbyA6IG51bGxcbn1cblxuZnVuY3Rpb24gZXhpZjJjc3Mob3JpZW50YXRpb24pIHtcbiAgICB2YXIgcyA9IFN0cmluZyhvcmllbnRhdGlvbilcbiAgICB2YXIgdHJhbnNmb3JtcyA9IHRyYW5zZm9ybXNNYXBbc11cblxuICAgIHZhciB0cmFuc2Zvcm0gPSBleHBhbmRUcmFuc2Zvcm0odHJhbnNmb3JtcylcbiAgICB2YXIgdHJhbnNmb3JtT3JpZ2luID0gdHJhbnNmb3JtT3JpZ2luTWFwW3NdXG4gICAgdmFyIGFsbFRyYW5zZm9ybXMgPSBleHBhbmRUcmFuc2Zvcm1zKHRyYW5zZm9ybXMpXG4gICAgdmFyIGFsbFRyYW5zZm9ybVN0cmluZ3MgPSBleHBhbmRUcmFuc2Zvcm1TdHJpbmdzKHRyYW5zZm9ybXMpXG5cbiAgICB2YXIgY3NzID0ge31cbiAgICBpZiAodHJhbnNmb3JtKSB7XG4gICAgICAgIGNzcy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbiAgICB9XG4gICAgaWYgKHRyYW5zZm9ybU9yaWdpbikge1xuICAgICAgICBjc3NbJ3RyYW5zZm9ybS1vcmlnaW4nXSA9IHRyYW5zZm9ybU9yaWdpblxuICAgIH1cbiAgICBpZiAoYWxsVHJhbnNmb3Jtcykge1xuICAgICAgICBjc3MudHJhbnNmb3JtcyA9IGFsbFRyYW5zZm9ybXNcbiAgICB9XG4gICAgaWYgKGFsbFRyYW5zZm9ybVN0cmluZ3MpIHtcbiAgICAgICAgY3NzLnRyYW5zZm9ybVN0cmluZ3MgPSBhbGxUcmFuc2Zvcm1TdHJpbmdzXG4gICAgfVxuICAgIHJldHVybiBjc3Ncbn1cblxubW9kdWxlLmV4cG9ydHMgPSBleGlmMmNzc1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9leGlmMmNzcy9zcmMvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDI1NDBcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2540\n");

/***/ }),

/***/ 2541:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _user_actions = __webpack_require__(71);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _setting_item_max = __webpack_require__(770);\n\nvar _setting_item_max2 = _interopRequireDefault(_setting_item_max);\n\nvar _setting_item_min = __webpack_require__(771);\n\nvar _setting_item_min2 = _interopRequireDefault(_setting_item_min);\n\nvar _desktop_notification_settings = __webpack_require__(2542);\n\nvar _desktop_notification_settings2 = _interopRequireDefault(_desktop_notification_settings);\n\nvar _email_notification_setting = __webpack_require__(2543);\n\nvar _email_notification_setting2 = _interopRequireDefault(_email_notification_setting);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getNotificationsStateFromStores() {\n    var user = _user_store2.default.getCurrentUser();\n\n    var desktop = _constants.NotificationLevels.DEFAULT;\n    var sound = 'true';\n    var desktopDuration = '5';\n    var comments = 'never';\n    var enableEmail = 'true';\n    var pushActivity = _constants.NotificationLevels.MENTION;\n    var pushStatus = _constants2.default.UserStatuses.ONLINE;\n\n    if (user.notify_props) {\n        if (user.notify_props.desktop) {\n            desktop = user.notify_props.desktop;\n        }\n        if (user.notify_props.desktop_sound) {\n            sound = user.notify_props.desktop_sound;\n        }\n        if (user.notify_props.desktop_duration) {\n            desktopDuration = user.notify_props.desktop_duration;\n        }\n        if (user.notify_props.comments) {\n            comments = user.notify_props.comments;\n        }\n        if (user.notify_props.email) {\n            enableEmail = user.notify_props.email;\n        }\n        if (user.notify_props.push) {\n            pushActivity = user.notify_props.push;\n        }\n        if (user.notify_props.push_status) {\n            pushStatus = user.notify_props.push_status;\n        }\n    }\n\n    var usernameKey = false;\n    var customKeys = '';\n    var firstNameKey = false;\n    var channelKey = false;\n\n    if (user.notify_props) {\n        if (user.notify_props.mention_keys) {\n            var keys = user.notify_props.mention_keys.split(',');\n\n            if (keys.indexOf(user.username) === -1) {\n                usernameKey = false;\n            } else {\n                usernameKey = true;\n                keys.splice(keys.indexOf(user.username), 1);\n                if (keys.indexOf('@' + user.username) !== -1) {\n                    keys.splice(keys.indexOf('@' + user.username), 1);\n                }\n            }\n\n            customKeys = keys.join(',');\n        }\n\n        if (user.notify_props.first_name) {\n            firstNameKey = user.notify_props.first_name === 'true';\n        }\n\n        if (user.notify_props.channel) {\n            channelKey = user.notify_props.channel === 'true';\n        }\n    }\n\n    return {\n        desktopActivity: desktop,\n        desktopDuration: desktopDuration,\n        enableEmail: enableEmail,\n        pushActivity: pushActivity,\n        pushStatus: pushStatus,\n        desktopSound: sound,\n        usernameKey: usernameKey,\n        customKeys: customKeys,\n        customKeysChecked: customKeys.length > 0,\n        firstNameKey: firstNameKey,\n        channelKey: channelKey,\n        notifyCommentsLevel: comments,\n        isSaving: false\n    };\n} // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar NotificationsTab = function (_React$Component) {\n    (0, _inherits3.default)(NotificationsTab, _React$Component);\n\n    function NotificationsTab(props) {\n        (0, _classCallCheck3.default)(this, NotificationsTab);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (NotificationsTab.__proto__ || (0, _getPrototypeOf2.default)(NotificationsTab)).call(this, props));\n\n        _this.handleSubmit = _this.handleSubmit.bind(_this);\n        _this.handleCancel = _this.handleCancel.bind(_this);\n        _this.updateSection = _this.updateSection.bind(_this);\n        _this.setStateValue = _this.setStateValue.bind(_this);\n        _this.onListenerChange = _this.onListenerChange.bind(_this);\n        _this.handleEmailRadio = _this.handleEmailRadio.bind(_this);\n        _this.updateUsernameKey = _this.updateUsernameKey.bind(_this);\n        _this.updateFirstNameKey = _this.updateFirstNameKey.bind(_this);\n        _this.updateChannelKey = _this.updateChannelKey.bind(_this);\n        _this.updateCustomMentionKeys = _this.updateCustomMentionKeys.bind(_this);\n        _this.updateState = _this.updateState.bind(_this);\n        _this.onCustomChange = _this.onCustomChange.bind(_this);\n        _this.createPushNotificationSection = _this.createPushNotificationSection.bind(_this);\n\n        _this.state = getNotificationsStateFromStores();\n        return _this;\n    }\n\n    (0, _createClass3.default)(NotificationsTab, [{\n        key: 'handleSubmit',\n        value: function handleSubmit(_ref) {\n            var _this2 = this;\n\n            var _ref$enableEmail = _ref.enableEmail,\n                enableEmail = _ref$enableEmail === undefined ? this.state.enableEmail : _ref$enableEmail;\n\n            var data = {};\n            data.user_id = this.props.user.id;\n            data.email = enableEmail;\n            data.desktop_sound = this.state.desktopSound;\n            data.desktop = this.state.desktopActivity;\n            data.desktop_duration = this.state.desktopDuration;\n            data.push = this.state.pushActivity;\n            data.push_status = this.state.pushStatus;\n            data.comments = this.state.notifyCommentsLevel;\n\n            var mentionKeys = [];\n            if (this.state.usernameKey) {\n                mentionKeys.push(this.props.user.username);\n            }\n\n            var stringKeys = mentionKeys.join(',');\n            if (this.state.customKeys.length > 0 && this.state.customKeysChecked) {\n                stringKeys += ',' + this.state.customKeys;\n            }\n\n            data.mention_keys = stringKeys;\n            data.first_name = this.state.firstNameKey.toString();\n            data.channel = this.state.channelKey.toString();\n\n            this.setState({ isSaving: true });\n\n            (0, _user_actions.updateUserNotifyProps)(data, function () {\n                _this2.props.updateSection('');\n            }, function (err) {\n                _this2.setState({ serverError: err.message, isSaving: false });\n            });\n        }\n    }, {\n        key: 'handleCancel',\n        value: function handleCancel(e) {\n            e.preventDefault();\n            this.updateState();\n            this.props.updateSection('');\n        }\n    }, {\n        key: 'setStateValue',\n        value: function setStateValue(key, value) {\n            var data = {};\n            data[key] = value;\n            this.setState(data);\n        }\n    }, {\n        key: 'updateSection',\n        value: function updateSection(section) {\n            this.updateState();\n            this.props.updateSection(section);\n        }\n    }, {\n        key: 'updateState',\n        value: function updateState() {\n            var newState = getNotificationsStateFromStores();\n            if (!Utils.areObjectsEqual(newState, this.state)) {\n                this.setState(newState);\n            }\n\n            this.setState({ isSaving: false });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _user_store2.default.addChangeListener(this.onListenerChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _user_store2.default.removeChangeListener(this.onListenerChange);\n        }\n    }, {\n        key: 'onListenerChange',\n        value: function onListenerChange() {\n            this.updateState();\n        }\n    }, {\n        key: 'handleNotifyCommentsRadio',\n        value: function handleNotifyCommentsRadio(notifyCommentsLevel) {\n            this.setState({ notifyCommentsLevel: notifyCommentsLevel });\n            this.refs.wrapper.focus();\n        }\n    }, {\n        key: 'handlePushRadio',\n        value: function handlePushRadio(pushActivity) {\n            this.setState({ pushActivity: pushActivity });\n            this.refs.wrapper.focus();\n        }\n    }, {\n        key: 'handlePushStatusRadio',\n        value: function handlePushStatusRadio(pushStatus) {\n            this.setState({ pushStatus: pushStatus });\n            this.refs.wrapper.focus();\n        }\n    }, {\n        key: 'handleEmailRadio',\n        value: function handleEmailRadio(enableEmail) {\n            this.setState({ enableEmail: enableEmail });\n            this.refs.wrapper.focus();\n        }\n    }, {\n        key: 'updateUsernameKey',\n        value: function updateUsernameKey(val) {\n            this.setState({ usernameKey: val });\n        }\n    }, {\n        key: 'updateFirstNameKey',\n        value: function updateFirstNameKey(val) {\n            this.setState({ firstNameKey: val });\n        }\n    }, {\n        key: 'updateChannelKey',\n        value: function updateChannelKey(val) {\n            this.setState({ channelKey: val });\n        }\n    }, {\n        key: 'updateCustomMentionKeys',\n        value: function updateCustomMentionKeys() {\n            var checked = this.refs.customcheck.checked;\n\n            if (checked) {\n                var text = this.refs.custommentions.value;\n\n                // remove all spaces and split string into individual keys\n                this.setState({ customKeys: text.replace(/ /g, ''), customKeysChecked: true });\n            } else {\n                this.setState({ customKeys: '', customKeysChecked: false });\n            }\n        }\n    }, {\n        key: 'onCustomChange',\n        value: function onCustomChange() {\n            this.refs.customcheck.checked = true;\n            this.updateCustomMentionKeys();\n        }\n    }, {\n        key: 'createPushNotificationSection',\n        value: function createPushNotificationSection() {\n            var _this3 = this;\n\n            if (this.props.activeSection === 'push') {\n                var inputs = [];\n                var extraInfo = null;\n                var submit = null;\n\n                if (global.window.mm_config.SendPushNotifications === 'true') {\n                    var pushActivityRadio = [false, false, false];\n                    if (this.state.pushActivity === _constants.NotificationLevels.ALL) {\n                        pushActivityRadio[0] = true;\n                    } else if (this.state.pushActivity === _constants.NotificationLevels.NONE) {\n                        pushActivityRadio[2] = true;\n                    } else {\n                        pushActivityRadio[1] = true;\n                    }\n\n                    var pushStatusRadio = [false, false, false];\n                    if (this.state.pushStatus === _constants2.default.UserStatuses.ONLINE) {\n                        pushStatusRadio[0] = true;\n                    } else if (this.state.pushStatus === _constants2.default.UserStatuses.AWAY) {\n                        pushStatusRadio[1] = true;\n                    } else {\n                        pushStatusRadio[2] = true;\n                    }\n\n                    var pushStatusSettings = void 0;\n                    if (this.state.pushActivity !== _constants.NotificationLevels.NONE) {\n                        pushStatusSettings = _react2.default.createElement(\n                            'div',\n                            null,\n                            _react2.default.createElement('hr', null),\n                            _react2.default.createElement(\n                                'label',\n                                null,\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.notifications.push_notification.status',\n                                    defaultMessage: 'Trigger push notifications when'\n                                })\n                            ),\n                            _react2.default.createElement('br', null),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'radio' },\n                                _react2.default.createElement(\n                                    'label',\n                                    null,\n                                    _react2.default.createElement('input', {\n                                        id: 'pushNotificationOnline',\n                                        type: 'radio',\n                                        name: 'pushNotificationStatus',\n                                        checked: pushStatusRadio[0],\n                                        onChange: this.handlePushStatusRadio.bind(this, _constants2.default.UserStatuses.ONLINE)\n                                    }),\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'user.settings.push_notification.online',\n                                        defaultMessage: 'Online, away or offline'\n                                    })\n                                ),\n                                _react2.default.createElement('br', null)\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'radio' },\n                                _react2.default.createElement(\n                                    'label',\n                                    null,\n                                    _react2.default.createElement('input', {\n                                        id: 'pushNotificationAway',\n                                        type: 'radio',\n                                        name: 'pushNotificationStatus',\n                                        checked: pushStatusRadio[1],\n                                        onChange: this.handlePushStatusRadio.bind(this, _constants2.default.UserStatuses.AWAY)\n                                    }),\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'user.settings.push_notification.away',\n                                        defaultMessage: 'Away or offline'\n                                    })\n                                ),\n                                _react2.default.createElement('br', null)\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'radio' },\n                                _react2.default.createElement(\n                                    'label',\n                                    null,\n                                    _react2.default.createElement('input', {\n                                        id: 'pushNotificationOffline',\n                                        type: 'radio',\n                                        name: 'pushNotificationStatus',\n                                        checked: pushStatusRadio[2],\n                                        onChange: this.handlePushStatusRadio.bind(this, _constants2.default.UserStatuses.OFFLINE)\n                                    }),\n                                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                        id: 'user.settings.push_notification.offline',\n                                        defaultMessage: 'Offline'\n                                    })\n                                )\n                            )\n                        );\n\n                        extraInfo = _react2.default.createElement(\n                            'span',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.push_notification.status_info',\n                                defaultMessage: 'Notification alerts are only pushed to your mobile device when your online status matches the selection above.'\n                            })\n                        );\n                    }\n\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        { key: 'userNotificationLevelOption' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.push_notification.send',\n                                defaultMessage: 'Send mobile push notifications'\n                            })\n                        ),\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'radio' },\n                            _react2.default.createElement(\n                                'label',\n                                null,\n                                _react2.default.createElement('input', {\n                                    id: 'pushNotificationAllActivity',\n                                    type: 'radio',\n                                    name: 'pushNotificationLevel',\n                                    checked: pushActivityRadio[0],\n                                    onChange: this.handlePushRadio.bind(this, _constants.NotificationLevels.ALL)\n                                }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.push_notification.allActivity',\n                                    defaultMessage: 'For all activity'\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'radio' },\n                            _react2.default.createElement(\n                                'label',\n                                null,\n                                _react2.default.createElement('input', {\n                                    id: 'pushNotificationMentions',\n                                    type: 'radio',\n                                    name: 'pushNotificationLevel',\n                                    checked: pushActivityRadio[1],\n                                    onChange: this.handlePushRadio.bind(this, _constants.NotificationLevels.MENTION)\n                                }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.push_notification.onlyMentions',\n                                    defaultMessage: 'For mentions and direct messages'\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'radio' },\n                            _react2.default.createElement(\n                                'label',\n                                null,\n                                _react2.default.createElement('input', {\n                                    id: 'pushNotificationNever',\n                                    type: 'radio',\n                                    name: 'pushNotificationLevel',\n                                    checked: pushActivityRadio[2],\n                                    onChange: this.handlePushRadio.bind(this, _constants.NotificationLevels.NONE)\n                                }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.notifications.never',\n                                    defaultMessage: 'Never'\n                                })\n                            )\n                        ),\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement(\n                            'span',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.push_notification.info',\n                                defaultMessage: 'Notification alerts are pushed to your mobile device when there is activity in Mattermost.'\n                            })\n                        ),\n                        pushStatusSettings\n                    ));\n\n                    submit = this.handleSubmit;\n                } else {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'oauthEmailInfo',\n                            className: 'padding-top'\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.push_notification.disabled_long',\n                            defaultMessage: 'Push notifications for mobile devices have been disabled by your System Administrator.'\n                        })\n                    ));\n                }\n\n                return _react2.default.createElement(_setting_item_max2.default, {\n                    title: Utils.localizeMessage('user.settings.notifications.push', 'Mobile push notifications'),\n                    extraInfo: extraInfo,\n                    inputs: inputs,\n                    submit: submit,\n                    server_error: this.state.serverError,\n                    updateSection: this.handleCancel\n                });\n            }\n\n            var describe = '';\n            if (this.state.pushActivity === _constants.NotificationLevels.ALL) {\n                if (this.state.pushStatus === _constants2.default.UserStatuses.AWAY) {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.push_notification.allActivityAway',\n                        defaultMessage: 'For all activity when away or offline'\n                    });\n                } else if (this.state.pushStatus === _constants2.default.UserStatuses.OFFLINE) {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.push_notification.allActivityOffline',\n                        defaultMessage: 'For all activity when offline'\n                    });\n                } else {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.push_notification.allActivityOnline',\n                        defaultMessage: 'For all activity when online, away or offline'\n                    });\n                }\n            } else if (this.state.pushActivity === _constants.NotificationLevels.NONE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.notifications.never',\n                    defaultMessage: 'Never'\n                });\n            } else if (global.window.mm_config.SendPushNotifications === 'false') {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.push_notification.disabled',\n                    defaultMessage: 'Disabled by System Administrator'\n                });\n            } else {\n                if (this.state.pushStatus === _constants2.default.UserStatuses.AWAY) {\n                    //eslint-disable-line no-lonely-if\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.push_notification.onlyMentionsAway',\n                        defaultMessage: 'For mentions and direct messages when away or offline'\n                    });\n                } else if (this.state.pushStatus === _constants2.default.UserStatuses.OFFLINE) {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.push_notification.onlyMentionsOffline',\n                        defaultMessage: 'For mentions and direct messages when offline'\n                    });\n                } else {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.push_notification.onlyMentionsOnline',\n                        defaultMessage: 'For mentions and direct messages when online, away or offline'\n                    });\n                }\n            }\n\n            var handleUpdatePushSection = function handleUpdatePushSection() {\n                _this3.props.updateSection('push');\n            };\n\n            return _react2.default.createElement(_setting_item_min2.default, {\n                title: Utils.localizeMessage('user.settings.notifications.push', 'Mobile push notifications'),\n                describe: describe,\n                updateSection: handleUpdatePushSection\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this4 = this;\n\n            var serverError = this.state.serverError;\n            var user = this.props.user;\n\n            var keysSection = void 0;\n            var handleUpdateKeysSection = void 0;\n            if (this.props.activeSection === 'keys') {\n                var inputs = [];\n\n                if (user.first_name) {\n                    var handleUpdateFirstNameKey = function handleUpdateFirstNameKey(e) {\n                        _this4.updateFirstNameKey(e.target.checked);\n                    };\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        { key: 'userNotificationFirstNameOption' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'checkbox' },\n                            _react2.default.createElement(\n                                'label',\n                                null,\n                                _react2.default.createElement('input', {\n                                    id: 'notificationTriggerFirst',\n                                    type: 'checkbox',\n                                    checked: this.state.firstNameKey,\n                                    onChange: handleUpdateFirstNameKey\n                                }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.notifications.sensitiveName',\n                                    defaultMessage: 'Your case sensitive first name \"{first_name}\"',\n                                    values: {\n                                        first_name: user.first_name\n                                    }\n                                })\n                            )\n                        )\n                    ));\n                }\n\n                var handleUpdateUsernameKey = function handleUpdateUsernameKey(e) {\n                    _this4.updateUsernameKey(e.target.checked);\n                };\n                inputs.push(_react2.default.createElement(\n                    'div',\n                    { key: 'userNotificationUsernameOption' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'checkbox' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'notificationTriggerUsername',\n                                type: 'checkbox',\n                                checked: this.state.usernameKey,\n                                onChange: handleUpdateUsernameKey\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.sensitiveUsername',\n                                defaultMessage: 'Your non-case sensitive username \"{username}\"',\n                                values: {\n                                    username: user.username\n                                }\n                            })\n                        )\n                    )\n                ));\n\n                var handleUpdateChannelKey = function handleUpdateChannelKey(e) {\n                    _this4.updateChannelKey(e.target.checked);\n                };\n                inputs.push(_react2.default.createElement(\n                    'div',\n                    { key: 'userNotificationChannelOption' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'checkbox' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'notificationTriggerShouts',\n                                type: 'checkbox',\n                                checked: this.state.channelKey,\n                                onChange: handleUpdateChannelKey\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.channelWide',\n                                defaultMessage: 'Channel-wide mentions \"@channel\", \"@all\", \"@here\"'\n                            })\n                        )\n                    )\n                ));\n\n                inputs.push(_react2.default.createElement(\n                    'div',\n                    { key: 'userNotificationCustomOption' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'checkbox' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'notificationTriggerCustom',\n                                ref: 'customcheck',\n                                type: 'checkbox',\n                                checked: this.state.customKeysChecked,\n                                onChange: this.updateCustomMentionKeys\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.sensitiveWords',\n                                defaultMessage: 'Other non-case sensitive words, separated by commas:'\n                            })\n                        )\n                    ),\n                    _react2.default.createElement('input', {\n                        id: 'notificationTriggerCustomText',\n                        ref: 'custommentions',\n                        className: 'form-control mentions-input',\n                        type: 'text',\n                        defaultValue: this.state.customKeys,\n                        onChange: this.onCustomChange\n                    })\n                ));\n\n                var extraInfo = _react2.default.createElement(\n                    'span',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.mentionsInfo',\n                        defaultMessage: 'Mentions trigger when someone sends a message that includes your username (@{username}) or any of the options selected above.',\n                        values: {\n                            username: user.username\n                        }\n                    })\n                );\n\n                keysSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: Utils.localizeMessage('user.settings.notifications.wordsTrigger', 'Words that trigger mentions'),\n                    inputs: inputs,\n                    submit: this.handleSubmit,\n                    saving: this.state.isSaving,\n                    server_error: serverError,\n                    updateSection: this.handleCancel,\n                    extraInfo: extraInfo\n                });\n            } else {\n                var keys = ['@' + user.username];\n                if (this.state.firstNameKey) {\n                    keys.push(user.first_name);\n                }\n                if (this.state.usernameKey) {\n                    keys.push(user.username);\n                }\n\n                if (this.state.channelKey) {\n                    keys.push('@channel');\n                    keys.push('@all');\n                    keys.push('@here');\n                }\n                if (this.state.customKeys.length > 0) {\n                    keys = keys.concat(this.state.customKeys.split(','));\n                }\n\n                var describe = '';\n                for (var i = 0; i < keys.length; i++) {\n                    if (keys[i] !== '') {\n                        describe += '\"' + keys[i] + '\", ';\n                    }\n                }\n\n                if (describe.length > 0) {\n                    describe = describe.substring(0, describe.length - 2);\n                } else {\n                    describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.noWords',\n                        defaultMessage: 'No words configured'\n                    });\n                }\n\n                handleUpdateKeysSection = function updateKeysSection() {\n                    this.props.updateSection('keys');\n                }.bind(this);\n\n                keysSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: Utils.localizeMessage('user.settings.notifications.wordsTrigger', 'Words that trigger mentions'),\n                    describe: describe,\n                    updateSection: handleUpdateKeysSection\n                });\n            }\n\n            var commentsSection = void 0;\n            var handleUpdateCommentsSection = void 0;\n            if (this.props.activeSection === 'comments') {\n                var commentsActive = [false, false, false];\n                if (this.state.notifyCommentsLevel === 'never') {\n                    commentsActive[2] = true;\n                } else if (this.state.notifyCommentsLevel === 'root') {\n                    commentsActive[1] = true;\n                } else {\n                    commentsActive[0] = true;\n                }\n\n                var _inputs = [];\n\n                _inputs.push(_react2.default.createElement(\n                    'div',\n                    { key: 'userNotificationLevelOption' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'notificationCommentsAny',\n                                type: 'radio',\n                                name: 'commentsNotificationLevel',\n                                checked: commentsActive[0],\n                                onChange: this.handleNotifyCommentsRadio.bind(this, 'any')\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.commentsAny',\n                                defaultMessage: 'Mention any comments in a thread you participated in (This will include both mentions to your root post and any comments after you commented on a post)'\n                            })\n                        ),\n                        _react2.default.createElement('br', null)\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'notificationCommentsRoot',\n                                type: 'radio',\n                                name: 'commentsNotificationLevel',\n                                checked: commentsActive[1],\n                                onChange: this.handleNotifyCommentsRadio.bind(this, 'root')\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.commentsRoot',\n                                defaultMessage: 'Mention any comments on your post'\n                            })\n                        ),\n                        _react2.default.createElement('br', null)\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'notificationCommentsNever',\n                                type: 'radio',\n                                name: 'commentsNotificationLevel',\n                                checked: commentsActive[2],\n                                onChange: this.handleNotifyCommentsRadio.bind(this, 'never')\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.commentsNever',\n                                defaultMessage: 'No mentions for comments'\n                            })\n                        )\n                    )\n                ));\n\n                var _extraInfo = _react2.default.createElement(\n                    'span',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.commentsInfo',\n                        defaultMessage: 'In addition to notifications for when you\\'re mentioned, select if you would like to receive notifications on reply threads.'\n                    })\n                );\n\n                commentsSection = _react2.default.createElement(_setting_item_max2.default, {\n                    title: Utils.localizeMessage('user.settings.notifications.comments', 'Reply notifications'),\n                    extraInfo: _extraInfo,\n                    inputs: _inputs,\n                    submit: this.handleSubmit,\n                    saving: this.state.isSaving,\n                    server_error: serverError,\n                    updateSection: this.handleCancel\n                });\n            } else {\n                var _describe = '';\n                if (this.state.notifyCommentsLevel === 'never') {\n                    _describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.commentsNever',\n                        defaultMessage: 'Do not trigger notifications on messages in reply threads unless I\\'m mentioned'\n                    });\n                } else if (this.state.notifyCommentsLevel === 'root') {\n                    _describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.commentsRoot',\n                        defaultMessage: 'Trigger notifications on messages in threads that I start'\n                    });\n                } else {\n                    _describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.commentsAny',\n                        defaultMessage: 'Trigger notifications on messages in reply threads that I start or participate in'\n                    });\n                }\n\n                handleUpdateCommentsSection = function updateCommentsSection() {\n                    this.props.updateSection('comments');\n                }.bind(this);\n\n                commentsSection = _react2.default.createElement(_setting_item_min2.default, {\n                    title: Utils.localizeMessage('user.settings.notifications.comments', 'Reply notifications'),\n                    describe: _describe,\n                    updateSection: handleUpdateCommentsSection\n                });\n            }\n\n            var pushNotificationSection = this.createPushNotificationSection();\n            var enableEmail = this.state.enableEmail === 'true';\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'div',\n                    { className: 'modal-header' },\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            id: 'closeButton',\n                            type: 'button',\n                            className: 'close',\n                            'data-dismiss': 'modal',\n                            onClick: this.props.closeModal\n                        },\n                        _react2.default.createElement(\n                            'span',\n                            { 'aria-hidden': 'true' },\n                            ''\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'h4',\n                        {\n                            className: 'modal-title',\n                            ref: 'title'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-back' },\n                            _react2.default.createElement('i', {\n                                className: 'fa fa-angle-left',\n                                onClick: this.props.collapseModal\n                            })\n                        ),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.title',\n                            defaultMessage: 'Notification Settings'\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    {\n                        ref: 'wrapper',\n                        className: 'user-settings'\n                    },\n                    _react2.default.createElement(\n                        'h3',\n                        { className: 'tab-header' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.header',\n                            defaultMessage: 'Notifications'\n                        })\n                    ),\n                    _react2.default.createElement('div', { className: 'divider-dark first' }),\n                    _react2.default.createElement(_desktop_notification_settings2.default, {\n                        activity: this.state.desktopActivity,\n                        sound: this.state.desktopSound,\n                        duration: this.state.desktopDuration,\n                        updateSection: this.updateSection,\n                        setParentState: this.setStateValue,\n                        submit: this.handleSubmit,\n                        saving: this.state.isSaving,\n                        cancel: this.handleCancel,\n                        error: this.state.serverError,\n                        active: this.props.activeSection === 'desktop'\n                    }),\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    _react2.default.createElement(_email_notification_setting2.default, {\n                        activeSection: this.props.activeSection,\n                        updateSection: this.props.updateSection,\n                        enableEmail: enableEmail,\n                        emailInterval: Utils.getEmailInterval(enableEmail),\n                        onSubmit: this.handleSubmit,\n                        onCancel: this.handleCancel,\n                        saving: this.state.isSaving,\n                        serverError: this.state.serverError\n                    }),\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    pushNotificationSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    keysSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    commentsSection,\n                    _react2.default.createElement('div', { className: 'divider-dark' })\n                )\n            );\n        }\n    }]);\n    return NotificationsTab;\n}(_react2.default.Component);\n\nexports.default = NotificationsTab;\n\n\nNotificationsTab.defaultProps = {\n    user: null,\n    activeSection: '',\n    activeTab: ''\n};\nNotificationsTab.propTypes = {\n    user: _propTypes2.default.object,\n    updateSection: _propTypes2.default.func,\n    updateTab: _propTypes2.default.func,\n    activeSection: _propTypes2.default.string,\n    activeTab: _propTypes2.default.string,\n    closeModal: _propTypes2.default.func.isRequired,\n    collapseModal: _propTypes2.default.func.isRequired\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0MS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19ub3RpZmljYXRpb25zLmpzeD9jOTUyIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQge3VwZGF0ZVVzZXJOb3RpZnlQcm9wc30gZnJvbSAnYWN0aW9ucy91c2VyX2FjdGlvbnMuanN4JztcbmltcG9ydCBVc2VyU3RvcmUgZnJvbSAnc3RvcmVzL3VzZXJfc3RvcmUuanN4JztcblxuaW1wb3J0IENvbnN0YW50cywge05vdGlmaWNhdGlvbkxldmVsc30gZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgU2V0dGluZ0l0ZW1NYXggZnJvbSAnY29tcG9uZW50cy9zZXR0aW5nX2l0ZW1fbWF4LmpzeCc7XG5pbXBvcnQgU2V0dGluZ0l0ZW1NaW4gZnJvbSAnY29tcG9uZW50cy9zZXR0aW5nX2l0ZW1fbWluLmpzeCc7XG5cbmltcG9ydCBEZXNrdG9wTm90aWZpY2F0aW9uU2V0dGluZ3MgZnJvbSAnLi9kZXNrdG9wX25vdGlmaWNhdGlvbl9zZXR0aW5ncy5qc3gnO1xuaW1wb3J0IEVtYWlsTm90aWZpY2F0aW9uU2V0dGluZyBmcm9tICcuL2VtYWlsX25vdGlmaWNhdGlvbl9zZXR0aW5nLmpzeCc7XG5cbmZ1bmN0aW9uIGdldE5vdGlmaWNhdGlvbnNTdGF0ZUZyb21TdG9yZXMoKSB7XG4gICAgY29uc3QgdXNlciA9IFVzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpO1xuXG4gICAgbGV0IGRlc2t0b3AgPSBOb3RpZmljYXRpb25MZXZlbHMuREVGQVVMVDtcbiAgICBsZXQgc291bmQgPSAndHJ1ZSc7XG4gICAgbGV0IGRlc2t0b3BEdXJhdGlvbiA9ICc1JztcbiAgICBsZXQgY29tbWVudHMgPSAnbmV2ZXInO1xuICAgIGxldCBlbmFibGVFbWFpbCA9ICd0cnVlJztcbiAgICBsZXQgcHVzaEFjdGl2aXR5ID0gTm90aWZpY2F0aW9uTGV2ZWxzLk1FTlRJT047XG4gICAgbGV0IHB1c2hTdGF0dXMgPSBDb25zdGFudHMuVXNlclN0YXR1c2VzLk9OTElORTtcblxuICAgIGlmICh1c2VyLm5vdGlmeV9wcm9wcykge1xuICAgICAgICBpZiAodXNlci5ub3RpZnlfcHJvcHMuZGVza3RvcCkge1xuICAgICAgICAgICAgZGVza3RvcCA9IHVzZXIubm90aWZ5X3Byb3BzLmRlc2t0b3A7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXIubm90aWZ5X3Byb3BzLmRlc2t0b3Bfc291bmQpIHtcbiAgICAgICAgICAgIHNvdW5kID0gdXNlci5ub3RpZnlfcHJvcHMuZGVza3RvcF9zb3VuZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlci5ub3RpZnlfcHJvcHMuZGVza3RvcF9kdXJhdGlvbikge1xuICAgICAgICAgICAgZGVza3RvcER1cmF0aW9uID0gdXNlci5ub3RpZnlfcHJvcHMuZGVza3RvcF9kdXJhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlci5ub3RpZnlfcHJvcHMuY29tbWVudHMpIHtcbiAgICAgICAgICAgIGNvbW1lbnRzID0gdXNlci5ub3RpZnlfcHJvcHMuY29tbWVudHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZXIubm90aWZ5X3Byb3BzLmVtYWlsKSB7XG4gICAgICAgICAgICBlbmFibGVFbWFpbCA9IHVzZXIubm90aWZ5X3Byb3BzLmVtYWlsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyLm5vdGlmeV9wcm9wcy5wdXNoKSB7XG4gICAgICAgICAgICBwdXNoQWN0aXZpdHkgPSB1c2VyLm5vdGlmeV9wcm9wcy5wdXNoO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VyLm5vdGlmeV9wcm9wcy5wdXNoX3N0YXR1cykge1xuICAgICAgICAgICAgcHVzaFN0YXR1cyA9IHVzZXIubm90aWZ5X3Byb3BzLnB1c2hfc3RhdHVzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHVzZXJuYW1lS2V5ID0gZmFsc2U7XG4gICAgbGV0IGN1c3RvbUtleXMgPSAnJztcbiAgICBsZXQgZmlyc3ROYW1lS2V5ID0gZmFsc2U7XG4gICAgbGV0IGNoYW5uZWxLZXkgPSBmYWxzZTtcblxuICAgIGlmICh1c2VyLm5vdGlmeV9wcm9wcykge1xuICAgICAgICBpZiAodXNlci5ub3RpZnlfcHJvcHMubWVudGlvbl9rZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gdXNlci5ub3RpZnlfcHJvcHMubWVudGlvbl9rZXlzLnNwbGl0KCcsJyk7XG5cbiAgICAgICAgICAgIGlmIChrZXlzLmluZGV4T2YodXNlci51c2VybmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWVLZXkgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWVLZXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGtleXMuc3BsaWNlKGtleXMuaW5kZXhPZih1c2VyLnVzZXJuYW1lKSwgMSk7XG4gICAgICAgICAgICAgICAgaWYgKGtleXMuaW5kZXhPZihgQCR7dXNlci51c2VybmFtZX1gKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5zcGxpY2Uoa2V5cy5pbmRleE9mKGBAJHt1c2VyLnVzZXJuYW1lfWApLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1c3RvbUtleXMgPSBrZXlzLmpvaW4oJywnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1c2VyLm5vdGlmeV9wcm9wcy5maXJzdF9uYW1lKSB7XG4gICAgICAgICAgICBmaXJzdE5hbWVLZXkgPSB1c2VyLm5vdGlmeV9wcm9wcy5maXJzdF9uYW1lID09PSAndHJ1ZSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlci5ub3RpZnlfcHJvcHMuY2hhbm5lbCkge1xuICAgICAgICAgICAgY2hhbm5lbEtleSA9IHVzZXIubm90aWZ5X3Byb3BzLmNoYW5uZWwgPT09ICd0cnVlJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGRlc2t0b3BBY3Rpdml0eTogZGVza3RvcCxcbiAgICAgICAgZGVza3RvcER1cmF0aW9uLFxuICAgICAgICBlbmFibGVFbWFpbCxcbiAgICAgICAgcHVzaEFjdGl2aXR5LFxuICAgICAgICBwdXNoU3RhdHVzLFxuICAgICAgICBkZXNrdG9wU291bmQ6IHNvdW5kLFxuICAgICAgICB1c2VybmFtZUtleSxcbiAgICAgICAgY3VzdG9tS2V5cyxcbiAgICAgICAgY3VzdG9tS2V5c0NoZWNrZWQ6IGN1c3RvbUtleXMubGVuZ3RoID4gMCxcbiAgICAgICAgZmlyc3ROYW1lS2V5LFxuICAgICAgICBjaGFubmVsS2V5LFxuICAgICAgICBub3RpZnlDb21tZW50c0xldmVsOiBjb21tZW50cyxcbiAgICAgICAgaXNTYXZpbmc6IGZhbHNlXG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90aWZpY2F0aW9uc1RhYiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gdGhpcy5oYW5kbGVTdWJtaXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVDYW5jZWwgPSB0aGlzLmhhbmRsZUNhbmNlbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNlY3Rpb24gPSB0aGlzLnVwZGF0ZVNlY3Rpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZVZhbHVlID0gdGhpcy5zZXRTdGF0ZVZhbHVlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25MaXN0ZW5lckNoYW5nZSA9IHRoaXMub25MaXN0ZW5lckNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUVtYWlsUmFkaW8gPSB0aGlzLmhhbmRsZUVtYWlsUmFkaW8uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVVc2VybmFtZUtleSA9IHRoaXMudXBkYXRlVXNlcm5hbWVLZXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVGaXJzdE5hbWVLZXkgPSB0aGlzLnVwZGF0ZUZpcnN0TmFtZUtleS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNoYW5uZWxLZXkgPSB0aGlzLnVwZGF0ZUNoYW5uZWxLZXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVDdXN0b21NZW50aW9uS2V5cyA9IHRoaXMudXBkYXRlQ3VzdG9tTWVudGlvbktleXMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSA9IHRoaXMudXBkYXRlU3RhdGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkN1c3RvbUNoYW5nZSA9IHRoaXMub25DdXN0b21DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jcmVhdGVQdXNoTm90aWZpY2F0aW9uU2VjdGlvbiA9IHRoaXMuY3JlYXRlUHVzaE5vdGlmaWNhdGlvblNlY3Rpb24uYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0gZ2V0Tm90aWZpY2F0aW9uc1N0YXRlRnJvbVN0b3JlcygpO1xuICAgIH1cblxuICAgIGhhbmRsZVN1Ym1pdCh7ZW5hYmxlRW1haWwgPSB0aGlzLnN0YXRlLmVuYWJsZUVtYWlsfSkge1xuICAgICAgICBjb25zdCBkYXRhID0ge307XG4gICAgICAgIGRhdGEudXNlcl9pZCA9IHRoaXMucHJvcHMudXNlci5pZDtcbiAgICAgICAgZGF0YS5lbWFpbCA9IGVuYWJsZUVtYWlsO1xuICAgICAgICBkYXRhLmRlc2t0b3Bfc291bmQgPSB0aGlzLnN0YXRlLmRlc2t0b3BTb3VuZDtcbiAgICAgICAgZGF0YS5kZXNrdG9wID0gdGhpcy5zdGF0ZS5kZXNrdG9wQWN0aXZpdHk7XG4gICAgICAgIGRhdGEuZGVza3RvcF9kdXJhdGlvbiA9IHRoaXMuc3RhdGUuZGVza3RvcER1cmF0aW9uO1xuICAgICAgICBkYXRhLnB1c2ggPSB0aGlzLnN0YXRlLnB1c2hBY3Rpdml0eTtcbiAgICAgICAgZGF0YS5wdXNoX3N0YXR1cyA9IHRoaXMuc3RhdGUucHVzaFN0YXR1cztcbiAgICAgICAgZGF0YS5jb21tZW50cyA9IHRoaXMuc3RhdGUubm90aWZ5Q29tbWVudHNMZXZlbDtcblxuICAgICAgICBjb25zdCBtZW50aW9uS2V5cyA9IFtdO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS51c2VybmFtZUtleSkge1xuICAgICAgICAgICAgbWVudGlvbktleXMucHVzaCh0aGlzLnByb3BzLnVzZXIudXNlcm5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHN0cmluZ0tleXMgPSBtZW50aW9uS2V5cy5qb2luKCcsJyk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmN1c3RvbUtleXMubGVuZ3RoID4gMCAmJiB0aGlzLnN0YXRlLmN1c3RvbUtleXNDaGVja2VkKSB7XG4gICAgICAgICAgICBzdHJpbmdLZXlzICs9ICcsJyArIHRoaXMuc3RhdGUuY3VzdG9tS2V5cztcbiAgICAgICAgfVxuXG4gICAgICAgIGRhdGEubWVudGlvbl9rZXlzID0gc3RyaW5nS2V5cztcbiAgICAgICAgZGF0YS5maXJzdF9uYW1lID0gdGhpcy5zdGF0ZS5maXJzdE5hbWVLZXkudG9TdHJpbmcoKTtcbiAgICAgICAgZGF0YS5jaGFubmVsID0gdGhpcy5zdGF0ZS5jaGFubmVsS2V5LnRvU3RyaW5nKCk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNTYXZpbmc6IHRydWV9KTtcblxuICAgICAgICB1cGRhdGVVc2VyTm90aWZ5UHJvcHMoXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlcnZlckVycm9yOiBlcnIubWVzc2FnZSwgaXNTYXZpbmc6IGZhbHNlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2FuY2VsKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKCk7XG4gICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgfVxuXG4gICAgc2V0U3RhdGVWYWx1ZShrZXksIHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7fTtcbiAgICAgICAgZGF0YVtrZXldID0gdmFsdWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoZGF0YSk7XG4gICAgfVxuXG4gICAgdXBkYXRlU2VjdGlvbihzZWN0aW9uKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdGUoKTtcbiAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVTZWN0aW9uKHNlY3Rpb24pO1xuICAgIH1cblxuICAgIHVwZGF0ZVN0YXRlKCkge1xuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IGdldE5vdGlmaWNhdGlvbnNTdGF0ZUZyb21TdG9yZXMoKTtcbiAgICAgICAgaWYgKCFVdGlscy5hcmVPYmplY3RzRXF1YWwobmV3U3RhdGUsIHRoaXMuc3RhdGUpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzU2F2aW5nOiBmYWxzZX0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBVc2VyU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkxpc3RlbmVyQ2hhbmdlKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgVXNlclN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMub25MaXN0ZW5lckNoYW5nZSk7XG4gICAgfVxuXG4gICAgb25MaXN0ZW5lckNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSgpO1xuICAgIH1cblxuICAgIGhhbmRsZU5vdGlmeUNvbW1lbnRzUmFkaW8obm90aWZ5Q29tbWVudHNMZXZlbCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtub3RpZnlDb21tZW50c0xldmVsfSk7XG4gICAgICAgIHRoaXMucmVmcy53cmFwcGVyLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgaGFuZGxlUHVzaFJhZGlvKHB1c2hBY3Rpdml0eSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtwdXNoQWN0aXZpdHl9KTtcbiAgICAgICAgdGhpcy5yZWZzLndyYXBwZXIuZm9jdXMoKTtcbiAgICB9XG5cbiAgICBoYW5kbGVQdXNoU3RhdHVzUmFkaW8ocHVzaFN0YXR1cykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtwdXNoU3RhdHVzfSk7XG4gICAgICAgIHRoaXMucmVmcy53cmFwcGVyLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgaGFuZGxlRW1haWxSYWRpbyhlbmFibGVFbWFpbCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtlbmFibGVFbWFpbH0pO1xuICAgICAgICB0aGlzLnJlZnMud3JhcHBlci5mb2N1cygpO1xuICAgIH1cblxuICAgIHVwZGF0ZVVzZXJuYW1lS2V5KHZhbCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHt1c2VybmFtZUtleTogdmFsfSk7XG4gICAgfVxuXG4gICAgdXBkYXRlRmlyc3ROYW1lS2V5KHZhbCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtmaXJzdE5hbWVLZXk6IHZhbH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZUNoYW5uZWxLZXkodmFsKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2NoYW5uZWxLZXk6IHZhbH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZUN1c3RvbU1lbnRpb25LZXlzKCkge1xuICAgICAgICBjb25zdCBjaGVja2VkID0gdGhpcy5yZWZzLmN1c3RvbWNoZWNrLmNoZWNrZWQ7XG5cbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLnJlZnMuY3VzdG9tbWVudGlvbnMudmFsdWU7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBhbGwgc3BhY2VzIGFuZCBzcGxpdCBzdHJpbmcgaW50byBpbmRpdmlkdWFsIGtleXNcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2N1c3RvbUtleXM6IHRleHQucmVwbGFjZSgvIC9nLCAnJyksIGN1c3RvbUtleXNDaGVja2VkOiB0cnVlfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjdXN0b21LZXlzOiAnJywgY3VzdG9tS2V5c0NoZWNrZWQ6IGZhbHNlfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkN1c3RvbUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5yZWZzLmN1c3RvbWNoZWNrLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnVwZGF0ZUN1c3RvbU1lbnRpb25LZXlzKCk7XG4gICAgfVxuXG4gICAgY3JlYXRlUHVzaE5vdGlmaWNhdGlvblNlY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb24gPT09ICdwdXNoJykge1xuICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gW107XG4gICAgICAgICAgICBsZXQgZXh0cmFJbmZvID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBzdWJtaXQgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAoZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuU2VuZFB1c2hOb3RpZmljYXRpb25zID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwdXNoQWN0aXZpdHlSYWRpbyA9IFtmYWxzZSwgZmFsc2UsIGZhbHNlXTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5wdXNoQWN0aXZpdHkgPT09IE5vdGlmaWNhdGlvbkxldmVscy5BTEwpIHtcbiAgICAgICAgICAgICAgICAgICAgcHVzaEFjdGl2aXR5UmFkaW9bMF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5wdXNoQWN0aXZpdHkgPT09IE5vdGlmaWNhdGlvbkxldmVscy5OT05FKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2hBY3Rpdml0eVJhZGlvWzJdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwdXNoQWN0aXZpdHlSYWRpb1sxXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgcHVzaFN0YXR1c1JhZGlvID0gW2ZhbHNlLCBmYWxzZSwgZmFsc2VdO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnB1c2hTdGF0dXMgPT09IENvbnN0YW50cy5Vc2VyU3RhdHVzZXMuT05MSU5FKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2hTdGF0dXNSYWRpb1swXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLnB1c2hTdGF0dXMgPT09IENvbnN0YW50cy5Vc2VyU3RhdHVzZXMuQVdBWSkge1xuICAgICAgICAgICAgICAgICAgICBwdXNoU3RhdHVzUmFkaW9bMV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2hTdGF0dXNSYWRpb1syXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IHB1c2hTdGF0dXNTZXR0aW5ncztcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5wdXNoQWN0aXZpdHkgIT09IE5vdGlmaWNhdGlvbkxldmVscy5OT05FKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2hTdGF0dXNTZXR0aW5ncyA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLnB1c2hfbm90aWZpY2F0aW9uLnN0YXR1cydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUcmlnZ2VyIHB1c2ggbm90aWZpY2F0aW9ucyB3aGVuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmFkaW8nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ncHVzaE5vdGlmaWNhdGlvbk9ubGluZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdwdXNoTm90aWZpY2F0aW9uU3RhdHVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3B1c2hTdGF0dXNSYWRpb1swXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVQdXNoU3RhdHVzUmFkaW8uYmluZCh0aGlzLCBDb25zdGFudHMuVXNlclN0YXR1c2VzLk9OTElORSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5wdXNoX25vdGlmaWNhdGlvbi5vbmxpbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J09ubGluZSwgYXdheSBvciBvZmZsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmFkaW8nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ncHVzaE5vdGlmaWNhdGlvbkF3YXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0ncHVzaE5vdGlmaWNhdGlvblN0YXR1cydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtwdXNoU3RhdHVzUmFkaW9bMV19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlUHVzaFN0YXR1c1JhZGlvLmJpbmQodGhpcywgQ29uc3RhbnRzLlVzZXJTdGF0dXNlcy5BV0FZKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnB1c2hfbm90aWZpY2F0aW9uLmF3YXknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0F3YXkgb3Igb2ZmbGluZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JhZGlvJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3B1c2hOb3RpZmljYXRpb25PZmZsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J3B1c2hOb3RpZmljYXRpb25TdGF0dXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17cHVzaFN0YXR1c1JhZGlvWzJdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVB1c2hTdGF0dXNSYWRpby5iaW5kKHRoaXMsIENvbnN0YW50cy5Vc2VyU3RhdHVzZXMuT0ZGTElORSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5wdXNoX25vdGlmaWNhdGlvbi5vZmZsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdPZmZsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGV4dHJhSW5mbyA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnB1c2hfbm90aWZpY2F0aW9uLnN0YXR1c19pbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTm90aWZpY2F0aW9uIGFsZXJ0cyBhcmUgb25seSBwdXNoZWQgdG8geW91ciBtb2JpbGUgZGV2aWNlIHdoZW4geW91ciBvbmxpbmUgc3RhdHVzIG1hdGNoZXMgdGhlIHNlbGVjdGlvbiBhYm92ZS4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9J3VzZXJOb3RpZmljYXRpb25MZXZlbE9wdGlvbic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MucHVzaF9ub3RpZmljYXRpb24uc2VuZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1NlbmQgbW9iaWxlIHB1c2ggbm90aWZpY2F0aW9ucydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmFkaW8nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ncHVzaE5vdGlmaWNhdGlvbkFsbEFjdGl2aXR5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdwdXNoTm90aWZpY2F0aW9uTGV2ZWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtwdXNoQWN0aXZpdHlSYWRpb1swXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVB1c2hSYWRpby5iaW5kKHRoaXMsIE5vdGlmaWNhdGlvbkxldmVscy5BTEwpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MucHVzaF9ub3RpZmljYXRpb24uYWxsQWN0aXZpdHknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRm9yIGFsbCBhY3Rpdml0eSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdwdXNoTm90aWZpY2F0aW9uTWVudGlvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J3B1c2hOb3RpZmljYXRpb25MZXZlbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3B1c2hBY3Rpdml0eVJhZGlvWzFdfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlUHVzaFJhZGlvLmJpbmQodGhpcywgTm90aWZpY2F0aW9uTGV2ZWxzLk1FTlRJT04pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MucHVzaF9ub3RpZmljYXRpb24ub25seU1lbnRpb25zJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZvciBtZW50aW9ucyBhbmQgZGlyZWN0IG1lc3NhZ2VzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JhZGlvJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3B1c2hOb3RpZmljYXRpb25OZXZlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0ncHVzaE5vdGlmaWNhdGlvbkxldmVsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17cHVzaEFjdGl2aXR5UmFkaW9bMl19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVQdXNoUmFkaW8uYmluZCh0aGlzLCBOb3RpZmljYXRpb25MZXZlbHMuTk9ORSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLm5ldmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05ldmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5wdXNoX25vdGlmaWNhdGlvbi5pbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTm90aWZpY2F0aW9uIGFsZXJ0cyBhcmUgcHVzaGVkIHRvIHlvdXIgbW9iaWxlIGRldmljZSB3aGVuIHRoZXJlIGlzIGFjdGl2aXR5IGluIE1hdHRlcm1vc3QuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICB7cHVzaFN0YXR1c1NldHRpbmdzfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgc3VibWl0ID0gdGhpcy5oYW5kbGVTdWJtaXQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9J29hdXRoRW1haWxJbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwYWRkaW5nLXRvcCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5wdXNoX25vdGlmaWNhdGlvbi5kaXNhYmxlZF9sb25nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdQdXNoIG5vdGlmaWNhdGlvbnMgZm9yIG1vYmlsZSBkZXZpY2VzIGhhdmUgYmVlbiBkaXNhYmxlZCBieSB5b3VyIFN5c3RlbSBBZG1pbmlzdHJhdG9yLidcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWF4XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5wdXNoJywgJ01vYmlsZSBwdXNoIG5vdGlmaWNhdGlvbnMnKX1cbiAgICAgICAgICAgICAgICAgICAgZXh0cmFJbmZvPXtleHRyYUluZm99XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17aW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ9e3N1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXt0aGlzLnN0YXRlLnNlcnZlckVycm9yfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt0aGlzLmhhbmRsZUNhbmNlbH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkZXNjcmliZSA9ICcnO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5wdXNoQWN0aXZpdHkgPT09IE5vdGlmaWNhdGlvbkxldmVscy5BTEwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnB1c2hTdGF0dXMgPT09IENvbnN0YW50cy5Vc2VyU3RhdHVzZXMuQVdBWSkge1xuICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MucHVzaF9ub3RpZmljYXRpb24uYWxsQWN0aXZpdHlBd2F5J1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZvciBhbGwgYWN0aXZpdHkgd2hlbiBhd2F5IG9yIG9mZmxpbmUnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5wdXNoU3RhdHVzID09PSBDb25zdGFudHMuVXNlclN0YXR1c2VzLk9GRkxJTkUpIHtcbiAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnB1c2hfbm90aWZpY2F0aW9uLmFsbEFjdGl2aXR5T2ZmbGluZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdGb3IgYWxsIGFjdGl2aXR5IHdoZW4gb2ZmbGluZSdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnB1c2hfbm90aWZpY2F0aW9uLmFsbEFjdGl2aXR5T25saW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZvciBhbGwgYWN0aXZpdHkgd2hlbiBvbmxpbmUsIGF3YXkgb3Igb2ZmbGluZSdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUucHVzaEFjdGl2aXR5ID09PSBOb3RpZmljYXRpb25MZXZlbHMuTk9ORSkge1xuICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5uZXZlcidcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05ldmVyJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLlNlbmRQdXNoTm90aWZpY2F0aW9ucyA9PT0gJ2ZhbHNlJykge1xuICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MucHVzaF9ub3RpZmljYXRpb24uZGlzYWJsZWQnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdEaXNhYmxlZCBieSBTeXN0ZW0gQWRtaW5pc3RyYXRvcidcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnB1c2hTdGF0dXMgPT09IENvbnN0YW50cy5Vc2VyU3RhdHVzZXMuQVdBWSkgeyAvL2VzbGludC1kaXNhYmxlLWxpbmUgbm8tbG9uZWx5LWlmXG4gICAgICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5wdXNoX25vdGlmaWNhdGlvbi5vbmx5TWVudGlvbnNBd2F5J1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZvciBtZW50aW9ucyBhbmQgZGlyZWN0IG1lc3NhZ2VzIHdoZW4gYXdheSBvciBvZmZsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUucHVzaFN0YXR1cyA9PT0gQ29uc3RhbnRzLlVzZXJTdGF0dXNlcy5PRkZMSU5FKSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5wdXNoX25vdGlmaWNhdGlvbi5vbmx5TWVudGlvbnNPZmZsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZvciBtZW50aW9ucyBhbmQgZGlyZWN0IG1lc3NhZ2VzIHdoZW4gb2ZmbGluZSdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnB1c2hfbm90aWZpY2F0aW9uLm9ubHlNZW50aW9uc09ubGluZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdGb3IgbWVudGlvbnMgYW5kIGRpcmVjdCBtZXNzYWdlcyB3aGVuIG9ubGluZSwgYXdheSBvciBvZmZsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBoYW5kbGVVcGRhdGVQdXNoU2VjdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbigncHVzaCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2V0dGluZ0l0ZW1NaW5cbiAgICAgICAgICAgICAgICB0aXRsZT17VXRpbHMubG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMucHVzaCcsICdNb2JpbGUgcHVzaCBub3RpZmljYXRpb25zJyl9XG4gICAgICAgICAgICAgICAgZGVzY3JpYmU9e2Rlc2NyaWJlfVxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e2hhbmRsZVVwZGF0ZVB1c2hTZWN0aW9ufVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlckVycm9yID0gdGhpcy5zdGF0ZS5zZXJ2ZXJFcnJvcjtcbiAgICAgICAgY29uc3QgdXNlciA9IHRoaXMucHJvcHMudXNlcjtcblxuICAgICAgICBsZXQga2V5c1NlY3Rpb247XG4gICAgICAgIGxldCBoYW5kbGVVcGRhdGVLZXlzU2VjdGlvbjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlU2VjdGlvbiA9PT0gJ2tleXMnKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBbXTtcblxuICAgICAgICAgICAgaWYgKHVzZXIuZmlyc3RfbmFtZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZVVwZGF0ZUZpcnN0TmFtZUtleSA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlRmlyc3ROYW1lS2V5KGUudGFyZ2V0LmNoZWNrZWQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PSd1c2VyTm90aWZpY2F0aW9uRmlyc3ROYW1lT3B0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjaGVja2JveCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdub3RpZmljYXRpb25UcmlnZ2VyRmlyc3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdjaGVja2JveCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUuZmlyc3ROYW1lS2V5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVVwZGF0ZUZpcnN0TmFtZUtleX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuc2Vuc2l0aXZlTmFtZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdZb3VyIGNhc2Ugc2Vuc2l0aXZlIGZpcnN0IG5hbWUgXCJ7Zmlyc3RfbmFtZX1cIidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0X25hbWU6IHVzZXIuZmlyc3RfbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVVwZGF0ZVVzZXJuYW1lS2V5ID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVVzZXJuYW1lS2V5KGUudGFyZ2V0LmNoZWNrZWQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PSd1c2VyTm90aWZpY2F0aW9uVXNlcm5hbWVPcHRpb24nPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY2hlY2tib3gnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbm90aWZpY2F0aW9uVHJpZ2dlclVzZXJuYW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdjaGVja2JveCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS51c2VybmFtZUtleX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVVwZGF0ZVVzZXJuYW1lS2V5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5zZW5zaXRpdmVVc2VybmFtZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1lvdXIgbm9uLWNhc2Ugc2Vuc2l0aXZlIHVzZXJuYW1lIFwie3VzZXJuYW1lfVwiJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgaGFuZGxlVXBkYXRlQ2hhbm5lbEtleSA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDaGFubmVsS2V5KGUudGFyZ2V0LmNoZWNrZWQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PSd1c2VyTm90aWZpY2F0aW9uQ2hhbm5lbE9wdGlvbic+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjaGVja2JveCc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdub3RpZmljYXRpb25UcmlnZ2VyU2hvdXRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdjaGVja2JveCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5jaGFubmVsS2V5fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlVXBkYXRlQ2hhbm5lbEtleX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuY2hhbm5lbFdpZGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDaGFubmVsLXdpZGUgbWVudGlvbnMgXCJAY2hhbm5lbFwiLCBcIkBhbGxcIiwgXCJAaGVyZVwiJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXYga2V5PSd1c2VyTm90aWZpY2F0aW9uQ3VzdG9tT3B0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NoZWNrYm94Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J25vdGlmaWNhdGlvblRyaWdnZXJDdXN0b20nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0nY3VzdG9tY2hlY2snXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2NoZWNrYm94J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmN1c3RvbUtleXNDaGVja2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy51cGRhdGVDdXN0b21NZW50aW9uS2V5c31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuc2Vuc2l0aXZlV29yZHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdPdGhlciBub24tY2FzZSBzZW5zaXRpdmUgd29yZHMsIHNlcGFyYXRlZCBieSBjb21tYXM6J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nbm90aWZpY2F0aW9uVHJpZ2dlckN1c3RvbVRleHQnXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9J2N1c3RvbW1lbnRpb25zJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmb3JtLWNvbnRyb2wgbWVudGlvbnMtaW5wdXQnXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd0ZXh0J1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXt0aGlzLnN0YXRlLmN1c3RvbUtleXN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkN1c3RvbUNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGV4dHJhSW5mbyA9IChcbiAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMubWVudGlvbnNJbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J01lbnRpb25zIHRyaWdnZXIgd2hlbiBzb21lb25lIHNlbmRzIGEgbWVzc2FnZSB0aGF0IGluY2x1ZGVzIHlvdXIgdXNlcm5hbWUgKEB7dXNlcm5hbWV9KSBvciBhbnkgb2YgdGhlIG9wdGlvbnMgc2VsZWN0ZWQgYWJvdmUuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAga2V5c1NlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWF4XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy53b3Jkc1RyaWdnZXInLCAnV29yZHMgdGhhdCB0cmlnZ2VyIG1lbnRpb25zJyl9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17aW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgICAgICAgICBzYXZpbmc9e3RoaXMuc3RhdGUuaXNTYXZpbmd9XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9lcnJvcj17c2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3RoaXMuaGFuZGxlQ2FuY2VsfVxuICAgICAgICAgICAgICAgICAgICBleHRyYUluZm89e2V4dHJhSW5mb31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBrZXlzID0gWydAJyArIHVzZXIudXNlcm5hbWVdO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuZmlyc3ROYW1lS2V5KSB7XG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKHVzZXIuZmlyc3RfbmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS51c2VybmFtZUtleSkge1xuICAgICAgICAgICAgICAgIGtleXMucHVzaCh1c2VyLnVzZXJuYW1lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuY2hhbm5lbEtleSkge1xuICAgICAgICAgICAgICAgIGtleXMucHVzaCgnQGNoYW5uZWwnKTtcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goJ0BhbGwnKTtcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goJ0BoZXJlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5jdXN0b21LZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBrZXlzID0ga2V5cy5jb25jYXQodGhpcy5zdGF0ZS5jdXN0b21LZXlzLnNwbGl0KCcsJykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgZGVzY3JpYmUgPSAnJztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChrZXlzW2ldICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSArPSAnXCInICsga2V5c1tpXSArICdcIiwgJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkZXNjcmliZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpYmUgPSBkZXNjcmliZS5zdWJzdHJpbmcoMCwgZGVzY3JpYmUubGVuZ3RoIC0gMik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5ub1dvcmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05vIHdvcmRzIGNvbmZpZ3VyZWQnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaGFuZGxlVXBkYXRlS2V5c1NlY3Rpb24gPSBmdW5jdGlvbiB1cGRhdGVLZXlzU2VjdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb24oJ2tleXMnKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcblxuICAgICAgICAgICAga2V5c1NlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgPFNldHRpbmdJdGVtTWluXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy53b3Jkc1RyaWdnZXInLCAnV29yZHMgdGhhdCB0cmlnZ2VyIG1lbnRpb25zJyl9XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlPXtkZXNjcmliZX1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17aGFuZGxlVXBkYXRlS2V5c1NlY3Rpb259XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY29tbWVudHNTZWN0aW9uO1xuICAgICAgICBsZXQgaGFuZGxlVXBkYXRlQ29tbWVudHNTZWN0aW9uO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uID09PSAnY29tbWVudHMnKSB7XG4gICAgICAgICAgICBjb25zdCBjb21tZW50c0FjdGl2ZSA9IFtmYWxzZSwgZmFsc2UsIGZhbHNlXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLm5vdGlmeUNvbW1lbnRzTGV2ZWwgPT09ICduZXZlcicpIHtcbiAgICAgICAgICAgICAgICBjb21tZW50c0FjdGl2ZVsyXSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUubm90aWZ5Q29tbWVudHNMZXZlbCA9PT0gJ3Jvb3QnKSB7XG4gICAgICAgICAgICAgICAgY29tbWVudHNBY3RpdmVbMV0gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb21tZW50c0FjdGl2ZVswXSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGlucHV0cyA9IFtdO1xuXG4gICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT0ndXNlck5vdGlmaWNhdGlvbkxldmVsT3B0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JhZGlvJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J25vdGlmaWNhdGlvbkNvbW1lbnRzQW55J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0nY29tbWVudHNOb3RpZmljYXRpb25MZXZlbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y29tbWVudHNBY3RpdmVbMF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZU5vdGlmeUNvbW1lbnRzUmFkaW8uYmluZCh0aGlzLCAnYW55Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmNvbW1lbnRzQW55J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTWVudGlvbiBhbnkgY29tbWVudHMgaW4gYSB0aHJlYWQgeW91IHBhcnRpY2lwYXRlZCBpbiAoVGhpcyB3aWxsIGluY2x1ZGUgYm90aCBtZW50aW9ucyB0byB5b3VyIHJvb3QgcG9zdCBhbmQgYW55IGNvbW1lbnRzIGFmdGVyIHlvdSBjb21tZW50ZWQgb24gYSBwb3N0KSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmFkaW8nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbm90aWZpY2F0aW9uQ29tbWVudHNSb290J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0nY29tbWVudHNOb3RpZmljYXRpb25MZXZlbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y29tbWVudHNBY3RpdmVbMV19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZU5vdGlmeUNvbW1lbnRzUmFkaW8uYmluZCh0aGlzLCAncm9vdCcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5jb21tZW50c1Jvb3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdNZW50aW9uIGFueSBjb21tZW50cyBvbiB5b3VyIHBvc3QnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JhZGlvJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J25vdGlmaWNhdGlvbkNvbW1lbnRzTmV2ZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdjb21tZW50c05vdGlmaWNhdGlvbkxldmVsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtjb21tZW50c0FjdGl2ZVsyXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlTm90aWZ5Q29tbWVudHNSYWRpby5iaW5kKHRoaXMsICduZXZlcicpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5jb21tZW50c05ldmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTm8gbWVudGlvbnMgZm9yIGNvbW1lbnRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGV4dHJhSW5mbyA9IChcbiAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuY29tbWVudHNJbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9XCJJbiBhZGRpdGlvbiB0byBub3RpZmljYXRpb25zIGZvciB3aGVuIHlvdSdyZSBtZW50aW9uZWQsIHNlbGVjdCBpZiB5b3Ugd291bGQgbGlrZSB0byByZWNlaXZlIG5vdGlmaWNhdGlvbnMgb24gcmVwbHkgdGhyZWFkcy5cIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbW1lbnRzU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NYXhcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmNvbW1lbnRzJywgJ1JlcGx5IG5vdGlmaWNhdGlvbnMnKX1cbiAgICAgICAgICAgICAgICAgICAgZXh0cmFJbmZvPXtleHRyYUluZm99XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17aW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgICAgICAgICBzYXZpbmc9e3RoaXMuc3RhdGUuaXNTYXZpbmd9XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9lcnJvcj17c2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3RoaXMuaGFuZGxlQ2FuY2VsfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRlc2NyaWJlID0gJyc7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5ub3RpZnlDb21tZW50c0xldmVsID09PSAnbmV2ZXInKSB7XG4gICAgICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmNvbW1lbnRzTmV2ZXInXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT1cIkRvIG5vdCB0cmlnZ2VyIG5vdGlmaWNhdGlvbnMgb24gbWVzc2FnZXMgaW4gcmVwbHkgdGhyZWFkcyB1bmxlc3MgSSdtIG1lbnRpb25lZFwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5ub3RpZnlDb21tZW50c0xldmVsID09PSAncm9vdCcpIHtcbiAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuY29tbWVudHNSb290J1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1RyaWdnZXIgbm90aWZpY2F0aW9ucyBvbiBtZXNzYWdlcyBpbiB0aHJlYWRzIHRoYXQgSSBzdGFydCdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuY29tbWVudHNBbnknXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVHJpZ2dlciBub3RpZmljYXRpb25zIG9uIG1lc3NhZ2VzIGluIHJlcGx5IHRocmVhZHMgdGhhdCBJIHN0YXJ0IG9yIHBhcnRpY2lwYXRlIGluJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGhhbmRsZVVwZGF0ZUNvbW1lbnRzU2VjdGlvbiA9IGZ1bmN0aW9uIHVwZGF0ZUNvbW1lbnRzU2VjdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb24oJ2NvbW1lbnRzJyk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyk7XG5cbiAgICAgICAgICAgIGNvbW1lbnRzU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NaW5cbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmNvbW1lbnRzJywgJ1JlcGx5IG5vdGlmaWNhdGlvbnMnKX1cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmU9e2Rlc2NyaWJlfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXtoYW5kbGVVcGRhdGVDb21tZW50c1NlY3Rpb259XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwdXNoTm90aWZpY2F0aW9uU2VjdGlvbiA9IHRoaXMuY3JlYXRlUHVzaE5vdGlmaWNhdGlvblNlY3Rpb24oKTtcbiAgICAgICAgY29uc3QgZW5hYmxlRW1haWwgPSB0aGlzLnN0YXRlLmVuYWJsZUVtYWlsID09PSAndHJ1ZSc7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdjbG9zZUJ1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY2xvc2UnXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWRpc21pc3M9J21vZGFsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5jbG9zZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBhcmlhLWhpZGRlbj0ndHJ1ZSc+eyfDlyd9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGg0XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J21vZGFsLXRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSd0aXRsZSdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWJhY2snPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZmEgZmEtYW5nbGUtbGVmdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcm9wcy5jb2xsYXBzZU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy50aXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTm90aWZpY2F0aW9uIFNldHRpbmdzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIHJlZj0nd3JhcHBlcidcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd1c2VyLXNldHRpbmdzJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGFiLWhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuaGVhZGVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdOb3RpZmljYXRpb25zJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItZGFyayBmaXJzdCcvPlxuICAgICAgICAgICAgICAgICAgICA8RGVza3RvcE5vdGlmaWNhdGlvblNldHRpbmdzXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eT17dGhpcy5zdGF0ZS5kZXNrdG9wQWN0aXZpdHl9XG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VuZD17dGhpcy5zdGF0ZS5kZXNrdG9wU291bmR9XG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbj17dGhpcy5zdGF0ZS5kZXNrdG9wRHVyYXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt0aGlzLnVwZGF0ZVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQYXJlbnRTdGF0ZT17dGhpcy5zZXRTdGF0ZVZhbHVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmluZz17dGhpcy5zdGF0ZS5pc1NhdmluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbD17dGhpcy5oYW5kbGVDYW5jZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcj17dGhpcy5zdGF0ZS5zZXJ2ZXJFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZT17dGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uID09PSAnZGVza3RvcCd9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkaXZpZGVyLWxpZ2h0Jy8+XG4gICAgICAgICAgICAgICAgICAgIDxFbWFpbE5vdGlmaWNhdGlvblNldHRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVNlY3Rpb249e3RoaXMucHJvcHMuYWN0aXZlU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3RoaXMucHJvcHMudXBkYXRlU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUVtYWlsPXtlbmFibGVFbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsSW50ZXJ2YWw9e1V0aWxzLmdldEVtYWlsSW50ZXJ2YWwoZW5hYmxlRW1haWwpfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25TdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DYW5jZWw9e3RoaXMuaGFuZGxlQ2FuY2VsfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2aW5nPXt0aGlzLnN0YXRlLmlzU2F2aW5nfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyRXJyb3I9e3RoaXMuc3RhdGUuc2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkaXZpZGVyLWxpZ2h0Jy8+XG4gICAgICAgICAgICAgICAgICAgIHtwdXNoTm90aWZpY2F0aW9uU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItbGlnaHQnLz5cbiAgICAgICAgICAgICAgICAgICAge2tleXNTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1saWdodCcvPlxuICAgICAgICAgICAgICAgICAgICB7Y29tbWVudHNTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1kYXJrJy8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICApO1xuICAgIH1cbn1cblxuTm90aWZpY2F0aW9uc1RhYi5kZWZhdWx0UHJvcHMgPSB7XG4gICAgdXNlcjogbnVsbCxcbiAgICBhY3RpdmVTZWN0aW9uOiAnJyxcbiAgICBhY3RpdmVUYWI6ICcnXG59O1xuTm90aWZpY2F0aW9uc1RhYi5wcm9wVHlwZXMgPSB7XG4gICAgdXNlcjogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB1cGRhdGVTZWN0aW9uOiBQcm9wVHlwZXMuZnVuYyxcbiAgICB1cGRhdGVUYWI6IFByb3BUeXBlcy5mdW5jLFxuICAgIGFjdGl2ZVNlY3Rpb246IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgYWN0aXZlVGFiOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGNsb3NlTW9kYWw6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgY29sbGFwc2VNb2RhbDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19ub3RpZmljYXRpb25zLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFiQTtBQWVBO0FBbkdBO0FBQ0E7QUFvR0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqQkE7QUFrQkE7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFhQTtBQWRBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQWFBO0FBZEE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVJBO0FBREE7QUF6Q0E7QUFDQTtBQTBEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQWFBO0FBZEE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVJBO0FBYUE7QUFkQTtBQWdCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFEQTtBQWVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBOURBO0FBQ0E7QUFpRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUFVQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFQQTtBQURBO0FBREE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBUEE7QUFEQTtBQURBO0FBQ0E7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBRkE7QUFQQTtBQURBO0FBREE7QUFDQTtBQWlCQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFEQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFoQkE7QUFDQTtBQTBCQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQURBO0FBQ0E7QUFVQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVJBO0FBYUE7QUFkQTtBQWdCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFhQTtBQWRBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQURBO0FBakNBO0FBQ0E7QUFrREE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVBBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBVkE7QUFWQTtBQTBCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF4Q0E7QUEzQkE7QUF3RUE7OztBQTd4QkE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQTh4QkE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2541\n");

/***/ }),

/***/ 2542:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _constants = __webpack_require__(10);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _setting_item_max = __webpack_require__(770);\n\nvar _setting_item_max2 = _interopRequireDefault(_setting_item_max);\n\nvar _setting_item_min = __webpack_require__(771);\n\nvar _setting_item_min2 = _interopRequireDefault(_setting_item_min);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar DesktopNotificationSettings = function (_React$Component) {\n    (0, _inherits3.default)(DesktopNotificationSettings, _React$Component);\n\n    function DesktopNotificationSettings(props) {\n        (0, _classCallCheck3.default)(this, DesktopNotificationSettings);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (DesktopNotificationSettings.__proto__ || (0, _getPrototypeOf2.default)(DesktopNotificationSettings)).call(this, props));\n\n        _this.buildMaximizedSetting = _this.buildMaximizedSetting.bind(_this);\n        _this.buildMinimizedSetting = _this.buildMinimizedSetting.bind(_this);\n\n        _this.state = {};\n        return _this;\n    }\n\n    (0, _createClass3.default)(DesktopNotificationSettings, [{\n        key: 'buildMaximizedSetting',\n        value: function buildMaximizedSetting() {\n            var _this2 = this;\n\n            var inputs = [];\n            var extraInfo = null;\n\n            var activityRadio = [false, false, false];\n            if (this.props.activity === _constants.NotificationLevels.MENTION) {\n                activityRadio[1] = true;\n            } else if (this.props.activity === _constants.NotificationLevels.NONE) {\n                activityRadio[2] = true;\n            } else {\n                activityRadio[0] = true;\n            }\n\n            var soundSection = void 0;\n            var durationSection = void 0;\n            if (this.props.activity !== _constants.NotificationLevels.NONE) {\n                var soundRadio = [false, false];\n                if (this.props.sound === 'false') {\n                    soundRadio[1] = true;\n                } else {\n                    soundRadio[0] = true;\n                }\n\n                if (Utils.hasSoundOptions()) {\n                    soundSection = _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement('hr', null),\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.desktop.sound',\n                                defaultMessage: 'Notification sound'\n                            })\n                        ),\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'radio' },\n                            _react2.default.createElement(\n                                'label',\n                                null,\n                                _react2.default.createElement('input', {\n                                    id: 'soundOn',\n                                    type: 'radio',\n                                    name: 'notificationSounds',\n                                    checked: soundRadio[0],\n                                    onChange: function onChange() {\n                                        return _this2.props.setParentState('desktopSound', 'true');\n                                    }\n                                }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.notifications.on',\n                                    defaultMessage: 'On'\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'radio' },\n                            _react2.default.createElement(\n                                'label',\n                                null,\n                                _react2.default.createElement('input', {\n                                    id: 'soundOff',\n                                    type: 'radio',\n                                    name: 'notificationSounds',\n                                    checked: soundRadio[1],\n                                    onChange: function onChange() {\n                                        return _this2.props.setParentState('desktopSound', 'false');\n                                    }\n                                }),\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.notifications.off',\n                                    defaultMessage: 'Off'\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        ),\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement(\n                            'span',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.sounds_info',\n                                defaultMessage: 'Notification sounds are available on IE11, Safari, Chrome and Mattermost Desktop Apps.'\n                            })\n                        )\n                    );\n                } else {\n                    soundSection = _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement('hr', null),\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.desktop.sound',\n                                defaultMessage: 'Notification sound'\n                            })\n                        ),\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.soundConfig',\n                            defaultMessage: 'Please configure notification sounds in your browser settings'\n                        })\n                    );\n                }\n\n                var durationRadio = [false, false, false, false];\n                if (this.props.duration === '3') {\n                    durationRadio[0] = true;\n                } else if (this.props.duration === '10') {\n                    durationRadio[2] = true;\n                } else if (this.props.duration === '0') {\n                    durationRadio[3] = true;\n                } else {\n                    durationRadio[1] = true;\n                }\n\n                durationSection = _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement('hr', null),\n                    _react2.default.createElement(\n                        'label',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.duration',\n                            defaultMessage: 'Notification duration'\n                        })\n                    ),\n                    _react2.default.createElement('br', null),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'soundDuration3',\n                                type: 'radio',\n                                name: 'desktopDuration',\n                                checked: durationRadio[0],\n                                onChange: function onChange() {\n                                    return _this2.props.setParentState('desktopDuration', '3');\n                                }\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.desktop.seconds',\n                                defaultMessage: '{seconds} seconds',\n                                values: {\n                                    seconds: '3'\n                                }\n                            })\n                        ),\n                        _react2.default.createElement('br', null)\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'soundDuration5',\n                                type: 'radio',\n                                name: 'desktopDuration',\n                                checked: durationRadio[1],\n                                onChange: function onChange() {\n                                    return _this2.props.setParentState('desktopDuration', '5');\n                                }\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.desktop.seconds',\n                                defaultMessage: '{seconds} seconds',\n                                values: {\n                                    seconds: '5'\n                                }\n                            })\n                        ),\n                        _react2.default.createElement('br', null)\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'soundDuration10',\n                                type: 'radio',\n                                name: 'desktopDuration',\n                                checked: durationRadio[2],\n                                onChange: function onChange() {\n                                    return _this2.props.setParentState('desktopDuration', '10');\n                                }\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.desktop.seconds',\n                                defaultMessage: '{seconds} seconds',\n                                values: {\n                                    seconds: '10'\n                                }\n                            })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'soundDurationUnlimited',\n                                type: 'radio',\n                                name: 'desktopDuration',\n                                checked: durationRadio[3],\n                                onChange: function onChange() {\n                                    return _this2.props.setParentState('desktopDuration', '0');\n                                }\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.desktop.unlimited',\n                                defaultMessage: 'Unlimited'\n                            })\n                        )\n                    )\n                );\n\n                extraInfo = _react2.default.createElement(\n                    'span',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.desktop.durationInfo',\n                        defaultMessage: 'Sets how long desktop notifications will remain on screen when using Firefox or Chrome. Desktop notifications in Edge and Safari can only stay on screen for a maximum of 5 seconds.'\n                    })\n                );\n            }\n\n            inputs.push(_react2.default.createElement(\n                'div',\n                { key: 'userNotificationLevelOption' },\n                _react2.default.createElement(\n                    'label',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.desktop',\n                        defaultMessage: 'Send desktop notifications'\n                    })\n                ),\n                _react2.default.createElement('br', null),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'radio' },\n                    _react2.default.createElement(\n                        'label',\n                        null,\n                        _react2.default.createElement('input', {\n                            id: 'desktopNotificationAllActivity',\n                            type: 'radio',\n                            name: 'desktopNotificationLevel',\n                            checked: activityRadio[0],\n                            onChange: function onChange() {\n                                return _this2.props.setParentState('desktopActivity', _constants.NotificationLevels.ALL);\n                            }\n                        }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.allActivity',\n                            defaultMessage: 'For all activity'\n                        })\n                    ),\n                    _react2.default.createElement('br', null)\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'radio' },\n                    _react2.default.createElement(\n                        'label',\n                        null,\n                        _react2.default.createElement('input', {\n                            id: 'desktopNotificationMentions',\n                            type: 'radio',\n                            name: 'desktopNotificationLevel',\n                            checked: activityRadio[1],\n                            onChange: function onChange() {\n                                return _this2.props.setParentState('desktopActivity', _constants.NotificationLevels.MENTION);\n                            }\n                        }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.onlyMentions',\n                            defaultMessage: 'Only for mentions and direct messages'\n                        })\n                    ),\n                    _react2.default.createElement('br', null)\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'radio' },\n                    _react2.default.createElement(\n                        'label',\n                        null,\n                        _react2.default.createElement('input', {\n                            id: 'desktopNotificationNever',\n                            type: 'radio',\n                            name: 'desktopNotificationLevel',\n                            checked: activityRadio[2],\n                            onChange: function onChange() {\n                                return _this2.props.setParentState('desktopActivity', _constants.NotificationLevels.NONE);\n                            }\n                        }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.never',\n                            defaultMessage: 'Never'\n                        })\n                    )\n                ),\n                _react2.default.createElement('br', null),\n                _react2.default.createElement(\n                    'span',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.info',\n                        defaultMessage: 'Desktop notifications are available on Edge, Firefox, Safari, Chrome and Mattermost Desktop Apps.'\n                    })\n                ),\n                soundSection,\n                durationSection\n            ));\n\n            return _react2.default.createElement(_setting_item_max2.default, {\n                title: Utils.localizeMessage('user.settings.notifications.desktop.title', 'Desktop notifications'),\n                extraInfo: extraInfo,\n                inputs: inputs,\n                submit: this.props.submit,\n                saving: this.props.saving,\n                server_error: this.props.error,\n                updateSection: this.props.cancel\n            });\n        }\n    }, {\n        key: 'buildMinimizedSetting',\n        value: function buildMinimizedSetting() {\n            var describe = '';\n            if (this.props.activity === _constants.NotificationLevels.MENTION) {\n                if (Utils.hasSoundOptions() && this.props.sound !== 'false') {\n                    if (this.props.duration === '0') {\n                        //eslint-disable-line no-lonely-if\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.mentionsSoundForever',\n                            defaultMessage: 'For mentions and direct messages, with sound, shown indefinitely'\n                        });\n                    } else {\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.mentionsSoundTimed',\n                            defaultMessage: 'For mentions and direct messages, with sound, shown for {seconds} seconds',\n                            values: {\n                                seconds: this.props.duration\n                            }\n                        });\n                    }\n                } else if (Utils.hasSoundOptions() && this.props.sound === 'false') {\n                    if (this.props.duration === '0') {\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.mentionsNoSoundForever',\n                            defaultMessage: 'For mentions and direct messages, without sound, shown indefinitely'\n                        });\n                    } else {\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.mentionsNoSoundTimed',\n                            defaultMessage: 'For mentions and direct messages, without sound, shown for {seconds} seconds',\n                            values: {\n                                seconds: this.props.duration\n                            }\n                        });\n                    }\n                } else {\n                    if (this.props.duration === '0') {\n                        //eslint-disable-line no-lonely-if\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.mentionsSoundHiddenForever',\n                            defaultMessage: 'For mentions and direct messages, shown indefinitely'\n                        });\n                    } else {\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.mentionsSoundHiddenTimed',\n                            defaultMessage: 'For mentions and direct messages, shown for {seconds} seconds',\n                            values: {\n                                seconds: this.props.duration\n                            }\n                        });\n                    }\n                }\n            } else if (this.props.activity === _constants.NotificationLevels.NONE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.notifications.off',\n                    defaultMessage: 'Off'\n                });\n            } else {\n                if (Utils.hasSoundOptions() && this.props.sound !== 'false') {\n                    //eslint-disable-line no-lonely-if\n                    if (this.props.duration === '0') {\n                        //eslint-disable-line no-lonely-if\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.allSoundForever',\n                            defaultMessage: 'For all activity, with sound, shown indefinitely'\n                        });\n                    } else {\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.allSoundTimed',\n                            defaultMessage: 'For all activity, with sound, shown for {seconds} seconds',\n                            values: {\n                                seconds: this.props.duration\n                            }\n                        });\n                    }\n                } else if (Utils.hasSoundOptions() && this.props.sound === 'false') {\n                    if (this.props.duration === '0') {\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.allNoSoundForever',\n                            defaultMessage: 'For all activity, without sound, shown indefinitely'\n                        });\n                    } else {\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.allNoSoundTimed',\n                            defaultMessage: 'For all activity, without sound, shown for {seconds} seconds',\n                            values: {\n                                seconds: this.props.duration\n                            }\n                        });\n                    }\n                } else {\n                    if (this.props.duration === '0') {\n                        //eslint-disable-line no-lonely-if\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.allSoundHiddenForever',\n                            defaultMessage: 'For all activity, shown indefinitely'\n                        });\n                    } else {\n                        describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.desktop.allSoundHiddenTimed',\n                            defaultMessage: 'For all activity, shown for {seconds} seconds',\n                            values: {\n                                seconds: this.props.duration\n                            }\n                        });\n                    }\n                }\n            }\n\n            var handleUpdateDesktopSection = function updateDesktopSection() {\n                this.props.updateSection('desktop');\n            }.bind(this);\n\n            return _react2.default.createElement(_setting_item_min2.default, {\n                title: Utils.localizeMessage('user.settings.notifications.desktop.title', 'Desktop notifications'),\n                describe: describe,\n                updateSection: handleUpdateDesktopSection\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (this.props.active) {\n                return this.buildMaximizedSetting();\n            }\n\n            return this.buildMinimizedSetting();\n        }\n    }]);\n    return DesktopNotificationSettings;\n}(_react2.default.Component); // Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = DesktopNotificationSettings;\n\n\nDesktopNotificationSettings.propTypes = {\n    activity: _propTypes2.default.string.isRequired,\n    sound: _propTypes2.default.string.isRequired,\n    duration: _propTypes2.default.string.isRequired,\n    updateSection: _propTypes2.default.func,\n    setParentState: _propTypes2.default.func,\n    submit: _propTypes2.default.func,\n    cancel: _propTypes2.default.func,\n    error: _propTypes2.default.string,\n    active: _propTypes2.default.bool,\n    saving: _propTypes2.default.bool\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0Mi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvZGVza3RvcF9ub3RpZmljYXRpb25fc2V0dGluZ3MuanN4P2ZlYmIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE2LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCB7Tm90aWZpY2F0aW9uTGV2ZWxzfSBmcm9tICd1dGlscy9jb25zdGFudHMuanN4JztcbmltcG9ydCAqIGFzIFV0aWxzIGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCBTZXR0aW5nSXRlbU1heCBmcm9tICdjb21wb25lbnRzL3NldHRpbmdfaXRlbV9tYXguanN4JztcbmltcG9ydCBTZXR0aW5nSXRlbU1pbiBmcm9tICdjb21wb25lbnRzL3NldHRpbmdfaXRlbV9taW4uanN4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVza3RvcE5vdGlmaWNhdGlvblNldHRpbmdzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5idWlsZE1heGltaXplZFNldHRpbmcgPSB0aGlzLmJ1aWxkTWF4aW1pemVkU2V0dGluZy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJ1aWxkTWluaW1pemVkU2V0dGluZyA9IHRoaXMuYnVpbGRNaW5pbWl6ZWRTZXR0aW5nLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHt9O1xuICAgIH1cblxuICAgIGJ1aWxkTWF4aW1pemVkU2V0dGluZygpIHtcbiAgICAgICAgY29uc3QgaW5wdXRzID0gW107XG4gICAgICAgIGxldCBleHRyYUluZm8gPSBudWxsO1xuXG4gICAgICAgIGNvbnN0IGFjdGl2aXR5UmFkaW8gPSBbZmFsc2UsIGZhbHNlLCBmYWxzZV07XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2aXR5ID09PSBOb3RpZmljYXRpb25MZXZlbHMuTUVOVElPTikge1xuICAgICAgICAgICAgYWN0aXZpdHlSYWRpb1sxXSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5hY3Rpdml0eSA9PT0gTm90aWZpY2F0aW9uTGV2ZWxzLk5PTkUpIHtcbiAgICAgICAgICAgIGFjdGl2aXR5UmFkaW9bMl0gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWN0aXZpdHlSYWRpb1swXSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc291bmRTZWN0aW9uO1xuICAgICAgICBsZXQgZHVyYXRpb25TZWN0aW9uO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3Rpdml0eSAhPT0gTm90aWZpY2F0aW9uTGV2ZWxzLk5PTkUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvdW5kUmFkaW8gPSBbZmFsc2UsIGZhbHNlXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnNvdW5kID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgICAgc291bmRSYWRpb1sxXSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdW5kUmFkaW9bMF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoVXRpbHMuaGFzU291bmRPcHRpb25zKCkpIHtcbiAgICAgICAgICAgICAgICBzb3VuZFNlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aHIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZGVza3RvcC5zb3VuZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05vdGlmaWNhdGlvbiBzb3VuZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmFkaW8nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nc291bmRPbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0nbm90aWZpY2F0aW9uU291bmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17c291bmRSYWRpb1swXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB0aGlzLnByb3BzLnNldFBhcmVudFN0YXRlKCdkZXNrdG9wU291bmQnLCAndHJ1ZScpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5vbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdPbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzb3VuZE9mZidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0nbm90aWZpY2F0aW9uU291bmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17c291bmRSYWRpb1sxXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB0aGlzLnByb3BzLnNldFBhcmVudFN0YXRlKCdkZXNrdG9wU291bmQnLCAnZmFsc2UnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMub2ZmJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J09mZidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLnNvdW5kc19pbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nTm90aWZpY2F0aW9uIHNvdW5kcyBhcmUgYXZhaWxhYmxlIG9uIElFMTEsIFNhZmFyaSwgQ2hyb21lIGFuZCBNYXR0ZXJtb3N0IERlc2t0b3AgQXBwcy4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc291bmRTZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGhyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmRlc2t0b3Auc291bmQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdOb3RpZmljYXRpb24gc291bmQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLnNvdW5kQ29uZmlnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdQbGVhc2UgY29uZmlndXJlIG5vdGlmaWNhdGlvbiBzb3VuZHMgaW4geW91ciBicm93c2VyIHNldHRpbmdzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZHVyYXRpb25SYWRpbyA9IFtmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZV07XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5kdXJhdGlvbiA9PT0gJzMnKSB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb25SYWRpb1swXSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuZHVyYXRpb24gPT09ICcxMCcpIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvblJhZGlvWzJdID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5kdXJhdGlvbiA9PT0gJzAnKSB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb25SYWRpb1szXSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uUmFkaW9bMV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkdXJhdGlvblNlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGhyLz5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmRlc2t0b3AuZHVyYXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05vdGlmaWNhdGlvbiBkdXJhdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzb3VuZER1cmF0aW9uMydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J2Rlc2t0b3BEdXJhdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17ZHVyYXRpb25SYWRpb1swXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHRoaXMucHJvcHMuc2V0UGFyZW50U3RhdGUoJ2Rlc2t0b3BEdXJhdGlvbicsICczJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmRlc2t0b3Auc2Vjb25kcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J3tzZWNvbmRzfSBzZWNvbmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6ICczJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzb3VuZER1cmF0aW9uNSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J2Rlc2t0b3BEdXJhdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17ZHVyYXRpb25SYWRpb1sxXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHRoaXMucHJvcHMuc2V0UGFyZW50U3RhdGUoJ2Rlc2t0b3BEdXJhdGlvbicsICc1Jyl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmRlc2t0b3Auc2Vjb25kcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J3tzZWNvbmRzfSBzZWNvbmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6ICc1J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdzb3VuZER1cmF0aW9uMTAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdkZXNrdG9wRHVyYXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2R1cmF0aW9uUmFkaW9bMl19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB0aGlzLnByb3BzLnNldFBhcmVudFN0YXRlKCdkZXNrdG9wRHVyYXRpb24nLCAnMTAnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZGVza3RvcC5zZWNvbmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0ne3NlY29uZHN9IHNlY29uZHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogJzEwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JhZGlvJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3NvdW5kRHVyYXRpb25VbmxpbWl0ZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdkZXNrdG9wRHVyYXRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2R1cmF0aW9uUmFkaW9bM119XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB0aGlzLnByb3BzLnNldFBhcmVudFN0YXRlKCdkZXNrdG9wRHVyYXRpb24nLCAnMCcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5kZXNrdG9wLnVubGltaXRlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1VubGltaXRlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBleHRyYUluZm8gPSAoXG4gICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmRlc2t0b3AuZHVyYXRpb25JbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1NldHMgaG93IGxvbmcgZGVza3RvcCBub3RpZmljYXRpb25zIHdpbGwgcmVtYWluIG9uIHNjcmVlbiB3aGVuIHVzaW5nIEZpcmVmb3ggb3IgQ2hyb21lLiBEZXNrdG9wIG5vdGlmaWNhdGlvbnMgaW4gRWRnZSBhbmQgU2FmYXJpIGNhbiBvbmx5IHN0YXkgb24gc2NyZWVuIGZvciBhIG1heGltdW0gb2YgNSBzZWNvbmRzLidcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICA8ZGl2IGtleT0ndXNlck5vdGlmaWNhdGlvbkxldmVsT3B0aW9uJz5cbiAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmRlc2t0b3AnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU2VuZCBkZXNrdG9wIG5vdGlmaWNhdGlvbnMnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdkZXNrdG9wTm90aWZpY2F0aW9uQWxsQWN0aXZpdHknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0nZGVza3RvcE5vdGlmaWNhdGlvbkxldmVsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2FjdGl2aXR5UmFkaW9bMF19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHRoaXMucHJvcHMuc2V0UGFyZW50U3RhdGUoJ2Rlc2t0b3BBY3Rpdml0eScsIE5vdGlmaWNhdGlvbkxldmVscy5BTEwpfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5hbGxBY3Rpdml0eSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRm9yIGFsbCBhY3Rpdml0eSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JhZGlvJz5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2Rlc2t0b3BOb3RpZmljYXRpb25NZW50aW9ucydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdyYWRpbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdkZXNrdG9wTm90aWZpY2F0aW9uTGV2ZWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17YWN0aXZpdHlSYWRpb1sxXX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gdGhpcy5wcm9wcy5zZXRQYXJlbnRTdGF0ZSgnZGVza3RvcEFjdGl2aXR5JywgTm90aWZpY2F0aW9uTGV2ZWxzLk1FTlRJT04pfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5vbmx5TWVudGlvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J09ubHkgZm9yIG1lbnRpb25zIGFuZCBkaXJlY3QgbWVzc2FnZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdkZXNrdG9wTm90aWZpY2F0aW9uTmV2ZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0nZGVza3RvcE5vdGlmaWNhdGlvbkxldmVsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2FjdGl2aXR5UmFkaW9bMl19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHRoaXMucHJvcHMuc2V0UGFyZW50U3RhdGUoJ2Rlc2t0b3BBY3Rpdml0eScsIE5vdGlmaWNhdGlvbkxldmVscy5OT05FKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMubmV2ZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05ldmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5pbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0Rlc2t0b3Agbm90aWZpY2F0aW9ucyBhcmUgYXZhaWxhYmxlIG9uIEVkZ2UsIEZpcmVmb3gsIFNhZmFyaSwgQ2hyb21lIGFuZCBNYXR0ZXJtb3N0IERlc2t0b3AgQXBwcy4nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIHtzb3VuZFNlY3Rpb259XG4gICAgICAgICAgICAgICAge2R1cmF0aW9uU2VjdGlvbn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2V0dGluZ0l0ZW1NYXhcbiAgICAgICAgICAgICAgICB0aXRsZT17VXRpbHMubG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZGVza3RvcC50aXRsZScsICdEZXNrdG9wIG5vdGlmaWNhdGlvbnMnKX1cbiAgICAgICAgICAgICAgICBleHRyYUluZm89e2V4dHJhSW5mb31cbiAgICAgICAgICAgICAgICBpbnB1dHM9e2lucHV0c31cbiAgICAgICAgICAgICAgICBzdWJtaXQ9e3RoaXMucHJvcHMuc3VibWl0fVxuICAgICAgICAgICAgICAgIHNhdmluZz17dGhpcy5wcm9wcy5zYXZpbmd9XG4gICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXt0aGlzLnByb3BzLmVycm9yfVxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3RoaXMucHJvcHMuY2FuY2VsfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBidWlsZE1pbmltaXplZFNldHRpbmcoKSB7XG4gICAgICAgIGxldCBkZXNjcmliZSA9ICcnO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3Rpdml0eSA9PT0gTm90aWZpY2F0aW9uTGV2ZWxzLk1FTlRJT04pIHtcbiAgICAgICAgICAgIGlmIChVdGlscy5oYXNTb3VuZE9wdGlvbnMoKSAmJiB0aGlzLnByb3BzLnNvdW5kICE9PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuZHVyYXRpb24gPT09ICcwJykgeyAvL2VzbGludC1kaXNhYmxlLWxpbmUgbm8tbG9uZWx5LWlmXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmRlc2t0b3AubWVudGlvbnNTb3VuZEZvcmV2ZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZvciBtZW50aW9ucyBhbmQgZGlyZWN0IG1lc3NhZ2VzLCB3aXRoIHNvdW5kLCBzaG93biBpbmRlZmluaXRlbHknXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmRlc2t0b3AubWVudGlvbnNTb3VuZFRpbWVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdGb3IgbWVudGlvbnMgYW5kIGRpcmVjdCBtZXNzYWdlcywgd2l0aCBzb3VuZCwgc2hvd24gZm9yIHtzZWNvbmRzfSBzZWNvbmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiB0aGlzLnByb3BzLmR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChVdGlscy5oYXNTb3VuZE9wdGlvbnMoKSAmJiB0aGlzLnByb3BzLnNvdW5kID09PSAnZmFsc2UnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuZHVyYXRpb24gPT09ICcwJykge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5kZXNrdG9wLm1lbnRpb25zTm9Tb3VuZEZvcmV2ZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZvciBtZW50aW9ucyBhbmQgZGlyZWN0IG1lc3NhZ2VzLCB3aXRob3V0IHNvdW5kLCBzaG93biBpbmRlZmluaXRlbHknXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmRlc2t0b3AubWVudGlvbnNOb1NvdW5kVGltZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZvciBtZW50aW9ucyBhbmQgZGlyZWN0IG1lc3NhZ2VzLCB3aXRob3V0IHNvdW5kLCBzaG93biBmb3Ige3NlY29uZHN9IHNlY29uZHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IHRoaXMucHJvcHMuZHVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmR1cmF0aW9uID09PSAnMCcpIHsgLy9lc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvbmVseS1pZlxuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5kZXNrdG9wLm1lbnRpb25zU291bmRIaWRkZW5Gb3JldmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdGb3IgbWVudGlvbnMgYW5kIGRpcmVjdCBtZXNzYWdlcywgc2hvd24gaW5kZWZpbml0ZWx5J1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5kZXNrdG9wLm1lbnRpb25zU291bmRIaWRkZW5UaW1lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRm9yIG1lbnRpb25zIGFuZCBkaXJlY3QgbWVzc2FnZXMsIHNob3duIGZvciB7c2Vjb25kc30gc2Vjb25kcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogdGhpcy5wcm9wcy5kdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLmFjdGl2aXR5ID09PSBOb3RpZmljYXRpb25MZXZlbHMuTk9ORSkge1xuICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5vZmYnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdPZmYnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoVXRpbHMuaGFzU291bmRPcHRpb25zKCkgJiYgdGhpcy5wcm9wcy5zb3VuZCAhPT0gJ2ZhbHNlJykgeyAgLy9lc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvbmVseS1pZlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmR1cmF0aW9uID09PSAnMCcpIHsgLy9lc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvbmVseS1pZlxuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5kZXNrdG9wLmFsbFNvdW5kRm9yZXZlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRm9yIGFsbCBhY3Rpdml0eSwgd2l0aCBzb3VuZCwgc2hvd24gaW5kZWZpbml0ZWx5J1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5kZXNrdG9wLmFsbFNvdW5kVGltZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZvciBhbGwgYWN0aXZpdHksIHdpdGggc291bmQsIHNob3duIGZvciB7c2Vjb25kc30gc2Vjb25kcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogdGhpcy5wcm9wcy5kdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoVXRpbHMuaGFzU291bmRPcHRpb25zKCkgJiYgdGhpcy5wcm9wcy5zb3VuZCA9PT0gJ2ZhbHNlJykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmR1cmF0aW9uID09PSAnMCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZGVza3RvcC5hbGxOb1NvdW5kRm9yZXZlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRm9yIGFsbCBhY3Rpdml0eSwgd2l0aG91dCBzb3VuZCwgc2hvd24gaW5kZWZpbml0ZWx5J1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5kZXNrdG9wLmFsbE5vU291bmRUaW1lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRm9yIGFsbCBhY3Rpdml0eSwgd2l0aG91dCBzb3VuZCwgc2hvd24gZm9yIHtzZWNvbmRzfSBzZWNvbmRzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiB0aGlzLnByb3BzLmR1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5kdXJhdGlvbiA9PT0gJzAnKSB7IC8vZXNsaW50LWRpc2FibGUtbGluZSBuby1sb25lbHktaWZcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZGVza3RvcC5hbGxTb3VuZEhpZGRlbkZvcmV2ZXInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZvciBhbGwgYWN0aXZpdHksIHNob3duIGluZGVmaW5pdGVseSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZGVza3RvcC5hbGxTb3VuZEhpZGRlblRpbWVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdGb3IgYWxsIGFjdGl2aXR5LCBzaG93biBmb3Ige3NlY29uZHN9IHNlY29uZHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IHRoaXMucHJvcHMuZHVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBoYW5kbGVVcGRhdGVEZXNrdG9wU2VjdGlvbiA9IGZ1bmN0aW9uIHVwZGF0ZURlc2t0b3BTZWN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVTZWN0aW9uKCdkZXNrdG9wJyk7XG4gICAgICAgIH0uYmluZCh0aGlzKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFNldHRpbmdJdGVtTWluXG4gICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmRlc2t0b3AudGl0bGUnLCAnRGVza3RvcCBub3RpZmljYXRpb25zJyl9XG4gICAgICAgICAgICAgICAgZGVzY3JpYmU9e2Rlc2NyaWJlfVxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e2hhbmRsZVVwZGF0ZURlc2t0b3BTZWN0aW9ufVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRNYXhpbWl6ZWRTZXR0aW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5idWlsZE1pbmltaXplZFNldHRpbmcoKTtcbiAgICB9XG59XG5cbkRlc2t0b3BOb3RpZmljYXRpb25TZXR0aW5ncy5wcm9wVHlwZXMgPSB7XG4gICAgYWN0aXZpdHk6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBzb3VuZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICAgIGR1cmF0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgdXBkYXRlU2VjdGlvbjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgc2V0UGFyZW50U3RhdGU6IFByb3BUeXBlcy5mdW5jLFxuICAgIHN1Ym1pdDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgY2FuY2VsOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBlcnJvcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBhY3RpdmU6IFByb3BUeXBlcy5ib29sLFxuICAgIHNhdmluZzogUHJvcFR5cGVzLmJvb2xcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy91c2VyX3NldHRpbmdzL2Rlc2t0b3Bfbm90aWZpY2F0aW9uX3NldHRpbmdzLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQU9BO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFhQTtBQWRBO0FBZ0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFhQTtBQWRBO0FBZ0JBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQTFDQTtBQWtEQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFUQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQVJBO0FBZ0JBO0FBakJBO0FBbUJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBUkE7QUFnQkE7QUFqQkE7QUFtQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFSQTtBQURBO0FBa0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFEQTtBQWpFQTtBQUNBO0FBa0ZBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQWFBO0FBZEE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQWFBO0FBZEE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQURBO0FBZUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQS9EQTtBQUNBO0FBa0VBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQVVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFRQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQXRiQTtBQVpBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUF1YkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2542\n");

/***/ }),

/***/ 2543:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _user_actions = __webpack_require__(71);\n\nvar _constants = __webpack_require__(10);\n\nvar _utils = __webpack_require__(17);\n\nvar _setting_item_max = __webpack_require__(770);\n\nvar _setting_item_max2 = _interopRequireDefault(_setting_item_max);\n\nvar _setting_item_min = __webpack_require__(771);\n\nvar _setting_item_min2 = _interopRequireDefault(_setting_item_min);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar EmailNotificationSetting = function (_React$Component) {\n    (0, _inherits3.default)(EmailNotificationSetting, _React$Component);\n\n    function EmailNotificationSetting(props) {\n        (0, _classCallCheck3.default)(this, EmailNotificationSetting);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (EmailNotificationSetting.__proto__ || (0, _getPrototypeOf2.default)(EmailNotificationSetting)).call(this, props));\n\n        _this.handleChange = function (enableEmail, emailInterval) {\n            _this.setState({\n                enableEmail: enableEmail,\n                emailInterval: emailInterval\n            });\n        };\n\n        _this.handleSubmit = function () {\n            var _this$state = _this.state,\n                enableEmail = _this$state.enableEmail,\n                emailInterval = _this$state.emailInterval;\n\n            if (_this.props.enableEmail !== enableEmail || _this.props.emailInterval !== emailInterval) {\n                // until the rest of the notification settings are moved to preferences, we have to do this separately\n                (0, _user_actions.savePreference)(_constants.Preferences.CATEGORY_NOTIFICATIONS, _constants.Preferences.EMAIL_INTERVAL, emailInterval.toString());\n\n                _this.props.onSubmit({ enableEmail: enableEmail });\n            } else {\n                _this.props.updateSection('');\n            }\n        };\n\n        _this.handleExpand = function () {\n            _this.props.updateSection('email');\n        };\n\n        _this.handleCancel = function (e) {\n            _this.setState({\n                enableEmail: _this.props.enableEmail,\n                emailInterval: _this.props.emailInterval\n            });\n            _this.props.onCancel(e);\n        };\n\n        _this.state = {\n            enableEmail: props.enableEmail,\n            emailInterval: props.emailInterval\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(EmailNotificationSetting, [{\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.enableEmail !== this.props.enableEmail || nextProps.emailInterval !== this.props.emailInterval) {\n                this.setState({\n                    enableEmail: nextProps.enableEmail,\n                    emailInterval: nextProps.emailInterval\n                });\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            if (global.window.mm_config.SendEmailNotifications !== 'true' && this.props.activeSection === 'email') {\n                var inputs = [];\n\n                inputs.push(_react2.default.createElement(\n                    'div',\n                    {\n                        key: 'oauthEmailInfo',\n                        className: 'padding-top'\n                    },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.email.disabled_long',\n                        defaultMessage: 'Email notifications have been disabled by your System Administrator.'\n                    })\n                ));\n\n                return _react2.default.createElement(_setting_item_max2.default, {\n                    title: (0, _utils.localizeMessage)('user.settings.notifications.emailNotifications', 'Email notifications'),\n                    inputs: inputs,\n                    server_error: this.state.serverError,\n                    updateSection: this.handleCancel\n                });\n            }\n\n            if (this.props.activeSection !== 'email') {\n                var description = void 0;\n\n                if (global.window.mm_config.SendEmailNotifications !== 'true') {\n                    description = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.email.disabled',\n                        defaultMessage: 'Disabled by System Administrator'\n                    });\n                } else if (this.props.enableEmail) {\n                    switch (this.state.emailInterval) {\n                        case _constants.Preferences.INTERVAL_IMMEDIATE:\n                            description = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.email.immediately',\n                                defaultMessage: 'Immediately'\n                            });\n                            break;\n                        case _constants.Preferences.INTERVAL_HOUR:\n                            description = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.email.everyHour',\n                                defaultMessage: 'Every hour'\n                            });\n                            break;\n                        default:\n                            description = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.email.everyXMinutes',\n                                defaultMessage: 'Every {count, plural, one {minute} other {{count, number} minutes}}',\n                                values: { count: this.state.emailInterval / 60 }\n                            });\n                    }\n                } else {\n                    description = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.notifications.email.never',\n                        defaultMessage: 'Never'\n                    });\n                }\n\n                return _react2.default.createElement(_setting_item_min2.default, {\n                    title: (0, _utils.localizeMessage)('user.settings.notifications.emailNotifications', 'Email notifications'),\n                    describe: description,\n                    updateSection: this.handleExpand\n                });\n            }\n\n            var batchingOptions = null;\n            var batchingInfo = null;\n            if (global.window.mm_config.EnableEmailBatching === 'true') {\n                batchingOptions = _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'emailNotificationMinutes',\n                                type: 'radio',\n                                name: 'emailNotifications',\n                                checked: this.state.emailInterval === _constants.Preferences.INTERVAL_FIFTEEN_MINUTES,\n                                onChange: function onChange() {\n                                    return _this2.handleChange('true', _constants.Preferences.INTERVAL_FIFTEEN_MINUTES);\n                                }\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.email.everyXMinutes',\n                                defaultMessage: 'Every {count} minutes',\n                                values: { count: _constants.Preferences.INTERVAL_FIFTEEN_MINUTES / 60 }\n                            })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'emailNotificationHour',\n                                type: 'radio',\n                                name: 'emailNotifications',\n                                checked: this.state.emailInterval === _constants.Preferences.INTERVAL_HOUR,\n                                onChange: function onChange() {\n                                    return _this2.handleChange('true', _constants.Preferences.INTERVAL_HOUR);\n                                }\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.email.everyHour',\n                                defaultMessage: 'Every hour'\n                            })\n                        )\n                    )\n                );\n\n                batchingInfo = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.notifications.emailBatchingInfo',\n                    defaultMessage: 'Notifications received over the time period selected are combined and sent in a single email.'\n                });\n            }\n\n            return _react2.default.createElement(_setting_item_max2.default, {\n                title: (0, _utils.localizeMessage)('user.settings.notifications.emailNotifications', 'Email notifications'),\n                inputs: [_react2.default.createElement(\n                    'div',\n                    { key: 'userNotificationEmailOptions' },\n                    _react2.default.createElement(\n                        'label',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.email.send',\n                            defaultMessage: 'Send email notifications'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'emailNotificationImmediately',\n                                type: 'radio',\n                                name: 'emailNotifications',\n                                checked: this.state.emailInterval === _constants.Preferences.INTERVAL_IMMEDIATE,\n                                onChange: function onChange() {\n                                    return _this2.handleChange('true', _constants.Preferences.INTERVAL_IMMEDIATE);\n                                }\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.email.immediately',\n                                defaultMessage: 'Immediately'\n                            })\n                        )\n                    ),\n                    batchingOptions,\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'radio' },\n                        _react2.default.createElement(\n                            'label',\n                            null,\n                            _react2.default.createElement('input', {\n                                id: 'emailNotificationNever',\n                                type: 'radio',\n                                name: 'emailNotifications',\n                                checked: this.state.emailInterval === _constants.Preferences.INTERVAL_NEVER,\n                                onChange: function onChange() {\n                                    return _this2.handleChange('false', _constants.Preferences.INTERVAL_NEVER);\n                                }\n                            }),\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.notifications.email.never',\n                                defaultMessage: 'Never'\n                            })\n                        )\n                    ),\n                    _react2.default.createElement('br', null),\n                    _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.notifications.emailInfo',\n                            defaultMessage: 'Email notifications are sent for mentions and direct messages when you are offline or away from {siteName} for more than 5 minutes.',\n                            values: {\n                                siteName: global.window.mm_config.SiteName\n                            }\n                        }),\n                        ' ',\n                        batchingInfo\n                    )\n                )],\n                submit: this.handleSubmit,\n                saving: this.props.saving,\n                server_error: this.props.serverError,\n                updateSection: this.handleCancel\n            });\n        }\n    }]);\n    return EmailNotificationSetting;\n}(_react2.default.Component);\n\nEmailNotificationSetting.propTypes = {\n    activeSection: _propTypes2.default.string.isRequired,\n    updateSection: _propTypes2.default.func.isRequired,\n    enableEmail: _propTypes2.default.bool.isRequired,\n    emailInterval: _propTypes2.default.number.isRequired,\n    onSubmit: _propTypes2.default.func.isRequired,\n    onCancel: _propTypes2.default.func.isRequired,\n    serverError: _propTypes2.default.string,\n    saving: _propTypes2.default.bool\n};\nexports.default = EmailNotificationSetting;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0My5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvZW1haWxfbm90aWZpY2F0aW9uX3NldHRpbmcuanN4PzMwMGEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE2LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmltcG9ydCB7c2F2ZVByZWZlcmVuY2V9IGZyb20gJ2FjdGlvbnMvdXNlcl9hY3Rpb25zLmpzeCc7XG5cbmltcG9ydCB7UHJlZmVyZW5jZXN9IGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuaW1wb3J0IHtsb2NhbGl6ZU1lc3NhZ2V9IGZyb20gJ3V0aWxzL3V0aWxzLmpzeCc7XG5cbmltcG9ydCBTZXR0aW5nSXRlbU1heCBmcm9tICdjb21wb25lbnRzL3NldHRpbmdfaXRlbV9tYXguanN4JztcbmltcG9ydCBTZXR0aW5nSXRlbU1pbiBmcm9tICdjb21wb25lbnRzL3NldHRpbmdfaXRlbV9taW4uanN4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW1haWxOb3RpZmljYXRpb25TZXR0aW5nIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICBhY3RpdmVTZWN0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgICAgIHVwZGF0ZVNlY3Rpb246IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgICAgIGVuYWJsZUVtYWlsOiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgICAgICBlbWFpbEludGVydmFsOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgICAgIG9uU3VibWl0OiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgICBvbkNhbmNlbDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgICAgc2VydmVyRXJyb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgIHNhdmluZzogUHJvcFR5cGVzLmJvb2xcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBlbmFibGVFbWFpbDogcHJvcHMuZW5hYmxlRW1haWwsXG4gICAgICAgICAgICBlbWFpbEludGVydmFsOiBwcm9wcy5lbWFpbEludGVydmFsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAgICAgaWYgKG5leHRQcm9wcy5lbmFibGVFbWFpbCAhPT0gdGhpcy5wcm9wcy5lbmFibGVFbWFpbCB8fCBuZXh0UHJvcHMuZW1haWxJbnRlcnZhbCAhPT0gdGhpcy5wcm9wcy5lbWFpbEludGVydmFsKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBlbmFibGVFbWFpbDogbmV4dFByb3BzLmVuYWJsZUVtYWlsLFxuICAgICAgICAgICAgICAgIGVtYWlsSW50ZXJ2YWw6IG5leHRQcm9wcy5lbWFpbEludGVydmFsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZSA9IChlbmFibGVFbWFpbCwgZW1haWxJbnRlcnZhbCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGVuYWJsZUVtYWlsLFxuICAgICAgICAgICAgZW1haWxJbnRlcnZhbFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVTdWJtaXQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHtlbmFibGVFbWFpbCwgZW1haWxJbnRlcnZhbH0gPSB0aGlzLnN0YXRlO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5lbmFibGVFbWFpbCAhPT0gZW5hYmxlRW1haWwgfHwgdGhpcy5wcm9wcy5lbWFpbEludGVydmFsICE9PSBlbWFpbEludGVydmFsKSB7XG4gICAgICAgICAgICAvLyB1bnRpbCB0aGUgcmVzdCBvZiB0aGUgbm90aWZpY2F0aW9uIHNldHRpbmdzIGFyZSBtb3ZlZCB0byBwcmVmZXJlbmNlcywgd2UgaGF2ZSB0byBkbyB0aGlzIHNlcGFyYXRlbHlcbiAgICAgICAgICAgIHNhdmVQcmVmZXJlbmNlKFByZWZlcmVuY2VzLkNBVEVHT1JZX05PVElGSUNBVElPTlMsIFByZWZlcmVuY2VzLkVNQUlMX0lOVEVSVkFMLCBlbWFpbEludGVydmFsLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uU3VibWl0KHtlbmFibGVFbWFpbH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVTZWN0aW9uKCcnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUV4cGFuZCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVTZWN0aW9uKCdlbWFpbCcpO1xuICAgIH1cblxuICAgIGhhbmRsZUNhbmNlbCA9IChlKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZW5hYmxlRW1haWw6IHRoaXMucHJvcHMuZW5hYmxlRW1haWwsXG4gICAgICAgICAgICBlbWFpbEludGVydmFsOiB0aGlzLnByb3BzLmVtYWlsSW50ZXJ2YWxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJvcHMub25DYW5jZWwoZSk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAoZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuU2VuZEVtYWlsTm90aWZpY2F0aW9ucyAhPT0gJ3RydWUnICYmIHRoaXMucHJvcHMuYWN0aXZlU2VjdGlvbiA9PT0gJ2VtYWlsJykge1xuICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gW107XG5cbiAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PSdvYXV0aEVtYWlsSW5mbydcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwYWRkaW5nLXRvcCdcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmVtYWlsLmRpc2FibGVkX2xvbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRW1haWwgbm90aWZpY2F0aW9ucyBoYXZlIGJlZW4gZGlzYWJsZWQgYnkgeW91ciBTeXN0ZW0gQWRtaW5pc3RyYXRvci4nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1heFxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17bG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZW1haWxOb3RpZmljYXRpb25zJywgJ0VtYWlsIG5vdGlmaWNhdGlvbnMnKX1cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzPXtpbnB1dHN9XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9lcnJvcj17dGhpcy5zdGF0ZS5zZXJ2ZXJFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dGhpcy5oYW5kbGVDYW5jZWx9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uICE9PSAnZW1haWwnKSB7XG4gICAgICAgICAgICBsZXQgZGVzY3JpcHRpb247XG5cbiAgICAgICAgICAgIGlmIChnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5TZW5kRW1haWxOb3RpZmljYXRpb25zICE9PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZW1haWwuZGlzYWJsZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRGlzYWJsZWQgYnkgU3lzdGVtIEFkbWluaXN0cmF0b3InXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5lbmFibGVFbWFpbCkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZS5lbWFpbEludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBQcmVmZXJlbmNlcy5JTlRFUlZBTF9JTU1FRElBVEU6XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmVtYWlsLmltbWVkaWF0ZWx5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdJbW1lZGlhdGVseSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgUHJlZmVyZW5jZXMuSU5URVJWQUxfSE9VUjpcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZW1haWwuZXZlcnlIb3VyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdFdmVyeSBob3VyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZW1haWwuZXZlcnlYTWludXRlcydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRXZlcnkge2NvdW50LCBwbHVyYWwsIG9uZSB7bWludXRlfSBvdGhlciB7e2NvdW50LCBudW1iZXJ9IG1pbnV0ZXN9fSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tjb3VudDogdGhpcy5zdGF0ZS5lbWFpbEludGVydmFsIC8gNjB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5lbWFpbC5uZXZlcidcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdOZXZlcidcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1pblxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17bG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZW1haWxOb3RpZmljYXRpb25zJywgJ0VtYWlsIG5vdGlmaWNhdGlvbnMnKX1cbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpYmU9e2Rlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt0aGlzLmhhbmRsZUV4cGFuZH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBiYXRjaGluZ09wdGlvbnMgPSBudWxsO1xuICAgICAgICBsZXQgYmF0Y2hpbmdJbmZvID0gbnVsbDtcbiAgICAgICAgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkVuYWJsZUVtYWlsQmF0Y2hpbmcgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgYmF0Y2hpbmdPcHRpb25zID0gKFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdlbWFpbE5vdGlmaWNhdGlvbk1pbnV0ZXMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdlbWFpbE5vdGlmaWNhdGlvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUuZW1haWxJbnRlcnZhbCA9PT0gUHJlZmVyZW5jZXMuSU5URVJWQUxfRklGVEVFTl9NSU5VVEVTfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gdGhpcy5oYW5kbGVDaGFuZ2UoJ3RydWUnLCBQcmVmZXJlbmNlcy5JTlRFUlZBTF9GSUZURUVOX01JTlVURVMpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5lbWFpbC5ldmVyeVhNaW51dGVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRXZlcnkge2NvdW50fSBtaW51dGVzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tjb3VudDogUHJlZmVyZW5jZXMuSU5URVJWQUxfRklGVEVFTl9NSU5VVEVTIC8gNjB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JhZGlvJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2VtYWlsTm90aWZpY2F0aW9uSG91cidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9J2VtYWlsTm90aWZpY2F0aW9ucydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5lbWFpbEludGVydmFsID09PSBQcmVmZXJlbmNlcy5JTlRFUlZBTF9IT1VSfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gdGhpcy5oYW5kbGVDaGFuZ2UoJ3RydWUnLCBQcmVmZXJlbmNlcy5JTlRFUlZBTF9IT1VSKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZW1haWwuZXZlcnlIb3VyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRXZlcnkgaG91cidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBiYXRjaGluZ0luZm8gPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Mubm90aWZpY2F0aW9ucy5lbWFpbEJhdGNoaW5nSW5mbydcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05vdGlmaWNhdGlvbnMgcmVjZWl2ZWQgb3ZlciB0aGUgdGltZSBwZXJpb2Qgc2VsZWN0ZWQgYXJlIGNvbWJpbmVkIGFuZCBzZW50IGluIGEgc2luZ2xlIGVtYWlsLidcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2V0dGluZ0l0ZW1NYXhcbiAgICAgICAgICAgICAgICB0aXRsZT17bG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZW1haWxOb3RpZmljYXRpb25zJywgJ0VtYWlsIG5vdGlmaWNhdGlvbnMnKX1cbiAgICAgICAgICAgICAgICBpbnB1dHM9e1tcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9J3VzZXJOb3RpZmljYXRpb25FbWFpbE9wdGlvbnMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZW1haWwuc2VuZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1NlbmQgZW1haWwgbm90aWZpY2F0aW9ucydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyYWRpbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdlbWFpbE5vdGlmaWNhdGlvbkltbWVkaWF0ZWx5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ncmFkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdlbWFpbE5vdGlmaWNhdGlvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmVtYWlsSW50ZXJ2YWwgPT09IFByZWZlcmVuY2VzLklOVEVSVkFMX0lNTUVESUFURX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB0aGlzLmhhbmRsZUNoYW5nZSgndHJ1ZScsIFByZWZlcmVuY2VzLklOVEVSVkFMX0lNTUVESUFURSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmVtYWlsLmltbWVkaWF0ZWx5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ltbWVkaWF0ZWx5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtiYXRjaGluZ09wdGlvbnN9XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmFkaW8nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nZW1haWxOb3RpZmljYXRpb25OZXZlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3JhZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0nZW1haWxOb3RpZmljYXRpb25zJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5zdGF0ZS5lbWFpbEludGVydmFsID09PSBQcmVmZXJlbmNlcy5JTlRFUlZBTF9ORVZFUn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB0aGlzLmhhbmRsZUNoYW5nZSgnZmFsc2UnLCBQcmVmZXJlbmNlcy5JTlRFUlZBTF9ORVZFUil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5ub3RpZmljYXRpb25zLmVtYWlsLm5ldmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05ldmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm5vdGlmaWNhdGlvbnMuZW1haWxJbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRW1haWwgbm90aWZpY2F0aW9ucyBhcmUgc2VudCBmb3IgbWVudGlvbnMgYW5kIGRpcmVjdCBtZXNzYWdlcyB3aGVuIHlvdSBhcmUgb2ZmbGluZSBvciBhd2F5IGZyb20ge3NpdGVOYW1lfSBmb3IgbW9yZSB0aGFuIDUgbWludXRlcy4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l0ZU5hbWU6IGdsb2JhbC53aW5kb3cubW1fY29uZmlnLlNpdGVOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7JyAnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtiYXRjaGluZ0luZm99XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgXX1cbiAgICAgICAgICAgICAgICBzdWJtaXQ9e3RoaXMuaGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgICAgIHNhdmluZz17dGhpcy5wcm9wcy5zYXZpbmd9XG4gICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXt0aGlzLnByb3BzLnNlcnZlckVycm9yfVxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3RoaXMuaGFuZGxlQ2FuY2VsfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY29tcG9uZW50cy91c2VyX3NldHRpbmdzL2VtYWlsX25vdGlmaWNhdGlvbl9zZXR0aW5nLmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFkQTtBQUNBO0FBQ0E7QUFhQTs7O0FBWUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBbUJBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQXhCQTtBQXlCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcENBO0FBc0NBO0FBQ0E7QUFDQTtBQXhDQTtBQTBDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQTdDQTtBQUNBO0FBQ0E7QUFGQTtBQUhBO0FBT0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7O0FBaUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUFDQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQW5CQTtBQTBCQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQVJBO0FBREE7QUFnQkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFSQTtBQURBO0FBakJBO0FBQ0E7QUFrQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQVJBO0FBREE7QUFlQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFEQTtBQWVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFPQTtBQUNBO0FBVEE7QUF2Q0E7QUFvREE7QUFDQTtBQUNBO0FBQ0E7QUExREE7QUE2REE7OztBQTNQQTtBQUNBO0FBREE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFEQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2543\n");

/***/ }),

/***/ 2544:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(33);\n\nvar _redux = __webpack_require__(22);\n\nvar _users = __webpack_require__(62);\n\nvar _user_utils = __webpack_require__(209);\n\nvar UserUtils = _interopRequireWildcard(_user_utils);\n\nvar _user_settings_security = __webpack_require__(2545);\n\nvar _user_settings_security2 = _interopRequireDefault(_user_settings_security);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction mapStateToProps(state, ownProps) {\n    var tokensEnabled = state.entities.general.config.EnableUserAccessTokens === 'true';\n    var userHasTokenRole = UserUtils.hasUserAccessTokenRole(ownProps.user.roles) || UserUtils.isSystemAdmin(ownProps.user.roles);\n\n    return (0, _extends3.default)({}, ownProps, {\n        userAccessTokens: state.entities.users.myUserAccessTokens,\n        canUseAccessTokens: tokensEnabled && userHasTokenRole\n    });\n} // Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: (0, _redux.bindActionCreators)({\n            getMe: _users.getMe,\n            getUserAccessTokensForUser: _users.getUserAccessTokensForUser,\n            createUserAccessToken: _users.createUserAccessToken,\n            revokeUserAccessToken: _users.revokeUserAccessToken,\n            clearUserAccessTokens: _users.clearUserAccessTokens\n        }, dispatch)\n    };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_user_settings_security2.default);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0NC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19zZWN1cml0eS9pbmRleC5qcz8wZTcxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNyBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCB7Y29ubmVjdH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHtiaW5kQWN0aW9uQ3JlYXRvcnN9IGZyb20gJ3JlZHV4JztcblxuaW1wb3J0IHtjbGVhclVzZXJBY2Nlc3NUb2tlbnMsIGNyZWF0ZVVzZXJBY2Nlc3NUb2tlbiwgZ2V0TWUsIGdldFVzZXJBY2Nlc3NUb2tlbnNGb3JVc2VyLCByZXZva2VVc2VyQWNjZXNzVG9rZW59IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvYWN0aW9ucy91c2Vycyc7XG5pbXBvcnQgKiBhcyBVc2VyVXRpbHMgZnJvbSAnbWF0dGVybW9zdC1yZWR1eC91dGlscy91c2VyX3V0aWxzJztcblxuaW1wb3J0IFNlY3VyaXR5VGFiIGZyb20gJy4vdXNlcl9zZXR0aW5nc19zZWN1cml0eS5qc3gnO1xuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUsIG93blByb3BzKSB7XG4gICAgY29uc3QgdG9rZW5zRW5hYmxlZCA9IHN0YXRlLmVudGl0aWVzLmdlbmVyYWwuY29uZmlnLkVuYWJsZVVzZXJBY2Nlc3NUb2tlbnMgPT09ICd0cnVlJztcbiAgICBjb25zdCB1c2VySGFzVG9rZW5Sb2xlID0gVXNlclV0aWxzLmhhc1VzZXJBY2Nlc3NUb2tlblJvbGUob3duUHJvcHMudXNlci5yb2xlcykgfHwgVXNlclV0aWxzLmlzU3lzdGVtQWRtaW4ob3duUHJvcHMudXNlci5yb2xlcyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5vd25Qcm9wcyxcbiAgICAgICAgdXNlckFjY2Vzc1Rva2Vuczogc3RhdGUuZW50aXRpZXMudXNlcnMubXlVc2VyQWNjZXNzVG9rZW5zLFxuICAgICAgICBjYW5Vc2VBY2Nlc3NUb2tlbnM6IHRva2Vuc0VuYWJsZWQgJiYgdXNlckhhc1Rva2VuUm9sZVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIG1hcERpc3BhdGNoVG9Qcm9wcyhkaXNwYXRjaCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGFjdGlvbnM6IGJpbmRBY3Rpb25DcmVhdG9ycyh7XG4gICAgICAgICAgICBnZXRNZSxcbiAgICAgICAgICAgIGdldFVzZXJBY2Nlc3NUb2tlbnNGb3JVc2VyLFxuICAgICAgICAgICAgY3JlYXRlVXNlckFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgcmV2b2tlVXNlckFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgY2xlYXJVc2VyQWNjZXNzVG9rZW5zXG4gICAgICAgIH0sIGRpc3BhdGNoKVxuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QobWFwU3RhdGVUb1Byb3BzLCBtYXBEaXNwYXRjaFRvUHJvcHMpKFNlY3VyaXR5VGFiKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19zZWN1cml0eS9pbmRleC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSEE7QUFLQTtBQW5CQTtBQUNBO0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBU0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2544\n");

/***/ }),

/***/ 2545:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _values = __webpack_require__(318);\n\nvar _values2 = _interopRequireDefault(_values);\n\nvar _regenerator = __webpack_require__(77);\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = __webpack_require__(78);\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _assign = __webpack_require__(42);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _es = __webpack_require__(45);\n\nvar _user_utils = __webpack_require__(209);\n\nvar UserUtils = _interopRequireWildcard(_user_utils);\n\nvar _diagnostics_actions = __webpack_require__(239);\n\nvar _user_actions = __webpack_require__(71);\n\nvar _preference_store = __webpack_require__(121);\n\nvar _preference_store2 = _interopRequireDefault(_preference_store);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _user_agent = __webpack_require__(90);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _icon50x = __webpack_require__(782);\n\nvar _icon50x2 = _interopRequireDefault(_icon50x);\n\nvar _access_history_modal = __webpack_require__(2546);\n\nvar _access_history_modal2 = _interopRequireDefault(_access_history_modal);\n\nvar _activity_log_modal = __webpack_require__(2548);\n\nvar _activity_log_modal2 = _interopRequireDefault(_activity_log_modal);\n\nvar _confirm_modal = __webpack_require__(319);\n\nvar _confirm_modal2 = _interopRequireDefault(_confirm_modal);\n\nvar _setting_item_max = __webpack_require__(770);\n\nvar _setting_item_max2 = _interopRequireDefault(_setting_item_max);\n\nvar _setting_item_min = __webpack_require__(771);\n\nvar _setting_item_min2 = _interopRequireDefault(_setting_item_min);\n\nvar _toggle_modal_button = __webpack_require__(459);\n\nvar _toggle_modal_button2 = _interopRequireDefault(_toggle_modal_button);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar TOKEN_CREATING = 'creating';\nvar TOKEN_CREATED = 'created';\nvar TOKEN_NOT_CREATING = 'not_creating';\n\nvar SecurityTab = function (_React$Component) {\n    (0, _inherits3.default)(SecurityTab, _React$Component);\n\n    function SecurityTab(props) {\n        var _this2 = this;\n\n        (0, _classCallCheck3.default)(this, SecurityTab);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SecurityTab.__proto__ || (0, _getPrototypeOf2.default)(SecurityTab)).call(this, props));\n\n        _this.submitPassword = function (e) {\n            e.preventDefault();\n\n            var user = _this.props.user;\n            var currentPassword = _this.state.currentPassword;\n            var newPassword = _this.state.newPassword;\n            var confirmPassword = _this.state.confirmPassword;\n\n            if (currentPassword === '') {\n                _this.setState({ passwordError: Utils.localizeMessage('user.settings.security.currentPasswordError', 'Please enter your current password.'), serverError: '' });\n                return;\n            }\n\n            var passwordErr = Utils.isValidPassword(newPassword);\n            if (passwordErr !== '') {\n                _this.setState({\n                    passwordError: passwordErr,\n                    serverError: ''\n                });\n                return;\n            }\n\n            if (newPassword !== confirmPassword) {\n                var defaultState = (0, _assign2.default)(_this.getDefaultState(), { passwordError: Utils.localizeMessage('user.settings.security.passwordMatchError', 'The new passwords you entered do not match.'), serverError: '' });\n                _this.setState(defaultState);\n                return;\n            }\n\n            _this.setState({ savingPassword: true });\n\n            (0, _user_actions.updatePassword)(user.id, currentPassword, newPassword, function () {\n                _this.props.updateSection('');\n                _this.props.actions.getMe();\n                _this.setState(_this.getDefaultState());\n            }, function (err) {\n                var state = _this.getDefaultState();\n                if (err.message) {\n                    state.serverError = err.message;\n                } else {\n                    state.serverError = err;\n                }\n                state.passwordError = '';\n                _this.setState(state);\n            });\n        };\n\n        _this.setupMfa = function (e) {\n            e.preventDefault();\n            _es.browserHistory.push('/mfa/setup');\n        };\n\n        _this.removeMfa = function () {\n            (0, _user_actions.deactivateMfa)(function () {\n                if (global.window.mm_license.MFA === 'true' && global.window.mm_config.EnableMultifactorAuthentication === 'true' && global.window.mm_config.EnforceMultifactorAuthentication === 'true') {\n                    window.location.href = '/mfa/setup';\n                    return;\n                }\n\n                _this.props.updateSection('');\n                _this.setState(_this.getDefaultState());\n            }, function (err) {\n                var state = _this.getDefaultState();\n                if (err.message) {\n                    state.serverError = err.message;\n                } else {\n                    state.serverError = err;\n                }\n                _this.setState(state);\n            });\n        };\n\n        _this.updateCurrentPassword = function (e) {\n            _this.setState({ currentPassword: e.target.value });\n        };\n\n        _this.updateNewPassword = function (e) {\n            _this.setState({ newPassword: e.target.value });\n        };\n\n        _this.updateConfirmPassword = function (e) {\n            _this.setState({ confirmPassword: e.target.value });\n        };\n\n        _this.deauthorizeApp = function (e) {\n            e.preventDefault();\n            var appId = e.currentTarget.getAttribute('data-app');\n            (0, _user_actions.deauthorizeOAuthApp)(appId, function () {\n                var authorizedApps = _this.state.authorizedApps.filter(function (app) {\n                    return app.id !== appId;\n                });\n\n                _this.setState({ authorizedApps: authorizedApps, serverError: null });\n            }, function (err) {\n                _this.setState({ serverError: err.message });\n            });\n        };\n\n        _this.createMfaSection = function () {\n            var updateSectionStatus = void 0;\n            var submit = void 0;\n\n            if (_this.props.activeSection === 'mfa') {\n                var content = void 0;\n                var extraInfo = void 0;\n                if (_this.props.user.mfa_active) {\n                    var mfaRemoveHelp = void 0;\n                    var mfaButtonText = void 0;\n\n                    if (global.window.mm_config.EnforceMultifactorAuthentication === 'true') {\n                        mfaRemoveHelp = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.mfa.requiredHelp',\n                            defaultMessage: 'Multi-factor authentication is required on this server. Resetting is only recommended when you need to switch code generation to a new mobile device. You will be required to set it up again immediately.'\n                        });\n\n                        mfaButtonText = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.mfa.reset',\n                            defaultMessage: 'Reset MFA on your account'\n                        });\n                    } else {\n                        mfaRemoveHelp = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.mfa.removeHelp',\n                            defaultMessage: 'Removing multi-factor authentication means you will no longer require a phone-based passcode to sign-in to your account.'\n                        });\n\n                        mfaButtonText = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.mfa.remove',\n                            defaultMessage: 'Remove MFA from your account'\n                        });\n                    }\n\n                    content = _react2.default.createElement(\n                        'div',\n                        { key: 'mfaQrCode' },\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                className: 'btn btn-primary',\n                                href: '#',\n                                onClick: _this.removeMfa\n                            },\n                            mfaButtonText\n                        ),\n                        _react2.default.createElement('br', null)\n                    );\n\n                    extraInfo = _react2.default.createElement(\n                        'span',\n                        null,\n                        mfaRemoveHelp\n                    );\n                } else {\n                    content = _react2.default.createElement(\n                        'div',\n                        { key: 'mfaQrCode' },\n                        _react2.default.createElement(\n                            'a',\n                            {\n                                className: 'btn btn-primary',\n                                href: '#',\n                                onClick: _this.setupMfa\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.mfa.add',\n                                defaultMessage: 'Add MFA to your account'\n                            })\n                        ),\n                        _react2.default.createElement('br', null)\n                    );\n\n                    extraInfo = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.mfa.addHelp',\n                            defaultMessage: 'Adding multi-factor authentication will make your account more secure by requiring a code from your mobile phone each time you sign in.'\n                        })\n                    );\n                }\n\n                var inputs = [];\n                inputs.push(_react2.default.createElement(\n                    'div',\n                    {\n                        key: 'mfaSetting',\n                        className: 'padding-top'\n                    },\n                    content\n                ));\n\n                updateSectionStatus = function resetSection(e) {\n                    this.props.updateSection('');\n                    this.setState({ serverError: null });\n                    e.preventDefault();\n                }.bind(_this);\n\n                return _react2.default.createElement(_setting_item_max2.default, {\n                    title: Utils.localizeMessage('user.settings.mfa.title', 'Multi-factor Authentication'),\n                    inputs: inputs,\n                    extraInfo: extraInfo,\n                    submit: submit,\n                    server_error: _this.state.serverError,\n                    updateSection: updateSectionStatus,\n                    width: 'medium'\n                });\n            }\n\n            var describe = void 0;\n            if (_this.props.user.mfa_active) {\n                describe = Utils.localizeMessage('user.settings.security.active', 'Active');\n            } else {\n                describe = Utils.localizeMessage('user.settings.security.inactive', 'Inactive');\n            }\n\n            updateSectionStatus = function updateSection() {\n                this.props.updateSection('mfa');\n            }.bind(_this);\n\n            return _react2.default.createElement(_setting_item_min2.default, {\n                title: Utils.localizeMessage('user.settings.mfa.title', 'Multi-factor Authentication'),\n                describe: describe,\n                updateSection: updateSectionStatus\n            });\n        };\n\n        _this.createPasswordSection = function () {\n            var updateSectionStatus = void 0;\n\n            if (_this.props.activeSection === 'password') {\n                var inputs = [];\n                var submit = void 0;\n\n                if (_this.props.user.auth_service === '') {\n                    submit = _this.submitPassword;\n\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'currentPasswordUpdateForm',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'col-sm-5 control-label' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.security.currentPassword',\n                                defaultMessage: 'Current Password'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-sm-7' },\n                            _react2.default.createElement('input', {\n                                id: 'currentPassword',\n                                className: 'form-control',\n                                type: 'password',\n                                onChange: _this.updateCurrentPassword,\n                                value: _this.state.currentPassword\n                            })\n                        )\n                    ));\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'newPasswordUpdateForm',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'col-sm-5 control-label' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.security.newPassword',\n                                defaultMessage: 'New Password'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-sm-7' },\n                            _react2.default.createElement('input', {\n                                id: 'newPassword',\n                                className: 'form-control',\n                                type: 'password',\n                                onChange: _this.updateNewPassword,\n                                value: _this.state.newPassword\n                            })\n                        )\n                    ));\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'retypeNewPasswordUpdateForm',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'col-sm-5 control-label' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.security.retypePassword',\n                                defaultMessage: 'Retype New Password'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'col-sm-7' },\n                            _react2.default.createElement('input', {\n                                id: 'confirmPassword',\n                                className: 'form-control',\n                                type: 'password',\n                                onChange: _this.updateConfirmPassword,\n                                value: _this.state.confirmPassword\n                            })\n                        )\n                    ));\n                } else if (_this.props.user.auth_service === _constants2.default.GITLAB_SERVICE) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'oauthEmailInfo',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-list__hint col-sm-12' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.security.passwordGitlabCantUpdate',\n                                defaultMessage: 'Login occurs through GitLab. Password cannot be updated.'\n                            })\n                        )\n                    ));\n                } else if (_this.props.user.auth_service === _constants2.default.LDAP_SERVICE) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'oauthEmailInfo',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-list__hint col-sm-12' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.security.passwordLdapCantUpdate',\n                                defaultMessage: 'Login occurs through AD/LDAP. Password cannot be updated.'\n                            })\n                        )\n                    ));\n                } else if (_this.props.user.auth_service === _constants2.default.SAML_SERVICE) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'oauthEmailInfo',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-list__hint col-sm-12' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.security.passwordSamlCantUpdate',\n                                defaultMessage: 'This field is handled through your login provider. If you want to change it, you need to do so through your login provider.'\n                            })\n                        )\n                    ));\n                } else if (_this.props.user.auth_service === _constants2.default.GOOGLE_SERVICE) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'oauthEmailInfo',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-list__hint col-sm-12' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.security.passwordGoogleCantUpdate',\n                                defaultMessage: 'Login occurs through Google Apps. Password cannot be updated.'\n                            })\n                        )\n                    ));\n                } else if (_this.props.user.auth_service === _constants2.default.OFFICE365_SERVICE) {\n                    inputs.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: 'oauthEmailInfo',\n                            className: 'form-group'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-list__hint col-sm-12' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.security.passwordOffice365CantUpdate',\n                                defaultMessage: 'Login occurs through Office 365. Password cannot be updated.'\n                            })\n                        )\n                    ));\n                }\n\n                updateSectionStatus = function resetSection(e) {\n                    this.props.updateSection('');\n                    this.setState({ currentPassword: '', newPassword: '', confirmPassword: '', serverError: null, passwordError: null });\n                    e.preventDefault();\n                }.bind(_this);\n\n                return _react2.default.createElement(_setting_item_max2.default, {\n                    title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.security.password',\n                        defaultMessage: 'Password'\n                    }),\n                    inputs: inputs,\n                    submit: submit,\n                    saving: _this.state.savingPassword,\n                    server_error: _this.state.serverError,\n                    client_error: _this.state.passwordError,\n                    updateSection: updateSectionStatus\n                });\n            }\n\n            var describe = void 0;\n\n            if (_this.props.user.auth_service === '') {\n                var d = new Date(_this.props.user.last_password_update);\n                var hours12 = !_preference_store2.default.getBool(_constants2.default.Preferences.CATEGORY_DISPLAY_SETTINGS, _constants2.default.Preferences.USE_MILITARY_TIME, false);\n\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.lastUpdated',\n                    defaultMessage: 'Last updated {date} at {time}',\n                    values: {\n                        date: _react2.default.createElement(_reactIntl.FormattedDate, {\n                            value: d,\n                            day: '2-digit',\n                            month: 'short',\n                            year: 'numeric'\n                        }),\n                        time: _react2.default.createElement(_reactIntl.FormattedTime, {\n                            value: d,\n                            hour12: hours12,\n                            hour: '2-digit',\n                            minute: '2-digit'\n                        })\n                    }\n                });\n            } else if (_this.props.user.auth_service === _constants2.default.GITLAB_SERVICE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.loginGitlab',\n                    defaultMessage: 'Login done through GitLab'\n                });\n            } else if (_this.props.user.auth_service === _constants2.default.LDAP_SERVICE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.loginLdap',\n                    defaultMessage: 'Login done through AD/LDAP'\n                });\n            } else if (_this.props.user.auth_service === _constants2.default.SAML_SERVICE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.loginSaml',\n                    defaultMessage: 'Login done through SAML'\n                });\n            } else if (_this.props.user.auth_service === _constants2.default.GOOGLE_SERVICE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.loginGoogle',\n                    defaultMessage: 'Login done through Google Apps'\n                });\n            } else if (_this.props.user.auth_service === _constants2.default.OFFICE365_SERVICE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.loginOffice365',\n                    defaultMessage: 'Login done through Office 365'\n                });\n            }\n\n            updateSectionStatus = function updateSection() {\n                this.props.updateSection('password');\n            }.bind(_this);\n\n            return _react2.default.createElement(_setting_item_min2.default, {\n                title: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.password',\n                    defaultMessage: 'Password'\n                }),\n                describe: describe,\n                updateSection: updateSectionStatus\n            });\n        };\n\n        _this.createSignInSection = function () {\n            var updateSectionStatus = void 0;\n            var user = _this.props.user;\n\n            if (_this.props.activeSection === 'signin') {\n                var emailOption = void 0;\n                var gitlabOption = void 0;\n                var googleOption = void 0;\n                var office365Option = void 0;\n                var ldapOption = void 0;\n                var samlOption = void 0;\n\n                if (user.auth_service === '') {\n                    if (global.window.mm_config.EnableSignUpWithGitLab === 'true') {\n                        gitlabOption = _react2.default.createElement(\n                            'div',\n                            { className: 'padding-bottom x2' },\n                            _react2.default.createElement(\n                                _es.Link,\n                                {\n                                    className: 'btn btn-primary',\n                                    to: '/claim/email_to_oauth?email=' + encodeURIComponent(user.email) + '&old_type=' + user.auth_service + '&new_type=' + _constants2.default.GITLAB_SERVICE\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.security.switchGitlab',\n                                    defaultMessage: 'Switch to using GitLab SSO'\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        );\n                    }\n\n                    if (global.window.mm_config.EnableSignUpWithGoogle === 'true') {\n                        googleOption = _react2.default.createElement(\n                            'div',\n                            { className: 'padding-bottom x2' },\n                            _react2.default.createElement(\n                                _es.Link,\n                                {\n                                    className: 'btn btn-primary',\n                                    to: '/claim/email_to_oauth?email=' + encodeURIComponent(user.email) + '&old_type=' + user.auth_service + '&new_type=' + _constants2.default.GOOGLE_SERVICE\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.security.switchGoogle',\n                                    defaultMessage: 'Switch to using Google SSO'\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        );\n                    }\n\n                    if (global.window.mm_config.EnableSignUpWithOffice365 === 'true') {\n                        office365Option = _react2.default.createElement(\n                            'div',\n                            { className: 'padding-bottom x2' },\n                            _react2.default.createElement(\n                                _es.Link,\n                                {\n                                    className: 'btn btn-primary',\n                                    to: '/claim/email_to_oauth?email=' + encodeURIComponent(user.email) + '&old_type=' + user.auth_service + '&new_type=' + _constants2.default.OFFICE365_SERVICE\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.security.switchOffice365',\n                                    defaultMessage: 'Switch to using Office 365 SSO'\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        );\n                    }\n\n                    if (global.window.mm_config.EnableLdap === 'true') {\n                        ldapOption = _react2.default.createElement(\n                            'div',\n                            { className: 'padding-bottom x2' },\n                            _react2.default.createElement(\n                                _es.Link,\n                                {\n                                    className: 'btn btn-primary',\n                                    to: '/claim/email_to_ldap?email=' + encodeURIComponent(user.email)\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.security.switchLdap',\n                                    defaultMessage: 'Switch to using AD/LDAP'\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        );\n                    }\n\n                    if (global.window.mm_config.EnableSaml === 'true') {\n                        samlOption = _react2.default.createElement(\n                            'div',\n                            { className: 'padding-bottom x2' },\n                            _react2.default.createElement(\n                                _es.Link,\n                                {\n                                    className: 'btn btn-primary',\n                                    to: '/claim/email_to_oauth?email=' + encodeURIComponent(user.email) + '&old_type=' + user.auth_service + '&new_type=' + _constants2.default.SAML_SERVICE\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.security.switchSaml',\n                                    defaultMessage: 'Switch to using SAML SSO'\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        );\n                    }\n                } else if (global.window.mm_config.EnableSignUpWithEmail === 'true') {\n                    var link = void 0;\n                    if (user.auth_service === _constants2.default.LDAP_SERVICE) {\n                        link = '/claim/ldap_to_email?email=' + encodeURIComponent(user.email);\n                    } else {\n                        link = '/claim/oauth_to_email?email=' + encodeURIComponent(user.email) + '&old_type=' + user.auth_service;\n                    }\n\n                    emailOption = _react2.default.createElement(\n                        'div',\n                        { className: 'padding-bottom x2' },\n                        _react2.default.createElement(\n                            _es.Link,\n                            {\n                                className: 'btn btn-primary',\n                                to: link\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.security.switchEmail',\n                                defaultMessage: 'Switch to using email and password'\n                            })\n                        ),\n                        _react2.default.createElement('br', null)\n                    );\n                }\n\n                var inputs = [];\n                inputs.push(_react2.default.createElement(\n                    'div',\n                    { key: 'userSignInOption' },\n                    emailOption,\n                    gitlabOption,\n                    googleOption,\n                    office365Option,\n                    ldapOption,\n                    samlOption\n                ));\n\n                updateSectionStatus = function updateSection(e) {\n                    this.props.updateSection('');\n                    this.setState({ serverError: null });\n                    e.preventDefault();\n                }.bind(_this);\n\n                var extraInfo = _react2.default.createElement(\n                    'span',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.security.oneSignin',\n                        defaultMessage: 'You may only have one sign-in method at a time. Switching sign-in method will send an email notifying you if the change was successful.'\n                    })\n                );\n\n                return _react2.default.createElement(_setting_item_max2.default, {\n                    title: Utils.localizeMessage('user.settings.security.method', 'Sign-in Method'),\n                    extraInfo: extraInfo,\n                    inputs: inputs,\n                    server_error: _this.state.serverError,\n                    updateSection: updateSectionStatus\n                });\n            }\n\n            updateSectionStatus = function updateSection() {\n                this.props.updateSection('signin');\n            }.bind(_this);\n\n            var describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'user.settings.security.emailPwd',\n                defaultMessage: 'Email and Password'\n            });\n            if (_this.props.user.auth_service === _constants2.default.GITLAB_SERVICE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.gitlab',\n                    defaultMessage: 'GitLab'\n                });\n            } else if (_this.props.user.auth_service === _constants2.default.GOOGLE_SERVICE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.google',\n                    defaultMessage: 'Google'\n                });\n            } else if (_this.props.user.auth_service === _constants2.default.OFFICE365_SERVICE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.office365',\n                    defaultMessage: 'Office 365'\n                });\n            } else if (_this.props.user.auth_service === _constants2.default.LDAP_SERVICE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.ldap',\n                    defaultMessage: 'AD/LDAP'\n                });\n            } else if (_this.props.user.auth_service === _constants2.default.SAML_SERVICE) {\n                describe = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.saml',\n                    defaultMessage: 'SAML'\n                });\n            }\n\n            return _react2.default.createElement(_setting_item_min2.default, {\n                title: Utils.localizeMessage('user.settings.security.method', 'Sign-in Method'),\n                describe: describe,\n                updateSection: updateSectionStatus\n            });\n        };\n\n        _this.createOAuthAppsSection = function () {\n            var updateSectionStatus = void 0;\n\n            if (_this.props.activeSection === 'apps') {\n                var apps = void 0;\n                if (_this.state.authorizedApps && _this.state.authorizedApps.length > 0) {\n                    apps = _this.state.authorizedApps.map(function (app) {\n                        var homepage = _react2.default.createElement(\n                            'a',\n                            {\n                                href: app.homepage,\n                                target: '_blank',\n                                rel: 'noopener noreferrer'\n                            },\n                            app.homepage\n                        );\n\n                        return _react2.default.createElement(\n                            'div',\n                            {\n                                key: app.id,\n                                className: 'padding-bottom x2 authorized-app'\n                            },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col-sm-10' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'authorized-app__name' },\n                                    app.name,\n                                    _react2.default.createElement(\n                                        'span',\n                                        { className: 'authorized-app__url' },\n                                        ' -',\n                                        ' ',\n                                        homepage\n                                    )\n                                ),\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'authorized-app__description' },\n                                    app.description\n                                ),\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'authorized-app__deauthorize' },\n                                    _react2.default.createElement(\n                                        'a',\n                                        {\n                                            href: '#',\n                                            'data-app': app.id,\n                                            onClick: _this.deauthorizeApp\n                                        },\n                                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                            id: 'user.settings.security.deauthorize',\n                                            defaultMessage: 'Deauthorize'\n                                        })\n                                    )\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col-sm-2 pull-right' },\n                                _react2.default.createElement('img', {\n                                    alt: app.name,\n                                    src: app.icon_url || _icon50x2.default\n                                })\n                            ),\n                            _react2.default.createElement('br', null)\n                        );\n                    });\n                } else {\n                    apps = _react2.default.createElement(\n                        'div',\n                        { className: 'padding-bottom x2 authorized-app' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-list__hint' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.security.noApps',\n                                defaultMessage: 'No OAuth 2.0 Applications are authorized.'\n                            })\n                        )\n                    );\n                }\n\n                var inputs = [];\n                var wrapperClass = void 0;\n                var helpText = void 0;\n                if (Array.isArray(apps)) {\n                    wrapperClass = 'authorized-apps__wrapper';\n\n                    helpText = _react2.default.createElement(\n                        'div',\n                        { className: 'authorized-apps__help' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.security.oauthAppsHelp',\n                            defaultMessage: 'Applications act on your behalf to access your data based on the permissions you grant them.'\n                        })\n                    );\n                }\n\n                inputs.push(_react2.default.createElement(\n                    'div',\n                    {\n                        className: wrapperClass,\n                        key: 'authorizedApps'\n                    },\n                    apps\n                ));\n\n                updateSectionStatus = function updateSection(e) {\n                    this.props.updateSection('');\n                    this.setState({ serverError: null });\n                    e.preventDefault();\n                }.bind(_this);\n\n                var title = _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.security.oauthApps',\n                        defaultMessage: 'OAuth 2.0 Applications'\n                    }),\n                    helpText\n                );\n\n                return _react2.default.createElement(_setting_item_max2.default, {\n                    title: title,\n                    inputs: inputs,\n                    server_error: _this.state.serverError,\n                    updateSection: updateSectionStatus,\n                    width: 'full',\n                    cancelButtonText: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.security.close',\n                        defaultMessage: 'Close'\n                    })\n                });\n            }\n\n            updateSectionStatus = function updateSection() {\n                this.props.updateSection('apps');\n            }.bind(_this);\n\n            return _react2.default.createElement(_setting_item_min2.default, {\n                title: Utils.localizeMessage('user.settings.security.oauthApps', 'OAuth 2.0 Applications'),\n                describe: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.security.oauthAppsDescription',\n                    defaultMessage: 'Click \\'Edit\\' to manage your OAuth 2.0 Applications'\n                }),\n                updateSection: updateSectionStatus\n            });\n        };\n\n        _this.startCreatingToken = function () {\n            _this.setState({ tokenCreationState: TOKEN_CREATING });\n        };\n\n        _this.stopCreatingToken = function () {\n            _this.setState({ tokenCreationState: TOKEN_NOT_CREATING });\n        };\n\n        _this.handleCreateToken = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee() {\n            var description, userId, _ref2, data, error;\n\n            return _regenerator2.default.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            _this.handleCancelConfirm();\n\n                            description = _this.refs.newtokendescription ? _this.refs.newtokendescription.value : '';\n\n                            if (!(description === '')) {\n                                _context.next = 5;\n                                break;\n                            }\n\n                            _this.setState({ tokenError: Utils.localizeMessage('user.settings.tokens.nameRequired', 'Please enter a description.') });\n                            return _context.abrupt('return');\n\n                        case 5:\n\n                            _this.setState({ tokenError: '' });\n\n                            userId = _this.props.user ? _this.props.user.id : '';\n                            _context.next = 9;\n                            return _this.props.actions.createUserAccessToken(userId, description);\n\n                        case 9:\n                            _ref2 = _context.sent;\n                            data = _ref2.data;\n                            error = _ref2.error;\n\n\n                            if (data) {\n                                _this.setState({ tokenCreationState: TOKEN_CREATED, newToken: data });\n                            } else if (error) {\n                                _this.setState({ serverError: error.message });\n                            }\n\n                        case 13:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _callee, _this2);\n        }));\n\n        _this.handleCancelConfirm = function () {\n            _this.setState({\n                showConfirmModal: false,\n                confirmTitle: null,\n                confirmMessage: null,\n                confirmButton: null,\n                confirmComplete: null\n            });\n        };\n\n        _this.confirmCreateToken = function () {\n            if (UserUtils.isSystemAdmin(_this.props.user.roles)) {\n                _this.setState({\n                    showConfirmModal: true,\n                    confirmTitle: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.tokens.confirmCreateTitle',\n                        defaultMessage: 'Create System Admin Personal Access Token'\n                    }),\n                    confirmMessage: _react2.default.createElement(\n                        'div',\n                        { className: 'alert alert-danger' },\n                        _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                            id: 'user.settings.tokens.confirmCreateMessage',\n                            defaultMessage: 'You are generating a personal access token with System Admin permissions. Are you sure want to create this token?'\n                        })\n                    ),\n                    confirmButton: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.tokens.confirmCreateButton',\n                        defaultMessage: 'Yes, Create'\n                    }),\n                    confirmComplete: function confirmComplete() {\n                        _this.handleCreateToken();\n                        (0, _diagnostics_actions.trackEvent)('settings', 'system_admin_create_user_access_token');\n                    }\n                });\n\n                return;\n            }\n\n            _this.handleCreateToken();\n        };\n\n        _this.saveTokenKeyPress = function (e) {\n            if (e.which === _constants2.default.KeyCodes.ENTER) {\n                _this.confirmCreateToken();\n            }\n        };\n\n        _this.confirmRevokeToken = function (tokenId) {\n            var token = _this.props.userAccessTokens[tokenId];\n\n            _this.setState({\n                showConfirmModal: true,\n                confirmTitle: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.tokens.confirmDeleteTitle',\n                    defaultMessage: 'Delete Token?'\n                }),\n                confirmMessage: _react2.default.createElement(\n                    'div',\n                    { className: 'alert alert-danger' },\n                    _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                        id: 'user.settings.tokens.confirmDeleteMessage',\n                        defaultMessage: 'Any integrations using this token will no longer be able to access the Mattermost API. You cannot undo this action. <br /><br />Are you sure want to delete the {description} token?',\n                        values: {\n                            description: token.description\n                        }\n                    })\n                ),\n                confirmButton: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'user.settings.tokens.confirmDeleteButton',\n                    defaultMessage: 'Yes, Delete'\n                }),\n                confirmComplete: function confirmComplete() {\n                    _this.revokeToken(tokenId);\n                    (0, _diagnostics_actions.trackEvent)('settings', 'revoke_user_access_token');\n                }\n            });\n        };\n\n        _this.revokeToken = function () {\n            var _ref3 = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(tokenId) {\n                var _ref4, error;\n\n                return _regenerator2.default.wrap(function _callee2$(_context2) {\n                    while (1) {\n                        switch (_context2.prev = _context2.next) {\n                            case 0:\n                                _context2.next = 2;\n                                return _this.props.actions.revokeUserAccessToken(tokenId);\n\n                            case 2:\n                                _ref4 = _context2.sent;\n                                error = _ref4.error;\n\n                                if (error) {\n                                    _this.setState({ serverError: error.message });\n                                }\n                                _this.handleCancelConfirm();\n\n                            case 6:\n                            case 'end':\n                                return _context2.stop();\n                        }\n                    }\n                }, _callee2, _this2);\n            }));\n\n            return function (_x) {\n                return _ref3.apply(this, arguments);\n            };\n        }();\n\n        _this.createTokensSection = function () {\n            var updateSectionStatus = void 0;\n            var tokenListClass = '';\n\n            if (_this.props.activeSection === 'tokens') {\n                var tokenList = [];\n                (0, _values2.default)(_this.props.userAccessTokens).forEach(function (token) {\n                    if (_this.state.newToken && _this.state.newToken.id === token.id) {\n                        return;\n                    }\n\n                    tokenList.push(_react2.default.createElement(\n                        'div',\n                        {\n                            key: token.id,\n                            className: 'setting-box__item'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'whitespace--nowrap overflow--ellipsis' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.tokens.tokenDesc',\n                                defaultMessage: 'Token Description: '\n                            }),\n                            token.description\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'setting-box__token-id whitespace--nowrap overflow--ellipsis' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.tokens.tokenId',\n                                defaultMessage: 'Token ID: '\n                            }),\n                            token.id\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            null,\n                            _react2.default.createElement(\n                                'a',\n                                {\n                                    name: token.id,\n                                    href: '#',\n                                    onClick: function onClick(e) {\n                                        e.preventDefault();\n                                        _this.confirmRevokeToken(token.id);\n                                    }\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.tokens.delete',\n                                    defaultMessage: 'Delete'\n                                })\n                            )\n                        ),\n                        _react2.default.createElement('hr', { className: 'margin-bottom margin-top x2' })\n                    ));\n                });\n\n                var noTokenText = void 0;\n                if (tokenList.length === 0) {\n                    noTokenText = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        key: 'notokens',\n                        id: 'user.settings.tokens.userAccessTokensNone',\n                        defaultMessage: 'No personal access tokens.'\n                    });\n                }\n\n                var extraInfo = void 0;\n                if ((0, _user_agent.isMobile)()) {\n                    extraInfo = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                            id: 'user.settings.tokens.description_mobile',\n                            defaultMessage: '<a href=\"https://about.mattermost.com/default-user-access-tokens\" target=\"_blank\">Personal access tokens</a> function similar to session tokens and can be used by integrations to <a href=\"https://about.mattermost.com/default-api-authentication\" target=\"_blank\">authenticate against the REST API</a>. Create new tokens on your desktop.'\n                        })\n                    );\n                } else {\n                    extraInfo = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedHTMLMessage, {\n                            id: 'user.settings.tokens.description',\n                            defaultMessage: '<a href=\"https://about.mattermost.com/default-user-access-tokens\" target=\"_blank\">Personal access tokens</a> function similar to session tokens and can be used by integrations to <a href=\"https://about.mattermost.com/default-api-authentication\" target=\"_blank\">authenticate against the REST API</a>.'\n                        })\n                    );\n                }\n\n                var newTokenSection = void 0;\n                if (_this.state.tokenCreationState === TOKEN_CREATING) {\n                    newTokenSection = _react2.default.createElement(\n                        'div',\n                        { className: 'padding-left x2' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'row' },\n                            _react2.default.createElement(\n                                'label',\n                                { className: 'col-sm-auto control-label padding-right x2' },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.tokens.name',\n                                    defaultMessage: 'Token Description: '\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'col-sm-5' },\n                                _react2.default.createElement('input', {\n                                    ref: 'newtokendescription',\n                                    className: 'form-control',\n                                    type: 'text',\n                                    maxLength: 64,\n                                    onKeyPress: _this.saveTokenKeyPress\n                                })\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            null,\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'padding-top x2' },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.tokens.nameHelp',\n                                    defaultMessage: 'Enter a description for your token to remember what it does.'\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                null,\n                                _react2.default.createElement(\n                                    'label',\n                                    {\n                                        id: 'clientError',\n                                        className: 'has-error margin-top margin-bottom'\n                                    },\n                                    _this.state.tokenError\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    className: 'btn btn-primary',\n                                    onClick: _this.confirmCreateToken\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.tokens.save',\n                                    defaultMessage: 'Save'\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    className: 'btn btn-default',\n                                    onClick: _this.stopCreatingToken\n                                },\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'user.settings.tokens.cancel',\n                                    defaultMessage: 'Cancel'\n                                })\n                            )\n                        )\n                    );\n                } else if (_this.state.tokenCreationState === TOKEN_CREATED) {\n                    if (tokenList.length === 0) {\n                        tokenListClass = ' hidden';\n                    }\n\n                    newTokenSection = _react2.default.createElement(\n                        'div',\n                        {\n                            className: 'alert alert-warning'\n                        },\n                        _react2.default.createElement('i', { className: 'fa fa-warning margin-right' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.tokens.copy',\n                            defaultMessage: 'Please copy the access token below. You won\\'t be able to see it again!'\n                        }),\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement('br', null),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'whitespace--nowrap overflow--ellipsis' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.tokens.name',\n                                defaultMessage: 'Token Description: '\n                            }),\n                            _this.state.newToken.description\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'whitespace--nowrap overflow--ellipsis' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.tokens.id',\n                                defaultMessage: 'Token ID: '\n                            }),\n                            _this.state.newToken.id\n                        ),\n                        _react2.default.createElement(\n                            'strong',\n                            { className: 'word-break--all' },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'user.settings.tokens.token',\n                                defaultMessage: 'Access Token: '\n                            }),\n                            _this.state.newToken.token\n                        )\n                    );\n                } else {\n                    newTokenSection = _react2.default.createElement(\n                        'a',\n                        {\n                            className: 'btn btn-primary',\n                            href: '#',\n                            onClick: _this.startCreatingToken\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.tokens.create',\n                            defaultMessage: 'Create New Token'\n                        })\n                    );\n                }\n\n                var inputs = [];\n                inputs.push(_react2.default.createElement(\n                    'div',\n                    {\n                        key: 'tokensSetting',\n                        className: 'padding-top'\n                    },\n                    _react2.default.createElement(\n                        'div',\n                        { key: 'tokenList' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'alert alert-transparent' + tokenListClass },\n                            tokenList,\n                            noTokenText\n                        ),\n                        newTokenSection\n                    )\n                ));\n\n                updateSectionStatus = function resetSection(e) {\n                    this.props.updateSection('');\n                    this.setState({ newToken: null, tokenCreationState: TOKEN_NOT_CREATING, serverError: null, tokenError: '' });\n                    e.preventDefault();\n                }.bind(_this);\n\n                return _react2.default.createElement(_setting_item_max2.default, {\n                    title: Utils.localizeMessage('user.settings.tokens.title', 'Personal Access Tokens'),\n                    inputs: inputs,\n                    extraInfo: extraInfo,\n                    infoPosition: 'top',\n                    server_error: _this.state.serverError,\n                    updateSection: updateSectionStatus,\n                    width: 'full',\n                    cancelButtonText: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'user.settings.security.close',\n                        defaultMessage: 'Close'\n                    })\n                });\n            }\n\n            var describe = Utils.localizeMessage('user.settings.tokens.clickToEdit', \"Click 'Edit' to manage your personal access tokens\");\n\n            updateSectionStatus = function updateSection() {\n                this.props.updateSection('tokens');\n            }.bind(_this);\n\n            return _react2.default.createElement(_setting_item_min2.default, {\n                title: Utils.localizeMessage('user.settings.tokens.title', 'Personal Access Tokens'),\n                describe: describe,\n                updateSection: updateSectionStatus\n            });\n        };\n\n        _this.state = _this.getDefaultState();\n        return _this;\n    }\n\n    (0, _createClass3.default)(SecurityTab, [{\n        key: 'getDefaultState',\n        value: function getDefaultState() {\n            return {\n                currentPassword: '',\n                newPassword: '',\n                confirmPassword: '',\n                passwordError: '',\n                serverError: '',\n                tokenError: '',\n                showConfirmModal: false,\n                authService: this.props.user.auth_service,\n                savingPassword: false\n            };\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this3 = this;\n\n            if (global.mm_config.EnableOAuthServiceProvider === 'true') {\n                (0, _user_actions.getAuthorizedApps)(function (authorizedApps) {\n                    _this3.setState({ authorizedApps: authorizedApps, serverError: null }); //eslint-disable-line react/no-did-mount-set-state\n                }, function (err) {\n                    _this3.setState({ serverError: err.message }); //eslint-disable-line react/no-did-mount-set-state\n                });\n            }\n\n            if (this.props.canUseAccessTokens) {\n                this.props.actions.clearUserAccessTokens();\n                var userId = this.props.user ? this.props.user.id : '';\n                this.props.actions.getUserAccessTokensForUser(userId, 0, 200);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var user = this.props.user;\n            var config = window.mm_config;\n\n            var passwordSection = this.createPasswordSection();\n\n            var numMethods = 0;\n            numMethods = config.EnableSignUpWithGitLab === 'true' ? numMethods + 1 : numMethods;\n            numMethods = config.EnableSignUpWithGoogle === 'true' ? numMethods + 1 : numMethods;\n            numMethods = config.EnableLdap === 'true' ? numMethods + 1 : numMethods;\n            numMethods = config.EnableSaml === 'true' ? numMethods + 1 : numMethods;\n\n            // If there are other sign-in methods and either email is enabled or the user's account is email, then allow switching\n            var signInSection = void 0;\n            if ((config.EnableSignUpWithEmail === 'true' || user.auth_service === '') && numMethods > 0) {\n                signInSection = this.createSignInSection();\n            }\n\n            var mfaSection = void 0;\n            if (config.EnableMultifactorAuthentication === 'true' && global.window.mm_license.IsLicensed === 'true' && (user.auth_service === '' || user.auth_service === _constants2.default.LDAP_SERVICE)) {\n                mfaSection = this.createMfaSection();\n            }\n\n            var oauthSection = void 0;\n            if (config.EnableOAuthServiceProvider === 'true') {\n                oauthSection = this.createOAuthAppsSection();\n            }\n\n            var tokensSection = void 0;\n            if (this.props.canUseAccessTokens) {\n                tokensSection = this.createTokensSection();\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'div',\n                    { className: 'modal-header' },\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            type: 'button',\n                            className: 'close',\n                            'data-dismiss': 'modal',\n                            'aria-label': Utils.localizeMessage('user.settings.security.close', 'Close'),\n                            onClick: this.props.closeModal\n                        },\n                        _react2.default.createElement(\n                            'span',\n                            { 'aria-hidden': 'true' },\n                            ''\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'h4',\n                        {\n                            className: 'modal-title',\n                            ref: 'title'\n                        },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'modal-back' },\n                            _react2.default.createElement('i', {\n                                className: 'fa fa-angle-left',\n                                onClick: this.props.collapseModal\n                            })\n                        ),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.security.title',\n                            defaultMessage: 'Security Settings'\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'user-settings' },\n                    _react2.default.createElement(\n                        'h3',\n                        { className: 'tab-header' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.security.title',\n                            defaultMessage: 'Security Settings'\n                        })\n                    ),\n                    _react2.default.createElement('div', { className: 'divider-dark first' }),\n                    passwordSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    mfaSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    oauthSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    tokensSection,\n                    _react2.default.createElement('div', { className: 'divider-light' }),\n                    signInSection,\n                    _react2.default.createElement('div', { className: 'divider-dark' }),\n                    _react2.default.createElement('br', null),\n                    _react2.default.createElement(\n                        _toggle_modal_button2.default,\n                        {\n                            className: 'security-links color--link',\n                            dialogType: _access_history_modal2.default\n                        },\n                        _react2.default.createElement('i', { className: 'fa fa-clock-o' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.security.viewHistory',\n                            defaultMessage: 'View Access History'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        _toggle_modal_button2.default,\n                        {\n                            className: 'security-links color--link margin-top',\n                            dialogType: _activity_log_modal2.default\n                        },\n                        _react2.default.createElement('i', { className: 'fa fa-clock-o' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'user.settings.security.logoutActiveSessions',\n                            defaultMessage: 'View and Logout of Active Sessions'\n                        })\n                    )\n                ),\n                _react2.default.createElement(_confirm_modal2.default, {\n                    title: this.state.confirmTitle,\n                    message: this.state.confirmMessage,\n                    confirmButtonText: this.state.confirmButton,\n                    show: this.state.showConfirmModal,\n                    onConfirm: this.state.confirmComplete || function () {} //eslint-disable-line no-empty-function\n                    , onCancel: this.handleCancelConfirm\n                })\n            );\n        }\n    }]);\n    return SecurityTab;\n}(_react2.default.Component);\n\nSecurityTab.propTypes = {\n    user: _propTypes2.default.object,\n    activeSection: _propTypes2.default.string,\n    updateSection: _propTypes2.default.func,\n    updateTab: _propTypes2.default.func,\n    closeModal: _propTypes2.default.func.isRequired,\n    collapseModal: _propTypes2.default.func.isRequired,\n    setEnforceFocus: _propTypes2.default.func.isRequired,\n\n    /*\n     * The personal access tokens for the user\n     */\n    userAccessTokens: _propTypes2.default.object,\n\n    /*\n     * Set if access tokens are enabled and this user can use them\n     */\n    canUseAccessTokens: _propTypes2.default.bool,\n\n    actions: _propTypes2.default.shape({\n        getMe: _propTypes2.default.func.isRequired,\n\n        /*\n         * Function to get personal access tokens for a user\n         */\n        getUserAccessTokensForUser: _propTypes2.default.func.isRequired,\n\n        /*\n         * Function to create a personal access token\n         */\n        createUserAccessToken: _propTypes2.default.func.isRequired,\n\n        /*\n         * Function to revoke a personal access token\n         */\n        revokeUserAccessToken: _propTypes2.default.func.isRequired,\n\n        /*\n         * Function to clear personal access tokens locally\n         */\n        clearUserAccessTokens: _propTypes2.default.func.isRequired\n    }).isRequired\n};\nexports.default = SecurityTab;\n\n\nSecurityTab.defaultProps = {\n    user: {},\n    activeSection: ''\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0NS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19zZWN1cml0eS91c2VyX3NldHRpbmdzX3NlY3VyaXR5LmpzeD84ZWExIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0Zvcm1hdHRlZERhdGUsIEZvcm1hdHRlZEhUTUxNZXNzYWdlLCBGb3JtYXR0ZWRNZXNzYWdlLCBGb3JtYXR0ZWRUaW1lfSBmcm9tICdyZWFjdC1pbnRsJztcbmltcG9ydCB7YnJvd3Nlckhpc3RvcnksIExpbmt9IGZyb20gJ3JlYWN0LXJvdXRlci9lczYnO1xuXG5pbXBvcnQgKiBhcyBVc2VyVXRpbHMgZnJvbSAnbWF0dGVybW9zdC1yZWR1eC91dGlscy91c2VyX3V0aWxzJztcblxuaW1wb3J0IHt0cmFja0V2ZW50fSBmcm9tICdhY3Rpb25zL2RpYWdub3N0aWNzX2FjdGlvbnMuanN4JztcbmltcG9ydCB7ZGVhY3RpdmF0ZU1mYSwgZGVhdXRob3JpemVPQXV0aEFwcCwgZ2V0QXV0aG9yaXplZEFwcHMsIHVwZGF0ZVBhc3N3b3JkfSBmcm9tICdhY3Rpb25zL3VzZXJfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IFByZWZlcmVuY2VTdG9yZSBmcm9tICdzdG9yZXMvcHJlZmVyZW5jZV9zdG9yZS5qc3gnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuaW1wb3J0IHtpc01vYmlsZX0gZnJvbSAndXRpbHMvdXNlcl9hZ2VudC5qc3gnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAndXRpbHMvdXRpbHMuanN4JztcblxuaW1wb3J0IGljb241MCBmcm9tICdpbWFnZXMvaWNvbjUweDUwLnBuZyc7XG5cbmltcG9ydCBBY2Nlc3NIaXN0b3J5TW9kYWwgZnJvbSAnY29tcG9uZW50cy9hY2Nlc3NfaGlzdG9yeV9tb2RhbCc7XG5pbXBvcnQgQWN0aXZpdHlMb2dNb2RhbCBmcm9tICdjb21wb25lbnRzL2FjdGl2aXR5X2xvZ19tb2RhbCc7XG5pbXBvcnQgQ29uZmlybU1vZGFsIGZyb20gJ2NvbXBvbmVudHMvY29uZmlybV9tb2RhbC5qc3gnO1xuaW1wb3J0IFNldHRpbmdJdGVtTWF4IGZyb20gJ2NvbXBvbmVudHMvc2V0dGluZ19pdGVtX21heC5qc3gnO1xuaW1wb3J0IFNldHRpbmdJdGVtTWluIGZyb20gJ2NvbXBvbmVudHMvc2V0dGluZ19pdGVtX21pbi5qc3gnO1xuaW1wb3J0IFRvZ2dsZU1vZGFsQnV0dG9uIGZyb20gJ2NvbXBvbmVudHMvdG9nZ2xlX21vZGFsX2J1dHRvbi5qc3gnO1xuXG5jb25zdCBUT0tFTl9DUkVBVElORyA9ICdjcmVhdGluZyc7XG5jb25zdCBUT0tFTl9DUkVBVEVEID0gJ2NyZWF0ZWQnO1xuY29uc3QgVE9LRU5fTk9UX0NSRUFUSU5HID0gJ25vdF9jcmVhdGluZyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3VyaXR5VGFiIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgICB1c2VyOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICBhY3RpdmVTZWN0aW9uOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgICAgICB1cGRhdGVTZWN0aW9uOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgdXBkYXRlVGFiOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgICAgY2xvc2VNb2RhbDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgICAgY29sbGFwc2VNb2RhbDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgICAgc2V0RW5mb3JjZUZvY3VzOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIFRoZSBwZXJzb25hbCBhY2Nlc3MgdG9rZW5zIGZvciB0aGUgdXNlclxuICAgICAgICAgKi9cbiAgICAgICAgdXNlckFjY2Vzc1Rva2VuczogUHJvcFR5cGVzLm9iamVjdCxcblxuICAgICAgICAvKlxuICAgICAgICAgKiBTZXQgaWYgYWNjZXNzIHRva2VucyBhcmUgZW5hYmxlZCBhbmQgdGhpcyB1c2VyIGNhbiB1c2UgdGhlbVxuICAgICAgICAgKi9cbiAgICAgICAgY2FuVXNlQWNjZXNzVG9rZW5zOiBQcm9wVHlwZXMuYm9vbCxcblxuICAgICAgICBhY3Rpb25zOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgZ2V0TWU6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBGdW5jdGlvbiB0byBnZXQgcGVyc29uYWwgYWNjZXNzIHRva2VucyBmb3IgYSB1c2VyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldFVzZXJBY2Nlc3NUb2tlbnNGb3JVc2VyOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICogRnVuY3Rpb24gdG8gY3JlYXRlIGEgcGVyc29uYWwgYWNjZXNzIHRva2VuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNyZWF0ZVVzZXJBY2Nlc3NUb2tlbjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAqIEZ1bmN0aW9uIHRvIHJldm9rZSBhIHBlcnNvbmFsIGFjY2VzcyB0b2tlblxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByZXZva2VVc2VyQWNjZXNzVG9rZW46IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBGdW5jdGlvbiB0byBjbGVhciBwZXJzb25hbCBhY2Nlc3MgdG9rZW5zIGxvY2FsbHlcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY2xlYXJVc2VyQWNjZXNzVG9rZW5zOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkXG4gICAgICAgIH0pLmlzUmVxdWlyZWRcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuZ2V0RGVmYXVsdFN0YXRlKCk7XG4gICAgfVxuXG4gICAgZ2V0RGVmYXVsdFN0YXRlKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3VycmVudFBhc3N3b3JkOiAnJyxcbiAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiAnJyxcbiAgICAgICAgICAgIGNvbmZpcm1QYXNzd29yZDogJycsXG4gICAgICAgICAgICBwYXNzd29yZEVycm9yOiAnJyxcbiAgICAgICAgICAgIHNlcnZlckVycm9yOiAnJyxcbiAgICAgICAgICAgIHRva2VuRXJyb3I6ICcnLFxuICAgICAgICAgICAgc2hvd0NvbmZpcm1Nb2RhbDogZmFsc2UsXG4gICAgICAgICAgICBhdXRoU2VydmljZTogdGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSxcbiAgICAgICAgICAgIHNhdmluZ1Bhc3N3b3JkOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBpZiAoZ2xvYmFsLm1tX2NvbmZpZy5FbmFibGVPQXV0aFNlcnZpY2VQcm92aWRlciA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICBnZXRBdXRob3JpemVkQXBwcyhcbiAgICAgICAgICAgICAgICAoYXV0aG9yaXplZEFwcHMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YXV0aG9yaXplZEFwcHMsIHNlcnZlckVycm9yOiBudWxsfSk7IC8vZXNsaW50LWRpc2FibGUtbGluZSByZWFjdC9uby1kaWQtbW91bnQtc2V0LXN0YXRlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlcnZlckVycm9yOiBlcnIubWVzc2FnZX0pOyAvL2VzbGludC1kaXNhYmxlLWxpbmUgcmVhY3Qvbm8tZGlkLW1vdW50LXNldC1zdGF0ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5jYW5Vc2VBY2Nlc3NUb2tlbnMpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWN0aW9ucy5jbGVhclVzZXJBY2Nlc3NUb2tlbnMoKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IHRoaXMucHJvcHMudXNlciA/IHRoaXMucHJvcHMudXNlci5pZCA6ICcnO1xuICAgICAgICAgICAgdGhpcy5wcm9wcy5hY3Rpb25zLmdldFVzZXJBY2Nlc3NUb2tlbnNGb3JVc2VyKHVzZXJJZCwgMCwgMjAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN1Ym1pdFBhc3N3b3JkID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciB1c2VyID0gdGhpcy5wcm9wcy51c2VyO1xuICAgICAgICB2YXIgY3VycmVudFBhc3N3b3JkID0gdGhpcy5zdGF0ZS5jdXJyZW50UGFzc3dvcmQ7XG4gICAgICAgIHZhciBuZXdQYXNzd29yZCA9IHRoaXMuc3RhdGUubmV3UGFzc3dvcmQ7XG4gICAgICAgIHZhciBjb25maXJtUGFzc3dvcmQgPSB0aGlzLnN0YXRlLmNvbmZpcm1QYXNzd29yZDtcblxuICAgICAgICBpZiAoY3VycmVudFBhc3N3b3JkID09PSAnJykge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7cGFzc3dvcmRFcnJvcjogVXRpbHMubG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LmN1cnJlbnRQYXNzd29yZEVycm9yJywgJ1BsZWFzZSBlbnRlciB5b3VyIGN1cnJlbnQgcGFzc3dvcmQuJyksIHNlcnZlckVycm9yOiAnJ30pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFzc3dvcmRFcnIgPSBVdGlscy5pc1ZhbGlkUGFzc3dvcmQobmV3UGFzc3dvcmQpO1xuICAgICAgICBpZiAocGFzc3dvcmRFcnIgIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBwYXNzd29yZEVycm9yOiBwYXNzd29yZEVycixcbiAgICAgICAgICAgICAgICBzZXJ2ZXJFcnJvcjogJydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1Bhc3N3b3JkICE9PSBjb25maXJtUGFzc3dvcmQpIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0U3RhdGUgPSBPYmplY3QuYXNzaWduKHRoaXMuZ2V0RGVmYXVsdFN0YXRlKCksIHtwYXNzd29yZEVycm9yOiBVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ3VzZXIuc2V0dGluZ3Muc2VjdXJpdHkucGFzc3dvcmRNYXRjaEVycm9yJywgJ1RoZSBuZXcgcGFzc3dvcmRzIHlvdSBlbnRlcmVkIGRvIG5vdCBtYXRjaC4nKSwgc2VydmVyRXJyb3I6ICcnfSk7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKGRlZmF1bHRTdGF0ZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtzYXZpbmdQYXNzd29yZDogdHJ1ZX0pO1xuXG4gICAgICAgIHVwZGF0ZVBhc3N3b3JkKFxuICAgICAgICAgICAgdXNlci5pZCxcbiAgICAgICAgICAgIGN1cnJlbnRQYXNzd29yZCxcbiAgICAgICAgICAgIG5ld1Bhc3N3b3JkLFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5hY3Rpb25zLmdldE1lKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmdldERlZmF1bHRTdGF0ZSgpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5nZXREZWZhdWx0U3RhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuc2VydmVyRXJyb3IgPSBlcnIubWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zZXJ2ZXJFcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RhdGUucGFzc3dvcmRFcnJvciA9ICcnO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHNldHVwTWZhID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBicm93c2VySGlzdG9yeS5wdXNoKCcvbWZhL3NldHVwJyk7XG4gICAgfVxuXG4gICAgcmVtb3ZlTWZhID0gKCkgPT4ge1xuICAgICAgICBkZWFjdGl2YXRlTWZhKFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChnbG9iYWwud2luZG93Lm1tX2xpY2Vuc2UuTUZBID09PSAndHJ1ZScgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkVuYWJsZU11bHRpZmFjdG9yQXV0aGVudGljYXRpb24gPT09ICd0cnVlJyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuRW5mb3JjZU11bHRpZmFjdG9yQXV0aGVudGljYXRpb24gPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvbWZhL3NldHVwJztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLmdldERlZmF1bHRTdGF0ZSgpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmdldERlZmF1bHRTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChlcnIubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zZXJ2ZXJFcnJvciA9IGVyci5tZXNzYWdlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLnNlcnZlckVycm9yID0gZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICB1cGRhdGVDdXJyZW50UGFzc3dvcmQgPSAoZSkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtjdXJyZW50UGFzc3dvcmQ6IGUudGFyZ2V0LnZhbHVlfSk7XG4gICAgfVxuXG4gICAgdXBkYXRlTmV3UGFzc3dvcmQgPSAoZSkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtuZXdQYXNzd29yZDogZS50YXJnZXQudmFsdWV9KTtcbiAgICB9XG5cbiAgICB1cGRhdGVDb25maXJtUGFzc3dvcmQgPSAoZSkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtjb25maXJtUGFzc3dvcmQ6IGUudGFyZ2V0LnZhbHVlfSk7XG4gICAgfVxuXG4gICAgZGVhdXRob3JpemVBcHAgPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IGFwcElkID0gZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1hcHAnKTtcbiAgICAgICAgZGVhdXRob3JpemVPQXV0aEFwcChcbiAgICAgICAgICAgIGFwcElkLFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6ZWRBcHBzID0gdGhpcy5zdGF0ZS5hdXRob3JpemVkQXBwcy5maWx0ZXIoKGFwcCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBwLmlkICE9PSBhcHBJZDtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2F1dGhvcml6ZWRBcHBzLCBzZXJ2ZXJFcnJvcjogbnVsbH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtzZXJ2ZXJFcnJvcjogZXJyLm1lc3NhZ2V9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjcmVhdGVNZmFTZWN0aW9uID0gKCkgPT4ge1xuICAgICAgICBsZXQgdXBkYXRlU2VjdGlvblN0YXR1cztcbiAgICAgICAgbGV0IHN1Ym1pdDtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uID09PSAnbWZhJykge1xuICAgICAgICAgICAgbGV0IGNvbnRlbnQ7XG4gICAgICAgICAgICBsZXQgZXh0cmFJbmZvO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMudXNlci5tZmFfYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1mYVJlbW92ZUhlbHA7XG4gICAgICAgICAgICAgICAgbGV0IG1mYUJ1dHRvblRleHQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuRW5mb3JjZU11bHRpZmFjdG9yQXV0aGVudGljYXRpb24gPT09ICd0cnVlJykge1xuICAgICAgICAgICAgICAgICAgICBtZmFSZW1vdmVIZWxwID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5tZmEucmVxdWlyZWRIZWxwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdNdWx0aS1mYWN0b3IgYXV0aGVudGljYXRpb24gaXMgcmVxdWlyZWQgb24gdGhpcyBzZXJ2ZXIuIFJlc2V0dGluZyBpcyBvbmx5IHJlY29tbWVuZGVkIHdoZW4geW91IG5lZWQgdG8gc3dpdGNoIGNvZGUgZ2VuZXJhdGlvbiB0byBhIG5ldyBtb2JpbGUgZGV2aWNlLiBZb3Ugd2lsbCBiZSByZXF1aXJlZCB0byBzZXQgaXQgdXAgYWdhaW4gaW1tZWRpYXRlbHkuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBtZmFCdXR0b25UZXh0ID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5tZmEucmVzZXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1Jlc2V0IE1GQSBvbiB5b3VyIGFjY291bnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1mYVJlbW92ZUhlbHAgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm1mYS5yZW1vdmVIZWxwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdSZW1vdmluZyBtdWx0aS1mYWN0b3IgYXV0aGVudGljYXRpb24gbWVhbnMgeW91IHdpbGwgbm8gbG9uZ2VyIHJlcXVpcmUgYSBwaG9uZS1iYXNlZCBwYXNzY29kZSB0byBzaWduLWluIHRvIHlvdXIgYWNjb3VudC4nXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIG1mYUJ1dHRvblRleHQgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLm1mYS5yZW1vdmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1JlbW92ZSBNRkEgZnJvbSB5b3VyIGFjY291bnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PSdtZmFRckNvZGUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucmVtb3ZlTWZhfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttZmFCdXR0b25UZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGV4dHJhSW5mbyA9IChcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bWZhUmVtb3ZlSGVscH1cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PSdtZmFRckNvZGUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2V0dXBNZmF9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MubWZhLmFkZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0FkZCBNRkEgdG8geW91ciBhY2NvdW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgZXh0cmFJbmZvID0gKFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MubWZhLmFkZEhlbHAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0FkZGluZyBtdWx0aS1mYWN0b3IgYXV0aGVudGljYXRpb24gd2lsbCBtYWtlIHlvdXIgYWNjb3VudCBtb3JlIHNlY3VyZSBieSByZXF1aXJpbmcgYSBjb2RlIGZyb20geW91ciBtb2JpbGUgcGhvbmUgZWFjaCB0aW1lIHlvdSBzaWduIGluLidcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBbXTtcbiAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PSdtZmFTZXR0aW5nJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3BhZGRpbmctdG9wJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAge2NvbnRlbnR9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB1cGRhdGVTZWN0aW9uU3RhdHVzID0gZnVuY3Rpb24gcmVzZXRTZWN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlcnZlckVycm9yOiBudWxsfSk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1heFxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17VXRpbHMubG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLm1mYS50aXRsZScsICdNdWx0aS1mYWN0b3IgQXV0aGVudGljYXRpb24nKX1cbiAgICAgICAgICAgICAgICAgICAgaW5wdXRzPXtpbnB1dHN9XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhSW5mbz17ZXh0cmFJbmZvfVxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ9e3N1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXt0aGlzLnN0YXRlLnNlcnZlckVycm9yfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt1cGRhdGVTZWN0aW9uU3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICB3aWR0aD0nbWVkaXVtJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGRlc2NyaWJlO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy51c2VyLm1mYV9hY3RpdmUpIHtcbiAgICAgICAgICAgIGRlc2NyaWJlID0gVXRpbHMubG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LmFjdGl2ZScsICdBY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlc2NyaWJlID0gVXRpbHMubG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LmluYWN0aXZlJywgJ0luYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVTZWN0aW9uU3RhdHVzID0gZnVuY3Rpb24gdXBkYXRlU2VjdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbignbWZhJyk7XG4gICAgICAgIH0uYmluZCh0aGlzKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFNldHRpbmdJdGVtTWluXG4gICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgndXNlci5zZXR0aW5ncy5tZmEudGl0bGUnLCAnTXVsdGktZmFjdG9yIEF1dGhlbnRpY2F0aW9uJyl9XG4gICAgICAgICAgICAgICAgZGVzY3JpYmU9e2Rlc2NyaWJlfVxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3VwZGF0ZVNlY3Rpb25TdGF0dXN9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNyZWF0ZVBhc3N3b3JkU2VjdGlvbiA9ICgpID0+IHtcbiAgICAgICAgbGV0IHVwZGF0ZVNlY3Rpb25TdGF0dXM7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlU2VjdGlvbiA9PT0gJ3Bhc3N3b3JkJykge1xuICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gW107XG4gICAgICAgICAgICBsZXQgc3VibWl0O1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICBzdWJtaXQgPSB0aGlzLnN1Ym1pdFBhc3N3b3JkO1xuXG4gICAgICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT0nY3VycmVudFBhc3N3b3JkVXBkYXRlRm9ybSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nY29sLXNtLTUgY29udHJvbC1sYWJlbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Muc2VjdXJpdHkuY3VycmVudFBhc3N3b3JkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ3VycmVudCBQYXNzd29yZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdjdXJyZW50UGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdwYXNzd29yZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlQ3VycmVudFBhc3N3b3JkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5jdXJyZW50UGFzc3dvcmR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9J25ld1Bhc3N3b3JkVXBkYXRlRm9ybSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nY29sLXNtLTUgY29udHJvbC1sYWJlbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Muc2VjdXJpdHkubmV3UGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdOZXcgUGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTcnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nbmV3UGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdwYXNzd29yZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlTmV3UGFzc3dvcmR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm5ld1Bhc3N3b3JkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdyZXR5cGVOZXdQYXNzd29yZFVwZGF0ZUZvcm0nXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2Zvcm0tZ3JvdXAnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2NvbC1zbS01IGNvbnRyb2wtbGFiZWwnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LnJldHlwZVBhc3N3b3JkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nUmV0eXBlIE5ldyBQYXNzd29yZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tNyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdjb25maXJtUGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSdwYXNzd29yZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlQ29uZmlybVBhc3N3b3JkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5jb25maXJtUGFzc3dvcmR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnVzZXIuYXV0aF9zZXJ2aWNlID09PSBDb25zdGFudHMuR0lUTEFCX1NFUlZJQ0UpIHtcbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdvYXV0aEVtYWlsSW5mbydcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmctbGlzdF9faGludCBjb2wtc20tMTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LnBhc3N3b3JkR2l0bGFiQ2FudFVwZGF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIG9jY3VycyB0aHJvdWdoIEdpdExhYi4gUGFzc3dvcmQgY2Fubm90IGJlIHVwZGF0ZWQuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLkxEQVBfU0VSVklDRSkge1xuICAgICAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9J29hdXRoRW1haWxJbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmb3JtLWdyb3VwJ1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2V0dGluZy1saXN0X19oaW50IGNvbC1zbS0xMic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Muc2VjdXJpdHkucGFzc3dvcmRMZGFwQ2FudFVwZGF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIG9jY3VycyB0aHJvdWdoIEFEL0xEQVAuIFBhc3N3b3JkIGNhbm5vdCBiZSB1cGRhdGVkLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5TQU1MX1NFUlZJQ0UpIHtcbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdvYXV0aEVtYWlsSW5mbydcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmctbGlzdF9faGludCBjb2wtc20tMTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LnBhc3N3b3JkU2FtbENhbnRVcGRhdGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUaGlzIGZpZWxkIGlzIGhhbmRsZWQgdGhyb3VnaCB5b3VyIGxvZ2luIHByb3ZpZGVyLiBJZiB5b3Ugd2FudCB0byBjaGFuZ2UgaXQsIHlvdSBuZWVkIHRvIGRvIHNvIHRocm91Z2ggeW91ciBsb2dpbiBwcm92aWRlci4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnVzZXIuYXV0aF9zZXJ2aWNlID09PSBDb25zdGFudHMuR09PR0xFX1NFUlZJQ0UpIHtcbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdvYXV0aEVtYWlsSW5mbydcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmctbGlzdF9faGludCBjb2wtc20tMTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LnBhc3N3b3JkR29vZ2xlQ2FudFVwZGF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIG9jY3VycyB0aHJvdWdoIEdvb2dsZSBBcHBzLiBQYXNzd29yZCBjYW5ub3QgYmUgdXBkYXRlZC4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnVzZXIuYXV0aF9zZXJ2aWNlID09PSBDb25zdGFudHMuT0ZGSUNFMzY1X1NFUlZJQ0UpIHtcbiAgICAgICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdvYXV0aEVtYWlsSW5mbydcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1ncm91cCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmctbGlzdF9faGludCBjb2wtc20tMTInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LnBhc3N3b3JkT2ZmaWNlMzY1Q2FudFVwZGF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIG9jY3VycyB0aHJvdWdoIE9mZmljZSAzNjUuIFBhc3N3b3JkIGNhbm5vdCBiZSB1cGRhdGVkLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb25TdGF0dXMgPSBmdW5jdGlvbiByZXNldFNlY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y3VycmVudFBhc3N3b3JkOiAnJywgbmV3UGFzc3dvcmQ6ICcnLCBjb25maXJtUGFzc3dvcmQ6ICcnLCBzZXJ2ZXJFcnJvcjogbnVsbCwgcGFzc3dvcmRFcnJvcjogbnVsbH0pO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NYXhcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5zZWN1cml0eS5wYXNzd29yZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nUGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17aW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICBzdWJtaXQ9e3N1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgc2F2aW5nPXt0aGlzLnN0YXRlLnNhdmluZ1Bhc3N3b3JkfVxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJfZXJyb3I9e3RoaXMuc3RhdGUuc2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudF9lcnJvcj17dGhpcy5zdGF0ZS5wYXNzd29yZEVycm9yfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt1cGRhdGVTZWN0aW9uU3RhdHVzfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGRlc2NyaWJlO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnVzZXIuYXV0aF9zZXJ2aWNlID09PSAnJykge1xuICAgICAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKHRoaXMucHJvcHMudXNlci5sYXN0X3Bhc3N3b3JkX3VwZGF0ZSk7XG4gICAgICAgICAgICBjb25zdCBob3VyczEyID0gIVByZWZlcmVuY2VTdG9yZS5nZXRCb29sKENvbnN0YW50cy5QcmVmZXJlbmNlcy5DQVRFR09SWV9ESVNQTEFZX1NFVFRJTkdTLCBDb25zdGFudHMuUHJlZmVyZW5jZXMuVVNFX01JTElUQVJZX1RJTUUsIGZhbHNlKTtcblxuICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Muc2VjdXJpdHkubGFzdFVwZGF0ZWQnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdMYXN0IHVwZGF0ZWQge2RhdGV9IGF0IHt0aW1lfSdcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2R9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRheT0nMi1kaWdpdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg9J3Nob3J0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyPSdudW1lcmljJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRUaW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyMTI9e2hvdXJzMTJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXI9JzItZGlnaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZT0nMi1kaWdpdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5HSVRMQUJfU0VSVklDRSkge1xuICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Muc2VjdXJpdHkubG9naW5HaXRsYWInXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdMb2dpbiBkb25lIHRocm91Z2ggR2l0TGFiJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5MREFQX1NFUlZJQ0UpIHtcbiAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LmxvZ2luTGRhcCdcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIGRvbmUgdGhyb3VnaCBBRC9MREFQJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5TQU1MX1NFUlZJQ0UpIHtcbiAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LmxvZ2luU2FtbCdcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIGRvbmUgdGhyb3VnaCBTQU1MJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5HT09HTEVfU0VSVklDRSkge1xuICAgICAgICAgICAgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Muc2VjdXJpdHkubG9naW5Hb29nbGUnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdMb2dpbiBkb25lIHRocm91Z2ggR29vZ2xlIEFwcHMnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLk9GRklDRTM2NV9TRVJWSUNFKSB7XG4gICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5zZWN1cml0eS5sb2dpbk9mZmljZTM2NSdcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ2luIGRvbmUgdGhyb3VnaCBPZmZpY2UgMzY1J1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlU2VjdGlvblN0YXR1cyA9IGZ1bmN0aW9uIHVwZGF0ZVNlY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb24oJ3Bhc3N3b3JkJyk7XG4gICAgICAgIH0uYmluZCh0aGlzKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFNldHRpbmdJdGVtTWluXG4gICAgICAgICAgICAgICAgdGl0bGU9e1xuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Muc2VjdXJpdHkucGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nUGFzc3dvcmQnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlc2NyaWJlPXtkZXNjcmliZX1cbiAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt1cGRhdGVTZWN0aW9uU3RhdHVzfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjcmVhdGVTaWduSW5TZWN0aW9uID0gKCkgPT4ge1xuICAgICAgICBsZXQgdXBkYXRlU2VjdGlvblN0YXR1cztcbiAgICAgICAgY29uc3QgdXNlciA9IHRoaXMucHJvcHMudXNlcjtcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVTZWN0aW9uID09PSAnc2lnbmluJykge1xuICAgICAgICAgICAgbGV0IGVtYWlsT3B0aW9uO1xuICAgICAgICAgICAgbGV0IGdpdGxhYk9wdGlvbjtcbiAgICAgICAgICAgIGxldCBnb29nbGVPcHRpb247XG4gICAgICAgICAgICBsZXQgb2ZmaWNlMzY1T3B0aW9uO1xuICAgICAgICAgICAgbGV0IGxkYXBPcHRpb247XG4gICAgICAgICAgICBsZXQgc2FtbE9wdGlvbjtcblxuICAgICAgICAgICAgaWYgKHVzZXIuYXV0aF9zZXJ2aWNlID09PSAnJykge1xuICAgICAgICAgICAgICAgIGlmIChnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5FbmFibGVTaWduVXBXaXRoR2l0TGFiID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2l0bGFiT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3BhZGRpbmctYm90dG9tIHgyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89eycvY2xhaW0vZW1haWxfdG9fb2F1dGg/ZW1haWw9JyArIGVuY29kZVVSSUNvbXBvbmVudCh1c2VyLmVtYWlsKSArICcmb2xkX3R5cGU9JyArIHVzZXIuYXV0aF9zZXJ2aWNlICsgJyZuZXdfdHlwZT0nICsgQ29uc3RhbnRzLkdJVExBQl9TRVJWSUNFfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LnN3aXRjaEdpdGxhYidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTd2l0Y2ggdG8gdXNpbmcgR2l0TGFiIFNTTydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5FbmFibGVTaWduVXBXaXRoR29vZ2xlID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgZ29vZ2xlT3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3BhZGRpbmctYm90dG9tIHgyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89eycvY2xhaW0vZW1haWxfdG9fb2F1dGg/ZW1haWw9JyArIGVuY29kZVVSSUNvbXBvbmVudCh1c2VyLmVtYWlsKSArICcmb2xkX3R5cGU9JyArIHVzZXIuYXV0aF9zZXJ2aWNlICsgJyZuZXdfdHlwZT0nICsgQ29uc3RhbnRzLkdPT0dMRV9TRVJWSUNFfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LnN3aXRjaEdvb2dsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTd2l0Y2ggdG8gdXNpbmcgR29vZ2xlIFNTTydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5FbmFibGVTaWduVXBXaXRoT2ZmaWNlMzY1ID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgb2ZmaWNlMzY1T3B0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3BhZGRpbmctYm90dG9tIHgyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89eycvY2xhaW0vZW1haWxfdG9fb2F1dGg/ZW1haWw9JyArIGVuY29kZVVSSUNvbXBvbmVudCh1c2VyLmVtYWlsKSArICcmb2xkX3R5cGU9JyArIHVzZXIuYXV0aF9zZXJ2aWNlICsgJyZuZXdfdHlwZT0nICsgQ29uc3RhbnRzLk9GRklDRTM2NV9TRVJWSUNFfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LnN3aXRjaE9mZmljZTM2NSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTd2l0Y2ggdG8gdXNpbmcgT2ZmaWNlIDM2NSBTU08nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZ2xvYmFsLndpbmRvdy5tbV9jb25maWcuRW5hYmxlTGRhcCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGxkYXBPcHRpb24gPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncGFkZGluZy1ib3R0b20geDInPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYnRuIGJ0bi1wcmltYXJ5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17Jy9jbGFpbS9lbWFpbF90b19sZGFwP2VtYWlsPScgKyBlbmNvZGVVUklDb21wb25lbnQodXNlci5lbWFpbCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Muc2VjdXJpdHkuc3dpdGNoTGRhcCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTd2l0Y2ggdG8gdXNpbmcgQUQvTERBUCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChnbG9iYWwud2luZG93Lm1tX2NvbmZpZy5FbmFibGVTYW1sID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgc2FtbE9wdGlvbiA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYWRkaW5nLWJvdHRvbSB4Mic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPExpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdidG4gYnRuLXByaW1hcnknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPXsnL2NsYWltL2VtYWlsX3RvX29hdXRoP2VtYWlsPScgKyBlbmNvZGVVUklDb21wb25lbnQodXNlci5lbWFpbCkgKyAnJm9sZF90eXBlPScgKyB1c2VyLmF1dGhfc2VydmljZSArICcmbmV3X3R5cGU9JyArIENvbnN0YW50cy5TQU1MX1NFUlZJQ0V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3Muc2VjdXJpdHkuc3dpdGNoU2FtbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTd2l0Y2ggdG8gdXNpbmcgU0FNTCBTU08nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGdsb2JhbC53aW5kb3cubW1fY29uZmlnLkVuYWJsZVNpZ25VcFdpdGhFbWFpbCA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgbGV0IGxpbms7XG4gICAgICAgICAgICAgICAgaWYgKHVzZXIuYXV0aF9zZXJ2aWNlID09PSBDb25zdGFudHMuTERBUF9TRVJWSUNFKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmsgPSAnL2NsYWltL2xkYXBfdG9fZW1haWw/ZW1haWw9JyArIGVuY29kZVVSSUNvbXBvbmVudCh1c2VyLmVtYWlsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsaW5rID0gJy9jbGFpbS9vYXV0aF90b19lbWFpbD9lbWFpbD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHVzZXIuZW1haWwpICsgJyZvbGRfdHlwZT0nICsgdXNlci5hdXRoX3NlcnZpY2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZW1haWxPcHRpb24gPSAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYWRkaW5nLWJvdHRvbSB4Mic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8TGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYnRuIGJ0bi1wcmltYXJ5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvPXtsaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LnN3aXRjaEVtYWlsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU3dpdGNoIHRvIHVzaW5nIGVtYWlsIGFuZCBwYXNzd29yZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gW107XG4gICAgICAgICAgICBpbnB1dHMucHVzaChcbiAgICAgICAgICAgICAgICA8ZGl2IGtleT0ndXNlclNpZ25Jbk9wdGlvbic+XG4gICAgICAgICAgICAgICAgICAgIHtlbWFpbE9wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAge2dpdGxhYk9wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAge2dvb2dsZU9wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAge29mZmljZTM2NU9wdGlvbn1cbiAgICAgICAgICAgICAgICAgICAge2xkYXBPcHRpb259XG4gICAgICAgICAgICAgICAgICAgIHtzYW1sT3B0aW9ufVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdXBkYXRlU2VjdGlvblN0YXR1cyA9IGZ1bmN0aW9uIHVwZGF0ZVNlY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VydmVyRXJyb3I6IG51bGx9KTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGV4dHJhSW5mbyA9IChcbiAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5Lm9uZVNpZ25pbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdZb3UgbWF5IG9ubHkgaGF2ZSBvbmUgc2lnbi1pbiBtZXRob2QgYXQgYSB0aW1lLiBTd2l0Y2hpbmcgc2lnbi1pbiBtZXRob2Qgd2lsbCBzZW5kIGFuIGVtYWlsIG5vdGlmeWluZyB5b3UgaWYgdGhlIGNoYW5nZSB3YXMgc3VjY2Vzc2Z1bC4nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NYXhcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgndXNlci5zZXR0aW5ncy5zZWN1cml0eS5tZXRob2QnLCAnU2lnbi1pbiBNZXRob2QnKX1cbiAgICAgICAgICAgICAgICAgICAgZXh0cmFJbmZvPXtleHRyYUluZm99XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17aW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJfZXJyb3I9e3RoaXMuc3RhdGUuc2VydmVyRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3VwZGF0ZVNlY3Rpb25TdGF0dXN9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVTZWN0aW9uU3RhdHVzID0gZnVuY3Rpb24gdXBkYXRlU2VjdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbignc2lnbmluJyk7XG4gICAgICAgIH0uYmluZCh0aGlzKTtcblxuICAgICAgICBsZXQgZGVzY3JpYmUgPSAoXG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LmVtYWlsUHdkJ1xuICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdFbWFpbCBhbmQgUGFzc3dvcmQnXG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLkdJVExBQl9TRVJWSUNFKSB7XG4gICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5zZWN1cml0eS5naXRsYWInXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdHaXRMYWInXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLkdPT0dMRV9TRVJWSUNFKSB7XG4gICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5zZWN1cml0eS5nb29nbGUnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdHb29nbGUnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy51c2VyLmF1dGhfc2VydmljZSA9PT0gQ29uc3RhbnRzLk9GRklDRTM2NV9TRVJWSUNFKSB7XG4gICAgICAgICAgICBkZXNjcmliZSA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5zZWN1cml0eS5vZmZpY2UzNjUnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdPZmZpY2UgMzY1J1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5MREFQX1NFUlZJQ0UpIHtcbiAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LmxkYXAnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdBRC9MREFQJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMudXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5TQU1MX1NFUlZJQ0UpIHtcbiAgICAgICAgICAgIGRlc2NyaWJlID0gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LnNhbWwnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTQU1MJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1pblxuICAgICAgICAgICAgICAgIHRpdGxlPXtVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ3VzZXIuc2V0dGluZ3Muc2VjdXJpdHkubWV0aG9kJywgJ1NpZ24taW4gTWV0aG9kJyl9XG4gICAgICAgICAgICAgICAgZGVzY3JpYmU9e2Rlc2NyaWJlfVxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3VwZGF0ZVNlY3Rpb25TdGF0dXN9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNyZWF0ZU9BdXRoQXBwc1NlY3Rpb24gPSAoKSA9PiB7XG4gICAgICAgIGxldCB1cGRhdGVTZWN0aW9uU3RhdHVzO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb24gPT09ICdhcHBzJykge1xuICAgICAgICAgICAgbGV0IGFwcHM7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5hdXRob3JpemVkQXBwcyAmJiB0aGlzLnN0YXRlLmF1dGhvcml6ZWRBcHBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBhcHBzID0gdGhpcy5zdGF0ZS5hdXRob3JpemVkQXBwcy5tYXAoKGFwcCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBob21lcGFnZSA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj17YXBwLmhvbWVwYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD0nX2JsYW5rJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbD0nbm9vcGVuZXIgbm9yZWZlcnJlcidcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXBwLmhvbWVwYWdlfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXthcHAuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdwYWRkaW5nLWJvdHRvbSB4MiBhdXRob3JpemVkLWFwcCdcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTEwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2F1dGhvcml6ZWQtYXBwX19uYW1lJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthcHAubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nYXV0aG9yaXplZC1hcHBfX3VybCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeycgLSd9IHtob21lcGFnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhdXRob3JpemVkLWFwcF9fZGVzY3JpcHRpb24nPnthcHAuZGVzY3JpcHRpb259PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhdXRob3JpemVkLWFwcF9fZGVhdXRob3JpemUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtYXBwPXthcHAuaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5kZWF1dGhvcml6ZUFwcH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5zZWN1cml0eS5kZWF1dGhvcml6ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0RlYXV0aG9yaXplJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjb2wtc20tMiBwdWxsLXJpZ2h0Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXthcHAubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17YXBwLmljb25fdXJsIHx8IGljb241MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFwcHMgPSAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYWRkaW5nLWJvdHRvbSB4MiBhdXRob3JpemVkLWFwcCc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2V0dGluZy1saXN0X19oaW50Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5zZWN1cml0eS5ub0FwcHMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdObyBPQXV0aCAyLjAgQXBwbGljYXRpb25zIGFyZSBhdXRob3JpemVkLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGlucHV0cyA9IFtdO1xuICAgICAgICAgICAgbGV0IHdyYXBwZXJDbGFzcztcbiAgICAgICAgICAgIGxldCBoZWxwVGV4dDtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFwcHMpKSB7XG4gICAgICAgICAgICAgICAgd3JhcHBlckNsYXNzID0gJ2F1dGhvcml6ZWQtYXBwc19fd3JhcHBlcic7XG5cbiAgICAgICAgICAgICAgICBoZWxwVGV4dCA9IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2F1dGhvcml6ZWQtYXBwc19faGVscCc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5Lm9hdXRoQXBwc0hlbHAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0FwcGxpY2F0aW9ucyBhY3Qgb24geW91ciBiZWhhbGYgdG8gYWNjZXNzIHlvdXIgZGF0YSBiYXNlZCBvbiB0aGUgcGVybWlzc2lvbnMgeW91IGdyYW50IHRoZW0uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5wdXRzLnB1c2goXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3dyYXBwZXJDbGFzc31cbiAgICAgICAgICAgICAgICAgICAga2V5PSdhdXRob3JpemVkQXBwcydcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHthcHBzfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdXBkYXRlU2VjdGlvblN0YXR1cyA9IGZ1bmN0aW9uIHVwZGF0ZVNlY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMudXBkYXRlU2VjdGlvbignJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VydmVyRXJyb3I6IG51bGx9KTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gKFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5zZWN1cml0eS5vYXV0aEFwcHMnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nT0F1dGggMi4wIEFwcGxpY2F0aW9ucydcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAge2hlbHBUZXh0fVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8U2V0dGluZ0l0ZW1NYXhcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dHM9e2lucHV0c31cbiAgICAgICAgICAgICAgICAgICAgc2VydmVyX2Vycm9yPXt0aGlzLnN0YXRlLnNlcnZlckVycm9yfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVTZWN0aW9uPXt1cGRhdGVTZWN0aW9uU3RhdHVzfVxuICAgICAgICAgICAgICAgICAgICB3aWR0aD0nZnVsbCdcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dD17XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LmNsb3NlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZVNlY3Rpb25TdGF0dXMgPSBmdW5jdGlvbiB1cGRhdGVTZWN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVTZWN0aW9uKCdhcHBzJyk7XG4gICAgICAgIH0uYmluZCh0aGlzKTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFNldHRpbmdJdGVtTWluXG4gICAgICAgICAgICAgICAgdGl0bGU9e1V0aWxzLmxvY2FsaXplTWVzc2FnZSgndXNlci5zZXR0aW5ncy5zZWN1cml0eS5vYXV0aEFwcHMnLCAnT0F1dGggMi4wIEFwcGxpY2F0aW9ucycpfVxuICAgICAgICAgICAgICAgIGRlc2NyaWJlPXtcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5Lm9hdXRoQXBwc0Rlc2NyaXB0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9XCJDbGljayAnRWRpdCcgdG8gbWFuYWdlIHlvdXIgT0F1dGggMi4wIEFwcGxpY2F0aW9uc1wiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3VwZGF0ZVNlY3Rpb25TdGF0dXN9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHN0YXJ0Q3JlYXRpbmdUb2tlbiA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dG9rZW5DcmVhdGlvblN0YXRlOiBUT0tFTl9DUkVBVElOR30pO1xuICAgIH1cblxuICAgIHN0b3BDcmVhdGluZ1Rva2VuID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHt0b2tlbkNyZWF0aW9uU3RhdGU6IFRPS0VOX05PVF9DUkVBVElOR30pO1xuICAgIH1cblxuICAgIGhhbmRsZUNyZWF0ZVRva2VuID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUNhbmNlbENvbmZpcm0oKTtcblxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMucmVmcy5uZXd0b2tlbmRlc2NyaXB0aW9uID8gdGhpcy5yZWZzLm5ld3Rva2VuZGVzY3JpcHRpb24udmFsdWUgOiAnJztcblxuICAgICAgICBpZiAoZGVzY3JpcHRpb24gPT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHt0b2tlbkVycm9yOiBVdGlscy5sb2NhbGl6ZU1lc3NhZ2UoJ3VzZXIuc2V0dGluZ3MudG9rZW5zLm5hbWVSZXF1aXJlZCcsICdQbGVhc2UgZW50ZXIgYSBkZXNjcmlwdGlvbi4nKX0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7dG9rZW5FcnJvcjogJyd9KTtcblxuICAgICAgICBjb25zdCB1c2VySWQgPSB0aGlzLnByb3BzLnVzZXIgPyB0aGlzLnByb3BzLnVzZXIuaWQgOiAnJztcbiAgICAgICAgY29uc3Qge2RhdGEsIGVycm9yfSA9IGF3YWl0IHRoaXMucHJvcHMuYWN0aW9ucy5jcmVhdGVVc2VyQWNjZXNzVG9rZW4odXNlcklkLCBkZXNjcmlwdGlvbik7XG5cbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3Rva2VuQ3JlYXRpb25TdGF0ZTogVE9LRU5fQ1JFQVRFRCwgbmV3VG9rZW46IGRhdGF9KTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2VydmVyRXJyb3I6IGVycm9yLm1lc3NhZ2V9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUNhbmNlbENvbmZpcm0gPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvd0NvbmZpcm1Nb2RhbDogZmFsc2UsXG4gICAgICAgICAgICBjb25maXJtVGl0bGU6IG51bGwsXG4gICAgICAgICAgICBjb25maXJtTWVzc2FnZTogbnVsbCxcbiAgICAgICAgICAgIGNvbmZpcm1CdXR0b246IG51bGwsXG4gICAgICAgICAgICBjb25maXJtQ29tcGxldGU6IG51bGxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uZmlybUNyZWF0ZVRva2VuID0gKCkgPT4ge1xuICAgICAgICBpZiAoVXNlclV0aWxzLmlzU3lzdGVtQWRtaW4odGhpcy5wcm9wcy51c2VyLnJvbGVzKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1Nb2RhbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maXJtVGl0bGU6IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnRva2Vucy5jb25maXJtQ3JlYXRlVGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ3JlYXRlIFN5c3RlbSBBZG1pbiBQZXJzb25hbCBBY2Nlc3MgVG9rZW4nXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBjb25maXJtTWVzc2FnZTogKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYWxlcnQgYWxlcnQtZGFuZ2VyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRIVE1MTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnRva2Vucy5jb25maXJtQ3JlYXRlTWVzc2FnZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nWW91IGFyZSBnZW5lcmF0aW5nIGEgcGVyc29uYWwgYWNjZXNzIHRva2VuIHdpdGggU3lzdGVtIEFkbWluIHBlcm1pc3Npb25zLiBBcmUgeW91IHN1cmUgd2FudCB0byBjcmVhdGUgdGhpcyB0b2tlbj8nXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b246IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnRva2Vucy5jb25maXJtQ3JlYXRlQnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1llcywgQ3JlYXRlJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgY29uZmlybUNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQ3JlYXRlVG9rZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tFdmVudCgnc2V0dGluZ3MnLCAnc3lzdGVtX2FkbWluX2NyZWF0ZV91c2VyX2FjY2Vzc190b2tlbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhhbmRsZUNyZWF0ZVRva2VuKCk7XG4gICAgfVxuXG4gICAgc2F2ZVRva2VuS2V5UHJlc3MgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoZS53aGljaCA9PT0gQ29uc3RhbnRzLktleUNvZGVzLkVOVEVSKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpcm1DcmVhdGVUb2tlbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uZmlybVJldm9rZVRva2VuID0gKHRva2VuSWQpID0+IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLnByb3BzLnVzZXJBY2Nlc3NUb2tlbnNbdG9rZW5JZF07XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93Q29uZmlybU1vZGFsOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlybVRpdGxlOiAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MudG9rZW5zLmNvbmZpcm1EZWxldGVUaXRsZSdcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0RlbGV0ZSBUb2tlbj8nXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjb25maXJtTWVzc2FnZTogKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhbGVydCBhbGVydC1kYW5nZXInPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkSFRNTE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnRva2Vucy5jb25maXJtRGVsZXRlTWVzc2FnZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdBbnkgaW50ZWdyYXRpb25zIHVzaW5nIHRoaXMgdG9rZW4gd2lsbCBubyBsb25nZXIgYmUgYWJsZSB0byBhY2Nlc3MgdGhlIE1hdHRlcm1vc3QgQVBJLiBZb3UgY2Fubm90IHVuZG8gdGhpcyBhY3Rpb24uIDxiciAvPjxiciAvPkFyZSB5b3Ugc3VyZSB3YW50IHRvIGRlbGV0ZSB0aGUge2Rlc2NyaXB0aW9ufSB0b2tlbj8nXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdG9rZW4uZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY29uZmlybUJ1dHRvbjogKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnRva2Vucy5jb25maXJtRGVsZXRlQnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nWWVzLCBEZWxldGUnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjb25maXJtQ29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJldm9rZVRva2VuKHRva2VuSWQpO1xuICAgICAgICAgICAgICAgIHRyYWNrRXZlbnQoJ3NldHRpbmdzJywgJ3Jldm9rZV91c2VyX2FjY2Vzc190b2tlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXZva2VUb2tlbiA9IGFzeW5jICh0b2tlbklkKSA9PiB7XG4gICAgICAgIGNvbnN0IHtlcnJvcn0gPSBhd2FpdCB0aGlzLnByb3BzLmFjdGlvbnMucmV2b2tlVXNlckFjY2Vzc1Rva2VuKHRva2VuSWQpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3NlcnZlckVycm9yOiBlcnJvci5tZXNzYWdlfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVDYW5jZWxDb25maXJtKCk7XG4gICAgfVxuXG4gICAgY3JlYXRlVG9rZW5zU2VjdGlvbiA9ICgpID0+IHtcbiAgICAgICAgbGV0IHVwZGF0ZVNlY3Rpb25TdGF0dXM7XG4gICAgICAgIGxldCB0b2tlbkxpc3RDbGFzcyA9ICcnO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLmFjdGl2ZVNlY3Rpb24gPT09ICd0b2tlbnMnKSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbkxpc3QgPSBbXTtcbiAgICAgICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5wcm9wcy51c2VyQWNjZXNzVG9rZW5zKS5mb3JFYWNoKCh0b2tlbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLm5ld1Rva2VuICYmIHRoaXMuc3RhdGUubmV3VG9rZW4uaWQgPT09IHRva2VuLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0b2tlbkxpc3QucHVzaChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXt0b2tlbi5pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2V0dGluZy1ib3hfX2l0ZW0nXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3aGl0ZXNwYWNlLS1ub3dyYXAgb3ZlcmZsb3ctLWVsbGlwc2lzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy50b2tlbnMudG9rZW5EZXNjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVG9rZW4gRGVzY3JpcHRpb246ICdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0b2tlbi5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3NldHRpbmctYm94X190b2tlbi1pZCB3aGl0ZXNwYWNlLS1ub3dyYXAgb3ZlcmZsb3ctLWVsbGlwc2lzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy50b2tlbnMudG9rZW5JZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1Rva2VuIElEOiAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dG9rZW4uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17dG9rZW4uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9JyMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpcm1SZXZva2VUb2tlbih0b2tlbi5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MudG9rZW5zLmRlbGV0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdEZWxldGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aHIgY2xhc3NOYW1lPSdtYXJnaW4tYm90dG9tIG1hcmdpbi10b3AgeDInLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgbm9Ub2tlblRleHQ7XG4gICAgICAgICAgICBpZiAodG9rZW5MaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5vVG9rZW5UZXh0ID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PSdub3Rva2VucydcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnRva2Vucy51c2VyQWNjZXNzVG9rZW5zTm9uZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdObyBwZXJzb25hbCBhY2Nlc3MgdG9rZW5zLidcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgZXh0cmFJbmZvO1xuICAgICAgICAgICAgaWYgKGlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgICAgICBleHRyYUluZm8gPSAoXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZEhUTUxNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MudG9rZW5zLmRlc2NyaXB0aW9uX21vYmlsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nPGEgaHJlZj1cImh0dHBzOi8vYWJvdXQubWF0dGVybW9zdC5jb20vZGVmYXVsdC11c2VyLWFjY2Vzcy10b2tlbnNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5QZXJzb25hbCBhY2Nlc3MgdG9rZW5zPC9hPiBmdW5jdGlvbiBzaW1pbGFyIHRvIHNlc3Npb24gdG9rZW5zIGFuZCBjYW4gYmUgdXNlZCBieSBpbnRlZ3JhdGlvbnMgdG8gPGEgaHJlZj1cImh0dHBzOi8vYWJvdXQubWF0dGVybW9zdC5jb20vZGVmYXVsdC1hcGktYXV0aGVudGljYXRpb25cIiB0YXJnZXQ9XCJfYmxhbmtcIj5hdXRoZW50aWNhdGUgYWdhaW5zdCB0aGUgUkVTVCBBUEk8L2E+LiBDcmVhdGUgbmV3IHRva2VucyBvbiB5b3VyIGRlc2t0b3AuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV4dHJhSW5mbyA9IChcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkSFRNTE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy50b2tlbnMuZGVzY3JpcHRpb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9JzxhIGhyZWY9XCJodHRwczovL2Fib3V0Lm1hdHRlcm1vc3QuY29tL2RlZmF1bHQtdXNlci1hY2Nlc3MtdG9rZW5zXCIgdGFyZ2V0PVwiX2JsYW5rXCI+UGVyc29uYWwgYWNjZXNzIHRva2VuczwvYT4gZnVuY3Rpb24gc2ltaWxhciB0byBzZXNzaW9uIHRva2VucyBhbmQgY2FuIGJlIHVzZWQgYnkgaW50ZWdyYXRpb25zIHRvIDxhIGhyZWY9XCJodHRwczovL2Fib3V0Lm1hdHRlcm1vc3QuY29tL2RlZmF1bHQtYXBpLWF1dGhlbnRpY2F0aW9uXCIgdGFyZ2V0PVwiX2JsYW5rXCI+YXV0aGVudGljYXRlIGFnYWluc3QgdGhlIFJFU1QgQVBJPC9hPi4nXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IG5ld1Rva2VuU2VjdGlvbjtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLnRva2VuQ3JlYXRpb25TdGF0ZSA9PT0gVE9LRU5fQ1JFQVRJTkcpIHtcbiAgICAgICAgICAgICAgICBuZXdUb2tlblNlY3Rpb24gPSAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYWRkaW5nLWxlZnQgeDInPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jvdyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0nY29sLXNtLWF1dG8gY29udHJvbC1sYWJlbCBwYWRkaW5nLXJpZ2h0IHgyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnRva2Vucy5uYW1lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1Rva2VuIERlc2NyaXB0aW9uOiAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY29sLXNtLTUnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0nbmV3dG9rZW5kZXNjcmlwdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nZm9ybS1jb250cm9sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heExlbmd0aD17NjR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleVByZXNzPXt0aGlzLnNhdmVUb2tlbktleVByZXNzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYWRkaW5nLXRvcCB4Mic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy50b2tlbnMubmFtZUhlbHAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRW50ZXIgYSBkZXNjcmlwdGlvbiBmb3IgeW91ciB0b2tlbiB0byByZW1lbWJlciB3aGF0IGl0IGRvZXMuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2NsaWVudEVycm9yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdoYXMtZXJyb3IgbWFyZ2luLXRvcCBtYXJnaW4tYm90dG9tJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS50b2tlbkVycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdidG4gYnRuLXByaW1hcnknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY29uZmlybUNyZWF0ZVRva2VufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnRva2Vucy5zYXZlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1NhdmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tZGVmYXVsdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zdG9wQ3JlYXRpbmdUb2tlbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy50b2tlbnMuY2FuY2VsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0NhbmNlbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLnRva2VuQ3JlYXRpb25TdGF0ZSA9PT0gVE9LRU5fQ1JFQVRFRCkge1xuICAgICAgICAgICAgICAgIGlmICh0b2tlbkxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuTGlzdENsYXNzID0gJyBoaWRkZW4nO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG5ld1Rva2VuU2VjdGlvbiA9IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdhbGVydCBhbGVydC13YXJuaW5nJ1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLXdhcm5pbmcgbWFyZ2luLXJpZ2h0Jy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnRva2Vucy5jb3B5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPVwiUGxlYXNlIGNvcHkgdGhlIGFjY2VzcyB0b2tlbiBiZWxvdy4gWW91IHdvbid0IGJlIGFibGUgdG8gc2VlIGl0IGFnYWluIVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nd2hpdGVzcGFjZS0tbm93cmFwIG92ZXJmbG93LS1lbGxpcHNpcyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MudG9rZW5zLm5hbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUb2tlbiBEZXNjcmlwdGlvbjogJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUubmV3VG9rZW4uZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3aGl0ZXNwYWNlLS1ub3dyYXAgb3ZlcmZsb3ctLWVsbGlwc2lzJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy50b2tlbnMuaWQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUb2tlbiBJRDogJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUubmV3VG9rZW4uaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmcgY2xhc3NOYW1lPSd3b3JkLWJyZWFrLS1hbGwnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnRva2Vucy50b2tlbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0FjY2VzcyBUb2tlbjogJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUubmV3VG9rZW4udG9rZW59XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3VG9rZW5TZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICA8YVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdidG4gYnRuLXByaW1hcnknXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5zdGFydENyZWF0aW5nVG9rZW59XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3VzZXIuc2V0dGluZ3MudG9rZW5zLmNyZWF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ3JlYXRlIE5ldyBUb2tlbidcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBbXTtcbiAgICAgICAgICAgIGlucHV0cy5wdXNoKFxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAga2V5PSd0b2tlbnNTZXR0aW5nJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3BhZGRpbmctdG9wJ1xuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9J3Rva2VuTGlzdCc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17J2FsZXJ0IGFsZXJ0LXRyYW5zcGFyZW50JyArIHRva2VuTGlzdENsYXNzfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dG9rZW5MaXN0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtub1Rva2VuVGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAge25ld1Rva2VuU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB1cGRhdGVTZWN0aW9uU3RhdHVzID0gZnVuY3Rpb24gcmVzZXRTZWN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnVwZGF0ZVNlY3Rpb24oJycpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe25ld1Rva2VuOiBudWxsLCB0b2tlbkNyZWF0aW9uU3RhdGU6IFRPS0VOX05PVF9DUkVBVElORywgc2VydmVyRXJyb3I6IG51bGwsIHRva2VuRXJyb3I6ICcnfSk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxTZXR0aW5nSXRlbU1heFxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17VXRpbHMubG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLnRva2Vucy50aXRsZScsICdQZXJzb25hbCBBY2Nlc3MgVG9rZW5zJyl9XG4gICAgICAgICAgICAgICAgICAgIGlucHV0cz17aW5wdXRzfVxuICAgICAgICAgICAgICAgICAgICBleHRyYUluZm89e2V4dHJhSW5mb31cbiAgICAgICAgICAgICAgICAgICAgaW5mb1Bvc2l0aW9uPSd0b3AnXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcl9lcnJvcj17dGhpcy5zdGF0ZS5zZXJ2ZXJFcnJvcn1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2VjdGlvbj17dXBkYXRlU2VjdGlvblN0YXR1c31cbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9J2Z1bGwnXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ9e1xuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5zZWN1cml0eS5jbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ2xvc2UnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZXNjcmliZSA9IFV0aWxzLmxvY2FsaXplTWVzc2FnZSgndXNlci5zZXR0aW5ncy50b2tlbnMuY2xpY2tUb0VkaXQnLCBcIkNsaWNrICdFZGl0JyB0byBtYW5hZ2UgeW91ciBwZXJzb25hbCBhY2Nlc3MgdG9rZW5zXCIpO1xuXG4gICAgICAgIHVwZGF0ZVNlY3Rpb25TdGF0dXMgPSBmdW5jdGlvbiB1cGRhdGVTZWN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVTZWN0aW9uKCd0b2tlbnMnKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8U2V0dGluZ0l0ZW1NaW5cbiAgICAgICAgICAgICAgICB0aXRsZT17VXRpbHMubG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLnRva2Vucy50aXRsZScsICdQZXJzb25hbCBBY2Nlc3MgVG9rZW5zJyl9XG4gICAgICAgICAgICAgICAgZGVzY3JpYmU9e2Rlc2NyaWJlfVxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlY3Rpb249e3VwZGF0ZVNlY3Rpb25TdGF0dXN9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgdXNlciA9IHRoaXMucHJvcHMudXNlcjtcbiAgICAgICAgY29uc3QgY29uZmlnID0gd2luZG93Lm1tX2NvbmZpZztcblxuICAgICAgICBjb25zdCBwYXNzd29yZFNlY3Rpb24gPSB0aGlzLmNyZWF0ZVBhc3N3b3JkU2VjdGlvbigpO1xuXG4gICAgICAgIGxldCBudW1NZXRob2RzID0gMDtcbiAgICAgICAgbnVtTWV0aG9kcyA9IGNvbmZpZy5FbmFibGVTaWduVXBXaXRoR2l0TGFiID09PSAndHJ1ZScgPyBudW1NZXRob2RzICsgMSA6IG51bU1ldGhvZHM7XG4gICAgICAgIG51bU1ldGhvZHMgPSBjb25maWcuRW5hYmxlU2lnblVwV2l0aEdvb2dsZSA9PT0gJ3RydWUnID8gbnVtTWV0aG9kcyArIDEgOiBudW1NZXRob2RzO1xuICAgICAgICBudW1NZXRob2RzID0gY29uZmlnLkVuYWJsZUxkYXAgPT09ICd0cnVlJyA/IG51bU1ldGhvZHMgKyAxIDogbnVtTWV0aG9kcztcbiAgICAgICAgbnVtTWV0aG9kcyA9IGNvbmZpZy5FbmFibGVTYW1sID09PSAndHJ1ZScgPyBudW1NZXRob2RzICsgMSA6IG51bU1ldGhvZHM7XG5cbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG90aGVyIHNpZ24taW4gbWV0aG9kcyBhbmQgZWl0aGVyIGVtYWlsIGlzIGVuYWJsZWQgb3IgdGhlIHVzZXIncyBhY2NvdW50IGlzIGVtYWlsLCB0aGVuIGFsbG93IHN3aXRjaGluZ1xuICAgICAgICBsZXQgc2lnbkluU2VjdGlvbjtcbiAgICAgICAgaWYgKChjb25maWcuRW5hYmxlU2lnblVwV2l0aEVtYWlsID09PSAndHJ1ZScgfHwgdXNlci5hdXRoX3NlcnZpY2UgPT09ICcnKSAmJiBudW1NZXRob2RzID4gMCkge1xuICAgICAgICAgICAgc2lnbkluU2VjdGlvbiA9IHRoaXMuY3JlYXRlU2lnbkluU2VjdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1mYVNlY3Rpb247XG4gICAgICAgIGlmIChjb25maWcuRW5hYmxlTXVsdGlmYWN0b3JBdXRoZW50aWNhdGlvbiA9PT0gJ3RydWUnICYmXG4gICAgICAgICAgICAgICAgZ2xvYmFsLndpbmRvdy5tbV9saWNlbnNlLklzTGljZW5zZWQgPT09ICd0cnVlJyAmJlxuICAgICAgICAgICAgICAgICh1c2VyLmF1dGhfc2VydmljZSA9PT0gJycgfHwgdXNlci5hdXRoX3NlcnZpY2UgPT09IENvbnN0YW50cy5MREFQX1NFUlZJQ0UpKSB7XG4gICAgICAgICAgICBtZmFTZWN0aW9uID0gdGhpcy5jcmVhdGVNZmFTZWN0aW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgb2F1dGhTZWN0aW9uO1xuICAgICAgICBpZiAoY29uZmlnLkVuYWJsZU9BdXRoU2VydmljZVByb3ZpZGVyID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIG9hdXRoU2VjdGlvbiA9IHRoaXMuY3JlYXRlT0F1dGhBcHBzU2VjdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRva2Vuc1NlY3Rpb247XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmNhblVzZUFjY2Vzc1Rva2Vucykge1xuICAgICAgICAgICAgdG9rZW5zU2VjdGlvbiA9IHRoaXMuY3JlYXRlVG9rZW5zU2VjdGlvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J21vZGFsLWhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J2J1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY2xvc2UnXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWRpc21pc3M9J21vZGFsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD17VXRpbHMubG9jYWxpemVNZXNzYWdlKCd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LmNsb3NlJywgJ0Nsb3NlJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLmNsb3NlTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPSd0cnVlJz57J8OXJ308L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8aDRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nbW9kYWwtdGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9J3RpdGxlJ1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbW9kYWwtYmFjayc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdmYSBmYS1hbmdsZS1sZWZ0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByb3BzLmNvbGxhcHNlTW9kYWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5zZWN1cml0eS50aXRsZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU2VjdXJpdHkgU2V0dGluZ3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd1c2VyLXNldHRpbmdzJz5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0ndGFiLWhlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LnRpdGxlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdTZWN1cml0eSBTZXR0aW5ncydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkaXZpZGVyLWRhcmsgZmlyc3QnLz5cbiAgICAgICAgICAgICAgICAgICAge3Bhc3N3b3JkU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItbGlnaHQnLz5cbiAgICAgICAgICAgICAgICAgICAge21mYVNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkaXZpZGVyLWxpZ2h0Jy8+XG4gICAgICAgICAgICAgICAgICAgIHtvYXV0aFNlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkaXZpZGVyLWxpZ2h0Jy8+XG4gICAgICAgICAgICAgICAgICAgIHt0b2tlbnNTZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZGl2aWRlci1saWdodCcvPlxuICAgICAgICAgICAgICAgICAgICB7c2lnbkluU2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RpdmlkZXItZGFyaycvPlxuICAgICAgICAgICAgICAgICAgICA8YnIvPlxuICAgICAgICAgICAgICAgICAgICA8VG9nZ2xlTW9kYWxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2VjdXJpdHktbGlua3MgY29sb3ItLWxpbmsnXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dUeXBlPXtBY2Nlc3NIaXN0b3J5TW9kYWx9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtY2xvY2stbycvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0ndXNlci5zZXR0aW5ncy5zZWN1cml0eS52aWV3SGlzdG9yeSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVmlldyBBY2Nlc3MgSGlzdG9yeSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvVG9nZ2xlTW9kYWxCdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxUb2dnbGVNb2RhbEJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdzZWN1cml0eS1saW5rcyBjb2xvci0tbGluayBtYXJnaW4tdG9wJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nVHlwZT17QWN0aXZpdHlMb2dNb2RhbH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1jbG9jay1vJy8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd1c2VyLnNldHRpbmdzLnNlY3VyaXR5LmxvZ291dEFjdGl2ZVNlc3Npb25zJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdWaWV3IGFuZCBMb2dvdXQgb2YgQWN0aXZlIFNlc3Npb25zJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Ub2dnbGVNb2RhbEJ1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8Q29uZmlybU1vZGFsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXt0aGlzLnN0YXRlLmNvbmZpcm1UaXRsZX1cbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17dGhpcy5zdGF0ZS5jb25maXJtTWVzc2FnZX1cbiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ9e3RoaXMuc3RhdGUuY29uZmlybUJ1dHRvbn1cbiAgICAgICAgICAgICAgICAgICAgc2hvdz17dGhpcy5zdGF0ZS5zaG93Q29uZmlybU1vZGFsfVxuICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm09e3RoaXMuc3RhdGUuY29uZmlybUNvbXBsZXRlIHx8ICgoKSA9PiB7fSl9IC8vZXNsaW50LWRpc2FibGUtbGluZSBuby1lbXB0eS1mdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5oYW5kbGVDYW5jZWxDb25maXJtfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblNlY3VyaXR5VGFiLmRlZmF1bHRQcm9wcyA9IHtcbiAgICB1c2VyOiB7fSxcbiAgICBhY3RpdmVTZWN0aW9uOiAnJ1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3VzZXJfc2V0dGluZ3MvdXNlcl9zZXR0aW5nc19zZWN1cml0eS91c2VyX3NldHRpbmdzX3NlY3VyaXR5LmpzeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQTFCQTtBQUNBO0FBQ0E7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBNkNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUF3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBMUZBO0FBNEZBO0FBQ0E7QUFDQTtBQUNBO0FBL0ZBO0FBaUdBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBeEhBO0FBMEhBO0FBQ0E7QUFDQTtBQTVIQTtBQThIQTtBQUNBO0FBQ0E7QUFoSUE7QUFrSUE7QUFDQTtBQUNBO0FBcElBO0FBc0lBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBdEpBO0FBd0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFLQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBTEE7QUFPQTtBQVJBO0FBQ0E7QUFXQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFVQTtBQVhBO0FBQ0E7QUFjQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQTdSQTtBQStSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFEQTtBQVZBO0FBcUJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQURBO0FBVkE7QUFxQkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBREE7QUFWQTtBQXFCQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFKQTtBQVlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUpBO0FBWUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBSkE7QUFZQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFKQTtBQVlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUpBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVZBO0FBSEE7QUF1QkE7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQVJBO0FBV0E7QUFDQTtBQTloQkE7QUFnaUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVNBO0FBVkE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBU0E7QUFWQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUFTQTtBQVZBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVNBO0FBVkE7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBU0E7QUFWQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUFTQTtBQVZBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFDQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQXJ2QkE7QUF1dkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFMQTtBQUNBO0FBUUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUZBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQURBO0FBUkE7QUFxQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBL0JBO0FBa0NBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBREE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUpBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBTEE7QUFDQTtBQVFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBUEE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQVJBO0FBV0E7QUFDQTtBQW40QkE7QUFxNEJBO0FBQ0E7QUFDQTtBQXY0QkE7QUF5NEJBO0FBQ0E7QUFDQTtBQTM0QkE7QUE0NEJBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUtBO0FBTkE7QUFDQTtBQURBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFaQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBYUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQTc0QkE7QUFtNkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQTM2QkE7QUE2NkJBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUF6QkE7QUFDQTtBQTJCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEvOEJBO0FBaTlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcjlCQTtBQXU5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBREE7QUFVQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBNUJBO0FBOEJBO0FBQ0E7QUF4L0JBO0FBQUE7QUF5L0JBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUExL0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWtnQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBTEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFDQTtBQUZBO0FBUkE7QUFEQTtBQWVBO0FBakNBO0FBb0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBREE7QUFQQTtBQWlCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFKQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFKQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUF4QkE7QUFsQkE7QUFzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFMQTtBQXhCQTtBQWlDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBTEE7QUFKQTtBQUNBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBVEE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBdHZDQTtBQUhBO0FBSUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBV0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQXF0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVBBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQ0E7QUFDQTtBQUZBO0FBVkE7QUFWQTtBQTBCQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBN0JBO0FBd0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFuRUE7QUE2RUE7OztBQXg1Q0E7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7QUFyQkE7QUFuQkE7QUFEQTtBQUNBO0FBQ0E7QUF5NUNBO0FBQ0E7QUFDQTtBQUZBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2545\n");

/***/ }),

/***/ 2546:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(33);\n\nvar _redux = __webpack_require__(22);\n\nvar _users = __webpack_require__(62);\n\nvar _access_history_modal = __webpack_require__(2547);\n\nvar _access_history_modal2 = _interopRequireDefault(_access_history_modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapStateToProps(state, ownProps) {\n    return (0, _extends3.default)({}, ownProps);\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: (0, _redux.bindActionCreators)({\n            getUserAudits: _users.getUserAudits\n        }, dispatch)\n    };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_access_history_modal2.default);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0Ni5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2FjY2Vzc19oaXN0b3J5X21vZGFsL2luZGV4LmpzPzYyNDYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE3IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0IHtjb25uZWN0fSBmcm9tICdyZWFjdC1yZWR1eCc7XG5pbXBvcnQge2JpbmRBY3Rpb25DcmVhdG9yc30gZnJvbSAncmVkdXgnO1xuXG5pbXBvcnQge2dldFVzZXJBdWRpdHN9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvYWN0aW9ucy91c2Vycyc7XG5cbmltcG9ydCBBY2Nlc3NIaXN0b3J5TW9kYWwgZnJvbSAnLi9hY2Nlc3NfaGlzdG9yeV9tb2RhbC5qc3gnO1xuXG5mdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUsIG93blByb3BzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ub3duUHJvcHNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBtYXBEaXNwYXRjaFRvUHJvcHMoZGlzcGF0Y2gpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBhY3Rpb25zOiBiaW5kQWN0aW9uQ3JlYXRvcnMoe1xuICAgICAgICAgICAgZ2V0VXNlckF1ZGl0c1xuICAgICAgICB9LCBkaXNwYXRjaClcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShBY2Nlc3NIaXN0b3J5TW9kYWwpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvYWNjZXNzX2hpc3RvcnlfbW9kYWwvaW5kZXguanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQVRBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2546\n");

/***/ }),

/***/ 2547:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _audit_table = __webpack_require__(2183);\n\nvar _audit_table2 = _interopRequireDefault(_audit_table);\n\nvar _loading_screen = __webpack_require__(238);\n\nvar _loading_screen2 = _interopRequireDefault(_loading_screen);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AccessHistoryModal = function (_React$Component) {\n    (0, _inherits3.default)(AccessHistoryModal, _React$Component);\n\n    function AccessHistoryModal(props) {\n        (0, _classCallCheck3.default)(this, AccessHistoryModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (AccessHistoryModal.__proto__ || (0, _getPrototypeOf2.default)(AccessHistoryModal)).call(this, props));\n\n        _this.onAuditChange = _this.onAuditChange.bind(_this);\n        _this.onShow = _this.onShow.bind(_this);\n        _this.onHide = _this.onHide.bind(_this);\n\n        var state = _this.getStateFromStoresForAudits();\n        state.moreInfo = [];\n        state.show = true;\n\n        _this.state = state;\n        return _this;\n    }\n\n    (0, _createClass3.default)(AccessHistoryModal, [{\n        key: 'getStateFromStoresForAudits',\n        value: function getStateFromStoresForAudits() {\n            return {\n                audits: _user_store2.default.getAudits()\n            };\n        }\n    }, {\n        key: 'onShow',\n        value: function onShow() {\n            this.props.actions.getUserAudits(_user_store2.default.getCurrentId(), 0, 200);\n            if (!Utils.isMobile()) {\n                (0, _jquery2.default)('.modal-body').perfectScrollbar();\n            }\n        }\n    }, {\n        key: 'onHide',\n        value: function onHide() {\n            this.setState({ show: false });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _user_store2.default.addAuditsChangeListener(this.onAuditChange);\n            this.onShow();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _user_store2.default.removeAuditsChangeListener(this.onAuditChange);\n        }\n    }, {\n        key: 'onAuditChange',\n        value: function onAuditChange() {\n            var newState = this.getStateFromStoresForAudits();\n            if (!Utils.areObjectsEqual(newState.audits, this.state.audits)) {\n                this.setState(newState);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var content = void 0;\n            if (this.state.audits.length === 0) {\n                content = _react2.default.createElement(_loading_screen2.default, null);\n            } else {\n                content = _react2.default.createElement(_audit_table2.default, {\n                    audits: this.state.audits,\n                    showIp: true,\n                    showSession: true\n                });\n            }\n\n            return _react2.default.createElement(\n                _reactBootstrap.Modal,\n                {\n                    dialogClassName: 'modal--scroll',\n                    show: this.state.show,\n                    onHide: this.onHide,\n                    onExited: this.props.onHide,\n                    bsSize: 'large'\n                },\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Header,\n                    { closeButton: true },\n                    _react2.default.createElement(\n                        _reactBootstrap.Modal.Title,\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'access_history.title',\n                            defaultMessage: 'Access History'\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Body,\n                    { ref: 'modalBody' },\n                    content\n                )\n            );\n        }\n    }]);\n    return AccessHistoryModal;\n}(_react2.default.Component); // Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nAccessHistoryModal.propTypes = {\n    onHide: _propTypes2.default.func.isRequired,\n    actions: _propTypes2.default.shape({\n        getUserAudits: _propTypes2.default.func.isRequired\n    }).isRequired\n};\nexports.default = AccessHistoryModal;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0Ny5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2FjY2Vzc19oaXN0b3J5X21vZGFsL2FjY2Vzc19oaXN0b3J5X21vZGFsLmpzeD9hOGZiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNi1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge01vZGFsfSBmcm9tICdyZWFjdC1ib290c3RyYXAnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcblxuaW1wb3J0IFVzZXJTdG9yZSBmcm9tICdzdG9yZXMvdXNlcl9zdG9yZS5qc3gnO1xuXG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgQXVkaXRUYWJsZSBmcm9tICdjb21wb25lbnRzL2F1ZGl0X3RhYmxlLmpzeCc7XG5pbXBvcnQgTG9hZGluZ1NjcmVlbiBmcm9tICdjb21wb25lbnRzL2xvYWRpbmdfc2NyZWVuLmpzeCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjY2Vzc0hpc3RvcnlNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAgICAgb25IaWRlOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgICBhY3Rpb25zOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICAgICAgZ2V0VXNlckF1ZGl0czogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuICAgICAgICB9KS5pc1JlcXVpcmVkXG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMub25BdWRpdENoYW5nZSA9IHRoaXMub25BdWRpdENoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU2hvdyA9IHRoaXMub25TaG93LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25IaWRlID0gdGhpcy5vbkhpZGUuYmluZCh0aGlzKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuZ2V0U3RhdGVGcm9tU3RvcmVzRm9yQXVkaXRzKCk7XG4gICAgICAgIHN0YXRlLm1vcmVJbmZvID0gW107XG4gICAgICAgIHN0YXRlLnNob3cgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG5cbiAgICBnZXRTdGF0ZUZyb21TdG9yZXNGb3JBdWRpdHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdWRpdHM6IFVzZXJTdG9yZS5nZXRBdWRpdHMoKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIG9uU2hvdygpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5hY3Rpb25zLmdldFVzZXJBdWRpdHMoVXNlclN0b3JlLmdldEN1cnJlbnRJZCgpLCAwLCAyMDApO1xuICAgICAgICBpZiAoIVV0aWxzLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgICQoJy5tb2RhbC1ib2R5JykucGVyZmVjdFNjcm9sbGJhcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25IaWRlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93OiBmYWxzZX0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBVc2VyU3RvcmUuYWRkQXVkaXRzQ2hhbmdlTGlzdGVuZXIodGhpcy5vbkF1ZGl0Q2hhbmdlKTtcbiAgICAgICAgdGhpcy5vblNob3coKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgVXNlclN0b3JlLnJlbW92ZUF1ZGl0c0NoYW5nZUxpc3RlbmVyKHRoaXMub25BdWRpdENoYW5nZSk7XG4gICAgfVxuXG4gICAgb25BdWRpdENoYW5nZSgpIHtcbiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSB0aGlzLmdldFN0YXRlRnJvbVN0b3Jlc0ZvckF1ZGl0cygpO1xuICAgICAgICBpZiAoIVV0aWxzLmFyZU9iamVjdHNFcXVhbChuZXdTdGF0ZS5hdWRpdHMsIHRoaXMuc3RhdGUuYXVkaXRzKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBjb250ZW50O1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5hdWRpdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gKDxMb2FkaW5nU2NyZWVuLz4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGVudCA9IChcbiAgICAgICAgICAgICAgICA8QXVkaXRUYWJsZVxuICAgICAgICAgICAgICAgICAgICBhdWRpdHM9e3RoaXMuc3RhdGUuYXVkaXRzfVxuICAgICAgICAgICAgICAgICAgICBzaG93SXA9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIHNob3dTZXNzaW9uPXt0cnVlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgICAgIGRpYWxvZ0NsYXNzTmFtZT0nbW9kYWwtLXNjcm9sbCdcbiAgICAgICAgICAgICAgICBzaG93PXt0aGlzLnN0YXRlLnNob3d9XG4gICAgICAgICAgICAgICAgb25IaWRlPXt0aGlzLm9uSGlkZX1cbiAgICAgICAgICAgICAgICBvbkV4aXRlZD17dGhpcy5wcm9wcy5vbkhpZGV9XG4gICAgICAgICAgICAgICAgYnNTaXplPSdsYXJnZSdcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8TW9kYWwuSGVhZGVyIGNsb3NlQnV0dG9uPXt0cnVlfT5cbiAgICAgICAgICAgICAgICAgICAgPE1vZGFsLlRpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nYWNjZXNzX2hpc3RvcnkudGl0bGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0FjY2VzcyBIaXN0b3J5J1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbC5UaXRsZT5cbiAgICAgICAgICAgICAgICA8L01vZGFsLkhlYWRlcj5cbiAgICAgICAgICAgICAgICA8TW9kYWwuQm9keSByZWY9J21vZGFsQm9keSc+XG4gICAgICAgICAgICAgICAgICAgIHtjb250ZW50fVxuICAgICAgICAgICAgICAgIDwvTW9kYWwuQm9keT5cbiAgICAgICAgICAgIDwvTW9kYWw+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvYWNjZXNzX2hpc3RvcnlfbW9kYWwvYWNjZXNzX2hpc3RvcnlfbW9kYWwuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7OztBQVFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQVlBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFmQTtBQW9CQTs7O0FBMUZBO0FBaEJBO0FBQ0E7QUFlQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2547\n");

/***/ }),

/***/ 2548:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(20);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(33);\n\nvar _redux = __webpack_require__(22);\n\nvar _users = __webpack_require__(62);\n\nvar _activity_log_modal = __webpack_require__(2549);\n\nvar _activity_log_modal2 = _interopRequireDefault(_activity_log_modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapStateToProps(state, ownProps) {\n    return (0, _extends3.default)({}, ownProps);\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: (0, _redux.bindActionCreators)({\n            getSessions: _users.getSessions,\n            revokeSession: _users.revokeSession\n        }, dispatch)\n    };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_activity_log_modal2.default);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0OC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2FjdGl2aXR5X2xvZ19tb2RhbC9pbmRleC5qcz8zZDY1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNyBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCB7Y29ubmVjdH0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IHtiaW5kQWN0aW9uQ3JlYXRvcnN9IGZyb20gJ3JlZHV4JztcblxuaW1wb3J0IHtnZXRTZXNzaW9ucywgcmV2b2tlU2Vzc2lvbn0gZnJvbSAnbWF0dGVybW9zdC1yZWR1eC9hY3Rpb25zL3VzZXJzJztcblxuaW1wb3J0IEFjdGl2aXR5TG9nTW9kYWwgZnJvbSAnLi9hY3Rpdml0eV9sb2dfbW9kYWwuanN4JztcblxuZnVuY3Rpb24gbWFwU3RhdGVUb1Byb3BzKHN0YXRlLCBvd25Qcm9wcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLm93blByb3BzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gbWFwRGlzcGF0Y2hUb1Byb3BzKGRpc3BhdGNoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWN0aW9uczogYmluZEFjdGlvbkNyZWF0b3JzKHtcbiAgICAgICAgICAgIGdldFNlc3Npb25zLFxuICAgICAgICAgICAgcmV2b2tlU2Vzc2lvblxuICAgICAgICB9LCBkaXNwYXRjaClcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjb25uZWN0KG1hcFN0YXRlVG9Qcm9wcywgbWFwRGlzcGF0Y2hUb1Byb3BzKShBY3Rpdml0eUxvZ01vZGFsKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL2FjdGl2aXR5X2xvZ19tb2RhbC9pbmRleC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBVEE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQU1BO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2548\n");

/***/ }),

/***/ 2549:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _constants = __webpack_require__(26);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _loading_screen = __webpack_require__(238);\n\nvar _loading_screen2 = _interopRequireDefault(_loading_screen);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ActivityLogModal = function (_React$Component) {\n    (0, _inherits3.default)(ActivityLogModal, _React$Component);\n\n    function ActivityLogModal(props) {\n        (0, _classCallCheck3.default)(this, ActivityLogModal);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (ActivityLogModal.__proto__ || (0, _getPrototypeOf2.default)(ActivityLogModal)).call(this, props));\n\n        _this.isMobileSession = function (session) {\n            return session.device_id && (session.device_id.includes('apple') || session.device_id.includes('android'));\n        };\n\n        _this.mobileSessionInfo = function (session) {\n            var deviceTypeId = void 0;\n            var deviceTypeMessage = void 0;\n            var devicePicture = void 0;\n\n            if (session.device_id.includes('apple')) {\n                devicePicture = 'fa fa-apple';\n                deviceTypeId = 'activity_log_modal.iphoneNativeClassicApp';\n                deviceTypeMessage = 'iPhone Native Classic App';\n\n                if (session.device_id.includes(_constants.General.PUSH_NOTIFY_APPLE_REACT_NATIVE)) {\n                    deviceTypeId = 'activity_log_modal.iphoneNativeApp';\n                    deviceTypeMessage = 'iPhone Native App';\n                }\n            } else if (session.device_id.includes('android')) {\n                devicePicture = 'fa fa-android';\n                deviceTypeId = 'activity_log_modal.androidNativeClassicApp';\n                deviceTypeMessage = 'Android Native Classic App';\n\n                if (session.device_id.includes(_constants.General.PUSH_NOTIFY_ANDROID_REACT_NATIVE)) {\n                    deviceTypeId = 'activity_log_modal.androidNativeApp';\n                    deviceTypeMessage = 'Android Native App';\n                }\n            }\n\n            return {\n                devicePicture: devicePicture,\n                devicePlatform: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: deviceTypeId,\n                    defaultMessage: deviceTypeMessage\n                })\n            };\n        };\n\n        _this.submitRevoke = _this.submitRevoke.bind(_this);\n        _this.onListenerChange = _this.onListenerChange.bind(_this);\n        _this.handleMoreInfo = _this.handleMoreInfo.bind(_this);\n        _this.onHide = _this.onHide.bind(_this);\n        _this.onShow = _this.onShow.bind(_this);\n\n        var state = _this.getStateFromStores();\n        state.moreInfo = [];\n        state.show = true;\n\n        _this.state = state;\n        return _this;\n    }\n\n    (0, _createClass3.default)(ActivityLogModal, [{\n        key: 'getStateFromStores',\n        value: function getStateFromStores() {\n            return {\n                sessions: _user_store2.default.getSessions(),\n                clientError: null\n            };\n        }\n    }, {\n        key: 'submitRevoke',\n        value: function submitRevoke(altId, e) {\n            var _this2 = this;\n\n            e.preventDefault();\n            var modalContent = (0, _jquery2.default)(e.target).closest('.modal-content');\n            modalContent.addClass('animation--highlight');\n            setTimeout(function () {\n                modalContent.removeClass('animation--highlight');\n            }, 1500);\n            this.props.actions.revokeSession(_user_store2.default.getCurrentId(), altId).then(function () {\n                _this2.props.actions.getSessions(_user_store2.default.getCurrentId());\n            });\n        }\n    }, {\n        key: 'onShow',\n        value: function onShow() {\n            this.props.actions.getSessions(_user_store2.default.getCurrentId());\n            if (!Utils.isMobile()) {\n                (0, _jquery2.default)('.modal-body').perfectScrollbar();\n            }\n        }\n    }, {\n        key: 'onHide',\n        value: function onHide() {\n            this.setState({ show: false });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _user_store2.default.addSessionsChangeListener(this.onListenerChange);\n            this.onShow();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _user_store2.default.removeSessionsChangeListener(this.onListenerChange);\n        }\n    }, {\n        key: 'onListenerChange',\n        value: function onListenerChange() {\n            var newState = this.getStateFromStores();\n            if (!Utils.areObjectsEqual(newState.sessions, this.state.sessions)) {\n                this.setState(newState);\n            }\n        }\n    }, {\n        key: 'handleMoreInfo',\n        value: function handleMoreInfo(index) {\n            var newMoreInfo = this.state.moreInfo;\n            newMoreInfo[index] = true;\n            this.setState({ moreInfo: newMoreInfo });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var activityList = [];\n\n            for (var i = 0; i < this.state.sessions.length; i++) {\n                var currentSession = this.state.sessions[i];\n                var lastAccessTime = new Date(currentSession.last_activity_at);\n                var firstAccessTime = new Date(currentSession.create_at);\n                var devicePlatform = currentSession.props.platform;\n                var devicePicture = '';\n\n                if (currentSession.props.type === 'UserAccessToken') {\n                    continue;\n                }\n\n                if (currentSession.props.platform === 'Windows') {\n                    devicePicture = 'fa fa-windows';\n                } else if (this.isMobileSession(currentSession)) {\n                    var sessionInfo = this.mobileSessionInfo(currentSession);\n\n                    devicePicture = sessionInfo.devicePicture;\n                    devicePlatform = sessionInfo.devicePlatform;\n                } else if (currentSession.props.platform === 'Macintosh' || currentSession.props.platform === 'iPhone') {\n                    devicePicture = 'fa fa-apple';\n                } else if (currentSession.props.platform === 'Linux') {\n                    if (currentSession.props.os.indexOf('Android') >= 0) {\n                        devicePlatform = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'activity_log_modal.android',\n                            defaultMessage: 'Android'\n                        });\n                        devicePicture = 'fa fa-android';\n                    } else {\n                        devicePicture = 'fa fa-linux';\n                    }\n                } else if (currentSession.props.os.indexOf('Linux') !== -1) {\n                    devicePicture = 'fa fa-linux';\n                }\n\n                if (currentSession.props.browser.indexOf('Desktop App') !== -1) {\n                    devicePlatform = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'activity_log_modal.desktop',\n                        defaultMessage: 'Native Desktop App'\n                    });\n                }\n\n                var moreInfo = void 0;\n                if (this.state.moreInfo[i]) {\n                    moreInfo = _react2.default.createElement(\n                        'div',\n                        null,\n                        _react2.default.createElement(\n                            'div',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'activity_log.firstTime',\n                                defaultMessage: 'First time active: {date}, {time}',\n                                values: {\n                                    date: _react2.default.createElement(_reactIntl.FormattedDate, {\n                                        value: firstAccessTime,\n                                        day: '2-digit',\n                                        month: 'long',\n                                        year: 'numeric'\n                                    }),\n                                    time: _react2.default.createElement(_reactIntl.FormattedTime, {\n                                        value: firstAccessTime,\n                                        hour: '2-digit',\n                                        minute: '2-digit'\n                                    })\n                                }\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'activity_log.os',\n                                defaultMessage: 'OS: {os}',\n                                values: {\n                                    os: currentSession.props.os\n                                }\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'activity_log.browser',\n                                defaultMessage: 'Browser: {browser}',\n                                values: {\n                                    browser: currentSession.props.browser\n                                }\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'activity_log.sessionId',\n                                defaultMessage: 'Session ID: {id}',\n                                values: {\n                                    id: currentSession.id\n                                }\n                            })\n                        )\n                    );\n                } else {\n                    moreInfo = _react2.default.createElement(\n                        'a',\n                        {\n                            className: 'theme',\n                            href: '#',\n                            onClick: this.handleMoreInfo.bind(this, i)\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'activity_log.moreInfo',\n                            defaultMessage: 'More info'\n                        })\n                    );\n                }\n\n                activityList[i] = _react2.default.createElement(\n                    'div',\n                    {\n                        key: 'activityLogEntryKey' + i,\n                        className: 'activity-log__table'\n                    },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'activity-log__report' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'report__platform' },\n                            _react2.default.createElement('i', { className: devicePicture }),\n                            devicePlatform\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'report__info' },\n                            _react2.default.createElement(\n                                'div',\n                                null,\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'activity_log.lastActivity',\n                                    defaultMessage: 'Last activity: {date}, {time}',\n                                    values: {\n                                        date: _react2.default.createElement(_reactIntl.FormattedDate, {\n                                            value: lastAccessTime,\n                                            day: '2-digit',\n                                            month: 'long',\n                                            year: 'numeric'\n                                        }),\n                                        time: _react2.default.createElement(_reactIntl.FormattedTime, {\n                                            value: lastAccessTime,\n                                            hour: '2-digit',\n                                            minute: '2-digit'\n                                        })\n                                    }\n                                })\n                            ),\n                            moreInfo\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'activity-log__action' },\n                        _react2.default.createElement(\n                            'button',\n                            {\n                                onClick: this.submitRevoke.bind(this, currentSession.id),\n                                className: 'btn btn-primary'\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'activity_log.logout',\n                                defaultMessage: 'Logout'\n                            })\n                        )\n                    )\n                );\n            }\n\n            var content = void 0;\n            if (this.state.sessions.loading) {\n                content = _react2.default.createElement(_loading_screen2.default, null);\n            } else {\n                content = _react2.default.createElement(\n                    'form',\n                    { role: 'form' },\n                    activityList\n                );\n            }\n\n            return _react2.default.createElement(\n                _reactBootstrap.Modal,\n                {\n                    dialogClassName: 'modal--scroll',\n                    show: this.state.show,\n                    onHide: this.onHide,\n                    onExited: this.props.onHide,\n                    bsSize: 'large'\n                },\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Header,\n                    { closeButton: true },\n                    _react2.default.createElement(\n                        _reactBootstrap.Modal.Title,\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'activity_log.activeSessions',\n                            defaultMessage: 'Active Sessions'\n                        })\n                    )\n                ),\n                _react2.default.createElement(\n                    _reactBootstrap.Modal.Body,\n                    { ref: 'modalBody' },\n                    _react2.default.createElement(\n                        'p',\n                        { className: 'session-help-text' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'activity_log.sessionsDescription',\n                            defaultMessage: 'Sessions are created when you log in to a new browser on a device. Sessions let you use Mattermost without having to log in again for a time period specified by the System Admin. If you want to log out sooner, use the \\'Logout\\' button below to end a session.'\n                        })\n                    ),\n                    content\n                )\n            );\n        }\n    }]);\n    return ActivityLogModal;\n}(_react2.default.Component); // Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nActivityLogModal.propTypes = {\n    onHide: _propTypes2.default.func.isRequired,\n    actions: _propTypes2.default.shape({\n        getSessions: _propTypes2.default.func.isRequired,\n        revokeSession: _propTypes2.default.func.isRequired\n    }).isRequired\n};\nexports.default = ActivityLogModal;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0OS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL2FjdGl2aXR5X2xvZ19tb2RhbC9hY3Rpdml0eV9sb2dfbW9kYWwuanN4PzFjN2QiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7TW9kYWx9IGZyb20gJ3JlYWN0LWJvb3RzdHJhcCc7XG5pbXBvcnQge0Zvcm1hdHRlZERhdGUsIEZvcm1hdHRlZE1lc3NhZ2UsIEZvcm1hdHRlZFRpbWV9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQge0dlbmVyYWx9IGZyb20gJ21hdHRlcm1vc3QtcmVkdXgvY29uc3RhbnRzJztcblxuaW1wb3J0IFVzZXJTdG9yZSBmcm9tICdzdG9yZXMvdXNlcl9zdG9yZS5qc3gnO1xuXG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgTG9hZGluZ1NjcmVlbiBmcm9tICdjb21wb25lbnRzL2xvYWRpbmdfc2NyZWVuLmpzeCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjdGl2aXR5TG9nTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICAgIG9uSGlkZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICAgICAgYWN0aW9uczogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgICAgIGdldFNlc3Npb25zOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxuICAgICAgICAgICAgcmV2b2tlU2Vzc2lvbjogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZFxuICAgICAgICB9KS5pc1JlcXVpcmVkXG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuc3VibWl0UmV2b2tlID0gdGhpcy5zdWJtaXRSZXZva2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkxpc3RlbmVyQ2hhbmdlID0gdGhpcy5vbkxpc3RlbmVyQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlTW9yZUluZm8gPSB0aGlzLmhhbmRsZU1vcmVJbmZvLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25IaWRlID0gdGhpcy5vbkhpZGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblNob3cgPSB0aGlzLm9uU2hvdy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRTdGF0ZUZyb21TdG9yZXMoKTtcbiAgICAgICAgc3RhdGUubW9yZUluZm8gPSBbXTtcbiAgICAgICAgc3RhdGUuc2hvdyA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH1cblxuICAgIGdldFN0YXRlRnJvbVN0b3JlcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlc3Npb25zOiBVc2VyU3RvcmUuZ2V0U2Vzc2lvbnMoKSxcbiAgICAgICAgICAgIGNsaWVudEVycm9yOiBudWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc3VibWl0UmV2b2tlKGFsdElkLCBlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIG1vZGFsQ29udGVudCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5tb2RhbC1jb250ZW50Jyk7XG4gICAgICAgIG1vZGFsQ29udGVudC5hZGRDbGFzcygnYW5pbWF0aW9uLS1oaWdobGlnaHQnKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBtb2RhbENvbnRlbnQucmVtb3ZlQ2xhc3MoJ2FuaW1hdGlvbi0taGlnaGxpZ2h0Jyk7XG4gICAgICAgIH0sIDE1MDApO1xuICAgICAgICB0aGlzLnByb3BzLmFjdGlvbnMucmV2b2tlU2Vzc2lvbihVc2VyU3RvcmUuZ2V0Q3VycmVudElkKCksIGFsdElkKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMuYWN0aW9ucy5nZXRTZXNzaW9ucyhVc2VyU3RvcmUuZ2V0Q3VycmVudElkKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvblNob3coKSB7XG4gICAgICAgIHRoaXMucHJvcHMuYWN0aW9ucy5nZXRTZXNzaW9ucyhVc2VyU3RvcmUuZ2V0Q3VycmVudElkKCkpO1xuICAgICAgICBpZiAoIVV0aWxzLmlzTW9iaWxlKCkpIHtcbiAgICAgICAgICAgICQoJy5tb2RhbC1ib2R5JykucGVyZmVjdFNjcm9sbGJhcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25IaWRlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93OiBmYWxzZX0pO1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBVc2VyU3RvcmUuYWRkU2Vzc2lvbnNDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uTGlzdGVuZXJDaGFuZ2UpO1xuICAgICAgICB0aGlzLm9uU2hvdygpO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBVc2VyU3RvcmUucmVtb3ZlU2Vzc2lvbnNDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uTGlzdGVuZXJDaGFuZ2UpO1xuICAgIH1cblxuICAgIG9uTGlzdGVuZXJDaGFuZ2UoKSB7XG4gICAgICAgIGNvbnN0IG5ld1N0YXRlID0gdGhpcy5nZXRTdGF0ZUZyb21TdG9yZXMoKTtcbiAgICAgICAgaWYgKCFVdGlscy5hcmVPYmplY3RzRXF1YWwobmV3U3RhdGUuc2Vzc2lvbnMsIHRoaXMuc3RhdGUuc2Vzc2lvbnMpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZU1vcmVJbmZvKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IG5ld01vcmVJbmZvID0gdGhpcy5zdGF0ZS5tb3JlSW5mbztcbiAgICAgICAgbmV3TW9yZUluZm9baW5kZXhdID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bW9yZUluZm86IG5ld01vcmVJbmZvfSk7XG4gICAgfVxuXG4gICAgaXNNb2JpbGVTZXNzaW9uID0gKHNlc3Npb24pID0+IHtcbiAgICAgICAgcmV0dXJuIHNlc3Npb24uZGV2aWNlX2lkICYmIChzZXNzaW9uLmRldmljZV9pZC5pbmNsdWRlcygnYXBwbGUnKSB8fCBzZXNzaW9uLmRldmljZV9pZC5pbmNsdWRlcygnYW5kcm9pZCcpKTtcbiAgICB9O1xuXG4gICAgbW9iaWxlU2Vzc2lvbkluZm8gPSAoc2Vzc2lvbikgPT4ge1xuICAgICAgICBsZXQgZGV2aWNlVHlwZUlkO1xuICAgICAgICBsZXQgZGV2aWNlVHlwZU1lc3NhZ2U7XG4gICAgICAgIGxldCBkZXZpY2VQaWN0dXJlO1xuXG4gICAgICAgIGlmIChzZXNzaW9uLmRldmljZV9pZC5pbmNsdWRlcygnYXBwbGUnKSkge1xuICAgICAgICAgICAgZGV2aWNlUGljdHVyZSA9ICdmYSBmYS1hcHBsZSc7XG4gICAgICAgICAgICBkZXZpY2VUeXBlSWQgPSAnYWN0aXZpdHlfbG9nX21vZGFsLmlwaG9uZU5hdGl2ZUNsYXNzaWNBcHAnO1xuICAgICAgICAgICAgZGV2aWNlVHlwZU1lc3NhZ2UgPSAnaVBob25lIE5hdGl2ZSBDbGFzc2ljIEFwcCc7XG5cbiAgICAgICAgICAgIGlmIChzZXNzaW9uLmRldmljZV9pZC5pbmNsdWRlcyhHZW5lcmFsLlBVU0hfTk9USUZZX0FQUExFX1JFQUNUX05BVElWRSkpIHtcbiAgICAgICAgICAgICAgICBkZXZpY2VUeXBlSWQgPSAnYWN0aXZpdHlfbG9nX21vZGFsLmlwaG9uZU5hdGl2ZUFwcCc7XG4gICAgICAgICAgICAgICAgZGV2aWNlVHlwZU1lc3NhZ2UgPSAnaVBob25lIE5hdGl2ZSBBcHAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNlc3Npb24uZGV2aWNlX2lkLmluY2x1ZGVzKCdhbmRyb2lkJykpIHtcbiAgICAgICAgICAgIGRldmljZVBpY3R1cmUgPSAnZmEgZmEtYW5kcm9pZCc7XG4gICAgICAgICAgICBkZXZpY2VUeXBlSWQgPSAnYWN0aXZpdHlfbG9nX21vZGFsLmFuZHJvaWROYXRpdmVDbGFzc2ljQXBwJztcbiAgICAgICAgICAgIGRldmljZVR5cGVNZXNzYWdlID0gJ0FuZHJvaWQgTmF0aXZlIENsYXNzaWMgQXBwJztcblxuICAgICAgICAgICAgaWYgKHNlc3Npb24uZGV2aWNlX2lkLmluY2x1ZGVzKEdlbmVyYWwuUFVTSF9OT1RJRllfQU5EUk9JRF9SRUFDVF9OQVRJVkUpKSB7XG4gICAgICAgICAgICAgICAgZGV2aWNlVHlwZUlkID0gJ2FjdGl2aXR5X2xvZ19tb2RhbC5hbmRyb2lkTmF0aXZlQXBwJztcbiAgICAgICAgICAgICAgICBkZXZpY2VUeXBlTWVzc2FnZSA9ICdBbmRyb2lkIE5hdGl2ZSBBcHAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRldmljZVBpY3R1cmUsXG4gICAgICAgICAgICBkZXZpY2VQbGF0Zm9ybTogKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPXtkZXZpY2VUeXBlSWR9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPXtkZXZpY2VUeXBlTWVzc2FnZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2aXR5TGlzdCA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGF0ZS5zZXNzaW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNlc3Npb24gPSB0aGlzLnN0YXRlLnNlc3Npb25zW2ldO1xuICAgICAgICAgICAgY29uc3QgbGFzdEFjY2Vzc1RpbWUgPSBuZXcgRGF0ZShjdXJyZW50U2Vzc2lvbi5sYXN0X2FjdGl2aXR5X2F0KTtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0QWNjZXNzVGltZSA9IG5ldyBEYXRlKGN1cnJlbnRTZXNzaW9uLmNyZWF0ZV9hdCk7XG4gICAgICAgICAgICBsZXQgZGV2aWNlUGxhdGZvcm0gPSBjdXJyZW50U2Vzc2lvbi5wcm9wcy5wbGF0Zm9ybTtcbiAgICAgICAgICAgIGxldCBkZXZpY2VQaWN0dXJlID0gJyc7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50U2Vzc2lvbi5wcm9wcy50eXBlID09PSAnVXNlckFjY2Vzc1Rva2VuJykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY3VycmVudFNlc3Npb24ucHJvcHMucGxhdGZvcm0gPT09ICdXaW5kb3dzJykge1xuICAgICAgICAgICAgICAgIGRldmljZVBpY3R1cmUgPSAnZmEgZmEtd2luZG93cyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNNb2JpbGVTZXNzaW9uKGN1cnJlbnRTZXNzaW9uKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb25JbmZvID0gdGhpcy5tb2JpbGVTZXNzaW9uSW5mbyhjdXJyZW50U2Vzc2lvbik7XG5cbiAgICAgICAgICAgICAgICBkZXZpY2VQaWN0dXJlID0gc2Vzc2lvbkluZm8uZGV2aWNlUGljdHVyZTtcbiAgICAgICAgICAgICAgICBkZXZpY2VQbGF0Zm9ybSA9IHNlc3Npb25JbmZvLmRldmljZVBsYXRmb3JtO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U2Vzc2lvbi5wcm9wcy5wbGF0Zm9ybSA9PT0gJ01hY2ludG9zaCcgfHxcbiAgICAgICAgICAgICAgICBjdXJyZW50U2Vzc2lvbi5wcm9wcy5wbGF0Zm9ybSA9PT0gJ2lQaG9uZScpIHtcbiAgICAgICAgICAgICAgICBkZXZpY2VQaWN0dXJlID0gJ2ZhIGZhLWFwcGxlJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlc3Npb24ucHJvcHMucGxhdGZvcm0gPT09ICdMaW51eCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNlc3Npb24ucHJvcHMub3MuaW5kZXhPZignQW5kcm9pZCcpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlUGxhdGZvcm0gPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdhY3Rpdml0eV9sb2dfbW9kYWwuYW5kcm9pZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQW5kcm9pZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGRldmljZVBpY3R1cmUgPSAnZmEgZmEtYW5kcm9pZCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlUGljdHVyZSA9ICdmYSBmYS1saW51eCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50U2Vzc2lvbi5wcm9wcy5vcy5pbmRleE9mKCdMaW51eCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGRldmljZVBpY3R1cmUgPSAnZmEgZmEtbGludXgnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY3VycmVudFNlc3Npb24ucHJvcHMuYnJvd3Nlci5pbmRleE9mKCdEZXNrdG9wIEFwcCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGRldmljZVBsYXRmb3JtID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2FjdGl2aXR5X2xvZ19tb2RhbC5kZXNrdG9wJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J05hdGl2ZSBEZXNrdG9wIEFwcCdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgbW9yZUluZm87XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5tb3JlSW5mb1tpXSkge1xuICAgICAgICAgICAgICAgIG1vcmVJbmZvID0gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nYWN0aXZpdHlfbG9nLmZpcnN0VGltZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0ZpcnN0IHRpbWUgYWN0aXZlOiB7ZGF0ZX0sIHt0aW1lfSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZERhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2ZpcnN0QWNjZXNzVGltZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5PScyLWRpZ2l0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aD0nbG9uZydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeWVhcj0nbnVtZXJpYydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkVGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17Zmlyc3RBY2Nlc3NUaW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyPScyLWRpZ2l0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW51dGU9JzItZGlnaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdhY3Rpdml0eV9sb2cub3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdPUzoge29zfSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvczogY3VycmVudFNlc3Npb24ucHJvcHMub3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdhY3Rpdml0eV9sb2cuYnJvd3NlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0Jyb3dzZXI6IHticm93c2VyfSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyOiBjdXJyZW50U2Vzc2lvbi5wcm9wcy5icm93c2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nYWN0aXZpdHlfbG9nLnNlc3Npb25JZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1Nlc3Npb24gSUQ6IHtpZH0nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRTZXNzaW9uLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb3JlSW5mbyA9IChcbiAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndGhlbWUnXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmPScjJ1xuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVNb3JlSW5mby5iaW5kKHRoaXMsIGkpfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdhY3Rpdml0eV9sb2cubW9yZUluZm8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J01vcmUgaW5mbydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhY3Rpdml0eUxpc3RbaV0gPSAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBrZXk9eydhY3Rpdml0eUxvZ0VudHJ5S2V5JyArIGl9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nYWN0aXZpdHktbG9nX190YWJsZSdcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdhY3Rpdml0eS1sb2dfX3JlcG9ydCc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncmVwb3J0X19wbGF0Zm9ybSc+PGkgY2xhc3NOYW1lPXtkZXZpY2VQaWN0dXJlfS8+e2RldmljZVBsYXRmb3JtfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3JlcG9ydF9faW5mbyc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdhY3Rpdml0eV9sb2cubGFzdEFjdGl2aXR5J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xhc3QgYWN0aXZpdHk6IHtkYXRlfSwge3RpbWV9J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2xhc3RBY2Nlc3NUaW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5PScyLWRpZ2l0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGg9J2xvbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ZWFyPSdudW1lcmljJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkVGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2xhc3RBY2Nlc3NUaW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91cj0nMi1kaWdpdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZT0nMi1kaWdpdCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttb3JlSW5mb31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2FjdGl2aXR5LWxvZ19fYWN0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnN1Ym1pdFJldm9rZS5iaW5kKHRoaXMsIGN1cnJlbnRTZXNzaW9uLmlkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2J0biBidG4tcHJpbWFyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nYWN0aXZpdHlfbG9nLmxvZ291dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0xvZ291dCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjb250ZW50O1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZXNzaW9ucy5sb2FkaW5nKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gPExvYWRpbmdTY3JlZW4vPjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRlbnQgPSA8Zm9ybSByb2xlPSdmb3JtJz57YWN0aXZpdHlMaXN0fTwvZm9ybT47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPE1vZGFsXG4gICAgICAgICAgICAgICAgZGlhbG9nQ2xhc3NOYW1lPSdtb2RhbC0tc2Nyb2xsJ1xuICAgICAgICAgICAgICAgIHNob3c9e3RoaXMuc3RhdGUuc2hvd31cbiAgICAgICAgICAgICAgICBvbkhpZGU9e3RoaXMub25IaWRlfVxuICAgICAgICAgICAgICAgIG9uRXhpdGVkPXt0aGlzLnByb3BzLm9uSGlkZX1cbiAgICAgICAgICAgICAgICBic1NpemU9J2xhcmdlJ1xuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxNb2RhbC5IZWFkZXIgY2xvc2VCdXR0b249e3RydWV9PlxuICAgICAgICAgICAgICAgICAgICA8TW9kYWwuVGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdhY3Rpdml0eV9sb2cuYWN0aXZlU2Vzc2lvbnMnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0FjdGl2ZSBTZXNzaW9ucydcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvTW9kYWwuVGl0bGU+XG4gICAgICAgICAgICAgICAgPC9Nb2RhbC5IZWFkZXI+XG4gICAgICAgICAgICAgICAgPE1vZGFsLkJvZHkgcmVmPSdtb2RhbEJvZHknPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9J3Nlc3Npb24taGVscC10ZXh0Jz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2FjdGl2aXR5X2xvZy5zZXNzaW9uc0Rlc2NyaXB0aW9uJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPVwiU2Vzc2lvbnMgYXJlIGNyZWF0ZWQgd2hlbiB5b3UgbG9nIGluIHRvIGEgbmV3IGJyb3dzZXIgb24gYSBkZXZpY2UuIFNlc3Npb25zIGxldCB5b3UgdXNlIE1hdHRlcm1vc3Qgd2l0aG91dCBoYXZpbmcgdG8gbG9nIGluIGFnYWluIGZvciBhIHRpbWUgcGVyaW9kIHNwZWNpZmllZCBieSB0aGUgU3lzdGVtIEFkbWluLiBJZiB5b3Ugd2FudCB0byBsb2cgb3V0IHNvb25lciwgdXNlIHRoZSAnTG9nb3V0JyBidXR0b24gYmVsb3cgdG8gZW5kIGEgc2Vzc2lvbi5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICB7Y29udGVudH1cbiAgICAgICAgICAgICAgICA8L01vZGFsLkJvZHk+XG4gICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICApO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL2FjdGl2aXR5X2xvZ19tb2RhbC9hY3Rpdml0eV9sb2dfbW9kYWwuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUNBOzs7QUFTQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFxRUE7QUFDQTtBQUNBO0FBdkVBO0FBeUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUhBO0FBU0E7QUFDQTtBQXhHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBYkE7QUFjQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUEwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBRUE7QUFDQTtBQUNBO0FBSEE7QUFWQTtBQUhBO0FBREE7QUF1QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFEQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBREE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQURBO0FBMUNBO0FBcURBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUxBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFIQTtBQVZBO0FBSEE7QUFEQTtBQXVCQTtBQXhCQTtBQUZBO0FBNkJBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSkE7QUFEQTtBQWpDQTtBQThDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQVBBO0FBZkE7QUEwQkE7OztBQWhVQTtBQWpCQTtBQUNBO0FBZ0JBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBREEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2549\n");

/***/ }),

/***/ 2550:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _global_actions = __webpack_require__(57);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _webrtc_actions = __webpack_require__(323);\n\nvar WebrtcActions = _interopRequireWildcard(_webrtc_actions);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _webrtc_store = __webpack_require__(454);\n\nvar _webrtc_store2 = _interopRequireDefault(_webrtc_store);\n\nvar _web_websocket_client = __webpack_require__(461);\n\nvar _web_websocket_client2 = _interopRequireDefault(_web_websocket_client);\n\nvar _constants = __webpack_require__(10);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _ring = __webpack_require__(2282);\n\nvar _ring2 = _interopRequireDefault(_ring);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PreReleaseFeatures = _constants.Constants.PRE_RELEASE_FEATURES; // Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar WebrtcNotification = function (_React$Component) {\n    (0, _inherits3.default)(WebrtcNotification, _React$Component);\n\n    function WebrtcNotification() {\n        (0, _classCallCheck3.default)(this, WebrtcNotification);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (WebrtcNotification.__proto__ || (0, _getPrototypeOf2.default)(WebrtcNotification)).call(this));\n\n        _this.mounted = false;\n\n        _this.closeNotification = _this.closeNotification.bind(_this);\n        _this.onIncomingCall = _this.onIncomingCall.bind(_this);\n        _this.onCancelCall = _this.onCancelCall.bind(_this);\n        _this.onRhs = _this.onRhs.bind(_this);\n        _this.handleClose = _this.handleClose.bind(_this);\n        _this.handleAnswer = _this.handleAnswer.bind(_this);\n        _this.handleTimeout = _this.handleTimeout.bind(_this);\n        _this.stopRinging = _this.stopRinging.bind(_this);\n        _this.closeRightHandSide = _this.closeRightHandSide.bind(_this);\n\n        _this.state = {\n            userCalling: null,\n            rhsOpened: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(WebrtcNotification, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _webrtc_store2.default.addNotifyListener(this.onIncomingCall);\n            _webrtc_store2.default.addChangedListener(this.onCancelCall);\n            _webrtc_store2.default.addRhsChangedListener(this.onRhs);\n            this.mounted = true;\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _webrtc_store2.default.removeNotifyListener(this.onIncomingCall);\n            _webrtc_store2.default.removeChangedListener(this.onCancelCall);\n            _webrtc_store2.default.removeRhsChangedListener(this.onRhs);\n            if (this.refs.ring) {\n                this.refs.ring.removeListener('ended', this.handleTimeout);\n            }\n            this.mounted = false;\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            if (this.state.userCalling) {\n                this.refs.ring.addEventListener('ended', this.handleTimeout);\n            }\n        }\n    }, {\n        key: 'closeNotification',\n        value: function closeNotification() {\n            this.setState({\n                userCalling: null\n            });\n        }\n    }, {\n        key: 'stopRinging',\n        value: function stopRinging() {\n            if (this.refs.ring) {\n                this.refs.ring.pause();\n                this.refs.ring.currentTime = 0;\n            }\n            this.setState({ userCalling: null });\n        }\n    }, {\n        key: 'closeRightHandSide',\n        value: function closeRightHandSide(e) {\n            e.preventDefault();\n            GlobalActions.emitCloseRightHandSide();\n            setTimeout(function () {\n                (0, _jquery2.default)('.app__body .inner-wrap').addClass('move--left');\n            }, 0);\n        }\n    }, {\n        key: 'onIncomingCall',\n        value: function onIncomingCall(incoming) {\n            if (this.mounted) {\n                var userId = incoming.from_user_id;\n                var userMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n                var featureEnabled = Utils.isFeatureEnabled(PreReleaseFeatures.WEBRTC_PREVIEW);\n\n                if (featureEnabled) {\n                    if (_webrtc_store2.default.isBusy()) {\n                        _web_websocket_client2.default.sendMessage('webrtc', {\n                            action: _constants.WebrtcActionTypes.BUSY,\n                            from_user_id: _user_store2.default.getCurrentId(),\n                            to_user_id: userId\n                        });\n                        this.stopRinging();\n                    } else if (userMedia) {\n                        _webrtc_store2.default.setVideoCallWith(userId);\n                        this.setState({\n                            userCalling: _user_store2.default.getProfile(userId)\n                        });\n                    } else {\n                        _web_websocket_client2.default.sendMessage('webrtc', {\n                            action: _constants.WebrtcActionTypes.UNSUPPORTED,\n                            from_user_id: _user_store2.default.getCurrentId(),\n                            to_user_id: userId\n                        });\n                        this.stopRinging();\n                    }\n                } else {\n                    _web_websocket_client2.default.sendMessage('webrtc', {\n                        action: _constants.WebrtcActionTypes.DISABLED,\n                        from_user_id: _user_store2.default.getCurrentId(),\n                        to_user_id: userId\n                    });\n                    this.stopRinging();\n                }\n            }\n        }\n    }, {\n        key: 'onCancelCall',\n        value: function onCancelCall(message) {\n            if (message && message.action !== _constants.WebrtcActionTypes.CANCEL) {\n                return;\n            } else if (message && message.action === _constants.WebrtcActionTypes.CANCEL && this.state.userCalling && message.from_user_id !== this.state.userCalling.id) {\n                return;\n            }\n\n            _webrtc_store2.default.setVideoCallWith(null);\n            this.closeNotification();\n        }\n    }, {\n        key: 'onRhs',\n        value: function onRhs(rhsOpened) {\n            this.setState({ rhsOpened: rhsOpened });\n        }\n    }, {\n        key: 'handleTimeout',\n        value: function handleTimeout() {\n            _web_websocket_client2.default.sendMessage('webrtc', {\n                action: _constants.WebrtcActionTypes.NO_ANSWER,\n                from_user_id: _user_store2.default.getCurrentId(),\n                to_user_id: this.state.userCalling.id\n            });\n\n            this.onCancelCall();\n        }\n    }, {\n        key: 'handleAnswer',\n        value: function handleAnswer(e) {\n            if (e) {\n                e.preventDefault();\n            }\n\n            var caller = this.state.userCalling;\n            if (caller) {\n                var callerId = caller.id;\n                var currentUserId = _user_store2.default.getCurrentId();\n                var message = {\n                    action: _constants.WebrtcActionTypes.ANSWER,\n                    from_user_id: currentUserId,\n                    to_user_id: callerId\n                };\n\n                GlobalActions.emitCloseRightHandSide();\n                WebrtcActions.initWebrtc(callerId, false);\n                _web_websocket_client2.default.sendMessage('webrtc', message);\n\n                // delay till next tick (this will give time to listen for events\n                setTimeout(function () {\n                    //we switch from and to user to handle the event locally\n                    message.from_user_id = callerId;\n                    message.to_user_id = currentUserId;\n                    WebrtcActions.handle(message);\n                }, 0);\n\n                this.closeNotification();\n            }\n        }\n    }, {\n        key: 'handleClose',\n        value: function handleClose(e) {\n            if (e) {\n                e.preventDefault();\n            }\n            if (this.state.userCalling) {\n                _web_websocket_client2.default.sendMessage('webrtc', {\n                    action: _constants.WebrtcActionTypes.DECLINE,\n                    from_user_id: _user_store2.default.getCurrentId(),\n                    to_user_id: this.state.userCalling.id\n                });\n            }\n\n            this.onCancelCall();\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var user = this.state.userCalling;\n            if (user) {\n                var username = Utils.displayUsername(user.id);\n                var profileImgSrc = Utils.imageURLForUser(user);\n                var profileImg = _react2.default.createElement('img', {\n                    className: 'user-popover__image',\n                    src: profileImgSrc,\n                    height: '128',\n                    width: '128',\n                    key: 'user-popover-image'\n                });\n                var answerBtn = _react2.default.createElement(\n                    'svg',\n                    {\n                        className: 'webrtc-icons__pickup',\n                        xmlns: 'http://www.w3.org/2000/svg',\n                        width: '48',\n                        height: '48',\n                        viewBox: '-10 -10 68 68',\n                        onClick: this.handleAnswer\n                    },\n                    _react2.default.createElement(\n                        'circle',\n                        {\n                            cx: '24',\n                            cy: '24',\n                            r: '34'\n                        },\n                        _react2.default.createElement(\n                            'title',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'webrtc.notification.answer',\n                                defaultMessage: 'Answer'\n                            })\n                        )\n                    ),\n                    _react2.default.createElement('path', {\n                        transform: 'translate(-10,-10)',\n                        fill: '#fff',\n                        d: 'M29.854,37.627c1.723,1.904 3.679,3.468 5.793,4.684l3.683,-3.334c0.469,-0.424 1.119,-0.517 1.669,-0.302c1.628,0.63 3.331,1.021 5.056,1.174c0.401,0.026 0.795,0.199 1.09,0.525c0.295,0.326 0.433,0.741 0.407,1.153l-0.279,5.593c-0.02,0.418 -0.199,0.817 -0.525,1.112c-0.326,0.296 -0.741,0.434 -1.159,0.413c-6.704,-0.504 -13.238,-3.491 -18.108,-8.87c-4.869,-5.38 -7.192,-12.179 -7.028,-18.899c0.015,-0.413 0.199,-0.817 0.526,-1.113c0.326,-0.295 0.74,-0.433 1.153,-0.407l5.593,0.279c0.407,0.02 0.812,0.193 1.107,0.519c0.29,0.32 0.428,0.735 0.413,1.137c-0.018,1.732 0.202,3.464 0.667,5.147c0.159,0.569 0.003,1.207 -0.466,1.631l-3.683,3.334c1.005,2.219 2.368,4.32 4.091,6.224Z'\n                    })\n                );\n\n                var rejectBtn = _react2.default.createElement(\n                    'svg',\n                    {\n                        className: 'webrtc-icons__cancel',\n                        xmlns: 'http://www.w3.org/2000/svg',\n                        width: '48',\n                        height: '48',\n                        viewBox: '-10 -10 68 68',\n                        onClick: this.handleClose\n                    },\n                    _react2.default.createElement(\n                        'circle',\n                        {\n                            cx: '24',\n                            cy: '24',\n                            r: '34'\n                        },\n                        _react2.default.createElement(\n                            'title',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'webrtc.notification.decline',\n                                defaultMessage: 'Decline'\n                            })\n                        )\n                    ),\n                    _react2.default.createElement('path', {\n                        transform: 'scale(0.7), translate(11,10)',\n                        d: 'M24 18c-3.21 0-6.3.5-9.2 1.44v6.21c0 .79-.46 1.47-1.12 1.8-1.95.98-3.74 2.23-5.33 3.7-.36.35-.85.57-1.4.57-.55 0-1.05-.22-1.41-.59L.59 26.18c-.37-.37-.59-.87-.59-1.42 0-.55.22-1.05.59-1.42C6.68 17.55 14.93 14 24 14s17.32 3.55 23.41 9.34c.37.36.59.87.59 1.42 0 .55-.22 1.05-.59 1.41l-4.95 4.95c-.36.36-.86.59-1.41.59-.54 0-1.04-.22-1.4-.57-1.59-1.47-3.38-2.72-5.33-3.7-.66-.33-1.12-1.01-1.12-1.8v-6.21C30.3 18.5 27.21 18 24 18z',\n                        fill: 'white'\n                    })\n                );\n\n                var msg = _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'webrtc.notification.incoming_call',\n                        defaultMessage: '{username} is calling you.',\n                        values: {\n                            username: username\n                        }\n                    }),\n                    _react2.default.createElement(\n                        'div',\n                        {\n                            className: 'webrtc-buttons webrtc-icons active',\n                            style: { marginTop: '5px' }\n                        },\n                        answerBtn,\n                        rejectBtn\n                    )\n                );\n\n                return _react2.default.createElement(\n                    'div',\n                    { className: 'webrtc-notification' },\n                    _react2.default.createElement('audio', {\n                        ref: 'ring',\n                        src: _ring2.default,\n                        autoPlay: true\n                    }),\n                    _react2.default.createElement(\n                        'div',\n                        null,\n                        profileImg\n                    ),\n                    msg\n                );\n            } else if (this.state.rhsOpened && _webrtc_store2.default.isBusy()) {\n                return _react2.default.createElement(\n                    'div',\n                    {\n                        className: 'webrtc__notification--rhs',\n                        onClick: this.closeRightHandSide\n                    },\n                    _react2.default.createElement('i', { className: 'fa fa-phone' }),\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'webrtc.notification.returnToCall',\n                        defaultMessage: 'Return to ongoing call with {username}',\n                        values: {\n                            username: Utils.displayUsername(_webrtc_store2.default.getVideoCallWith())\n                        }\n                    })\n                );\n            }\n\n            return _react2.default.createElement('div', null);\n        }\n    }]);\n    return WebrtcNotification;\n}(_react2.default.Component);\n\nexports.default = WebrtcNotification;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1MC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3dlYnJ0Yy9jb21wb25lbnRzL3dlYnJ0Y19ub3RpZmljYXRpb24uanN4PzQxODQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE2LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcblxuaW1wb3J0ICogYXMgR2xvYmFsQWN0aW9ucyBmcm9tICdhY3Rpb25zL2dsb2JhbF9hY3Rpb25zLmpzeCc7XG5pbXBvcnQgKiBhcyBXZWJydGNBY3Rpb25zIGZyb20gJ2FjdGlvbnMvd2VicnRjX2FjdGlvbnMuanN4JztcbmltcG9ydCBVc2VyU3RvcmUgZnJvbSAnc3RvcmVzL3VzZXJfc3RvcmUuanN4JztcbmltcG9ydCBXZWJydGNTdG9yZSBmcm9tICdzdG9yZXMvd2VicnRjX3N0b3JlLmpzeCc7XG5cbmltcG9ydCBXZWJTb2NrZXRDbGllbnQgZnJvbSAnY2xpZW50L3dlYl93ZWJzb2NrZXRfY2xpZW50LmpzeCc7XG5cbmltcG9ydCB7Q29uc3RhbnRzLCBXZWJydGNBY3Rpb25UeXBlc30gZnJvbSAndXRpbHMvY29uc3RhbnRzLmpzeCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICd1dGlscy91dGlscy5qc3gnO1xuXG5pbXBvcnQgcmluZyBmcm9tICdpbWFnZXMvcmluZy5tcDMnO1xuXG5jb25zdCBQcmVSZWxlYXNlRmVhdHVyZXMgPSBDb25zdGFudHMuUFJFX1JFTEVBU0VfRkVBVFVSRVM7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFdlYnJ0Y05vdGlmaWNhdGlvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5jbG9zZU5vdGlmaWNhdGlvbiA9IHRoaXMuY2xvc2VOb3RpZmljYXRpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkluY29taW5nQ2FsbCA9IHRoaXMub25JbmNvbWluZ0NhbGwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkNhbmNlbENhbGwgPSB0aGlzLm9uQ2FuY2VsQ2FsbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uUmhzID0gdGhpcy5vblJocy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUNsb3NlID0gdGhpcy5oYW5kbGVDbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmhhbmRsZUFuc3dlciA9IHRoaXMuaGFuZGxlQW5zd2VyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlVGltZW91dCA9IHRoaXMuaGFuZGxlVGltZW91dC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN0b3BSaW5naW5nID0gdGhpcy5zdG9wUmluZ2luZy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNsb3NlUmlnaHRIYW5kU2lkZSA9IHRoaXMuY2xvc2VSaWdodEhhbmRTaWRlLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHVzZXJDYWxsaW5nOiBudWxsLFxuICAgICAgICAgICAgcmhzT3BlbmVkOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBXZWJydGNTdG9yZS5hZGROb3RpZnlMaXN0ZW5lcih0aGlzLm9uSW5jb21pbmdDYWxsKTtcbiAgICAgICAgV2VicnRjU3RvcmUuYWRkQ2hhbmdlZExpc3RlbmVyKHRoaXMub25DYW5jZWxDYWxsKTtcbiAgICAgICAgV2VicnRjU3RvcmUuYWRkUmhzQ2hhbmdlZExpc3RlbmVyKHRoaXMub25SaHMpO1xuICAgICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBXZWJydGNTdG9yZS5yZW1vdmVOb3RpZnlMaXN0ZW5lcih0aGlzLm9uSW5jb21pbmdDYWxsKTtcbiAgICAgICAgV2VicnRjU3RvcmUucmVtb3ZlQ2hhbmdlZExpc3RlbmVyKHRoaXMub25DYW5jZWxDYWxsKTtcbiAgICAgICAgV2VicnRjU3RvcmUucmVtb3ZlUmhzQ2hhbmdlZExpc3RlbmVyKHRoaXMub25SaHMpO1xuICAgICAgICBpZiAodGhpcy5yZWZzLnJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucmVmcy5yaW5nLnJlbW92ZUxpc3RlbmVyKCdlbmRlZCcsIHRoaXMuaGFuZGxlVGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS51c2VyQ2FsbGluZykge1xuICAgICAgICAgICAgdGhpcy5yZWZzLnJpbmcuYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCB0aGlzLmhhbmRsZVRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xvc2VOb3RpZmljYXRpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgdXNlckNhbGxpbmc6IG51bGxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RvcFJpbmdpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlZnMucmluZykge1xuICAgICAgICAgICAgdGhpcy5yZWZzLnJpbmcucGF1c2UoKTtcbiAgICAgICAgICAgIHRoaXMucmVmcy5yaW5nLmN1cnJlbnRUaW1lID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHt1c2VyQ2FsbGluZzogbnVsbH0pO1xuICAgIH1cblxuICAgIGNsb3NlUmlnaHRIYW5kU2lkZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgR2xvYmFsQWN0aW9ucy5lbWl0Q2xvc2VSaWdodEhhbmRTaWRlKCk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgJCgnLmFwcF9fYm9keSAuaW5uZXItd3JhcCcpLmFkZENsYXNzKCdtb3ZlLS1sZWZ0Jyk7XG4gICAgICAgIH0sIDApO1xuICAgIH1cblxuICAgIG9uSW5jb21pbmdDYWxsKGluY29taW5nKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdW50ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IGluY29taW5nLmZyb21fdXNlcl9pZDtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJNZWRpYSA9IG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhO1xuICAgICAgICAgICAgY29uc3QgZmVhdHVyZUVuYWJsZWQgPSBVdGlscy5pc0ZlYXR1cmVFbmFibGVkKFByZVJlbGVhc2VGZWF0dXJlcy5XRUJSVENfUFJFVklFVyk7XG5cbiAgICAgICAgICAgIGlmIChmZWF0dXJlRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGlmIChXZWJydGNTdG9yZS5pc0J1c3koKSkge1xuICAgICAgICAgICAgICAgICAgICBXZWJTb2NrZXRDbGllbnQuc2VuZE1lc3NhZ2UoJ3dlYnJ0YycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogV2VicnRjQWN0aW9uVHlwZXMuQlVTWSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21fdXNlcl9pZDogVXNlclN0b3JlLmdldEN1cnJlbnRJZCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9fdXNlcl9pZDogdXNlcklkXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3BSaW5naW5nKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1c2VyTWVkaWEpIHtcbiAgICAgICAgICAgICAgICAgICAgV2VicnRjU3RvcmUuc2V0VmlkZW9DYWxsV2l0aCh1c2VySWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJDYWxsaW5nOiBVc2VyU3RvcmUuZ2V0UHJvZmlsZSh1c2VySWQpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIFdlYlNvY2tldENsaWVudC5zZW5kTWVzc2FnZSgnd2VicnRjJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBXZWJydGNBY3Rpb25UeXBlcy5VTlNVUFBPUlRFRCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21fdXNlcl9pZDogVXNlclN0b3JlLmdldEN1cnJlbnRJZCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9fdXNlcl9pZDogdXNlcklkXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3BSaW5naW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBXZWJTb2NrZXRDbGllbnQuc2VuZE1lc3NhZ2UoJ3dlYnJ0YycsIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBXZWJydGNBY3Rpb25UeXBlcy5ESVNBQkxFRCxcbiAgICAgICAgICAgICAgICAgICAgZnJvbV91c2VyX2lkOiBVc2VyU3RvcmUuZ2V0Q3VycmVudElkKCksXG4gICAgICAgICAgICAgICAgICAgIHRvX3VzZXJfaWQ6IHVzZXJJZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcFJpbmdpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2FuY2VsQ2FsbChtZXNzYWdlKSB7XG4gICAgICAgIGlmIChtZXNzYWdlICYmIG1lc3NhZ2UuYWN0aW9uICE9PSBXZWJydGNBY3Rpb25UeXBlcy5DQU5DRUwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlICYmIG1lc3NhZ2UuYWN0aW9uID09PSBXZWJydGNBY3Rpb25UeXBlcy5DQU5DRUwgJiYgdGhpcy5zdGF0ZS51c2VyQ2FsbGluZyAmJiBtZXNzYWdlLmZyb21fdXNlcl9pZCAhPT0gdGhpcy5zdGF0ZS51c2VyQ2FsbGluZy5pZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgV2VicnRjU3RvcmUuc2V0VmlkZW9DYWxsV2l0aChudWxsKTtcbiAgICAgICAgdGhpcy5jbG9zZU5vdGlmaWNhdGlvbigpO1xuICAgIH1cblxuICAgIG9uUmhzKHJoc09wZW5lZCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtyaHNPcGVuZWR9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVUaW1lb3V0KCkge1xuICAgICAgICBXZWJTb2NrZXRDbGllbnQuc2VuZE1lc3NhZ2UoJ3dlYnJ0YycsIHtcbiAgICAgICAgICAgIGFjdGlvbjogV2VicnRjQWN0aW9uVHlwZXMuTk9fQU5TV0VSLFxuICAgICAgICAgICAgZnJvbV91c2VyX2lkOiBVc2VyU3RvcmUuZ2V0Q3VycmVudElkKCksXG4gICAgICAgICAgICB0b191c2VyX2lkOiB0aGlzLnN0YXRlLnVzZXJDYWxsaW5nLmlkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMub25DYW5jZWxDYWxsKCk7XG4gICAgfVxuXG4gICAgaGFuZGxlQW5zd2VyKGUpIHtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhbGxlciA9IHRoaXMuc3RhdGUudXNlckNhbGxpbmc7XG4gICAgICAgIGlmIChjYWxsZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxlcklkID0gY2FsbGVyLmlkO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFVzZXJJZCA9IFVzZXJTdG9yZS5nZXRDdXJyZW50SWQoKTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBXZWJydGNBY3Rpb25UeXBlcy5BTlNXRVIsXG4gICAgICAgICAgICAgICAgZnJvbV91c2VyX2lkOiBjdXJyZW50VXNlcklkLFxuICAgICAgICAgICAgICAgIHRvX3VzZXJfaWQ6IGNhbGxlcklkXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBHbG9iYWxBY3Rpb25zLmVtaXRDbG9zZVJpZ2h0SGFuZFNpZGUoKTtcbiAgICAgICAgICAgIFdlYnJ0Y0FjdGlvbnMuaW5pdFdlYnJ0YyhjYWxsZXJJZCwgZmFsc2UpO1xuICAgICAgICAgICAgV2ViU29ja2V0Q2xpZW50LnNlbmRNZXNzYWdlKCd3ZWJydGMnLCBtZXNzYWdlKTtcblxuICAgICAgICAgICAgLy8gZGVsYXkgdGlsbCBuZXh0IHRpY2sgKHRoaXMgd2lsbCBnaXZlIHRpbWUgdG8gbGlzdGVuIGZvciBldmVudHNcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vd2Ugc3dpdGNoIGZyb20gYW5kIHRvIHVzZXIgdG8gaGFuZGxlIHRoZSBldmVudCBsb2NhbGx5XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5mcm9tX3VzZXJfaWQgPSBjYWxsZXJJZDtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnRvX3VzZXJfaWQgPSBjdXJyZW50VXNlcklkO1xuICAgICAgICAgICAgICAgIFdlYnJ0Y0FjdGlvbnMuaGFuZGxlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSwgMCk7XG5cbiAgICAgICAgICAgIHRoaXMuY2xvc2VOb3RpZmljYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUNsb3NlKGUpIHtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZS51c2VyQ2FsbGluZykge1xuICAgICAgICAgICAgV2ViU29ja2V0Q2xpZW50LnNlbmRNZXNzYWdlKCd3ZWJydGMnLCB7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiBXZWJydGNBY3Rpb25UeXBlcy5ERUNMSU5FLFxuICAgICAgICAgICAgICAgIGZyb21fdXNlcl9pZDogVXNlclN0b3JlLmdldEN1cnJlbnRJZCgpLFxuICAgICAgICAgICAgICAgIHRvX3VzZXJfaWQ6IHRoaXMuc3RhdGUudXNlckNhbGxpbmcuaWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vbkNhbmNlbENhbGwoKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSB0aGlzLnN0YXRlLnVzZXJDYWxsaW5nO1xuICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBVdGlscy5kaXNwbGF5VXNlcm5hbWUodXNlci5pZCk7XG4gICAgICAgICAgICBjb25zdCBwcm9maWxlSW1nU3JjID0gVXRpbHMuaW1hZ2VVUkxGb3JVc2VyKHVzZXIpO1xuICAgICAgICAgICAgY29uc3QgcHJvZmlsZUltZyA9IChcbiAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndXNlci1wb3BvdmVyX19pbWFnZSdcbiAgICAgICAgICAgICAgICAgICAgc3JjPXtwcm9maWxlSW1nU3JjfVxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9JzEyOCdcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9JzEyOCdcbiAgICAgICAgICAgICAgICAgICAga2V5PSd1c2VyLXBvcG92ZXItaW1hZ2UnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBhbnN3ZXJCdG4gPSAoXG4gICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3dlYnJ0Yy1pY29uc19fcGlja3VwJ1xuICAgICAgICAgICAgICAgICAgICB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPSc0OCdcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSc0OCdcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveD0nLTEwIC0xMCA2OCA2OCdcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5oYW5kbGVBbnN3ZXJ9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlXG4gICAgICAgICAgICAgICAgICAgICAgICBjeD0nMjQnXG4gICAgICAgICAgICAgICAgICAgICAgICBjeT0nMjQnXG4gICAgICAgICAgICAgICAgICAgICAgICByPSczNCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd3ZWJydGMubm90aWZpY2F0aW9uLmFuc3dlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0Fuc3dlcidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aXRsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9jaXJjbGU+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtMTAsLTEwKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9JyNmZmYnXG4gICAgICAgICAgICAgICAgICAgICAgICBkPSdNMjkuODU0LDM3LjYyN2MxLjcyMywxLjkwNCAzLjY3OSwzLjQ2OCA1Ljc5Myw0LjY4NGwzLjY4MywtMy4zMzRjMC40NjksLTAuNDI0IDEuMTE5LC0wLjUxNyAxLjY2OSwtMC4zMDJjMS42MjgsMC42MyAzLjMzMSwxLjAyMSA1LjA1NiwxLjE3NGMwLjQwMSwwLjAyNiAwLjc5NSwwLjE5OSAxLjA5LDAuNTI1YzAuMjk1LDAuMzI2IDAuNDMzLDAuNzQxIDAuNDA3LDEuMTUzbC0wLjI3OSw1LjU5M2MtMC4wMiwwLjQxOCAtMC4xOTksMC44MTcgLTAuNTI1LDEuMTEyYy0wLjMyNiwwLjI5NiAtMC43NDEsMC40MzQgLTEuMTU5LDAuNDEzYy02LjcwNCwtMC41MDQgLTEzLjIzOCwtMy40OTEgLTE4LjEwOCwtOC44N2MtNC44NjksLTUuMzggLTcuMTkyLC0xMi4xNzkgLTcuMDI4LC0xOC44OTljMC4wMTUsLTAuNDEzIDAuMTk5LC0wLjgxNyAwLjUyNiwtMS4xMTNjMC4zMjYsLTAuMjk1IDAuNzQsLTAuNDMzIDEuMTUzLC0wLjQwN2w1LjU5MywwLjI3OWMwLjQwNywwLjAyIDAuODEyLDAuMTkzIDEuMTA3LDAuNTE5YzAuMjksMC4zMiAwLjQyOCwwLjczNSAwLjQxMywxLjEzN2MtMC4wMTgsMS43MzIgMC4yMDIsMy40NjQgMC42NjcsNS4xNDdjMC4xNTksMC41NjkgMC4wMDMsMS4yMDcgLTAuNDY2LDEuNjMxbC0zLjY4MywzLjMzNGMxLjAwNSwyLjIxOSAyLjM2OCw0LjMyIDQuMDkxLDYuMjI0WidcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlamVjdEJ0biA9IChcbiAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nd2VicnRjLWljb25zX19jYW5jZWwnXG4gICAgICAgICAgICAgICAgICAgIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZydcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9JzQ4J1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9JzQ4J1xuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PSctMTAgLTEwIDY4IDY4J1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsb3NlfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZVxuICAgICAgICAgICAgICAgICAgICAgICAgY3g9JzI0J1xuICAgICAgICAgICAgICAgICAgICAgICAgY3k9JzI0J1xuICAgICAgICAgICAgICAgICAgICAgICAgcj0nMzQnXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD0nd2VicnRjLm5vdGlmaWNhdGlvbi5kZWNsaW5lJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nRGVjbGluZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aXRsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9jaXJjbGU+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09J3NjYWxlKDAuNyksIHRyYW5zbGF0ZSgxMSwxMCknXG4gICAgICAgICAgICAgICAgICAgICAgICBkPSdNMjQgMThjLTMuMjEgMC02LjMuNS05LjIgMS40NHY2LjIxYzAgLjc5LS40NiAxLjQ3LTEuMTIgMS44LTEuOTUuOTgtMy43NCAyLjIzLTUuMzMgMy43LS4zNi4zNS0uODUuNTctMS40LjU3LS41NSAwLTEuMDUtLjIyLTEuNDEtLjU5TC41OSAyNi4xOGMtLjM3LS4zNy0uNTktLjg3LS41OS0xLjQyIDAtLjU1LjIyLTEuMDUuNTktMS40MkM2LjY4IDE3LjU1IDE0LjkzIDE0IDI0IDE0czE3LjMyIDMuNTUgMjMuNDEgOS4zNGMuMzcuMzYuNTkuODcuNTkgMS40MiAwIC41NS0uMjIgMS4wNS0uNTkgMS40MWwtNC45NSA0Ljk1Yy0uMzYuMzYtLjg2LjU5LTEuNDEuNTktLjU0IDAtMS4wNC0uMjItMS40LS41Ny0xLjU5LTEuNDctMy4zOC0yLjcyLTUuMzMtMy43LS42Ni0uMzMtMS4xMi0xLjAxLTEuMTItMS44di02LjIxQzMwLjMgMTguNSAyNy4yMSAxOCAyNCAxOHonXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSd3aGl0ZSdcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IChcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3dlYnJ0Yy5ub3RpZmljYXRpb24uaW5jb21pbmdfY2FsbCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSd7dXNlcm5hbWV9IGlzIGNhbGxpbmcgeW91LidcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3dlYnJ0Yy1idXR0b25zIHdlYnJ0Yy1pY29ucyBhY3RpdmUnXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpblRvcDogJzVweCd9fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7YW5zd2VyQnRufVxuICAgICAgICAgICAgICAgICAgICAgICAge3JlamVjdEJ0bn1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd3ZWJydGMtbm90aWZpY2F0aW9uJz5cbiAgICAgICAgICAgICAgICAgICAgPGF1ZGlvXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9J3JpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmM9e3Jpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvUGxheT17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtwcm9maWxlSW1nfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAge21zZ31cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5yaHNPcGVuZWQgJiYgV2VicnRjU3RvcmUuaXNCdXN5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3dlYnJ0Y19fbm90aWZpY2F0aW9uLS1yaHMnXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuY2xvc2VSaWdodEhhbmRTaWRlfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1waG9uZScvPlxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3dlYnJ0Yy5ub3RpZmljYXRpb24ucmV0dXJuVG9DYWxsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1JldHVybiB0byBvbmdvaW5nIGNhbGwgd2l0aCB7dXNlcm5hbWV9J1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IFV0aWxzLmRpc3BsYXlVc2VybmFtZShXZWJydGNTdG9yZS5nZXRWaWRlb0NhbGxXaXRoKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiA8ZGl2Lz47XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvd2VicnRjL2NvbXBvbmVudHMvd2VicnRjX25vdGlmaWNhdGlvbi5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBQ0E7QUFuQkE7QUFDQTtBQW9CQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBZkE7QUFtQkE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUxBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQXBCQTtBQUNBO0FBMkJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTEE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBcEJBO0FBQ0E7QUEyQkE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBTEE7QUFSQTtBQUNBO0FBaUJBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFUQTtBQVlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQUxBO0FBY0E7QUFDQTtBQUNBO0FBQ0E7OztBQTNTQTtBQUNBO0FBREEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2550\n");

/***/ }),

/***/ 2551:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _webrtc_store = __webpack_require__(454);\n\nvar _webrtc_store2 = _interopRequireDefault(_webrtc_store);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _webrtc_controller = __webpack_require__(2552);\n\nvar _webrtc_controller2 = _interopRequireDefault(_webrtc_controller);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar SidebarRight = function (_React$Component) {\n    (0, _inherits3.default)(SidebarRight, _React$Component);\n\n    function SidebarRight(props) {\n        (0, _classCallCheck3.default)(this, SidebarRight);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (SidebarRight.__proto__ || (0, _getPrototypeOf2.default)(SidebarRight)).call(this, props));\n\n        _this.plScrolledToBottom = true;\n\n        _this.onShrink = _this.onShrink.bind(_this);\n        _this.toggleSize = _this.toggleSize.bind(_this);\n        _this.onInitializeVideoCall = _this.onInitializeVideoCall.bind(_this);\n\n        _this.doStrangeThings = _this.doStrangeThings.bind(_this);\n\n        _this.state = {\n            expanded: false,\n            currentUser: _user_store2.default.getCurrentUser(),\n            videoCallVisible: false,\n            isCaller: false,\n            videoCallWithUserId: null\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(SidebarRight, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _webrtc_store2.default.addInitListener(this.onInitializeVideoCall);\n            this.doStrangeThings();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _webrtc_store2.default.removeInitListener(this.onInitializeVideoCall);\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            return !Utils.areObjectsEqual(nextState, this.state);\n        }\n    }, {\n        key: 'doStrangeThings',\n        value: function doStrangeThings() {\n            // We should have a better way to do this stuff\n            // Hence the function name.\n            (0, _jquery2.default)('.app__body .inner-wrap').removeClass('move--right');\n            (0, _jquery2.default)('.app__body .inner-wrap').addClass('webrtc--show move--left');\n            (0, _jquery2.default)('.app__body .sidebar--left').removeClass('move--right');\n            (0, _jquery2.default)('.multi-teams .team-sidebar').removeClass('move--right');\n            (0, _jquery2.default)('.app__body .webrtc').addClass('webrtc--show');\n\n            //$('.sidebar--right').prepend('<div class=\"sidebar__overlay\"></div>');\n            if (!this.state.videoCallVisible) {\n                (0, _jquery2.default)('.app__body .inner-wrap').removeClass('webrtc--show move--left move--right');\n                (0, _jquery2.default)('.app__body .webrtc').removeClass('webrtc--show');\n                return _react2.default.createElement('div', null);\n            }\n            return null;\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            this.doStrangeThings();\n        }\n    }, {\n        key: 'onShrink',\n        value: function onShrink() {\n            this.setState({ expanded: false });\n        }\n    }, {\n        key: 'toggleSize',\n        value: function toggleSize(e) {\n            if (e) {\n                e.preventDefault();\n            }\n            this.setState(function (prevState) {\n                return { expanded: !prevState.expanded };\n            });\n        }\n    }, {\n        key: 'onInitializeVideoCall',\n        value: function onInitializeVideoCall(userId, isCaller) {\n            var expanded = this.state.expanded;\n            if (userId === null) {\n                expanded = false;\n            }\n            this.setState({\n                videoCallVisible: userId !== null,\n                isCaller: isCaller,\n                videoCallWithUserId: userId,\n                expanded: expanded\n            });\n\n            if (userId !== null) {\n                this.forceUpdate();\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var content = null;\n            var expandedClass = '';\n\n            if (this.state.expanded) {\n                expandedClass = 'sidebar--right--expanded';\n            }\n\n            if (this.state.videoCallVisible) {\n                content = _react2.default.createElement(_webrtc_controller2.default, {\n                    currentUser: this.state.currentUser,\n                    userId: this.state.videoCallWithUserId,\n                    isCaller: this.state.isCaller,\n                    expanded: this.state.expanded,\n                    toggleSize: this.toggleSize\n                });\n            }\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    className: 'sidebar--right webrtc ' + expandedClass,\n                    id: 'sidebar-webrtc'\n                },\n                _react2.default.createElement('div', {\n                    onClick: this.onShrink,\n                    className: 'sidebar--right__bg'\n                }),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'sidebar-right-container' },\n                    content\n                )\n            );\n        }\n    }]);\n    return SidebarRight;\n}(_react2.default.Component);\n\nexports.default = SidebarRight;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1MS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3dlYnJ0Yy9jb21wb25lbnRzL3dlYnJ0Y19zaWRlYmFyLmpzeD8yN2Q3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAxNi1wcmVzZW50IE1hdHRlcm1vc3QsIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbi8vIFNlZSBMaWNlbnNlLnR4dCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cblxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IFVzZXJTdG9yZSBmcm9tICdzdG9yZXMvdXNlcl9zdG9yZS5qc3gnO1xuaW1wb3J0IFdlYnJ0Y1N0b3JlIGZyb20gJ3N0b3Jlcy93ZWJydGNfc3RvcmUuanN4JztcblxuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAndXRpbHMvdXRpbHMuanN4JztcblxuaW1wb3J0IFdlYnJ0Y0NvbnRyb2xsZXIgZnJvbSAnLi4vd2VicnRjX2NvbnRyb2xsZXIuanN4JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2lkZWJhclJpZ2h0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5wbFNjcm9sbGVkVG9Cb3R0b20gPSB0cnVlO1xuXG4gICAgICAgIHRoaXMub25TaHJpbmsgPSB0aGlzLm9uU2hyaW5rLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudG9nZ2xlU2l6ZSA9IHRoaXMudG9nZ2xlU2l6ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uSW5pdGlhbGl6ZVZpZGVvQ2FsbCA9IHRoaXMub25Jbml0aWFsaXplVmlkZW9DYWxsLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5kb1N0cmFuZ2VUaGluZ3MgPSB0aGlzLmRvU3RyYW5nZVRoaW5ncy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBleHBhbmRlZDogZmFsc2UsXG4gICAgICAgICAgICBjdXJyZW50VXNlcjogVXNlclN0b3JlLmdldEN1cnJlbnRVc2VyKCksXG4gICAgICAgICAgICB2aWRlb0NhbGxWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGlzQ2FsbGVyOiBmYWxzZSxcbiAgICAgICAgICAgIHZpZGVvQ2FsbFdpdGhVc2VySWQ6IG51bGxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgV2VicnRjU3RvcmUuYWRkSW5pdExpc3RlbmVyKHRoaXMub25Jbml0aWFsaXplVmlkZW9DYWxsKTtcbiAgICAgICAgdGhpcy5kb1N0cmFuZ2VUaGluZ3MoKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgV2VicnRjU3RvcmUucmVtb3ZlSW5pdExpc3RlbmVyKHRoaXMub25Jbml0aWFsaXplVmlkZW9DYWxsKTtcbiAgICB9XG5cbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICAgICAgcmV0dXJuICFVdGlscy5hcmVPYmplY3RzRXF1YWwobmV4dFN0YXRlLCB0aGlzLnN0YXRlKTtcbiAgICB9XG5cbiAgICBkb1N0cmFuZ2VUaGluZ3MoKSB7XG4gICAgICAgIC8vIFdlIHNob3VsZCBoYXZlIGEgYmV0dGVyIHdheSB0byBkbyB0aGlzIHN0dWZmXG4gICAgICAgIC8vIEhlbmNlIHRoZSBmdW5jdGlvbiBuYW1lLlxuICAgICAgICAkKCcuYXBwX19ib2R5IC5pbm5lci13cmFwJykucmVtb3ZlQ2xhc3MoJ21vdmUtLXJpZ2h0Jyk7XG4gICAgICAgICQoJy5hcHBfX2JvZHkgLmlubmVyLXdyYXAnKS5hZGRDbGFzcygnd2VicnRjLS1zaG93IG1vdmUtLWxlZnQnKTtcbiAgICAgICAgJCgnLmFwcF9fYm9keSAuc2lkZWJhci0tbGVmdCcpLnJlbW92ZUNsYXNzKCdtb3ZlLS1yaWdodCcpO1xuICAgICAgICAkKCcubXVsdGktdGVhbXMgLnRlYW0tc2lkZWJhcicpLnJlbW92ZUNsYXNzKCdtb3ZlLS1yaWdodCcpO1xuICAgICAgICAkKCcuYXBwX19ib2R5IC53ZWJydGMnKS5hZGRDbGFzcygnd2VicnRjLS1zaG93Jyk7XG5cbiAgICAgICAgLy8kKCcuc2lkZWJhci0tcmlnaHQnKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwic2lkZWJhcl9fb3ZlcmxheVwiPjwvZGl2PicpO1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUudmlkZW9DYWxsVmlzaWJsZSkge1xuICAgICAgICAgICAgJCgnLmFwcF9fYm9keSAuaW5uZXItd3JhcCcpLnJlbW92ZUNsYXNzKCd3ZWJydGMtLXNob3cgbW92ZS0tbGVmdCBtb3ZlLS1yaWdodCcpO1xuICAgICAgICAgICAgJCgnLmFwcF9fYm9keSAud2VicnRjJykucmVtb3ZlQ2xhc3MoJ3dlYnJ0Yy0tc2hvdycpO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2Lz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICB0aGlzLmRvU3RyYW5nZVRoaW5ncygpO1xuICAgIH1cblxuICAgIG9uU2hyaW5rKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtleHBhbmRlZDogZmFsc2V9KTtcbiAgICB9XG5cbiAgICB0b2dnbGVTaXplKGUpIHtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKChwcmV2U3RhdGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7ZXhwYW5kZWQ6ICFwcmV2U3RhdGUuZXhwYW5kZWR9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkluaXRpYWxpemVWaWRlb0NhbGwodXNlcklkLCBpc0NhbGxlcikge1xuICAgICAgICBsZXQgZXhwYW5kZWQgPSB0aGlzLnN0YXRlLmV4cGFuZGVkO1xuICAgICAgICBpZiAodXNlcklkID09PSBudWxsKSB7XG4gICAgICAgICAgICBleHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgdmlkZW9DYWxsVmlzaWJsZTogKHVzZXJJZCAhPT0gbnVsbCksXG4gICAgICAgICAgICBpc0NhbGxlcixcbiAgICAgICAgICAgIHZpZGVvQ2FsbFdpdGhVc2VySWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIGV4cGFuZGVkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh1c2VySWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBudWxsO1xuICAgICAgICBsZXQgZXhwYW5kZWRDbGFzcyA9ICcnO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICBleHBhbmRlZENsYXNzID0gJ3NpZGViYXItLXJpZ2h0LS1leHBhbmRlZCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS52aWRlb0NhbGxWaXNpYmxlKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gKFxuICAgICAgICAgICAgICAgIDxXZWJydGNDb250cm9sbGVyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyPXt0aGlzLnN0YXRlLmN1cnJlbnRVc2VyfVxuICAgICAgICAgICAgICAgICAgICB1c2VySWQ9e3RoaXMuc3RhdGUudmlkZW9DYWxsV2l0aFVzZXJJZH1cbiAgICAgICAgICAgICAgICAgICAgaXNDYWxsZXI9e3RoaXMuc3RhdGUuaXNDYWxsZXJ9XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZGVkPXt0aGlzLnN0YXRlLmV4cGFuZGVkfVxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVTaXplPXt0aGlzLnRvZ2dsZVNpemV9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17J3NpZGViYXItLXJpZ2h0IHdlYnJ0YyAnICsgZXhwYW5kZWRDbGFzc31cbiAgICAgICAgICAgICAgICBpZD0nc2lkZWJhci13ZWJydGMnXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uU2hyaW5rfVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3NpZGViYXItLXJpZ2h0X19iZydcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzaWRlYmFyLXJpZ2h0LWNvbnRhaW5lcic+XG4gICAgICAgICAgICAgICAgICAgIHtjb250ZW50fVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNvbXBvbmVudHMvd2VicnRjL2NvbXBvbmVudHMvd2VicnRjX3NpZGViYXIuanN4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQWJBO0FBQ0E7QUFDQTtBQVlBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBWEE7QUFrQkE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQVJBO0FBYUE7OztBQTFIQTtBQUNBO0FBREEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2551\n");

/***/ }),

/***/ 2552:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(7);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(5);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(6);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(8);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(9);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _janus = __webpack_require__(2553);\n\nvar _janus2 = _interopRequireDefault(_janus);\n\nvar _diagnostics_actions = __webpack_require__(239);\n\nvar _webrtc_actions = __webpack_require__(323);\n\nvar WebrtcActions = _interopRequireWildcard(_webrtc_actions);\n\nvar _channel_store = __webpack_require__(34);\n\nvar _channel_store2 = _interopRequireDefault(_channel_store);\n\nvar _user_store = __webpack_require__(28);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _webrtc_store = __webpack_require__(454);\n\nvar _webrtc_store2 = _interopRequireDefault(_webrtc_store);\n\nvar _web_websocket_client = __webpack_require__(461);\n\nvar _web_websocket_client2 = _interopRequireDefault(_web_websocket_client);\n\nvar _constants = __webpack_require__(10);\n\nvar _utils = __webpack_require__(17);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _ring = __webpack_require__(2282);\n\nvar _ring2 = _interopRequireDefault(_ring);\n\nvar _loading_screen = __webpack_require__(238);\n\nvar _loading_screen2 = _interopRequireDefault(_loading_screen);\n\nvar _search_bar = __webpack_require__(787);\n\nvar _search_bar2 = _interopRequireDefault(_search_bar);\n\nvar _webrtc_header = __webpack_require__(2565);\n\nvar _webrtc_header2 = _interopRequireDefault(_webrtc_header);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar VIDEO_WIDTH = 640;\nvar VIDEO_HEIGHT = 360;\nvar MIN_ASPECT = 1.777;\nvar MAX_ASPECT = 1.778;\nvar ALREADY_REGISTERED_ERROR = 477;\nvar USERNAME_TAKEN = 476;\n\nvar WebrtcController = function (_React$Component) {\n    (0, _inherits3.default)(WebrtcController, _React$Component);\n\n    function WebrtcController(props) {\n        (0, _classCallCheck3.default)(this, WebrtcController);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (WebrtcController.__proto__ || (0, _getPrototypeOf2.default)(WebrtcController)).call(this, props));\n\n        _this.mounted = false;\n        _this.localMedia = null;\n        _this.session = null;\n        _this.videocall = null;\n\n        _this.handleResize = _this.handleResize.bind(_this);\n        _this.handleClose = _this.handleClose.bind(_this);\n        _this.close = _this.close.bind(_this);\n        _this.clearError = _this.clearError.bind(_this);\n\n        _this.getLocalMedia = _this.getLocalMedia.bind(_this);\n        _this.stopMediaStream = _this.stopMediaStream.bind(_this);\n        _this.previewVideo = _this.previewVideo.bind(_this);\n        _this.stopRinging = _this.stopRinging.bind(_this);\n\n        _this.handleMakeOffer = _this.handleMakeOffer.bind(_this);\n        _this.handleCancelOffer = _this.handleCancelOffer.bind(_this);\n        _this.handleWebrtcEvent = _this.handleWebrtcEvent.bind(_this);\n        _this.handleVideoCallEvent = _this.handleVideoCallEvent.bind(_this);\n        _this.handleRemoteStream = _this.handleRemoteStream.bind(_this);\n\n        _this.onStatusChange = _this.onStatusChange.bind(_this);\n        _this.onCallDeclined = _this.onCallDeclined.bind(_this);\n        _this.onUnsupported = _this.onUnsupported.bind(_this);\n        _this.onNoAnswer = _this.onNoAnswer.bind(_this);\n        _this.onBusy = _this.onBusy.bind(_this);\n        _this.onDisabled = _this.onDisabled.bind(_this);\n        _this.onFailed = _this.onFailed.bind(_this);\n        _this.onCancelled = _this.onCancelled.bind(_this);\n        _this.onConnectCall = _this.onConnectCall.bind(_this);\n\n        _this.onSessionCreated = _this.onSessionCreated.bind(_this);\n        _this.onSessionError = _this.onSessionError.bind(_this);\n\n        _this.doCall = _this.doCall.bind(_this);\n        _this.doAnswer = _this.doAnswer.bind(_this);\n        _this.doHangup = _this.doHangup.bind(_this);\n        _this.doCleanup = _this.doCleanup.bind(_this);\n\n        _this.renderButtons = _this.renderButtons.bind(_this);\n        _this.onToggleVideo = _this.onToggleVideo.bind(_this);\n        _this.onToggleAudio = _this.onToggleAudio.bind(_this);\n        _this.onToggleRemoteMute = _this.onToggleRemoteMute.bind(_this);\n        _this.toggleIcons = _this.toggleIcons.bind(_this);\n\n        var currentUser = _user_store2.default.getCurrentUser();\n        var remoteUser = _user_store2.default.getProfile(props.userId);\n        var remoteUserImage = Utils.imageURLForUser(remoteUser);\n\n        _this.state = {\n            windowWidth: Utils.windowWidth(),\n            windowHeight: Utils.windowHeight(),\n            channelId: _channel_store2.default.getCurrentId(),\n            currentUser: currentUser,\n            currentUserImage: Utils.imageURLForUser(currentUser),\n            remoteUserImage: remoteUserImage,\n            localMediaLoaded: false,\n            isPaused: false,\n            isMuted: false,\n            isRemotePaused: false,\n            isRemoteMuted: false,\n            isCalling: false,\n            isAnswering: false,\n            callInProgress: false,\n            error: null,\n            errorType: '',\n            ended: null\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(WebrtcController, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            window.addEventListener('resize', this.handleResize);\n            _webrtc_store2.default.addChangedListener(this.handleWebrtcEvent);\n            _user_store2.default.addStatusesChangeListener(this.onStatusChange);\n\n            this.mounted = true;\n            this.previewVideo();\n\n            if (this.props.isCaller) {\n                this.handleMakeOffer();\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            window.removeEventListener('resize', this.handleResize);\n            _webrtc_store2.default.removeChangedListener(this.handleWebrtcEvent);\n            _user_store2.default.removeStatusesChangeListener(this.onStatusChange);\n            this.mounted = false;\n            this.close();\n        }\n    }, {\n        key: 'componentWillReceiveProps',\n        value: function componentWillReceiveProps(nextProps) {\n            if (nextProps.currentUser !== this.props.currentUser || nextProps.userId !== this.props.userId || nextProps.isCaller !== this.props.isCaller) {\n                var remoteUser = _user_store2.default.getProfile(nextProps.userId);\n                var remoteUserImage = Utils.imageURLForUser(remoteUser);\n                this.setState({\n                    error: null,\n                    remoteUserImage: remoteUserImage\n                });\n            }\n\n            if (nextProps.isCaller && nextProps.expanded === this.props.expanded) {\n                this.startCall = true;\n            }\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            if (this.props.isCaller && this.startCall) {\n                this.startCall = false;\n                this.handleMakeOffer();\n            }\n        }\n    }, {\n        key: 'handleResize',\n        value: function handleResize() {\n            this.setState({\n                windowWidth: Utils.windowWidth(),\n                windowHeight: Utils.windowHeight()\n            });\n        }\n    }, {\n        key: 'clearError',\n        value: function clearError() {\n            var _this2 = this;\n\n            setTimeout(function () {\n                _this2.setState({ error: null, ended: null, errorType: '' });\n            }, _constants.Constants.WEBRTC_CLEAR_ERROR_DELAY);\n        }\n    }, {\n        key: 'getLocalMedia',\n        value: function getLocalMedia(constraints, element, callback) {\n            var media = constraints || { audio: true, video: true };\n            navigator.mediaDevices.getUserMedia(media).then(function (stream) {\n                if (element) {\n                    element.srcObject = stream;\n                }\n\n                if (callback && typeof callback === 'function') {\n                    callback(null, stream);\n                }\n            }).catch(function (error) {\n                callback(error);\n            });\n        }\n    }, {\n        key: 'stopMediaStream',\n        value: function stopMediaStream(stream) {\n            var tracks = stream.getTracks();\n            tracks.forEach(function (track) {\n                track.stop();\n            });\n        }\n    }, {\n        key: 'previewVideo',\n        value: function previewVideo() {\n            var _this3 = this;\n\n            if (this.mounted) {\n                if (this.localMedia) {\n                    this.setState({\n                        localMediaLoaded: true,\n                        error: null\n                    });\n                    this.localMedia.enabled = true;\n                } else {\n                    this.getLocalMedia({\n                        audio: true,\n                        video: {\n                            minAspectRatio: MIN_ASPECT,\n                            maxAspectRatio: MAX_ASPECT,\n                            width: VIDEO_WIDTH,\n                            height: VIDEO_HEIGHT\n                        }\n                    }, this.refs['local-video'], function (error, stream) {\n                        if (error) {\n                            _this3.setState({\n                                error: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'webrtc.mediaError',\n                                    defaultMessage: 'Unable to access Camera and Microphone'\n                                })\n                            });\n                            return;\n                        }\n                        _this3.localMedia = stream;\n                        _this3.setState({\n                            localMediaLoaded: true\n                        });\n                    });\n                }\n            }\n        }\n    }, {\n        key: 'stopRinging',\n        value: function stopRinging() {\n            if (this.refs.ring) {\n                this.refs.ring.pause();\n                this.refs.ring.currentTime = 0;\n            }\n        }\n    }, {\n        key: 'handleMakeOffer',\n        value: function handleMakeOffer() {\n            if (_user_store2.default.getStatus(this.props.userId) === _constants.UserStatuses.OFFLINE) {\n                this.onStatusChange();\n            } else {\n                var connectingMsg = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'calling_screen',\n                    defaultMessage: 'Calling'\n                });\n\n                this.setState({\n                    isCalling: true,\n                    isAnswering: false,\n                    callInProgress: false,\n                    error: null,\n                    ended: null,\n                    connectingMsg: connectingMsg\n                });\n\n                _webrtc_store2.default.setVideoCallWith(this.props.userId);\n\n                var user = this.state.currentUser;\n                _web_websocket_client2.default.sendMessage('webrtc', {\n                    action: _constants.WebrtcActionTypes.NOTIFY,\n                    from_user_id: user.id,\n                    to_user_id: this.props.userId\n                });\n            }\n        }\n    }, {\n        key: 'handleCancelOffer',\n        value: function handleCancelOffer() {\n            this.setState({\n                isCalling: false,\n                isAnswering: false,\n                callInProgress: false,\n                error: null,\n                ended: null\n            });\n\n            var user = this.state.currentUser;\n            _web_websocket_client2.default.sendMessage('webrtc', {\n                action: _constants.WebrtcActionTypes.CANCEL,\n                from_user_id: user.id,\n                to_user_id: this.props.userId\n            });\n\n            this.doCleanup();\n        }\n    }, {\n        key: 'handleWebrtcEvent',\n        value: function handleWebrtcEvent(message) {\n            switch (message.action) {\n                case _constants.WebrtcActionTypes.DECLINE:\n                    this.onCallDeclined();\n                    this.clearError();\n                    break;\n                case _constants.WebrtcActionTypes.UNSUPPORTED:\n                    this.onUnsupported();\n                    this.clearError();\n                    break;\n                case _constants.WebrtcActionTypes.BUSY:\n                    this.onBusy();\n                    this.clearError();\n                    break;\n                case _constants.WebrtcActionTypes.NO_ANSWER:\n                    this.onNoAnswer();\n                    this.clearError();\n                    break;\n                case _constants.WebrtcActionTypes.FAILED:\n                    this.onFailed();\n                    this.clearError();\n                    break;\n                case _constants.WebrtcActionTypes.ANSWER:\n                    this.onConnectCall();\n                    break;\n                case _constants.WebrtcActionTypes.CANCEL:\n                    this.onCancelled();\n                    this.clearError();\n                    break;\n                case _constants.WebrtcActionTypes.MUTED:\n                    this.onToggleRemoteMute(message);\n                    break;\n                case _constants.WebrtcActionTypes.IN_PROGRESS:\n                    this.setState({\n                        error: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'webrtc.inProgress',\n                            defaultMessage: 'You have a call in progress. Please hang up first.'\n                        }),\n                        errorType: ' warning'\n                    });\n                    this.clearError();\n                    break;\n                case _constants.WebrtcActionTypes.DISABLED:\n                    this.onDisabled();\n                    this.clearError();\n                    break;\n            }\n        }\n    }, {\n        key: 'handleVideoCallEvent',\n        value: function handleVideoCallEvent(msg, jsep) {\n            var result = msg.result;\n\n            if (result) {\n                var event = result.event;\n                switch (event) {\n                    case 'registered':\n                        if (this.state.isCalling) {\n                            this.doCall();\n                        }\n                        break;\n                    case 'incomingcall':\n                        this.doAnswer(jsep);\n                        break;\n                    case 'accepted':\n                        this.stopRinging();\n\n                        if (jsep) {\n                            this.videocall.handleRemoteJsep({ jsep: jsep });\n                        }\n                        break;\n                    case 'hangup':\n                        this.doHangup(false);\n                        break;\n                }\n            } else {\n                var errorCode = msg.error_code;\n                if (errorCode !== ALREADY_REGISTERED_ERROR && errorCode !== USERNAME_TAKEN) {\n                    this.doHangup(true);\n                } else if (this.state.isCalling) {\n                    this.doCall();\n                }\n            }\n        }\n    }, {\n        key: 'handleRemoteStream',\n        value: function handleRemoteStream(stream) {\n            // attaching stream to where they belong\n            this.refs['main-video'].srcObject = stream;\n\n            var isRemotePaused = false;\n            var isRemoteMuted = false;\n            var videoTracks = stream.getVideoTracks();\n            var audioTracks = stream.getAudioTracks();\n            if (!videoTracks || videoTracks.length === 0 || videoTracks[0].muted || !videoTracks[0].enabled) {\n                isRemotePaused = true;\n            }\n\n            if (!audioTracks || audioTracks.length === 0 || audioTracks[0].muted || !audioTracks[0].enabled) {\n                isRemoteMuted = true;\n            }\n\n            this.setState({\n                isCalling: false,\n                isAnswering: false,\n                callInProgress: true,\n                isMuted: false,\n                isPaused: false,\n                error: null,\n                ended: null,\n                isRemotePaused: isRemotePaused,\n                isRemoteMuted: isRemoteMuted\n            });\n            this.toggleIcons();\n        }\n    }, {\n        key: 'handleClose',\n        value: function handleClose(e) {\n            e.preventDefault();\n            if (this.state.callInProgress) {\n                this.setState({\n                    error: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'webrtc.inProgress',\n                        defaultMessage: 'You have a call in progress. Please hang up first.'\n                    }),\n                    errorType: ' warning'\n                });\n            } else if (this.state.isCalling) {\n                this.handleCancelOffer();\n                this.close();\n            } else {\n                this.close();\n            }\n        }\n    }, {\n        key: 'close',\n        value: function close() {\n            this.doCleanup();\n\n            if (this.session) {\n                this.session.destroy();\n                this.session = null;\n            }\n\n            if (this.localMedia) {\n                this.stopMediaStream(this.localMedia);\n                this.localMedia = null;\n            }\n\n            WebrtcActions.initWebrtc(null, false);\n        }\n    }, {\n        key: 'onStatusChange',\n        value: function onStatusChange() {\n            var status = _user_store2.default.getStatus(this.props.userId);\n\n            if (status === _constants.UserStatuses.OFFLINE) {\n                var error = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'webrtc.offline',\n                    defaultMessage: '{username} is offline',\n                    values: {\n                        username: Utils.displayUsername(this.props.userId)\n                    }\n                });\n\n                if (this.state.isCalling || this.state.isAnswering) {\n                    this.setState({\n                        isCalling: false,\n                        isAnswering: false,\n                        callInProgress: false,\n                        error: error\n                    });\n                } else {\n                    this.setState({\n                        error: error\n                    });\n                }\n            } else if (status !== _constants.UserStatuses.OFFLINE && this.state.error) {\n                this.setState({\n                    error: null,\n                    ended: null\n                });\n            }\n        }\n    }, {\n        key: 'onCallDeclined',\n        value: function onCallDeclined() {\n            var error = null;\n\n            if (this.state.isCalling) {\n                error = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'webrtc.declined',\n                    defaultMessage: 'Your call has been declined by {username}',\n                    values: {\n                        username: Utils.displayUsername(this.props.userId)\n                    }\n                });\n            }\n\n            this.stopRinging();\n\n            this.setState({\n                isCalling: false,\n                isAnswering: false,\n                callInProgress: false,\n                error: error\n            });\n\n            this.doCleanup();\n        }\n    }, {\n        key: 'onUnsupported',\n        value: function onUnsupported() {\n            if (this.mounted) {\n                this.stopRinging();\n\n                this.setState({\n                    error: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'webrtc.unsupported',\n                        defaultMessage: 'Call to {username} not successful. Their client does not support video calls.',\n                        values: {\n                            username: Utils.displayUsername(this.props.userId)\n                        }\n                    }),\n                    callInProgress: false,\n                    isCalling: false,\n                    isAnswering: false\n                });\n            }\n\n            this.doCleanup();\n        }\n    }, {\n        key: 'onNoAnswer',\n        value: function onNoAnswer() {\n            var error = null;\n\n            if (this.state.isCalling) {\n                error = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'webrtc.noAnswer',\n                    defaultMessage: '{username} is not answering the call',\n                    values: {\n                        username: Utils.displayUsername(this.props.userId)\n                    }\n                });\n            }\n            this.stopRinging();\n\n            this.setState({\n                isCalling: false,\n                isAnswering: false,\n                callInProgress: false,\n                error: error\n            });\n\n            this.doCleanup();\n        }\n    }, {\n        key: 'onBusy',\n        value: function onBusy() {\n            var error = null;\n\n            if (this.state.isCalling) {\n                error = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'webrtc.busy',\n                    defaultMessage: '{username} is busy',\n                    values: {\n                        username: Utils.displayUsername(this.props.userId)\n                    }\n                });\n            }\n            this.stopRinging();\n\n            this.setState({\n                isCalling: false,\n                isAnswering: false,\n                callInProgress: false,\n                error: error\n            });\n\n            this.doCleanup();\n        }\n    }, {\n        key: 'onDisabled',\n        value: function onDisabled() {\n            var error = null;\n\n            if (this.state.isCalling) {\n                error = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'webrtc.disabled',\n                    defaultMessage: '{username} has WebRTC disabled, and cannot receive calls. To enable the feature, they must go to Account Settings > Advanced > Preview pre-release features and turn on WebRTC.',\n                    values: {\n                        username: Utils.displayUsername(this.props.userId)\n                    }\n                });\n            }\n\n            this.stopRinging();\n\n            this.setState({\n                isCalling: false,\n                isAnswering: false,\n                callInProgress: false,\n                error: error\n            });\n\n            this.doCleanup();\n        }\n    }, {\n        key: 'onFailed',\n        value: function onFailed() {\n            (0, _diagnostics_actions.trackEvent)('api', 'api_users_webrtc_failed');\n\n            this.setState({\n                isCalling: false,\n                isAnswering: false,\n                callInProgress: false,\n                isPaused: false,\n                isMuted: false,\n                isRemotePaused: false,\n                isRemoteMuted: false,\n                error: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'webrtc.failed',\n                    defaultMessage: 'There was a problem connecting the video call'\n                })\n            });\n\n            this.stopRinging();\n\n            this.doCleanup();\n        }\n    }, {\n        key: 'onCancelled',\n        value: function onCancelled() {\n            if (this.mounted && this.state.isAnswering) {\n                this.stopRinging();\n                this.setState({\n                    isCalling: false,\n                    isAnswering: false,\n                    callInProgress: false,\n                    error: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'webrtc.cancelled',\n                        defaultMessage: '{username} cancelled the call',\n                        values: {\n                            username: Utils.displayUsername(this.props.userId)\n                        }\n                    })\n                });\n            }\n\n            this.doCleanup();\n        }\n    }, {\n        key: 'onConnectCall',\n        value: function onConnectCall() {\n            var _this4 = this;\n\n            WebrtcActions.webrtcToken(function (info) {\n                var connectingMsg = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'connecting_screen',\n                    defaultMessage: 'Connecting'\n                });\n\n                _this4.setState({ isAnswering: !_this4.state.isCalling, connectingMsg: connectingMsg });\n                if (_this4.session) {\n                    _this4.onSessionCreated();\n                } else {\n                    var iceServers = [];\n\n                    if (info.stun_uri) {\n                        iceServers.push({\n                            urls: info.stun_uri.split(' ')\n                        });\n                    }\n\n                    if (info.turn_uri) {\n                        iceServers.push({\n                            urls: info.turn_uri.split(' '),\n                            username: info.turn_username,\n                            credential: info.turn_password\n                        });\n                    }\n\n                    _janus2.default.init({ debug: global.mm_config.EnableDeveloper === 'true' });\n                    _this4.session = new _janus2.default({\n                        server: info.gateway_url,\n                        iceServers: iceServers,\n                        token: info.token,\n                        success: _this4.onSessionCreated,\n                        error: _this4.onSessionError\n                    });\n                }\n            }, function () {\n                _this4.onSessionError();\n            });\n        }\n    }, {\n        key: 'onSessionCreated',\n        value: function onSessionCreated() {\n            var _this5 = this;\n\n            if (this.videocall) {\n                this.doCall();\n            } else {\n                this.session.attach({\n                    plugin: 'janus.plugin.videocall',\n                    success: function success(plugin) {\n                        _this5.videocall = plugin;\n                        _this5.videocall.send({ message: { request: 'register', username: _this5.state.currentUser.id } });\n                    },\n                    error: this.onSessionError,\n                    onmessage: this.handleVideoCallEvent,\n                    onremotestream: this.handleRemoteStream\n                });\n            }\n        }\n    }, {\n        key: 'onSessionError',\n        value: function onSessionError() {\n            var user = this.state.currentUser;\n            _web_websocket_client2.default.sendMessage('webrtc', {\n                action: _constants.WebrtcActionTypes.FAILED,\n                from_user_id: user.id,\n                to_user_id: this.props.userId\n            });\n\n            this.onFailed();\n        }\n    }, {\n        key: 'doCall',\n        value: function doCall() {\n            var _this6 = this;\n\n            // delay call so receiver has time to register\n            setTimeout(function () {\n                _this6.videocall.createOffer({\n                    stream: _this6.localMedia,\n                    success: function success(jsep) {\n                        var body = { request: 'call', username: _this6.props.userId };\n                        _this6.videocall.send({ message: body, jsep: jsep });\n                    },\n                    error: function error() {\n                        _this6.doHangup(true);\n                    }\n                });\n            }, _constants.Constants.WEBRTC_TIME_DELAY);\n        }\n    }, {\n        key: 'doAnswer',\n        value: function doAnswer(jsep) {\n            var _this7 = this;\n\n            (0, _diagnostics_actions.trackEvent)('api', 'api_users_webrtc_start');\n            this.videocall.createAnswer({\n                jsep: jsep,\n                stream: this.localMedia,\n                success: function success(jsepSuccess) {\n                    var body = { request: 'accept' };\n                    _this7.videocall.send({ message: body, jsep: jsepSuccess });\n                },\n                error: function error() {\n                    _this7.doHangup(true);\n                }\n            });\n        }\n    }, {\n        key: 'doHangup',\n        value: function doHangup(error, manual) {\n            (0, _diagnostics_actions.trackEvent)('api', 'api_users_webrtc_end');\n            if (this.videocall && this.state.callInProgress) {\n                this.videocall.send({ message: { request: 'hangup' } });\n                this.videocall.hangup();\n                this.toggleIcons();\n\n                if (this.localMedia) {\n                    this.localMedia.getVideoTracks()[0].enabled = true;\n                    this.localMedia.getAudioTracks()[0].enabled = true;\n                }\n            }\n\n            if (error) {\n                this.onSessionError();\n                return this.doCleanup();\n            }\n\n            _webrtc_store2.default.setVideoCallWith(null);\n            _webrtc_store2.default.emitRhsChanged(false);\n\n            if (manual) {\n                return this.close();\n            }\n\n            this.setState({\n                isCalling: false,\n                isAnswering: false,\n                callInProgress: false,\n                isPaused: false,\n                isMuted: false,\n                isRemotePaused: false,\n                isRemoteMuted: false,\n                error: null,\n                ended: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'webrtc.callEnded',\n                    defaultMessage: 'Call with {username} ended.',\n                    values: {\n                        username: Utils.displayUsername(this.props.userId)\n                    }\n                })\n            });\n            this.clearError();\n            return this.doCleanup();\n        }\n    }, {\n        key: 'doCleanup',\n        value: function doCleanup() {\n            _webrtc_store2.default.setVideoCallWith(null);\n\n            if (this.videocall) {\n                this.videocall.detach();\n                this.videocall = null;\n            }\n        }\n    }, {\n        key: 'onToggleVideo',\n        value: function onToggleVideo() {\n            var shouldPause = !this.state.isPaused;\n            if (shouldPause) {\n                this.videocall.unmuteVideo();\n            } else {\n                this.videocall.muteVideo();\n            }\n\n            var user = this.state.currentUser;\n            _web_websocket_client2.default.sendMessage('webrtc', {\n                action: _constants.WebrtcActionTypes.MUTED,\n                from_user_id: user.id,\n                to_user_id: this.props.userId,\n                type: 'video',\n                mute: shouldPause\n            });\n\n            this.setState({\n                isPaused: shouldPause,\n                error: null,\n                ended: null\n            });\n        }\n    }, {\n        key: 'onToggleAudio',\n        value: function onToggleAudio() {\n            var shouldMute = !this.state.isMuted;\n            if (shouldMute) {\n                this.videocall.unmuteAudio();\n            } else {\n                this.videocall.muteAudio();\n            }\n\n            var user = this.state.currentUser;\n            _web_websocket_client2.default.sendMessage('webrtc', {\n                action: _constants.WebrtcActionTypes.MUTED,\n                from_user_id: user.id,\n                to_user_id: this.props.userId,\n                type: 'audio',\n                mute: shouldMute\n            });\n\n            this.setState({\n                isMuted: shouldMute,\n                error: null,\n                ended: null\n            });\n        }\n    }, {\n        key: 'onToggleRemoteMute',\n        value: function onToggleRemoteMute(message) {\n            if (message.type === 'video') {\n                this.setState({\n                    isRemotePaused: message.mute\n                });\n            } else {\n                this.setState({ isRemoteMuted: message.mute, error: null, ended: null });\n            }\n        }\n    }, {\n        key: 'toggleIcons',\n        value: function toggleIcons() {\n            var icons = this.refs.icons;\n            if (icons) {\n                icons.classList.toggle('hidden');\n                icons.classList.toggle('active');\n            }\n        }\n    }, {\n        key: 'renderButtons',\n        value: function renderButtons() {\n            var _this8 = this;\n\n            var buttons = void 0;\n            if (this.state.isCalling) {\n                buttons = _react2.default.createElement(\n                    'svg',\n                    {\n                        id: 'cancel',\n                        className: 'webrtc-icons__cancel',\n                        xmlns: 'http://www.w3.org/2000/svg',\n                        width: '48',\n                        height: '48',\n                        viewBox: '-10 -10 68 68',\n                        onClick: function onClick() {\n                            return _this8.handleCancelOffer();\n                        }\n                    },\n                    _react2.default.createElement(\n                        'circle',\n                        {\n                            cx: '24',\n                            cy: '24',\n                            r: '34'\n                        },\n                        _react2.default.createElement(\n                            'title',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'webrtc.cancel',\n                                defaultMessage: 'Cancel Call'\n                            })\n                        )\n                    ),\n                    _react2.default.createElement('path', {\n                        transform: 'scale(0.8), translate(6,10)',\n                        d: 'M24 18c-3.21 0-6.3.5-9.2 1.44v6.21c0 .79-.46 1.47-1.12 1.8-1.95.98-3.74 2.23-5.33 3.7-.36.35-.85.57-1.4.57-.55 0-1.05-.22-1.41-.59L.59 26.18c-.37-.37-.59-.87-.59-1.42 0-.55.22-1.05.59-1.42C6.68 17.55 14.93 14 24 14s17.32 3.55 23.41 9.34c.37.36.59.87.59 1.42 0 .55-.22 1.05-.59 1.41l-4.95 4.95c-.36.36-.86.59-1.41.59-.54 0-1.04-.22-1.4-.57-1.59-1.47-3.38-2.72-5.33-3.7-.66-.33-1.12-1.01-1.12-1.8v-6.21C30.3 18.5 27.21 18 24 18z',\n                        fill: 'white'\n                    })\n                );\n            } else if (!this.state.callInProgress && this.state.localMediaLoaded) {\n                buttons = _react2.default.createElement(\n                    'svg',\n                    {\n                        id: 'call',\n                        className: 'webrtc-icons__call',\n                        xmlns: 'http://www.w3.org/2000/svg',\n                        width: '48',\n                        height: '48',\n                        viewBox: '-10 -10 68 68',\n                        onClick: function onClick() {\n                            return _this8.handleMakeOffer();\n                        },\n                        disabled: _user_store2.default.getStatus(this.props.userId) === 'offline'\n                    },\n                    _react2.default.createElement(\n                        'circle',\n                        {\n                            cx: '24',\n                            cy: '24',\n                            r: '34'\n                        },\n                        _react2.default.createElement(\n                            'title',\n                            null,\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'webrtc.call',\n                                defaultMessage: 'Call'\n                            })\n                        )\n                    ),\n                    _react2.default.createElement('path', {\n                        transform: 'translate(-10,-10)',\n                        fill: '#fff',\n                        d: 'M29.854,37.627c1.723,1.904 3.679,3.468 5.793,4.684l3.683,-3.334c0.469,-0.424 1.119,-0.517 1.669,-0.302c1.628,0.63 3.331,1.021 5.056,1.174c0.401,0.026 0.795,0.199 1.09,0.525c0.295,0.326 0.433,0.741 0.407,1.153l-0.279,5.593c-0.02,0.418 -0.199,0.817 -0.525,1.112c-0.326,0.296 -0.741,0.434 -1.159,0.413c-6.704,-0.504 -13.238,-3.491 -18.108,-8.87c-4.869,-5.38 -7.192,-12.179 -7.028,-18.899c0.015,-0.413 0.199,-0.817 0.526,-1.113c0.326,-0.295 0.74,-0.433 1.153,-0.407l5.593,0.279c0.407,0.02 0.812,0.193 1.107,0.519c0.29,0.32 0.428,0.735 0.413,1.137c-0.018,1.732 0.202,3.464 0.667,5.147c0.159,0.569 0.003,1.207 -0.466,1.631l-3.683,3.334c1.005,2.219 2.368,4.32 4.091,6.224Z'\n                    })\n                );\n            } else if (this.state.callInProgress) {\n                var onClass = 'on';\n                var offClass = 'off';\n                var audioOnClass = offClass;\n                var audioOffClass = onClass;\n                var videoOnClass = offClass;\n                var videoOffClass = onClass;\n\n                var audioTitle = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'webrtc.mute_audio',\n                    defaultMessage: 'Mute'\n                });\n\n                var videoTitle = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'webrtc.pause_video',\n                    defaultMessage: 'Turn off Video'\n                });\n\n                if (this.state.isMuted) {\n                    audioOnClass = onClass;\n                    audioOffClass = offClass;\n                    audioTitle = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'webrtc.unmute_audio',\n                        defaultMessage: 'Unmute'\n                    });\n                }\n\n                if (this.state.isPaused) {\n                    videoOnClass = onClass;\n                    videoOffClass = offClass;\n                    videoTitle = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'webrtc.unpause_video',\n                        defaultMessage: 'Turn on Video'\n                    });\n                }\n\n                buttons = _react2.default.createElement(\n                    'div',\n                    {\n                        ref: 'icons',\n                        className: 'webrtc-icons hidden'\n                    },\n                    _react2.default.createElement(\n                        'svg',\n                        {\n                            id: 'mute-audio',\n                            className: 'webrtc-icons__call',\n                            xmlns: 'http://www.w3.org/2000/svg',\n                            width: '48',\n                            height: '48',\n                            viewBox: '-10 -10 68 68',\n                            onClick: function onClick() {\n                                return _this8.onToggleAudio();\n                            }\n                        },\n                        _react2.default.createElement(\n                            'circle',\n                            {\n                                cx: '24',\n                                cy: '24',\n                                r: '34'\n                            },\n                            _react2.default.createElement(\n                                'title',\n                                null,\n                                audioTitle\n                            )\n                        ),\n                        _react2.default.createElement('path', {\n                            className: audioOnClass,\n                            transform: 'scale(0.6), translate(17,18)',\n                            d: 'M38 22h-3.4c0 1.49-.31 2.87-.87 4.1l2.46 2.46C37.33 26.61 38 24.38 38 22zm-8.03.33c0-.11.03-.22.03-.33V10c0-3.32-2.69-6-6-6s-6 2.68-6 6v.37l11.97 11.96zM8.55 6L6 8.55l12.02 12.02v1.44c0 3.31 2.67 6 5.98 6 .45 0 .88-.06 1.3-.15l3.32 3.32c-1.43.66-3 1.03-4.62 1.03-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c1.81-.27 3.53-.9 5.08-1.81L39.45 42 42 39.46 8.55 6z',\n                            fill: 'white'\n                        }),\n                        _react2.default.createElement('path', {\n                            className: audioOffClass,\n                            transform: 'scale(0.6), translate(17,18)',\n                            d: 'M24 28c3.31 0 5.98-2.69 5.98-6L30 10c0-3.32-2.68-6-6-6-3.31 0-6 2.68-6 6v12c0 3.31 2.69 6 6 6zm10.6-6c0 6-5.07 10.2-10.6 10.2-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c6.56-.97 12-6.61 12-13.44h-3.4z',\n                            fill: 'white'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'svg',\n                        {\n                            id: 'mute-video',\n                            className: 'webrtc-icons__call',\n                            xmlns: 'http://www.w3.org/2000/svg',\n                            width: '48',\n                            height: '48',\n                            viewBox: '-10 -10 68 68',\n                            onClick: function onClick() {\n                                return _this8.onToggleVideo();\n                            }\n                        },\n                        _react2.default.createElement(\n                            'circle',\n                            {\n                                cx: '24',\n                                cy: '24',\n                                r: '34'\n                            },\n                            _react2.default.createElement(\n                                'title',\n                                null,\n                                videoTitle\n                            )\n                        ),\n                        _react2.default.createElement('path', {\n                            className: videoOnClass,\n                            transform: 'scale(0.6), translate(17,16)',\n                            d: 'M40 8H15.64l8 8H28v4.36l1.13 1.13L36 16v12.36l7.97 7.97L44 36V12c0-2.21-1.79-4-4-4zM4.55 2L2 4.55l4.01 4.01C4.81 9.24 4 10.52 4 12v24c0 2.21 1.79 4 4 4h29.45l4 4L44 41.46 4.55 2zM12 16h1.45L28 30.55V32H12V16z',\n                            fill: 'white'\n                        }),\n                        _react2.default.createElement('path', {\n                            className: videoOffClass,\n                            transform: 'scale(0.6), translate(17,16)',\n                            d: 'M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm-4 24l-8-6.4V32H12V16h16v6.4l8-6.4v16z',\n                            fill: 'white'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'svg',\n                        {\n                            id: 'hangup',\n                            className: 'webrtc-icons__cancel',\n                            xmlns: 'http://www.w3.org/2000/svg',\n                            width: '48',\n                            height: '48',\n                            viewBox: '-10 -10 68 68',\n                            onClick: function onClick() {\n                                return _this8.doHangup(false, true);\n                            }\n                        },\n                        _react2.default.createElement(\n                            'circle',\n                            {\n                                cx: '24',\n                                cy: '24',\n                                r: '34'\n                            },\n                            _react2.default.createElement(\n                                'title',\n                                null,\n                                _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                    id: 'webrtc.hangup',\n                                    defaultMessage: 'Hang up'\n                                })\n                            )\n                        ),\n                        _react2.default.createElement('path', {\n                            transform: 'scale(0.7), translate(11,10)',\n                            d: 'M24 18c-3.21 0-6.3.5-9.2 1.44v6.21c0 .79-.46 1.47-1.12 1.8-1.95.98-3.74 2.23-5.33 3.7-.36.35-.85.57-1.4.57-.55 0-1.05-.22-1.41-.59L.59 26.18c-.37-.37-.59-.87-.59-1.42 0-.55.22-1.05.59-1.42C6.68 17.55 14.93 14 24 14s17.32 3.55 23.41 9.34c.37.36.59.87.59 1.42 0 .55-.22 1.05-.59 1.41l-4.95 4.95c-.36.36-.86.59-1.41.59-.54 0-1.04-.22-1.4-.57-1.59-1.47-3.38-2.72-5.33-3.7-.66-.33-1.12-1.01-1.12-1.8v-6.21C30.3 18.5 27.21 18 24 18z',\n                            fill: 'white'\n                        })\n                    )\n                );\n            }\n\n            return buttons;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var currentId = _user_store2.default.getCurrentId();\n            var remoteImage = _react2.default.createElement('img', { src: this.state.remoteUserImage });\n            var localImage = void 0;\n            var localVideoHidden = '';\n            var remoteVideoHidden = 'hidden';\n            var error = void 0;\n            var remoteMute = void 0;\n            var localImageHidden = 'webrtc__local-image hidden';\n            var remoteImageHidden = 'webrtc__remote-image';\n\n            if (this.state.error) {\n                error = _react2.default.createElement(\n                    'div',\n                    { className: 'webrtc__error' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'form-group has-error' },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'control-label' + this.state.errorType },\n                            this.state.error\n                        )\n                    )\n                );\n            } else if (this.state.ended) {\n                error = _react2.default.createElement(\n                    'div',\n                    { className: 'webrtc__error' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'form-group' },\n                        _react2.default.createElement(\n                            'label',\n                            { className: 'control-label' },\n                            this.state.ended\n                        )\n                    )\n                );\n            }\n\n            if (this.state.isRemoteMuted) {\n                remoteMute = _react2.default.createElement(\n                    'div',\n                    { className: 'webrtc__remote-mute' },\n                    _react2.default.createElement(\n                        'svg',\n                        {\n                            xmlns: 'http://www.w3.org/2000/svg',\n                            width: '60',\n                            height: '60',\n                            viewBox: '-10 -10 68 68'\n                        },\n                        _react2.default.createElement('path', {\n                            className: 'off',\n                            transform: 'scale(0.6), translate(17,18)',\n                            d: 'M38 22h-3.4c0 1.49-.31 2.87-.87 4.1l2.46 2.46C37.33 26.61 38 24.38 38 22zm-8.03.33c0-.11.03-.22.03-.33V10c0-3.32-2.69-6-6-6s-6 2.68-6 6v.37l11.97 11.96zM8.55 6L6 8.55l12.02 12.02v1.44c0 3.31 2.67 6 5.98 6 .45 0 .88-.06 1.3-.15l3.32 3.32c-1.43.66-3 1.03-4.62 1.03-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c1.81-.27 3.53-.9 5.08-1.81L39.45 42 42 39.46 8.55 6z',\n                            fill: 'white'\n                        }),\n                        _react2.default.createElement('path', {\n                            className: 'on',\n                            transform: 'scale(0.6), translate(17,18)',\n                            d: 'M24 28c3.31 0 5.98-2.69 5.98-6L30 10c0-3.32-2.68-6-6-6-3.31 0-6 2.68-6 6v12c0 3.31 2.69 6 6 6zm10.6-6c0 6-5.07 10.2-10.6 10.2-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c6.56-.97 12-6.61 12-13.44h-3.4z',\n                            fill: 'white'\n                        })\n                    )\n                );\n            }\n\n            var searchForm = void 0;\n            if (currentId != null) {\n                searchForm = _react2.default.createElement(_search_bar2.default, null);\n            }\n\n            var buttons = this.renderButtons();\n            var calling = this.state.isCalling;\n            var connecting = void 0;\n            var audio = void 0;\n            if (calling || this.state.isAnswering) {\n                if (calling) {\n                    audio = _react2.default.createElement('audio', {\n                        ref: 'ring',\n                        src: _ring2.default,\n                        autoPlay: true\n                    });\n                }\n\n                connecting = _react2.default.createElement(\n                    'div',\n                    { className: 'connecting' },\n                    _react2.default.createElement(_loading_screen2.default, {\n                        position: 'absolute',\n                        message: this.state.connectingMsg\n                    }),\n                    audio\n                );\n            }\n\n            if (this.state.callInProgress) {\n                if (this.state.isPaused) {\n                    localVideoHidden = 'hidden';\n                    localImageHidden = 'webrtc__local-image';\n                    localImage = _react2.default.createElement('img', { src: this.state.currentUserImage });\n                }\n\n                if (this.state.isRemotePaused) {\n                    remoteVideoHidden = 'hidden';\n                    remoteImageHidden = 'webrtc__remote-image';\n                } else {\n                    remoteVideoHidden = '';\n                    remoteImageHidden = 'webrtc__remote-image hidden';\n                }\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'post-right__container' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'search-bar__container channel-header alt' },\n                    searchForm\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'sidebar-right__body' },\n                    _react2.default.createElement(_webrtc_header2.default, {\n                        username: Utils.displayUsername(this.props.userId),\n                        onClose: this.handleClose,\n                        toggleSize: this.props.toggleSize\n                    }),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'post-right__scroll' },\n                        _react2.default.createElement(\n                            'div',\n                            { id: 'videos' },\n                            remoteMute,\n                            _react2.default.createElement(\n                                'div',\n                                {\n                                    id: 'main-video',\n                                    className: remoteVideoHidden,\n                                    autoPlay: true\n                                },\n                                _react2.default.createElement('video', {\n                                    ref: 'main-video',\n                                    autoPlay: true\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                {\n                                    id: 'local-video',\n                                    className: localVideoHidden\n                                },\n                                _react2.default.createElement('video', {\n                                    ref: 'local-video',\n                                    autoPlay: true,\n                                    muted: true\n                                })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: remoteImageHidden },\n                                remoteImage\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: localImageHidden },\n                                localImage\n                            )\n                        ),\n                        error,\n                        connecting,\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'webrtc-buttons' },\n                            buttons\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return WebrtcController;\n}(_react2.default.Component);\n\nexports.default = WebrtcController;\n\n\nWebrtcController.propTypes = {\n    currentUser: _propTypes2.default.object,\n    userId: _propTypes2.default.string.isRequired,\n    isCaller: _propTypes2.default.bool.isRequired,\n    expanded: _propTypes2.default.bool.isRequired,\n    toggleSize: _propTypes2.default.func\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1Mi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3dlYnJ0Yy93ZWJydGNfY29udHJvbGxlci5qc3g/NDE0NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMTYtcHJlc2VudCBNYXR0ZXJtb3N0LCBJbmMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4vLyBTZWUgTGljZW5zZS50eHQgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcblxuaW1wb3J0IEphbnVzIGZyb20gJ2phbnVzJztcblxuaW1wb3J0IHt0cmFja0V2ZW50fSBmcm9tICdhY3Rpb25zL2RpYWdub3N0aWNzX2FjdGlvbnMuanN4JztcbmltcG9ydCAqIGFzIFdlYnJ0Y0FjdGlvbnMgZnJvbSAnYWN0aW9ucy93ZWJydGNfYWN0aW9ucy5qc3gnO1xuaW1wb3J0IENoYW5uZWxTdG9yZSBmcm9tICdzdG9yZXMvY2hhbm5lbF9zdG9yZS5qc3gnO1xuaW1wb3J0IFVzZXJTdG9yZSBmcm9tICdzdG9yZXMvdXNlcl9zdG9yZS5qc3gnO1xuaW1wb3J0IFdlYnJ0Y1N0b3JlIGZyb20gJ3N0b3Jlcy93ZWJydGNfc3RvcmUuanN4JztcblxuaW1wb3J0IFdlYlNvY2tldENsaWVudCBmcm9tICdjbGllbnQvd2ViX3dlYnNvY2tldF9jbGllbnQuanN4JztcblxuaW1wb3J0IHtDb25zdGFudHMsIFVzZXJTdGF0dXNlcywgV2VicnRjQWN0aW9uVHlwZXN9IGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAndXRpbHMvdXRpbHMuanN4JztcblxuaW1wb3J0IHJpbmcgZnJvbSAnaW1hZ2VzL3JpbmcubXAzJztcblxuaW1wb3J0IENvbm5lY3RpbmdTY3JlZW4gZnJvbSAnY29tcG9uZW50cy9sb2FkaW5nX3NjcmVlbi5qc3gnO1xuXG5pbXBvcnQgU2VhcmNoQm94IGZyb20gJy4uL3NlYXJjaF9iYXIuanN4JztcblxuaW1wb3J0IFdlYnJ0Y0hlYWRlciBmcm9tICcuL2NvbXBvbmVudHMvd2VicnRjX2hlYWRlci5qc3gnO1xuXG5jb25zdCBWSURFT19XSURUSCA9IDY0MDtcbmNvbnN0IFZJREVPX0hFSUdIVCA9IDM2MDtcbmNvbnN0IE1JTl9BU1BFQ1QgPSAxLjc3NztcbmNvbnN0IE1BWF9BU1BFQ1QgPSAxLjc3ODtcbmNvbnN0IEFMUkVBRFlfUkVHSVNURVJFRF9FUlJPUiA9IDQ3NztcbmNvbnN0IFVTRVJOQU1FX1RBS0VOID0gNDc2O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJydGNDb250cm9sbGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9jYWxNZWRpYSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IG51bGw7XG4gICAgICAgIHRoaXMudmlkZW9jYWxsID0gbnVsbDtcblxuICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZSA9IHRoaXMuaGFuZGxlUmVzaXplLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2xvc2UgPSB0aGlzLmhhbmRsZUNsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2xlYXJFcnJvciA9IHRoaXMuY2xlYXJFcnJvci5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuZ2V0TG9jYWxNZWRpYSA9IHRoaXMuZ2V0TG9jYWxNZWRpYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN0b3BNZWRpYVN0cmVhbSA9IHRoaXMuc3RvcE1lZGlhU3RyZWFtLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucHJldmlld1ZpZGVvID0gdGhpcy5wcmV2aWV3VmlkZW8uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zdG9wUmluZ2luZyA9IHRoaXMuc3RvcFJpbmdpbmcuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmhhbmRsZU1ha2VPZmZlciA9IHRoaXMuaGFuZGxlTWFrZU9mZmVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlQ2FuY2VsT2ZmZXIgPSB0aGlzLmhhbmRsZUNhbmNlbE9mZmVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlV2VicnRjRXZlbnQgPSB0aGlzLmhhbmRsZVdlYnJ0Y0V2ZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlVmlkZW9DYWxsRXZlbnQgPSB0aGlzLmhhbmRsZVZpZGVvQ2FsbEV2ZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaGFuZGxlUmVtb3RlU3RyZWFtID0gdGhpcy5oYW5kbGVSZW1vdGVTdHJlYW0uYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLm9uU3RhdHVzQ2hhbmdlID0gdGhpcy5vblN0YXR1c0NoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uQ2FsbERlY2xpbmVkID0gdGhpcy5vbkNhbGxEZWNsaW5lZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uVW5zdXBwb3J0ZWQgPSB0aGlzLm9uVW5zdXBwb3J0ZWQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbk5vQW5zd2VyID0gdGhpcy5vbk5vQW5zd2VyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25CdXN5ID0gdGhpcy5vbkJ1c3kuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkRpc2FibGVkID0gdGhpcy5vbkRpc2FibGVkLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25GYWlsZWQgPSB0aGlzLm9uRmFpbGVkLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25DYW5jZWxsZWQgPSB0aGlzLm9uQ2FuY2VsbGVkLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25Db25uZWN0Q2FsbCA9IHRoaXMub25Db25uZWN0Q2FsbC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMub25TZXNzaW9uQ3JlYXRlZCA9IHRoaXMub25TZXNzaW9uQ3JlYXRlZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uU2Vzc2lvbkVycm9yID0gdGhpcy5vblNlc3Npb25FcnJvci5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuZG9DYWxsID0gdGhpcy5kb0NhbGwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kb0Fuc3dlciA9IHRoaXMuZG9BbnN3ZXIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kb0hhbmd1cCA9IHRoaXMuZG9IYW5ndXAuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kb0NsZWFudXAgPSB0aGlzLmRvQ2xlYW51cC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9ucyA9IHRoaXMucmVuZGVyQnV0dG9ucy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uVG9nZ2xlVmlkZW8gPSB0aGlzLm9uVG9nZ2xlVmlkZW8uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vblRvZ2dsZUF1ZGlvID0gdGhpcy5vblRvZ2dsZUF1ZGlvLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25Ub2dnbGVSZW1vdGVNdXRlID0gdGhpcy5vblRvZ2dsZVJlbW90ZU11dGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50b2dnbGVJY29ucyA9IHRoaXMudG9nZ2xlSWNvbnMuYmluZCh0aGlzKTtcblxuICAgICAgICBjb25zdCBjdXJyZW50VXNlciA9IFVzZXJTdG9yZS5nZXRDdXJyZW50VXNlcigpO1xuICAgICAgICBjb25zdCByZW1vdGVVc2VyID0gVXNlclN0b3JlLmdldFByb2ZpbGUocHJvcHMudXNlcklkKTtcbiAgICAgICAgY29uc3QgcmVtb3RlVXNlckltYWdlID0gVXRpbHMuaW1hZ2VVUkxGb3JVc2VyKHJlbW90ZVVzZXIpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICB3aW5kb3dXaWR0aDogVXRpbHMud2luZG93V2lkdGgoKSxcbiAgICAgICAgICAgIHdpbmRvd0hlaWdodDogVXRpbHMud2luZG93SGVpZ2h0KCksXG4gICAgICAgICAgICBjaGFubmVsSWQ6IENoYW5uZWxTdG9yZS5nZXRDdXJyZW50SWQoKSxcbiAgICAgICAgICAgIGN1cnJlbnRVc2VyLFxuICAgICAgICAgICAgY3VycmVudFVzZXJJbWFnZTogVXRpbHMuaW1hZ2VVUkxGb3JVc2VyKGN1cnJlbnRVc2VyKSxcbiAgICAgICAgICAgIHJlbW90ZVVzZXJJbWFnZSxcbiAgICAgICAgICAgIGxvY2FsTWVkaWFMb2FkZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNQYXVzZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNNdXRlZDogZmFsc2UsXG4gICAgICAgICAgICBpc1JlbW90ZVBhdXNlZDogZmFsc2UsXG4gICAgICAgICAgICBpc1JlbW90ZU11dGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzQ2FsbGluZzogZmFsc2UsXG4gICAgICAgICAgICBpc0Fuc3dlcmluZzogZmFsc2UsXG4gICAgICAgICAgICBjYWxsSW5Qcm9ncmVzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgIGVycm9yVHlwZTogJycsXG4gICAgICAgICAgICBlbmRlZDogbnVsbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5oYW5kbGVSZXNpemUpO1xuICAgICAgICBXZWJydGNTdG9yZS5hZGRDaGFuZ2VkTGlzdGVuZXIodGhpcy5oYW5kbGVXZWJydGNFdmVudCk7XG4gICAgICAgIFVzZXJTdG9yZS5hZGRTdGF0dXNlc0NoYW5nZUxpc3RlbmVyKHRoaXMub25TdGF0dXNDaGFuZ2UpO1xuXG4gICAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMucHJldmlld1ZpZGVvKCk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaXNDYWxsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTWFrZU9mZmVyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlUmVzaXplKTtcbiAgICAgICAgV2VicnRjU3RvcmUucmVtb3ZlQ2hhbmdlZExpc3RlbmVyKHRoaXMuaGFuZGxlV2VicnRjRXZlbnQpO1xuICAgICAgICBVc2VyU3RvcmUucmVtb3ZlU3RhdHVzZXNDaGFuZ2VMaXN0ZW5lcih0aGlzLm9uU3RhdHVzQ2hhbmdlKTtcbiAgICAgICAgdGhpcy5tb3VudGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgICBpZiAoKG5leHRQcm9wcy5jdXJyZW50VXNlciAhPT0gdGhpcy5wcm9wcy5jdXJyZW50VXNlcikgfHxcbiAgICAgICAgICAgIChuZXh0UHJvcHMudXNlcklkICE9PSB0aGlzLnByb3BzLnVzZXJJZCkgfHxcbiAgICAgICAgICAgIChuZXh0UHJvcHMuaXNDYWxsZXIgIT09IHRoaXMucHJvcHMuaXNDYWxsZXIpKSB7XG4gICAgICAgICAgICBjb25zdCByZW1vdGVVc2VyID0gVXNlclN0b3JlLmdldFByb2ZpbGUobmV4dFByb3BzLnVzZXJJZCk7XG4gICAgICAgICAgICBjb25zdCByZW1vdGVVc2VySW1hZ2UgPSBVdGlscy5pbWFnZVVSTEZvclVzZXIocmVtb3RlVXNlcik7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgICAgICByZW1vdGVVc2VySW1hZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5leHRQcm9wcy5pc0NhbGxlciAmJiBuZXh0UHJvcHMuZXhwYW5kZWQgPT09IHRoaXMucHJvcHMuZXhwYW5kZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRDYWxsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaXNDYWxsZXIgJiYgdGhpcy5zdGFydENhbGwpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRDYWxsID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZU1ha2VPZmZlcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlUmVzaXplKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHdpbmRvd1dpZHRoOiBVdGlscy53aW5kb3dXaWR0aCgpLFxuICAgICAgICAgICAgd2luZG93SGVpZ2h0OiBVdGlscy53aW5kb3dIZWlnaHQoKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjbGVhckVycm9yKCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2Vycm9yOiBudWxsLCBlbmRlZDogbnVsbCwgZXJyb3JUeXBlOiAnJ30pO1xuICAgICAgICB9LCBDb25zdGFudHMuV0VCUlRDX0NMRUFSX0VSUk9SX0RFTEFZKTtcbiAgICB9XG5cbiAgICBnZXRMb2NhbE1lZGlhKGNvbnN0cmFpbnRzLCBlbGVtZW50LCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBtZWRpYSA9IGNvbnN0cmFpbnRzIHx8IHthdWRpbzogdHJ1ZSwgdmlkZW86IHRydWV9O1xuICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShtZWRpYSkuXG4gICAgICAgIHRoZW4oKHN0cmVhbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNyY09iamVjdCA9IHN0cmVhbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHN0cmVhbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLlxuICAgICAgICBjYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RvcE1lZGlhU3RyZWFtKHN0cmVhbSkge1xuICAgICAgICBjb25zdCB0cmFja3MgPSBzdHJlYW0uZ2V0VHJhY2tzKCk7XG4gICAgICAgIHRyYWNrcy5mb3JFYWNoKCh0cmFjaykgPT4ge1xuICAgICAgICAgICAgdHJhY2suc3RvcCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcmV2aWV3VmlkZW8oKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdW50ZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxvY2FsTWVkaWEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxNZWRpYUxvYWRlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsTWVkaWEuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TG9jYWxNZWRpYShcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlbzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkFzcGVjdFJhdGlvOiBNSU5fQVNQRUNULFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEFzcGVjdFJhdGlvOiBNQVhfQVNQRUNULFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBWSURFT19XSURUSCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFZJREVPX0hFSUdIVFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnNbJ2xvY2FsLXZpZGVvJ10sXG4gICAgICAgICAgICAgICAgICAgIChlcnJvciwgc3RyZWFtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3dlYnJ0Yy5tZWRpYUVycm9yJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdVbmFibGUgdG8gYWNjZXNzIENhbWVyYSBhbmQgTWljcm9waG9uZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsTWVkaWEgPSBzdHJlYW07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbE1lZGlhTG9hZGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdG9wUmluZ2luZygpIHtcbiAgICAgICAgaWYgKHRoaXMucmVmcy5yaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnMucmluZy5wYXVzZSgpO1xuICAgICAgICAgICAgdGhpcy5yZWZzLnJpbmcuY3VycmVudFRpbWUgPSAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlTWFrZU9mZmVyKCkge1xuICAgICAgICBpZiAoVXNlclN0b3JlLmdldFN0YXR1cyh0aGlzLnByb3BzLnVzZXJJZCkgPT09IFVzZXJTdGF0dXNlcy5PRkZMSU5FKSB7XG4gICAgICAgICAgICB0aGlzLm9uU3RhdHVzQ2hhbmdlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjb25uZWN0aW5nTXNnID0gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSdjYWxsaW5nX3NjcmVlbidcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0NhbGxpbmcnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGlzQ2FsbGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc0Fuc3dlcmluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2FsbEluUHJvZ3Jlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgICAgIGVuZGVkOiBudWxsLFxuICAgICAgICAgICAgICAgIGNvbm5lY3RpbmdNc2dcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBXZWJydGNTdG9yZS5zZXRWaWRlb0NhbGxXaXRoKHRoaXMucHJvcHMudXNlcklkKTtcblxuICAgICAgICAgICAgY29uc3QgdXNlciA9IHRoaXMuc3RhdGUuY3VycmVudFVzZXI7XG4gICAgICAgICAgICBXZWJTb2NrZXRDbGllbnQuc2VuZE1lc3NhZ2UoJ3dlYnJ0YycsIHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IFdlYnJ0Y0FjdGlvblR5cGVzLk5PVElGWSxcbiAgICAgICAgICAgICAgICBmcm9tX3VzZXJfaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICAgICAgdG9fdXNlcl9pZDogdGhpcy5wcm9wcy51c2VySWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlQ2FuY2VsT2ZmZXIoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNDYWxsaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGlzQW5zd2VyaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGNhbGxJblByb2dyZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgZW5kZWQ6IG51bGxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdXNlciA9IHRoaXMuc3RhdGUuY3VycmVudFVzZXI7XG4gICAgICAgIFdlYlNvY2tldENsaWVudC5zZW5kTWVzc2FnZSgnd2VicnRjJywge1xuICAgICAgICAgICAgYWN0aW9uOiBXZWJydGNBY3Rpb25UeXBlcy5DQU5DRUwsXG4gICAgICAgICAgICBmcm9tX3VzZXJfaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICB0b191c2VyX2lkOiB0aGlzLnByb3BzLnVzZXJJZFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmRvQ2xlYW51cCgpO1xuICAgIH1cblxuICAgIGhhbmRsZVdlYnJ0Y0V2ZW50KG1lc3NhZ2UpIHtcbiAgICAgICAgc3dpdGNoIChtZXNzYWdlLmFjdGlvbikge1xuICAgICAgICBjYXNlIFdlYnJ0Y0FjdGlvblR5cGVzLkRFQ0xJTkU6XG4gICAgICAgICAgICB0aGlzLm9uQ2FsbERlY2xpbmVkKCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFdlYnJ0Y0FjdGlvblR5cGVzLlVOU1VQUE9SVEVEOlxuICAgICAgICAgICAgdGhpcy5vblVuc3VwcG9ydGVkKCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFdlYnJ0Y0FjdGlvblR5cGVzLkJVU1k6XG4gICAgICAgICAgICB0aGlzLm9uQnVzeSgpO1xuICAgICAgICAgICAgdGhpcy5jbGVhckVycm9yKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBXZWJydGNBY3Rpb25UeXBlcy5OT19BTlNXRVI6XG4gICAgICAgICAgICB0aGlzLm9uTm9BbnN3ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJFcnJvcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgV2VicnRjQWN0aW9uVHlwZXMuRkFJTEVEOlxuICAgICAgICAgICAgdGhpcy5vbkZhaWxlZCgpO1xuICAgICAgICAgICAgdGhpcy5jbGVhckVycm9yKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBXZWJydGNBY3Rpb25UeXBlcy5BTlNXRVI6XG4gICAgICAgICAgICB0aGlzLm9uQ29ubmVjdENhbGwoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFdlYnJ0Y0FjdGlvblR5cGVzLkNBTkNFTDpcbiAgICAgICAgICAgIHRoaXMub25DYW5jZWxsZWQoKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJFcnJvcigpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgV2VicnRjQWN0aW9uVHlwZXMuTVVURUQ6XG4gICAgICAgICAgICB0aGlzLm9uVG9nZ2xlUmVtb3RlTXV0ZShtZXNzYWdlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFdlYnJ0Y0FjdGlvblR5cGVzLklOX1BST0dSRVNTOlxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgZXJyb3I6IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd3ZWJydGMuaW5Qcm9ncmVzcydcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdZb3UgaGF2ZSBhIGNhbGwgaW4gcHJvZ3Jlc3MuIFBsZWFzZSBoYW5nIHVwIGZpcnN0LidcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGVycm9yVHlwZTogJyB3YXJuaW5nJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFdlYnJ0Y0FjdGlvblR5cGVzLkRJU0FCTEVEOlxuICAgICAgICAgICAgdGhpcy5vbkRpc2FibGVkKCk7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRXJyb3IoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlVmlkZW9DYWxsRXZlbnQobXNnLCBqc2VwKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG1zZy5yZXN1bHQ7XG5cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSByZXN1bHQuZXZlbnQ7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50KSB7XG4gICAgICAgICAgICBjYXNlICdyZWdpc3RlcmVkJzpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0NhbGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb0NhbGwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdpbmNvbWluZ2NhbGwnOlxuICAgICAgICAgICAgICAgIHRoaXMuZG9BbnN3ZXIoanNlcCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhY2NlcHRlZCc6XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wUmluZ2luZygpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGpzZXApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb2NhbGwuaGFuZGxlUmVtb3RlSnNlcCh7anNlcH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2hhbmd1cCc6XG4gICAgICAgICAgICAgICAgdGhpcy5kb0hhbmd1cChmYWxzZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvckNvZGUgPSBtc2cuZXJyb3JfY29kZTtcbiAgICAgICAgICAgIGlmIChlcnJvckNvZGUgIT09IEFMUkVBRFlfUkVHSVNURVJFRF9FUlJPUiAmJiBlcnJvckNvZGUgIT09IFVTRVJOQU1FX1RBS0VOKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0hhbmd1cCh0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5pc0NhbGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRvQ2FsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlUmVtb3RlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgICAvLyBhdHRhY2hpbmcgc3RyZWFtIHRvIHdoZXJlIHRoZXkgYmVsb25nXG4gICAgICAgIHRoaXMucmVmc1snbWFpbi12aWRlbyddLnNyY09iamVjdCA9IHN0cmVhbTtcblxuICAgICAgICBsZXQgaXNSZW1vdGVQYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGlzUmVtb3RlTXV0ZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgdmlkZW9UcmFja3MgPSBzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKTtcbiAgICAgICAgY29uc3QgYXVkaW9UcmFja3MgPSBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKTtcbiAgICAgICAgaWYgKCF2aWRlb1RyYWNrcyB8fCB2aWRlb1RyYWNrcy5sZW5ndGggPT09IDAgfHwgdmlkZW9UcmFja3NbMF0ubXV0ZWQgfHwgIXZpZGVvVHJhY2tzWzBdLmVuYWJsZWQpIHtcbiAgICAgICAgICAgIGlzUmVtb3RlUGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYXVkaW9UcmFja3MgfHwgYXVkaW9UcmFja3MubGVuZ3RoID09PSAwIHx8IGF1ZGlvVHJhY2tzWzBdLm11dGVkIHx8ICFhdWRpb1RyYWNrc1swXS5lbmFibGVkKSB7XG4gICAgICAgICAgICBpc1JlbW90ZU11dGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNDYWxsaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGlzQW5zd2VyaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGNhbGxJblByb2dyZXNzOiB0cnVlLFxuICAgICAgICAgICAgaXNNdXRlZDogZmFsc2UsXG4gICAgICAgICAgICBpc1BhdXNlZDogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgIGVuZGVkOiBudWxsLFxuICAgICAgICAgICAgaXNSZW1vdGVQYXVzZWQsXG4gICAgICAgICAgICBpc1JlbW90ZU11dGVkXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRvZ2dsZUljb25zKCk7XG4gICAgfVxuXG4gICAgaGFuZGxlQ2xvc2UoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmNhbGxJblByb2dyZXNzKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBlcnJvcjogKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3dlYnJ0Yy5pblByb2dyZXNzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J1lvdSBoYXZlIGEgY2FsbCBpbiBwcm9ncmVzcy4gUGxlYXNlIGhhbmcgdXAgZmlyc3QuJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgZXJyb3JUeXBlOiAnIHdhcm5pbmcnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmlzQ2FsbGluZykge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVDYW5jZWxPZmZlcigpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZG9DbGVhbnVwKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbikge1xuICAgICAgICAgICAgdGhpcy5zZXNzaW9uLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5sb2NhbE1lZGlhKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3BNZWRpYVN0cmVhbSh0aGlzLmxvY2FsTWVkaWEpO1xuICAgICAgICAgICAgdGhpcy5sb2NhbE1lZGlhID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIFdlYnJ0Y0FjdGlvbnMuaW5pdFdlYnJ0YyhudWxsLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgb25TdGF0dXNDaGFuZ2UoKSB7XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IFVzZXJTdG9yZS5nZXRTdGF0dXModGhpcy5wcm9wcy51c2VySWQpO1xuXG4gICAgICAgIGlmIChzdGF0dXMgPT09IFVzZXJTdGF0dXNlcy5PRkZMSU5FKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0nd2VicnRjLm9mZmxpbmUnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSd7dXNlcm5hbWV9IGlzIG9mZmxpbmUnXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IFV0aWxzLmRpc3BsYXlVc2VybmFtZSh0aGlzLnByb3BzLnVzZXJJZClcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDYWxsaW5nIHx8IHRoaXMuc3RhdGUuaXNBbnN3ZXJpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgaXNDYWxsaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaXNBbnN3ZXJpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSW5Qcm9ncmVzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyAhPT0gVXNlclN0YXR1c2VzLk9GRkxJTkUgJiYgdGhpcy5zdGF0ZS5lcnJvcikge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICAgICAgZW5kZWQ6IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25DYWxsRGVjbGluZWQoKSB7XG4gICAgICAgIGxldCBlcnJvciA9IG51bGw7XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDYWxsaW5nKSB7XG4gICAgICAgICAgICBlcnJvciA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0nd2VicnRjLmRlY2xpbmVkJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nWW91ciBjYWxsIGhhcyBiZWVuIGRlY2xpbmVkIGJ5IHt1c2VybmFtZX0nXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IFV0aWxzLmRpc3BsYXlVc2VybmFtZSh0aGlzLnByb3BzLnVzZXJJZClcbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RvcFJpbmdpbmcoKTtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzQ2FsbGluZzogZmFsc2UsXG4gICAgICAgICAgICBpc0Fuc3dlcmluZzogZmFsc2UsXG4gICAgICAgICAgICBjYWxsSW5Qcm9ncmVzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvclxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmRvQ2xlYW51cCgpO1xuICAgIH1cblxuICAgIG9uVW5zdXBwb3J0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcFJpbmdpbmcoKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgZXJyb3I6IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd3ZWJydGMudW5zdXBwb3J0ZWQnXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ2FsbCB0byB7dXNlcm5hbWV9IG5vdCBzdWNjZXNzZnVsLiBUaGVpciBjbGllbnQgZG9lcyBub3Qgc3VwcG9ydCB2aWRlbyBjYWxscy4nXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogVXRpbHMuZGlzcGxheVVzZXJuYW1lKHRoaXMucHJvcHMudXNlcklkKVxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGNhbGxJblByb2dyZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc0NhbGxpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzQW5zd2VyaW5nOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRvQ2xlYW51cCgpO1xuICAgIH1cblxuICAgIG9uTm9BbnN3ZXIoKSB7XG4gICAgICAgIGxldCBlcnJvciA9IG51bGw7XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDYWxsaW5nKSB7XG4gICAgICAgICAgICBlcnJvciA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0nd2VicnRjLm5vQW5zd2VyJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0ne3VzZXJuYW1lfSBpcyBub3QgYW5zd2VyaW5nIHRoZSBjYWxsJ1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBVdGlscy5kaXNwbGF5VXNlcm5hbWUodGhpcy5wcm9wcy51c2VySWQpXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9wUmluZ2luZygpO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNDYWxsaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGlzQW5zd2VyaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGNhbGxJblByb2dyZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZG9DbGVhbnVwKCk7XG4gICAgfVxuXG4gICAgb25CdXN5KCkge1xuICAgICAgICBsZXQgZXJyb3IgPSBudWxsO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzQ2FsbGluZykge1xuICAgICAgICAgICAgZXJyb3IgPSAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3dlYnJ0Yy5idXN5J1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0ne3VzZXJuYW1lfSBpcyBidXN5J1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBVdGlscy5kaXNwbGF5VXNlcm5hbWUodGhpcy5wcm9wcy51c2VySWQpXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9wUmluZ2luZygpO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNDYWxsaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGlzQW5zd2VyaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGNhbGxJblByb2dyZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZG9DbGVhbnVwKCk7XG4gICAgfVxuXG4gICAgb25EaXNhYmxlZCgpIHtcbiAgICAgICAgbGV0IGVycm9yID0gbnVsbDtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pc0NhbGxpbmcpIHtcbiAgICAgICAgICAgIGVycm9yID0gKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSd3ZWJydGMuZGlzYWJsZWQnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSd7dXNlcm5hbWV9IGhhcyBXZWJSVEMgZGlzYWJsZWQsIGFuZCBjYW5ub3QgcmVjZWl2ZSBjYWxscy4gVG8gZW5hYmxlIHRoZSBmZWF0dXJlLCB0aGV5IG11c3QgZ28gdG8gQWNjb3VudCBTZXR0aW5ncyA+IEFkdmFuY2VkID4gUHJldmlldyBwcmUtcmVsZWFzZSBmZWF0dXJlcyBhbmQgdHVybiBvbiBXZWJSVEMuJ1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBVdGlscy5kaXNwbGF5VXNlcm5hbWUodGhpcy5wcm9wcy51c2VySWQpXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0b3BSaW5naW5nKCk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0NhbGxpbmc6IGZhbHNlLFxuICAgICAgICAgICAgaXNBbnN3ZXJpbmc6IGZhbHNlLFxuICAgICAgICAgICAgY2FsbEluUHJvZ3Jlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5kb0NsZWFudXAoKTtcbiAgICB9XG5cbiAgICBvbkZhaWxlZCgpIHtcbiAgICAgICAgdHJhY2tFdmVudCgnYXBpJywgJ2FwaV91c2Vyc193ZWJydGNfZmFpbGVkJyk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBpc0NhbGxpbmc6IGZhbHNlLFxuICAgICAgICAgICAgaXNBbnN3ZXJpbmc6IGZhbHNlLFxuICAgICAgICAgICAgY2FsbEluUHJvZ3Jlc3M6IGZhbHNlLFxuICAgICAgICAgICAgaXNQYXVzZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNNdXRlZDogZmFsc2UsXG4gICAgICAgICAgICBpc1JlbW90ZVBhdXNlZDogZmFsc2UsXG4gICAgICAgICAgICBpc1JlbW90ZU11dGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiAoXG4gICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9J3dlYnJ0Yy5mYWlsZWQnXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUaGVyZSB3YXMgYSBwcm9ibGVtIGNvbm5lY3RpbmcgdGhlIHZpZGVvIGNhbGwnXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zdG9wUmluZ2luZygpO1xuXG4gICAgICAgIHRoaXMuZG9DbGVhbnVwKCk7XG4gICAgfVxuXG4gICAgb25DYW5jZWxsZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdW50ZWQgJiYgdGhpcy5zdGF0ZS5pc0Fuc3dlcmluZykge1xuICAgICAgICAgICAgdGhpcy5zdG9wUmluZ2luZygpO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgaXNDYWxsaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc0Fuc3dlcmluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgY2FsbEluUHJvZ3Jlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiAoXG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nd2VicnRjLmNhbmNlbGxlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSd7dXNlcm5hbWV9IGNhbmNlbGxlZCB0aGUgY2FsbCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcz17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBVdGlscy5kaXNwbGF5VXNlcm5hbWUodGhpcy5wcm9wcy51c2VySWQpXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kb0NsZWFudXAoKTtcbiAgICB9XG5cbiAgICBvbkNvbm5lY3RDYWxsKCkge1xuICAgICAgICBXZWJydGNBY3Rpb25zLndlYnJ0Y1Rva2VuKFxuICAgICAgICAgICAgKGluZm8pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW5nTXNnID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J2Nvbm5lY3Rpbmdfc2NyZWVuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0Nvbm5lY3RpbmcnXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQW5zd2VyaW5nOiAhdGhpcy5zdGF0ZS5pc0NhbGxpbmcsIGNvbm5lY3RpbmdNc2d9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXNzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TZXNzaW9uQ3JlYXRlZCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGljZVNlcnZlcnMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby5zdHVuX3VyaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWNlU2VydmVycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmxzOiBpbmZvLnN0dW5fdXJpLnNwbGl0KCcgJylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8udHVybl91cmkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljZVNlcnZlcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsczogaW5mby50dXJuX3VyaS5zcGxpdCgnICcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBpbmZvLnR1cm5fdXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbDogaW5mby50dXJuX3Bhc3N3b3JkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIEphbnVzLmluaXQoe2RlYnVnOiBnbG9iYWwubW1fY29uZmlnLkVuYWJsZURldmVsb3BlciA9PT0gJ3RydWUnfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiA9IG5ldyBKYW51cyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJ2ZXI6IGluZm8uZ2F0ZXdheV91cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY2VTZXJ2ZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IGluZm8udG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0aGlzLm9uU2Vzc2lvbkNyZWF0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogdGhpcy5vblNlc3Npb25FcnJvclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub25TZXNzaW9uRXJyb3IoKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uU2Vzc2lvbkNyZWF0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZGVvY2FsbCkge1xuICAgICAgICAgICAgdGhpcy5kb0NhbGwoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbi5hdHRhY2goe1xuICAgICAgICAgICAgICAgIHBsdWdpbjogJ2phbnVzLnBsdWdpbi52aWRlb2NhbGwnLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IChwbHVnaW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb2NhbGwgPSBwbHVnaW47XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW9jYWxsLnNlbmQoe21lc3NhZ2U6IHtyZXF1ZXN0OiAncmVnaXN0ZXInLCB1c2VybmFtZTogdGhpcy5zdGF0ZS5jdXJyZW50VXNlci5pZH19KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiB0aGlzLm9uU2Vzc2lvbkVycm9yLFxuICAgICAgICAgICAgICAgIG9ubWVzc2FnZTogdGhpcy5oYW5kbGVWaWRlb0NhbGxFdmVudCxcbiAgICAgICAgICAgICAgICBvbnJlbW90ZXN0cmVhbTogdGhpcy5oYW5kbGVSZW1vdGVTdHJlYW1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25TZXNzaW9uRXJyb3IoKSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSB0aGlzLnN0YXRlLmN1cnJlbnRVc2VyO1xuICAgICAgICBXZWJTb2NrZXRDbGllbnQuc2VuZE1lc3NhZ2UoJ3dlYnJ0YycsIHtcbiAgICAgICAgICAgIGFjdGlvbjogV2VicnRjQWN0aW9uVHlwZXMuRkFJTEVELFxuICAgICAgICAgICAgZnJvbV91c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICAgICAgdG9fdXNlcl9pZDogdGhpcy5wcm9wcy51c2VySWRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5vbkZhaWxlZCgpO1xuICAgIH1cblxuICAgIGRvQ2FsbCgpIHtcbiAgICAgICAgLy8gZGVsYXkgY2FsbCBzbyByZWNlaXZlciBoYXMgdGltZSB0byByZWdpc3RlclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudmlkZW9jYWxsLmNyZWF0ZU9mZmVyKHtcbiAgICAgICAgICAgICAgICBzdHJlYW06IHRoaXMubG9jYWxNZWRpYSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiAoanNlcCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0ge3JlcXVlc3Q6ICdjYWxsJywgdXNlcm5hbWU6IHRoaXMucHJvcHMudXNlcklkfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWRlb2NhbGwuc2VuZCh7bWVzc2FnZTogYm9keSwganNlcH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb0hhbmd1cCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgQ29uc3RhbnRzLldFQlJUQ19USU1FX0RFTEFZKTtcbiAgICB9XG5cbiAgICBkb0Fuc3dlcihqc2VwKSB7XG4gICAgICAgIHRyYWNrRXZlbnQoJ2FwaScsICdhcGlfdXNlcnNfd2VicnRjX3N0YXJ0Jyk7XG4gICAgICAgIHRoaXMudmlkZW9jYWxsLmNyZWF0ZUFuc3dlcih7XG4gICAgICAgICAgICBqc2VwLFxuICAgICAgICAgICAgc3RyZWFtOiB0aGlzLmxvY2FsTWVkaWEsXG4gICAgICAgICAgICBzdWNjZXNzOiAoanNlcFN1Y2Nlc3MpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0ge3JlcXVlc3Q6ICdhY2NlcHQnfTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZGVvY2FsbC5zZW5kKHttZXNzYWdlOiBib2R5LCBqc2VwOiBqc2VwU3VjY2Vzc30pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb0hhbmd1cCh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZG9IYW5ndXAoZXJyb3IsIG1hbnVhbCkge1xuICAgICAgICB0cmFja0V2ZW50KCdhcGknLCAnYXBpX3VzZXJzX3dlYnJ0Y19lbmQnKTtcbiAgICAgICAgaWYgKHRoaXMudmlkZW9jYWxsICYmIHRoaXMuc3RhdGUuY2FsbEluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIHRoaXMudmlkZW9jYWxsLnNlbmQoe21lc3NhZ2U6IHtyZXF1ZXN0OiAnaGFuZ3VwJ319KTtcbiAgICAgICAgICAgIHRoaXMudmlkZW9jYWxsLmhhbmd1cCgpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVJY29ucygpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5sb2NhbE1lZGlhKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhbE1lZGlhLmdldFZpZGVvVHJhY2tzKClbMF0uZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhbE1lZGlhLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMub25TZXNzaW9uRXJyb3IoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvQ2xlYW51cCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgV2VicnRjU3RvcmUuc2V0VmlkZW9DYWxsV2l0aChudWxsKTtcbiAgICAgICAgV2VicnRjU3RvcmUuZW1pdFJoc0NoYW5nZWQoZmFsc2UpO1xuXG4gICAgICAgIGlmIChtYW51YWwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzQ2FsbGluZzogZmFsc2UsXG4gICAgICAgICAgICBpc0Fuc3dlcmluZzogZmFsc2UsXG4gICAgICAgICAgICBjYWxsSW5Qcm9ncmVzczogZmFsc2UsXG4gICAgICAgICAgICBpc1BhdXNlZDogZmFsc2UsXG4gICAgICAgICAgICBpc011dGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzUmVtb3RlUGF1c2VkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzUmVtb3RlTXV0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICBlbmRlZDogKFxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIGlkPSd3ZWJydGMuY2FsbEVuZGVkJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ2FsbCB3aXRoIHt1c2VybmFtZX0gZW5kZWQuJ1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBVdGlscy5kaXNwbGF5VXNlcm5hbWUodGhpcy5wcm9wcy51c2VySWQpXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIClcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2xlYXJFcnJvcigpO1xuICAgICAgICByZXR1cm4gdGhpcy5kb0NsZWFudXAoKTtcbiAgICB9XG5cbiAgICBkb0NsZWFudXAoKSB7XG4gICAgICAgIFdlYnJ0Y1N0b3JlLnNldFZpZGVvQ2FsbFdpdGgobnVsbCk7XG5cbiAgICAgICAgaWYgKHRoaXMudmlkZW9jYWxsKSB7XG4gICAgICAgICAgICB0aGlzLnZpZGVvY2FsbC5kZXRhY2goKTtcbiAgICAgICAgICAgIHRoaXMudmlkZW9jYWxsID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uVG9nZ2xlVmlkZW8oKSB7XG4gICAgICAgIGNvbnN0IHNob3VsZFBhdXNlID0gIXRoaXMuc3RhdGUuaXNQYXVzZWQ7XG4gICAgICAgIGlmIChzaG91bGRQYXVzZSkge1xuICAgICAgICAgICAgdGhpcy52aWRlb2NhbGwudW5tdXRlVmlkZW8oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmlkZW9jYWxsLm11dGVWaWRlbygpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXNlciA9IHRoaXMuc3RhdGUuY3VycmVudFVzZXI7XG4gICAgICAgIFdlYlNvY2tldENsaWVudC5zZW5kTWVzc2FnZSgnd2VicnRjJywge1xuICAgICAgICAgICAgYWN0aW9uOiBXZWJydGNBY3Rpb25UeXBlcy5NVVRFRCxcbiAgICAgICAgICAgIGZyb21fdXNlcl9pZDogdXNlci5pZCxcbiAgICAgICAgICAgIHRvX3VzZXJfaWQ6IHRoaXMucHJvcHMudXNlcklkLFxuICAgICAgICAgICAgdHlwZTogJ3ZpZGVvJyxcbiAgICAgICAgICAgIG11dGU6IHNob3VsZFBhdXNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNQYXVzZWQ6IHNob3VsZFBhdXNlLFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICBlbmRlZDogbnVsbFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvblRvZ2dsZUF1ZGlvKCkge1xuICAgICAgICBjb25zdCBzaG91bGRNdXRlID0gIXRoaXMuc3RhdGUuaXNNdXRlZDtcbiAgICAgICAgaWYgKHNob3VsZE11dGUpIHtcbiAgICAgICAgICAgIHRoaXMudmlkZW9jYWxsLnVubXV0ZUF1ZGlvKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZpZGVvY2FsbC5tdXRlQXVkaW8oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXIgPSB0aGlzLnN0YXRlLmN1cnJlbnRVc2VyO1xuICAgICAgICBXZWJTb2NrZXRDbGllbnQuc2VuZE1lc3NhZ2UoJ3dlYnJ0YycsIHtcbiAgICAgICAgICAgIGFjdGlvbjogV2VicnRjQWN0aW9uVHlwZXMuTVVURUQsXG4gICAgICAgICAgICBmcm9tX3VzZXJfaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICB0b191c2VyX2lkOiB0aGlzLnByb3BzLnVzZXJJZCxcbiAgICAgICAgICAgIHR5cGU6ICdhdWRpbycsXG4gICAgICAgICAgICBtdXRlOiBzaG91bGRNdXRlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgaXNNdXRlZDogc2hvdWxkTXV0ZSxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgZW5kZWQ6IG51bGxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25Ub2dnbGVSZW1vdGVNdXRlKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ3ZpZGVvJykge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgaXNSZW1vdGVQYXVzZWQ6IG1lc3NhZ2UubXV0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1JlbW90ZU11dGVkOiBtZXNzYWdlLm11dGUsIGVycm9yOiBudWxsLCBlbmRlZDogbnVsbH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9nZ2xlSWNvbnMoKSB7XG4gICAgICAgIGNvbnN0IGljb25zID0gdGhpcy5yZWZzLmljb25zO1xuICAgICAgICBpZiAoaWNvbnMpIHtcbiAgICAgICAgICAgIGljb25zLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgaWNvbnMuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJCdXR0b25zKCkge1xuICAgICAgICBsZXQgYnV0dG9ucztcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNDYWxsaW5nKSB7XG4gICAgICAgICAgICBidXR0b25zID0gKFxuICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgaWQ9J2NhbmNlbCdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3ZWJydGMtaWNvbnNfX2NhbmNlbCdcbiAgICAgICAgICAgICAgICAgICAgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJ1xuICAgICAgICAgICAgICAgICAgICB3aWR0aD0nNDgnXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD0nNDgnXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9Jy0xMCAtMTAgNjggNjgnXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMuaGFuZGxlQ2FuY2VsT2ZmZXIoKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxjaXJjbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGN4PScyNCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGN5PScyNCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHI9JzM0J1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3dlYnJ0Yy5jYW5jZWwnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdDYW5jZWwgQ2FsbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aXRsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9jaXJjbGU+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09J3NjYWxlKDAuOCksIHRyYW5zbGF0ZSg2LDEwKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGQ9J00yNCAxOGMtMy4yMSAwLTYuMy41LTkuMiAxLjQ0djYuMjFjMCAuNzktLjQ2IDEuNDctMS4xMiAxLjgtMS45NS45OC0zLjc0IDIuMjMtNS4zMyAzLjctLjM2LjM1LS44NS41Ny0xLjQuNTctLjU1IDAtMS4wNS0uMjItMS40MS0uNTlMLjU5IDI2LjE4Yy0uMzctLjM3LS41OS0uODctLjU5LTEuNDIgMC0uNTUuMjItMS4wNS41OS0xLjQyQzYuNjggMTcuNTUgMTQuOTMgMTQgMjQgMTRzMTcuMzIgMy41NSAyMy40MSA5LjM0Yy4zNy4zNi41OS44Ny41OSAxLjQyIDAgLjU1LS4yMiAxLjA1LS41OSAxLjQxbC00Ljk1IDQuOTVjLS4zNi4zNi0uODYuNTktMS40MS41OS0uNTQgMC0xLjA0LS4yMi0xLjQtLjU3LTEuNTktMS40Ny0zLjM4LTIuNzItNS4zMy0zLjctLjY2LS4zMy0xLjEyLTEuMDEtMS4xMi0xLjh2LTYuMjFDMzAuMyAxOC41IDI3LjIxIDE4IDI0IDE4eidcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9J3doaXRlJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5zdGF0ZS5jYWxsSW5Qcm9ncmVzcyAmJiB0aGlzLnN0YXRlLmxvY2FsTWVkaWFMb2FkZWQpIHtcbiAgICAgICAgICAgIGJ1dHRvbnMgPSAoXG4gICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICBpZD0nY2FsbCdcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3ZWJydGMtaWNvbnNfX2NhbGwnXG4gICAgICAgICAgICAgICAgICAgIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZydcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg9JzQ4J1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9JzQ4J1xuICAgICAgICAgICAgICAgICAgICB2aWV3Qm94PSctMTAgLTEwIDY4IDY4J1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLmhhbmRsZU1ha2VPZmZlcigpfVxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17VXNlclN0b3JlLmdldFN0YXR1cyh0aGlzLnByb3BzLnVzZXJJZCkgPT09ICdvZmZsaW5lJ31cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxjaXJjbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGN4PScyNCdcbiAgICAgICAgICAgICAgICAgICAgICAgIGN5PScyNCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHI9JzM0J1xuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3dlYnJ0Yy5jYWxsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ2FsbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC90aXRsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9jaXJjbGU+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09J3RyYW5zbGF0ZSgtMTAsLTEwKSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9JyNmZmYnXG4gICAgICAgICAgICAgICAgICAgICAgICBkPSdNMjkuODU0LDM3LjYyN2MxLjcyMywxLjkwNCAzLjY3OSwzLjQ2OCA1Ljc5Myw0LjY4NGwzLjY4MywtMy4zMzRjMC40NjksLTAuNDI0IDEuMTE5LC0wLjUxNyAxLjY2OSwtMC4zMDJjMS42MjgsMC42MyAzLjMzMSwxLjAyMSA1LjA1NiwxLjE3NGMwLjQwMSwwLjAyNiAwLjc5NSwwLjE5OSAxLjA5LDAuNTI1YzAuMjk1LDAuMzI2IDAuNDMzLDAuNzQxIDAuNDA3LDEuMTUzbC0wLjI3OSw1LjU5M2MtMC4wMiwwLjQxOCAtMC4xOTksMC44MTcgLTAuNTI1LDEuMTEyYy0wLjMyNiwwLjI5NiAtMC43NDEsMC40MzQgLTEuMTU5LDAuNDEzYy02LjcwNCwtMC41MDQgLTEzLjIzOCwtMy40OTEgLTE4LjEwOCwtOC44N2MtNC44NjksLTUuMzggLTcuMTkyLC0xMi4xNzkgLTcuMDI4LC0xOC44OTljMC4wMTUsLTAuNDEzIDAuMTk5LC0wLjgxNyAwLjUyNiwtMS4xMTNjMC4zMjYsLTAuMjk1IDAuNzQsLTAuNDMzIDEuMTUzLC0wLjQwN2w1LjU5MywwLjI3OWMwLjQwNywwLjAyIDAuODEyLDAuMTkzIDEuMTA3LDAuNTE5YzAuMjksMC4zMiAwLjQyOCwwLjczNSAwLjQxMywxLjEzN2MtMC4wMTgsMS43MzIgMC4yMDIsMy40NjQgMC42NjcsNS4xNDdjMC4xNTksMC41NjkgMC4wMDMsMS4yMDcgLTAuNDY2LDEuNjMxbC0zLjY4MywzLjMzNGMxLjAwNSwyLjIxOSAyLjM2OCw0LjMyIDQuMDkxLDYuMjI0WidcbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZS5jYWxsSW5Qcm9ncmVzcykge1xuICAgICAgICAgICAgY29uc3Qgb25DbGFzcyA9ICdvbic7XG4gICAgICAgICAgICBjb25zdCBvZmZDbGFzcyA9ICdvZmYnO1xuICAgICAgICAgICAgbGV0IGF1ZGlvT25DbGFzcyA9IG9mZkNsYXNzO1xuICAgICAgICAgICAgbGV0IGF1ZGlvT2ZmQ2xhc3MgPSBvbkNsYXNzO1xuICAgICAgICAgICAgbGV0IHZpZGVvT25DbGFzcyA9IG9mZkNsYXNzO1xuICAgICAgICAgICAgbGV0IHZpZGVvT2ZmQ2xhc3MgPSBvbkNsYXNzO1xuXG4gICAgICAgICAgICBsZXQgYXVkaW9UaXRsZSA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0nd2VicnRjLm11dGVfYXVkaW8nXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdNdXRlJ1xuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsZXQgdmlkZW9UaXRsZSA9IChcbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICBpZD0nd2VicnRjLnBhdXNlX3ZpZGVvJ1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVHVybiBvZmYgVmlkZW8nXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmlzTXV0ZWQpIHtcbiAgICAgICAgICAgICAgICBhdWRpb09uQ2xhc3MgPSBvbkNsYXNzO1xuICAgICAgICAgICAgICAgIGF1ZGlvT2ZmQ2xhc3MgPSBvZmZDbGFzcztcbiAgICAgICAgICAgICAgICBhdWRpb1RpdGxlID0gKFxuICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3dlYnJ0Yy51bm11dGVfYXVkaW8nXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nVW5tdXRlJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmlzUGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgdmlkZW9PbkNsYXNzID0gb25DbGFzcztcbiAgICAgICAgICAgICAgICB2aWRlb09mZkNsYXNzID0gb2ZmQ2xhc3M7XG4gICAgICAgICAgICAgICAgdmlkZW9UaXRsZSA9IChcbiAgICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSd3ZWJydGMudW5wYXVzZV92aWRlbydcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlPSdUdXJuIG9uIFZpZGVvJ1xuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbnMgPSAoXG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICByZWY9J2ljb25zJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3dlYnJ0Yy1pY29ucyBoaWRkZW4nXG4gICAgICAgICAgICAgICAgPlxuXG4gICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdtdXRlLWF1ZGlvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSd3ZWJydGMtaWNvbnNfX2NhbGwnXG4gICAgICAgICAgICAgICAgICAgICAgICB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0nNDgnXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9JzQ4J1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveD0nLTEwIC0xMCA2OCA2OCdcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMub25Ub2dnbGVBdWRpbygpfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3g9JzI0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN5PScyNCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByPSczNCdcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+e2F1ZGlvVGl0bGV9PC90aXRsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvY2lyY2xlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2F1ZGlvT25DbGFzc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09J3NjYWxlKDAuNiksIHRyYW5zbGF0ZSgxNywxOCknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZD0nTTM4IDIyaC0zLjRjMCAxLjQ5LS4zMSAyLjg3LS44NyA0LjFsMi40NiAyLjQ2QzM3LjMzIDI2LjYxIDM4IDI0LjM4IDM4IDIyem0tOC4wMy4zM2MwLS4xMS4wMy0uMjIuMDMtLjMzVjEwYzAtMy4zMi0yLjY5LTYtNi02cy02IDIuNjgtNiA2di4zN2wxMS45NyAxMS45NnpNOC41NSA2TDYgOC41NWwxMi4wMiAxMi4wMnYxLjQ0YzAgMy4zMSAyLjY3IDYgNS45OCA2IC40NSAwIC44OC0uMDYgMS4zLS4xNWwzLjMyIDMuMzJjLTEuNDMuNjYtMyAxLjAzLTQuNjIgMS4wMy01LjUyIDAtMTAuNi00LjItMTAuNi0xMC4ySDEwYzAgNi44MyA1LjQ0IDEyLjQ3IDEyIDEzLjQ0VjQyaDR2LTYuNTZjMS44MS0uMjcgMy41My0uOSA1LjA4LTEuODFMMzkuNDUgNDIgNDIgMzkuNDYgOC41NSA2eidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSd3aGl0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YXVkaW9PZmZDbGFzc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09J3NjYWxlKDAuNiksIHRyYW5zbGF0ZSgxNywxOCknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZD0nTTI0IDI4YzMuMzEgMCA1Ljk4LTIuNjkgNS45OC02TDMwIDEwYzAtMy4zMi0yLjY4LTYtNi02LTMuMzEgMC02IDIuNjgtNiA2djEyYzAgMy4zMSAyLjY5IDYgNiA2em0xMC42LTZjMCA2LTUuMDcgMTAuMi0xMC42IDEwLjItNS41MiAwLTEwLjYtNC4yLTEwLjYtMTAuMkgxMGMwIDYuODMgNS40NCAxMi40NyAxMiAxMy40NFY0Mmg0di02LjU2YzYuNTYtLjk3IDEyLTYuNjEgMTItMTMuNDRoLTMuNHonXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD0nd2hpdGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cblxuICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD0nbXV0ZS12aWRlbydcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nd2VicnRjLWljb25zX19jYWxsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9JzQ4J1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSc0OCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9Jy0xMCAtMTAgNjggNjgnXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLm9uVG9nZ2xlVmlkZW8oKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN4PScyNCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjeT0nMjQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcj0nMzQnXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPnt2aWRlb1RpdGxlfTwvdGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2NpcmNsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXt2aWRlb09uQ2xhc3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtPSdzY2FsZSgwLjYpLCB0cmFuc2xhdGUoMTcsMTYpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9J000MCA4SDE1LjY0bDggOEgyOHY0LjM2bDEuMTMgMS4xM0wzNiAxNnYxMi4zNmw3Ljk3IDcuOTdMNDQgMzZWMTJjMC0yLjIxLTEuNzktNC00LTR6TTQuNTUgMkwyIDQuNTVsNC4wMSA0LjAxQzQuODEgOS4yNCA0IDEwLjUyIDQgMTJ2MjRjMCAyLjIxIDEuNzkgNCA0IDRoMjkuNDVsNCA0TDQ0IDQxLjQ2IDQuNTUgMnpNMTIgMTZoMS40NUwyOCAzMC41NVYzMkgxMlYxNnonXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD0nd2hpdGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e3ZpZGVvT2ZmQ2xhc3N9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtPSdzY2FsZSgwLjYpLCB0cmFuc2xhdGUoMTcsMTYpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9J000MCA4SDhjLTIuMjEgMC00IDEuNzktNCA0djI0YzAgMi4yMSAxLjc5IDQgNCA0aDMyYzIuMjEgMCA0LTEuNzkgNC00VjEyYzAtMi4yMS0xLjc5LTQtNC00em0tNCAyNGwtOC02LjRWMzJIMTJWMTZoMTZ2Ni40bDgtNi40djE2eidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSd3aGl0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuXG4gICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdoYW5ndXAnXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3dlYnJ0Yy1pY29uc19fY2FuY2VsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9JzQ4J1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSc0OCdcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9Jy0xMCAtMTAgNjggNjgnXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLmRvSGFuZ3VwKGZhbHNlLCB0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN4PScyNCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjeT0nMjQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcj0nMzQnXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J3dlYnJ0Yy5oYW5ndXAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nSGFuZyB1cCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9jaXJjbGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybT0nc2NhbGUoMC43KSwgdHJhbnNsYXRlKDExLDEwKSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPSdNMjQgMThjLTMuMjEgMC02LjMuNS05LjIgMS40NHY2LjIxYzAgLjc5LS40NiAxLjQ3LTEuMTIgMS44LTEuOTUuOTgtMy43NCAyLjIzLTUuMzMgMy43LS4zNi4zNS0uODUuNTctMS40LjU3LS41NSAwLTEuMDUtLjIyLTEuNDEtLjU5TC41OSAyNi4xOGMtLjM3LS4zNy0uNTktLjg3LS41OS0xLjQyIDAtLjU1LjIyLTEuMDUuNTktMS40MkM2LjY4IDE3LjU1IDE0LjkzIDE0IDI0IDE0czE3LjMyIDMuNTUgMjMuNDEgOS4zNGMuMzcuMzYuNTkuODcuNTkgMS40MiAwIC41NS0uMjIgMS4wNS0uNTkgMS40MWwtNC45NSA0Ljk1Yy0uMzYuMzYtLjg2LjU5LTEuNDEuNTktLjU0IDAtMS4wNC0uMjItMS40LS41Ny0xLjU5LTEuNDctMy4zOC0yLjcyLTUuMzMtMy43LS42Ni0uMzMtMS4xMi0xLjAxLTEuMTItMS44di02LjIxQzMwLjMgMTguNSAyNy4yMSAxOCAyNCAxOHonXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbD0nd2hpdGUnXG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cblxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBidXR0b25zO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgY3VycmVudElkID0gVXNlclN0b3JlLmdldEN1cnJlbnRJZCgpO1xuICAgICAgICBjb25zdCByZW1vdGVJbWFnZSA9ICg8aW1nIHNyYz17dGhpcy5zdGF0ZS5yZW1vdGVVc2VySW1hZ2V9Lz4pO1xuICAgICAgICBsZXQgbG9jYWxJbWFnZTtcbiAgICAgICAgbGV0IGxvY2FsVmlkZW9IaWRkZW4gPSAnJztcbiAgICAgICAgbGV0IHJlbW90ZVZpZGVvSGlkZGVuID0gJ2hpZGRlbic7XG4gICAgICAgIGxldCBlcnJvcjtcbiAgICAgICAgbGV0IHJlbW90ZU11dGU7XG4gICAgICAgIGxldCBsb2NhbEltYWdlSGlkZGVuID0gJ3dlYnJ0Y19fbG9jYWwtaW1hZ2UgaGlkZGVuJztcbiAgICAgICAgbGV0IHJlbW90ZUltYWdlSGlkZGVuID0gJ3dlYnJ0Y19fcmVtb3RlLWltYWdlJztcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5lcnJvcikge1xuICAgICAgICAgICAgZXJyb3IgPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3dlYnJ0Y19fZXJyb3InPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nZm9ybS1ncm91cCBoYXMtZXJyb3InPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT17J2NvbnRyb2wtbGFiZWwnICsgdGhpcy5zdGF0ZS5lcnJvclR5cGV9Pnt0aGlzLnN0YXRlLmVycm9yfTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlLmVuZGVkKSB7XG4gICAgICAgICAgICBlcnJvciA9IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nd2VicnRjX19lcnJvcic+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdmb3JtLWdyb3VwJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J2NvbnRyb2wtbGFiZWwnPnt0aGlzLnN0YXRlLmVuZGVkfTwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzUmVtb3RlTXV0ZWQpIHtcbiAgICAgICAgICAgIHJlbW90ZU11dGUgPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3dlYnJ0Y19fcmVtb3RlLW11dGUnPlxuICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD0nNjAnXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9JzYwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveD0nLTEwIC0xMCA2OCA2OCdcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J29mZidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09J3NjYWxlKDAuNiksIHRyYW5zbGF0ZSgxNywxOCknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZD0nTTM4IDIyaC0zLjRjMCAxLjQ5LS4zMSAyLjg3LS44NyA0LjFsMi40NiAyLjQ2QzM3LjMzIDI2LjYxIDM4IDI0LjM4IDM4IDIyem0tOC4wMy4zM2MwLS4xMS4wMy0uMjIuMDMtLjMzVjEwYzAtMy4zMi0yLjY5LTYtNi02cy02IDIuNjgtNiA2di4zN2wxMS45NyAxMS45NnpNOC41NSA2TDYgOC41NWwxMi4wMiAxMi4wMnYxLjQ0YzAgMy4zMSAyLjY3IDYgNS45OCA2IC40NSAwIC44OC0uMDYgMS4zLS4xNWwzLjMyIDMuMzJjLTEuNDMuNjYtMyAxLjAzLTQuNjIgMS4wMy01LjUyIDAtMTAuNi00LjItMTAuNi0xMC4ySDEwYzAgNi44MyA1LjQ0IDEyLjQ3IDEyIDEzLjQ0VjQyaDR2LTYuNTZjMS44MS0uMjcgMy41My0uOSA1LjA4LTEuODFMMzkuNDUgNDIgNDIgMzkuNDYgOC41NSA2eidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsPSd3aGl0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nb24nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtPSdzY2FsZSgwLjYpLCB0cmFuc2xhdGUoMTcsMTgpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQ9J00yNCAyOGMzLjMxIDAgNS45OC0yLjY5IDUuOTgtNkwzMCAxMGMwLTMuMzItMi42OC02LTYtNi0zLjMxIDAtNiAyLjY4LTYgNnYxMmMwIDMuMzEgMi42OSA2IDYgNnptMTAuNi02YzAgNi01LjA3IDEwLjItMTAuNiAxMC4yLTUuNTIgMC0xMC42LTQuMi0xMC42LTEwLjJIMTBjMCA2LjgzIDUuNDQgMTIuNDcgMTIgMTMuNDRWNDJoNHYtNi41NmM2LjU2LS45NyAxMi02LjYxIDEyLTEzLjQ0aC0zLjR6J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9J3doaXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNlYXJjaEZvcm07XG4gICAgICAgIGlmIChjdXJyZW50SWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2VhcmNoRm9ybSA9IDxTZWFyY2hCb3gvPjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0aGlzLnJlbmRlckJ1dHRvbnMoKTtcbiAgICAgICAgY29uc3QgY2FsbGluZyA9IHRoaXMuc3RhdGUuaXNDYWxsaW5nO1xuICAgICAgICBsZXQgY29ubmVjdGluZztcbiAgICAgICAgbGV0IGF1ZGlvO1xuICAgICAgICBpZiAoY2FsbGluZyB8fCB0aGlzLnN0YXRlLmlzQW5zd2VyaW5nKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGluZykge1xuICAgICAgICAgICAgICAgIGF1ZGlvID0gKFxuICAgICAgICAgICAgICAgICAgICA8YXVkaW9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0ncmluZydcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17cmluZ31cbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9QbGF5PXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbm5lY3RpbmcgPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Nvbm5lY3RpbmcnPlxuICAgICAgICAgICAgICAgICAgICA8Q29ubmVjdGluZ1NjcmVlblxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb249J2Fic29sdXRlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17dGhpcy5zdGF0ZS5jb25uZWN0aW5nTXNnfVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICB7YXVkaW99XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY2FsbEluUHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmlzUGF1c2VkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWaWRlb0hpZGRlbiA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgICAgIGxvY2FsSW1hZ2VIaWRkZW4gPSAnd2VicnRjX19sb2NhbC1pbWFnZSc7XG4gICAgICAgICAgICAgICAgbG9jYWxJbWFnZSA9ICg8aW1nIHNyYz17dGhpcy5zdGF0ZS5jdXJyZW50VXNlckltYWdlfS8+KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNSZW1vdGVQYXVzZWQpIHtcbiAgICAgICAgICAgICAgICByZW1vdGVWaWRlb0hpZGRlbiA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgICAgIHJlbW90ZUltYWdlSGlkZGVuID0gJ3dlYnJ0Y19fcmVtb3RlLWltYWdlJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVtb3RlVmlkZW9IaWRkZW4gPSAnJztcbiAgICAgICAgICAgICAgICByZW1vdGVJbWFnZUhpZGRlbiA9ICd3ZWJydGNfX3JlbW90ZS1pbWFnZSBoaWRkZW4nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwb3N0LXJpZ2h0X19jb250YWluZXInPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzZWFyY2gtYmFyX19jb250YWluZXIgY2hhbm5lbC1oZWFkZXIgYWx0Jz57c2VhcmNoRm9ybX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2lkZWJhci1yaWdodF9fYm9keSc+XG4gICAgICAgICAgICAgICAgICAgIDxXZWJydGNIZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lPXtVdGlscy5kaXNwbGF5VXNlcm5hbWUodGhpcy5wcm9wcy51c2VySWQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17dGhpcy5oYW5kbGVDbG9zZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZVNpemU9e3RoaXMucHJvcHMudG9nZ2xlU2l6ZX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Bvc3QtcmlnaHRfX3Njcm9sbCc+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSd2aWRlb3MnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW1vdGVNdXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9J21haW4tdmlkZW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17cmVtb3RlVmlkZW9IaWRkZW59XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9QbGF5PXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHZpZGVvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9J21haW4tdmlkZW8nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvUGxheT17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdsb2NhbC12aWRlbydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtsb2NhbFZpZGVvSGlkZGVufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHZpZGVvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9J2xvY2FsLXZpZGVvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b1BsYXk9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXRlZD17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17cmVtb3RlSW1hZ2VIaWRkZW59PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVtb3RlSW1hZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2xvY2FsSW1hZ2VIaWRkZW59PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bG9jYWxJbWFnZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAge2Vycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAge2Nvbm5lY3Rpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nd2VicnRjLWJ1dHRvbnMnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtidXR0b25zfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5XZWJydGNDb250cm9sbGVyLnByb3BUeXBlcyA9IHtcbiAgICBjdXJyZW50VXNlcjogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB1c2VySWQ6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgICBpc0NhbGxlcjogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICBleHBhbmRlZDogUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcbiAgICB0b2dnbGVTaXplOiBQcm9wVHlwZXMuZnVuY1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3dlYnJ0Yy93ZWJydGNfY29udHJvbGxlci5qc3giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7Ozs7Ozs7QUEzQkE7QUFDQTtBQUNBO0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpCQTtBQXBEQTtBQXVFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFGQTtBQVdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUZBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBS0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUtBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5Q0E7QUFnREE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWxCQTtBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFLQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBUUE7QUFDQTtBQUNBO0FBWkE7QUFjQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRkE7QUFUQTtBQUNBO0FBZUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFMQTtBQWNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUZBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVdBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUhBO0FBVkE7QUFtQkE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFMQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFyQkE7QUE0QkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQVJBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTEE7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBdEJBO0FBNkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFGQTtBQUNBO0FBS0E7QUFFQTtBQUNBO0FBRkE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQVBBO0FBU0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUF0QkE7QUE4QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFMQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQXRCQTtBQThCQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFQQTtBQVNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUxBO0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQXJCQTtBQWpFQTtBQStGQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQURBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQVpBO0FBREE7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUZBO0FBTEE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQXpCQTtBQTZCQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWhDQTtBQU5BO0FBRkE7QUErQ0E7OztBQWhyQ0E7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQWlyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2552\n");

/***/ }),

/***/ 2553:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n The MIT License (MIT)\n\n Copyright (c) 2016 Meetecho\n\n Permission is hereby granted, free of charge, to any person obtaining\n a copy of this software and associated documentation files (the \"Software\"),\n to deal in the Software without restriction, including without limitation\n the rights to use, copy, modify, merge, publish, distribute, sublicense,\n and/or sell copies of the Software, and to permit persons to whom the\n Software is furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included\n in all copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\n THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR\n OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\n ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n OTHER DEALINGS IN THE SOFTWARE.\n */\n\nvar adapter = __webpack_require__(2554);\n\n// List of sessions\nJanus.sessions = {};\n\n// Screensharing Chrome Extension ID\nJanus.extensionId = \"hapfgfdkleiggjjpfpenajgdnfckjpaj\";\nJanus.isExtensionEnabled = function() {\n    if(window.navigator.userAgent.match('Chrome')) {\n        var chromever = parseInt(window.navigator.userAgent.match(/Chrome\\/(.*) /)[1], 10);\n        var maxver = 33;\n        if(window.navigator.userAgent.match('Linux'))\n            maxver = 35;\t// \"known\" crash in chrome 34 and 35 on linux\n        if(chromever >= 26 && chromever <= maxver) {\n            // Older versions of Chrome don't support this extension-based approach, so lie\n            return true;\n        }\n        return (document.getElementById('janus-extension-installed') !== null);\n    } else {\n        // Firefox of others, no need for the extension (but this doesn't mean it will work)\n        return true;\n    }\n};\n\nJanus.noop = function() {};\n\n// Initialization\nJanus.init = function(options) {\n    options = options || {};\n    options.callback = (typeof options.callback == \"function\") ? options.callback : Janus.noop;\n    if(Janus.initDone === true) {\n        // Already initialized\n        options.callback();\n    } else {\n        if(typeof console == \"undefined\" || typeof console.log == \"undefined\")\n            console = { log: function() {} };\n        // Console logging (all debugging disabled by default)\n        Janus.trace = Janus.noop;\n        Janus.debug = Janus.noop;\n        Janus.vdebug = Janus.noop;\n        Janus.log = Janus.noop;\n        Janus.warn = Janus.noop;\n        Janus.error = Janus.noop;\n        if(options.debug === true || options.debug === \"all\") {\n            // Enable all debugging levels\n            Janus.trace = console.trace.bind(console);\n            Janus.debug = console.debug.bind(console);\n            Janus.vdebug = console.debug.bind(console);\n            Janus.log = console.log.bind(console);\n            Janus.warn = console.warn.bind(console);\n            Janus.error = console.error.bind(console);\n        } else if(Array.isArray(options.debug)) {\n            for(var i in options.debug) {\n                var d = options.debug[i];\n                switch(d) {\n                case \"trace\":\n                    Janus.trace = console.trace.bind(console);\n                    break;\n                case \"debug\":\n                    Janus.debug = console.debug.bind(console);\n                    break;\n                case \"vdebug\":\n                    Janus.vdebug = console.debug.bind(console);\n                    break;\n                case \"log\":\n                    Janus.log = console.log.bind(console);\n                    break;\n                case \"warn\":\n                    Janus.warn = console.warn.bind(console);\n                    break;\n                case \"error\":\n                    Janus.error = console.error.bind(console);\n                    break;\n                default:\n                    console.error(\"Unknown debugging option '\" + d + \"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')\");\n                    break;\n                }\n            }\n        }\n        Janus.log(\"Initializing library\");\n        // Helper method to enumerate devices\n        Janus.listDevices = function(callback) {\n            callback = (typeof callback == \"function\") ? callback : Janus.noop;\n            if(navigator.mediaDevices) {\n                navigator.mediaDevices.getUserMedia({ audio: true, video: true })\n                    .then(function(stream) {\n                        navigator.mediaDevices.enumerateDevices().then(function(devices) {\n                            Janus.debug(devices);\n                            callback(devices);\n                            // Get rid of the now useless stream\n                            try {\n                                stream.stop();\n                            } catch(e) {}\n                            try {\n                                var tracks = stream.getTracks();\n                                for(var i in tracks) {\n                                    var mst = tracks[i];\n                                    if(mst !== null && mst !== undefined)\n                                        mst.stop();\n                                }\n                            } catch(e) {}\n                        });\n                    })\n                    .catch(function(err) {\n                        Janus.error(err);\n                        callback([]);\n                    });\n            } else {\n                Janus.warn(\"navigator.mediaDevices unavailable\");\n                callback([]);\n            }\n        }\n        // Helper methods to attach/reattach a stream to a video element (previously part of adapter.js)\n        Janus.attachMediaStream = function(element, stream) {\n            if(adapter.browserDetails.browser === 'chrome') {\n                var chromever = adapter.browserDetails.version;\n                if(chromever >= 43) {\n                    element.srcObject = stream;\n                } else if(typeof element.src !== 'undefined') {\n                    element.src = URL.createObjectURL(stream);\n                } else {\n                    Janus.error(\"Error attaching stream to element\");\n                }\n            } else {\n                element.srcObject = stream;\n            }\n        };\n        Janus.reattachMediaStream = function(to, from) {\n            if(adapter.browserDetails.browser === 'chrome') {\n                var chromever = adapter.browserDetails.version;\n                if(chromever >= 43) {\n                    to.srcObject = from.srcObject;\n                } else if(typeof to.src !== 'undefined') {\n                    to.src = from.src;\n                }\n            } else {\n                to.srcObject = from.srcObject;\n            }\n        };\n        // Prepare a helper method to send AJAX requests in a syntax similar to jQuery (at least for what we care)\n        Janus.ajax = function(params) {\n            // Check params\n            if(params === null || params === undefined)\n                return;\n            params.success = (typeof params.success == \"function\") ? params.success : Janus.noop;\n            params.error = (typeof params.error == \"function\") ? params.error : Janus.noop;\n            // Make sure there's an URL\n            if(params.url === null || params.url === undefined) {\n                Janus.error('Missing url', params.url);\n                params.error(null, -1, 'Missing url');\n                return;\n            }\n            // Validate async\n            params.async = (params.async === null || params.async === undefined) ? true : (params.async === true);\n            Janus.log(params);\n            // IE doesn't even know what WebRTC is, so no polyfill needed\n            var XHR = new XMLHttpRequest();\n            XHR.open(params.type, params.url, params.async);\n            if(params.contentType !== null && params.contentType !== undefined)\n                XHR.setRequestHeader('Content-type', params.contentType);\n            if(params.async) {\n                XHR.onreadystatechange = function () {\n                    if(XHR.readyState != 4)\n                        return;\n                    if(XHR.status !== 200) {\n                        // Got an error?\n                        if(XHR.status === 0)\n                            XHR.status = \"error\";\n                        params.error(XHR, XHR.status, \"\");\n                        return;\n                    }\n                    // Got payload\n                    params.success(JSON.parse(XHR.responseText));\n                };\n            }\n            try {\n                XHR.send(params.data);\n                if(!params.async) {\n                    if(XHR.status !== 200) {\n                        // Got an error?\n                        if(XHR.status === 0)\n                            XHR.status = \"error\";\n                        params.error(XHR, XHR.status, \"\");\n                        return;\n                    }\n                    // Got payload\n                    params.success(JSON.parse(XHR.responseText));\n                }\n            } catch(e) {\n                // Something broke up\n                params.error(XHR, 'error', '');\n            };\n        };\n        // Detect tab close: make sure we don't loose existing onbeforeunload handlers\n        var oldOBF = window.onbeforeunload;\n        window.onbeforeunload = function() {\n            Janus.log(\"Closing window\");\n            for(var s in Janus.sessions) {\n                if(Janus.sessions[s] !== null && Janus.sessions[s] !== undefined &&\n                    Janus.sessions[s].destroyOnUnload) {\n                    Janus.log(\"Destroying session \" + s);\n                    Janus.sessions[s].destroy({asyncRequest: false});\n                }\n            }\n            if(oldOBF && typeof oldOBF == \"function\")\n                oldOBF();\n        }\n        function addJsList(srcArray) {\n            if (!srcArray || !Array.isArray(srcArray) || srcArray.length == 0) {\n                options.callback();\n            }\n            var count = 0;\n            addJs(srcArray[count],next);\n\n            function next() {\n                count++;\n                if (count<srcArray.length) {\n                    addJs(srcArray[count],next);\n                }\n                else {\n                    options.callback();\n                }\n            }\n        }\n        function addJs(src,done) {\n            try {\n                if(adapter) {\n                    // Already loaded\n                    Janus.debug(src + \" already loaded, skipping\");\n                    done();\n                    return;\n                }\n            } catch(e) {};\n            var oHead = document.getElementsByTagName('head').item(0);\n            var oScript = document.createElement(\"script\");\n            oScript.type = \"text/javascript\";\n            oScript.src = src;\n            oScript.onload = function() {\n                Janus.log(\"Library \" + src + \" loaded\");\n                done();\n            }\n            oHead.appendChild(oScript);\n        }\n        Janus.initDone = true;\n        addJsList([\"adapter.js\"]);\t// We may need others in the future\n    }\n};\n\n// Helper method to check whether WebRTC is supported by this browser\nJanus.isWebrtcSupported = function() {\n    return window.RTCPeerConnection !== undefined && window.RTCPeerConnection !== null &&\n        navigator.getUserMedia !== undefined && navigator.getUserMedia !== null;\n};\n\n\n// Janus session object\nfunction Janus(gatewayCallbacks) {\n    if(Janus.initDone === undefined) {\n        gatewayCallbacks.error(\"Library not initialized\");\n        return {};\n    }\n    if(!Janus.isWebrtcSupported()) {\n        gatewayCallbacks.error(\"WebRTC not supported by this browser\");\n        return {};\n    }\n    Janus.log(\"Library initialized: \" + Janus.initDone);\n    gatewayCallbacks = gatewayCallbacks || {};\n    gatewayCallbacks.success = (typeof gatewayCallbacks.success == \"function\") ? gatewayCallbacks.success : Janus.noop;\n    gatewayCallbacks.error = (typeof gatewayCallbacks.error == \"function\") ? gatewayCallbacks.error : Janus.noop;\n    gatewayCallbacks.destroyed = (typeof gatewayCallbacks.destroyed == \"function\") ? gatewayCallbacks.destroyed : Janus.noop;\n    if(gatewayCallbacks.server === null || gatewayCallbacks.server === undefined) {\n        gatewayCallbacks.error(\"Invalid gateway url\");\n        return {};\n    }\n    var websockets = false;\n    var ws = null;\n    var wsHandlers = {};\n    var wsKeepaliveTimeoutId = null;\n\n    var servers = null, serversIndex = 0;\n    var server = gatewayCallbacks.server;\n    if(Array.isArray(server)) {\n        Janus.log(\"Multiple servers provided (\" + server.length + \"), will use the first that works\");\n        server = null;\n        servers = gatewayCallbacks.server;\n        Janus.debug(servers);\n    } else {\n        if(server.indexOf(\"ws\") === 0) {\n            websockets = true;\n            Janus.log(\"Using WebSockets to contact Janus: \" + server);\n        } else {\n            websockets = false;\n            Janus.log(\"Using REST API to contact Janus: \" + server);\n        }\n    }\n    var iceServers = gatewayCallbacks.iceServers;\n    if(iceServers === undefined || iceServers === null || iceServers.length === 0) {\n        iceServers = [{urls: \"stun:stun.l.google.com:19302\"}];\n        Janus.log('using ice', iceServers);\n    }\n    var iceTransportPolicy = gatewayCallbacks.iceTransportPolicy;\n    // Whether IPv6 candidates should be gathered\n    var ipv6Support = gatewayCallbacks.ipv6;\n    if(ipv6Support === undefined || ipv6Support === null)\n        ipv6Support = false;\n    // Optional max events\n    var maxev = null;\n    if(gatewayCallbacks.max_poll_events !== undefined && gatewayCallbacks.max_poll_events !== null)\n        maxev = gatewayCallbacks.max_poll_events;\n    if(maxev < 1)\n        maxev = 1;\n    // Token to use (only if the token based authentication mechanism is enabled)\n    var token = null;\n    if(gatewayCallbacks.token !== undefined && gatewayCallbacks.token !== null)\n        token = gatewayCallbacks.token;\n    // API secret to use (only if the shared API secret is enabled)\n    var apisecret = null;\n    if(gatewayCallbacks.apisecret !== undefined && gatewayCallbacks.apisecret !== null)\n        apisecret = gatewayCallbacks.apisecret;\n    // Whether we should destroy this session when onbeforeunload is called\n    this.destroyOnUnload = true;\n    if(gatewayCallbacks.destroyOnUnload !== undefined && gatewayCallbacks.destroyOnUnload !== null)\n        this.destroyOnUnload = (gatewayCallbacks.destroyOnUnload === true);\n\n    var connected = false;\n    var sessionId = null;\n    var pluginHandles = {};\n    var that = this;\n    var retries = 0;\n    var transactions = {};\n    createSession(gatewayCallbacks);\n\n    // Public methods\n    this.getServer = function() { return server; };\n    this.isConnected = function() { return connected; };\n    this.getSessionId = function() { return sessionId; };\n    this.destroy = function(callbacks) { destroySession(callbacks, true); };\n    this.attach = function(callbacks) { createHandle(callbacks); };\n\n    // Private method to create random identifiers (e.g., transaction)\n    function randomString(len) {\n        var charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        var randomString = '';\n        for (var i = 0; i < len; i++) {\n            var randomPoz = Math.floor(Math.random() * charSet.length);\n            randomString += charSet.substring(randomPoz,randomPoz+1);\n        }\n        return randomString;\n    }\n\n    function eventHandler() {\n        if(sessionId == null)\n            return;\n        Janus.debug('Long poll...');\n        if(!connected) {\n            Janus.warn(\"Is the gateway down? (connected=false)\");\n            return;\n        }\n        var longpoll = server + \"/\" + sessionId + \"?rid=\" + new Date().getTime();\n        if(maxev !== undefined && maxev !== null)\n            longpoll = longpoll + \"&maxev=\" + maxev;\n        if(token !== null && token !== undefined)\n            longpoll = longpoll + \"&token=\" + token;\n        if(apisecret !== null && apisecret !== undefined)\n            longpoll = longpoll + \"&apisecret=\" + apisecret;\n        Janus.ajax({\n            type: 'GET',\n            url: longpoll,\n            cache: false,\n            timeout: 60000,\t// FIXME\n            success: handleEvent,\n            error: function(XMLHttpRequest, textStatus, errorThrown) {\n                Janus.error(textStatus + \": \" + errorThrown);\n                //~ clearTimeout(timeoutTimer);\n                retries++;\n                if(retries > 3) {\n                    // Did we just lose the gateway? :-(\n                    connected = false;\n                    gatewayCallbacks.error(\"Lost connection to the gateway (is it down?)\");\n                    return;\n                }\n                eventHandler();\n            },\n            dataType: \"json\"\n        });\n    }\n\n    // Private event handler: this will trigger plugin callbacks, if set\n    function handleEvent(json) {\n        retries = 0;\n        if(!websockets && sessionId !== undefined && sessionId !== null)\n            setTimeout(eventHandler, 200);\n        if(!websockets && Array.isArray(json)) {\n            // We got an array: it means we passed a maxev > 1, iterate on all objects\n            for(var i=0; i<json.length; i++) {\n                handleEvent(json[i]);\n            }\n            return;\n        }\n        if(json[\"janus\"] === \"keepalive\") {\n            // Nothing happened\n            Janus.vdebug(\"Got a keepalive on session \" + sessionId);\n            return;\n        } else if(json[\"janus\"] === \"ack\") {\n            // Just an ack, we can probably ignore\n            Janus.debug(\"Got an ack on session \" + sessionId);\n            Janus.debug(json);\n            var transaction = json[\"transaction\"];\n            if(transaction !== null && transaction !== undefined) {\n                var reportSuccess = transactions[transaction];\n                if(reportSuccess !== null && reportSuccess !== undefined) {\n                    reportSuccess(json);\n                }\n                delete transactions[transaction];\n            }\n            return;\n        } else if(json[\"janus\"] === \"success\") {\n            // Success!\n            Janus.debug(\"Got a success on session \" + sessionId);\n            Janus.debug(json);\n            var transaction = json[\"transaction\"];\n            if(transaction !== null && transaction !== undefined) {\n                var reportSuccess = transactions[transaction];\n                if(reportSuccess !== null && reportSuccess !== undefined) {\n                    reportSuccess(json);\n                }\n                delete transactions[transaction];\n            }\n            return;\n        } else if(json[\"janus\"] === \"webrtcup\") {\n            // The PeerConnection with the gateway is up! Notify this\n            Janus.debug(\"Got a webrtcup event on session \" + sessionId);\n            Janus.debug(json);\n            var sender = json[\"sender\"];\n            if(sender === undefined || sender === null) {\n                Janus.warn(\"Missing sender...\");\n                return;\n            }\n            var pluginHandle = pluginHandles[sender];\n            if(pluginHandle === undefined || pluginHandle === null) {\n                Janus.warn(\"This handle is not attached to this session\");\n                return;\n            }\n            pluginHandle.webrtcState(true);\n            return;\n        } else if(json[\"janus\"] === \"hangup\") {\n            // A plugin asked the core to hangup a PeerConnection on one of our handles\n            Janus.debug(\"Got a hangup event on session \" + sessionId);\n            Janus.debug(json);\n            var sender = json[\"sender\"];\n            if(sender === undefined || sender === null) {\n                Janus.warn(\"Missing sender...\");\n                return;\n            }\n            var pluginHandle = pluginHandles[sender];\n            if(pluginHandle === undefined || pluginHandle === null) {\n                Janus.warn(\"This handle is not attached to this session\");\n                return;\n            }\n            pluginHandle.webrtcState(false);\n            pluginHandle.hangup();\n        } else if(json[\"janus\"] === \"detached\") {\n            // A plugin asked the core to detach one of our handles\n            Janus.debug(\"Got a detached event on session \" + sessionId);\n            Janus.debug(json);\n            var sender = json[\"sender\"];\n            if(sender === undefined || sender === null) {\n                Janus.warn(\"Missing sender...\");\n                return;\n            }\n            var pluginHandle = pluginHandles[sender];\n            if(pluginHandle === undefined || pluginHandle === null) {\n                // Don't warn here because destroyHandle causes this situation.\n                return;\n            }\n            pluginHandle.ondetached();\n            pluginHandle.detach();\n        } else if(json[\"janus\"] === \"media\") {\n            // Media started/stopped flowing\n            Janus.debug(\"Got a media event on session \" + sessionId);\n            Janus.debug(json);\n            var sender = json[\"sender\"];\n            if(sender === undefined || sender === null) {\n                Janus.warn(\"Missing sender...\");\n                return;\n            }\n            var pluginHandle = pluginHandles[sender];\n            if(pluginHandle === undefined || pluginHandle === null) {\n                Janus.warn(\"This handle is not attached to this session\");\n                return;\n            }\n            pluginHandle.mediaState(json[\"type\"], json[\"receiving\"]);\n        } else if(json[\"janus\"] === \"slowlink\") {\n            Janus.debug(\"Got a slowlink event on session \" + sessionId);\n            Janus.debug(json);\n            // Trouble uplink or downlink\n            var sender = json[\"sender\"];\n            if(sender === undefined || sender === null) {\n                Janus.warn(\"Missing sender...\");\n                return;\n            }\n            var pluginHandle = pluginHandles[sender];\n            if(pluginHandle === undefined || pluginHandle === null) {\n                Janus.warn(\"This handle is not attached to this session\");\n                return;\n            }\n            pluginHandle.slowLink(json[\"uplink\"], json[\"nacks\"]);\n        } else if(json[\"janus\"] === \"error\") {\n            // Oops, something wrong happened\n            Janus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n            Janus.debug(json);\n            var transaction = json[\"transaction\"];\n            if(transaction !== null && transaction !== undefined) {\n                var reportSuccess = transactions[transaction];\n                if(reportSuccess !== null && reportSuccess !== undefined) {\n                    reportSuccess(json);\n                }\n                delete transactions[transaction];\n            }\n            return;\n        } else if(json[\"janus\"] === \"event\") {\n            Janus.debug(\"Got a plugin event on session \" + sessionId);\n            Janus.debug(json);\n            var sender = json[\"sender\"];\n            if(sender === undefined || sender === null) {\n                Janus.warn(\"Missing sender...\");\n                return;\n            }\n            var plugindata = json[\"plugindata\"];\n            if(plugindata === undefined || plugindata === null) {\n                Janus.warn(\"Missing plugindata...\");\n                return;\n            }\n            Janus.debug(\"  -- Event is coming from \" + sender + \" (\" + plugindata[\"plugin\"] + \")\");\n            var data = plugindata[\"data\"];\n            Janus.debug(data);\n            var pluginHandle = pluginHandles[sender];\n            if(pluginHandle === undefined || pluginHandle === null) {\n                Janus.warn(\"This handle is not attached to this session\");\n                return;\n            }\n            var jsep = json[\"jsep\"];\n            if(jsep !== undefined && jsep !== null) {\n                Janus.debug(\"Handling SDP as well...\");\n                Janus.debug(jsep);\n            }\n            var callback = pluginHandle.onmessage;\n            if(callback !== null && callback !== undefined) {\n                Janus.debug(\"Notifying application...\");\n                // Send to callback specified when attaching plugin handle\n                callback(data, jsep);\n            } else {\n                // Send to generic callback (?)\n                Janus.debug(\"No provided notification callback\");\n            }\n        } else {\n            Janus.warn(\"Unkown message/event  '\" + json[\"janus\"] + \"' on session \" + sessionId);\n            Janus.debug(json);\n        }\n    }\n\n    // Private helper to send keep-alive messages on WebSockets\n    function keepAlive() {\n        if(server === null || !websockets || !connected)\n            return;\n        wsKeepaliveTimeoutId = setTimeout(keepAlive, 30000);\n        var request = { \"janus\": \"keepalive\", \"session_id\": sessionId, \"transaction\": randomString(12) };\n        if(token !== null && token !== undefined)\n            request[\"token\"] = token;\n        if(apisecret !== null && apisecret !== undefined)\n            request[\"apisecret\"] = apisecret;\n        ws.send(JSON.stringify(request));\n    }\n\n    // Private method to create a session\n    function createSession(callbacks) {\n        var transaction = randomString(12);\n        var request = { \"janus\": \"create\", \"transaction\": transaction };\n        if(token !== null && token !== undefined)\n            request[\"token\"] = token;\n        if(apisecret !== null && apisecret !== undefined)\n            request[\"apisecret\"] = apisecret;\n        if(server === null && Array.isArray(servers)) {\n            // We still need to find a working server from the list we were given\n            server = servers[serversIndex];\n            if(server.indexOf(\"ws\") === 0) {\n                websockets = true;\n                Janus.log(\"Server #\" + (serversIndex+1) + \": trying WebSockets to contact Janus (\" + server + \")\");\n            } else {\n                websockets = false;\n                Janus.log(\"Server #\" + (serversIndex+1) + \": trying REST API to contact Janus (\" + server + \")\");\n            }\n        }\n        if(websockets) {\n            ws = new WebSocket(server, 'janus-protocol');\n            wsHandlers = {\n                'error': function() {\n                    Janus.error(\"Error connecting to the Janus WebSockets server... \" + server);\n                    if (Array.isArray(servers)) {\n                        serversIndex++;\n                        if (serversIndex == servers.length) {\n                            // We tried all the servers the user gave us and they all failed\n                            callbacks.error(\"Error connecting to any of the provided Janus servers: Is the gateway down?\");\n                            return;\n                        }\n                        // Let's try the next server\n                        server = null;\n                        setTimeout(function() {\n                            createSession(callbacks);\n                        }, 200);\n                        return;\n                    }\n                    callbacks.error(\"Error connecting to the Janus WebSockets server: Is the gateway down?\");\n                },\n\n                'open': function() {\n                    // We need to be notified about the success\n                    transactions[transaction] = function(json) {\n                        Janus.debug(json);\n                        if (json[\"janus\"] !== \"success\") {\n                            Janus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n                            callbacks.error(json[\"error\"].reason);\n                            return;\n                        }\n                        wsKeepaliveTimeoutId = setTimeout(keepAlive, 30000);\n                        connected = true;\n                        sessionId = json.data[\"id\"];\n                        Janus.log(\"Created session: \" + sessionId);\n                        Janus.sessions[sessionId] = that;\n                        callbacks.success();\n                    };\n                    ws.send(JSON.stringify(request));\n                },\n\n                'message': function(event) {\n                    handleEvent(JSON.parse(event.data));\n                },\n\n                'close': function() {\n                    if (server === null || !connected) {\n                        return;\n                    }\n                    connected = false;\n                    // FIXME What if this is called when the page is closed?\n                    gatewayCallbacks.error(\"Lost connection to the gateway (is it down?)\");\n                }\n            };\n\n            for(var eventName in wsHandlers) {\n                ws.addEventListener(eventName, wsHandlers[eventName]);\n            }\n\n            return;\n        }\n        Janus.ajax({\n            type: 'POST',\n            url: server,\n            cache: false,\n            contentType: \"application/json\",\n            data: JSON.stringify(request),\n            success: function(json) {\n                Janus.debug(json);\n                if(json[\"janus\"] !== \"success\") {\n                    Janus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n                    callbacks.error(json[\"error\"].reason);\n                    return;\n                }\n                connected = true;\n                sessionId = json.data[\"id\"];\n                Janus.log(\"Created session: \" + sessionId);\n                Janus.sessions[sessionId] = that;\n                eventHandler();\n                callbacks.success();\n            },\n            error: function(XMLHttpRequest, textStatus, errorThrown) {\n                Janus.error(textStatus + \": \" + errorThrown);\t// FIXME\n                if(Array.isArray(servers)) {\n                    serversIndex++;\n                    if(serversIndex == servers.length) {\n                        // We tried all the servers the user gave us and they all failed\n                        callbacks.error(\"Error connecting to any of the provided Janus servers: Is the gateway down?\");\n                        return;\n                    }\n                    // Let's try the next server\n                    server = null;\n                    setTimeout(function() { createSession(callbacks); }, 200);\n                    return;\n                }\n                if(errorThrown === \"\")\n                    callbacks.error(textStatus + \": Is the gateway down?\");\n                else\n                    callbacks.error(textStatus + \": \" + errorThrown);\n            },\n            dataType: \"json\"\n        });\n    }\n\n    // Private method to destroy a session\n    function destroySession(callbacks) {\n        callbacks = callbacks || {};\n        // FIXME This method triggers a success even when we fail\n        callbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n        var asyncRequest = true;\n        if(callbacks.asyncRequest !== undefined && callbacks.asyncRequest !== null)\n            asyncRequest = (callbacks.asyncRequest === true);\n        Janus.log(\"Destroying session \" + sessionId + \" (async=\" + asyncRequest + \")\");\n        if(!connected) {\n            Janus.warn(\"Is the gateway down? (connected=false)\");\n            callbacks.success();\n            return;\n        }\n        if(sessionId === undefined || sessionId === null) {\n            Janus.warn(\"No session to destroy\");\n            callbacks.success();\n            gatewayCallbacks.destroyed();\n            return;\n        }\n        delete Janus.sessions[sessionId];\n        // Destroy all handles first\n        for(var ph in pluginHandles) {\n            var phv = pluginHandles[ph];\n            Janus.log(\"Destroying handle \" + phv.id + \" (\" + phv.plugin + \")\");\n            destroyHandle(phv.id, {asyncRequest: asyncRequest});\n        }\n        // Ok, go on\n        var request = { \"janus\": \"destroy\", \"transaction\": randomString(12) };\n        if(token !== null && token !== undefined)\n            request[\"token\"] = token;\n        if(apisecret !== null && apisecret !== undefined)\n            request[\"apisecret\"] = apisecret;\n        if(websockets) {\n            request[\"session_id\"] = sessionId;\n\n            var unbindWebSocket = function() {\n                for(var eventName in wsHandlers) {\n                    ws.removeEventListener(eventName, wsHandlers[eventName]);\n                }\n                ws.removeEventListener('message', onUnbindMessage);\n                ws.removeEventListener('error', onUnbindError);\n                if(wsKeepaliveTimeoutId) {\n                    clearTimeout(wsKeepaliveTimeoutId);\n                }\n            };\n\n            var onUnbindMessage = function(event){\n                var data = JSON.parse(event.data);\n                if(data.session_id == request.session_id && data.transaction == request.transaction) {\n                    unbindWebSocket();\n                    callbacks.success();\n                    gatewayCallbacks.destroyed();\n                }\n            };\n            var onUnbindError = function(event) {\n                unbindWebSocket();\n                callbacks.error(\"Failed to destroy the gateway: Is the gateway down?\");\n                gatewayCallbacks.destroyed();\n            };\n\n            ws.addEventListener('message', onUnbindMessage);\n            ws.addEventListener('error', onUnbindError);\n\n            ws.send(JSON.stringify(request));\n            return;\n        }\n        Janus.ajax({\n            type: 'POST',\n            url: server + \"/\" + sessionId,\n            async: asyncRequest,\t// Sometimes we need false here, or destroying in onbeforeunload won't work\n            cache: false,\n            contentType: \"application/json\",\n            data: JSON.stringify(request),\n            success: function(json) {\n                Janus.log(\"Destroyed session:\");\n                Janus.debug(json);\n                sessionId = null;\n                connected = false;\n                if(json[\"janus\"] !== \"success\") {\n                    Janus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n                }\n                callbacks.success();\n                gatewayCallbacks.destroyed();\n            },\n            error: function(XMLHttpRequest, textStatus, errorThrown) {\n                Janus.error(textStatus + \": \" + errorThrown);\t// FIXME\n                // Reset everything anyway\n                sessionId = null;\n                connected = false;\n                callbacks.success();\n                gatewayCallbacks.destroyed();\n            },\n            dataType: \"json\"\n        });\n    }\n\n    // Private method to create a plugin handle\n    function createHandle(callbacks) {\n        callbacks = callbacks || {};\n        callbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n        callbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n        callbacks.consentDialog = (typeof callbacks.consentDialog == \"function\") ? callbacks.consentDialog : Janus.noop;\n        callbacks.mediaState = (typeof callbacks.mediaState == \"function\") ? callbacks.mediaState : Janus.noop;\n        callbacks.webrtcState = (typeof callbacks.webrtcState == \"function\") ? callbacks.webrtcState : Janus.noop;\n        callbacks.slowLink = (typeof callbacks.slowLink == \"function\") ? callbacks.slowLink : Janus.noop;\n        callbacks.onmessage = (typeof callbacks.onmessage == \"function\") ? callbacks.onmessage : Janus.noop;\n        callbacks.onlocalstream = (typeof callbacks.onlocalstream == \"function\") ? callbacks.onlocalstream : Janus.noop;\n        callbacks.onremotestream = (typeof callbacks.onremotestream == \"function\") ? callbacks.onremotestream : Janus.noop;\n        callbacks.ondata = (typeof callbacks.ondata == \"function\") ? callbacks.ondata : Janus.noop;\n        callbacks.ondataopen = (typeof callbacks.ondataopen == \"function\") ? callbacks.ondataopen : Janus.noop;\n        callbacks.oncleanup = (typeof callbacks.oncleanup == \"function\") ? callbacks.oncleanup : Janus.noop;\n        callbacks.ondetached = (typeof callbacks.ondetached == \"function\") ? callbacks.ondetached : Janus.noop;\n        if(!connected) {\n            Janus.warn(\"Is the gateway down? (connected=false)\");\n            callbacks.error(\"Is the gateway down? (connected=false)\");\n            return;\n        }\n        var plugin = callbacks.plugin;\n        if(plugin === undefined || plugin === null) {\n            Janus.error(\"Invalid plugin\");\n            callbacks.error(\"Invalid plugin\");\n            return;\n        }\n        var transaction = randomString(12);\n        var request = { \"janus\": \"attach\", \"plugin\": plugin, \"transaction\": transaction };\n        if(token !== null && token !== undefined)\n            request[\"token\"] = token;\n        if(apisecret !== null && apisecret !== undefined)\n            request[\"apisecret\"] = apisecret;\n        if(websockets) {\n            transactions[transaction] = function(json) {\n                Janus.debug(json);\n                if(json[\"janus\"] !== \"success\") {\n                    Janus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n                    callbacks.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\n                    return;\n                }\n                var handleId = json.data[\"id\"];\n                Janus.log(\"Created handle: \" + handleId);\n                var pluginHandle =\n                    {\n                        session : that,\n                        plugin : plugin,\n                        id : handleId,\n                        webrtcStuff : {\n                            started : false,\n                            myStream : null,\n                            streamExternal : false,\n                            remoteStream : null,\n                            mySdp : null,\n                            pc : null,\n                            dataChannel : null,\n                            dtmfSender : null,\n                            trickle : true,\n                            iceDone : false,\n                            sdpSent : false,\n                            volume : {\n                                value : null,\n                                timer : null\n                            },\n                            bitrate : {\n                                value : null,\n                                bsnow : null,\n                                bsbefore : null,\n                                tsnow : null,\n                                tsbefore : null,\n                                timer : null\n                            }\n                        },\n                        getId : function() { return handleId; },\n                        getPlugin : function() { return plugin; },\n                        getVolume : function() { return getVolume(handleId); },\n                        isAudioMuted : function() { return isMuted(handleId, false); },\n                        muteAudio : function() { return mute(handleId, false, true); },\n                        unmuteAudio : function() { return mute(handleId, false, false); },\n                        isVideoMuted : function() { return isMuted(handleId, true); },\n                        muteVideo : function() { return mute(handleId, true, true); },\n                        unmuteVideo : function() { return mute(handleId, true, false); },\n                        getBitrate : function() { return getBitrate(handleId); },\n                        send : function(callbacks) { sendMessage(handleId, callbacks); },\n                        data : function(callbacks) { sendData(handleId, callbacks); },\n                        dtmf : function(callbacks) { sendDtmf(handleId, callbacks); },\n                        consentDialog : callbacks.consentDialog,\n                        mediaState : callbacks.mediaState,\n                        webrtcState : callbacks.webrtcState,\n                        slowLink : callbacks.slowLink,\n                        onmessage : callbacks.onmessage,\n                        createOffer : function(callbacks) { prepareWebrtc(handleId, callbacks); },\n                        createAnswer : function(callbacks) { prepareWebrtc(handleId, callbacks); },\n                        handleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },\n                        onlocalstream : callbacks.onlocalstream,\n                        onremotestream : callbacks.onremotestream,\n                        ondata : callbacks.ondata,\n                        ondataopen : callbacks.ondataopen,\n                        oncleanup : callbacks.oncleanup,\n                        ondetached : callbacks.ondetached,\n                        hangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },\n                        detach : function(callbacks) { destroyHandle(handleId, callbacks); }\n                    }\n                pluginHandles[handleId] = pluginHandle;\n                callbacks.success(pluginHandle);\n            };\n            request[\"session_id\"] = sessionId;\n            ws.send(JSON.stringify(request));\n            return;\n        }\n        Janus.ajax({\n            type: 'POST',\n            url: server + \"/\" + sessionId,\n            cache: false,\n            contentType: \"application/json\",\n            data: JSON.stringify(request),\n            success: function(json) {\n                Janus.debug(json);\n                if(json[\"janus\"] !== \"success\") {\n                    Janus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n                    callbacks.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\n                    return;\n                }\n                var handleId = json.data[\"id\"];\n                Janus.log(\"Created handle: \" + handleId);\n                var pluginHandle =\n                    {\n                        session : that,\n                        plugin : plugin,\n                        id : handleId,\n                        webrtcStuff : {\n                            started : false,\n                            myStream : null,\n                            streamExternal : false,\n                            remoteStream : null,\n                            mySdp : null,\n                            pc : null,\n                            dataChannel : null,\n                            dtmfSender : null,\n                            trickle : true,\n                            iceDone : false,\n                            sdpSent : false,\n                            volume : {\n                                value : null,\n                                timer : null\n                            },\n                            bitrate : {\n                                value : null,\n                                bsnow : null,\n                                bsbefore : null,\n                                tsnow : null,\n                                tsbefore : null,\n                                timer : null\n                            }\n                        },\n                        getId : function() { return handleId; },\n                        getPlugin : function() { return plugin; },\n                        getVolume : function() { return getVolume(handleId); },\n                        isAudioMuted : function() { return isMuted(handleId, false); },\n                        muteAudio : function() { return mute(handleId, false, true); },\n                        unmuteAudio : function() { return mute(handleId, false, false); },\n                        isVideoMuted : function() { return isMuted(handleId, true); },\n                        muteVideo : function() { return mute(handleId, true, true); },\n                        unmuteVideo : function() { return mute(handleId, true, false); },\n                        getBitrate : function() { return getBitrate(handleId); },\n                        send : function(callbacks) { sendMessage(handleId, callbacks); },\n                        data : function(callbacks) { sendData(handleId, callbacks); },\n                        dtmf : function(callbacks) { sendDtmf(handleId, callbacks); },\n                        consentDialog : callbacks.consentDialog,\n                        mediaState : callbacks.mediaState,\n                        webrtcState : callbacks.webrtcState,\n                        slowLink : callbacks.slowLink,\n                        onmessage : callbacks.onmessage,\n                        createOffer : function(callbacks) { prepareWebrtc(handleId, callbacks); },\n                        createAnswer : function(callbacks) { prepareWebrtc(handleId, callbacks); },\n                        handleRemoteJsep : function(callbacks) { prepareWebrtcPeer(handleId, callbacks); },\n                        onlocalstream : callbacks.onlocalstream,\n                        onremotestream : callbacks.onremotestream,\n                        ondata : callbacks.ondata,\n                        ondataopen : callbacks.ondataopen,\n                        oncleanup : callbacks.oncleanup,\n                        ondetached : callbacks.ondetached,\n                        hangup : function(sendRequest) { cleanupWebrtc(handleId, sendRequest === true); },\n                        detach : function(callbacks) { destroyHandle(handleId, callbacks); }\n                    }\n                pluginHandles[handleId] = pluginHandle;\n                callbacks.success(pluginHandle);\n            },\n            error: function(XMLHttpRequest, textStatus, errorThrown) {\n                Janus.error(textStatus + \": \" + errorThrown);\t// FIXME\n            },\n            dataType: \"json\"\n        });\n    }\n\n    // Private method to send a message\n    function sendMessage(handleId, callbacks) {\n        callbacks = callbacks || {};\n        callbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n        callbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n        if(!connected) {\n            Janus.warn(\"Is the gateway down? (connected=false)\");\n            callbacks.error(\"Is the gateway down? (connected=false)\");\n            return;\n        }\n        var message = callbacks.message;\n        var jsep = callbacks.jsep;\n        var transaction = randomString(12);\n        var request = { \"janus\": \"message\", \"body\": message, \"transaction\": transaction };\n        if(token !== null && token !== undefined)\n            request[\"token\"] = token;\n        if(apisecret !== null && apisecret !== undefined)\n            request[\"apisecret\"] = apisecret;\n        if(jsep !== null && jsep !== undefined)\n            request.jsep = jsep;\n        Janus.debug(\"Sending message to plugin (handle=\" + handleId + \"):\");\n        Janus.debug(request);\n        if(websockets) {\n            request[\"session_id\"] = sessionId;\n            request[\"handle_id\"] = handleId;\n            transactions[transaction] = function(json) {\n                Janus.debug(\"Message sent!\");\n                Janus.debug(json);\n                if(json[\"janus\"] === \"success\") {\n                    // We got a success, must have been a synchronous transaction\n                    var plugindata = json[\"plugindata\"];\n                    if(plugindata === undefined || plugindata === null) {\n                        Janus.warn(\"Request succeeded, but missing plugindata...\");\n                        callbacks.success();\n                        return;\n                    }\n                    Janus.log(\"Synchronous transaction successful (\" + plugindata[\"plugin\"] + \")\");\n                    var data = plugindata[\"data\"];\n                    Janus.debug(data);\n                    callbacks.success(data);\n                    return;\n                } else if(json[\"janus\"] !== \"ack\") {\n                    // Not a success and not an ack, must be an error\n                    if(json[\"error\"] !== undefined && json[\"error\"] !== null) {\n                        Janus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n                        callbacks.error(json[\"error\"].code + \" \" + json[\"error\"].reason);\n                    } else {\n                        Janus.error(\"Unknown error\");\t// FIXME\n                        callbacks.error(\"Unknown error\");\n                    }\n                    return;\n                }\n                // If we got here, the plugin decided to handle the request asynchronously\n                callbacks.success();\n            };\n            ws.send(JSON.stringify(request));\n            return;\n        }\n        Janus.ajax({\n            type: 'POST',\n            url: server + \"/\" + sessionId + \"/\" + handleId,\n            cache: false,\n            contentType: \"application/json\",\n            data: JSON.stringify(request),\n            success: function(json) {\n                Janus.debug(\"Message sent!\");\n                Janus.debug(json);\n                if(json[\"janus\"] === \"success\") {\n                    // We got a success, must have been a synchronous transaction\n                    var plugindata = json[\"plugindata\"];\n                    if(plugindata === undefined || plugindata === null) {\n                        Janus.warn(\"Request succeeded, but missing plugindata...\");\n                        callbacks.success();\n                        return;\n                    }\n                    Janus.log(\"Synchronous transaction successful (\" + plugindata[\"plugin\"] + \")\");\n                    var data = plugindata[\"data\"];\n                    Janus.debug(data);\n                    callbacks.success(data);\n                    return;\n                } else if(json[\"janus\"] !== \"ack\") {\n                    // Not a success and not an ack, must be an error\n                    if(json[\"error\"] !== undefined && json[\"error\"] !== null) {\n                        Janus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n                        callbacks.error(json[\"error\"].code + \" \" + json[\"error\"].reason);\n                    } else {\n                        Janus.error(\"Unknown error\");\t// FIXME\n                        callbacks.error(\"Unknown error\");\n                    }\n                    return;\n                }\n                // If we got here, the plugin decided to handle the request asynchronously\n                callbacks.success();\n            },\n            error: function(XMLHttpRequest, textStatus, errorThrown) {\n                Janus.error(textStatus + \": \" + errorThrown);\t// FIXME\n                callbacks.error(textStatus + \": \" + errorThrown);\n            },\n            dataType: \"json\"\n        });\n    }\n\n    // Private method to send a trickle candidate\n    function sendTrickleCandidate(handleId, candidate) {\n        if(!connected) {\n            Janus.warn(\"Is the gateway down? (connected=false)\");\n            return;\n        }\n        var request = { \"janus\": \"trickle\", \"candidate\": candidate, \"transaction\": randomString(12) };\n        if(token !== null && token !== undefined)\n            request[\"token\"] = token;\n        if(apisecret !== null && apisecret !== undefined)\n            request[\"apisecret\"] = apisecret;\n        Janus.vdebug(\"Sending trickle candidate (handle=\" + handleId + \"):\");\n        Janus.vdebug(request);\n        if(websockets) {\n            request[\"session_id\"] = sessionId;\n            request[\"handle_id\"] = handleId;\n            ws.send(JSON.stringify(request));\n            return;\n        }\n        Janus.ajax({\n            type: 'POST',\n            url: server + \"/\" + sessionId + \"/\" + handleId,\n            cache: false,\n            contentType: \"application/json\",\n            data: JSON.stringify(request),\n            success: function(json) {\n                Janus.vdebug(\"Candidate sent!\");\n                Janus.vdebug(json);\n                if(json[\"janus\"] !== \"ack\") {\n                    Janus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n                    return;\n                }\n            },\n            error: function(XMLHttpRequest, textStatus, errorThrown) {\n                Janus.error(textStatus + \": \" + errorThrown);\t// FIXME\n            },\n            dataType: \"json\"\n        });\n    }\n\n    // Private method to send a data channel message\n    function sendData(handleId, callbacks) {\n        callbacks = callbacks || {};\n        callbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n        callbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle\");\n            callbacks.error(\"Invalid handle\");\n            return;\n        }\n        var config = pluginHandle.webrtcStuff;\n        var text = callbacks.text;\n        if(text === null || text === undefined) {\n            Janus.warn(\"Invalid text\");\n            callbacks.error(\"Invalid text\");\n            return;\n        }\n        Janus.log(\"Sending string on data channel: \" + text);\n        config.dataChannel.send(text);\n        callbacks.success();\n    }\n\n    // Private method to send a DTMF tone\n    function sendDtmf(handleId, callbacks) {\n        callbacks = callbacks || {};\n        callbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n        callbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle\");\n            callbacks.error(\"Invalid handle\");\n            return;\n        }\n        var config = pluginHandle.webrtcStuff;\n        if(config.dtmfSender === null || config.dtmfSender === undefined) {\n            // Create the DTMF sender, if possible\n            if(config.myStream !== undefined && config.myStream !== null) {\n                var tracks = config.myStream.getAudioTracks();\n                if(tracks !== null && tracks !== undefined && tracks.length > 0) {\n                    var local_audio_track = tracks[0];\n                    config.dtmfSender = config.pc.createDTMFSender(local_audio_track);\n                    Janus.log(\"Created DTMF Sender\");\n                    config.dtmfSender.ontonechange = function(tone) { Janus.debug(\"Sent DTMF tone: \" + tone.tone); };\n                }\n            }\n            if(config.dtmfSender === null || config.dtmfSender === undefined) {\n                Janus.warn(\"Invalid DTMF configuration\");\n                callbacks.error(\"Invalid DTMF configuration\");\n                return;\n            }\n        }\n        var dtmf = callbacks.dtmf;\n        if(dtmf === null || dtmf === undefined) {\n            Janus.warn(\"Invalid DTMF parameters\");\n            callbacks.error(\"Invalid DTMF parameters\");\n            return;\n        }\n        var tones = dtmf.tones;\n        if(tones === null || tones === undefined) {\n            Janus.warn(\"Invalid DTMF string\");\n            callbacks.error(\"Invalid DTMF string\");\n            return;\n        }\n        var duration = dtmf.duration;\n        if(duration === null || duration === undefined)\n            duration = 500;\t// We choose 500ms as the default duration for a tone\n        var gap = dtmf.gap;\n        if(gap === null || gap === undefined)\n            gap = 50;\t// We choose 50ms as the default gap between tones\n        Janus.debug(\"Sending DTMF string \" + tones + \" (duration \" + duration + \"ms, gap \" + gap + \"ms)\");\n        config.dtmfSender.insertDTMF(tones, duration, gap);\n    }\n\n    // Private method to destroy a plugin handle\n    function destroyHandle(handleId, callbacks) {\n        callbacks = callbacks || {};\n        callbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n        callbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n        var asyncRequest = true;\n        if(callbacks.asyncRequest !== undefined && callbacks.asyncRequest !== null)\n            asyncRequest = (callbacks.asyncRequest === true);\n        Janus.log(\"Destroying handle \" + handleId + \" (sync=\" + asyncRequest + \")\");\n        cleanupWebrtc(handleId);\n        if(!connected) {\n            Janus.warn(\"Is the gateway down? (connected=false)\");\n            callbacks.error(\"Is the gateway down? (connected=false)\");\n            return;\n        }\n        var request = { \"janus\": \"detach\", \"transaction\": randomString(12) };\n        if(token !== null && token !== undefined)\n            request[\"token\"] = token;\n        if(apisecret !== null && apisecret !== undefined)\n            request[\"apisecret\"] = apisecret;\n        if(websockets) {\n            request[\"session_id\"] = sessionId;\n            request[\"handle_id\"] = handleId;\n            ws.send(JSON.stringify(request));\n            delete pluginHandles[handleId];\n            callbacks.success();\n            return;\n        }\n        Janus.ajax({\n            type: 'POST',\n            url: server + \"/\" + sessionId + \"/\" + handleId,\n            async: asyncRequest,\t// Sometimes we need false here, or destroying in onbeforeunload won't work\n            cache: false,\n            contentType: \"application/json\",\n            data: JSON.stringify(request),\n            success: function(json) {\n                Janus.log(\"Destroyed handle:\");\n                Janus.debug(json);\n                if(json[\"janus\"] !== \"success\") {\n                    Janus.error(\"Ooops: \" + json[\"error\"].code + \" \" + json[\"error\"].reason);\t// FIXME\n                }\n                delete pluginHandles[handleId];\n                callbacks.success();\n            },\n            error: function(XMLHttpRequest, textStatus, errorThrown) {\n                Janus.error(textStatus + \": \" + errorThrown);\t// FIXME\n                // We cleanup anyway\n                delete pluginHandles[handleId];\n                callbacks.success();\n            },\n            dataType: \"json\"\n        });\n    }\n\n    // WebRTC stuff\n    function streamsDone(handleId, jsep, media, callbacks, stream) {\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle\");\n            callbacks.error(\"Invalid handle\");\n            return;\n        }\n        var config = pluginHandle.webrtcStuff;\n        Janus.debug(\"streamsDone:\", stream);\n        config.myStream = stream;\n        var pc_config = {\"iceServers\": iceServers, \"iceTransportPolicy\": iceTransportPolicy};\n        //~ var pc_constraints = {'mandatory': {'MozDontOfferDataChannel':true}};\n        var pc_constraints = {\n            \"optional\": [{\"DtlsSrtpKeyAgreement\": true}]\n        };\n        if(ipv6Support === true) {\n            // FIXME This is only supported in Chrome right now\n            // For support in Firefox track this: https://bugzilla.mozilla.org/show_bug.cgi?id=797262\n            pc_constraints.optional.push({\"googIPv6\":true});\n        }\n        if(adapter.browserDetails.browser === \"edge\") {\n            // This is Edge, enable BUNDLE explicitly\n            pc_config.bundlePolicy = \"max-bundle\";\n        }\n        Janus.log(\"Creating PeerConnection\");\n        Janus.debug(pc_constraints);\n        config.pc = new RTCPeerConnection(pc_config, pc_constraints);\n        Janus.debug(config.pc);\n        if(config.pc.getStats) {\t// FIXME\n            config.volume.value = 0;\n            config.bitrate.value = \"0 kbits/sec\";\n        }\n        Janus.log(\"Preparing local SDP and gathering candidates (trickle=\" + config.trickle + \")\");\n        config.pc.onicecandidate = function(event) {\n            if (event.candidate == null ||\n                (adapter.browserDetails.browser === 'edge' && event.candidate.candidate.indexOf('endOfCandidates') > 0)) {\n                Janus.log(\"End of candidates.\");\n                config.iceDone = true;\n                if(config.trickle === true) {\n                    // Notify end of candidates\n                    sendTrickleCandidate(handleId, {\"completed\": true});\n                } else {\n                    // No trickle, time to send the complete SDP (including all candidates)\n                    sendSDP(handleId, callbacks);\n                }\n            } else {\n                // JSON.stringify doesn't work on some WebRTC objects anymore\n                // See https://code.google.com/p/chromium/issues/detail?id=467366\n                var candidate = {\n                    \"candidate\": event.candidate.candidate,\n                    \"sdpMid\": event.candidate.sdpMid,\n                    \"sdpMLineIndex\": event.candidate.sdpMLineIndex\n                };\n                if(config.trickle === true) {\n                    // Send candidate\n                    sendTrickleCandidate(handleId, candidate);\n                }\n            }\n        };\n        if(stream !== null && stream !== undefined) {\n            Janus.log('Adding local stream');\n            config.pc.addStream(stream);\n            pluginHandle.onlocalstream(stream);\n        }\n        config.pc.onaddstream = function(remoteStream) {\n            Janus.log(\"Handling Remote Stream\");\n            Janus.debug(remoteStream);\n            config.remoteStream = remoteStream;\n            pluginHandle.onremotestream(remoteStream.stream);\n        };\n        // Any data channel to create?\n        if(isDataEnabled(media)) {\n            Janus.log(\"Creating data channel\");\n            var onDataChannelMessage = function(event) {\n                Janus.log('Received message on data channel: ' + event.data);\n                pluginHandle.ondata(event.data);\t// FIXME\n            }\n            var onDataChannelStateChange = function() {\n                var dcState = config.dataChannel !== null ? config.dataChannel.readyState : \"null\";\n                Janus.log('State change on data channel: ' + dcState);\n                if(dcState === 'open') {\n                    pluginHandle.ondataopen();\t// FIXME\n                }\n            }\n            var onDataChannelError = function(error) {\n                Janus.error('Got error on data channel:', error);\n                // TODO\n            }\n            // Until we implement the proxying of open requests within the Janus core, we open a channel ourselves whatever the case\n            config.dataChannel = config.pc.createDataChannel(\"JanusDataChannel\", {ordered:false});\t// FIXME Add options (ordered, maxRetransmits, etc.)\n            config.dataChannel.onmessage = onDataChannelMessage;\n            config.dataChannel.onopen = onDataChannelStateChange;\n            config.dataChannel.onclose = onDataChannelStateChange;\n            config.dataChannel.onerror = onDataChannelError;\n        }\n        // Create offer/answer now\n        if(jsep === null || jsep === undefined) {\n            createOffer(handleId, media, callbacks);\n        } else {\n            if(adapter.browserDetails.browser === \"edge\") {\n                // This is Edge, add an a=end-of-candidates at the end\n                jsep.sdp += \"a=end-of-candidates\\r\\n\";\n            }\n            config.pc.setRemoteDescription(\n                new RTCSessionDescription(jsep),\n                function() {\n                    Janus.log(\"Remote description accepted!\");\n                    createAnswer(handleId, media, callbacks);\n                }, callbacks.error);\n        }\n    }\n\n    function prepareWebrtc(handleId, callbacks) {\n        callbacks = callbacks || {};\n        callbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n        callbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : webrtcError;\n        var jsep = callbacks.jsep;\n        var media = callbacks.media;\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle\");\n            callbacks.error(\"Invalid handle\");\n            return;\n        }\n        var config = pluginHandle.webrtcStuff;\n        // Are we updating a session?\n        if(config.pc !== undefined && config.pc !== null) {\n            Janus.log(\"Updating existing media session\");\n            // Create offer/answer now\n            if(jsep === null || jsep === undefined) {\n                createOffer(handleId, media, callbacks);\n            } else {\n                if(adapter.browserDetails.browser === \"edge\") {\n                    // This is Edge, add an a=end-of-candidates at the end\n                    jsep.sdp += \"a=end-of-candidates\\r\\n\";\n                }\n                config.pc.setRemoteDescription(\n                    new RTCSessionDescription(jsep),\n                    function() {\n                        Janus.log(\"Remote description accepted!\");\n                        createAnswer(handleId, media, callbacks);\n                    }, callbacks.error);\n            }\n            return;\n        }\n        // Was a MediaStream object passed, or do we need to take care of that?\n        if(callbacks.stream !== null && callbacks.stream !== undefined) {\n            var stream = callbacks.stream;\n            Janus.log(\"MediaStream provided by the application\");\n            Janus.debug(stream);\n            // Skip the getUserMedia part\n            config.streamExternal = true;\n            streamsDone(handleId, jsep, media, callbacks, stream);\n            return;\n        }\n        config.trickle = isTrickleEnabled(callbacks.trickle);\n        if(isAudioSendEnabled(media) || isVideoSendEnabled(media)) {\n            var constraints = { mandatory: {}, optional: []};\n            pluginHandle.consentDialog(true);\n            var audioSupport = isAudioSendEnabled(media);\n            if(audioSupport === true && media != undefined && media != null) {\n                if(typeof media.audio === 'object') {\n                    audioSupport = media.audio;\n                }\n            }\n            var videoSupport = isVideoSendEnabled(media);\n            if(videoSupport === true && media != undefined && media != null) {\n                if(media.video && media.video != 'screen' && media.video != 'window') {\n                    var width = 0;\n                    var height = 0, maxHeight = 0;\n                    if(media.video === 'lowres') {\n                        // Small resolution, 4:3\n                        height = 240;\n                        maxHeight = 240;\n                        width = 320;\n                    } else if(media.video === 'lowres-16:9') {\n                        // Small resolution, 16:9\n                        height = 180;\n                        maxHeight = 180;\n                        width = 320;\n                    } else if(media.video === 'hires' || media.video === 'hires-16:9' ) {\n                        // High resolution is only 16:9\n                        height = 720;\n                        maxHeight = 720;\n                        width = 1280;\n                        if(navigator.mozGetUserMedia) {\n                            var firefoxVer = parseInt(window.navigator.userAgent.match(/Firefox\\/(.*)/)[1], 10);\n                            if(firefoxVer < 38) {\n                                // Unless this is and old Firefox, which doesn't support it\n                                Janus.warn(media.video + \" unsupported, falling back to stdres (old Firefox)\");\n                                height = 480;\n                                maxHeight = 480;\n                                width  = 640;\n                            }\n                        }\n                    } else if(media.video === 'stdres') {\n                        // Normal resolution, 4:3\n                        height = 480;\n                        maxHeight = 480;\n                        width  = 640;\n                    } else if(media.video === 'stdres-16:9') {\n                        // Normal resolution, 16:9\n                        height = 360;\n                        maxHeight = 360;\n                        width = 640;\n                    } else {\n                        Janus.log(\"Default video setting (\" + media.video + \") is stdres 4:3\");\n                        height = 480;\n                        maxHeight = 480;\n                        width = 640;\n                    }\n                    Janus.log(\"Adding media constraint \" + media.video);\n                    if(navigator.mozGetUserMedia) {\n                        var firefoxVer = parseInt(window.navigator.userAgent.match(/Firefox\\/(.*)/)[1], 10);\n                        if(firefoxVer < 38) {\n                            videoSupport = {\n                                'require': ['height', 'width'],\n                                'height': {'max': maxHeight, 'min': height},\n                                'width':  {'max': width,  'min': width}\n                            };\n                        } else {\n                            // http://stackoverflow.com/questions/28282385/webrtc-firefox-constraints/28911694#28911694\n                            // https://github.com/meetecho/janus-gateway/pull/246\n                            videoSupport = {\n                                'height': {'ideal': height},\n                                'width':  {'ideal': width}\n                            };\n                        }\n                    } else {\n                        videoSupport = {\n                            'mandatory': {\n                                'maxHeight': maxHeight,\n                                'minHeight': height,\n                                'maxWidth':  width,\n                                'minWidth':  width\n                            },\n                            'optional': []\n                        };\n                    }\n                    if(typeof media.video === 'object') {\n                        videoSupport = media.video;\n                    }\n                    Janus.debug(videoSupport);\n                } else if(media.video === 'screen' || media.video === 'window') {\n                    // Not a webcam, but screen capture\n                    if(window.location.protocol !== 'https:') {\n                        // Screen sharing mandates HTTPS\n                        Janus.warn(\"Screen sharing only works on HTTPS, try the https:// version of this page\");\n                        pluginHandle.consentDialog(false);\n                        callbacks.error(\"Screen sharing only works on HTTPS, try the https:// version of this page\");\n                        return;\n                    }\n                    // We're going to try and use the extension for Chrome 34+, the old approach\n                    // for older versions of Chrome, or the experimental support in Firefox 33+\n                    var cache = {};\n                    function callbackUserMedia (error, stream) {\n                        pluginHandle.consentDialog(false);\n                        if(error) {\n                            callbacks.error({code: error.code, name: error.name, message: error.message});\n                        } else {\n                            streamsDone(handleId, jsep, media, callbacks, stream);\n                        }\n                    };\n                    function getScreenMedia(constraints, gsmCallback) {\n                        Janus.log(\"Adding media constraint (screen capture)\");\n                        Janus.debug(constraints);\n                        navigator.mediaDevices.getUserMedia(constraints)\n                            .then(function(stream) { gsmCallback(null, stream); })\n                            .catch(function(error) { pluginHandle.consentDialog(false); gsmCallback(error); });\n                    };\n                    if(adapter.browserDetails.browser === 'chrome') {\n                        var chromever = adapter.browserDetails.version;\n                        var maxver = 33;\n                        if(window.navigator.userAgent.match('Linux'))\n                            maxver = 35;\t// \"known\" crash in chrome 34 and 35 on linux\n                        if(chromever >= 26 && chromever <= maxver) {\n                            // Chrome 26->33 requires some awkward chrome://flags manipulation\n                            constraints = {\n                                video: {\n                                    mandatory: {\n                                        googLeakyBucket: true,\n                                        maxWidth: window.screen.width,\n                                        maxHeight: window.screen.height,\n                                        maxFrameRate: 3,\n                                        chromeMediaSource: 'screen'\n                                    }\n                                },\n                                audio: isAudioSendEnabled(media)\n                            };\n                            getScreenMedia(constraints, callbackUserMedia);\n                        } else {\n                            // Chrome 34+ requires an extension\n                            var pending = window.setTimeout(\n                                function () {\n                                    error = new Error('NavigatorUserMediaError');\n                                    error.name = 'The required Chrome extension is not installed: click <a href=\"#\">here</a> to install it. (NOTE: this will need you to refresh the page)';\n                                    pluginHandle.consentDialog(false);\n                                    return callbacks.error(error);\n                                }, 1000);\n                            cache[pending] = [callbackUserMedia, null];\n                            window.postMessage({ type: 'janusGetScreen', id: pending }, '*');\n                        }\n                    } else if (window.navigator.userAgent.match('Firefox')) {\n                        var ffver = parseInt(window.navigator.userAgent.match(/Firefox\\/(.*)/)[1], 10);\n                        if(ffver >= 33) {\n                            // Firefox 33+ has experimental support for screen sharing\n                            constraints = {\n                                video: {\n                                    mozMediaSource: media.video,\n                                    mediaSource: media.video\n                                },\n                                audio: isAudioSendEnabled(media)\n                            };\n                            getScreenMedia(constraints, function (err, stream) {\n                                callbackUserMedia(err, stream);\n                                // Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1045810\n                                if (!err) {\n                                    var lastTime = stream.currentTime;\n                                    var polly = window.setInterval(function () {\n                                        if(!stream)\n                                            window.clearInterval(polly);\n                                        if(stream.currentTime == lastTime) {\n                                            window.clearInterval(polly);\n                                            if(stream.onended) {\n                                                stream.onended();\n                                            }\n                                        }\n                                        lastTime = stream.currentTime;\n                                    }, 500);\n                                }\n                            });\n                        } else {\n                            var error = new Error('NavigatorUserMediaError');\n                            error.name = 'Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)';\n                            pluginHandle.consentDialog(false);\n                            callbacks.error(error);\n                            return;\n                        }\n                    }\n\n                    // Wait for events from the Chrome Extension\n                    window.addEventListener('message', function (event) {\n                        if(event.origin != window.location.origin)\n                            return;\n                        if(event.data.type == 'janusGotScreen' && cache[event.data.id]) {\n                            var data = cache[event.data.id];\n                            var callback = data[0];\n                            delete cache[event.data.id];\n\n                            if (event.data.sourceId === '') {\n                                // user canceled\n                                var error = new Error('NavigatorUserMediaError');\n                                error.name = 'You cancelled the request for permission, giving up...';\n                                pluginHandle.consentDialog(false);\n                                callbacks.error(error);\n                            } else {\n                                constraints = {\n                                    audio: isAudioSendEnabled(media),\n                                    video: {\n                                        mandatory: {\n                                            chromeMediaSource: 'desktop',\n                                            maxWidth: window.screen.width,\n                                            maxHeight: window.screen.height,\n                                            maxFrameRate: 3\n                                        },\n                                        optional: [\n                                            {googLeakyBucket: true},\n                                            {googTemporalLayeredScreencast: true}\n                                        ]\n                                    }\n                                };\n                                constraints.video.mandatory.chromeMediaSourceId = event.data.sourceId;\n                                getScreenMedia(constraints, callback);\n                            }\n                        } else if (event.data.type == 'janusGetScreenPending') {\n                            window.clearTimeout(event.data.id);\n                        }\n                    });\n                    return;\n                }\n            }\n            // If we got here, we're not screensharing\n            if(media === null || media === undefined || media.video !== 'screen') {\n                // Check whether all media sources are actually available or not\n                navigator.mediaDevices.enumerateDevices().then(function(devices) {\n                    var audioExist = devices.some(function(device) {\n                            return device.kind === 'audioinput';\n                        }),\n                        videoExist = devices.some(function(device) {\n                            return device.kind === 'videoinput';\n                        });\n\n                    // Check whether a missing device is really a problem\n                    var audioSend = isAudioSendEnabled(media);\n                    var videoSend = isVideoSendEnabled(media);\n                    var needAudioDevice = isAudioSendRequired(media);\n                    var needVideoDevice = isVideoSendRequired(media);\n                    if(audioSend || videoSend || needAudioDevice || needVideoDevice) {\n                        // We need to send either audio or video\n                        var haveAudioDevice = audioSend ? audioExist : false;\n                        var haveVideoDevice = videoSend ? videoExist : false;\n                        if(!haveAudioDevice && !haveVideoDevice) {\n                            // FIXME Should we really give up, or just assume recvonly for both?\n                            pluginHandle.consentDialog(false);\n                            callbacks.error('No capture device found');\n                            return false;\n                        } else if(!haveAudioDevice && needAudioDevice) {\n                            pluginHandle.consentDialog(false);\n                            callbacks.error('Audio capture is required, but no capture device found');\n                            return false;\n                        } else if(!haveVideoDevice && needVideoDevice) {\n                            pluginHandle.consentDialog(false);\n                            callbacks.error('Video capture is required, but no capture device found');\n                            return false;\n                        }\n                    }\n\n                    navigator.mediaDevices.getUserMedia({\n                        audio: audioExist ? audioSupport : false,\n                        video: videoExist ? videoSupport : false\n                    })\n                        .then(function(stream) { pluginHandle.consentDialog(false); streamsDone(handleId, jsep, media, callbacks, stream); })\n                        .catch(function(error) { pluginHandle.consentDialog(false); callbacks.error({code: error.code, name: error.name, message: error.message}); });\n                })\n                    .catch(function(error) {\n                        pluginHandle.consentDialog(false);\n                        callbacks.error('enumerateDevices error', error);\n                    });\n            }\n        } else {\n            // No need to do a getUserMedia, create offer/answer right away\n            streamsDone(handleId, jsep, media, callbacks);\n        }\n    }\n\n    function prepareWebrtcPeer(handleId, callbacks) {\n        callbacks = callbacks || {};\n        callbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n        callbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : webrtcError;\n        var jsep = callbacks.jsep;\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle\");\n            callbacks.error(\"Invalid handle\");\n            return;\n        }\n        var config = pluginHandle.webrtcStuff;\n        if(jsep !== undefined && jsep !== null) {\n            if(config.pc === null) {\n                Janus.warn(\"Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep\");\n                callbacks.error(\"No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep\");\n                return;\n            }\n            if(adapter.browserDetails.browser === \"edge\") {\n                // This is Edge, add an a=end-of-candidates at the end\n                jsep.sdp += \"a=end-of-candidates\\r\\n\";\n            }\n            config.pc.setRemoteDescription(\n                new RTCSessionDescription(jsep),\n                function() {\n                    Janus.log(\"Remote description accepted!\");\n                    callbacks.success();\n                }, callbacks.error);\n        } else {\n            callbacks.error(\"Invalid JSEP\");\n        }\n    }\n\n    function createOffer(handleId, media, callbacks) {\n        callbacks = callbacks || {};\n        callbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n        callbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle\");\n            callbacks.error(\"Invalid handle\");\n            return;\n        }\n        var config = pluginHandle.webrtcStuff;\n        Janus.log(\"Creating offer (iceDone=\" + config.iceDone + \")\");\n        // https://code.google.com/p/webrtc/issues/detail?id=3508\n        var mediaConstraints = null;\n        if(adapter.browserDetails.browser == \"firefox\" || adapter.browserDetails.browser == \"edge\") {\n            mediaConstraints = {\n                'offerToReceiveAudio':isAudioRecvEnabled(media),\n                'offerToReceiveVideo':isVideoRecvEnabled(media)\n            };\n        } else {\n            mediaConstraints = {\n                'mandatory': {\n                    'OfferToReceiveAudio':isAudioRecvEnabled(media),\n                    'OfferToReceiveVideo':isVideoRecvEnabled(media)\n                }\n            };\n        }\n        Janus.debug(mediaConstraints);\n        config.pc.createOffer(\n            function(offer) {\n                Janus.debug(offer);\n                if(config.mySdp === null || config.mySdp === undefined) {\n                    Janus.log(\"Setting local description\");\n                    config.mySdp = offer.sdp;\n                    config.pc.setLocalDescription(offer);\n                }\n                if(!config.iceDone && !config.trickle) {\n                    // Don't do anything until we have all candidates\n                    Janus.log(\"Waiting for all candidates...\");\n                    return;\n                }\n                if(config.sdpSent) {\n                    Janus.log(\"Offer already sent, not sending it again\");\n                    return;\n                }\n                Janus.log(\"Offer ready\");\n                Janus.debug(callbacks);\n                config.sdpSent = true;\n                // JSON.stringify doesn't work on some WebRTC objects anymore\n                // See https://code.google.com/p/chromium/issues/detail?id=467366\n                var jsep = {\n                    \"type\": offer.type,\n                    \"sdp\": offer.sdp\n                };\n                callbacks.success(jsep);\n            }, callbacks.error, mediaConstraints);\n    }\n\n    function createAnswer(handleId, media, callbacks) {\n        callbacks = callbacks || {};\n        callbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n        callbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle\");\n            callbacks.error(\"Invalid handle\");\n            return;\n        }\n        var config = pluginHandle.webrtcStuff;\n        Janus.log(\"Creating answer (iceDone=\" + config.iceDone + \")\");\n        var mediaConstraints = null;\n        if(adapter.browserDetails.browser == \"firefox\" || adapter.browserDetails.browser == \"edge\") {\n            mediaConstraints = {\n                'offerToReceiveAudio':isAudioRecvEnabled(media),\n                'offerToReceiveVideo':isVideoRecvEnabled(media)\n            };\n        } else {\n            mediaConstraints = {\n                'mandatory': {\n                    'OfferToReceiveAudio':isAudioRecvEnabled(media),\n                    'OfferToReceiveVideo':isVideoRecvEnabled(media)\n                }\n            };\n        }\n        Janus.debug(mediaConstraints);\n        config.pc.createAnswer(\n            function(answer) {\n                Janus.debug(answer);\n                if(config.mySdp === null || config.mySdp === undefined) {\n                    Janus.log(\"Setting local description\");\n                    config.mySdp = answer.sdp;\n                    config.pc.setLocalDescription(answer);\n                }\n                if(!config.iceDone && !config.trickle) {\n                    // Don't do anything until we have all candidates\n                    Janus.log(\"Waiting for all candidates...\");\n                    return;\n                }\n                if(config.sdpSent) {\t// FIXME badly\n                    Janus.log(\"Answer already sent, not sending it again\");\n                    return;\n                }\n                config.sdpSent = true;\n                // JSON.stringify doesn't work on some WebRTC objects anymore\n                // See https://code.google.com/p/chromium/issues/detail?id=467366\n                var jsep = {\n                    \"type\": answer.type,\n                    \"sdp\": answer.sdp\n                };\n                callbacks.success(jsep);\n            }, callbacks.error, mediaConstraints);\n    }\n\n    function sendSDP(handleId, callbacks) {\n        callbacks = callbacks || {};\n        callbacks.success = (typeof callbacks.success == \"function\") ? callbacks.success : Janus.noop;\n        callbacks.error = (typeof callbacks.error == \"function\") ? callbacks.error : Janus.noop;\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle, not sending anything\");\n            return;\n        }\n        var config = pluginHandle.webrtcStuff;\n        Janus.log(\"Sending offer/answer SDP...\");\n        if(config.mySdp === null || config.mySdp === undefined) {\n            Janus.warn(\"Local SDP instance is invalid, not sending anything...\");\n            return;\n        }\n        config.mySdp = {\n            \"type\": config.pc.localDescription.type,\n            \"sdp\": config.pc.localDescription.sdp\n        };\n        if(config.sdpSent) {\n            Janus.log(\"Offer/Answer SDP already sent, not sending it again\");\n            return;\n        }\n        if(config.trickle === false)\n            config.mySdp[\"trickle\"] = false;\n        Janus.debug(callbacks);\n        config.sdpSent = true;\n        callbacks.success(config.mySdp);\n    }\n\n    function getVolume(handleId) {\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle\");\n            return 0;\n        }\n        var config = pluginHandle.webrtcStuff;\n        // Start getting the volume, if getStats is supported\n        if(config.pc.getStats && adapter.browserDetails.browser == \"chrome\") {\t// FIXME\n            if(config.remoteStream === null || config.remoteStream === undefined) {\n                Janus.warn(\"Remote stream unavailable\");\n                return 0;\n            }\n            // http://webrtc.googlecode.com/svn/trunk/samples/js/demos/html/constraints-and-stats.html\n            if(config.volume.timer === null || config.volume.timer === undefined) {\n                Janus.log(\"Starting volume monitor\");\n                config.volume.timer = setInterval(function() {\n                    config.pc.getStats(function(stats) {\n                        var results = stats.result();\n                        for(var i=0; i<results.length; i++) {\n                            var res = results[i];\n                            if(res.type == 'ssrc' && res.stat('audioOutputLevel')) {\n                                config.volume.value = res.stat('audioOutputLevel');\n                            }\n                        }\n                    });\n                }, 200);\n                return 0;\t// We don't have a volume to return yet\n            }\n            return config.volume.value;\n        } else {\n            Janus.log(\"Getting the remote volume unsupported by browser\");\n            return 0;\n        }\n    }\n\n    function isMuted(handleId, video) {\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle\");\n            return true;\n        }\n        var config = pluginHandle.webrtcStuff;\n        if(config.pc === null || config.pc === undefined) {\n            Janus.warn(\"Invalid PeerConnection\");\n            return true;\n        }\n        if(config.myStream === undefined || config.myStream === null) {\n            Janus.warn(\"Invalid local MediaStream\");\n            return true;\n        }\n        if(video) {\n            // Check video track\n            if(config.myStream.getVideoTracks() === null\n                || config.myStream.getVideoTracks() === undefined\n                || config.myStream.getVideoTracks().length === 0) {\n                Janus.warn(\"No video track\");\n                return true;\n            }\n            return !config.myStream.getVideoTracks()[0].enabled;\n        } else {\n            // Check audio track\n            if(config.myStream.getAudioTracks() === null\n                || config.myStream.getAudioTracks() === undefined\n                || config.myStream.getAudioTracks().length === 0) {\n                Janus.warn(\"No audio track\");\n                return true;\n            }\n            return !config.myStream.getAudioTracks()[0].enabled;\n        }\n    }\n\n    function mute(handleId, video, mute) {\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle\");\n            return false;\n        }\n        var config = pluginHandle.webrtcStuff;\n        if(config.pc === null || config.pc === undefined) {\n            Janus.warn(\"Invalid PeerConnection\");\n            return false;\n        }\n        if(config.myStream === undefined || config.myStream === null) {\n            Janus.warn(\"Invalid local MediaStream\");\n            return false;\n        }\n        if(video) {\n            // Mute/unmute video track\n            if(config.myStream.getVideoTracks() === null\n                || config.myStream.getVideoTracks() === undefined\n                || config.myStream.getVideoTracks().length === 0) {\n                Janus.warn(\"No video track\");\n                return false;\n            }\n            config.myStream.getVideoTracks()[0].enabled = mute;\n            return true;\n        } else {\n            // Mute/unmute audio track\n            if(config.myStream.getAudioTracks() === null\n                || config.myStream.getAudioTracks() === undefined\n                || config.myStream.getAudioTracks().length === 0) {\n                Janus.warn(\"No audio track\");\n                return false;\n            }\n            config.myStream.getAudioTracks()[0].enabled = mute;\n            return true;\n        }\n    }\n\n    function getBitrate(handleId) {\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined ||\n            pluginHandle.webrtcStuff === null || pluginHandle.webrtcStuff === undefined) {\n            Janus.warn(\"Invalid handle\");\n            return \"Invalid handle\";\n        }\n        var config = pluginHandle.webrtcStuff;\n        if(config.pc === null || config.pc === undefined)\n            return \"Invalid PeerConnection\";\n        // Start getting the bitrate, if getStats is supported\n        if(config.pc.getStats && adapter.browserDetails.browser == \"chrome\") {\n            // Do it the Chrome way\n            if(config.remoteStream === null || config.remoteStream === undefined) {\n                Janus.warn(\"Remote stream unavailable\");\n                return \"Remote stream unavailable\";\n            }\n            // http://webrtc.googlecode.com/svn/trunk/samples/js/demos/html/constraints-and-stats.html\n            if(config.bitrate.timer === null || config.bitrate.timer === undefined) {\n                Janus.log(\"Starting bitrate timer (Chrome)\");\n                config.bitrate.timer = setInterval(function() {\n                    config.pc.getStats(function(stats) {\n                        var results = stats.result();\n                        for(var i=0; i<results.length; i++) {\n                            var res = results[i];\n                            if(res.type == 'ssrc' && res.stat('googFrameHeightReceived')) {\n                                config.bitrate.bsnow = res.stat('bytesReceived');\n                                config.bitrate.tsnow = res.timestamp;\n                                if(config.bitrate.bsbefore === null || config.bitrate.tsbefore === null) {\n                                    // Skip this round\n                                    config.bitrate.bsbefore = config.bitrate.bsnow;\n                                    config.bitrate.tsbefore = config.bitrate.tsnow;\n                                } else {\n                                    // Calculate bitrate\n                                    var bitRate = Math.round((config.bitrate.bsnow - config.bitrate.bsbefore) * 8 / (config.bitrate.tsnow - config.bitrate.tsbefore));\n                                    config.bitrate.value = bitRate + ' kbits/sec';\n                                    //~ Janus.log(\"Estimated bitrate is \" + config.bitrate.value);\n                                    config.bitrate.bsbefore = config.bitrate.bsnow;\n                                    config.bitrate.tsbefore = config.bitrate.tsnow;\n                                }\n                            }\n                        }\n                    });\n                }, 1000);\n                return \"0 kbits/sec\";\t// We don't have a bitrate value yet\n            }\n            return config.bitrate.value;\n        } else if(config.pc.getStats && adapter.browserDetails.browser == \"firefox\") {\n            // Do it the Firefox way\n            if(config.remoteStream === null || config.remoteStream === undefined\n                || config.remoteStream.stream === null || config.remoteStream.stream === undefined) {\n                Janus.warn(\"Remote stream unavailable\");\n                return \"Remote stream unavailable\";\n            }\n            var videoTracks = config.remoteStream.stream.getVideoTracks();\n            if(videoTracks === null || videoTracks === undefined || videoTracks.length < 1) {\n                Janus.warn(\"No video track\");\n                return \"No video track\";\n            }\n            // https://github.com/muaz-khan/getStats/blob/master/getStats.js\n            if(config.bitrate.timer === null || config.bitrate.timer === undefined) {\n                Janus.log(\"Starting bitrate timer (Firefox)\");\n                config.bitrate.timer = setInterval(function() {\n                    // We need a helper callback\n                    var cb = function(res) {\n                        if(res === null || res === undefined ||\n                            res.inbound_rtp_video_1 == null || res.inbound_rtp_video_1 == null) {\n                            config.bitrate.value = \"Missing inbound_rtp_video_1\";\n                            return;\n                        }\n                        config.bitrate.bsnow = res.inbound_rtp_video_1.bytesReceived;\n                        config.bitrate.tsnow = res.inbound_rtp_video_1.timestamp;\n                        if(config.bitrate.bsbefore === null || config.bitrate.tsbefore === null) {\n                            // Skip this round\n                            config.bitrate.bsbefore = config.bitrate.bsnow;\n                            config.bitrate.tsbefore = config.bitrate.tsnow;\n                        } else {\n                            // Calculate bitrate\n                            var bitRate = Math.round((config.bitrate.bsnow - config.bitrate.bsbefore) * 8 / (config.bitrate.tsnow - config.bitrate.tsbefore));\n                            config.bitrate.value = bitRate + ' kbits/sec';\n                            config.bitrate.bsbefore = config.bitrate.bsnow;\n                            config.bitrate.tsbefore = config.bitrate.tsnow;\n                        }\n                    };\n                    // Actually get the stats\n                    config.pc.getStats(videoTracks[0], function(stats) {\n                        cb(stats);\n                    }, cb);\n                }, 1000);\n                return \"0 kbits/sec\";\t// We don't have a bitrate value yet\n            }\n            return config.bitrate.value;\n        } else {\n            Janus.warn(\"Getting the video bitrate unsupported by browser\");\n            return \"Feature unsupported by browser\";\n        }\n    }\n\n    function webrtcError(error) {\n        Janus.error(\"WebRTC error:\", error);\n    }\n\n    function cleanupWebrtc(handleId, hangupRequest) {\n        Janus.log(\"Cleaning WebRTC stuff\");\n        var pluginHandle = pluginHandles[handleId];\n        if(pluginHandle === null || pluginHandle === undefined) {\n            // Nothing to clean\n            return;\n        }\n        var config = pluginHandle.webrtcStuff;\n        if(config !== null && config !== undefined) {\n            if(hangupRequest === true) {\n                // Send a hangup request (we don't really care about the response)\n                var request = { \"janus\": \"hangup\", \"transaction\": randomString(12) };\n                if(token !== null && token !== undefined)\n                    request[\"token\"] = token;\n                if(apisecret !== null && apisecret !== undefined)\n                    request[\"apisecret\"] = apisecret;\n                Janus.debug(\"Sending hangup request (handle=\" + handleId + \"):\");\n                Janus.debug(request);\n                if(websockets) {\n                    request[\"session_id\"] = sessionId;\n                    request[\"handle_id\"] = handleId;\n                    ws.send(JSON.stringify(request));\n                } else {\n                    $.ajax({\n                        type: 'POST',\n                        url: server + \"/\" + sessionId + \"/\" + handleId,\n                        cache: false,\n                        contentType: \"application/json\",\n                        data: JSON.stringify(request),\n                        dataType: \"json\"\n                    });\n                }\n            }\n            // Cleanup stack\n            config.remoteStream = null;\n            if(config.volume.timer)\n                clearInterval(config.volume.timer);\n            config.volume.value = null;\n            if(config.bitrate.timer)\n                clearInterval(config.bitrate.timer);\n            config.bitrate.timer = null;\n            config.bitrate.bsnow = null;\n            config.bitrate.bsbefore = null;\n            config.bitrate.tsnow = null;\n            config.bitrate.tsbefore = null;\n            config.bitrate.value = null;\n            try {\n                // Try a MediaStream.stop() first\n                if(!config.streamExternal && config.myStream !== null && config.myStream !== undefined) {\n                    Janus.log(\"Stopping local stream\");\n                    config.myStream.stop();\n                }\n            } catch(e) {\n                // Do nothing if this fails\n            }\n            try {\n                // Try a MediaStreamTrack.stop() for each track as well\n                if(!config.streamExternal && config.myStream !== null && config.myStream !== undefined) {\n                    Janus.log(\"Stopping local stream tracks\");\n                    var tracks = config.myStream.getTracks();\n                    for(var i in tracks) {\n                        var mst = tracks[i];\n                        Janus.log(mst);\n                        if(mst !== null && mst !== undefined)\n                            mst.stop();\n                    }\n                }\n            } catch(e) {\n                // Do nothing if this fails\n            }\n            config.streamExternal = false;\n            config.myStream = null;\n            // Close PeerConnection\n            try {\n                config.pc.close();\n            } catch(e) {\n                // Do nothing\n            }\n            config.pc = null;\n            config.mySdp = null;\n            config.iceDone = false;\n            config.sdpSent = false;\n            config.dataChannel = null;\n            config.dtmfSender = null;\n        }\n        pluginHandle.oncleanup();\n    }\n\n    // Helper methods to parse a media object\n    function isAudioSendEnabled(media) {\n        Janus.debug(\"isAudioSendEnabled:\", media);\n        if(media === undefined || media === null)\n            return true;\t// Default\n        if(media.audio === false)\n            return false;\t// Generic audio has precedence\n        if(media.audioSend === undefined || media.audioSend === null)\n            return true;\t// Default\n        return (media.audioSend === true);\n    }\n\n    function isAudioSendRequired(media) {\n        Janus.debug(\"isAudioSendRequired:\", media);\n        if(media === undefined || media === null)\n            return false;\t// Default\n        if(media.audio === false || media.audioSend === false)\n            return false;\t// If we're not asking to capture audio, it's not required\n        if(media.failIfNoAudio === undefined || media.failIfNoAudio === null)\n            return false;\t// Default\n        return (media.failIfNoAudio === true);\n    }\n\n    function isAudioRecvEnabled(media) {\n        Janus.debug(\"isAudioRecvEnabled:\", media);\n        if(media === undefined || media === null)\n            return true;\t// Default\n        if(media.audio === false)\n            return false;\t// Generic audio has precedence\n        if(media.audioRecv === undefined || media.audioRecv === null)\n            return true;\t// Default\n        return (media.audioRecv === true);\n    }\n\n    function isVideoSendEnabled(media) {\n        Janus.debug(\"isVideoSendEnabled:\", media);\n        if(media === undefined || media === null)\n            return true;\t// Default\n        if(media.video === false)\n            return false;\t// Generic video has precedence\n        if(media.videoSend === undefined || media.videoSend === null)\n            return true;\t// Default\n        return (media.videoSend === true);\n    }\n\n    function isVideoSendRequired(media) {\n        Janus.debug(\"isVideoSendRequired:\", media);\n        if(media === undefined || media === null)\n            return false;\t// Default\n        if(media.video === false || media.videoSend === false)\n            return false;\t// If we're not asking to capture video, it's not required\n        if(media.failIfNoVideo === undefined || media.failIfNoVideo === null)\n            return false;\t// Default\n        return (media.failIfNoVideo === true);\n    }\n\n    function isVideoRecvEnabled(media) {\n        Janus.debug(\"isVideoRecvEnabled:\", media);\n        if(media === undefined || media === null)\n            return true;\t// Default\n        if(media.video === false)\n            return false;\t// Generic video has precedence\n        if(media.videoRecv === undefined || media.videoRecv === null)\n            return true;\t// Default\n        return (media.videoRecv === true);\n    }\n\n    function isDataEnabled(media) {\n        Janus.debug(\"isDataEnabled:\", media);\n        if(adapter.browserDetails.browser == \"edge\") {\n            Janus.warn(\"Edge doesn't support data channels yet\");\n            return false;\n        }\n        if(media === undefined || media === null)\n            return false;\t// Default\n        return (media.data === true);\n    }\n\n    function isTrickleEnabled(trickle) {\n        Janus.debug(\"isTrickleEnabled:\", trickle);\n        if(trickle === undefined || trickle === null)\n            return true;\t// Default is true\n        return (trickle === true);\n    }\n};\n\nmodule.exports = Janus;\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1My5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vbl9ucG1fZGVwZW5kZW5jaWVzL2phbnVzL2luZGV4LmpzP2FlYTQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cbi8qXG4gVGhlIE1JVCBMaWNlbnNlIChNSVQpXG5cbiBDb3B5cmlnaHQgKGMpIDIwMTYgTWVldGVjaG9cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZ1xuIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLFxuIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb25cbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSxcbiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGVcbiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbiBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1NcbiBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTFxuIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SXG4gT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsXG4gQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SXG4gT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuICovXG5cbnZhciBhZGFwdGVyID0gcmVxdWlyZSgnd2VicnRjLWFkYXB0ZXInKTtcblxuLy8gTGlzdCBvZiBzZXNzaW9uc1xuSmFudXMuc2Vzc2lvbnMgPSB7fTtcblxuLy8gU2NyZWVuc2hhcmluZyBDaHJvbWUgRXh0ZW5zaW9uIElEXG5KYW51cy5leHRlbnNpb25JZCA9IFwiaGFwZmdmZGtsZWlnZ2pqcGZwZW5hamdkbmZja2pwYWpcIjtcbkphbnVzLmlzRXh0ZW5zaW9uRW5hYmxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKCdDaHJvbWUnKSkge1xuICAgICAgICB2YXIgY2hyb21ldmVyID0gcGFyc2VJbnQod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0Nocm9tZVxcLyguKikgLylbMV0sIDEwKTtcbiAgICAgICAgdmFyIG1heHZlciA9IDMzO1xuICAgICAgICBpZih3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgnTGludXgnKSlcbiAgICAgICAgICAgIG1heHZlciA9IDM1O1x0Ly8gXCJrbm93blwiIGNyYXNoIGluIGNocm9tZSAzNCBhbmQgMzUgb24gbGludXhcbiAgICAgICAgaWYoY2hyb21ldmVyID49IDI2ICYmIGNocm9tZXZlciA8PSBtYXh2ZXIpIHtcbiAgICAgICAgICAgIC8vIE9sZGVyIHZlcnNpb25zIG9mIENocm9tZSBkb24ndCBzdXBwb3J0IHRoaXMgZXh0ZW5zaW9uLWJhc2VkIGFwcHJvYWNoLCBzbyBsaWVcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2phbnVzLWV4dGVuc2lvbi1pbnN0YWxsZWQnKSAhPT0gbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmlyZWZveCBvZiBvdGhlcnMsIG5vIG5lZWQgZm9yIHRoZSBleHRlbnNpb24gKGJ1dCB0aGlzIGRvZXNuJ3QgbWVhbiBpdCB3aWxsIHdvcmspXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn07XG5cbkphbnVzLm5vb3AgPSBmdW5jdGlvbigpIHt9O1xuXG4vLyBJbml0aWFsaXphdGlvblxuSmFudXMuaW5pdCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBvcHRpb25zLmNhbGxiYWNrID0gKHR5cGVvZiBvcHRpb25zLmNhbGxiYWNrID09IFwiZnVuY3Rpb25cIikgPyBvcHRpb25zLmNhbGxiYWNrIDogSmFudXMubm9vcDtcbiAgICBpZihKYW51cy5pbml0RG9uZSA9PT0gdHJ1ZSkge1xuICAgICAgICAvLyBBbHJlYWR5IGluaXRpYWxpemVkXG4gICAgICAgIG9wdGlvbnMuY2FsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZih0eXBlb2YgY29uc29sZSA9PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiBjb25zb2xlLmxvZyA9PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgY29uc29sZSA9IHsgbG9nOiBmdW5jdGlvbigpIHt9IH07XG4gICAgICAgIC8vIENvbnNvbGUgbG9nZ2luZyAoYWxsIGRlYnVnZ2luZyBkaXNhYmxlZCBieSBkZWZhdWx0KVxuICAgICAgICBKYW51cy50cmFjZSA9IEphbnVzLm5vb3A7XG4gICAgICAgIEphbnVzLmRlYnVnID0gSmFudXMubm9vcDtcbiAgICAgICAgSmFudXMudmRlYnVnID0gSmFudXMubm9vcDtcbiAgICAgICAgSmFudXMubG9nID0gSmFudXMubm9vcDtcbiAgICAgICAgSmFudXMud2FybiA9IEphbnVzLm5vb3A7XG4gICAgICAgIEphbnVzLmVycm9yID0gSmFudXMubm9vcDtcbiAgICAgICAgaWYob3B0aW9ucy5kZWJ1ZyA9PT0gdHJ1ZSB8fCBvcHRpb25zLmRlYnVnID09PSBcImFsbFwiKSB7XG4gICAgICAgICAgICAvLyBFbmFibGUgYWxsIGRlYnVnZ2luZyBsZXZlbHNcbiAgICAgICAgICAgIEphbnVzLnRyYWNlID0gY29uc29sZS50cmFjZS5iaW5kKGNvbnNvbGUpO1xuICAgICAgICAgICAgSmFudXMuZGVidWcgPSBjb25zb2xlLmRlYnVnLmJpbmQoY29uc29sZSk7XG4gICAgICAgICAgICBKYW51cy52ZGVidWcgPSBjb25zb2xlLmRlYnVnLmJpbmQoY29uc29sZSk7XG4gICAgICAgICAgICBKYW51cy5sb2cgPSBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO1xuICAgICAgICAgICAgSmFudXMud2FybiA9IGNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpO1xuICAgICAgICAgICAgSmFudXMuZXJyb3IgPSBjb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSk7XG4gICAgICAgIH0gZWxzZSBpZihBcnJheS5pc0FycmF5KG9wdGlvbnMuZGVidWcpKSB7XG4gICAgICAgICAgICBmb3IodmFyIGkgaW4gb3B0aW9ucy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgIHZhciBkID0gb3B0aW9ucy5kZWJ1Z1tpXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2goZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFjZVwiOlxuICAgICAgICAgICAgICAgICAgICBKYW51cy50cmFjZSA9IGNvbnNvbGUudHJhY2UuYmluZChjb25zb2xlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRlYnVnXCI6XG4gICAgICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnID0gY29uc29sZS5kZWJ1Zy5iaW5kKGNvbnNvbGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwidmRlYnVnXCI6XG4gICAgICAgICAgICAgICAgICAgIEphbnVzLnZkZWJ1ZyA9IGNvbnNvbGUuZGVidWcuYmluZChjb25zb2xlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImxvZ1wiOlxuICAgICAgICAgICAgICAgICAgICBKYW51cy5sb2cgPSBjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwid2FyblwiOlxuICAgICAgICAgICAgICAgICAgICBKYW51cy53YXJuID0gY29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICAgICAgICAgICAgICBKYW51cy5lcnJvciA9IGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlVua25vd24gZGVidWdnaW5nIG9wdGlvbiAnXCIgKyBkICsgXCInIChzdXBwb3J0ZWQ6ICd0cmFjZScsICdkZWJ1ZycsICd2ZGVidWcnLCAnbG9nJywgd2FybicsICdlcnJvcicpXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgSmFudXMubG9nKFwiSW5pdGlhbGl6aW5nIGxpYnJhcnlcIik7XG4gICAgICAgIC8vIEhlbHBlciBtZXRob2QgdG8gZW51bWVyYXRlIGRldmljZXNcbiAgICAgICAgSmFudXMubGlzdERldmljZXMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSAodHlwZW9mIGNhbGxiYWNrID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFjayA6IEphbnVzLm5vb3A7XG4gICAgICAgICAgICBpZihuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoeyBhdWRpbzogdHJ1ZSwgdmlkZW86IHRydWUgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKS50aGVuKGZ1bmN0aW9uKGRldmljZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBKYW51cy5kZWJ1ZyhkZXZpY2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhkZXZpY2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgcmlkIG9mIHRoZSBub3cgdXNlbGVzcyBzdHJlYW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0uc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHJhY2tzID0gc3RyZWFtLmdldFRyYWNrcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgaW4gdHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXN0ID0gdHJhY2tzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobXN0ICE9PSBudWxsICYmIG1zdCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zdC5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHt9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgSmFudXMuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIEphbnVzLndhcm4oXCJuYXZpZ2F0b3IubWVkaWFEZXZpY2VzIHVuYXZhaWxhYmxlXCIpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBIZWxwZXIgbWV0aG9kcyB0byBhdHRhY2gvcmVhdHRhY2ggYSBzdHJlYW0gdG8gYSB2aWRlbyBlbGVtZW50IChwcmV2aW91c2x5IHBhcnQgb2YgYWRhcHRlci5qcylcbiAgICAgICAgSmFudXMuYXR0YWNoTWVkaWFTdHJlYW0gPSBmdW5jdGlvbihlbGVtZW50LCBzdHJlYW0pIHtcbiAgICAgICAgICAgIGlmKGFkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2Nocm9tZScpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hyb21ldmVyID0gYWRhcHRlci5icm93c2VyRGV0YWlscy52ZXJzaW9uO1xuICAgICAgICAgICAgICAgIGlmKGNocm9tZXZlciA+PSA0Mykge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNyY09iamVjdCA9IHN0cmVhbTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYodHlwZW9mIGVsZW1lbnQuc3JjICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5lcnJvcihcIkVycm9yIGF0dGFjaGluZyBzdHJlYW0gdG8gZWxlbWVudFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBKYW51cy5yZWF0dGFjaE1lZGlhU3RyZWFtID0gZnVuY3Rpb24odG8sIGZyb20pIHtcbiAgICAgICAgICAgIGlmKGFkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2Nocm9tZScpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hyb21ldmVyID0gYWRhcHRlci5icm93c2VyRGV0YWlscy52ZXJzaW9uO1xuICAgICAgICAgICAgICAgIGlmKGNocm9tZXZlciA+PSA0Mykge1xuICAgICAgICAgICAgICAgICAgICB0by5zcmNPYmplY3QgPSBmcm9tLnNyY09iamVjdDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYodHlwZW9mIHRvLnNyYyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdG8uc3JjID0gZnJvbS5zcmM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0by5zcmNPYmplY3QgPSBmcm9tLnNyY09iamVjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gUHJlcGFyZSBhIGhlbHBlciBtZXRob2QgdG8gc2VuZCBBSkFYIHJlcXVlc3RzIGluIGEgc3ludGF4IHNpbWlsYXIgdG8galF1ZXJ5IChhdCBsZWFzdCBmb3Igd2hhdCB3ZSBjYXJlKVxuICAgICAgICBKYW51cy5hamF4ID0gZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBwYXJhbXNcbiAgICAgICAgICAgIGlmKHBhcmFtcyA9PT0gbnVsbCB8fCBwYXJhbXMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBwYXJhbXMuc3VjY2VzcyA9ICh0eXBlb2YgcGFyYW1zLnN1Y2Nlc3MgPT0gXCJmdW5jdGlvblwiKSA/IHBhcmFtcy5zdWNjZXNzIDogSmFudXMubm9vcDtcbiAgICAgICAgICAgIHBhcmFtcy5lcnJvciA9ICh0eXBlb2YgcGFyYW1zLmVycm9yID09IFwiZnVuY3Rpb25cIikgPyBwYXJhbXMuZXJyb3IgOiBKYW51cy5ub29wO1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZXJlJ3MgYW4gVVJMXG4gICAgICAgICAgICBpZihwYXJhbXMudXJsID09PSBudWxsIHx8IHBhcmFtcy51cmwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIEphbnVzLmVycm9yKCdNaXNzaW5nIHVybCcsIHBhcmFtcy51cmwpO1xuICAgICAgICAgICAgICAgIHBhcmFtcy5lcnJvcihudWxsLCAtMSwgJ01pc3NpbmcgdXJsJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgYXN5bmNcbiAgICAgICAgICAgIHBhcmFtcy5hc3luYyA9IChwYXJhbXMuYXN5bmMgPT09IG51bGwgfHwgcGFyYW1zLmFzeW5jID09PSB1bmRlZmluZWQpID8gdHJ1ZSA6IChwYXJhbXMuYXN5bmMgPT09IHRydWUpO1xuICAgICAgICAgICAgSmFudXMubG9nKHBhcmFtcyk7XG4gICAgICAgICAgICAvLyBJRSBkb2Vzbid0IGV2ZW4ga25vdyB3aGF0IFdlYlJUQyBpcywgc28gbm8gcG9seWZpbGwgbmVlZGVkXG4gICAgICAgICAgICB2YXIgWEhSID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICBYSFIub3BlbihwYXJhbXMudHlwZSwgcGFyYW1zLnVybCwgcGFyYW1zLmFzeW5jKTtcbiAgICAgICAgICAgIGlmKHBhcmFtcy5jb250ZW50VHlwZSAhPT0gbnVsbCAmJiBwYXJhbXMuY29udGVudFR5cGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBYSFIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgcGFyYW1zLmNvbnRlbnRUeXBlKTtcbiAgICAgICAgICAgIGlmKHBhcmFtcy5hc3luYykge1xuICAgICAgICAgICAgICAgIFhIUi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKFhIUi5yZWFkeVN0YXRlICE9IDQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGlmKFhIUi5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR290IGFuIGVycm9yP1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoWEhSLnN0YXR1cyA9PT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBYSFIuc3RhdHVzID0gXCJlcnJvclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmVycm9yKFhIUiwgWEhSLnN0YXR1cywgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gR290IHBheWxvYWRcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLnN1Y2Nlc3MoSlNPTi5wYXJzZShYSFIucmVzcG9uc2VUZXh0KSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgWEhSLnNlbmQocGFyYW1zLmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmKCFwYXJhbXMuYXN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoWEhSLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHb3QgYW4gZXJyb3I/XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihYSFIuc3RhdHVzID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFhIUi5zdGF0dXMgPSBcImVycm9yXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuZXJyb3IoWEhSLCBYSFIuc3RhdHVzLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBHb3QgcGF5bG9hZFxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMuc3VjY2VzcyhKU09OLnBhcnNlKFhIUi5yZXNwb25zZVRleHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBTb21ldGhpbmcgYnJva2UgdXBcbiAgICAgICAgICAgICAgICBwYXJhbXMuZXJyb3IoWEhSLCAnZXJyb3InLCAnJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICAvLyBEZXRlY3QgdGFiIGNsb3NlOiBtYWtlIHN1cmUgd2UgZG9uJ3QgbG9vc2UgZXhpc3Rpbmcgb25iZWZvcmV1bmxvYWQgaGFuZGxlcnNcbiAgICAgICAgdmFyIG9sZE9CRiA9IHdpbmRvdy5vbmJlZm9yZXVubG9hZDtcbiAgICAgICAgd2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBKYW51cy5sb2coXCJDbG9zaW5nIHdpbmRvd1wiKTtcbiAgICAgICAgICAgIGZvcih2YXIgcyBpbiBKYW51cy5zZXNzaW9ucykge1xuICAgICAgICAgICAgICAgIGlmKEphbnVzLnNlc3Npb25zW3NdICE9PSBudWxsICYmIEphbnVzLnNlc3Npb25zW3NdICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgSmFudXMuc2Vzc2lvbnNbc10uZGVzdHJveU9uVW5sb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgIEphbnVzLmxvZyhcIkRlc3Ryb3lpbmcgc2Vzc2lvbiBcIiArIHMpO1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5zZXNzaW9uc1tzXS5kZXN0cm95KHthc3luY1JlcXVlc3Q6IGZhbHNlfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYob2xkT0JGICYmIHR5cGVvZiBvbGRPQkYgPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgIG9sZE9CRigpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGFkZEpzTGlzdChzcmNBcnJheSkge1xuICAgICAgICAgICAgaWYgKCFzcmNBcnJheSB8fCAhQXJyYXkuaXNBcnJheShzcmNBcnJheSkgfHwgc3JjQXJyYXkubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgYWRkSnMoc3JjQXJyYXlbY291bnRdLG5leHQpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50PHNyY0FycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRKcyhzcmNBcnJheVtjb3VudF0sbmV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGFkZEpzKHNyYyxkb25lKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmKGFkYXB0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBsb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgSmFudXMuZGVidWcoc3JjICsgXCIgYWxyZWFkeSBsb2FkZWQsIHNraXBwaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHt9O1xuICAgICAgICAgICAgdmFyIG9IZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKS5pdGVtKDApO1xuICAgICAgICAgICAgdmFyIG9TY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgb1NjcmlwdC50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcbiAgICAgICAgICAgIG9TY3JpcHQuc3JjID0gc3JjO1xuICAgICAgICAgICAgb1NjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJMaWJyYXJ5IFwiICsgc3JjICsgXCIgbG9hZGVkXCIpO1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9IZWFkLmFwcGVuZENoaWxkKG9TY3JpcHQpO1xuICAgICAgICB9XG4gICAgICAgIEphbnVzLmluaXREb25lID0gdHJ1ZTtcbiAgICAgICAgYWRkSnNMaXN0KFtcImFkYXB0ZXIuanNcIl0pO1x0Ly8gV2UgbWF5IG5lZWQgb3RoZXJzIGluIHRoZSBmdXR1cmVcbiAgICB9XG59O1xuXG4vLyBIZWxwZXIgbWV0aG9kIHRvIGNoZWNrIHdoZXRoZXIgV2ViUlRDIGlzIHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXJcbkphbnVzLmlzV2VicnRjU3VwcG9ydGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAhPT0gdW5kZWZpbmVkICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAhPT0gbnVsbCAmJlxuICAgICAgICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhICE9PSB1bmRlZmluZWQgJiYgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSAhPT0gbnVsbDtcbn07XG5cblxuLy8gSmFudXMgc2Vzc2lvbiBvYmplY3RcbmZ1bmN0aW9uIEphbnVzKGdhdGV3YXlDYWxsYmFja3MpIHtcbiAgICBpZihKYW51cy5pbml0RG9uZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGdhdGV3YXlDYWxsYmFja3MuZXJyb3IoXCJMaWJyYXJ5IG5vdCBpbml0aWFsaXplZFwiKTtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBpZighSmFudXMuaXNXZWJydGNTdXBwb3J0ZWQoKSkge1xuICAgICAgICBnYXRld2F5Q2FsbGJhY2tzLmVycm9yKFwiV2ViUlRDIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyXCIpO1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIEphbnVzLmxvZyhcIkxpYnJhcnkgaW5pdGlhbGl6ZWQ6IFwiICsgSmFudXMuaW5pdERvbmUpO1xuICAgIGdhdGV3YXlDYWxsYmFja3MgPSBnYXRld2F5Q2FsbGJhY2tzIHx8IHt9O1xuICAgIGdhdGV3YXlDYWxsYmFja3Muc3VjY2VzcyA9ICh0eXBlb2YgZ2F0ZXdheUNhbGxiYWNrcy5zdWNjZXNzID09IFwiZnVuY3Rpb25cIikgPyBnYXRld2F5Q2FsbGJhY2tzLnN1Y2Nlc3MgOiBKYW51cy5ub29wO1xuICAgIGdhdGV3YXlDYWxsYmFja3MuZXJyb3IgPSAodHlwZW9mIGdhdGV3YXlDYWxsYmFja3MuZXJyb3IgPT0gXCJmdW5jdGlvblwiKSA/IGdhdGV3YXlDYWxsYmFja3MuZXJyb3IgOiBKYW51cy5ub29wO1xuICAgIGdhdGV3YXlDYWxsYmFja3MuZGVzdHJveWVkID0gKHR5cGVvZiBnYXRld2F5Q2FsbGJhY2tzLmRlc3Ryb3llZCA9PSBcImZ1bmN0aW9uXCIpID8gZ2F0ZXdheUNhbGxiYWNrcy5kZXN0cm95ZWQgOiBKYW51cy5ub29wO1xuICAgIGlmKGdhdGV3YXlDYWxsYmFja3Muc2VydmVyID09PSBudWxsIHx8IGdhdGV3YXlDYWxsYmFja3Muc2VydmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZ2F0ZXdheUNhbGxiYWNrcy5lcnJvcihcIkludmFsaWQgZ2F0ZXdheSB1cmxcIik7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgdmFyIHdlYnNvY2tldHMgPSBmYWxzZTtcbiAgICB2YXIgd3MgPSBudWxsO1xuICAgIHZhciB3c0hhbmRsZXJzID0ge307XG4gICAgdmFyIHdzS2VlcGFsaXZlVGltZW91dElkID0gbnVsbDtcblxuICAgIHZhciBzZXJ2ZXJzID0gbnVsbCwgc2VydmVyc0luZGV4ID0gMDtcbiAgICB2YXIgc2VydmVyID0gZ2F0ZXdheUNhbGxiYWNrcy5zZXJ2ZXI7XG4gICAgaWYoQXJyYXkuaXNBcnJheShzZXJ2ZXIpKSB7XG4gICAgICAgIEphbnVzLmxvZyhcIk11bHRpcGxlIHNlcnZlcnMgcHJvdmlkZWQgKFwiICsgc2VydmVyLmxlbmd0aCArIFwiKSwgd2lsbCB1c2UgdGhlIGZpcnN0IHRoYXQgd29ya3NcIik7XG4gICAgICAgIHNlcnZlciA9IG51bGw7XG4gICAgICAgIHNlcnZlcnMgPSBnYXRld2F5Q2FsbGJhY2tzLnNlcnZlcjtcbiAgICAgICAgSmFudXMuZGVidWcoc2VydmVycyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYoc2VydmVyLmluZGV4T2YoXCJ3c1wiKSA9PT0gMCkge1xuICAgICAgICAgICAgd2Vic29ja2V0cyA9IHRydWU7XG4gICAgICAgICAgICBKYW51cy5sb2coXCJVc2luZyBXZWJTb2NrZXRzIHRvIGNvbnRhY3QgSmFudXM6IFwiICsgc2VydmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdlYnNvY2tldHMgPSBmYWxzZTtcbiAgICAgICAgICAgIEphbnVzLmxvZyhcIlVzaW5nIFJFU1QgQVBJIHRvIGNvbnRhY3QgSmFudXM6IFwiICsgc2VydmVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgaWNlU2VydmVycyA9IGdhdGV3YXlDYWxsYmFja3MuaWNlU2VydmVycztcbiAgICBpZihpY2VTZXJ2ZXJzID09PSB1bmRlZmluZWQgfHwgaWNlU2VydmVycyA9PT0gbnVsbCB8fCBpY2VTZXJ2ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpY2VTZXJ2ZXJzID0gW3t1cmxzOiBcInN0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDJcIn1dO1xuICAgICAgICBKYW51cy5sb2coJ3VzaW5nIGljZScsIGljZVNlcnZlcnMpO1xuICAgIH1cbiAgICB2YXIgaWNlVHJhbnNwb3J0UG9saWN5ID0gZ2F0ZXdheUNhbGxiYWNrcy5pY2VUcmFuc3BvcnRQb2xpY3k7XG4gICAgLy8gV2hldGhlciBJUHY2IGNhbmRpZGF0ZXMgc2hvdWxkIGJlIGdhdGhlcmVkXG4gICAgdmFyIGlwdjZTdXBwb3J0ID0gZ2F0ZXdheUNhbGxiYWNrcy5pcHY2O1xuICAgIGlmKGlwdjZTdXBwb3J0ID09PSB1bmRlZmluZWQgfHwgaXB2NlN1cHBvcnQgPT09IG51bGwpXG4gICAgICAgIGlwdjZTdXBwb3J0ID0gZmFsc2U7XG4gICAgLy8gT3B0aW9uYWwgbWF4IGV2ZW50c1xuICAgIHZhciBtYXhldiA9IG51bGw7XG4gICAgaWYoZ2F0ZXdheUNhbGxiYWNrcy5tYXhfcG9sbF9ldmVudHMgIT09IHVuZGVmaW5lZCAmJiBnYXRld2F5Q2FsbGJhY2tzLm1heF9wb2xsX2V2ZW50cyAhPT0gbnVsbClcbiAgICAgICAgbWF4ZXYgPSBnYXRld2F5Q2FsbGJhY2tzLm1heF9wb2xsX2V2ZW50cztcbiAgICBpZihtYXhldiA8IDEpXG4gICAgICAgIG1heGV2ID0gMTtcbiAgICAvLyBUb2tlbiB0byB1c2UgKG9ubHkgaWYgdGhlIHRva2VuIGJhc2VkIGF1dGhlbnRpY2F0aW9uIG1lY2hhbmlzbSBpcyBlbmFibGVkKVxuICAgIHZhciB0b2tlbiA9IG51bGw7XG4gICAgaWYoZ2F0ZXdheUNhbGxiYWNrcy50b2tlbiAhPT0gdW5kZWZpbmVkICYmIGdhdGV3YXlDYWxsYmFja3MudG9rZW4gIT09IG51bGwpXG4gICAgICAgIHRva2VuID0gZ2F0ZXdheUNhbGxiYWNrcy50b2tlbjtcbiAgICAvLyBBUEkgc2VjcmV0IHRvIHVzZSAob25seSBpZiB0aGUgc2hhcmVkIEFQSSBzZWNyZXQgaXMgZW5hYmxlZClcbiAgICB2YXIgYXBpc2VjcmV0ID0gbnVsbDtcbiAgICBpZihnYXRld2F5Q2FsbGJhY2tzLmFwaXNlY3JldCAhPT0gdW5kZWZpbmVkICYmIGdhdGV3YXlDYWxsYmFja3MuYXBpc2VjcmV0ICE9PSBudWxsKVxuICAgICAgICBhcGlzZWNyZXQgPSBnYXRld2F5Q2FsbGJhY2tzLmFwaXNlY3JldDtcbiAgICAvLyBXaGV0aGVyIHdlIHNob3VsZCBkZXN0cm95IHRoaXMgc2Vzc2lvbiB3aGVuIG9uYmVmb3JldW5sb2FkIGlzIGNhbGxlZFxuICAgIHRoaXMuZGVzdHJveU9uVW5sb2FkID0gdHJ1ZTtcbiAgICBpZihnYXRld2F5Q2FsbGJhY2tzLmRlc3Ryb3lPblVubG9hZCAhPT0gdW5kZWZpbmVkICYmIGdhdGV3YXlDYWxsYmFja3MuZGVzdHJveU9uVW5sb2FkICE9PSBudWxsKVxuICAgICAgICB0aGlzLmRlc3Ryb3lPblVubG9hZCA9IChnYXRld2F5Q2FsbGJhY2tzLmRlc3Ryb3lPblVubG9hZCA9PT0gdHJ1ZSk7XG5cbiAgICB2YXIgY29ubmVjdGVkID0gZmFsc2U7XG4gICAgdmFyIHNlc3Npb25JZCA9IG51bGw7XG4gICAgdmFyIHBsdWdpbkhhbmRsZXMgPSB7fTtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIHJldHJpZXMgPSAwO1xuICAgIHZhciB0cmFuc2FjdGlvbnMgPSB7fTtcbiAgICBjcmVhdGVTZXNzaW9uKGdhdGV3YXlDYWxsYmFja3MpO1xuXG4gICAgLy8gUHVibGljIG1ldGhvZHNcbiAgICB0aGlzLmdldFNlcnZlciA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gc2VydmVyOyB9O1xuICAgIHRoaXMuaXNDb25uZWN0ZWQgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGNvbm5lY3RlZDsgfTtcbiAgICB0aGlzLmdldFNlc3Npb25JZCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gc2Vzc2lvbklkOyB9O1xuICAgIHRoaXMuZGVzdHJveSA9IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBkZXN0cm95U2Vzc2lvbihjYWxsYmFja3MsIHRydWUpOyB9O1xuICAgIHRoaXMuYXR0YWNoID0gZnVuY3Rpb24oY2FsbGJhY2tzKSB7IGNyZWF0ZUhhbmRsZShjYWxsYmFja3MpOyB9O1xuXG4gICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gY3JlYXRlIHJhbmRvbSBpZGVudGlmaWVycyAoZS5nLiwgdHJhbnNhY3Rpb24pXG4gICAgZnVuY3Rpb24gcmFuZG9tU3RyaW5nKGxlbikge1xuICAgICAgICB2YXIgY2hhclNldCA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7XG4gICAgICAgIHZhciByYW5kb21TdHJpbmcgPSAnJztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIHJhbmRvbVBveiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJTZXQubGVuZ3RoKTtcbiAgICAgICAgICAgIHJhbmRvbVN0cmluZyArPSBjaGFyU2V0LnN1YnN0cmluZyhyYW5kb21Qb3oscmFuZG9tUG96KzEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByYW5kb21TdHJpbmc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXZlbnRIYW5kbGVyKCkge1xuICAgICAgICBpZihzZXNzaW9uSWQgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgSmFudXMuZGVidWcoJ0xvbmcgcG9sbC4uLicpO1xuICAgICAgICBpZighY29ubmVjdGVkKSB7XG4gICAgICAgICAgICBKYW51cy53YXJuKFwiSXMgdGhlIGdhdGV3YXkgZG93bj8gKGNvbm5lY3RlZD1mYWxzZSlcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxvbmdwb2xsID0gc2VydmVyICsgXCIvXCIgKyBzZXNzaW9uSWQgKyBcIj9yaWQ9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgaWYobWF4ZXYgIT09IHVuZGVmaW5lZCAmJiBtYXhldiAhPT0gbnVsbClcbiAgICAgICAgICAgIGxvbmdwb2xsID0gbG9uZ3BvbGwgKyBcIiZtYXhldj1cIiArIG1heGV2O1xuICAgICAgICBpZih0b2tlbiAhPT0gbnVsbCAmJiB0b2tlbiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgbG9uZ3BvbGwgPSBsb25ncG9sbCArIFwiJnRva2VuPVwiICsgdG9rZW47XG4gICAgICAgIGlmKGFwaXNlY3JldCAhPT0gbnVsbCAmJiBhcGlzZWNyZXQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGxvbmdwb2xsID0gbG9uZ3BvbGwgKyBcIiZhcGlzZWNyZXQ9XCIgKyBhcGlzZWNyZXQ7XG4gICAgICAgIEphbnVzLmFqYXgoe1xuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6IGxvbmdwb2xsLFxuICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICAgICAgdGltZW91dDogNjAwMDAsXHQvLyBGSVhNRVxuICAgICAgICAgICAgc3VjY2VzczogaGFuZGxlRXZlbnQsXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oWE1MSHR0cFJlcXVlc3QsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgSmFudXMuZXJyb3IodGV4dFN0YXR1cyArIFwiOiBcIiArIGVycm9yVGhyb3duKTtcbiAgICAgICAgICAgICAgICAvL34gY2xlYXJUaW1lb3V0KHRpbWVvdXRUaW1lcik7XG4gICAgICAgICAgICAgICAgcmV0cmllcysrO1xuICAgICAgICAgICAgICAgIGlmKHJldHJpZXMgPiAzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERpZCB3ZSBqdXN0IGxvc2UgdGhlIGdhdGV3YXk/IDotKFxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUNhbGxiYWNrcy5lcnJvcihcIkxvc3QgY29ubmVjdGlvbiB0byB0aGUgZ2F0ZXdheSAoaXMgaXQgZG93bj8pXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV2ZW50SGFuZGxlcigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQcml2YXRlIGV2ZW50IGhhbmRsZXI6IHRoaXMgd2lsbCB0cmlnZ2VyIHBsdWdpbiBjYWxsYmFja3MsIGlmIHNldFxuICAgIGZ1bmN0aW9uIGhhbmRsZUV2ZW50KGpzb24pIHtcbiAgICAgICAgcmV0cmllcyA9IDA7XG4gICAgICAgIGlmKCF3ZWJzb2NrZXRzICYmIHNlc3Npb25JZCAhPT0gdW5kZWZpbmVkICYmIHNlc3Npb25JZCAhPT0gbnVsbClcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZXZlbnRIYW5kbGVyLCAyMDApO1xuICAgICAgICBpZighd2Vic29ja2V0cyAmJiBBcnJheS5pc0FycmF5KGpzb24pKSB7XG4gICAgICAgICAgICAvLyBXZSBnb3QgYW4gYXJyYXk6IGl0IG1lYW5zIHdlIHBhc3NlZCBhIG1heGV2ID4gMSwgaXRlcmF0ZSBvbiBhbGwgb2JqZWN0c1xuICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8anNvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGhhbmRsZUV2ZW50KGpzb25baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKGpzb25bXCJqYW51c1wiXSA9PT0gXCJrZWVwYWxpdmVcIikge1xuICAgICAgICAgICAgLy8gTm90aGluZyBoYXBwZW5lZFxuICAgICAgICAgICAgSmFudXMudmRlYnVnKFwiR290IGEga2VlcGFsaXZlIG9uIHNlc3Npb24gXCIgKyBzZXNzaW9uSWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYoanNvbltcImphbnVzXCJdID09PSBcImFja1wiKSB7XG4gICAgICAgICAgICAvLyBKdXN0IGFuIGFjaywgd2UgY2FuIHByb2JhYmx5IGlnbm9yZVxuICAgICAgICAgICAgSmFudXMuZGVidWcoXCJHb3QgYW4gYWNrIG9uIHNlc3Npb24gXCIgKyBzZXNzaW9uSWQpO1xuICAgICAgICAgICAgSmFudXMuZGVidWcoanNvbik7XG4gICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb24gPSBqc29uW1widHJhbnNhY3Rpb25cIl07XG4gICAgICAgICAgICBpZih0cmFuc2FjdGlvbiAhPT0gbnVsbCAmJiB0cmFuc2FjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlcG9ydFN1Y2Nlc3MgPSB0cmFuc2FjdGlvbnNbdHJhbnNhY3Rpb25dO1xuICAgICAgICAgICAgICAgIGlmKHJlcG9ydFN1Y2Nlc3MgIT09IG51bGwgJiYgcmVwb3J0U3VjY2VzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydFN1Y2Nlc3MoanNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0cmFuc2FjdGlvbnNbdHJhbnNhY3Rpb25dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYoanNvbltcImphbnVzXCJdID09PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgLy8gU3VjY2VzcyFcbiAgICAgICAgICAgIEphbnVzLmRlYnVnKFwiR290IGEgc3VjY2VzcyBvbiBzZXNzaW9uIFwiICsgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIEphbnVzLmRlYnVnKGpzb24pO1xuICAgICAgICAgICAgdmFyIHRyYW5zYWN0aW9uID0ganNvbltcInRyYW5zYWN0aW9uXCJdO1xuICAgICAgICAgICAgaWYodHJhbnNhY3Rpb24gIT09IG51bGwgJiYgdHJhbnNhY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhciByZXBvcnRTdWNjZXNzID0gdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uXTtcbiAgICAgICAgICAgICAgICBpZihyZXBvcnRTdWNjZXNzICE9PSBudWxsICYmIHJlcG9ydFN1Y2Nlc3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXBvcnRTdWNjZXNzKGpzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWxldGUgdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmKGpzb25bXCJqYW51c1wiXSA9PT0gXCJ3ZWJydGN1cFwiKSB7XG4gICAgICAgICAgICAvLyBUaGUgUGVlckNvbm5lY3Rpb24gd2l0aCB0aGUgZ2F0ZXdheSBpcyB1cCEgTm90aWZ5IHRoaXNcbiAgICAgICAgICAgIEphbnVzLmRlYnVnKFwiR290IGEgd2VicnRjdXAgZXZlbnQgb24gc2Vzc2lvbiBcIiArIHNlc3Npb25JZCk7XG4gICAgICAgICAgICBKYW51cy5kZWJ1Zyhqc29uKTtcbiAgICAgICAgICAgIHZhciBzZW5kZXIgPSBqc29uW1wic2VuZGVyXCJdO1xuICAgICAgICAgICAgaWYoc2VuZGVyID09PSB1bmRlZmluZWQgfHwgc2VuZGVyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgSmFudXMud2FybihcIk1pc3Npbmcgc2VuZGVyLi4uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW3NlbmRlcl07XG4gICAgICAgICAgICBpZihwbHVnaW5IYW5kbGUgPT09IHVuZGVmaW5lZCB8fCBwbHVnaW5IYW5kbGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBKYW51cy53YXJuKFwiVGhpcyBoYW5kbGUgaXMgbm90IGF0dGFjaGVkIHRvIHRoaXMgc2Vzc2lvblwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbHVnaW5IYW5kbGUud2VicnRjU3RhdGUodHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZihqc29uW1wiamFudXNcIl0gPT09IFwiaGFuZ3VwXCIpIHtcbiAgICAgICAgICAgIC8vIEEgcGx1Z2luIGFza2VkIHRoZSBjb3JlIHRvIGhhbmd1cCBhIFBlZXJDb25uZWN0aW9uIG9uIG9uZSBvZiBvdXIgaGFuZGxlc1xuICAgICAgICAgICAgSmFudXMuZGVidWcoXCJHb3QgYSBoYW5ndXAgZXZlbnQgb24gc2Vzc2lvbiBcIiArIHNlc3Npb25JZCk7XG4gICAgICAgICAgICBKYW51cy5kZWJ1Zyhqc29uKTtcbiAgICAgICAgICAgIHZhciBzZW5kZXIgPSBqc29uW1wic2VuZGVyXCJdO1xuICAgICAgICAgICAgaWYoc2VuZGVyID09PSB1bmRlZmluZWQgfHwgc2VuZGVyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgSmFudXMud2FybihcIk1pc3Npbmcgc2VuZGVyLi4uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW3NlbmRlcl07XG4gICAgICAgICAgICBpZihwbHVnaW5IYW5kbGUgPT09IHVuZGVmaW5lZCB8fCBwbHVnaW5IYW5kbGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBKYW51cy53YXJuKFwiVGhpcyBoYW5kbGUgaXMgbm90IGF0dGFjaGVkIHRvIHRoaXMgc2Vzc2lvblwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbHVnaW5IYW5kbGUud2VicnRjU3RhdGUoZmFsc2UpO1xuICAgICAgICAgICAgcGx1Z2luSGFuZGxlLmhhbmd1cCgpO1xuICAgICAgICB9IGVsc2UgaWYoanNvbltcImphbnVzXCJdID09PSBcImRldGFjaGVkXCIpIHtcbiAgICAgICAgICAgIC8vIEEgcGx1Z2luIGFza2VkIHRoZSBjb3JlIHRvIGRldGFjaCBvbmUgb2Ygb3VyIGhhbmRsZXNcbiAgICAgICAgICAgIEphbnVzLmRlYnVnKFwiR290IGEgZGV0YWNoZWQgZXZlbnQgb24gc2Vzc2lvbiBcIiArIHNlc3Npb25JZCk7XG4gICAgICAgICAgICBKYW51cy5kZWJ1Zyhqc29uKTtcbiAgICAgICAgICAgIHZhciBzZW5kZXIgPSBqc29uW1wic2VuZGVyXCJdO1xuICAgICAgICAgICAgaWYoc2VuZGVyID09PSB1bmRlZmluZWQgfHwgc2VuZGVyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgSmFudXMud2FybihcIk1pc3Npbmcgc2VuZGVyLi4uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW3NlbmRlcl07XG4gICAgICAgICAgICBpZihwbHVnaW5IYW5kbGUgPT09IHVuZGVmaW5lZCB8fCBwbHVnaW5IYW5kbGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBEb24ndCB3YXJuIGhlcmUgYmVjYXVzZSBkZXN0cm95SGFuZGxlIGNhdXNlcyB0aGlzIHNpdHVhdGlvbi5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbHVnaW5IYW5kbGUub25kZXRhY2hlZCgpO1xuICAgICAgICAgICAgcGx1Z2luSGFuZGxlLmRldGFjaCgpO1xuICAgICAgICB9IGVsc2UgaWYoanNvbltcImphbnVzXCJdID09PSBcIm1lZGlhXCIpIHtcbiAgICAgICAgICAgIC8vIE1lZGlhIHN0YXJ0ZWQvc3RvcHBlZCBmbG93aW5nXG4gICAgICAgICAgICBKYW51cy5kZWJ1ZyhcIkdvdCBhIG1lZGlhIGV2ZW50IG9uIHNlc3Npb24gXCIgKyBzZXNzaW9uSWQpO1xuICAgICAgICAgICAgSmFudXMuZGVidWcoanNvbik7XG4gICAgICAgICAgICB2YXIgc2VuZGVyID0ganNvbltcInNlbmRlclwiXTtcbiAgICAgICAgICAgIGlmKHNlbmRlciA9PT0gdW5kZWZpbmVkIHx8IHNlbmRlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEphbnVzLndhcm4oXCJNaXNzaW5nIHNlbmRlci4uLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1tzZW5kZXJdO1xuICAgICAgICAgICAgaWYocGx1Z2luSGFuZGxlID09PSB1bmRlZmluZWQgfHwgcGx1Z2luSGFuZGxlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgSmFudXMud2FybihcIlRoaXMgaGFuZGxlIGlzIG5vdCBhdHRhY2hlZCB0byB0aGlzIHNlc3Npb25cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGx1Z2luSGFuZGxlLm1lZGlhU3RhdGUoanNvbltcInR5cGVcIl0sIGpzb25bXCJyZWNlaXZpbmdcIl0pO1xuICAgICAgICB9IGVsc2UgaWYoanNvbltcImphbnVzXCJdID09PSBcInNsb3dsaW5rXCIpIHtcbiAgICAgICAgICAgIEphbnVzLmRlYnVnKFwiR290IGEgc2xvd2xpbmsgZXZlbnQgb24gc2Vzc2lvbiBcIiArIHNlc3Npb25JZCk7XG4gICAgICAgICAgICBKYW51cy5kZWJ1Zyhqc29uKTtcbiAgICAgICAgICAgIC8vIFRyb3VibGUgdXBsaW5rIG9yIGRvd25saW5rXG4gICAgICAgICAgICB2YXIgc2VuZGVyID0ganNvbltcInNlbmRlclwiXTtcbiAgICAgICAgICAgIGlmKHNlbmRlciA9PT0gdW5kZWZpbmVkIHx8IHNlbmRlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEphbnVzLndhcm4oXCJNaXNzaW5nIHNlbmRlci4uLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1tzZW5kZXJdO1xuICAgICAgICAgICAgaWYocGx1Z2luSGFuZGxlID09PSB1bmRlZmluZWQgfHwgcGx1Z2luSGFuZGxlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgSmFudXMud2FybihcIlRoaXMgaGFuZGxlIGlzIG5vdCBhdHRhY2hlZCB0byB0aGlzIHNlc3Npb25cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGx1Z2luSGFuZGxlLnNsb3dMaW5rKGpzb25bXCJ1cGxpbmtcIl0sIGpzb25bXCJuYWNrc1wiXSk7XG4gICAgICAgIH0gZWxzZSBpZihqc29uW1wiamFudXNcIl0gPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgLy8gT29wcywgc29tZXRoaW5nIHdyb25nIGhhcHBlbmVkXG4gICAgICAgICAgICBKYW51cy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcdC8vIEZJWE1FXG4gICAgICAgICAgICBKYW51cy5kZWJ1Zyhqc29uKTtcbiAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbiA9IGpzb25bXCJ0cmFuc2FjdGlvblwiXTtcbiAgICAgICAgICAgIGlmKHRyYW5zYWN0aW9uICE9PSBudWxsICYmIHRyYW5zYWN0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVwb3J0U3VjY2VzcyA9IHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbl07XG4gICAgICAgICAgICAgICAgaWYocmVwb3J0U3VjY2VzcyAhPT0gbnVsbCAmJiByZXBvcnRTdWNjZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0U3VjY2Vzcyhqc29uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSBpZihqc29uW1wiamFudXNcIl0gPT09IFwiZXZlbnRcIikge1xuICAgICAgICAgICAgSmFudXMuZGVidWcoXCJHb3QgYSBwbHVnaW4gZXZlbnQgb24gc2Vzc2lvbiBcIiArIHNlc3Npb25JZCk7XG4gICAgICAgICAgICBKYW51cy5kZWJ1Zyhqc29uKTtcbiAgICAgICAgICAgIHZhciBzZW5kZXIgPSBqc29uW1wic2VuZGVyXCJdO1xuICAgICAgICAgICAgaWYoc2VuZGVyID09PSB1bmRlZmluZWQgfHwgc2VuZGVyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgSmFudXMud2FybihcIk1pc3Npbmcgc2VuZGVyLi4uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwbHVnaW5kYXRhID0ganNvbltcInBsdWdpbmRhdGFcIl07XG4gICAgICAgICAgICBpZihwbHVnaW5kYXRhID09PSB1bmRlZmluZWQgfHwgcGx1Z2luZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEphbnVzLndhcm4oXCJNaXNzaW5nIHBsdWdpbmRhdGEuLi5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgSmFudXMuZGVidWcoXCIgIC0tIEV2ZW50IGlzIGNvbWluZyBmcm9tIFwiICsgc2VuZGVyICsgXCIgKFwiICsgcGx1Z2luZGF0YVtcInBsdWdpblwiXSArIFwiKVwiKTtcbiAgICAgICAgICAgIHZhciBkYXRhID0gcGx1Z2luZGF0YVtcImRhdGFcIl07XG4gICAgICAgICAgICBKYW51cy5kZWJ1ZyhkYXRhKTtcbiAgICAgICAgICAgIHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW3NlbmRlcl07XG4gICAgICAgICAgICBpZihwbHVnaW5IYW5kbGUgPT09IHVuZGVmaW5lZCB8fCBwbHVnaW5IYW5kbGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBKYW51cy53YXJuKFwiVGhpcyBoYW5kbGUgaXMgbm90IGF0dGFjaGVkIHRvIHRoaXMgc2Vzc2lvblwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIganNlcCA9IGpzb25bXCJqc2VwXCJdO1xuICAgICAgICAgICAgaWYoanNlcCAhPT0gdW5kZWZpbmVkICYmIGpzZXAgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBKYW51cy5kZWJ1ZyhcIkhhbmRsaW5nIFNEUCBhcyB3ZWxsLi4uXCIpO1xuICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnKGpzZXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gcGx1Z2luSGFuZGxlLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGlmKGNhbGxiYWNrICE9PSBudWxsICYmIGNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBKYW51cy5kZWJ1ZyhcIk5vdGlmeWluZyBhcHBsaWNhdGlvbi4uLlwiKTtcbiAgICAgICAgICAgICAgICAvLyBTZW5kIHRvIGNhbGxiYWNrIHNwZWNpZmllZCB3aGVuIGF0dGFjaGluZyBwbHVnaW4gaGFuZGxlXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSwganNlcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNlbmQgdG8gZ2VuZXJpYyBjYWxsYmFjayAoPylcbiAgICAgICAgICAgICAgICBKYW51cy5kZWJ1ZyhcIk5vIHByb3ZpZGVkIG5vdGlmaWNhdGlvbiBjYWxsYmFja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEphbnVzLndhcm4oXCJVbmtvd24gbWVzc2FnZS9ldmVudCAgJ1wiICsganNvbltcImphbnVzXCJdICsgXCInIG9uIHNlc3Npb24gXCIgKyBzZXNzaW9uSWQpO1xuICAgICAgICAgICAgSmFudXMuZGVidWcoanNvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQcml2YXRlIGhlbHBlciB0byBzZW5kIGtlZXAtYWxpdmUgbWVzc2FnZXMgb24gV2ViU29ja2V0c1xuICAgIGZ1bmN0aW9uIGtlZXBBbGl2ZSgpIHtcbiAgICAgICAgaWYoc2VydmVyID09PSBudWxsIHx8ICF3ZWJzb2NrZXRzIHx8ICFjb25uZWN0ZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHdzS2VlcGFsaXZlVGltZW91dElkID0gc2V0VGltZW91dChrZWVwQWxpdmUsIDMwMDAwKTtcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB7IFwiamFudXNcIjogXCJrZWVwYWxpdmVcIiwgXCJzZXNzaW9uX2lkXCI6IHNlc3Npb25JZCwgXCJ0cmFuc2FjdGlvblwiOiByYW5kb21TdHJpbmcoMTIpIH07XG4gICAgICAgIGlmKHRva2VuICE9PSBudWxsICYmIHRva2VuICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXF1ZXN0W1widG9rZW5cIl0gPSB0b2tlbjtcbiAgICAgICAgaWYoYXBpc2VjcmV0ICE9PSBudWxsICYmIGFwaXNlY3JldCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmVxdWVzdFtcImFwaXNlY3JldFwiXSA9IGFwaXNlY3JldDtcbiAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG4gICAgfVxuXG4gICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gY3JlYXRlIGEgc2Vzc2lvblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNlc3Npb24oY2FsbGJhY2tzKSB7XG4gICAgICAgIHZhciB0cmFuc2FjdGlvbiA9IHJhbmRvbVN0cmluZygxMik7XG4gICAgICAgIHZhciByZXF1ZXN0ID0geyBcImphbnVzXCI6IFwiY3JlYXRlXCIsIFwidHJhbnNhY3Rpb25cIjogdHJhbnNhY3Rpb24gfTtcbiAgICAgICAgaWYodG9rZW4gIT09IG51bGwgJiYgdG9rZW4gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlcXVlc3RbXCJ0b2tlblwiXSA9IHRva2VuO1xuICAgICAgICBpZihhcGlzZWNyZXQgIT09IG51bGwgJiYgYXBpc2VjcmV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXF1ZXN0W1wiYXBpc2VjcmV0XCJdID0gYXBpc2VjcmV0O1xuICAgICAgICBpZihzZXJ2ZXIgPT09IG51bGwgJiYgQXJyYXkuaXNBcnJheShzZXJ2ZXJzKSkge1xuICAgICAgICAgICAgLy8gV2Ugc3RpbGwgbmVlZCB0byBmaW5kIGEgd29ya2luZyBzZXJ2ZXIgZnJvbSB0aGUgbGlzdCB3ZSB3ZXJlIGdpdmVuXG4gICAgICAgICAgICBzZXJ2ZXIgPSBzZXJ2ZXJzW3NlcnZlcnNJbmRleF07XG4gICAgICAgICAgICBpZihzZXJ2ZXIuaW5kZXhPZihcIndzXCIpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgd2Vic29ja2V0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgSmFudXMubG9nKFwiU2VydmVyICNcIiArIChzZXJ2ZXJzSW5kZXgrMSkgKyBcIjogdHJ5aW5nIFdlYlNvY2tldHMgdG8gY29udGFjdCBKYW51cyAoXCIgKyBzZXJ2ZXIgKyBcIilcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdlYnNvY2tldHMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJTZXJ2ZXIgI1wiICsgKHNlcnZlcnNJbmRleCsxKSArIFwiOiB0cnlpbmcgUkVTVCBBUEkgdG8gY29udGFjdCBKYW51cyAoXCIgKyBzZXJ2ZXIgKyBcIilcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYod2Vic29ja2V0cykge1xuICAgICAgICAgICAgd3MgPSBuZXcgV2ViU29ja2V0KHNlcnZlciwgJ2phbnVzLXByb3RvY29sJyk7XG4gICAgICAgICAgICB3c0hhbmRsZXJzID0ge1xuICAgICAgICAgICAgICAgICdlcnJvcic6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5lcnJvcihcIkVycm9yIGNvbm5lY3RpbmcgdG8gdGhlIEphbnVzIFdlYlNvY2tldHMgc2VydmVyLi4uIFwiICsgc2VydmVyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VydmVycykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcnNJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlcnZlcnNJbmRleCA9PSBzZXJ2ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIHRyaWVkIGFsbCB0aGUgc2VydmVycyB0aGUgdXNlciBnYXZlIHVzIGFuZCB0aGV5IGFsbCBmYWlsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoXCJFcnJvciBjb25uZWN0aW5nIHRvIGFueSBvZiB0aGUgcHJvdmlkZWQgSmFudXMgc2VydmVyczogSXMgdGhlIGdhdGV3YXkgZG93bj9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGV0J3MgdHJ5IHRoZSBuZXh0IHNlcnZlclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2Vzc2lvbihjYWxsYmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoXCJFcnJvciBjb25uZWN0aW5nIHRvIHRoZSBKYW51cyBXZWJTb2NrZXRzIHNlcnZlcjogSXMgdGhlIGdhdGV3YXkgZG93bj9cIik7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICdvcGVuJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gYmUgbm90aWZpZWQgYWJvdXQgdGhlIHN1Y2Nlc3NcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25zW3RyYW5zYWN0aW9uXSA9IGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnKGpzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb25bXCJqYW51c1wiXSAhPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBKYW51cy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcdC8vIEZJWE1FXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLmVycm9yKGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHdzS2VlcGFsaXZlVGltZW91dElkID0gc2V0VGltZW91dChrZWVwQWxpdmUsIDMwMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSWQgPSBqc29uLmRhdGFbXCJpZFwiXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEphbnVzLmxvZyhcIkNyZWF0ZWQgc2Vzc2lvbjogXCIgKyBzZXNzaW9uSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgSmFudXMuc2Vzc2lvbnNbc2Vzc2lvbklkXSA9IHRoYXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3VjY2VzcygpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVFdmVudChKU09OLnBhcnNlKGV2ZW50LmRhdGEpKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgJ2Nsb3NlJzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXIgPT09IG51bGwgfHwgIWNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRSBXaGF0IGlmIHRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIHBhZ2UgaXMgY2xvc2VkP1xuICAgICAgICAgICAgICAgICAgICBnYXRld2F5Q2FsbGJhY2tzLmVycm9yKFwiTG9zdCBjb25uZWN0aW9uIHRvIHRoZSBnYXRld2F5IChpcyBpdCBkb3duPylcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZm9yKHZhciBldmVudE5hbWUgaW4gd3NIYW5kbGVycykge1xuICAgICAgICAgICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCB3c0hhbmRsZXJzW2V2ZW50TmFtZV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgSmFudXMuYWpheCh7XG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IHNlcnZlcixcbiAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oanNvbikge1xuICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnKGpzb24pO1xuICAgICAgICAgICAgICAgIGlmKGpzb25bXCJqYW51c1wiXSAhPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgSmFudXMuZXJyb3IoXCJPb29wczogXCIgKyBqc29uW1wiZXJyb3JcIl0uY29kZSArIFwiIFwiICsganNvbltcImVycm9yXCJdLnJlYXNvbik7XHQvLyBGSVhNRVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoanNvbltcImVycm9yXCJdLnJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQgPSBqc29uLmRhdGFbXCJpZFwiXTtcbiAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJDcmVhdGVkIHNlc3Npb246IFwiICsgc2Vzc2lvbklkKTtcbiAgICAgICAgICAgICAgICBKYW51cy5zZXNzaW9uc1tzZXNzaW9uSWRdID0gdGhhdDtcbiAgICAgICAgICAgICAgICBldmVudEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3VjY2VzcygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihYTUxIdHRwUmVxdWVzdCwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICBKYW51cy5lcnJvcih0ZXh0U3RhdHVzICsgXCI6IFwiICsgZXJyb3JUaHJvd24pO1x0Ly8gRklYTUVcbiAgICAgICAgICAgICAgICBpZihBcnJheS5pc0FycmF5KHNlcnZlcnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcnNJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICBpZihzZXJ2ZXJzSW5kZXggPT0gc2VydmVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIHRyaWVkIGFsbCB0aGUgc2VydmVycyB0aGUgdXNlciBnYXZlIHVzIGFuZCB0aGV5IGFsbCBmYWlsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihcIkVycm9yIGNvbm5lY3RpbmcgdG8gYW55IG9mIHRoZSBwcm92aWRlZCBKYW51cyBzZXJ2ZXJzOiBJcyB0aGUgZ2F0ZXdheSBkb3duP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBMZXQncyB0cnkgdGhlIG5leHQgc2VydmVyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNyZWF0ZVNlc3Npb24oY2FsbGJhY2tzKTsgfSwgMjAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihlcnJvclRocm93biA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLmVycm9yKHRleHRTdGF0dXMgKyBcIjogSXMgdGhlIGdhdGV3YXkgZG93bj9cIik7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IodGV4dFN0YXR1cyArIFwiOiBcIiArIGVycm9yVGhyb3duKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCJcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gZGVzdHJveSBhIHNlc3Npb25cbiAgICBmdW5jdGlvbiBkZXN0cm95U2Vzc2lvbihjYWxsYmFja3MpIHtcbiAgICAgICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzIHx8IHt9O1xuICAgICAgICAvLyBGSVhNRSBUaGlzIG1ldGhvZCB0cmlnZ2VycyBhIHN1Y2Nlc3MgZXZlbiB3aGVuIHdlIGZhaWxcbiAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MgPSAodHlwZW9mIGNhbGxiYWNrcy5zdWNjZXNzID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Muc3VjY2VzcyA6IEphbnVzLm5vb3A7XG4gICAgICAgIHZhciBhc3luY1JlcXVlc3QgPSB0cnVlO1xuICAgICAgICBpZihjYWxsYmFja3MuYXN5bmNSZXF1ZXN0ICE9PSB1bmRlZmluZWQgJiYgY2FsbGJhY2tzLmFzeW5jUmVxdWVzdCAhPT0gbnVsbClcbiAgICAgICAgICAgIGFzeW5jUmVxdWVzdCA9IChjYWxsYmFja3MuYXN5bmNSZXF1ZXN0ID09PSB0cnVlKTtcbiAgICAgICAgSmFudXMubG9nKFwiRGVzdHJveWluZyBzZXNzaW9uIFwiICsgc2Vzc2lvbklkICsgXCIgKGFzeW5jPVwiICsgYXN5bmNSZXF1ZXN0ICsgXCIpXCIpO1xuICAgICAgICBpZighY29ubmVjdGVkKSB7XG4gICAgICAgICAgICBKYW51cy53YXJuKFwiSXMgdGhlIGdhdGV3YXkgZG93bj8gKGNvbm5lY3RlZD1mYWxzZSlcIik7XG4gICAgICAgICAgICBjYWxsYmFja3Muc3VjY2VzcygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKHNlc3Npb25JZCA9PT0gdW5kZWZpbmVkIHx8IHNlc3Npb25JZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgSmFudXMud2FybihcIk5vIHNlc3Npb24gdG8gZGVzdHJveVwiKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzKCk7XG4gICAgICAgICAgICBnYXRld2F5Q2FsbGJhY2tzLmRlc3Ryb3llZCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSBKYW51cy5zZXNzaW9uc1tzZXNzaW9uSWRdO1xuICAgICAgICAvLyBEZXN0cm95IGFsbCBoYW5kbGVzIGZpcnN0XG4gICAgICAgIGZvcih2YXIgcGggaW4gcGx1Z2luSGFuZGxlcykge1xuICAgICAgICAgICAgdmFyIHBodiA9IHBsdWdpbkhhbmRsZXNbcGhdO1xuICAgICAgICAgICAgSmFudXMubG9nKFwiRGVzdHJveWluZyBoYW5kbGUgXCIgKyBwaHYuaWQgKyBcIiAoXCIgKyBwaHYucGx1Z2luICsgXCIpXCIpO1xuICAgICAgICAgICAgZGVzdHJveUhhbmRsZShwaHYuaWQsIHthc3luY1JlcXVlc3Q6IGFzeW5jUmVxdWVzdH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIE9rLCBnbyBvblxuICAgICAgICB2YXIgcmVxdWVzdCA9IHsgXCJqYW51c1wiOiBcImRlc3Ryb3lcIiwgXCJ0cmFuc2FjdGlvblwiOiByYW5kb21TdHJpbmcoMTIpIH07XG4gICAgICAgIGlmKHRva2VuICE9PSBudWxsICYmIHRva2VuICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXF1ZXN0W1widG9rZW5cIl0gPSB0b2tlbjtcbiAgICAgICAgaWYoYXBpc2VjcmV0ICE9PSBudWxsICYmIGFwaXNlY3JldCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmVxdWVzdFtcImFwaXNlY3JldFwiXSA9IGFwaXNlY3JldDtcbiAgICAgICAgaWYod2Vic29ja2V0cykge1xuICAgICAgICAgICAgcmVxdWVzdFtcInNlc3Npb25faWRcIl0gPSBzZXNzaW9uSWQ7XG5cbiAgICAgICAgICAgIHZhciB1bmJpbmRXZWJTb2NrZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGV2ZW50TmFtZSBpbiB3c0hhbmRsZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIHdzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCB3c0hhbmRsZXJzW2V2ZW50TmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3cy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgb25VbmJpbmRNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB3cy5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIG9uVW5iaW5kRXJyb3IpO1xuICAgICAgICAgICAgICAgIGlmKHdzS2VlcGFsaXZlVGltZW91dElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh3c0tlZXBhbGl2ZVRpbWVvdXRJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIG9uVW5iaW5kTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgICAgICAgICAgaWYoZGF0YS5zZXNzaW9uX2lkID09IHJlcXVlc3Quc2Vzc2lvbl9pZCAmJiBkYXRhLnRyYW5zYWN0aW9uID09IHJlcXVlc3QudHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdW5iaW5kV2ViU29ja2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgIGdhdGV3YXlDYWxsYmFja3MuZGVzdHJveWVkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBvblVuYmluZEVycm9yID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB1bmJpbmRXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoXCJGYWlsZWQgdG8gZGVzdHJveSB0aGUgZ2F0ZXdheTogSXMgdGhlIGdhdGV3YXkgZG93bj9cIik7XG4gICAgICAgICAgICAgICAgZ2F0ZXdheUNhbGxiYWNrcy5kZXN0cm95ZWQoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvblVuYmluZE1lc3NhZ2UpO1xuICAgICAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBvblVuYmluZEVycm9yKTtcblxuICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgSmFudXMuYWpheCh7XG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IHNlcnZlciArIFwiL1wiICsgc2Vzc2lvbklkLFxuICAgICAgICAgICAgYXN5bmM6IGFzeW5jUmVxdWVzdCxcdC8vIFNvbWV0aW1lcyB3ZSBuZWVkIGZhbHNlIGhlcmUsIG9yIGRlc3Ryb3lpbmcgaW4gb25iZWZvcmV1bmxvYWQgd29uJ3Qgd29ya1xuICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihqc29uKSB7XG4gICAgICAgICAgICAgICAgSmFudXMubG9nKFwiRGVzdHJveWVkIHNlc3Npb246XCIpO1xuICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnKGpzb24pO1xuICAgICAgICAgICAgICAgIHNlc3Npb25JZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgY29ubmVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYoanNvbltcImphbnVzXCJdICE9PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcdC8vIEZJWE1FXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgZ2F0ZXdheUNhbGxiYWNrcy5kZXN0cm95ZWQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oWE1MSHR0cFJlcXVlc3QsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgSmFudXMuZXJyb3IodGV4dFN0YXR1cyArIFwiOiBcIiArIGVycm9yVGhyb3duKTtcdC8vIEZJWE1FXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgZXZlcnl0aGluZyBhbnl3YXlcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgZ2F0ZXdheUNhbGxiYWNrcy5kZXN0cm95ZWQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCJcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gY3JlYXRlIGEgcGx1Z2luIGhhbmRsZVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUhhbmRsZShjYWxsYmFja3MpIHtcbiAgICAgICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzIHx8IHt9O1xuICAgICAgICBjYWxsYmFja3Muc3VjY2VzcyA9ICh0eXBlb2YgY2FsbGJhY2tzLnN1Y2Nlc3MgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5zdWNjZXNzIDogSmFudXMubm9vcDtcbiAgICAgICAgY2FsbGJhY2tzLmVycm9yID0gKHR5cGVvZiBjYWxsYmFja3MuZXJyb3IgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5lcnJvciA6IEphbnVzLm5vb3A7XG4gICAgICAgIGNhbGxiYWNrcy5jb25zZW50RGlhbG9nID0gKHR5cGVvZiBjYWxsYmFja3MuY29uc2VudERpYWxvZyA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmNvbnNlbnREaWFsb2cgOiBKYW51cy5ub29wO1xuICAgICAgICBjYWxsYmFja3MubWVkaWFTdGF0ZSA9ICh0eXBlb2YgY2FsbGJhY2tzLm1lZGlhU3RhdGUgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5tZWRpYVN0YXRlIDogSmFudXMubm9vcDtcbiAgICAgICAgY2FsbGJhY2tzLndlYnJ0Y1N0YXRlID0gKHR5cGVvZiBjYWxsYmFja3Mud2VicnRjU3RhdGUgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy53ZWJydGNTdGF0ZSA6IEphbnVzLm5vb3A7XG4gICAgICAgIGNhbGxiYWNrcy5zbG93TGluayA9ICh0eXBlb2YgY2FsbGJhY2tzLnNsb3dMaW5rID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Muc2xvd0xpbmsgOiBKYW51cy5ub29wO1xuICAgICAgICBjYWxsYmFja3Mub25tZXNzYWdlID0gKHR5cGVvZiBjYWxsYmFja3Mub25tZXNzYWdlID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Mub25tZXNzYWdlIDogSmFudXMubm9vcDtcbiAgICAgICAgY2FsbGJhY2tzLm9ubG9jYWxzdHJlYW0gPSAodHlwZW9mIGNhbGxiYWNrcy5vbmxvY2Fsc3RyZWFtID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Mub25sb2NhbHN0cmVhbSA6IEphbnVzLm5vb3A7XG4gICAgICAgIGNhbGxiYWNrcy5vbnJlbW90ZXN0cmVhbSA9ICh0eXBlb2YgY2FsbGJhY2tzLm9ucmVtb3Rlc3RyZWFtID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Mub25yZW1vdGVzdHJlYW0gOiBKYW51cy5ub29wO1xuICAgICAgICBjYWxsYmFja3Mub25kYXRhID0gKHR5cGVvZiBjYWxsYmFja3Mub25kYXRhID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Mub25kYXRhIDogSmFudXMubm9vcDtcbiAgICAgICAgY2FsbGJhY2tzLm9uZGF0YW9wZW4gPSAodHlwZW9mIGNhbGxiYWNrcy5vbmRhdGFvcGVuID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Mub25kYXRhb3BlbiA6IEphbnVzLm5vb3A7XG4gICAgICAgIGNhbGxiYWNrcy5vbmNsZWFudXAgPSAodHlwZW9mIGNhbGxiYWNrcy5vbmNsZWFudXAgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5vbmNsZWFudXAgOiBKYW51cy5ub29wO1xuICAgICAgICBjYWxsYmFja3Mub25kZXRhY2hlZCA9ICh0eXBlb2YgY2FsbGJhY2tzLm9uZGV0YWNoZWQgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5vbmRldGFjaGVkIDogSmFudXMubm9vcDtcbiAgICAgICAgaWYoIWNvbm5lY3RlZCkge1xuICAgICAgICAgICAgSmFudXMud2FybihcIklzIHRoZSBnYXRld2F5IGRvd24/IChjb25uZWN0ZWQ9ZmFsc2UpXCIpO1xuICAgICAgICAgICAgY2FsbGJhY2tzLmVycm9yKFwiSXMgdGhlIGdhdGV3YXkgZG93bj8gKGNvbm5lY3RlZD1mYWxzZSlcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBsdWdpbiA9IGNhbGxiYWNrcy5wbHVnaW47XG4gICAgICAgIGlmKHBsdWdpbiA9PT0gdW5kZWZpbmVkIHx8IHBsdWdpbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgSmFudXMuZXJyb3IoXCJJbnZhbGlkIHBsdWdpblwiKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihcIkludmFsaWQgcGx1Z2luXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0cmFuc2FjdGlvbiA9IHJhbmRvbVN0cmluZygxMik7XG4gICAgICAgIHZhciByZXF1ZXN0ID0geyBcImphbnVzXCI6IFwiYXR0YWNoXCIsIFwicGx1Z2luXCI6IHBsdWdpbiwgXCJ0cmFuc2FjdGlvblwiOiB0cmFuc2FjdGlvbiB9O1xuICAgICAgICBpZih0b2tlbiAhPT0gbnVsbCAmJiB0b2tlbiAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmVxdWVzdFtcInRva2VuXCJdID0gdG9rZW47XG4gICAgICAgIGlmKGFwaXNlY3JldCAhPT0gbnVsbCAmJiBhcGlzZWNyZXQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlcXVlc3RbXCJhcGlzZWNyZXRcIl0gPSBhcGlzZWNyZXQ7XG4gICAgICAgIGlmKHdlYnNvY2tldHMpIHtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uc1t0cmFuc2FjdGlvbl0gPSBmdW5jdGlvbihqc29uKSB7XG4gICAgICAgICAgICAgICAgSmFudXMuZGVidWcoanNvbik7XG4gICAgICAgICAgICAgICAgaWYoanNvbltcImphbnVzXCJdICE9PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcdC8vIEZJWE1FXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlSWQgPSBqc29uLmRhdGFbXCJpZFwiXTtcbiAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJDcmVhdGVkIGhhbmRsZTogXCIgKyBoYW5kbGVJZCk7XG4gICAgICAgICAgICAgICAgdmFyIHBsdWdpbkhhbmRsZSA9XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb24gOiB0aGF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luIDogcGx1Z2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgOiBoYW5kbGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlYnJ0Y1N0dWZmIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteVN0cmVhbSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtRXh0ZXJuYWwgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVTdHJlYW0gOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15U2RwIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYyA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0bWZTZW5kZXIgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWNrbGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljZURvbmUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZHBTZW50IDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9sdW1lIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0cmF0ZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBic25vdyA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJzYmVmb3JlIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHNub3cgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0c2JlZm9yZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRJZCA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaGFuZGxlSWQ7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRQbHVnaW4gOiBmdW5jdGlvbigpIHsgcmV0dXJuIHBsdWdpbjsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFZvbHVtZSA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2V0Vm9sdW1lKGhhbmRsZUlkKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXVkaW9NdXRlZCA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNNdXRlZChoYW5kbGVJZCwgZmFsc2UpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbXV0ZUF1ZGlvIDogZnVuY3Rpb24oKSB7IHJldHVybiBtdXRlKGhhbmRsZUlkLCBmYWxzZSwgdHJ1ZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB1bm11dGVBdWRpbyA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbXV0ZShoYW5kbGVJZCwgZmFsc2UsIGZhbHNlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVmlkZW9NdXRlZCA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNNdXRlZChoYW5kbGVJZCwgdHJ1ZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtdXRlVmlkZW8gOiBmdW5jdGlvbigpIHsgcmV0dXJuIG11dGUoaGFuZGxlSWQsIHRydWUsIHRydWUpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5tdXRlVmlkZW8gOiBmdW5jdGlvbigpIHsgcmV0dXJuIG11dGUoaGFuZGxlSWQsIHRydWUsIGZhbHNlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldEJpdHJhdGUgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGdldEJpdHJhdGUoaGFuZGxlSWQpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBzZW5kTWVzc2FnZShoYW5kbGVJZCwgY2FsbGJhY2tzKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgOiBmdW5jdGlvbihjYWxsYmFja3MpIHsgc2VuZERhdGEoaGFuZGxlSWQsIGNhbGxiYWNrcyk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkdG1mIDogZnVuY3Rpb24oY2FsbGJhY2tzKSB7IHNlbmREdG1mKGhhbmRsZUlkLCBjYWxsYmFja3MpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc2VudERpYWxvZyA6IGNhbGxiYWNrcy5jb25zZW50RGlhbG9nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFTdGF0ZSA6IGNhbGxiYWNrcy5tZWRpYVN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2VicnRjU3RhdGUgOiBjYWxsYmFja3Mud2VicnRjU3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzbG93TGluayA6IGNhbGxiYWNrcy5zbG93TGluayxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ubWVzc2FnZSA6IGNhbGxiYWNrcy5vbm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVPZmZlciA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBwcmVwYXJlV2VicnRjKGhhbmRsZUlkLCBjYWxsYmFja3MpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQW5zd2VyIDogZnVuY3Rpb24oY2FsbGJhY2tzKSB7IHByZXBhcmVXZWJydGMoaGFuZGxlSWQsIGNhbGxiYWNrcyk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVSZW1vdGVKc2VwIDogZnVuY3Rpb24oY2FsbGJhY2tzKSB7IHByZXBhcmVXZWJydGNQZWVyKGhhbmRsZUlkLCBjYWxsYmFja3MpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb25sb2NhbHN0cmVhbSA6IGNhbGxiYWNrcy5vbmxvY2Fsc3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25yZW1vdGVzdHJlYW0gOiBjYWxsYmFja3Mub25yZW1vdGVzdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmRhdGEgOiBjYWxsYmFja3Mub25kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25kYXRhb3BlbiA6IGNhbGxiYWNrcy5vbmRhdGFvcGVuLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25jbGVhbnVwIDogY2FsbGJhY2tzLm9uY2xlYW51cCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uZGV0YWNoZWQgOiBjYWxsYmFja3Mub25kZXRhY2hlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmd1cCA6IGZ1bmN0aW9uKHNlbmRSZXF1ZXN0KSB7IGNsZWFudXBXZWJydGMoaGFuZGxlSWQsIHNlbmRSZXF1ZXN0ID09PSB0cnVlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFjaCA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBkZXN0cm95SGFuZGxlKGhhbmRsZUlkLCBjYWxsYmFja3MpOyB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXSA9IHBsdWdpbkhhbmRsZTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3VjY2VzcyhwbHVnaW5IYW5kbGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcXVlc3RbXCJzZXNzaW9uX2lkXCJdID0gc2Vzc2lvbklkO1xuICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgSmFudXMuYWpheCh7XG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IHNlcnZlciArIFwiL1wiICsgc2Vzc2lvbklkLFxuICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihqc29uKSB7XG4gICAgICAgICAgICAgICAgSmFudXMuZGVidWcoanNvbik7XG4gICAgICAgICAgICAgICAgaWYoanNvbltcImphbnVzXCJdICE9PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcdC8vIEZJWE1FXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlSWQgPSBqc29uLmRhdGFbXCJpZFwiXTtcbiAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJDcmVhdGVkIGhhbmRsZTogXCIgKyBoYW5kbGVJZCk7XG4gICAgICAgICAgICAgICAgdmFyIHBsdWdpbkhhbmRsZSA9XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb24gOiB0aGF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luIDogcGx1Z2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgOiBoYW5kbGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdlYnJ0Y1N0dWZmIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteVN0cmVhbSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtRXh0ZXJuYWwgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVTdHJlYW0gOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG15U2RwIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYyA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR0bWZTZW5kZXIgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWNrbGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljZURvbmUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZHBTZW50IDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9sdW1lIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0cmF0ZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBic25vdyA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJzYmVmb3JlIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHNub3cgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0c2JlZm9yZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRJZCA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaGFuZGxlSWQ7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRQbHVnaW4gOiBmdW5jdGlvbigpIHsgcmV0dXJuIHBsdWdpbjsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFZvbHVtZSA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZ2V0Vm9sdW1lKGhhbmRsZUlkKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQXVkaW9NdXRlZCA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNNdXRlZChoYW5kbGVJZCwgZmFsc2UpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbXV0ZUF1ZGlvIDogZnVuY3Rpb24oKSB7IHJldHVybiBtdXRlKGhhbmRsZUlkLCBmYWxzZSwgdHJ1ZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB1bm11dGVBdWRpbyA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbXV0ZShoYW5kbGVJZCwgZmFsc2UsIGZhbHNlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVmlkZW9NdXRlZCA6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNNdXRlZChoYW5kbGVJZCwgdHJ1ZSk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtdXRlVmlkZW8gOiBmdW5jdGlvbigpIHsgcmV0dXJuIG11dGUoaGFuZGxlSWQsIHRydWUsIHRydWUpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5tdXRlVmlkZW8gOiBmdW5jdGlvbigpIHsgcmV0dXJuIG11dGUoaGFuZGxlSWQsIHRydWUsIGZhbHNlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldEJpdHJhdGUgOiBmdW5jdGlvbigpIHsgcmV0dXJuIGdldEJpdHJhdGUoaGFuZGxlSWQpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZCA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBzZW5kTWVzc2FnZShoYW5kbGVJZCwgY2FsbGJhY2tzKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgOiBmdW5jdGlvbihjYWxsYmFja3MpIHsgc2VuZERhdGEoaGFuZGxlSWQsIGNhbGxiYWNrcyk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkdG1mIDogZnVuY3Rpb24oY2FsbGJhY2tzKSB7IHNlbmREdG1mKGhhbmRsZUlkLCBjYWxsYmFja3MpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc2VudERpYWxvZyA6IGNhbGxiYWNrcy5jb25zZW50RGlhbG9nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFTdGF0ZSA6IGNhbGxiYWNrcy5tZWRpYVN0YXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2VicnRjU3RhdGUgOiBjYWxsYmFja3Mud2VicnRjU3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzbG93TGluayA6IGNhbGxiYWNrcy5zbG93TGluayxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ubWVzc2FnZSA6IGNhbGxiYWNrcy5vbm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVPZmZlciA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBwcmVwYXJlV2VicnRjKGhhbmRsZUlkLCBjYWxsYmFja3MpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQW5zd2VyIDogZnVuY3Rpb24oY2FsbGJhY2tzKSB7IHByZXBhcmVXZWJydGMoaGFuZGxlSWQsIGNhbGxiYWNrcyk7IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVSZW1vdGVKc2VwIDogZnVuY3Rpb24oY2FsbGJhY2tzKSB7IHByZXBhcmVXZWJydGNQZWVyKGhhbmRsZUlkLCBjYWxsYmFja3MpOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb25sb2NhbHN0cmVhbSA6IGNhbGxiYWNrcy5vbmxvY2Fsc3RyZWFtLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25yZW1vdGVzdHJlYW0gOiBjYWxsYmFja3Mub25yZW1vdGVzdHJlYW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmRhdGEgOiBjYWxsYmFja3Mub25kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25kYXRhb3BlbiA6IGNhbGxiYWNrcy5vbmRhdGFvcGVuLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25jbGVhbnVwIDogY2FsbGJhY2tzLm9uY2xlYW51cCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uZGV0YWNoZWQgOiBjYWxsYmFja3Mub25kZXRhY2hlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmd1cCA6IGZ1bmN0aW9uKHNlbmRSZXF1ZXN0KSB7IGNsZWFudXBXZWJydGMoaGFuZGxlSWQsIHNlbmRSZXF1ZXN0ID09PSB0cnVlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFjaCA6IGZ1bmN0aW9uKGNhbGxiYWNrcykgeyBkZXN0cm95SGFuZGxlKGhhbmRsZUlkLCBjYWxsYmFja3MpOyB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXSA9IHBsdWdpbkhhbmRsZTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3VjY2VzcyhwbHVnaW5IYW5kbGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihYTUxIdHRwUmVxdWVzdCwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICBKYW51cy5lcnJvcih0ZXh0U3RhdHVzICsgXCI6IFwiICsgZXJyb3JUaHJvd24pO1x0Ly8gRklYTUVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCJcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gc2VuZCBhIG1lc3NhZ2VcbiAgICBmdW5jdGlvbiBzZW5kTWVzc2FnZShoYW5kbGVJZCwgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNhbGxiYWNrcyA9IGNhbGxiYWNrcyB8fCB7fTtcbiAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MgPSAodHlwZW9mIGNhbGxiYWNrcy5zdWNjZXNzID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Muc3VjY2VzcyA6IEphbnVzLm5vb3A7XG4gICAgICAgIGNhbGxiYWNrcy5lcnJvciA9ICh0eXBlb2YgY2FsbGJhY2tzLmVycm9yID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3MuZXJyb3IgOiBKYW51cy5ub29wO1xuICAgICAgICBpZighY29ubmVjdGVkKSB7XG4gICAgICAgICAgICBKYW51cy53YXJuKFwiSXMgdGhlIGdhdGV3YXkgZG93bj8gKGNvbm5lY3RlZD1mYWxzZSlcIik7XG4gICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoXCJJcyB0aGUgZ2F0ZXdheSBkb3duPyAoY29ubmVjdGVkPWZhbHNlKVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWVzc2FnZSA9IGNhbGxiYWNrcy5tZXNzYWdlO1xuICAgICAgICB2YXIganNlcCA9IGNhbGxiYWNrcy5qc2VwO1xuICAgICAgICB2YXIgdHJhbnNhY3Rpb24gPSByYW5kb21TdHJpbmcoMTIpO1xuICAgICAgICB2YXIgcmVxdWVzdCA9IHsgXCJqYW51c1wiOiBcIm1lc3NhZ2VcIiwgXCJib2R5XCI6IG1lc3NhZ2UsIFwidHJhbnNhY3Rpb25cIjogdHJhbnNhY3Rpb24gfTtcbiAgICAgICAgaWYodG9rZW4gIT09IG51bGwgJiYgdG9rZW4gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlcXVlc3RbXCJ0b2tlblwiXSA9IHRva2VuO1xuICAgICAgICBpZihhcGlzZWNyZXQgIT09IG51bGwgJiYgYXBpc2VjcmV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXF1ZXN0W1wiYXBpc2VjcmV0XCJdID0gYXBpc2VjcmV0O1xuICAgICAgICBpZihqc2VwICE9PSBudWxsICYmIGpzZXAgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlcXVlc3QuanNlcCA9IGpzZXA7XG4gICAgICAgIEphbnVzLmRlYnVnKFwiU2VuZGluZyBtZXNzYWdlIHRvIHBsdWdpbiAoaGFuZGxlPVwiICsgaGFuZGxlSWQgKyBcIik6XCIpO1xuICAgICAgICBKYW51cy5kZWJ1ZyhyZXF1ZXN0KTtcbiAgICAgICAgaWYod2Vic29ja2V0cykge1xuICAgICAgICAgICAgcmVxdWVzdFtcInNlc3Npb25faWRcIl0gPSBzZXNzaW9uSWQ7XG4gICAgICAgICAgICByZXF1ZXN0W1wiaGFuZGxlX2lkXCJdID0gaGFuZGxlSWQ7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbnNbdHJhbnNhY3Rpb25dID0gZnVuY3Rpb24oanNvbikge1xuICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnKFwiTWVzc2FnZSBzZW50IVwiKTtcbiAgICAgICAgICAgICAgICBKYW51cy5kZWJ1Zyhqc29uKTtcbiAgICAgICAgICAgICAgICBpZihqc29uW1wiamFudXNcIl0gPT09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGdvdCBhIHN1Y2Nlc3MsIG11c3QgaGF2ZSBiZWVuIGEgc3luY2hyb25vdXMgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBsdWdpbmRhdGEgPSBqc29uW1wicGx1Z2luZGF0YVwiXTtcbiAgICAgICAgICAgICAgICAgICAgaWYocGx1Z2luZGF0YSA9PT0gdW5kZWZpbmVkIHx8IHBsdWdpbmRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEphbnVzLndhcm4oXCJSZXF1ZXN0IHN1Y2NlZWRlZCwgYnV0IG1pc3NpbmcgcGx1Z2luZGF0YS4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgSmFudXMubG9nKFwiU3luY2hyb25vdXMgdHJhbnNhY3Rpb24gc3VjY2Vzc2Z1bCAoXCIgKyBwbHVnaW5kYXRhW1wicGx1Z2luXCJdICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHBsdWdpbmRhdGFbXCJkYXRhXCJdO1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5kZWJ1ZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoanNvbltcImphbnVzXCJdICE9PSBcImFja1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdCBhIHN1Y2Nlc3MgYW5kIG5vdCBhbiBhY2ssIG11c3QgYmUgYW4gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgaWYoanNvbltcImVycm9yXCJdICE9PSB1bmRlZmluZWQgJiYganNvbltcImVycm9yXCJdICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBKYW51cy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcdC8vIEZJWE1FXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoanNvbltcImVycm9yXCJdLmNvZGUgKyBcIiBcIiArIGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgSmFudXMuZXJyb3IoXCJVbmtub3duIGVycm9yXCIpO1x0Ly8gRklYTUVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihcIlVua25vd24gZXJyb3JcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBnb3QgaGVyZSwgdGhlIHBsdWdpbiBkZWNpZGVkIHRvIGhhbmRsZSB0aGUgcmVxdWVzdCBhc3luY2hyb25vdXNseVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgSmFudXMuYWpheCh7XG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IHNlcnZlciArIFwiL1wiICsgc2Vzc2lvbklkICsgXCIvXCIgKyBoYW5kbGVJZCxcbiAgICAgICAgICAgIGNhY2hlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oanNvbikge1xuICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnKFwiTWVzc2FnZSBzZW50IVwiKTtcbiAgICAgICAgICAgICAgICBKYW51cy5kZWJ1Zyhqc29uKTtcbiAgICAgICAgICAgICAgICBpZihqc29uW1wiamFudXNcIl0gPT09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGdvdCBhIHN1Y2Nlc3MsIG11c3QgaGF2ZSBiZWVuIGEgc3luY2hyb25vdXMgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBsdWdpbmRhdGEgPSBqc29uW1wicGx1Z2luZGF0YVwiXTtcbiAgICAgICAgICAgICAgICAgICAgaWYocGx1Z2luZGF0YSA9PT0gdW5kZWZpbmVkIHx8IHBsdWdpbmRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEphbnVzLndhcm4oXCJSZXF1ZXN0IHN1Y2NlZWRlZCwgYnV0IG1pc3NpbmcgcGx1Z2luZGF0YS4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgSmFudXMubG9nKFwiU3luY2hyb25vdXMgdHJhbnNhY3Rpb24gc3VjY2Vzc2Z1bCAoXCIgKyBwbHVnaW5kYXRhW1wicGx1Z2luXCJdICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHBsdWdpbmRhdGFbXCJkYXRhXCJdO1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5kZWJ1ZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoanNvbltcImphbnVzXCJdICE9PSBcImFja1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdCBhIHN1Y2Nlc3MgYW5kIG5vdCBhbiBhY2ssIG11c3QgYmUgYW4gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgaWYoanNvbltcImVycm9yXCJdICE9PSB1bmRlZmluZWQgJiYganNvbltcImVycm9yXCJdICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBKYW51cy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcdC8vIEZJWE1FXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoanNvbltcImVycm9yXCJdLmNvZGUgKyBcIiBcIiArIGpzb25bXCJlcnJvclwiXS5yZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgSmFudXMuZXJyb3IoXCJVbmtub3duIGVycm9yXCIpO1x0Ly8gRklYTUVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihcIlVua25vd24gZXJyb3JcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBnb3QgaGVyZSwgdGhlIHBsdWdpbiBkZWNpZGVkIHRvIGhhbmRsZSB0aGUgcmVxdWVzdCBhc3luY2hyb25vdXNseVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKFhNTEh0dHBSZXF1ZXN0LCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgICAgIEphbnVzLmVycm9yKHRleHRTdGF0dXMgKyBcIjogXCIgKyBlcnJvclRocm93bik7XHQvLyBGSVhNRVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcih0ZXh0U3RhdHVzICsgXCI6IFwiICsgZXJyb3JUaHJvd24pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBQcml2YXRlIG1ldGhvZCB0byBzZW5kIGEgdHJpY2tsZSBjYW5kaWRhdGVcbiAgICBmdW5jdGlvbiBzZW5kVHJpY2tsZUNhbmRpZGF0ZShoYW5kbGVJZCwgY2FuZGlkYXRlKSB7XG4gICAgICAgIGlmKCFjb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIEphbnVzLndhcm4oXCJJcyB0aGUgZ2F0ZXdheSBkb3duPyAoY29ubmVjdGVkPWZhbHNlKVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVxdWVzdCA9IHsgXCJqYW51c1wiOiBcInRyaWNrbGVcIiwgXCJjYW5kaWRhdGVcIjogY2FuZGlkYXRlLCBcInRyYW5zYWN0aW9uXCI6IHJhbmRvbVN0cmluZygxMikgfTtcbiAgICAgICAgaWYodG9rZW4gIT09IG51bGwgJiYgdG9rZW4gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlcXVlc3RbXCJ0b2tlblwiXSA9IHRva2VuO1xuICAgICAgICBpZihhcGlzZWNyZXQgIT09IG51bGwgJiYgYXBpc2VjcmV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXF1ZXN0W1wiYXBpc2VjcmV0XCJdID0gYXBpc2VjcmV0O1xuICAgICAgICBKYW51cy52ZGVidWcoXCJTZW5kaW5nIHRyaWNrbGUgY2FuZGlkYXRlIChoYW5kbGU9XCIgKyBoYW5kbGVJZCArIFwiKTpcIik7XG4gICAgICAgIEphbnVzLnZkZWJ1ZyhyZXF1ZXN0KTtcbiAgICAgICAgaWYod2Vic29ja2V0cykge1xuICAgICAgICAgICAgcmVxdWVzdFtcInNlc3Npb25faWRcIl0gPSBzZXNzaW9uSWQ7XG4gICAgICAgICAgICByZXF1ZXN0W1wiaGFuZGxlX2lkXCJdID0gaGFuZGxlSWQ7XG4gICAgICAgICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBKYW51cy5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogc2VydmVyICsgXCIvXCIgKyBzZXNzaW9uSWQgKyBcIi9cIiArIGhhbmRsZUlkLFxuICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihqc29uKSB7XG4gICAgICAgICAgICAgICAgSmFudXMudmRlYnVnKFwiQ2FuZGlkYXRlIHNlbnQhXCIpO1xuICAgICAgICAgICAgICAgIEphbnVzLnZkZWJ1Zyhqc29uKTtcbiAgICAgICAgICAgICAgICBpZihqc29uW1wiamFudXNcIl0gIT09IFwiYWNrXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgSmFudXMuZXJyb3IoXCJPb29wczogXCIgKyBqc29uW1wiZXJyb3JcIl0uY29kZSArIFwiIFwiICsganNvbltcImVycm9yXCJdLnJlYXNvbik7XHQvLyBGSVhNRVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihYTUxIdHRwUmVxdWVzdCwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICBKYW51cy5lcnJvcih0ZXh0U3RhdHVzICsgXCI6IFwiICsgZXJyb3JUaHJvd24pO1x0Ly8gRklYTUVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCJcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gc2VuZCBhIGRhdGEgY2hhbm5lbCBtZXNzYWdlXG4gICAgZnVuY3Rpb24gc2VuZERhdGEoaGFuZGxlSWQsIGNhbGxiYWNrcykge1xuICAgICAgICBjYWxsYmFja3MgPSBjYWxsYmFja3MgfHwge307XG4gICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzID0gKHR5cGVvZiBjYWxsYmFja3Muc3VjY2VzcyA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLnN1Y2Nlc3MgOiBKYW51cy5ub29wO1xuICAgICAgICBjYWxsYmFja3MuZXJyb3IgPSAodHlwZW9mIGNhbGxiYWNrcy5lcnJvciA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmVycm9yIDogSmFudXMubm9vcDtcbiAgICAgICAgdmFyIHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuICAgICAgICBpZihwbHVnaW5IYW5kbGUgPT09IG51bGwgfHwgcGx1Z2luSGFuZGxlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZiA9PT0gbnVsbCB8fCBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgSmFudXMud2FybihcIkludmFsaWQgaGFuZGxlXCIpO1xuICAgICAgICAgICAgY2FsbGJhY2tzLmVycm9yKFwiSW52YWxpZCBoYW5kbGVcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbmZpZyA9IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZjtcbiAgICAgICAgdmFyIHRleHQgPSBjYWxsYmFja3MudGV4dDtcbiAgICAgICAgaWYodGV4dCA9PT0gbnVsbCB8fCB0ZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIEphbnVzLndhcm4oXCJJbnZhbGlkIHRleHRcIik7XG4gICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoXCJJbnZhbGlkIHRleHRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgSmFudXMubG9nKFwiU2VuZGluZyBzdHJpbmcgb24gZGF0YSBjaGFubmVsOiBcIiArIHRleHQpO1xuICAgICAgICBjb25maWcuZGF0YUNoYW5uZWwuc2VuZCh0ZXh0KTtcbiAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MoKTtcbiAgICB9XG5cbiAgICAvLyBQcml2YXRlIG1ldGhvZCB0byBzZW5kIGEgRFRNRiB0b25lXG4gICAgZnVuY3Rpb24gc2VuZER0bWYoaGFuZGxlSWQsIGNhbGxiYWNrcykge1xuICAgICAgICBjYWxsYmFja3MgPSBjYWxsYmFja3MgfHwge307XG4gICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzID0gKHR5cGVvZiBjYWxsYmFja3Muc3VjY2VzcyA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLnN1Y2Nlc3MgOiBKYW51cy5ub29wO1xuICAgICAgICBjYWxsYmFja3MuZXJyb3IgPSAodHlwZW9mIGNhbGxiYWNrcy5lcnJvciA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmVycm9yIDogSmFudXMubm9vcDtcbiAgICAgICAgdmFyIHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuICAgICAgICBpZihwbHVnaW5IYW5kbGUgPT09IG51bGwgfHwgcGx1Z2luSGFuZGxlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZiA9PT0gbnVsbCB8fCBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgSmFudXMud2FybihcIkludmFsaWQgaGFuZGxlXCIpO1xuICAgICAgICAgICAgY2FsbGJhY2tzLmVycm9yKFwiSW52YWxpZCBoYW5kbGVcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbmZpZyA9IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZjtcbiAgICAgICAgaWYoY29uZmlnLmR0bWZTZW5kZXIgPT09IG51bGwgfHwgY29uZmlnLmR0bWZTZW5kZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBEVE1GIHNlbmRlciwgaWYgcG9zc2libGVcbiAgICAgICAgICAgIGlmKGNvbmZpZy5teVN0cmVhbSAhPT0gdW5kZWZpbmVkICYmIGNvbmZpZy5teVN0cmVhbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciB0cmFja3MgPSBjb25maWcubXlTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKTtcbiAgICAgICAgICAgICAgICBpZih0cmFja3MgIT09IG51bGwgJiYgdHJhY2tzICE9PSB1bmRlZmluZWQgJiYgdHJhY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2FsX2F1ZGlvX3RyYWNrID0gdHJhY2tzWzBdO1xuICAgICAgICAgICAgICAgICAgICBjb25maWcuZHRtZlNlbmRlciA9IGNvbmZpZy5wYy5jcmVhdGVEVE1GU2VuZGVyKGxvY2FsX2F1ZGlvX3RyYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgSmFudXMubG9nKFwiQ3JlYXRlZCBEVE1GIFNlbmRlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmR0bWZTZW5kZXIub250b25lY2hhbmdlID0gZnVuY3Rpb24odG9uZSkgeyBKYW51cy5kZWJ1ZyhcIlNlbnQgRFRNRiB0b25lOiBcIiArIHRvbmUudG9uZSk7IH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoY29uZmlnLmR0bWZTZW5kZXIgPT09IG51bGwgfHwgY29uZmlnLmR0bWZTZW5kZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIEphbnVzLndhcm4oXCJJbnZhbGlkIERUTUYgY29uZmlndXJhdGlvblwiKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoXCJJbnZhbGlkIERUTUYgY29uZmlndXJhdGlvblwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGR0bWYgPSBjYWxsYmFja3MuZHRtZjtcbiAgICAgICAgaWYoZHRtZiA9PT0gbnVsbCB8fCBkdG1mID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIEphbnVzLndhcm4oXCJJbnZhbGlkIERUTUYgcGFyYW1ldGVyc1wiKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihcIkludmFsaWQgRFRNRiBwYXJhbWV0ZXJzXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0b25lcyA9IGR0bWYudG9uZXM7XG4gICAgICAgIGlmKHRvbmVzID09PSBudWxsIHx8IHRvbmVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIEphbnVzLndhcm4oXCJJbnZhbGlkIERUTUYgc3RyaW5nXCIpO1xuICAgICAgICAgICAgY2FsbGJhY2tzLmVycm9yKFwiSW52YWxpZCBEVE1GIHN0cmluZ1wiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZHVyYXRpb24gPSBkdG1mLmR1cmF0aW9uO1xuICAgICAgICBpZihkdXJhdGlvbiA9PT0gbnVsbCB8fCBkdXJhdGlvbiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgZHVyYXRpb24gPSA1MDA7XHQvLyBXZSBjaG9vc2UgNTAwbXMgYXMgdGhlIGRlZmF1bHQgZHVyYXRpb24gZm9yIGEgdG9uZVxuICAgICAgICB2YXIgZ2FwID0gZHRtZi5nYXA7XG4gICAgICAgIGlmKGdhcCA9PT0gbnVsbCB8fCBnYXAgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGdhcCA9IDUwO1x0Ly8gV2UgY2hvb3NlIDUwbXMgYXMgdGhlIGRlZmF1bHQgZ2FwIGJldHdlZW4gdG9uZXNcbiAgICAgICAgSmFudXMuZGVidWcoXCJTZW5kaW5nIERUTUYgc3RyaW5nIFwiICsgdG9uZXMgKyBcIiAoZHVyYXRpb24gXCIgKyBkdXJhdGlvbiArIFwibXMsIGdhcCBcIiArIGdhcCArIFwibXMpXCIpO1xuICAgICAgICBjb25maWcuZHRtZlNlbmRlci5pbnNlcnREVE1GKHRvbmVzLCBkdXJhdGlvbiwgZ2FwKTtcbiAgICB9XG5cbiAgICAvLyBQcml2YXRlIG1ldGhvZCB0byBkZXN0cm95IGEgcGx1Z2luIGhhbmRsZVxuICAgIGZ1bmN0aW9uIGRlc3Ryb3lIYW5kbGUoaGFuZGxlSWQsIGNhbGxiYWNrcykge1xuICAgICAgICBjYWxsYmFja3MgPSBjYWxsYmFja3MgfHwge307XG4gICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzID0gKHR5cGVvZiBjYWxsYmFja3Muc3VjY2VzcyA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLnN1Y2Nlc3MgOiBKYW51cy5ub29wO1xuICAgICAgICBjYWxsYmFja3MuZXJyb3IgPSAodHlwZW9mIGNhbGxiYWNrcy5lcnJvciA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmVycm9yIDogSmFudXMubm9vcDtcbiAgICAgICAgdmFyIGFzeW5jUmVxdWVzdCA9IHRydWU7XG4gICAgICAgIGlmKGNhbGxiYWNrcy5hc3luY1JlcXVlc3QgIT09IHVuZGVmaW5lZCAmJiBjYWxsYmFja3MuYXN5bmNSZXF1ZXN0ICE9PSBudWxsKVxuICAgICAgICAgICAgYXN5bmNSZXF1ZXN0ID0gKGNhbGxiYWNrcy5hc3luY1JlcXVlc3QgPT09IHRydWUpO1xuICAgICAgICBKYW51cy5sb2coXCJEZXN0cm95aW5nIGhhbmRsZSBcIiArIGhhbmRsZUlkICsgXCIgKHN5bmM9XCIgKyBhc3luY1JlcXVlc3QgKyBcIilcIik7XG4gICAgICAgIGNsZWFudXBXZWJydGMoaGFuZGxlSWQpO1xuICAgICAgICBpZighY29ubmVjdGVkKSB7XG4gICAgICAgICAgICBKYW51cy53YXJuKFwiSXMgdGhlIGdhdGV3YXkgZG93bj8gKGNvbm5lY3RlZD1mYWxzZSlcIik7XG4gICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoXCJJcyB0aGUgZ2F0ZXdheSBkb3duPyAoY29ubmVjdGVkPWZhbHNlKVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVxdWVzdCA9IHsgXCJqYW51c1wiOiBcImRldGFjaFwiLCBcInRyYW5zYWN0aW9uXCI6IHJhbmRvbVN0cmluZygxMikgfTtcbiAgICAgICAgaWYodG9rZW4gIT09IG51bGwgJiYgdG9rZW4gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlcXVlc3RbXCJ0b2tlblwiXSA9IHRva2VuO1xuICAgICAgICBpZihhcGlzZWNyZXQgIT09IG51bGwgJiYgYXBpc2VjcmV0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXF1ZXN0W1wiYXBpc2VjcmV0XCJdID0gYXBpc2VjcmV0O1xuICAgICAgICBpZih3ZWJzb2NrZXRzKSB7XG4gICAgICAgICAgICByZXF1ZXN0W1wic2Vzc2lvbl9pZFwiXSA9IHNlc3Npb25JZDtcbiAgICAgICAgICAgIHJlcXVlc3RbXCJoYW5kbGVfaWRcIl0gPSBoYW5kbGVJZDtcbiAgICAgICAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVxdWVzdCkpO1xuICAgICAgICAgICAgZGVsZXRlIHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuICAgICAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBKYW51cy5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogc2VydmVyICsgXCIvXCIgKyBzZXNzaW9uSWQgKyBcIi9cIiArIGhhbmRsZUlkLFxuICAgICAgICAgICAgYXN5bmM6IGFzeW5jUmVxdWVzdCxcdC8vIFNvbWV0aW1lcyB3ZSBuZWVkIGZhbHNlIGhlcmUsIG9yIGRlc3Ryb3lpbmcgaW4gb25iZWZvcmV1bmxvYWQgd29uJ3Qgd29ya1xuICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihqc29uKSB7XG4gICAgICAgICAgICAgICAgSmFudXMubG9nKFwiRGVzdHJveWVkIGhhbmRsZTpcIik7XG4gICAgICAgICAgICAgICAgSmFudXMuZGVidWcoanNvbik7XG4gICAgICAgICAgICAgICAgaWYoanNvbltcImphbnVzXCJdICE9PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5lcnJvcihcIk9vb3BzOiBcIiArIGpzb25bXCJlcnJvclwiXS5jb2RlICsgXCIgXCIgKyBqc29uW1wiZXJyb3JcIl0ucmVhc29uKTtcdC8vIEZJWE1FXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3VjY2VzcygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihYTUxIdHRwUmVxdWVzdCwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICBKYW51cy5lcnJvcih0ZXh0U3RhdHVzICsgXCI6IFwiICsgZXJyb3JUaHJvd24pO1x0Ly8gRklYTUVcbiAgICAgICAgICAgICAgICAvLyBXZSBjbGVhbnVwIGFueXdheVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3VjY2VzcygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBXZWJSVEMgc3R1ZmZcbiAgICBmdW5jdGlvbiBzdHJlYW1zRG9uZShoYW5kbGVJZCwganNlcCwgbWVkaWEsIGNhbGxiYWNrcywgc3RyZWFtKSB7XG4gICAgICAgIHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXTtcbiAgICAgICAgaWYocGx1Z2luSGFuZGxlID09PSBudWxsIHx8IHBsdWdpbkhhbmRsZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmYgPT09IG51bGwgfHwgcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIEphbnVzLndhcm4oXCJJbnZhbGlkIGhhbmRsZVwiKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihcIkludmFsaWQgaGFuZGxlXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG4gICAgICAgIEphbnVzLmRlYnVnKFwic3RyZWFtc0RvbmU6XCIsIHN0cmVhbSk7XG4gICAgICAgIGNvbmZpZy5teVN0cmVhbSA9IHN0cmVhbTtcbiAgICAgICAgdmFyIHBjX2NvbmZpZyA9IHtcImljZVNlcnZlcnNcIjogaWNlU2VydmVycywgXCJpY2VUcmFuc3BvcnRQb2xpY3lcIjogaWNlVHJhbnNwb3J0UG9saWN5fTtcbiAgICAgICAgLy9+IHZhciBwY19jb25zdHJhaW50cyA9IHsnbWFuZGF0b3J5JzogeydNb3pEb250T2ZmZXJEYXRhQ2hhbm5lbCc6dHJ1ZX19O1xuICAgICAgICB2YXIgcGNfY29uc3RyYWludHMgPSB7XG4gICAgICAgICAgICBcIm9wdGlvbmFsXCI6IFt7XCJEdGxzU3J0cEtleUFncmVlbWVudFwiOiB0cnVlfV1cbiAgICAgICAgfTtcbiAgICAgICAgaWYoaXB2NlN1cHBvcnQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIC8vIEZJWE1FIFRoaXMgaXMgb25seSBzdXBwb3J0ZWQgaW4gQ2hyb21lIHJpZ2h0IG5vd1xuICAgICAgICAgICAgLy8gRm9yIHN1cHBvcnQgaW4gRmlyZWZveCB0cmFjayB0aGlzOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD03OTcyNjJcbiAgICAgICAgICAgIHBjX2NvbnN0cmFpbnRzLm9wdGlvbmFsLnB1c2goe1wiZ29vZ0lQdjZcIjp0cnVlfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoYWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSBcImVkZ2VcIikge1xuICAgICAgICAgICAgLy8gVGhpcyBpcyBFZGdlLCBlbmFibGUgQlVORExFIGV4cGxpY2l0bHlcbiAgICAgICAgICAgIHBjX2NvbmZpZy5idW5kbGVQb2xpY3kgPSBcIm1heC1idW5kbGVcIjtcbiAgICAgICAgfVxuICAgICAgICBKYW51cy5sb2coXCJDcmVhdGluZyBQZWVyQ29ubmVjdGlvblwiKTtcbiAgICAgICAgSmFudXMuZGVidWcocGNfY29uc3RyYWludHMpO1xuICAgICAgICBjb25maWcucGMgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24ocGNfY29uZmlnLCBwY19jb25zdHJhaW50cyk7XG4gICAgICAgIEphbnVzLmRlYnVnKGNvbmZpZy5wYyk7XG4gICAgICAgIGlmKGNvbmZpZy5wYy5nZXRTdGF0cykge1x0Ly8gRklYTUVcbiAgICAgICAgICAgIGNvbmZpZy52b2x1bWUudmFsdWUgPSAwO1xuICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUudmFsdWUgPSBcIjAga2JpdHMvc2VjXCI7XG4gICAgICAgIH1cbiAgICAgICAgSmFudXMubG9nKFwiUHJlcGFyaW5nIGxvY2FsIFNEUCBhbmQgZ2F0aGVyaW5nIGNhbmRpZGF0ZXMgKHRyaWNrbGU9XCIgKyBjb25maWcudHJpY2tsZSArIFwiKVwiKTtcbiAgICAgICAgY29uZmlnLnBjLm9uaWNlY2FuZGlkYXRlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5jYW5kaWRhdGUgPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIChhZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT09ICdlZGdlJyAmJiBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlLmluZGV4T2YoJ2VuZE9mQ2FuZGlkYXRlcycpID4gMCkpIHtcbiAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJFbmQgb2YgY2FuZGlkYXRlcy5cIik7XG4gICAgICAgICAgICAgICAgY29uZmlnLmljZURvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmKGNvbmZpZy50cmlja2xlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdGlmeSBlbmQgb2YgY2FuZGlkYXRlc1xuICAgICAgICAgICAgICAgICAgICBzZW5kVHJpY2tsZUNhbmRpZGF0ZShoYW5kbGVJZCwge1wiY29tcGxldGVkXCI6IHRydWV9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBObyB0cmlja2xlLCB0aW1lIHRvIHNlbmQgdGhlIGNvbXBsZXRlIFNEUCAoaW5jbHVkaW5nIGFsbCBjYW5kaWRhdGVzKVxuICAgICAgICAgICAgICAgICAgICBzZW5kU0RQKGhhbmRsZUlkLCBjYWxsYmFja3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSlNPTi5zdHJpbmdpZnkgZG9lc24ndCB3b3JrIG9uIHNvbWUgV2ViUlRDIG9iamVjdHMgYW55bW9yZVxuICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDY3MzY2XG4gICAgICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgXCJjYW5kaWRhdGVcIjogZXZlbnQuY2FuZGlkYXRlLmNhbmRpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJzZHBNaWRcIjogZXZlbnQuY2FuZGlkYXRlLnNkcE1pZCxcbiAgICAgICAgICAgICAgICAgICAgXCJzZHBNTGluZUluZGV4XCI6IGV2ZW50LmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZihjb25maWcudHJpY2tsZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTZW5kIGNhbmRpZGF0ZVxuICAgICAgICAgICAgICAgICAgICBzZW5kVHJpY2tsZUNhbmRpZGF0ZShoYW5kbGVJZCwgY2FuZGlkYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmKHN0cmVhbSAhPT0gbnVsbCAmJiBzdHJlYW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgSmFudXMubG9nKCdBZGRpbmcgbG9jYWwgc3RyZWFtJyk7XG4gICAgICAgICAgICBjb25maWcucGMuYWRkU3RyZWFtKHN0cmVhbSk7XG4gICAgICAgICAgICBwbHVnaW5IYW5kbGUub25sb2NhbHN0cmVhbShzdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5wYy5vbmFkZHN0cmVhbSA9IGZ1bmN0aW9uKHJlbW90ZVN0cmVhbSkge1xuICAgICAgICAgICAgSmFudXMubG9nKFwiSGFuZGxpbmcgUmVtb3RlIFN0cmVhbVwiKTtcbiAgICAgICAgICAgIEphbnVzLmRlYnVnKHJlbW90ZVN0cmVhbSk7XG4gICAgICAgICAgICBjb25maWcucmVtb3RlU3RyZWFtID0gcmVtb3RlU3RyZWFtO1xuICAgICAgICAgICAgcGx1Z2luSGFuZGxlLm9ucmVtb3Rlc3RyZWFtKHJlbW90ZVN0cmVhbS5zdHJlYW0pO1xuICAgICAgICB9O1xuICAgICAgICAvLyBBbnkgZGF0YSBjaGFubmVsIHRvIGNyZWF0ZT9cbiAgICAgICAgaWYoaXNEYXRhRW5hYmxlZChtZWRpYSkpIHtcbiAgICAgICAgICAgIEphbnVzLmxvZyhcIkNyZWF0aW5nIGRhdGEgY2hhbm5lbFwiKTtcbiAgICAgICAgICAgIHZhciBvbkRhdGFDaGFubmVsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgSmFudXMubG9nKCdSZWNlaXZlZCBtZXNzYWdlIG9uIGRhdGEgY2hhbm5lbDogJyArIGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgIHBsdWdpbkhhbmRsZS5vbmRhdGEoZXZlbnQuZGF0YSk7XHQvLyBGSVhNRVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9uRGF0YUNoYW5uZWxTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBkY1N0YXRlID0gY29uZmlnLmRhdGFDaGFubmVsICE9PSBudWxsID8gY29uZmlnLmRhdGFDaGFubmVsLnJlYWR5U3RhdGUgOiBcIm51bGxcIjtcbiAgICAgICAgICAgICAgICBKYW51cy5sb2coJ1N0YXRlIGNoYW5nZSBvbiBkYXRhIGNoYW5uZWw6ICcgKyBkY1N0YXRlKTtcbiAgICAgICAgICAgICAgICBpZihkY1N0YXRlID09PSAnb3BlbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luSGFuZGxlLm9uZGF0YW9wZW4oKTtcdC8vIEZJWE1FXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9uRGF0YUNoYW5uZWxFcnJvciA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgSmFudXMuZXJyb3IoJ0dvdCBlcnJvciBvbiBkYXRhIGNoYW5uZWw6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFVudGlsIHdlIGltcGxlbWVudCB0aGUgcHJveHlpbmcgb2Ygb3BlbiByZXF1ZXN0cyB3aXRoaW4gdGhlIEphbnVzIGNvcmUsIHdlIG9wZW4gYSBjaGFubmVsIG91cnNlbHZlcyB3aGF0ZXZlciB0aGUgY2FzZVxuICAgICAgICAgICAgY29uZmlnLmRhdGFDaGFubmVsID0gY29uZmlnLnBjLmNyZWF0ZURhdGFDaGFubmVsKFwiSmFudXNEYXRhQ2hhbm5lbFwiLCB7b3JkZXJlZDpmYWxzZX0pO1x0Ly8gRklYTUUgQWRkIG9wdGlvbnMgKG9yZGVyZWQsIG1heFJldHJhbnNtaXRzLCBldGMuKVxuICAgICAgICAgICAgY29uZmlnLmRhdGFDaGFubmVsLm9ubWVzc2FnZSA9IG9uRGF0YUNoYW5uZWxNZXNzYWdlO1xuICAgICAgICAgICAgY29uZmlnLmRhdGFDaGFubmVsLm9ub3BlbiA9IG9uRGF0YUNoYW5uZWxTdGF0ZUNoYW5nZTtcbiAgICAgICAgICAgIGNvbmZpZy5kYXRhQ2hhbm5lbC5vbmNsb3NlID0gb25EYXRhQ2hhbm5lbFN0YXRlQ2hhbmdlO1xuICAgICAgICAgICAgY29uZmlnLmRhdGFDaGFubmVsLm9uZXJyb3IgPSBvbkRhdGFDaGFubmVsRXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3JlYXRlIG9mZmVyL2Fuc3dlciBub3dcbiAgICAgICAgaWYoanNlcCA9PT0gbnVsbCB8fCBqc2VwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNyZWF0ZU9mZmVyKGhhbmRsZUlkLCBtZWRpYSwgY2FsbGJhY2tzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKGFkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gXCJlZGdlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIEVkZ2UsIGFkZCBhbiBhPWVuZC1vZi1jYW5kaWRhdGVzIGF0IHRoZSBlbmRcbiAgICAgICAgICAgICAgICBqc2VwLnNkcCArPSBcImE9ZW5kLW9mLWNhbmRpZGF0ZXNcXHJcXG5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmZpZy5wYy5zZXRSZW1vdGVEZXNjcmlwdGlvbihcbiAgICAgICAgICAgICAgICBuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKGpzZXApLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJSZW1vdGUgZGVzY3JpcHRpb24gYWNjZXB0ZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVBbnN3ZXIoaGFuZGxlSWQsIG1lZGlhLCBjYWxsYmFja3MpO1xuICAgICAgICAgICAgICAgIH0sIGNhbGxiYWNrcy5lcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcmVwYXJlV2VicnRjKGhhbmRsZUlkLCBjYWxsYmFja3MpIHtcbiAgICAgICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzIHx8IHt9O1xuICAgICAgICBjYWxsYmFja3Muc3VjY2VzcyA9ICh0eXBlb2YgY2FsbGJhY2tzLnN1Y2Nlc3MgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5zdWNjZXNzIDogSmFudXMubm9vcDtcbiAgICAgICAgY2FsbGJhY2tzLmVycm9yID0gKHR5cGVvZiBjYWxsYmFja3MuZXJyb3IgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5lcnJvciA6IHdlYnJ0Y0Vycm9yO1xuICAgICAgICB2YXIganNlcCA9IGNhbGxiYWNrcy5qc2VwO1xuICAgICAgICB2YXIgbWVkaWEgPSBjYWxsYmFja3MubWVkaWE7XG4gICAgICAgIHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXTtcbiAgICAgICAgaWYocGx1Z2luSGFuZGxlID09PSBudWxsIHx8IHBsdWdpbkhhbmRsZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmYgPT09IG51bGwgfHwgcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIEphbnVzLndhcm4oXCJJbnZhbGlkIGhhbmRsZVwiKTtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihcIkludmFsaWQgaGFuZGxlXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG4gICAgICAgIC8vIEFyZSB3ZSB1cGRhdGluZyBhIHNlc3Npb24/XG4gICAgICAgIGlmKGNvbmZpZy5wYyAhPT0gdW5kZWZpbmVkICYmIGNvbmZpZy5wYyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgSmFudXMubG9nKFwiVXBkYXRpbmcgZXhpc3RpbmcgbWVkaWEgc2Vzc2lvblwiKTtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBvZmZlci9hbnN3ZXIgbm93XG4gICAgICAgICAgICBpZihqc2VwID09PSBudWxsIHx8IGpzZXAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNyZWF0ZU9mZmVyKGhhbmRsZUlkLCBtZWRpYSwgY2FsbGJhY2tzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYoYWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSBcImVkZ2VcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIEVkZ2UsIGFkZCBhbiBhPWVuZC1vZi1jYW5kaWRhdGVzIGF0IHRoZSBlbmRcbiAgICAgICAgICAgICAgICAgICAganNlcC5zZHAgKz0gXCJhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbmZpZy5wYy5zZXRSZW1vdGVEZXNjcmlwdGlvbihcbiAgICAgICAgICAgICAgICAgICAgbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihqc2VwKSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJSZW1vdGUgZGVzY3JpcHRpb24gYWNjZXB0ZWQhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQW5zd2VyKGhhbmRsZUlkLCBtZWRpYSwgY2FsbGJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgY2FsbGJhY2tzLmVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBXYXMgYSBNZWRpYVN0cmVhbSBvYmplY3QgcGFzc2VkLCBvciBkbyB3ZSBuZWVkIHRvIHRha2UgY2FyZSBvZiB0aGF0P1xuICAgICAgICBpZihjYWxsYmFja3Muc3RyZWFtICE9PSBudWxsICYmIGNhbGxiYWNrcy5zdHJlYW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHN0cmVhbSA9IGNhbGxiYWNrcy5zdHJlYW07XG4gICAgICAgICAgICBKYW51cy5sb2coXCJNZWRpYVN0cmVhbSBwcm92aWRlZCBieSB0aGUgYXBwbGljYXRpb25cIik7XG4gICAgICAgICAgICBKYW51cy5kZWJ1ZyhzdHJlYW0pO1xuICAgICAgICAgICAgLy8gU2tpcCB0aGUgZ2V0VXNlck1lZGlhIHBhcnRcbiAgICAgICAgICAgIGNvbmZpZy5zdHJlYW1FeHRlcm5hbCA9IHRydWU7XG4gICAgICAgICAgICBzdHJlYW1zRG9uZShoYW5kbGVJZCwganNlcCwgbWVkaWEsIGNhbGxiYWNrcywgc3RyZWFtKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25maWcudHJpY2tsZSA9IGlzVHJpY2tsZUVuYWJsZWQoY2FsbGJhY2tzLnRyaWNrbGUpO1xuICAgICAgICBpZihpc0F1ZGlvU2VuZEVuYWJsZWQobWVkaWEpIHx8IGlzVmlkZW9TZW5kRW5hYmxlZChtZWRpYSkpIHtcbiAgICAgICAgICAgIHZhciBjb25zdHJhaW50cyA9IHsgbWFuZGF0b3J5OiB7fSwgb3B0aW9uYWw6IFtdfTtcbiAgICAgICAgICAgIHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKHRydWUpO1xuICAgICAgICAgICAgdmFyIGF1ZGlvU3VwcG9ydCA9IGlzQXVkaW9TZW5kRW5hYmxlZChtZWRpYSk7XG4gICAgICAgICAgICBpZihhdWRpb1N1cHBvcnQgPT09IHRydWUgJiYgbWVkaWEgIT0gdW5kZWZpbmVkICYmIG1lZGlhICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgbWVkaWEuYXVkaW8gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvU3VwcG9ydCA9IG1lZGlhLmF1ZGlvO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2aWRlb1N1cHBvcnQgPSBpc1ZpZGVvU2VuZEVuYWJsZWQobWVkaWEpO1xuICAgICAgICAgICAgaWYodmlkZW9TdXBwb3J0ID09PSB0cnVlICYmIG1lZGlhICE9IHVuZGVmaW5lZCAmJiBtZWRpYSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYobWVkaWEudmlkZW8gJiYgbWVkaWEudmlkZW8gIT0gJ3NjcmVlbicgJiYgbWVkaWEudmlkZW8gIT0gJ3dpbmRvdycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IDAsIG1heEhlaWdodCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmKG1lZGlhLnZpZGVvID09PSAnbG93cmVzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU21hbGwgcmVzb2x1dGlvbiwgNDozXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSAyNDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAyNDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IDMyMDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKG1lZGlhLnZpZGVvID09PSAnbG93cmVzLTE2OjknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTbWFsbCByZXNvbHV0aW9uLCAxNjo5XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSAxODA7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSAxODA7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IDMyMDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKG1lZGlhLnZpZGVvID09PSAnaGlyZXMnIHx8IG1lZGlhLnZpZGVvID09PSAnaGlyZXMtMTY6OScgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIaWdoIHJlc29sdXRpb24gaXMgb25seSAxNjo5XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSA3MjA7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSA3MjA7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IDEyODA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpcmVmb3hWZXIgPSBwYXJzZUludCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRmlyZWZveFxcLyguKikvKVsxXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZpcmVmb3hWZXIgPCAzOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmxlc3MgdGhpcyBpcyBhbmQgb2xkIEZpcmVmb3gsIHdoaWNoIGRvZXNuJ3Qgc3VwcG9ydCBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKYW51cy53YXJuKG1lZGlhLnZpZGVvICsgXCIgdW5zdXBwb3J0ZWQsIGZhbGxpbmcgYmFjayB0byBzdGRyZXMgKG9sZCBGaXJlZm94KVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gNDgwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhIZWlnaHQgPSA0ODA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoICA9IDY0MDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihtZWRpYS52aWRlbyA9PT0gJ3N0ZHJlcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vcm1hbCByZXNvbHV0aW9uLCA0OjNcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IDQ4MDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IDQ4MDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoICA9IDY0MDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKG1lZGlhLnZpZGVvID09PSAnc3RkcmVzLTE2OjknKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3JtYWwgcmVzb2x1dGlvbiwgMTY6OVxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gMzYwO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0ID0gMzYwO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggPSA2NDA7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJEZWZhdWx0IHZpZGVvIHNldHRpbmcgKFwiICsgbWVkaWEudmlkZW8gKyBcIikgaXMgc3RkcmVzIDQ6M1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCA9IDQ4MDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEhlaWdodCA9IDQ4MDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoID0gNjQwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIEphbnVzLmxvZyhcIkFkZGluZyBtZWRpYSBjb25zdHJhaW50IFwiICsgbWVkaWEudmlkZW8pO1xuICAgICAgICAgICAgICAgICAgICBpZihuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlyZWZveFZlciA9IHBhcnNlSW50KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9GaXJlZm94XFwvKC4qKS8pWzFdLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihmaXJlZm94VmVyIDwgMzgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb1N1cHBvcnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZXF1aXJlJzogWydoZWlnaHQnLCAnd2lkdGgnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6IHsnbWF4JzogbWF4SGVpZ2h0LCAnbWluJzogaGVpZ2h0fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogIHsnbWF4Jzogd2lkdGgsICAnbWluJzogd2lkdGh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yODI4MjM4NS93ZWJydGMtZmlyZWZveC1jb25zdHJhaW50cy8yODkxMTY5NCMyODkxMTY5NFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tZWV0ZWNoby9qYW51cy1nYXRld2F5L3B1bGwvMjQ2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9TdXBwb3J0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogeydpZGVhbCc6IGhlaWdodH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCc6ICB7J2lkZWFsJzogd2lkdGh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvU3VwcG9ydCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWFuZGF0b3J5Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWF4SGVpZ2h0JzogbWF4SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWluSGVpZ2h0JzogaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbWF4V2lkdGgnOiAgd2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtaW5XaWR0aCc6ICB3aWR0aFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29wdGlvbmFsJzogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIG1lZGlhLnZpZGVvID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9TdXBwb3J0ID0gbWVkaWEudmlkZW87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgSmFudXMuZGVidWcodmlkZW9TdXBwb3J0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYobWVkaWEudmlkZW8gPT09ICdzY3JlZW4nIHx8IG1lZGlhLnZpZGVvID09PSAnd2luZG93Jykge1xuICAgICAgICAgICAgICAgICAgICAvLyBOb3QgYSB3ZWJjYW0sIGJ1dCBzY3JlZW4gY2FwdHVyZVxuICAgICAgICAgICAgICAgICAgICBpZih3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgIT09ICdodHRwczonKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTY3JlZW4gc2hhcmluZyBtYW5kYXRlcyBIVFRQU1xuICAgICAgICAgICAgICAgICAgICAgICAgSmFudXMud2FybihcIlNjcmVlbiBzaGFyaW5nIG9ubHkgd29ya3Mgb24gSFRUUFMsIHRyeSB0aGUgaHR0cHM6Ly8gdmVyc2lvbiBvZiB0aGlzIHBhZ2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5IYW5kbGUuY29uc2VudERpYWxvZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoXCJTY3JlZW4gc2hhcmluZyBvbmx5IHdvcmtzIG9uIEhUVFBTLCB0cnkgdGhlIGh0dHBzOi8vIHZlcnNpb24gb2YgdGhpcyBwYWdlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlJ3JlIGdvaW5nIHRvIHRyeSBhbmQgdXNlIHRoZSBleHRlbnNpb24gZm9yIENocm9tZSAzNCssIHRoZSBvbGQgYXBwcm9hY2hcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIG9sZGVyIHZlcnNpb25zIG9mIENocm9tZSwgb3IgdGhlIGV4cGVyaW1lbnRhbCBzdXBwb3J0IGluIEZpcmVmb3ggMzMrXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYWNoZSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjYWxsYmFja1VzZXJNZWRpYSAoZXJyb3IsIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luSGFuZGxlLmNvbnNlbnREaWFsb2coZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3Ioe2NvZGU6IGVycm9yLmNvZGUsIG5hbWU6IGVycm9yLm5hbWUsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2V9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtc0RvbmUoaGFuZGxlSWQsIGpzZXAsIG1lZGlhLCBjYWxsYmFja3MsIHN0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNjcmVlbk1lZGlhKGNvbnN0cmFpbnRzLCBnc21DYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgSmFudXMubG9nKFwiQWRkaW5nIG1lZGlhIGNvbnN0cmFpbnQgKHNjcmVlbiBjYXB0dXJlKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnKGNvbnN0cmFpbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgeyBnc21DYWxsYmFjayhudWxsLCBzdHJlYW0pOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgeyBwbHVnaW5IYW5kbGUuY29uc2VudERpYWxvZyhmYWxzZSk7IGdzbUNhbGxiYWNrKGVycm9yKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmKGFkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PT0gJ2Nocm9tZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaHJvbWV2ZXIgPSBhZGFwdGVyLmJyb3dzZXJEZXRhaWxzLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWF4dmVyID0gMzM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgnTGludXgnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXh2ZXIgPSAzNTtcdC8vIFwia25vd25cIiBjcmFzaCBpbiBjaHJvbWUgMzQgYW5kIDM1IG9uIGxpbnV4XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjaHJvbWV2ZXIgPj0gMjYgJiYgY2hyb21ldmVyIDw9IG1heHZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENocm9tZSAyNi0+MzMgcmVxdWlyZXMgc29tZSBhd2t3YXJkIGNocm9tZTovL2ZsYWdzIG1hbmlwdWxhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlbzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFuZGF0b3J5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ0xlYWt5QnVja2V0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiB3aW5kb3cuc2NyZWVuLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEhlaWdodDogd2luZG93LnNjcmVlbi5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4RnJhbWVSYXRlOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tZU1lZGlhU291cmNlOiAnc2NyZWVuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogaXNBdWRpb1NlbmRFbmFibGVkKG1lZGlhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U2NyZWVuTWVkaWEoY29uc3RyYWludHMsIGNhbGxiYWNrVXNlck1lZGlhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21lIDM0KyByZXF1aXJlcyBhbiBleHRlbnNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGVuZGluZyA9IHdpbmRvdy5zZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IG5ldyBFcnJvcignTmF2aWdhdG9yVXNlck1lZGlhRXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLm5hbWUgPSAnVGhlIHJlcXVpcmVkIENocm9tZSBleHRlbnNpb24gaXMgbm90IGluc3RhbGxlZDogY2xpY2sgPGEgaHJlZj1cIiNcIj5oZXJlPC9hPiB0byBpbnN0YWxsIGl0LiAoTk9URTogdGhpcyB3aWxsIG5lZWQgeW91IHRvIHJlZnJlc2ggdGhlIHBhZ2UpJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFja3MuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVtwZW5kaW5nXSA9IFtjYWxsYmFja1VzZXJNZWRpYSwgbnVsbF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHsgdHlwZTogJ2phbnVzR2V0U2NyZWVuJywgaWQ6IHBlbmRpbmcgfSwgJyonKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgnRmlyZWZveCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmZ2ZXIgPSBwYXJzZUludCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRmlyZWZveFxcLyguKikvKVsxXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZmZ2ZXIgPj0gMzMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94IDMzKyBoYXMgZXhwZXJpbWVudGFsIHN1cHBvcnQgZm9yIHNjcmVlbiBzaGFyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3RyYWludHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3pNZWRpYVNvdXJjZTogbWVkaWEudmlkZW8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVNvdXJjZTogbWVkaWEudmlkZW9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IGlzQXVkaW9TZW5kRW5hYmxlZChtZWRpYSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldFNjcmVlbk1lZGlhKGNvbnN0cmFpbnRzLCBmdW5jdGlvbiAoZXJyLCBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tVc2VyTWVkaWEoZXJyLCBzdHJlYW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDQ1ODEwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFRpbWUgPSBzdHJlYW0uY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9sbHkgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzdHJlYW0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHBvbGx5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzdHJlYW0uY3VycmVudFRpbWUgPT0gbGFzdFRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwocG9sbHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzdHJlYW0ub25lbmRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLm9uZW5kZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0VGltZSA9IHN0cmVhbS5jdXJyZW50VGltZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gbmV3IEVycm9yKCdOYXZpZ2F0b3JVc2VyTWVkaWFFcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLm5hbWUgPSAnWW91ciB2ZXJzaW9uIG9mIEZpcmVmb3ggZG9lcyBub3Qgc3VwcG9ydCBzY3JlZW4gc2hhcmluZywgcGxlYXNlIGluc3RhbGwgRmlyZWZveCAzMyAob3IgbW9yZSByZWNlbnQgdmVyc2lvbnMpJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5IYW5kbGUuY29uc2VudERpYWxvZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBldmVudHMgZnJvbSB0aGUgQ2hyb21lIEV4dGVuc2lvblxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXZlbnQub3JpZ2luICE9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXZlbnQuZGF0YS50eXBlID09ICdqYW51c0dvdFNjcmVlbicgJiYgY2FjaGVbZXZlbnQuZGF0YS5pZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGNhY2hlW2V2ZW50LmRhdGEuaWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGRhdGFbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2V2ZW50LmRhdGEuaWRdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRhdGEuc291cmNlSWQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZXIgY2FuY2VsZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gbmV3IEVycm9yKCdOYXZpZ2F0b3JVc2VyTWVkaWFFcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5uYW1lID0gJ1lvdSBjYW5jZWxsZWQgdGhlIHJlcXVlc3QgZm9yIHBlcm1pc3Npb24sIGdpdmluZyB1cC4uLic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50cyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBpc0F1ZGlvU2VuZEVuYWJsZWQobWVkaWEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW86IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW5kYXRvcnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lTWVkaWFTb3VyY2U6ICdkZXNrdG9wJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IHdpbmRvdy5zY3JlZW4ud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEhlaWdodDogd2luZG93LnNjcmVlbi5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heEZyYW1lUmF0ZTogM1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2dvb2dMZWFreUJ1Y2tldDogdHJ1ZX0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnb29nVGVtcG9yYWxMYXllcmVkU2NyZWVuY2FzdDogdHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzLnZpZGVvLm1hbmRhdG9yeS5jaHJvbWVNZWRpYVNvdXJjZUlkID0gZXZlbnQuZGF0YS5zb3VyY2VJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0U2NyZWVuTWVkaWEoY29uc3RyYWludHMsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmRhdGEudHlwZSA9PSAnamFudXNHZXRTY3JlZW5QZW5kaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoZXZlbnQuZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgd2UgZ290IGhlcmUsIHdlJ3JlIG5vdCBzY3JlZW5zaGFyaW5nXG4gICAgICAgICAgICBpZihtZWRpYSA9PT0gbnVsbCB8fCBtZWRpYSA9PT0gdW5kZWZpbmVkIHx8IG1lZGlhLnZpZGVvICE9PSAnc2NyZWVuJykge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgYWxsIG1lZGlhIHNvdXJjZXMgYXJlIGFjdHVhbGx5IGF2YWlsYWJsZSBvciBub3RcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKS50aGVuKGZ1bmN0aW9uKGRldmljZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF1ZGlvRXhpc3QgPSBkZXZpY2VzLnNvbWUoZnVuY3Rpb24oZGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRldmljZS5raW5kID09PSAnYXVkaW9pbnB1dCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvRXhpc3QgPSBkZXZpY2VzLnNvbWUoZnVuY3Rpb24oZGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRldmljZS5raW5kID09PSAndmlkZW9pbnB1dCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIGEgbWlzc2luZyBkZXZpY2UgaXMgcmVhbGx5IGEgcHJvYmxlbVxuICAgICAgICAgICAgICAgICAgICB2YXIgYXVkaW9TZW5kID0gaXNBdWRpb1NlbmRFbmFibGVkKG1lZGlhKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvU2VuZCA9IGlzVmlkZW9TZW5kRW5hYmxlZChtZWRpYSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZWVkQXVkaW9EZXZpY2UgPSBpc0F1ZGlvU2VuZFJlcXVpcmVkKG1lZGlhKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5lZWRWaWRlb0RldmljZSA9IGlzVmlkZW9TZW5kUmVxdWlyZWQobWVkaWEpO1xuICAgICAgICAgICAgICAgICAgICBpZihhdWRpb1NlbmQgfHwgdmlkZW9TZW5kIHx8IG5lZWRBdWRpb0RldmljZSB8fCBuZWVkVmlkZW9EZXZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gc2VuZCBlaXRoZXIgYXVkaW8gb3IgdmlkZW9cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYXZlQXVkaW9EZXZpY2UgPSBhdWRpb1NlbmQgPyBhdWRpb0V4aXN0IDogZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGF2ZVZpZGVvRGV2aWNlID0gdmlkZW9TZW5kID8gdmlkZW9FeGlzdCA6IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWhhdmVBdWRpb0RldmljZSAmJiAhaGF2ZVZpZGVvRGV2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYTUUgU2hvdWxkIHdlIHJlYWxseSBnaXZlIHVwLCBvciBqdXN0IGFzc3VtZSByZWN2b25seSBmb3IgYm90aD9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW5IYW5kbGUuY29uc2VudERpYWxvZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzLmVycm9yKCdObyBjYXB0dXJlIGRldmljZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZighaGF2ZUF1ZGlvRGV2aWNlICYmIG5lZWRBdWRpb0RldmljZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoJ0F1ZGlvIGNhcHR1cmUgaXMgcmVxdWlyZWQsIGJ1dCBubyBjYXB0dXJlIGRldmljZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZighaGF2ZVZpZGVvRGV2aWNlICYmIG5lZWRWaWRlb0RldmljZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoJ1ZpZGVvIGNhcHR1cmUgaXMgcmVxdWlyZWQsIGJ1dCBubyBjYXB0dXJlIGRldmljZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvOiBhdWRpb0V4aXN0ID8gYXVkaW9TdXBwb3J0IDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlbzogdmlkZW9FeGlzdCA/IHZpZGVvU3VwcG9ydCA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihzdHJlYW0pIHsgcGx1Z2luSGFuZGxlLmNvbnNlbnREaWFsb2coZmFsc2UpOyBzdHJlYW1zRG9uZShoYW5kbGVJZCwganNlcCwgbWVkaWEsIGNhbGxiYWNrcywgc3RyZWFtKTsgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikgeyBwbHVnaW5IYW5kbGUuY29uc2VudERpYWxvZyhmYWxzZSk7IGNhbGxiYWNrcy5lcnJvcih7Y29kZTogZXJyb3IuY29kZSwgbmFtZTogZXJyb3IubmFtZSwgbWVzc2FnZTogZXJyb3IubWVzc2FnZX0pOyB9KTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbkhhbmRsZS5jb25zZW50RGlhbG9nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcignZW51bWVyYXRlRGV2aWNlcyBlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBObyBuZWVkIHRvIGRvIGEgZ2V0VXNlck1lZGlhLCBjcmVhdGUgb2ZmZXIvYW5zd2VyIHJpZ2h0IGF3YXlcbiAgICAgICAgICAgIHN0cmVhbXNEb25lKGhhbmRsZUlkLCBqc2VwLCBtZWRpYSwgY2FsbGJhY2tzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByZXBhcmVXZWJydGNQZWVyKGhhbmRsZUlkLCBjYWxsYmFja3MpIHtcbiAgICAgICAgY2FsbGJhY2tzID0gY2FsbGJhY2tzIHx8IHt9O1xuICAgICAgICBjYWxsYmFja3Muc3VjY2VzcyA9ICh0eXBlb2YgY2FsbGJhY2tzLnN1Y2Nlc3MgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5zdWNjZXNzIDogSmFudXMubm9vcDtcbiAgICAgICAgY2FsbGJhY2tzLmVycm9yID0gKHR5cGVvZiBjYWxsYmFja3MuZXJyb3IgPT0gXCJmdW5jdGlvblwiKSA/IGNhbGxiYWNrcy5lcnJvciA6IHdlYnJ0Y0Vycm9yO1xuICAgICAgICB2YXIganNlcCA9IGNhbGxiYWNrcy5qc2VwO1xuICAgICAgICB2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG4gICAgICAgIGlmKHBsdWdpbkhhbmRsZSA9PT0gbnVsbCB8fCBwbHVnaW5IYW5kbGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmID09PSBudWxsIHx8IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBKYW51cy53YXJuKFwiSW52YWxpZCBoYW5kbGVcIik7XG4gICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoXCJJbnZhbGlkIGhhbmRsZVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29uZmlnID0gcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmO1xuICAgICAgICBpZihqc2VwICE9PSB1bmRlZmluZWQgJiYganNlcCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYoY29uZmlnLnBjID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgSmFudXMud2FybihcIldhaXQsIG5vIFBlZXJDb25uZWN0aW9uPz8gaWYgdGhpcyBpcyBhbiBhbnN3ZXIsIHVzZSBjcmVhdGVBbnN3ZXIgYW5kIG5vdCBoYW5kbGVSZW1vdGVKc2VwXCIpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihcIk5vIFBlZXJDb25uZWN0aW9uOiBpZiB0aGlzIGlzIGFuIGFuc3dlciwgdXNlIGNyZWF0ZUFuc3dlciBhbmQgbm90IGhhbmRsZVJlbW90ZUpzZXBcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoYWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09PSBcImVkZ2VcIikge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgRWRnZSwgYWRkIGFuIGE9ZW5kLW9mLWNhbmRpZGF0ZXMgYXQgdGhlIGVuZFxuICAgICAgICAgICAgICAgIGpzZXAuc2RwICs9IFwiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uZmlnLnBjLnNldFJlbW90ZURlc2NyaXB0aW9uKFxuICAgICAgICAgICAgICAgIG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oanNlcCksXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIEphbnVzLmxvZyhcIlJlbW90ZSBkZXNjcmlwdGlvbiBhY2NlcHRlZCFcIik7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzKCk7XG4gICAgICAgICAgICAgICAgfSwgY2FsbGJhY2tzLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihcIkludmFsaWQgSlNFUFwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZU9mZmVyKGhhbmRsZUlkLCBtZWRpYSwgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNhbGxiYWNrcyA9IGNhbGxiYWNrcyB8fCB7fTtcbiAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MgPSAodHlwZW9mIGNhbGxiYWNrcy5zdWNjZXNzID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Muc3VjY2VzcyA6IEphbnVzLm5vb3A7XG4gICAgICAgIGNhbGxiYWNrcy5lcnJvciA9ICh0eXBlb2YgY2FsbGJhY2tzLmVycm9yID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3MuZXJyb3IgOiBKYW51cy5ub29wO1xuICAgICAgICB2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG4gICAgICAgIGlmKHBsdWdpbkhhbmRsZSA9PT0gbnVsbCB8fCBwbHVnaW5IYW5kbGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmID09PSBudWxsIHx8IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBKYW51cy53YXJuKFwiSW52YWxpZCBoYW5kbGVcIik7XG4gICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoXCJJbnZhbGlkIGhhbmRsZVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29uZmlnID0gcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmO1xuICAgICAgICBKYW51cy5sb2coXCJDcmVhdGluZyBvZmZlciAoaWNlRG9uZT1cIiArIGNvbmZpZy5pY2VEb25lICsgXCIpXCIpO1xuICAgICAgICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3dlYnJ0Yy9pc3N1ZXMvZGV0YWlsP2lkPTM1MDhcbiAgICAgICAgdmFyIG1lZGlhQ29uc3RyYWludHMgPSBudWxsO1xuICAgICAgICBpZihhZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT0gXCJmaXJlZm94XCIgfHwgYWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09IFwiZWRnZVwiKSB7XG4gICAgICAgICAgICBtZWRpYUNvbnN0cmFpbnRzID0ge1xuICAgICAgICAgICAgICAgICdvZmZlclRvUmVjZWl2ZUF1ZGlvJzppc0F1ZGlvUmVjdkVuYWJsZWQobWVkaWEpLFxuICAgICAgICAgICAgICAgICdvZmZlclRvUmVjZWl2ZVZpZGVvJzppc1ZpZGVvUmVjdkVuYWJsZWQobWVkaWEpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVkaWFDb25zdHJhaW50cyA9IHtcbiAgICAgICAgICAgICAgICAnbWFuZGF0b3J5Jzoge1xuICAgICAgICAgICAgICAgICAgICAnT2ZmZXJUb1JlY2VpdmVBdWRpbyc6aXNBdWRpb1JlY3ZFbmFibGVkKG1lZGlhKSxcbiAgICAgICAgICAgICAgICAgICAgJ09mZmVyVG9SZWNlaXZlVmlkZW8nOmlzVmlkZW9SZWN2RW5hYmxlZChtZWRpYSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIEphbnVzLmRlYnVnKG1lZGlhQ29uc3RyYWludHMpO1xuICAgICAgICBjb25maWcucGMuY3JlYXRlT2ZmZXIoXG4gICAgICAgICAgICBmdW5jdGlvbihvZmZlcikge1xuICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnKG9mZmVyKTtcbiAgICAgICAgICAgICAgICBpZihjb25maWcubXlTZHAgPT09IG51bGwgfHwgY29uZmlnLm15U2RwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgSmFudXMubG9nKFwiU2V0dGluZyBsb2NhbCBkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLm15U2RwID0gb2ZmZXIuc2RwO1xuICAgICAgICAgICAgICAgICAgICBjb25maWcucGMuc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKCFjb25maWcuaWNlRG9uZSAmJiAhY29uZmlnLnRyaWNrbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgdW50aWwgd2UgaGF2ZSBhbGwgY2FuZGlkYXRlc1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJXYWl0aW5nIGZvciBhbGwgY2FuZGlkYXRlcy4uLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihjb25maWcuc2RwU2VudCkge1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJPZmZlciBhbHJlYWR5IHNlbnQsIG5vdCBzZW5kaW5nIGl0IGFnYWluXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIEphbnVzLmxvZyhcIk9mZmVyIHJlYWR5XCIpO1xuICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnKGNhbGxiYWNrcyk7XG4gICAgICAgICAgICAgICAgY29uZmlnLnNkcFNlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIEpTT04uc3RyaW5naWZ5IGRvZXNuJ3Qgd29yayBvbiBzb21lIFdlYlJUQyBvYmplY3RzIGFueW1vcmVcbiAgICAgICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ2NzM2NlxuICAgICAgICAgICAgICAgIHZhciBqc2VwID0ge1xuICAgICAgICAgICAgICAgICAgICBcInR5cGVcIjogb2ZmZXIudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgXCJzZHBcIjogb2ZmZXIuc2RwXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3Muc3VjY2Vzcyhqc2VwKTtcbiAgICAgICAgICAgIH0sIGNhbGxiYWNrcy5lcnJvciwgbWVkaWFDb25zdHJhaW50cyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQW5zd2VyKGhhbmRsZUlkLCBtZWRpYSwgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNhbGxiYWNrcyA9IGNhbGxiYWNrcyB8fCB7fTtcbiAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MgPSAodHlwZW9mIGNhbGxiYWNrcy5zdWNjZXNzID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3Muc3VjY2VzcyA6IEphbnVzLm5vb3A7XG4gICAgICAgIGNhbGxiYWNrcy5lcnJvciA9ICh0eXBlb2YgY2FsbGJhY2tzLmVycm9yID09IFwiZnVuY3Rpb25cIikgPyBjYWxsYmFja3MuZXJyb3IgOiBKYW51cy5ub29wO1xuICAgICAgICB2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG4gICAgICAgIGlmKHBsdWdpbkhhbmRsZSA9PT0gbnVsbCB8fCBwbHVnaW5IYW5kbGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmID09PSBudWxsIHx8IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBKYW51cy53YXJuKFwiSW52YWxpZCBoYW5kbGVcIik7XG4gICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoXCJJbnZhbGlkIGhhbmRsZVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29uZmlnID0gcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmO1xuICAgICAgICBKYW51cy5sb2coXCJDcmVhdGluZyBhbnN3ZXIgKGljZURvbmU9XCIgKyBjb25maWcuaWNlRG9uZSArIFwiKVwiKTtcbiAgICAgICAgdmFyIG1lZGlhQ29uc3RyYWludHMgPSBudWxsO1xuICAgICAgICBpZihhZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT0gXCJmaXJlZm94XCIgfHwgYWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09IFwiZWRnZVwiKSB7XG4gICAgICAgICAgICBtZWRpYUNvbnN0cmFpbnRzID0ge1xuICAgICAgICAgICAgICAgICdvZmZlclRvUmVjZWl2ZUF1ZGlvJzppc0F1ZGlvUmVjdkVuYWJsZWQobWVkaWEpLFxuICAgICAgICAgICAgICAgICdvZmZlclRvUmVjZWl2ZVZpZGVvJzppc1ZpZGVvUmVjdkVuYWJsZWQobWVkaWEpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVkaWFDb25zdHJhaW50cyA9IHtcbiAgICAgICAgICAgICAgICAnbWFuZGF0b3J5Jzoge1xuICAgICAgICAgICAgICAgICAgICAnT2ZmZXJUb1JlY2VpdmVBdWRpbyc6aXNBdWRpb1JlY3ZFbmFibGVkKG1lZGlhKSxcbiAgICAgICAgICAgICAgICAgICAgJ09mZmVyVG9SZWNlaXZlVmlkZW8nOmlzVmlkZW9SZWN2RW5hYmxlZChtZWRpYSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIEphbnVzLmRlYnVnKG1lZGlhQ29uc3RyYWludHMpO1xuICAgICAgICBjb25maWcucGMuY3JlYXRlQW5zd2VyKFxuICAgICAgICAgICAgZnVuY3Rpb24oYW5zd2VyKSB7XG4gICAgICAgICAgICAgICAgSmFudXMuZGVidWcoYW5zd2VyKTtcbiAgICAgICAgICAgICAgICBpZihjb25maWcubXlTZHAgPT09IG51bGwgfHwgY29uZmlnLm15U2RwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgSmFudXMubG9nKFwiU2V0dGluZyBsb2NhbCBkZXNjcmlwdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLm15U2RwID0gYW5zd2VyLnNkcDtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnBjLnNldExvY2FsRGVzY3JpcHRpb24oYW5zd2VyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoIWNvbmZpZy5pY2VEb25lICYmICFjb25maWcudHJpY2tsZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBkbyBhbnl0aGluZyB1bnRpbCB3ZSBoYXZlIGFsbCBjYW5kaWRhdGVzXG4gICAgICAgICAgICAgICAgICAgIEphbnVzLmxvZyhcIldhaXRpbmcgZm9yIGFsbCBjYW5kaWRhdGVzLi4uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKGNvbmZpZy5zZHBTZW50KSB7XHQvLyBGSVhNRSBiYWRseVxuICAgICAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJBbnN3ZXIgYWxyZWFkeSBzZW50LCBub3Qgc2VuZGluZyBpdCBhZ2FpblwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25maWcuc2RwU2VudCA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gSlNPTi5zdHJpbmdpZnkgZG9lc24ndCB3b3JrIG9uIHNvbWUgV2ViUlRDIG9iamVjdHMgYW55bW9yZVxuICAgICAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDY3MzY2XG4gICAgICAgICAgICAgICAgdmFyIGpzZXAgPSB7XG4gICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOiBhbnN3ZXIudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgXCJzZHBcIjogYW5zd2VyLnNkcFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MoanNlcCk7XG4gICAgICAgICAgICB9LCBjYWxsYmFja3MuZXJyb3IsIG1lZGlhQ29uc3RyYWludHMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbmRTRFAoaGFuZGxlSWQsIGNhbGxiYWNrcykge1xuICAgICAgICBjYWxsYmFja3MgPSBjYWxsYmFja3MgfHwge307XG4gICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzID0gKHR5cGVvZiBjYWxsYmFja3Muc3VjY2VzcyA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLnN1Y2Nlc3MgOiBKYW51cy5ub29wO1xuICAgICAgICBjYWxsYmFja3MuZXJyb3IgPSAodHlwZW9mIGNhbGxiYWNrcy5lcnJvciA9PSBcImZ1bmN0aW9uXCIpID8gY2FsbGJhY2tzLmVycm9yIDogSmFudXMubm9vcDtcbiAgICAgICAgdmFyIHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuICAgICAgICBpZihwbHVnaW5IYW5kbGUgPT09IG51bGwgfHwgcGx1Z2luSGFuZGxlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZiA9PT0gbnVsbCB8fCBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgSmFudXMud2FybihcIkludmFsaWQgaGFuZGxlLCBub3Qgc2VuZGluZyBhbnl0aGluZ1wiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29uZmlnID0gcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmO1xuICAgICAgICBKYW51cy5sb2coXCJTZW5kaW5nIG9mZmVyL2Fuc3dlciBTRFAuLi5cIik7XG4gICAgICAgIGlmKGNvbmZpZy5teVNkcCA9PT0gbnVsbCB8fCBjb25maWcubXlTZHAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgSmFudXMud2FybihcIkxvY2FsIFNEUCBpbnN0YW5jZSBpcyBpbnZhbGlkLCBub3Qgc2VuZGluZyBhbnl0aGluZy4uLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25maWcubXlTZHAgPSB7XG4gICAgICAgICAgICBcInR5cGVcIjogY29uZmlnLnBjLmxvY2FsRGVzY3JpcHRpb24udHlwZSxcbiAgICAgICAgICAgIFwic2RwXCI6IGNvbmZpZy5wYy5sb2NhbERlc2NyaXB0aW9uLnNkcFxuICAgICAgICB9O1xuICAgICAgICBpZihjb25maWcuc2RwU2VudCkge1xuICAgICAgICAgICAgSmFudXMubG9nKFwiT2ZmZXIvQW5zd2VyIFNEUCBhbHJlYWR5IHNlbnQsIG5vdCBzZW5kaW5nIGl0IGFnYWluXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKGNvbmZpZy50cmlja2xlID09PSBmYWxzZSlcbiAgICAgICAgICAgIGNvbmZpZy5teVNkcFtcInRyaWNrbGVcIl0gPSBmYWxzZTtcbiAgICAgICAgSmFudXMuZGVidWcoY2FsbGJhY2tzKTtcbiAgICAgICAgY29uZmlnLnNkcFNlbnQgPSB0cnVlO1xuICAgICAgICBjYWxsYmFja3Muc3VjY2Vzcyhjb25maWcubXlTZHApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFZvbHVtZShoYW5kbGVJZCkge1xuICAgICAgICB2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG4gICAgICAgIGlmKHBsdWdpbkhhbmRsZSA9PT0gbnVsbCB8fCBwbHVnaW5IYW5kbGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmID09PSBudWxsIHx8IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBKYW51cy53YXJuKFwiSW52YWxpZCBoYW5kbGVcIik7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29uZmlnID0gcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmO1xuICAgICAgICAvLyBTdGFydCBnZXR0aW5nIHRoZSB2b2x1bWUsIGlmIGdldFN0YXRzIGlzIHN1cHBvcnRlZFxuICAgICAgICBpZihjb25maWcucGMuZ2V0U3RhdHMgJiYgYWRhcHRlci5icm93c2VyRGV0YWlscy5icm93c2VyID09IFwiY2hyb21lXCIpIHtcdC8vIEZJWE1FXG4gICAgICAgICAgICBpZihjb25maWcucmVtb3RlU3RyZWFtID09PSBudWxsIHx8IGNvbmZpZy5yZW1vdGVTdHJlYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIEphbnVzLndhcm4oXCJSZW1vdGUgc3RyZWFtIHVuYXZhaWxhYmxlXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaHR0cDovL3dlYnJ0Yy5nb29nbGVjb2RlLmNvbS9zdm4vdHJ1bmsvc2FtcGxlcy9qcy9kZW1vcy9odG1sL2NvbnN0cmFpbnRzLWFuZC1zdGF0cy5odG1sXG4gICAgICAgICAgICBpZihjb25maWcudm9sdW1lLnRpbWVyID09PSBudWxsIHx8IGNvbmZpZy52b2x1bWUudGltZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIEphbnVzLmxvZyhcIlN0YXJ0aW5nIHZvbHVtZSBtb25pdG9yXCIpO1xuICAgICAgICAgICAgICAgIGNvbmZpZy52b2x1bWUudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnBjLmdldFN0YXRzKGZ1bmN0aW9uKHN0YXRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IHN0YXRzLnJlc3VsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8cmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXMgPSByZXN1bHRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcy50eXBlID09ICdzc3JjJyAmJiByZXMuc3RhdCgnYXVkaW9PdXRwdXRMZXZlbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy52b2x1bWUudmFsdWUgPSByZXMuc3RhdCgnYXVkaW9PdXRwdXRMZXZlbCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgMjAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcdC8vIFdlIGRvbid0IGhhdmUgYSB2b2x1bWUgdG8gcmV0dXJuIHlldFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy52b2x1bWUudmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBKYW51cy5sb2coXCJHZXR0aW5nIHRoZSByZW1vdGUgdm9sdW1lIHVuc3VwcG9ydGVkIGJ5IGJyb3dzZXJcIik7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzTXV0ZWQoaGFuZGxlSWQsIHZpZGVvKSB7XG4gICAgICAgIHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXTtcbiAgICAgICAgaWYocGx1Z2luSGFuZGxlID09PSBudWxsIHx8IHBsdWdpbkhhbmRsZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmYgPT09IG51bGwgfHwgcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIEphbnVzLndhcm4oXCJJbnZhbGlkIGhhbmRsZVwiKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG4gICAgICAgIGlmKGNvbmZpZy5wYyA9PT0gbnVsbCB8fCBjb25maWcucGMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgSmFudXMud2FybihcIkludmFsaWQgUGVlckNvbm5lY3Rpb25cIik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZihjb25maWcubXlTdHJlYW0gPT09IHVuZGVmaW5lZCB8fCBjb25maWcubXlTdHJlYW0gPT09IG51bGwpIHtcbiAgICAgICAgICAgIEphbnVzLndhcm4oXCJJbnZhbGlkIGxvY2FsIE1lZGlhU3RyZWFtXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYodmlkZW8pIHtcbiAgICAgICAgICAgIC8vIENoZWNrIHZpZGVvIHRyYWNrXG4gICAgICAgICAgICBpZihjb25maWcubXlTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKSA9PT0gbnVsbFxuICAgICAgICAgICAgICAgIHx8IGNvbmZpZy5teVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB8fCBjb25maWcubXlTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBKYW51cy53YXJuKFwiTm8gdmlkZW8gdHJhY2tcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gIWNvbmZpZy5teVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBDaGVjayBhdWRpbyB0cmFja1xuICAgICAgICAgICAgaWYoY29uZmlnLm15U3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkgPT09IG51bGxcbiAgICAgICAgICAgICAgICB8fCBjb25maWcubXlTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfHwgY29uZmlnLm15U3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgSmFudXMud2FybihcIk5vIGF1ZGlvIHRyYWNrXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICFjb25maWcubXlTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbXV0ZShoYW5kbGVJZCwgdmlkZW8sIG11dGUpIHtcbiAgICAgICAgdmFyIHBsdWdpbkhhbmRsZSA9IHBsdWdpbkhhbmRsZXNbaGFuZGxlSWRdO1xuICAgICAgICBpZihwbHVnaW5IYW5kbGUgPT09IG51bGwgfHwgcGx1Z2luSGFuZGxlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZiA9PT0gbnVsbCB8fCBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgSmFudXMud2FybihcIkludmFsaWQgaGFuZGxlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG4gICAgICAgIGlmKGNvbmZpZy5wYyA9PT0gbnVsbCB8fCBjb25maWcucGMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgSmFudXMud2FybihcIkludmFsaWQgUGVlckNvbm5lY3Rpb25cIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYoY29uZmlnLm15U3RyZWFtID09PSB1bmRlZmluZWQgfHwgY29uZmlnLm15U3RyZWFtID09PSBudWxsKSB7XG4gICAgICAgICAgICBKYW51cy53YXJuKFwiSW52YWxpZCBsb2NhbCBNZWRpYVN0cmVhbVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZih2aWRlbykge1xuICAgICAgICAgICAgLy8gTXV0ZS91bm11dGUgdmlkZW8gdHJhY2tcbiAgICAgICAgICAgIGlmKGNvbmZpZy5teVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpID09PSBudWxsXG4gICAgICAgICAgICAgICAgfHwgY29uZmlnLm15U3RyZWFtLmdldFZpZGVvVHJhY2tzKCkgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIHx8IGNvbmZpZy5teVN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIEphbnVzLndhcm4oXCJObyB2aWRlbyB0cmFja1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25maWcubXlTdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkID0gbXV0ZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTXV0ZS91bm11dGUgYXVkaW8gdHJhY2tcbiAgICAgICAgICAgIGlmKGNvbmZpZy5teVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpID09PSBudWxsXG4gICAgICAgICAgICAgICAgfHwgY29uZmlnLm15U3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIHx8IGNvbmZpZy5teVN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIEphbnVzLndhcm4oXCJObyBhdWRpbyB0cmFja1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25maWcubXlTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gbXV0ZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Qml0cmF0ZShoYW5kbGVJZCkge1xuICAgICAgICB2YXIgcGx1Z2luSGFuZGxlID0gcGx1Z2luSGFuZGxlc1toYW5kbGVJZF07XG4gICAgICAgIGlmKHBsdWdpbkhhbmRsZSA9PT0gbnVsbCB8fCBwbHVnaW5IYW5kbGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgcGx1Z2luSGFuZGxlLndlYnJ0Y1N0dWZmID09PSBudWxsIHx8IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBKYW51cy53YXJuKFwiSW52YWxpZCBoYW5kbGVcIik7XG4gICAgICAgICAgICByZXR1cm4gXCJJbnZhbGlkIGhhbmRsZVwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb25maWcgPSBwbHVnaW5IYW5kbGUud2VicnRjU3R1ZmY7XG4gICAgICAgIGlmKGNvbmZpZy5wYyA9PT0gbnVsbCB8fCBjb25maWcucGMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiBcIkludmFsaWQgUGVlckNvbm5lY3Rpb25cIjtcbiAgICAgICAgLy8gU3RhcnQgZ2V0dGluZyB0aGUgYml0cmF0ZSwgaWYgZ2V0U3RhdHMgaXMgc3VwcG9ydGVkXG4gICAgICAgIGlmKGNvbmZpZy5wYy5nZXRTdGF0cyAmJiBhZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT0gXCJjaHJvbWVcIikge1xuICAgICAgICAgICAgLy8gRG8gaXQgdGhlIENocm9tZSB3YXlcbiAgICAgICAgICAgIGlmKGNvbmZpZy5yZW1vdGVTdHJlYW0gPT09IG51bGwgfHwgY29uZmlnLnJlbW90ZVN0cmVhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgSmFudXMud2FybihcIlJlbW90ZSBzdHJlYW0gdW5hdmFpbGFibGVcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiUmVtb3RlIHN0cmVhbSB1bmF2YWlsYWJsZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaHR0cDovL3dlYnJ0Yy5nb29nbGVjb2RlLmNvbS9zdm4vdHJ1bmsvc2FtcGxlcy9qcy9kZW1vcy9odG1sL2NvbnN0cmFpbnRzLWFuZC1zdGF0cy5odG1sXG4gICAgICAgICAgICBpZihjb25maWcuYml0cmF0ZS50aW1lciA9PT0gbnVsbCB8fCBjb25maWcuYml0cmF0ZS50aW1lciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgSmFudXMubG9nKFwiU3RhcnRpbmcgYml0cmF0ZSB0aW1lciAoQ2hyb21lKVwiKTtcbiAgICAgICAgICAgICAgICBjb25maWcuYml0cmF0ZS50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25maWcucGMuZ2V0U3RhdHMoZnVuY3Rpb24oc3RhdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzID0gc3RhdHMucmVzdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaTxyZXN1bHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IHJlc3VsdHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzLnR5cGUgPT0gJ3NzcmMnICYmIHJlcy5zdGF0KCdnb29nRnJhbWVIZWlnaHRSZWNlaXZlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5iaXRyYXRlLmJzbm93ID0gcmVzLnN0YXQoJ2J5dGVzUmVjZWl2ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUudHNub3cgPSByZXMudGltZXN0YW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb25maWcuYml0cmF0ZS5ic2JlZm9yZSA9PT0gbnVsbCB8fCBjb25maWcuYml0cmF0ZS50c2JlZm9yZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCB0aGlzIHJvdW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYml0cmF0ZS5ic2JlZm9yZSA9IGNvbmZpZy5iaXRyYXRlLmJzbm93O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUudHNiZWZvcmUgPSBjb25maWcuYml0cmF0ZS50c25vdztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBiaXRyYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0UmF0ZSA9IE1hdGgucm91bmQoKGNvbmZpZy5iaXRyYXRlLmJzbm93IC0gY29uZmlnLmJpdHJhdGUuYnNiZWZvcmUpICogOCAvIChjb25maWcuYml0cmF0ZS50c25vdyAtIGNvbmZpZy5iaXRyYXRlLnRzYmVmb3JlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYml0cmF0ZS52YWx1ZSA9IGJpdFJhdGUgKyAnIGtiaXRzL3NlYyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34gSmFudXMubG9nKFwiRXN0aW1hdGVkIGJpdHJhdGUgaXMgXCIgKyBjb25maWcuYml0cmF0ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYml0cmF0ZS5ic2JlZm9yZSA9IGNvbmZpZy5iaXRyYXRlLmJzbm93O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUudHNiZWZvcmUgPSBjb25maWcuYml0cmF0ZS50c25vdztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiMCBrYml0cy9zZWNcIjtcdC8vIFdlIGRvbid0IGhhdmUgYSBiaXRyYXRlIHZhbHVlIHlldFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5iaXRyYXRlLnZhbHVlO1xuICAgICAgICB9IGVsc2UgaWYoY29uZmlnLnBjLmdldFN0YXRzICYmIGFkYXB0ZXIuYnJvd3NlckRldGFpbHMuYnJvd3NlciA9PSBcImZpcmVmb3hcIikge1xuICAgICAgICAgICAgLy8gRG8gaXQgdGhlIEZpcmVmb3ggd2F5XG4gICAgICAgICAgICBpZihjb25maWcucmVtb3RlU3RyZWFtID09PSBudWxsIHx8IGNvbmZpZy5yZW1vdGVTdHJlYW0gPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIHx8IGNvbmZpZy5yZW1vdGVTdHJlYW0uc3RyZWFtID09PSBudWxsIHx8IGNvbmZpZy5yZW1vdGVTdHJlYW0uc3RyZWFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBKYW51cy53YXJuKFwiUmVtb3RlIHN0cmVhbSB1bmF2YWlsYWJsZVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJSZW1vdGUgc3RyZWFtIHVuYXZhaWxhYmxlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmlkZW9UcmFja3MgPSBjb25maWcucmVtb3RlU3RyZWFtLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpO1xuICAgICAgICAgICAgaWYodmlkZW9UcmFja3MgPT09IG51bGwgfHwgdmlkZW9UcmFja3MgPT09IHVuZGVmaW5lZCB8fCB2aWRlb1RyYWNrcy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAgSmFudXMud2FybihcIk5vIHZpZGVvIHRyYWNrXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBcIk5vIHZpZGVvIHRyYWNrXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbXVhei1raGFuL2dldFN0YXRzL2Jsb2IvbWFzdGVyL2dldFN0YXRzLmpzXG4gICAgICAgICAgICBpZihjb25maWcuYml0cmF0ZS50aW1lciA9PT0gbnVsbCB8fCBjb25maWcuYml0cmF0ZS50aW1lciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgSmFudXMubG9nKFwiU3RhcnRpbmcgYml0cmF0ZSB0aW1lciAoRmlyZWZveClcIik7XG4gICAgICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbmVlZCBhIGhlbHBlciBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2IgPSBmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcyA9PT0gbnVsbCB8fCByZXMgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5pbmJvdW5kX3J0cF92aWRlb18xID09IG51bGwgfHwgcmVzLmluYm91bmRfcnRwX3ZpZGVvXzEgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5iaXRyYXRlLnZhbHVlID0gXCJNaXNzaW5nIGluYm91bmRfcnRwX3ZpZGVvXzFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYml0cmF0ZS5ic25vdyA9IHJlcy5pbmJvdW5kX3J0cF92aWRlb18xLmJ5dGVzUmVjZWl2ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYml0cmF0ZS50c25vdyA9IHJlcy5pbmJvdW5kX3J0cF92aWRlb18xLnRpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbmZpZy5iaXRyYXRlLmJzYmVmb3JlID09PSBudWxsIHx8IGNvbmZpZy5iaXRyYXRlLnRzYmVmb3JlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCB0aGlzIHJvdW5kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUuYnNiZWZvcmUgPSBjb25maWcuYml0cmF0ZS5ic25vdztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYml0cmF0ZS50c2JlZm9yZSA9IGNvbmZpZy5iaXRyYXRlLnRzbm93O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgYml0cmF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXRSYXRlID0gTWF0aC5yb3VuZCgoY29uZmlnLmJpdHJhdGUuYnNub3cgLSBjb25maWcuYml0cmF0ZS5ic2JlZm9yZSkgKiA4IC8gKGNvbmZpZy5iaXRyYXRlLnRzbm93IC0gY29uZmlnLmJpdHJhdGUudHNiZWZvcmUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYml0cmF0ZS52YWx1ZSA9IGJpdFJhdGUgKyAnIGtiaXRzL3NlYyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUuYnNiZWZvcmUgPSBjb25maWcuYml0cmF0ZS5ic25vdztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuYml0cmF0ZS50c2JlZm9yZSA9IGNvbmZpZy5iaXRyYXRlLnRzbm93O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAvLyBBY3R1YWxseSBnZXQgdGhlIHN0YXRzXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5wYy5nZXRTdGF0cyh2aWRlb1RyYWNrc1swXSwgZnVuY3Rpb24oc3RhdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNiKHN0YXRzKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgY2IpO1xuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgICAgIHJldHVybiBcIjAga2JpdHMvc2VjXCI7XHQvLyBXZSBkb24ndCBoYXZlIGEgYml0cmF0ZSB2YWx1ZSB5ZXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb25maWcuYml0cmF0ZS52YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEphbnVzLndhcm4oXCJHZXR0aW5nIHRoZSB2aWRlbyBiaXRyYXRlIHVuc3VwcG9ydGVkIGJ5IGJyb3dzZXJcIik7XG4gICAgICAgICAgICByZXR1cm4gXCJGZWF0dXJlIHVuc3VwcG9ydGVkIGJ5IGJyb3dzZXJcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHdlYnJ0Y0Vycm9yKGVycm9yKSB7XG4gICAgICAgIEphbnVzLmVycm9yKFwiV2ViUlRDIGVycm9yOlwiLCBlcnJvcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYW51cFdlYnJ0YyhoYW5kbGVJZCwgaGFuZ3VwUmVxdWVzdCkge1xuICAgICAgICBKYW51cy5sb2coXCJDbGVhbmluZyBXZWJSVEMgc3R1ZmZcIik7XG4gICAgICAgIHZhciBwbHVnaW5IYW5kbGUgPSBwbHVnaW5IYW5kbGVzW2hhbmRsZUlkXTtcbiAgICAgICAgaWYocGx1Z2luSGFuZGxlID09PSBudWxsIHx8IHBsdWdpbkhhbmRsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBOb3RoaW5nIHRvIGNsZWFuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbmZpZyA9IHBsdWdpbkhhbmRsZS53ZWJydGNTdHVmZjtcbiAgICAgICAgaWYoY29uZmlnICE9PSBudWxsICYmIGNvbmZpZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZihoYW5ndXBSZXF1ZXN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgLy8gU2VuZCBhIGhhbmd1cCByZXF1ZXN0ICh3ZSBkb24ndCByZWFsbHkgY2FyZSBhYm91dCB0aGUgcmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSB7IFwiamFudXNcIjogXCJoYW5ndXBcIiwgXCJ0cmFuc2FjdGlvblwiOiByYW5kb21TdHJpbmcoMTIpIH07XG4gICAgICAgICAgICAgICAgaWYodG9rZW4gIT09IG51bGwgJiYgdG9rZW4gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFtcInRva2VuXCJdID0gdG9rZW47XG4gICAgICAgICAgICAgICAgaWYoYXBpc2VjcmV0ICE9PSBudWxsICYmIGFwaXNlY3JldCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0W1wiYXBpc2VjcmV0XCJdID0gYXBpc2VjcmV0O1xuICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnKFwiU2VuZGluZyBoYW5ndXAgcmVxdWVzdCAoaGFuZGxlPVwiICsgaGFuZGxlSWQgKyBcIik6XCIpO1xuICAgICAgICAgICAgICAgIEphbnVzLmRlYnVnKHJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIGlmKHdlYnNvY2tldHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFtcInNlc3Npb25faWRcIl0gPSBzZXNzaW9uSWQ7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RbXCJoYW5kbGVfaWRcIl0gPSBoYW5kbGVJZDtcbiAgICAgICAgICAgICAgICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShyZXF1ZXN0KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogc2VydmVyICsgXCIvXCIgKyBzZXNzaW9uSWQgKyBcIi9cIiArIGhhbmRsZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdCksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2xlYW51cCBzdGFja1xuICAgICAgICAgICAgY29uZmlnLnJlbW90ZVN0cmVhbSA9IG51bGw7XG4gICAgICAgICAgICBpZihjb25maWcudm9sdW1lLnRpbWVyKVxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY29uZmlnLnZvbHVtZS50aW1lcik7XG4gICAgICAgICAgICBjb25maWcudm9sdW1lLnZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIGlmKGNvbmZpZy5iaXRyYXRlLnRpbWVyKVxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY29uZmlnLmJpdHJhdGUudGltZXIpO1xuICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUudGltZXIgPSBudWxsO1xuICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUuYnNub3cgPSBudWxsO1xuICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUuYnNiZWZvcmUgPSBudWxsO1xuICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUudHNub3cgPSBudWxsO1xuICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUudHNiZWZvcmUgPSBudWxsO1xuICAgICAgICAgICAgY29uZmlnLmJpdHJhdGUudmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBUcnkgYSBNZWRpYVN0cmVhbS5zdG9wKCkgZmlyc3RcbiAgICAgICAgICAgICAgICBpZighY29uZmlnLnN0cmVhbUV4dGVybmFsICYmIGNvbmZpZy5teVN0cmVhbSAhPT0gbnVsbCAmJiBjb25maWcubXlTdHJlYW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJTdG9wcGluZyBsb2NhbCBzdHJlYW1cIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5teVN0cmVhbS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZyBpZiB0aGlzIGZhaWxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFRyeSBhIE1lZGlhU3RyZWFtVHJhY2suc3RvcCgpIGZvciBlYWNoIHRyYWNrIGFzIHdlbGxcbiAgICAgICAgICAgICAgICBpZighY29uZmlnLnN0cmVhbUV4dGVybmFsICYmIGNvbmZpZy5teVN0cmVhbSAhPT0gbnVsbCAmJiBjb25maWcubXlTdHJlYW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBKYW51cy5sb2coXCJTdG9wcGluZyBsb2NhbCBzdHJlYW0gdHJhY2tzXCIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHJhY2tzID0gY29uZmlnLm15U3RyZWFtLmdldFRyYWNrcygpO1xuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgaW4gdHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbXN0ID0gdHJhY2tzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgSmFudXMubG9nKG1zdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihtc3QgIT09IG51bGwgJiYgbXN0ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXN0LnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgdGhpcyBmYWlsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uZmlnLnN0cmVhbUV4dGVybmFsID0gZmFsc2U7XG4gICAgICAgICAgICBjb25maWcubXlTdHJlYW0gPSBudWxsO1xuICAgICAgICAgICAgLy8gQ2xvc2UgUGVlckNvbm5lY3Rpb25cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLnBjLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25maWcucGMgPSBudWxsO1xuICAgICAgICAgICAgY29uZmlnLm15U2RwID0gbnVsbDtcbiAgICAgICAgICAgIGNvbmZpZy5pY2VEb25lID0gZmFsc2U7XG4gICAgICAgICAgICBjb25maWcuc2RwU2VudCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uZmlnLmRhdGFDaGFubmVsID0gbnVsbDtcbiAgICAgICAgICAgIGNvbmZpZy5kdG1mU2VuZGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW5IYW5kbGUub25jbGVhbnVwKCk7XG4gICAgfVxuXG4gICAgLy8gSGVscGVyIG1ldGhvZHMgdG8gcGFyc2UgYSBtZWRpYSBvYmplY3RcbiAgICBmdW5jdGlvbiBpc0F1ZGlvU2VuZEVuYWJsZWQobWVkaWEpIHtcbiAgICAgICAgSmFudXMuZGVidWcoXCJpc0F1ZGlvU2VuZEVuYWJsZWQ6XCIsIG1lZGlhKTtcbiAgICAgICAgaWYobWVkaWEgPT09IHVuZGVmaW5lZCB8fCBtZWRpYSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1x0Ly8gRGVmYXVsdFxuICAgICAgICBpZihtZWRpYS5hdWRpbyA9PT0gZmFsc2UpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHQvLyBHZW5lcmljIGF1ZGlvIGhhcyBwcmVjZWRlbmNlXG4gICAgICAgIGlmKG1lZGlhLmF1ZGlvU2VuZCA9PT0gdW5kZWZpbmVkIHx8IG1lZGlhLmF1ZGlvU2VuZCA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1x0Ly8gRGVmYXVsdFxuICAgICAgICByZXR1cm4gKG1lZGlhLmF1ZGlvU2VuZCA9PT0gdHJ1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBdWRpb1NlbmRSZXF1aXJlZChtZWRpYSkge1xuICAgICAgICBKYW51cy5kZWJ1ZyhcImlzQXVkaW9TZW5kUmVxdWlyZWQ6XCIsIG1lZGlhKTtcbiAgICAgICAgaWYobWVkaWEgPT09IHVuZGVmaW5lZCB8fCBtZWRpYSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcdC8vIERlZmF1bHRcbiAgICAgICAgaWYobWVkaWEuYXVkaW8gPT09IGZhbHNlIHx8IG1lZGlhLmF1ZGlvU2VuZCA9PT0gZmFsc2UpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHQvLyBJZiB3ZSdyZSBub3QgYXNraW5nIHRvIGNhcHR1cmUgYXVkaW8sIGl0J3Mgbm90IHJlcXVpcmVkXG4gICAgICAgIGlmKG1lZGlhLmZhaWxJZk5vQXVkaW8gPT09IHVuZGVmaW5lZCB8fCBtZWRpYS5mYWlsSWZOb0F1ZGlvID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1x0Ly8gRGVmYXVsdFxuICAgICAgICByZXR1cm4gKG1lZGlhLmZhaWxJZk5vQXVkaW8gPT09IHRydWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQXVkaW9SZWN2RW5hYmxlZChtZWRpYSkge1xuICAgICAgICBKYW51cy5kZWJ1ZyhcImlzQXVkaW9SZWN2RW5hYmxlZDpcIiwgbWVkaWEpO1xuICAgICAgICBpZihtZWRpYSA9PT0gdW5kZWZpbmVkIHx8IG1lZGlhID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHQvLyBEZWZhdWx0XG4gICAgICAgIGlmKG1lZGlhLmF1ZGlvID09PSBmYWxzZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcdC8vIEdlbmVyaWMgYXVkaW8gaGFzIHByZWNlZGVuY2VcbiAgICAgICAgaWYobWVkaWEuYXVkaW9SZWN2ID09PSB1bmRlZmluZWQgfHwgbWVkaWEuYXVkaW9SZWN2ID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHQvLyBEZWZhdWx0XG4gICAgICAgIHJldHVybiAobWVkaWEuYXVkaW9SZWN2ID09PSB0cnVlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1ZpZGVvU2VuZEVuYWJsZWQobWVkaWEpIHtcbiAgICAgICAgSmFudXMuZGVidWcoXCJpc1ZpZGVvU2VuZEVuYWJsZWQ6XCIsIG1lZGlhKTtcbiAgICAgICAgaWYobWVkaWEgPT09IHVuZGVmaW5lZCB8fCBtZWRpYSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1x0Ly8gRGVmYXVsdFxuICAgICAgICBpZihtZWRpYS52aWRlbyA9PT0gZmFsc2UpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHQvLyBHZW5lcmljIHZpZGVvIGhhcyBwcmVjZWRlbmNlXG4gICAgICAgIGlmKG1lZGlhLnZpZGVvU2VuZCA9PT0gdW5kZWZpbmVkIHx8IG1lZGlhLnZpZGVvU2VuZCA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1x0Ly8gRGVmYXVsdFxuICAgICAgICByZXR1cm4gKG1lZGlhLnZpZGVvU2VuZCA9PT0gdHJ1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNWaWRlb1NlbmRSZXF1aXJlZChtZWRpYSkge1xuICAgICAgICBKYW51cy5kZWJ1ZyhcImlzVmlkZW9TZW5kUmVxdWlyZWQ6XCIsIG1lZGlhKTtcbiAgICAgICAgaWYobWVkaWEgPT09IHVuZGVmaW5lZCB8fCBtZWRpYSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcdC8vIERlZmF1bHRcbiAgICAgICAgaWYobWVkaWEudmlkZW8gPT09IGZhbHNlIHx8IG1lZGlhLnZpZGVvU2VuZCA9PT0gZmFsc2UpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHQvLyBJZiB3ZSdyZSBub3QgYXNraW5nIHRvIGNhcHR1cmUgdmlkZW8sIGl0J3Mgbm90IHJlcXVpcmVkXG4gICAgICAgIGlmKG1lZGlhLmZhaWxJZk5vVmlkZW8gPT09IHVuZGVmaW5lZCB8fCBtZWRpYS5mYWlsSWZOb1ZpZGVvID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1x0Ly8gRGVmYXVsdFxuICAgICAgICByZXR1cm4gKG1lZGlhLmZhaWxJZk5vVmlkZW8gPT09IHRydWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzVmlkZW9SZWN2RW5hYmxlZChtZWRpYSkge1xuICAgICAgICBKYW51cy5kZWJ1ZyhcImlzVmlkZW9SZWN2RW5hYmxlZDpcIiwgbWVkaWEpO1xuICAgICAgICBpZihtZWRpYSA9PT0gdW5kZWZpbmVkIHx8IG1lZGlhID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHQvLyBEZWZhdWx0XG4gICAgICAgIGlmKG1lZGlhLnZpZGVvID09PSBmYWxzZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcdC8vIEdlbmVyaWMgdmlkZW8gaGFzIHByZWNlZGVuY2VcbiAgICAgICAgaWYobWVkaWEudmlkZW9SZWN2ID09PSB1bmRlZmluZWQgfHwgbWVkaWEudmlkZW9SZWN2ID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHQvLyBEZWZhdWx0XG4gICAgICAgIHJldHVybiAobWVkaWEudmlkZW9SZWN2ID09PSB0cnVlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0RhdGFFbmFibGVkKG1lZGlhKSB7XG4gICAgICAgIEphbnVzLmRlYnVnKFwiaXNEYXRhRW5hYmxlZDpcIiwgbWVkaWEpO1xuICAgICAgICBpZihhZGFwdGVyLmJyb3dzZXJEZXRhaWxzLmJyb3dzZXIgPT0gXCJlZGdlXCIpIHtcbiAgICAgICAgICAgIEphbnVzLndhcm4oXCJFZGdlIGRvZXNuJ3Qgc3VwcG9ydCBkYXRhIGNoYW5uZWxzIHlldFwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZihtZWRpYSA9PT0gdW5kZWZpbmVkIHx8IG1lZGlhID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1x0Ly8gRGVmYXVsdFxuICAgICAgICByZXR1cm4gKG1lZGlhLmRhdGEgPT09IHRydWUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzVHJpY2tsZUVuYWJsZWQodHJpY2tsZSkge1xuICAgICAgICBKYW51cy5kZWJ1ZyhcImlzVHJpY2tsZUVuYWJsZWQ6XCIsIHRyaWNrbGUpO1xuICAgICAgICBpZih0cmlja2xlID09PSB1bmRlZmluZWQgfHwgdHJpY2tsZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1x0Ly8gRGVmYXVsdCBpcyB0cnVlXG4gICAgICAgIHJldHVybiAodHJpY2tsZSA9PT0gdHJ1ZSk7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBKYW51cztcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub25fbnBtX2RlcGVuZGVuY2llcy9qYW51cy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjU1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2553\n");

/***/ }),

/***/ 2554:
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\nvar adapterFactory = __webpack_require__(2555);\nmodule.exports = adapterFactory({window: global.window});\n\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(21)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1NC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvYWRhcHRlcl9jb3JlLmpzPzlkYWIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cbi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhZGFwdGVyRmFjdG9yeSA9IHJlcXVpcmUoJy4vYWRhcHRlcl9mYWN0b3J5LmpzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGFkYXB0ZXJGYWN0b3J5KHt3aW5kb3c6IGdsb2JhbC53aW5kb3d9KTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2FkYXB0ZXJfY29yZS5qc1xuLy8gbW9kdWxlIGlkID0gMjU1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2554\n");

/***/ }),

/***/ 2555:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\nvar utils = __webpack_require__(2251);\n// Shimming starts here.\nmodule.exports = function(dependencies, opts) {\n  var window = dependencies && dependencies.window;\n\n  var options = {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true,\n  };\n\n  for (var key in opts) {\n    if (hasOwnProperty.call(opts, key)) {\n      options[key] = opts[key];\n    }\n  }\n\n  // Utils.\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n\n  // Export to the adapter global object visible in the browser.\n  var adapter = {\n    browserDetails: browserDetails,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n\n  // Browser shims.\n  var chromeShim = __webpack_require__(2556) || null;\n  var edgeShim = __webpack_require__(2558) || null;\n  var firefoxShim = __webpack_require__(2561) || null;\n  var safariShim = __webpack_require__(2563) || null;\n  var commonShim = __webpack_require__(2564) || null;\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimSourceObject(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n      commonShim.shimCreateObjectURL(window);\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimSourceObject(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n      commonShim.shimCreateObjectURL(window);\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1NS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvYWRhcHRlcl9mYWN0b3J5LmpzP2RmN2QiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cbi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbi8vIFNoaW1taW5nIHN0YXJ0cyBoZXJlLlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkZXBlbmRlbmNpZXMsIG9wdHMpIHtcbiAgdmFyIHdpbmRvdyA9IGRlcGVuZGVuY2llcyAmJiBkZXBlbmRlbmNpZXMud2luZG93O1xuXG4gIHZhciBvcHRpb25zID0ge1xuICAgIHNoaW1DaHJvbWU6IHRydWUsXG4gICAgc2hpbUZpcmVmb3g6IHRydWUsXG4gICAgc2hpbUVkZ2U6IHRydWUsXG4gICAgc2hpbVNhZmFyaTogdHJ1ZSxcbiAgfTtcblxuICBmb3IgKHZhciBrZXkgaW4gb3B0cykge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdHMsIGtleSkpIHtcbiAgICAgIG9wdGlvbnNba2V5XSA9IG9wdHNba2V5XTtcbiAgICB9XG4gIH1cblxuICAvLyBVdGlscy5cbiAgdmFyIGxvZ2dpbmcgPSB1dGlscy5sb2c7XG4gIHZhciBicm93c2VyRGV0YWlscyA9IHV0aWxzLmRldGVjdEJyb3dzZXIod2luZG93KTtcblxuICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLlxuICB2YXIgYWRhcHRlciA9IHtcbiAgICBicm93c2VyRGV0YWlsczogYnJvd3NlckRldGFpbHMsXG4gICAgZXh0cmFjdFZlcnNpb246IHV0aWxzLmV4dHJhY3RWZXJzaW9uLFxuICAgIGRpc2FibGVMb2c6IHV0aWxzLmRpc2FibGVMb2csXG4gICAgZGlzYWJsZVdhcm5pbmdzOiB1dGlscy5kaXNhYmxlV2FybmluZ3NcbiAgfTtcblxuICAvLyBVbmNvbW1lbnQgdGhlIGxpbmUgYmVsb3cgaWYgeW91IHdhbnQgbG9nZ2luZyB0byBvY2N1ciwgaW5jbHVkaW5nIGxvZ2dpbmdcbiAgLy8gZm9yIHRoZSBzd2l0Y2ggc3RhdGVtZW50IGJlbG93LiBDYW4gYWxzbyBiZSB0dXJuZWQgb24gaW4gdGhlIGJyb3dzZXIgdmlhXG4gIC8vIGFkYXB0ZXIuZGlzYWJsZUxvZyhmYWxzZSksIGJ1dCB0aGVuIGxvZ2dpbmcgZnJvbSB0aGUgc3dpdGNoIHN0YXRlbWVudCBiZWxvd1xuICAvLyB3aWxsIG5vdCBhcHBlYXIuXG4gIC8vIHJlcXVpcmUoJy4vdXRpbHMnKS5kaXNhYmxlTG9nKGZhbHNlKTtcblxuICAvLyBCcm93c2VyIHNoaW1zLlxuICB2YXIgY2hyb21lU2hpbSA9IHJlcXVpcmUoJy4vY2hyb21lL2Nocm9tZV9zaGltJykgfHwgbnVsbDtcbiAgdmFyIGVkZ2VTaGltID0gcmVxdWlyZSgnLi9lZGdlL2VkZ2Vfc2hpbScpIHx8IG51bGw7XG4gIHZhciBmaXJlZm94U2hpbSA9IHJlcXVpcmUoJy4vZmlyZWZveC9maXJlZm94X3NoaW0nKSB8fCBudWxsO1xuICB2YXIgc2FmYXJpU2hpbSA9IHJlcXVpcmUoJy4vc2FmYXJpL3NhZmFyaV9zaGltJykgfHwgbnVsbDtcbiAgdmFyIGNvbW1vblNoaW0gPSByZXF1aXJlKCcuL2NvbW1vbl9zaGltJykgfHwgbnVsbDtcblxuICAvLyBTaGltIGJyb3dzZXIgaWYgZm91bmQuXG4gIHN3aXRjaCAoYnJvd3NlckRldGFpbHMuYnJvd3Nlcikge1xuICAgIGNhc2UgJ2Nocm9tZSc6XG4gICAgICBpZiAoIWNocm9tZVNoaW0gfHwgIWNocm9tZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uIHx8XG4gICAgICAgICAgIW9wdGlvbnMuc2hpbUNocm9tZSkge1xuICAgICAgICBsb2dnaW5nKCdDaHJvbWUgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuJyk7XG4gICAgICAgIHJldHVybiBhZGFwdGVyO1xuICAgICAgfVxuICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBjaHJvbWUuJyk7XG4gICAgICAvLyBFeHBvcnQgdG8gdGhlIGFkYXB0ZXIgZ2xvYmFsIG9iamVjdCB2aXNpYmxlIGluIHRoZSBicm93c2VyLlxuICAgICAgYWRhcHRlci5icm93c2VyU2hpbSA9IGNocm9tZVNoaW07XG4gICAgICBjb21tb25TaGltLnNoaW1DcmVhdGVPYmplY3RVUkwod2luZG93KTtcblxuICAgICAgY2hyb21lU2hpbS5zaGltR2V0VXNlck1lZGlhKHdpbmRvdyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1NZWRpYVN0cmVhbSh3aW5kb3cpO1xuICAgICAgY2hyb21lU2hpbS5zaGltU291cmNlT2JqZWN0KHdpbmRvdyk7XG4gICAgICBjaHJvbWVTaGltLnNoaW1QZWVyQ29ubmVjdGlvbih3aW5kb3cpO1xuICAgICAgY2hyb21lU2hpbS5zaGltT25UcmFjayh3aW5kb3cpO1xuICAgICAgY2hyb21lU2hpbS5zaGltQWRkVHJhY2tSZW1vdmVUcmFjayh3aW5kb3cpO1xuICAgICAgY2hyb21lU2hpbS5zaGltR2V0U2VuZGVyc1dpdGhEdG1mKHdpbmRvdyk7XG5cbiAgICAgIGNvbW1vblNoaW0uc2hpbVJUQ0ljZUNhbmRpZGF0ZSh3aW5kb3cpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZmlyZWZveCc6XG4gICAgICBpZiAoIWZpcmVmb3hTaGltIHx8ICFmaXJlZm94U2hpbS5zaGltUGVlckNvbm5lY3Rpb24gfHxcbiAgICAgICAgICAhb3B0aW9ucy5zaGltRmlyZWZveCkge1xuICAgICAgICBsb2dnaW5nKCdGaXJlZm94IHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpO1xuICAgICAgICByZXR1cm4gYWRhcHRlcjtcbiAgICAgIH1cbiAgICAgIGxvZ2dpbmcoJ2FkYXB0ZXIuanMgc2hpbW1pbmcgZmlyZWZveC4nKTtcbiAgICAgIC8vIEV4cG9ydCB0byB0aGUgYWRhcHRlciBnbG9iYWwgb2JqZWN0IHZpc2libGUgaW4gdGhlIGJyb3dzZXIuXG4gICAgICBhZGFwdGVyLmJyb3dzZXJTaGltID0gZmlyZWZveFNoaW07XG4gICAgICBjb21tb25TaGltLnNoaW1DcmVhdGVPYmplY3RVUkwod2luZG93KTtcblxuICAgICAgZmlyZWZveFNoaW0uc2hpbUdldFVzZXJNZWRpYSh3aW5kb3cpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbVNvdXJjZU9iamVjdCh3aW5kb3cpO1xuICAgICAgZmlyZWZveFNoaW0uc2hpbVBlZXJDb25uZWN0aW9uKHdpbmRvdyk7XG4gICAgICBmaXJlZm94U2hpbS5zaGltT25UcmFjayh3aW5kb3cpO1xuXG4gICAgICBjb21tb25TaGltLnNoaW1SVENJY2VDYW5kaWRhdGUod2luZG93KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2VkZ2UnOlxuICAgICAgaWYgKCFlZGdlU2hpbSB8fCAhZWRnZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uIHx8ICFvcHRpb25zLnNoaW1FZGdlKSB7XG4gICAgICAgIGxvZ2dpbmcoJ01TIGVkZ2Ugc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuJyk7XG4gICAgICAgIHJldHVybiBhZGFwdGVyO1xuICAgICAgfVxuICAgICAgbG9nZ2luZygnYWRhcHRlci5qcyBzaGltbWluZyBlZGdlLicpO1xuICAgICAgLy8gRXhwb3J0IHRvIHRoZSBhZGFwdGVyIGdsb2JhbCBvYmplY3QgdmlzaWJsZSBpbiB0aGUgYnJvd3Nlci5cbiAgICAgIGFkYXB0ZXIuYnJvd3NlclNoaW0gPSBlZGdlU2hpbTtcbiAgICAgIGNvbW1vblNoaW0uc2hpbUNyZWF0ZU9iamVjdFVSTCh3aW5kb3cpO1xuXG4gICAgICBlZGdlU2hpbS5zaGltR2V0VXNlck1lZGlhKHdpbmRvdyk7XG4gICAgICBlZGdlU2hpbS5zaGltUGVlckNvbm5lY3Rpb24od2luZG93KTtcbiAgICAgIGVkZ2VTaGltLnNoaW1SZXBsYWNlVHJhY2sod2luZG93KTtcblxuICAgICAgLy8gdGhlIGVkZ2Ugc2hpbSBpbXBsZW1lbnRzIHRoZSBmdWxsIFJUQ0ljZUNhbmRpZGF0ZSBvYmplY3QuXG4gICAgICBicmVhaztcbiAgICBjYXNlICdzYWZhcmknOlxuICAgICAgaWYgKCFzYWZhcmlTaGltIHx8ICFvcHRpb25zLnNoaW1TYWZhcmkpIHtcbiAgICAgICAgbG9nZ2luZygnU2FmYXJpIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLicpO1xuICAgICAgICByZXR1cm4gYWRhcHRlcjtcbiAgICAgIH1cbiAgICAgIGxvZ2dpbmcoJ2FkYXB0ZXIuanMgc2hpbW1pbmcgc2FmYXJpLicpO1xuICAgICAgLy8gRXhwb3J0IHRvIHRoZSBhZGFwdGVyIGdsb2JhbCBvYmplY3QgdmlzaWJsZSBpbiB0aGUgYnJvd3Nlci5cbiAgICAgIGFkYXB0ZXIuYnJvd3NlclNoaW0gPSBzYWZhcmlTaGltO1xuICAgICAgY29tbW9uU2hpbS5zaGltQ3JlYXRlT2JqZWN0VVJMKHdpbmRvdyk7XG5cbiAgICAgIHNhZmFyaVNoaW0uc2hpbVJUQ0ljZVNlcnZlclVybHMod2luZG93KTtcbiAgICAgIHNhZmFyaVNoaW0uc2hpbUNhbGxiYWNrc0FQSSh3aW5kb3cpO1xuICAgICAgc2FmYXJpU2hpbS5zaGltTG9jYWxTdHJlYW1zQVBJKHdpbmRvdyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1SZW1vdGVTdHJlYW1zQVBJKHdpbmRvdyk7XG4gICAgICBzYWZhcmlTaGltLnNoaW1UcmFja0V2ZW50VHJhbnNjZWl2ZXIod2luZG93KTtcbiAgICAgIHNhZmFyaVNoaW0uc2hpbUdldFVzZXJNZWRpYSh3aW5kb3cpO1xuXG4gICAgICBjb21tb25TaGltLnNoaW1SVENJY2VDYW5kaWRhdGUod2luZG93KTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBsb2dnaW5nKCdVbnN1cHBvcnRlZCBicm93c2VyIScpO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gYWRhcHRlcjtcbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9hZGFwdGVyX2ZhY3RvcnkuanNcbi8vIG1vZHVsZSBpZCA9IDI1NTVcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2555\n");

/***/ }),

/***/ 2556:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = __webpack_require__(2251);\nvar logging = utils.log;\n\nvar chromeShim = {\n  shimMediaStream: function(window) {\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\n  },\n\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n          }\n          this.addEventListener('track', this._ontrack = f);\n        }\n      });\n      var origSetRemoteDescription =\n          window.RTCPeerConnection.prototype.setRemoteDescription;\n      window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n        var pc = this;\n        if (!pc._ontrackpoly) {\n          pc._ontrackpoly = function(e) {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', function(te) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track && r.track.id === te.track.id;\n                });\n              } else {\n                receiver = {track: te.track};\n              }\n\n              var event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver: receiver};\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(function(track) {\n              var receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = pc.getReceivers().find(function(r) {\n                  return r.track && r.track.id === track.id;\n                });\n              } else {\n                receiver = {track: track};\n              }\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver: receiver};\n              event.streams = [e.stream];\n              pc.dispatchEvent(event);\n            });\n          };\n          pc.addEventListener('addstream', pc._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n    }\n  },\n\n  shimGetSendersWithDtmf: function(window) {\n    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        !('getSenders' in window.RTCPeerConnection.prototype) &&\n        'createDTMFSender' in window.RTCPeerConnection.prototype) {\n      var shimSenderWithDtmf = function(pc, track) {\n        return {\n          track: track,\n          get dtmf() {\n            if (this._dtmf === undefined) {\n              if (track.kind === 'audio') {\n                this._dtmf = pc.createDTMFSender(track);\n              } else {\n                this._dtmf = null;\n              }\n            }\n            return this._dtmf;\n          },\n          _pc: pc\n        };\n      };\n\n      // augment addTrack when getSenders is not available.\n      if (!window.RTCPeerConnection.prototype.getSenders) {\n        window.RTCPeerConnection.prototype.getSenders = function() {\n          this._senders = this._senders || [];\n          return this._senders.slice(); // return a copy of the internal state.\n        };\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n          var pc = this;\n          var sender = origAddTrack.apply(pc, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(pc, track);\n            pc._senders.push(sender);\n          }\n          return sender;\n        };\n\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n          var pc = this;\n          origRemoveTrack.apply(pc, arguments);\n          var idx = pc._senders.indexOf(sender);\n          if (idx !== -1) {\n            pc._senders.splice(idx, 1);\n          }\n        };\n      }\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origAddStream.apply(pc, [stream]);\n        stream.getTracks().forEach(function(track) {\n          pc._senders.push(shimSenderWithDtmf(pc, track));\n        });\n      };\n\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        var pc = this;\n        pc._senders = pc._senders || [];\n        origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n\n        stream.getTracks().forEach(function(track) {\n          var sender = pc._senders.find(function(s) {\n            return s.track === track;\n          });\n          if (sender) {\n            pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n          }\n        });\n      };\n    } else if (typeof window === 'object' && window.RTCPeerConnection &&\n               'getSenders' in window.RTCPeerConnection.prototype &&\n               'createDTMFSender' in window.RTCPeerConnection.prototype &&\n               window.RTCRtpSender &&\n               !('dtmf' in window.RTCRtpSender.prototype)) {\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        var pc = this;\n        var senders = origGetSenders.apply(pc, []);\n        senders.forEach(function(sender) {\n          sender._pc = pc;\n        });\n        return senders;\n      };\n\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = this._pc.createDTMFSender(this.track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    var URL = window && window.URL;\n\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this._srcObject;\n          },\n          set: function(stream) {\n            var self = this;\n            // Use _srcObject as a private property for this shim\n            this._srcObject = stream;\n            if (this.src) {\n              URL.revokeObjectURL(this.src);\n            }\n\n            if (!stream) {\n              this.src = '';\n              return undefined;\n            }\n            this.src = URL.createObjectURL(stream);\n            // We need to recreate the blob url when a track is added or\n            // removed. Doing it manually since we want to avoid a recursion.\n            stream.addEventListener('addtrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n            stream.addEventListener('removetrack', function() {\n              if (self.src) {\n                URL.revokeObjectURL(self.src);\n              }\n              self.src = URL.createObjectURL(stream);\n            });\n          }\n        });\n      }\n    }\n  },\n\n  shimAddTrackRemoveTrack: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n    // shim addTrack and removeTrack.\n    if (window.RTCPeerConnection.prototype.addTrack &&\n        browserDetails.version >= 62) {\n      return;\n    }\n\n    // also shim pc.getLocalStreams when addTrack is shimmed\n    // to return the original streams.\n    var origGetLocalStreams = window.RTCPeerConnection.prototype\n        .getLocalStreams;\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n      var self = this;\n      var nativeStreams = origGetLocalStreams.apply(this);\n      self._reverseStreams = self._reverseStreams || {};\n      return nativeStreams.map(function(stream) {\n        return self._reverseStreams[stream.id];\n      });\n    };\n\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      stream.getTracks().forEach(function(track) {\n        var alreadyExists = pc.getSenders().find(function(s) {\n          return s.track === track;\n        });\n        if (alreadyExists) {\n          throw new DOMException('Track already exists.',\n              'InvalidAccessError');\n        }\n      });\n      // Add identity mapping for consistency with addTrack.\n      // Unless this is being used with a stream from addTrack.\n      if (!pc._reverseStreams[stream.id]) {\n        var newStream = new window.MediaStream(stream.getTracks());\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        stream = newStream;\n      }\n      origAddStream.apply(pc, [stream]);\n    };\n\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      var pc = this;\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n\n      origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n      delete pc._reverseStreams[(pc._streams[stream.id] ?\n          pc._streams[stream.id].id : stream.id)];\n      delete pc._streams[stream.id];\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      var streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(function(t) {\n            return t === track;\n          })) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      var alreadyExists = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      pc._streams = pc._streams || {};\n      pc._reverseStreams = pc._reverseStreams || {};\n      var oldStream = pc._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(function() {\n          pc.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        var newStream = new window.MediaStream([track]);\n        pc._streams[stream.id] = newStream;\n        pc._reverseStreams[newStream.id] = stream;\n        pc.addStream(newStream);\n      }\n      return pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n    };\n\n    // replace the internal stream id with the external one and\n    // vice versa.\n    function replaceInternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n            externalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    function replaceExternalStreamId(pc, description) {\n      var sdp = description.sdp;\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n        var externalStream = pc._reverseStreams[internalId];\n        var internalStream = pc._streams[externalStream.id];\n        sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n            internalStream.id);\n      });\n      return new RTCSessionDescription({\n        type: description.type,\n        sdp: sdp\n      });\n    }\n    ['createOffer', 'createAnswer'].forEach(function(method) {\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\n      window.RTCPeerConnection.prototype[method] = function() {\n        var pc = this;\n        var args = arguments;\n        var isLegacyCall = arguments.length &&\n            typeof arguments[0] === 'function';\n        if (isLegacyCall) {\n          return nativeMethod.apply(pc, [\n            function(description) {\n              var desc = replaceInternalStreamId(pc, description);\n              args[0].apply(null, [desc]);\n            },\n            function(err) {\n              if (args[1]) {\n                args[1].apply(null, err);\n              }\n            }, arguments[2]\n          ]);\n        }\n        return nativeMethod.apply(pc, arguments)\n        .then(function(description) {\n          return replaceInternalStreamId(pc, description);\n        });\n      };\n    });\n\n    var origSetLocalDescription =\n        window.RTCPeerConnection.prototype.setLocalDescription;\n    window.RTCPeerConnection.prototype.setLocalDescription = function() {\n      var pc = this;\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(pc, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(pc, arguments[0]);\n      return origSetLocalDescription.apply(pc, arguments);\n    };\n\n    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n    var origLocalDescription = Object.getOwnPropertyDescriptor(\n        window.RTCPeerConnection.prototype, 'localDescription');\n    Object.defineProperty(window.RTCPeerConnection.prototype,\n        'localDescription', {\n          get: function() {\n            var pc = this;\n            var description = origLocalDescription.get.apply(this);\n            if (description.type === '') {\n              return description;\n            }\n            return replaceInternalStreamId(pc, description);\n          }\n        });\n\n    window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n      var pc = this;\n      if (pc.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      var isLocal = sender._pc === pc;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      pc._streams = pc._streams || {};\n      var stream;\n      Object.keys(pc._streams).forEach(function(streamid) {\n        var hasTrack = pc._streams[streamid].getTracks().find(function(track) {\n          return sender.track === track;\n        });\n        if (hasTrack) {\n          stream = pc._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          pc.removeStream(stream);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        pc.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        // Translate iceTransportPolicy to iceTransports,\n        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n        logging('PeerConnection');\n        if (pcConfig && pcConfig.iceTransportPolicy) {\n          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n        }\n\n        return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.webkitRTCPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      if (window.webkitRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.webkitRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n    } else {\n      // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n      var OrigPeerConnection = window.RTCPeerConnection;\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (pcConfig && pcConfig.iceServers) {\n          var newIceServers = [];\n          for (var i = 0; i < pcConfig.iceServers.length; i++) {\n            var server = pcConfig.iceServers[i];\n            if (!server.hasOwnProperty('urls') &&\n                server.hasOwnProperty('url')) {\n              utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n              server = JSON.parse(JSON.stringify(server));\n              server.urls = server.url;\n              newIceServers.push(server);\n            } else {\n              newIceServers.push(pcConfig.iceServers[i]);\n            }\n          }\n          pcConfig.iceServers = newIceServers;\n        }\n        return new OrigPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n      // wrap static methods. Currently just generateCertificate.\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(selector,\n        successCallback, errorCallback) {\n      var self = this;\n      var args = arguments;\n\n      // If selector is a function then we are in the old style stats so just\n      // pass back the original getStats format to avoid breaking old users.\n      if (arguments.length > 0 && typeof selector === 'function') {\n        return origGetStats.apply(this, arguments);\n      }\n\n      // When spec-style getStats is supported, return those when called with\n      // either no arguments or the selector argument is null.\n      if (origGetStats.length === 0 && (arguments.length === 0 ||\n          typeof arguments[0] !== 'function')) {\n        return origGetStats.apply(this, []);\n      }\n\n      var fixChromeStats_ = function(response) {\n        var standardReport = {};\n        var reports = response.result();\n        reports.forEach(function(report) {\n          var standardStats = {\n            id: report.id,\n            timestamp: report.timestamp,\n            type: {\n              localcandidate: 'local-candidate',\n              remotecandidate: 'remote-candidate'\n            }[report.type] || report.type\n          };\n          report.names().forEach(function(name) {\n            standardStats[name] = report.stat(name);\n          });\n          standardReport[standardStats.id] = standardStats;\n        });\n\n        return standardReport;\n      };\n\n      // shim getStats with maplike support\n      var makeMapStats = function(stats) {\n        return new Map(Object.keys(stats).map(function(key) {\n          return [key, stats[key]];\n        }));\n      };\n\n      if (arguments.length >= 2) {\n        var successCallbackWrapper_ = function(response) {\n          args[1](makeMapStats(fixChromeStats_(response)));\n        };\n\n        return origGetStats.apply(this, [successCallbackWrapper_,\n          arguments[0]]);\n      }\n\n      // promise-support\n      return new Promise(function(resolve, reject) {\n        origGetStats.apply(self, [\n          function(response) {\n            resolve(makeMapStats(fixChromeStats_(response)));\n          }, reject]);\n      }).then(successCallback, errorCallback);\n    };\n\n    // add promise support -- natively available in Chrome 51\n    if (browserDetails.version < 51) {\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n          .forEach(function(method) {\n            var nativeMethod = window.RTCPeerConnection.prototype[method];\n            window.RTCPeerConnection.prototype[method] = function() {\n              var args = arguments;\n              var self = this;\n              var promise = new Promise(function(resolve, reject) {\n                nativeMethod.apply(self, [args[0], resolve, reject]);\n              });\n              if (args.length < 2) {\n                return promise;\n              }\n              return promise.then(function() {\n                args[1].apply(null, []);\n              },\n              function(err) {\n                if (args.length >= 3) {\n                  args[2].apply(null, [err]);\n                }\n              });\n            };\n          });\n    }\n\n    // promise support for createOffer and createAnswer. Available (without\n    // bugs) since M52: crbug/619289\n    if (browserDetails.version < 52) {\n      ['createOffer', 'createAnswer'].forEach(function(method) {\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          var self = this;\n          if (arguments.length < 1 || (arguments.length === 1 &&\n              typeof arguments[0] === 'object')) {\n            var opts = arguments.length === 1 ? arguments[0] : undefined;\n            return new Promise(function(resolve, reject) {\n              nativeMethod.apply(self, [resolve, reject, opts]);\n            });\n          }\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n    }\n\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n  }\n};\n\n\n// Expose public methods.\nmodule.exports = {\n  shimMediaStream: chromeShim.shimMediaStream,\n  shimOnTrack: chromeShim.shimOnTrack,\n  shimAddTrackRemoveTrack: chromeShim.shimAddTrackRemoveTrack,\n  shimGetSendersWithDtmf: chromeShim.shimGetSendersWithDtmf,\n  shimSourceObject: chromeShim.shimSourceObject,\n  shimPeerConnection: chromeShim.shimPeerConnection,\n  shimGetUserMedia: __webpack_require__(2557)\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1Ni5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2Nocm9tZV9zaGltLmpzPzY0MzIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cblxuLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscy5qcycpO1xudmFyIGxvZ2dpbmcgPSB1dGlscy5sb2c7XG5cbnZhciBjaHJvbWVTaGltID0ge1xuICBzaGltTWVkaWFTdHJlYW06IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIHdpbmRvdy5NZWRpYVN0cmVhbSA9IHdpbmRvdy5NZWRpYVN0cmVhbSB8fCB3aW5kb3cud2Via2l0TWVkaWFTdHJlYW07XG4gIH0sXG5cbiAgc2hpbU9uVHJhY2s6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgISgnb250cmFjaycgaW5cbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnb250cmFjaycsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fb250cmFjaztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbihmKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX29udHJhY2spIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCd0cmFjaycsIHRoaXMuX29udHJhY2sgPSBmKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB2YXIgb3JpZ1NldFJlbW90ZURlc2NyaXB0aW9uID1cbiAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgICBpZiAoIXBjLl9vbnRyYWNrcG9seSkge1xuICAgICAgICAgIHBjLl9vbnRyYWNrcG9seSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIC8vIG9uYWRkc3RyZWFtIGRvZXMgbm90IGZpcmUgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIHRvIGFuIGV4aXN0aW5nXG4gICAgICAgICAgICAvLyBzdHJlYW0uIEJ1dCBzdHJlYW0ub25hZGR0cmFjayBpcyBpbXBsZW1lbnRlZCBzbyB3ZSB1c2UgdGhhdC5cbiAgICAgICAgICAgIGUuc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHRyYWNrJywgZnVuY3Rpb24odGUpIHtcbiAgICAgICAgICAgICAgdmFyIHJlY2VpdmVyO1xuICAgICAgICAgICAgICBpZiAod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnMpIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlciA9IHBjLmdldFJlY2VpdmVycygpLmZpbmQoZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHIudHJhY2sgJiYgci50cmFjay5pZCA9PT0gdGUudHJhY2suaWQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSB7dHJhY2s6IHRlLnRyYWNrfTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTtcbiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0ZS50cmFjaztcbiAgICAgICAgICAgICAgZXZlbnQucmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICAgICAgICAgICAgZXZlbnQudHJhbnNjZWl2ZXIgPSB7cmVjZWl2ZXI6IHJlY2VpdmVyfTtcbiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07XG4gICAgICAgICAgICAgIHBjLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICAgIHZhciByZWNlaXZlcjtcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzKSB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIgPSBwYy5nZXRSZWNlaXZlcnMoKS5maW5kKGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByLnRyYWNrICYmIHIudHJhY2suaWQgPT09IHRyYWNrLmlkO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVyID0ge3RyYWNrOiB0cmFja307XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCd0cmFjaycpO1xuICAgICAgICAgICAgICBldmVudC50cmFjayA9IHRyYWNrO1xuICAgICAgICAgICAgICBldmVudC5yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgICAgICAgICAgICBldmVudC50cmFuc2NlaXZlciA9IHtyZWNlaXZlcjogcmVjZWl2ZXJ9O1xuICAgICAgICAgICAgICBldmVudC5zdHJlYW1zID0gW2Uuc3RyZWFtXTtcbiAgICAgICAgICAgICAgcGMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHBjLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHN0cmVhbScsIHBjLl9vbnRyYWNrcG9seSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9yaWdTZXRSZW1vdGVEZXNjcmlwdGlvbi5hcHBseShwYywgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfVxuICB9LFxuXG4gIHNoaW1HZXRTZW5kZXJzV2l0aER0bWY6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIC8vIE92ZXJyaWRlcyBhZGRUcmFjay9yZW1vdmVUcmFjaywgZGVwZW5kcyBvbiBzaGltQWRkVHJhY2tSZW1vdmVUcmFjay5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uICYmXG4gICAgICAgICEoJ2dldFNlbmRlcnMnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpICYmXG4gICAgICAgICdjcmVhdGVEVE1GU2VuZGVyJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSB7XG4gICAgICB2YXIgc2hpbVNlbmRlcldpdGhEdG1mID0gZnVuY3Rpb24ocGMsIHRyYWNrKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHJhY2s6IHRyYWNrLFxuICAgICAgICAgIGdldCBkdG1mKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2R0bWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBpZiAodHJhY2sua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBwYy5jcmVhdGVEVE1GU2VuZGVyKHRyYWNrKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9kdG1mID0gbnVsbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2R0bWY7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBfcGM6IHBjXG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICAvLyBhdWdtZW50IGFkZFRyYWNrIHdoZW4gZ2V0U2VuZGVycyBpcyBub3QgYXZhaWxhYmxlLlxuICAgICAgaWYgKCF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMpIHtcbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGhpcy5fc2VuZGVycyA9IHRoaXMuX3NlbmRlcnMgfHwgW107XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRlcnMuc2xpY2UoKTsgLy8gcmV0dXJuIGEgY29weSBvZiB0aGUgaW50ZXJuYWwgc3RhdGUuXG4gICAgICAgIH07XG4gICAgICAgIHZhciBvcmlnQWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO1xuICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID0gZnVuY3Rpb24odHJhY2ssIHN0cmVhbSkge1xuICAgICAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICAgICAgdmFyIHNlbmRlciA9IG9yaWdBZGRUcmFjay5hcHBseShwYywgYXJndW1lbnRzKTtcbiAgICAgICAgICBpZiAoIXNlbmRlcikge1xuICAgICAgICAgICAgc2VuZGVyID0gc2hpbVNlbmRlcldpdGhEdG1mKHBjLCB0cmFjayk7XG4gICAgICAgICAgICBwYy5fc2VuZGVycy5wdXNoKHNlbmRlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzZW5kZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG9yaWdSZW1vdmVUcmFjayA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s7XG4gICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2sgPSBmdW5jdGlvbihzZW5kZXIpIHtcbiAgICAgICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgICAgIG9yaWdSZW1vdmVUcmFjay5hcHBseShwYywgYXJndW1lbnRzKTtcbiAgICAgICAgICB2YXIgaWR4ID0gcGMuX3NlbmRlcnMuaW5kZXhPZihzZW5kZXIpO1xuICAgICAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgICAgICBwYy5fc2VuZGVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICB2YXIgb3JpZ0FkZFN0cmVhbSA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0gPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgICAgcGMuX3NlbmRlcnMgPSBwYy5fc2VuZGVycyB8fCBbXTtcbiAgICAgICAgb3JpZ0FkZFN0cmVhbS5hcHBseShwYywgW3N0cmVhbV0pO1xuICAgICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaykge1xuICAgICAgICAgIHBjLl9zZW5kZXJzLnB1c2goc2hpbVNlbmRlcldpdGhEdG1mKHBjLCB0cmFjaykpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBvcmlnUmVtb3ZlU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgICBwYy5fc2VuZGVycyA9IHBjLl9zZW5kZXJzIHx8IFtdO1xuICAgICAgICBvcmlnUmVtb3ZlU3RyZWFtLmFwcGx5KHBjLCBbKHBjLl9zdHJlYW1zW3N0cmVhbS5pZF0gfHwgc3RyZWFtKV0pO1xuXG4gICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgdmFyIHNlbmRlciA9IHBjLl9zZW5kZXJzLmZpbmQoZnVuY3Rpb24ocykge1xuICAgICAgICAgICAgcmV0dXJuIHMudHJhY2sgPT09IHRyYWNrO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChzZW5kZXIpIHtcbiAgICAgICAgICAgIHBjLl9zZW5kZXJzLnNwbGljZShwYy5fc2VuZGVycy5pbmRleE9mKHNlbmRlciksIDEpOyAvLyByZW1vdmUgc2VuZGVyXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiZcbiAgICAgICAgICAgICAgICdnZXRTZW5kZXJzJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlICYmXG4gICAgICAgICAgICAgICAnY3JlYXRlRFRNRlNlbmRlcicgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSAmJlxuICAgICAgICAgICAgICAgd2luZG93LlJUQ1J0cFNlbmRlciAmJlxuICAgICAgICAgICAgICAgISgnZHRtZicgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKSB7XG4gICAgICB2YXIgb3JpZ0dldFNlbmRlcnMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM7XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgICAgdmFyIHNlbmRlcnMgPSBvcmlnR2V0U2VuZGVycy5hcHBseShwYywgW10pO1xuICAgICAgICBzZW5kZXJzLmZvckVhY2goZnVuY3Rpb24oc2VuZGVyKSB7XG4gICAgICAgICAgc2VuZGVyLl9wYyA9IHBjO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlbmRlcnM7XG4gICAgICB9O1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUsICdkdG1mJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICh0aGlzLl9kdG1mID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYWNrLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZHRtZiA9IHRoaXMuX3BjLmNyZWF0ZURUTUZTZW5kZXIodGhpcy50cmFjayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLl9kdG1mID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2R0bWY7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBzaGltU291cmNlT2JqZWN0OiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICB2YXIgVVJMID0gd2luZG93ICYmIHdpbmRvdy5VUkw7XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGlmICh3aW5kb3cuSFRNTE1lZGlhRWxlbWVudCAmJlxuICAgICAgICAhKCdzcmNPYmplY3QnIGluIHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSkpIHtcbiAgICAgICAgLy8gU2hpbSB0aGUgc3JjT2JqZWN0IHByb3BlcnR5LCBvbmNlLCB3aGVuIEhUTUxNZWRpYUVsZW1lbnQgaXMgZm91bmQuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsICdzcmNPYmplY3QnLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zcmNPYmplY3Q7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgLy8gVXNlIF9zcmNPYmplY3QgYXMgYSBwcml2YXRlIHByb3BlcnR5IGZvciB0aGlzIHNoaW1cbiAgICAgICAgICAgIHRoaXMuX3NyY09iamVjdCA9IHN0cmVhbTtcbiAgICAgICAgICAgIGlmICh0aGlzLnNyYykge1xuICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuc3JjKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFzdHJlYW0pIHtcbiAgICAgICAgICAgICAgdGhpcy5zcmMgPSAnJztcbiAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pO1xuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byByZWNyZWF0ZSB0aGUgYmxvYiB1cmwgd2hlbiBhIHRyYWNrIGlzIGFkZGVkIG9yXG4gICAgICAgICAgICAvLyByZW1vdmVkLiBEb2luZyBpdCBtYW51YWxseSBzaW5jZSB3ZSB3YW50IHRvIGF2b2lkIGEgcmVjdXJzaW9uLlxuICAgICAgICAgICAgc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZHRyYWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmIChzZWxmLnNyYykge1xuICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoc2VsZi5zcmMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNlbGYuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdHJlYW0uYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZldHJhY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKHNlbGYuc3JjKSB7XG4gICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChzZWxmLnNyYyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2VsZi5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBzaGltQWRkVHJhY2tSZW1vdmVUcmFjazogZnVuY3Rpb24od2luZG93KSB7XG4gICAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpO1xuICAgIC8vIHNoaW0gYWRkVHJhY2sgYW5kIHJlbW92ZVRyYWNrLlxuICAgIGlmICh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrICYmXG4gICAgICAgIGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPj0gNjIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBhbHNvIHNoaW0gcGMuZ2V0TG9jYWxTdHJlYW1zIHdoZW4gYWRkVHJhY2sgaXMgc2hpbW1lZFxuICAgIC8vIHRvIHJldHVybiB0aGUgb3JpZ2luYWwgc3RyZWFtcy5cbiAgICB2YXIgb3JpZ0dldExvY2FsU3RyZWFtcyA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVcbiAgICAgICAgLmdldExvY2FsU3RyZWFtcztcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIG5hdGl2ZVN0cmVhbXMgPSBvcmlnR2V0TG9jYWxTdHJlYW1zLmFwcGx5KHRoaXMpO1xuICAgICAgc2VsZi5fcmV2ZXJzZVN0cmVhbXMgPSBzZWxmLl9yZXZlcnNlU3RyZWFtcyB8fCB7fTtcbiAgICAgIHJldHVybiBuYXRpdmVTdHJlYW1zLm1hcChmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuX3JldmVyc2VTdHJlYW1zW3N0cmVhbS5pZF07XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIG9yaWdBZGRTdHJlYW0gPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbTtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbSA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgIHBjLl9zdHJlYW1zID0gcGMuX3N0cmVhbXMgfHwge307XG4gICAgICBwYy5fcmV2ZXJzZVN0cmVhbXMgPSBwYy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG5cbiAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgIHZhciBhbHJlYWR5RXhpc3RzID0gcGMuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24ocykge1xuICAgICAgICAgIHJldHVybiBzLnRyYWNrID09PSB0cmFjaztcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignVHJhY2sgYWxyZWFkeSBleGlzdHMuJyxcbiAgICAgICAgICAgICAgJ0ludmFsaWRBY2Nlc3NFcnJvcicpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIEFkZCBpZGVudGl0eSBtYXBwaW5nIGZvciBjb25zaXN0ZW5jeSB3aXRoIGFkZFRyYWNrLlxuICAgICAgLy8gVW5sZXNzIHRoaXMgaXMgYmVpbmcgdXNlZCB3aXRoIGEgc3RyZWFtIGZyb20gYWRkVHJhY2suXG4gICAgICBpZiAoIXBjLl9yZXZlcnNlU3RyZWFtc1tzdHJlYW0uaWRdKSB7XG4gICAgICAgIHZhciBuZXdTdHJlYW0gPSBuZXcgd2luZG93Lk1lZGlhU3RyZWFtKHN0cmVhbS5nZXRUcmFja3MoKSk7XG4gICAgICAgIHBjLl9zdHJlYW1zW3N0cmVhbS5pZF0gPSBuZXdTdHJlYW07XG4gICAgICAgIHBjLl9yZXZlcnNlU3RyZWFtc1tuZXdTdHJlYW0uaWRdID0gc3RyZWFtO1xuICAgICAgICBzdHJlYW0gPSBuZXdTdHJlYW07XG4gICAgICB9XG4gICAgICBvcmlnQWRkU3RyZWFtLmFwcGx5KHBjLCBbc3RyZWFtXSk7XG4gICAgfTtcblxuICAgIHZhciBvcmlnUmVtb3ZlU3RyZWFtID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW0gPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICBwYy5fc3RyZWFtcyA9IHBjLl9zdHJlYW1zIHx8IHt9O1xuICAgICAgcGMuX3JldmVyc2VTdHJlYW1zID0gcGMuX3JldmVyc2VTdHJlYW1zIHx8IHt9O1xuXG4gICAgICBvcmlnUmVtb3ZlU3RyZWFtLmFwcGx5KHBjLCBbKHBjLl9zdHJlYW1zW3N0cmVhbS5pZF0gfHwgc3RyZWFtKV0pO1xuICAgICAgZGVsZXRlIHBjLl9yZXZlcnNlU3RyZWFtc1socGMuX3N0cmVhbXNbc3RyZWFtLmlkXSA/XG4gICAgICAgICAgcGMuX3N0cmVhbXNbc3RyZWFtLmlkXS5pZCA6IHN0cmVhbS5pZCldO1xuICAgICAgZGVsZXRlIHBjLl9zdHJlYW1zW3N0cmVhbS5pZF07XG4gICAgfTtcblxuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2sgPSBmdW5jdGlvbih0cmFjaywgc3RyZWFtKSB7XG4gICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgaWYgKHBjLnNpZ25hbGluZ1N0YXRlID09PSAnY2xvc2VkJykge1xuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFxuICAgICAgICAgICdUaGUgUlRDUGVlckNvbm5lY3Rpb25cXCdzIHNpZ25hbGluZ1N0YXRlIGlzIFxcJ2Nsb3NlZFxcJy4nLFxuICAgICAgICAgICdJbnZhbGlkU3RhdGVFcnJvcicpO1xuICAgICAgfVxuICAgICAgdmFyIHN0cmVhbXMgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICBpZiAoc3RyZWFtcy5sZW5ndGggIT09IDEgfHxcbiAgICAgICAgICAhc3RyZWFtc1swXS5nZXRUcmFja3MoKS5maW5kKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0ID09PSB0cmFjaztcbiAgICAgICAgICB9KSkge1xuICAgICAgICAvLyB0aGlzIGlzIG5vdCBmdWxseSBjb3JyZWN0IGJ1dCBhbGwgd2UgY2FuIG1hbmFnZSB3aXRob3V0XG4gICAgICAgIC8vIFtbYXNzb2NpYXRlZCBNZWRpYVN0cmVhbXNdXSBpbnRlcm5hbCBzbG90LlxuICAgICAgICB0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFxuICAgICAgICAgICdUaGUgYWRhcHRlci5qcyBhZGRUcmFjayBwb2x5ZmlsbCBvbmx5IHN1cHBvcnRzIGEgc2luZ2xlICcgK1xuICAgICAgICAgICcgc3RyZWFtIHdoaWNoIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHRyYWNrLicsXG4gICAgICAgICAgJ05vdFN1cHBvcnRlZEVycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBhbHJlYWR5RXhpc3RzID0gcGMuZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24ocykge1xuICAgICAgICByZXR1cm4gcy50cmFjayA9PT0gdHJhY2s7XG4gICAgICB9KTtcbiAgICAgIGlmIChhbHJlYWR5RXhpc3RzKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1RyYWNrIGFscmVhZHkgZXhpc3RzLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIHBjLl9zdHJlYW1zID0gcGMuX3N0cmVhbXMgfHwge307XG4gICAgICBwYy5fcmV2ZXJzZVN0cmVhbXMgPSBwYy5fcmV2ZXJzZVN0cmVhbXMgfHwge307XG4gICAgICB2YXIgb2xkU3RyZWFtID0gcGMuX3N0cmVhbXNbc3RyZWFtLmlkXTtcbiAgICAgIGlmIChvbGRTdHJlYW0pIHtcbiAgICAgICAgLy8gdGhpcyBpcyB1c2luZyBvZGQgQ2hyb21lIGJlaGF2aW91ciwgdXNlIHdpdGggY2F1dGlvbjpcbiAgICAgICAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3dlYnJ0Yy9pc3N1ZXMvZGV0YWlsP2lkPTc4MTVcbiAgICAgICAgLy8gTm90ZTogd2UgcmVseSBvbiB0aGUgaGlnaC1sZXZlbCBhZGRUcmFjay9kdG1mIHNoaW0gdG9cbiAgICAgICAgLy8gY3JlYXRlIHRoZSBzZW5kZXIgd2l0aCBhIGR0bWYgc2VuZGVyLlxuICAgICAgICBvbGRTdHJlYW0uYWRkVHJhY2sodHJhY2spO1xuXG4gICAgICAgIC8vIFRyaWdnZXIgT05OIGFzeW5jLlxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHBjLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCduZWdvdGlhdGlvbm5lZWRlZCcpKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbmV3U3RyZWFtID0gbmV3IHdpbmRvdy5NZWRpYVN0cmVhbShbdHJhY2tdKTtcbiAgICAgICAgcGMuX3N0cmVhbXNbc3RyZWFtLmlkXSA9IG5ld1N0cmVhbTtcbiAgICAgICAgcGMuX3JldmVyc2VTdHJlYW1zW25ld1N0cmVhbS5pZF0gPSBzdHJlYW07XG4gICAgICAgIHBjLmFkZFN0cmVhbShuZXdTdHJlYW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHBjLmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuIHMudHJhY2sgPT09IHRyYWNrO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIHJlcGxhY2UgdGhlIGludGVybmFsIHN0cmVhbSBpZCB3aXRoIHRoZSBleHRlcm5hbCBvbmUgYW5kXG4gICAgLy8gdmljZSB2ZXJzYS5cbiAgICBmdW5jdGlvbiByZXBsYWNlSW50ZXJuYWxTdHJlYW1JZChwYywgZGVzY3JpcHRpb24pIHtcbiAgICAgIHZhciBzZHAgPSBkZXNjcmlwdGlvbi5zZHA7XG4gICAgICBPYmplY3Qua2V5cyhwYy5fcmV2ZXJzZVN0cmVhbXMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24oaW50ZXJuYWxJZCkge1xuICAgICAgICB2YXIgZXh0ZXJuYWxTdHJlYW0gPSBwYy5fcmV2ZXJzZVN0cmVhbXNbaW50ZXJuYWxJZF07XG4gICAgICAgIHZhciBpbnRlcm5hbFN0cmVhbSA9IHBjLl9zdHJlYW1zW2V4dGVybmFsU3RyZWFtLmlkXTtcbiAgICAgICAgc2RwID0gc2RwLnJlcGxhY2UobmV3IFJlZ0V4cChpbnRlcm5hbFN0cmVhbS5pZCwgJ2cnKSxcbiAgICAgICAgICAgIGV4dGVybmFsU3RyZWFtLmlkKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oe1xuICAgICAgICB0eXBlOiBkZXNjcmlwdGlvbi50eXBlLFxuICAgICAgICBzZHA6IHNkcFxuICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlcGxhY2VFeHRlcm5hbFN0cmVhbUlkKHBjLCBkZXNjcmlwdGlvbikge1xuICAgICAgdmFyIHNkcCA9IGRlc2NyaXB0aW9uLnNkcDtcbiAgICAgIE9iamVjdC5rZXlzKHBjLl9yZXZlcnNlU3RyZWFtcyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbihpbnRlcm5hbElkKSB7XG4gICAgICAgIHZhciBleHRlcm5hbFN0cmVhbSA9IHBjLl9yZXZlcnNlU3RyZWFtc1tpbnRlcm5hbElkXTtcbiAgICAgICAgdmFyIGludGVybmFsU3RyZWFtID0gcGMuX3N0cmVhbXNbZXh0ZXJuYWxTdHJlYW0uaWRdO1xuICAgICAgICBzZHAgPSBzZHAucmVwbGFjZShuZXcgUmVnRXhwKGV4dGVybmFsU3RyZWFtLmlkLCAnZycpLFxuICAgICAgICAgICAgaW50ZXJuYWxTdHJlYW0uaWQpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7XG4gICAgICAgIHR5cGU6IGRlc2NyaXB0aW9uLnR5cGUsXG4gICAgICAgIHNkcDogc2RwXG4gICAgICB9KTtcbiAgICB9XG4gICAgWydjcmVhdGVPZmZlcicsICdjcmVhdGVBbnN3ZXInXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGMgPSB0aGlzO1xuICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgdmFyIGlzTGVnYWN5Q2FsbCA9IGFyZ3VtZW50cy5sZW5ndGggJiZcbiAgICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdmdW5jdGlvbic7XG4gICAgICAgIGlmIChpc0xlZ2FjeUNhbGwpIHtcbiAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHBjLCBbXG4gICAgICAgICAgICBmdW5jdGlvbihkZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICB2YXIgZGVzYyA9IHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHBjLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgIGFyZ3NbMF0uYXBwbHkobnVsbCwgW2Rlc2NdKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgaWYgKGFyZ3NbMV0pIHtcbiAgICAgICAgICAgICAgICBhcmdzWzFdLmFwcGx5KG51bGwsIGVycik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGFyZ3VtZW50c1syXVxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkocGMsIGFyZ3VtZW50cylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICByZXR1cm4gcmVwbGFjZUludGVybmFsU3RyZWFtSWQocGMsIGRlc2NyaXB0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgdmFyIG9yaWdTZXRMb2NhbERlc2NyaXB0aW9uID1cbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBjID0gdGhpcztcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCB8fCAhYXJndW1lbnRzWzBdLnR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG9yaWdTZXRMb2NhbERlc2NyaXB0aW9uLmFwcGx5KHBjLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgYXJndW1lbnRzWzBdID0gcmVwbGFjZUV4dGVybmFsU3RyZWFtSWQocGMsIGFyZ3VtZW50c1swXSk7XG4gICAgICByZXR1cm4gb3JpZ1NldExvY2FsRGVzY3JpcHRpb24uYXBwbHkocGMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIC8vIFRPRE86IG1hbmdsZSBnZXRTdGF0czogaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3dlYnJ0Yy1zdGF0cy8jZG9tLXJ0Y21lZGlhc3RyZWFtc3RhdHMtc3RyZWFtaWRlbnRpZmllclxuXG4gICAgdmFyIG9yaWdMb2NhbERlc2NyaXB0aW9uID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihcbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSwgJ2xvY2FsRGVzY3JpcHRpb24nKTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcbiAgICAgICAgJ2xvY2FsRGVzY3JpcHRpb24nLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSBvcmlnTG9jYWxEZXNjcmlwdGlvbi5nZXQuYXBwbHkodGhpcyk7XG4gICAgICAgICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2VJbnRlcm5hbFN0cmVhbUlkKHBjLCBkZXNjcmlwdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2sgPSBmdW5jdGlvbihzZW5kZXIpIHtcbiAgICAgIHZhciBwYyA9IHRoaXM7XG4gICAgICBpZiAocGMuc2lnbmFsaW5nU3RhdGUgPT09ICdjbG9zZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oXG4gICAgICAgICAgJ1RoZSBSVENQZWVyQ29ubmVjdGlvblxcJ3Mgc2lnbmFsaW5nU3RhdGUgaXMgXFwnY2xvc2VkXFwnLicsXG4gICAgICAgICAgJ0ludmFsaWRTdGF0ZUVycm9yJyk7XG4gICAgICB9XG4gICAgICAvLyBXZSBjYW4gbm90IHlldCBjaGVjayBmb3Igc2VuZGVyIGluc3RhbmNlb2YgUlRDUnRwU2VuZGVyXG4gICAgICAvLyBzaW5jZSB3ZSBzaGltIFJUUFNlbmRlci4gU28gd2UgY2hlY2sgaWYgc2VuZGVyLl9wYyBpcyBzZXQuXG4gICAgICBpZiAoIXNlbmRlci5fcGMpIHtcbiAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignQXJndW1lbnQgMSBvZiBSVENQZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayAnICtcbiAgICAgICAgICAgICdkb2VzIG5vdCBpbXBsZW1lbnQgaW50ZXJmYWNlIFJUQ1J0cFNlbmRlci4nLCAnVHlwZUVycm9yJyk7XG4gICAgICB9XG4gICAgICB2YXIgaXNMb2NhbCA9IHNlbmRlci5fcGMgPT09IHBjO1xuICAgICAgaWYgKCFpc0xvY2FsKSB7XG4gICAgICAgIHRocm93IG5ldyBET01FeGNlcHRpb24oJ1NlbmRlciB3YXMgbm90IGNyZWF0ZWQgYnkgdGhpcyBjb25uZWN0aW9uLicsXG4gICAgICAgICAgICAnSW52YWxpZEFjY2Vzc0Vycm9yJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlYXJjaCBmb3IgdGhlIG5hdGl2ZSBzdHJlYW0gdGhlIHNlbmRlcnMgdHJhY2sgYmVsb25ncyB0by5cbiAgICAgIHBjLl9zdHJlYW1zID0gcGMuX3N0cmVhbXMgfHwge307XG4gICAgICB2YXIgc3RyZWFtO1xuICAgICAgT2JqZWN0LmtleXMocGMuX3N0cmVhbXMpLmZvckVhY2goZnVuY3Rpb24oc3RyZWFtaWQpIHtcbiAgICAgICAgdmFyIGhhc1RyYWNrID0gcGMuX3N0cmVhbXNbc3RyZWFtaWRdLmdldFRyYWNrcygpLmZpbmQoZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgICByZXR1cm4gc2VuZGVyLnRyYWNrID09PSB0cmFjaztcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChoYXNUcmFjaykge1xuICAgICAgICAgIHN0cmVhbSA9IHBjLl9zdHJlYW1zW3N0cmVhbWlkXTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmIChzdHJlYW0pIHtcbiAgICAgICAgaWYgKHN0cmVhbS5nZXRUcmFja3MoKS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAvLyBpZiB0aGlzIGlzIHRoZSBsYXN0IHRyYWNrIG9mIHRoZSBzdHJlYW0sIHJlbW92ZSB0aGUgc3RyZWFtLiBUaGlzXG4gICAgICAgICAgLy8gdGFrZXMgY2FyZSBvZiBhbnkgc2hpbW1lZCBfc2VuZGVycy5cbiAgICAgICAgICBwYy5yZW1vdmVTdHJlYW0oc3RyZWFtKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyByZWx5aW5nIG9uIHRoZSBzYW1lIG9kZCBjaHJvbWUgYmVoYXZpb3VyIGFzIGFib3ZlLlxuICAgICAgICAgIHN0cmVhbS5yZW1vdmVUcmFjayhzZW5kZXIudHJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHBjLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCduZWdvdGlhdGlvbm5lZWRlZCcpKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuXG4gIHNoaW1QZWVyQ29ubmVjdGlvbjogZnVuY3Rpb24od2luZG93KSB7XG4gICAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpO1xuXG4gICAgLy8gVGhlIFJUQ1BlZXJDb25uZWN0aW9uIG9iamVjdC5cbiAgICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpIHtcbiAgICAgICAgLy8gVHJhbnNsYXRlIGljZVRyYW5zcG9ydFBvbGljeSB0byBpY2VUcmFuc3BvcnRzLFxuICAgICAgICAvLyBzZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC93ZWJydGMvaXNzdWVzL2RldGFpbD9pZD00ODY5XG4gICAgICAgIC8vIHRoaXMgd2FzIGZpeGVkIGluIE01NiBhbG9uZyB3aXRoIHVucHJlZml4aW5nIFJUQ1BlZXJDb25uZWN0aW9uLlxuICAgICAgICBsb2dnaW5nKCdQZWVyQ29ubmVjdGlvbicpO1xuICAgICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlVHJhbnNwb3J0UG9saWN5KSB7XG4gICAgICAgICAgcGNDb25maWcuaWNlVHJhbnNwb3J0cyA9IHBjQ29uZmlnLmljZVRyYW5zcG9ydFBvbGljeTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgd2luZG93LndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTtcbiAgICAgIH07XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID1cbiAgICAgICAgICB3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO1xuICAgICAgLy8gd3JhcCBzdGF0aWMgbWV0aG9kcy4gQ3VycmVudGx5IGp1c3QgZ2VuZXJhdGVDZXJ0aWZpY2F0ZS5cbiAgICAgIGlmICh3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24uZ2VuZXJhdGVDZXJ0aWZpY2F0ZSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLCAnZ2VuZXJhdGVDZXJ0aWZpY2F0ZScsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1pZ3JhdGUgZnJvbSBub24tc3BlYyBSVENJY2VTZXJ2ZXIudXJsIHRvIFJUQ0ljZVNlcnZlci51cmxzXG4gICAgICB2YXIgT3JpZ1BlZXJDb25uZWN0aW9uID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uO1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpIHtcbiAgICAgICAgaWYgKHBjQ29uZmlnICYmIHBjQ29uZmlnLmljZVNlcnZlcnMpIHtcbiAgICAgICAgICB2YXIgbmV3SWNlU2VydmVycyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGNDb25maWcuaWNlU2VydmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHNlcnZlciA9IHBjQ29uZmlnLmljZVNlcnZlcnNbaV07XG4gICAgICAgICAgICBpZiAoIXNlcnZlci5oYXNPd25Qcm9wZXJ0eSgndXJscycpICYmXG4gICAgICAgICAgICAgICAgc2VydmVyLmhhc093blByb3BlcnR5KCd1cmwnKSkge1xuICAgICAgICAgICAgICB1dGlscy5kZXByZWNhdGVkKCdSVENJY2VTZXJ2ZXIudXJsJywgJ1JUQ0ljZVNlcnZlci51cmxzJyk7XG4gICAgICAgICAgICAgIHNlcnZlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc2VydmVyKSk7XG4gICAgICAgICAgICAgIHNlcnZlci51cmxzID0gc2VydmVyLnVybDtcbiAgICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKHNlcnZlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2gocGNDb25maWcuaWNlU2VydmVyc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHBjQ29uZmlnLmljZVNlcnZlcnMgPSBuZXdJY2VTZXJ2ZXJzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgT3JpZ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTtcbiAgICAgIH07XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID0gT3JpZ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgICAgIC8vIHdyYXAgc3RhdGljIG1ldGhvZHMuIEN1cnJlbnRseSBqdXN0IGdlbmVyYXRlQ2VydGlmaWNhdGUuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLCAnZ2VuZXJhdGVDZXJ0aWZpY2F0ZScsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gT3JpZ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBvcmlnR2V0U3RhdHMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbihzZWxlY3RvcixcbiAgICAgICAgc3VjY2Vzc0NhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblxuICAgICAgLy8gSWYgc2VsZWN0b3IgaXMgYSBmdW5jdGlvbiB0aGVuIHdlIGFyZSBpbiB0aGUgb2xkIHN0eWxlIHN0YXRzIHNvIGp1c3RcbiAgICAgIC8vIHBhc3MgYmFjayB0aGUgb3JpZ2luYWwgZ2V0U3RhdHMgZm9ybWF0IHRvIGF2b2lkIGJyZWFraW5nIG9sZCB1c2Vycy5cbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB0eXBlb2Ygc2VsZWN0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuXG4gICAgICAvLyBXaGVuIHNwZWMtc3R5bGUgZ2V0U3RhdHMgaXMgc3VwcG9ydGVkLCByZXR1cm4gdGhvc2Ugd2hlbiBjYWxsZWQgd2l0aFxuICAgICAgLy8gZWl0aGVyIG5vIGFyZ3VtZW50cyBvciB0aGUgc2VsZWN0b3IgYXJndW1lbnQgaXMgbnVsbC5cbiAgICAgIGlmIChvcmlnR2V0U3RhdHMubGVuZ3RoID09PSAwICYmIChhcmd1bWVudHMubGVuZ3RoID09PSAwIHx8XG4gICAgICAgICAgdHlwZW9mIGFyZ3VtZW50c1swXSAhPT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgcmV0dXJuIG9yaWdHZXRTdGF0cy5hcHBseSh0aGlzLCBbXSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBmaXhDaHJvbWVTdGF0c18gPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICB2YXIgc3RhbmRhcmRSZXBvcnQgPSB7fTtcbiAgICAgICAgdmFyIHJlcG9ydHMgPSByZXNwb25zZS5yZXN1bHQoKTtcbiAgICAgICAgcmVwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uKHJlcG9ydCkge1xuICAgICAgICAgIHZhciBzdGFuZGFyZFN0YXRzID0ge1xuICAgICAgICAgICAgaWQ6IHJlcG9ydC5pZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogcmVwb3J0LnRpbWVzdGFtcCxcbiAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgbG9jYWxjYW5kaWRhdGU6ICdsb2NhbC1jYW5kaWRhdGUnLFxuICAgICAgICAgICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJ1xuICAgICAgICAgICAgfVtyZXBvcnQudHlwZV0gfHwgcmVwb3J0LnR5cGVcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJlcG9ydC5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgc3RhbmRhcmRTdGF0c1tuYW1lXSA9IHJlcG9ydC5zdGF0KG5hbWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHN0YW5kYXJkUmVwb3J0W3N0YW5kYXJkU3RhdHMuaWRdID0gc3RhbmRhcmRTdGF0cztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHN0YW5kYXJkUmVwb3J0O1xuICAgICAgfTtcblxuICAgICAgLy8gc2hpbSBnZXRTdGF0cyB3aXRoIG1hcGxpa2Ugc3VwcG9ydFxuICAgICAgdmFyIG1ha2VNYXBTdGF0cyA9IGZ1bmN0aW9uKHN0YXRzKSB7XG4gICAgICAgIHJldHVybiBuZXcgTWFwKE9iamVjdC5rZXlzKHN0YXRzKS5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgcmV0dXJuIFtrZXksIHN0YXRzW2tleV1dO1xuICAgICAgICB9KSk7XG4gICAgICB9O1xuXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHZhciBzdWNjZXNzQ2FsbGJhY2tXcmFwcGVyXyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgYXJnc1sxXShtYWtlTWFwU3RhdHMoZml4Q2hyb21lU3RhdHNfKHJlc3BvbnNlKSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBvcmlnR2V0U3RhdHMuYXBwbHkodGhpcywgW3N1Y2Nlc3NDYWxsYmFja1dyYXBwZXJfLFxuICAgICAgICAgIGFyZ3VtZW50c1swXV0pO1xuICAgICAgfVxuXG4gICAgICAvLyBwcm9taXNlLXN1cHBvcnRcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgb3JpZ0dldFN0YXRzLmFwcGx5KHNlbGYsIFtcbiAgICAgICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgcmVzb2x2ZShtYWtlTWFwU3RhdHMoZml4Q2hyb21lU3RhdHNfKHJlc3BvbnNlKSkpO1xuICAgICAgICAgIH0sIHJlamVjdF0pO1xuICAgICAgfSkudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgIH07XG5cbiAgICAvLyBhZGQgcHJvbWlzZSBzdXBwb3J0IC0tIG5hdGl2ZWx5IGF2YWlsYWJsZSBpbiBDaHJvbWUgNTFcbiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDUxKSB7XG4gICAgICBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCAnYWRkSWNlQ2FuZGlkYXRlJ11cbiAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICAgIHZhciBuYXRpdmVNZXRob2QgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF07XG4gICAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBuYXRpdmVNZXRob2QuYXBwbHkoc2VsZiwgW2FyZ3NbMF0sIHJlc29sdmUsIHJlamVjdF0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYXJnc1sxXS5hcHBseShudWxsLCBbXSk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgICAgICAgICBhcmdzWzJdLmFwcGx5KG51bGwsIFtlcnJdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBwcm9taXNlIHN1cHBvcnQgZm9yIGNyZWF0ZU9mZmVyIGFuZCBjcmVhdGVBbnN3ZXIuIEF2YWlsYWJsZSAod2l0aG91dFxuICAgIC8vIGJ1Z3MpIHNpbmNlIE01MjogY3JidWcvNjE5Mjg5XG4gICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA1Mikge1xuICAgICAgWydjcmVhdGVPZmZlcicsICdjcmVhdGVBbnN3ZXInXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgICB2YXIgbmF0aXZlTWV0aG9kID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdO1xuICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxIHx8IChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSkge1xuICAgICAgICAgICAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICBuYXRpdmVNZXRob2QuYXBwbHkoc2VsZiwgW3Jlc29sdmUsIHJlamVjdCwgb3B0c10pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBuYXRpdmVNZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHNoaW0gaW1wbGljaXQgY3JlYXRpb24gb2YgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uL1JUQ0ljZUNhbmRpZGF0ZVxuICAgIFsnc2V0TG9jYWxEZXNjcmlwdGlvbicsICdzZXRSZW1vdGVEZXNjcmlwdGlvbicsICdhZGRJY2VDYW5kaWRhdGUnXVxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICB2YXIgbmF0aXZlTWV0aG9kID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVttZXRob2RdO1xuICAgICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gbmV3ICgobWV0aG9kID09PSAnYWRkSWNlQ2FuZGlkYXRlJykgP1xuICAgICAgICAgICAgICAgIHdpbmRvdy5SVENJY2VDYW5kaWRhdGUgOlxuICAgICAgICAgICAgICAgIHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb24pKGFyZ3VtZW50c1swXSk7XG4gICAgICAgICAgICByZXR1cm4gbmF0aXZlTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAvLyBzdXBwb3J0IGZvciBhZGRJY2VDYW5kaWRhdGUobnVsbCBvciB1bmRlZmluZWQpXG4gICAgdmFyIG5hdGl2ZUFkZEljZUNhbmRpZGF0ZSA9XG4gICAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50c1swXSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzWzFdKSB7XG4gICAgICAgICAgYXJndW1lbnRzWzFdLmFwcGx5KG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuYXRpdmVBZGRJY2VDYW5kaWRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG59O1xuXG5cbi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzaGltTWVkaWFTdHJlYW06IGNocm9tZVNoaW0uc2hpbU1lZGlhU3RyZWFtLFxuICBzaGltT25UcmFjazogY2hyb21lU2hpbS5zaGltT25UcmFjayxcbiAgc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2s6IGNocm9tZVNoaW0uc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2ssXG4gIHNoaW1HZXRTZW5kZXJzV2l0aER0bWY6IGNocm9tZVNoaW0uc2hpbUdldFNlbmRlcnNXaXRoRHRtZixcbiAgc2hpbVNvdXJjZU9iamVjdDogY2hyb21lU2hpbS5zaGltU291cmNlT2JqZWN0LFxuICBzaGltUGVlckNvbm5lY3Rpb246IGNocm9tZVNoaW0uc2hpbVBlZXJDb25uZWN0aW9uLFxuICBzaGltR2V0VXNlck1lZGlhOiByZXF1aXJlKCcuL2dldHVzZXJtZWRpYScpXG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2Nocm9tZV9zaGltLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTU2XG4vLyBtb2R1bGUgY2h1bmtzID0gNyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2556\n");

/***/ }),

/***/ 2557:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nvar utils = __webpack_require__(2251);\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n\n  var constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    var cc = {};\n    Object.keys(c).forEach(function(key) {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      var oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        var oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(function(mix) {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  var shimConstraints_ = function(constraints, func) {\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      var remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      var face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      var getSupportedFacingModeLies = browserDetails.version < 61;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        var matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(function(devices) {\n            devices = devices.filter(function(d) {\n              return d.kind === 'videoinput';\n            });\n            var dev = devices.find(function(d) {\n              return matches.some(function(match) {\n                return d.label.toLowerCase().indexOf(match) !== -1;\n              });\n            });\n            if (!dev && devices.length && matches.indexOf('back') !== -1) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        InvalidStateError: 'NotReadableError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotReadableError',\n        MediaDeviceKillSwitchOn: 'NotReadableError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraintName,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, function(c) {\n      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n\n  navigator.getUserMedia = getUserMedia_;\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      navigator.getUserMedia(constraints, resolve, reject);\n    });\n  };\n\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {\n      getUserMedia: getUserMediaPromise_,\n      enumerateDevices: function() {\n        return new Promise(function(resolve) {\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\n          return window.MediaStreamTrack.getSources(function(devices) {\n            resolve(devices.map(function(device) {\n              return {label: device.label,\n                kind: kinds[device.kind],\n                deviceId: device.id,\n                groupId: ''};\n            }));\n          });\n        });\n      },\n      getSupportedConstraints: function() {\n        return {\n          deviceId: true, echoCancellation: true, facingMode: true,\n          frameRate: true, height: true, width: true\n        };\n      }\n    };\n  }\n\n  // A shim for getUserMedia method on the mediaDevices object.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (!navigator.mediaDevices.getUserMedia) {\n    navigator.mediaDevices.getUserMedia = function(constraints) {\n      return getUserMediaPromise_(constraints);\n    };\n  } else {\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n    // function which returns a Promise, it does not accept spec-style\n    // constraints.\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, function(c) {\n        return origGetUserMedia(c).then(function(stream) {\n          if (c.audio && !stream.getAudioTracks().length ||\n              c.video && !stream.getVideoTracks().length) {\n            stream.getTracks().forEach(function(track) {\n              track.stop();\n            });\n            throw new DOMException('', 'NotFoundError');\n          }\n          return stream;\n        }, function(e) {\n          return Promise.reject(shimError_(e));\n        });\n      });\n    };\n  }\n\n  // Dummy devicechange event methods.\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n    navigator.mediaDevices.addEventListener = function() {\n      logging('Dummy mediaDevices.addEventListener called.');\n    };\n  }\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n    navigator.mediaDevices.removeEventListener = function() {\n      logging('Dummy mediaDevices.removeEventListener called.');\n    };\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1Ny5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2dldHVzZXJtZWRpYS5qcz8zZGZmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiogSU1QT1JUUyBGUk9NIGltcG9ydHMtbG9hZGVyICoqKi9cbnZhciAkID0gcmVxdWlyZShcImpxdWVyeVwiKTtcbnZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xuXG4vKlxuICogIENvcHlyaWdodCAoYykgMjAxNiBUaGUgV2ViUlRDIHByb2plY3QgYXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiAgVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYSBCU0Qtc3R5bGUgbGljZW5zZVxuICogIHRoYXQgY2FuIGJlIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHNvdXJjZVxuICogIHRyZWUuXG4gKi9cbiAvKiBlc2xpbnQtZW52IG5vZGUgKi9cbid1c2Ugc3RyaWN0JztcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzLmpzJyk7XG52YXIgbG9nZ2luZyA9IHV0aWxzLmxvZztcblxuLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih3aW5kb3cpIHtcbiAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpO1xuICB2YXIgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG5cbiAgdmFyIGNvbnN0cmFpbnRzVG9DaHJvbWVfID0gZnVuY3Rpb24oYykge1xuICAgIGlmICh0eXBlb2YgYyAhPT0gJ29iamVjdCcgfHwgYy5tYW5kYXRvcnkgfHwgYy5vcHRpb25hbCkge1xuICAgICAgcmV0dXJuIGM7XG4gICAgfVxuICAgIHZhciBjYyA9IHt9O1xuICAgIE9iamVjdC5rZXlzKGMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVxdWlyZScgfHwga2V5ID09PSAnYWR2YW5jZWQnIHx8IGtleSA9PT0gJ21lZGlhU291cmNlJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgciA9ICh0eXBlb2YgY1trZXldID09PSAnb2JqZWN0JykgPyBjW2tleV0gOiB7aWRlYWw6IGNba2V5XX07XG4gICAgICBpZiAoci5leGFjdCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiByLmV4YWN0ID09PSAnbnVtYmVyJykge1xuICAgICAgICByLm1pbiA9IHIubWF4ID0gci5leGFjdDtcbiAgICAgIH1cbiAgICAgIHZhciBvbGRuYW1lXyA9IGZ1bmN0aW9uKHByZWZpeCwgbmFtZSkge1xuICAgICAgICBpZiAocHJlZml4KSB7XG4gICAgICAgICAgcmV0dXJuIHByZWZpeCArIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmFtZSA9PT0gJ2RldmljZUlkJykgPyAnc291cmNlSWQnIDogbmFtZTtcbiAgICAgIH07XG4gICAgICBpZiAoci5pZGVhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNjLm9wdGlvbmFsID0gY2Mub3B0aW9uYWwgfHwgW107XG4gICAgICAgIHZhciBvYyA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIHIuaWRlYWwgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgb2Nbb2xkbmFtZV8oJ21pbicsIGtleSldID0gci5pZGVhbDtcbiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTtcbiAgICAgICAgICBvYyA9IHt9O1xuICAgICAgICAgIG9jW29sZG5hbWVfKCdtYXgnLCBrZXkpXSA9IHIuaWRlYWw7XG4gICAgICAgICAgY2Mub3B0aW9uYWwucHVzaChvYyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2Nbb2xkbmFtZV8oJycsIGtleSldID0gci5pZGVhbDtcbiAgICAgICAgICBjYy5vcHRpb25hbC5wdXNoKG9jKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHIuZXhhY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygci5leGFjdCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgY2MubWFuZGF0b3J5ID0gY2MubWFuZGF0b3J5IHx8IHt9O1xuICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZV8oJycsIGtleSldID0gci5leGFjdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFsnbWluJywgJ21heCddLmZvckVhY2goZnVuY3Rpb24obWl4KSB7XG4gICAgICAgICAgaWYgKHJbbWl4XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYy5tYW5kYXRvcnkgPSBjYy5tYW5kYXRvcnkgfHwge307XG4gICAgICAgICAgICBjYy5tYW5kYXRvcnlbb2xkbmFtZV8obWl4LCBrZXkpXSA9IHJbbWl4XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChjLmFkdmFuY2VkKSB7XG4gICAgICBjYy5vcHRpb25hbCA9IChjYy5vcHRpb25hbCB8fCBbXSkuY29uY2F0KGMuYWR2YW5jZWQpO1xuICAgIH1cbiAgICByZXR1cm4gY2M7XG4gIH07XG5cbiAgdmFyIHNoaW1Db25zdHJhaW50c18gPSBmdW5jdGlvbihjb25zdHJhaW50cywgZnVuYykge1xuICAgIGNvbnN0cmFpbnRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpO1xuICAgIGlmIChjb25zdHJhaW50cyAmJiB0eXBlb2YgY29uc3RyYWludHMuYXVkaW8gPT09ICdvYmplY3QnKSB7XG4gICAgICB2YXIgcmVtYXAgPSBmdW5jdGlvbihvYmosIGEsIGIpIHtcbiAgICAgICAgaWYgKGEgaW4gb2JqICYmICEoYiBpbiBvYmopKSB7XG4gICAgICAgICAgb2JqW2JdID0gb2JqW2FdO1xuICAgICAgICAgIGRlbGV0ZSBvYmpbYV07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25zdHJhaW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICAgIHJlbWFwKGNvbnN0cmFpbnRzLmF1ZGlvLCAnYXV0b0dhaW5Db250cm9sJywgJ2dvb2dBdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgIHJlbWFwKGNvbnN0cmFpbnRzLmF1ZGlvLCAnbm9pc2VTdXBwcmVzc2lvbicsICdnb29nTm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgY29uc3RyYWludHMuYXVkaW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy5hdWRpbyk7XG4gICAgfVxuICAgIGlmIChjb25zdHJhaW50cyAmJiB0eXBlb2YgY29uc3RyYWludHMudmlkZW8gPT09ICdvYmplY3QnKSB7XG4gICAgICAvLyBTaGltIGZhY2luZ01vZGUgZm9yIG1vYmlsZSAmIHN1cmZhY2UgcHJvLlxuICAgICAgdmFyIGZhY2UgPSBjb25zdHJhaW50cy52aWRlby5mYWNpbmdNb2RlO1xuICAgICAgZmFjZSA9IGZhY2UgJiYgKCh0eXBlb2YgZmFjZSA9PT0gJ29iamVjdCcpID8gZmFjZSA6IHtpZGVhbDogZmFjZX0pO1xuICAgICAgdmFyIGdldFN1cHBvcnRlZEZhY2luZ01vZGVMaWVzID0gYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDYxO1xuXG4gICAgICBpZiAoKGZhY2UgJiYgKGZhY2UuZXhhY3QgPT09ICd1c2VyJyB8fCBmYWNlLmV4YWN0ID09PSAnZW52aXJvbm1lbnQnIHx8XG4gICAgICAgICAgICAgICAgICAgIGZhY2UuaWRlYWwgPT09ICd1c2VyJyB8fCBmYWNlLmlkZWFsID09PSAnZW52aXJvbm1lbnQnKSkgJiZcbiAgICAgICAgICAhKG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMgJiZcbiAgICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKS5mYWNpbmdNb2RlICYmXG4gICAgICAgICAgICAhZ2V0U3VwcG9ydGVkRmFjaW5nTW9kZUxpZXMpKSB7XG4gICAgICAgIGRlbGV0ZSBjb25zdHJhaW50cy52aWRlby5mYWNpbmdNb2RlO1xuICAgICAgICB2YXIgbWF0Y2hlcztcbiAgICAgICAgaWYgKGZhY2UuZXhhY3QgPT09ICdlbnZpcm9ubWVudCcgfHwgZmFjZS5pZGVhbCA9PT0gJ2Vudmlyb25tZW50Jykge1xuICAgICAgICAgIG1hdGNoZXMgPSBbJ2JhY2snLCAncmVhciddO1xuICAgICAgICB9IGVsc2UgaWYgKGZhY2UuZXhhY3QgPT09ICd1c2VyJyB8fCBmYWNlLmlkZWFsID09PSAndXNlcicpIHtcbiAgICAgICAgICBtYXRjaGVzID0gWydmcm9udCddO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgLy8gTG9vayBmb3IgbWF0Y2hlcyBpbiBsYWJlbCwgb3IgdXNlIGxhc3QgY2FtIGZvciBiYWNrICh0eXBpY2FsKS5cbiAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihkZXZpY2VzKSB7XG4gICAgICAgICAgICBkZXZpY2VzID0gZGV2aWNlcy5maWx0ZXIoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZC5raW5kID09PSAndmlkZW9pbnB1dCc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBkZXYgPSBkZXZpY2VzLmZpbmQoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlcy5zb21lKGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKG1hdGNoKSAhPT0gLTE7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIWRldiAmJiBkZXZpY2VzLmxlbmd0aCAmJiBtYXRjaGVzLmluZGV4T2YoJ2JhY2snKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgZGV2ID0gZGV2aWNlc1tkZXZpY2VzLmxlbmd0aCAtIDFdOyAvLyBtb3JlIGxpa2VseSB0aGUgYmFjayBjYW1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZXYpIHtcbiAgICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8uZGV2aWNlSWQgPSBmYWNlLmV4YWN0ID8ge2V4YWN0OiBkZXYuZGV2aWNlSWR9IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lkZWFsOiBkZXYuZGV2aWNlSWR9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvQ2hyb21lXyhjb25zdHJhaW50cy52aWRlbyk7XG4gICAgICAgICAgICBsb2dnaW5nKCdjaHJvbWU6ICcgKyBKU09OLnN0cmluZ2lmeShjb25zdHJhaW50cykpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmMoY29uc3RyYWludHMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdHJhaW50cy52aWRlbyA9IGNvbnN0cmFpbnRzVG9DaHJvbWVfKGNvbnN0cmFpbnRzLnZpZGVvKTtcbiAgICB9XG4gICAgbG9nZ2luZygnY2hyb21lOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICByZXR1cm4gZnVuYyhjb25zdHJhaW50cyk7XG4gIH07XG5cbiAgdmFyIHNoaW1FcnJvcl8gPSBmdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgUGVybWlzc2lvbkRlbmllZEVycm9yOiAnTm90QWxsb3dlZEVycm9yJyxcbiAgICAgICAgSW52YWxpZFN0YXRlRXJyb3I6ICdOb3RSZWFkYWJsZUVycm9yJyxcbiAgICAgICAgRGV2aWNlc05vdEZvdW5kRXJyb3I6ICdOb3RGb3VuZEVycm9yJyxcbiAgICAgICAgQ29uc3RyYWludE5vdFNhdGlzZmllZEVycm9yOiAnT3ZlcmNvbnN0cmFpbmVkRXJyb3InLFxuICAgICAgICBUcmFja1N0YXJ0RXJyb3I6ICdOb3RSZWFkYWJsZUVycm9yJyxcbiAgICAgICAgTWVkaWFEZXZpY2VGYWlsZWREdWVUb1NodXRkb3duOiAnTm90UmVhZGFibGVFcnJvcicsXG4gICAgICAgIE1lZGlhRGV2aWNlS2lsbFN3aXRjaE9uOiAnTm90UmVhZGFibGVFcnJvcidcbiAgICAgIH1bZS5uYW1lXSB8fCBlLm5hbWUsXG4gICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UsXG4gICAgICBjb25zdHJhaW50OiBlLmNvbnN0cmFpbnROYW1lLFxuICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lICsgKHRoaXMubWVzc2FnZSAmJiAnOiAnKSArIHRoaXMubWVzc2FnZTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIHZhciBnZXRVc2VyTWVkaWFfID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIHNoaW1Db25zdHJhaW50c18oY29uc3RyYWludHMsIGZ1bmN0aW9uKGMpIHtcbiAgICAgIG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEoYywgb25TdWNjZXNzLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChvbkVycm9yKSB7XG4gICAgICAgICAgb25FcnJvcihzaGltRXJyb3JfKGUpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYV87XG5cbiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGdldFVzZXJNZWRpYSBhcyBhIFByb21pc2UuXG4gIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYShjb25zdHJhaW50cywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcbiAgfTtcblxuICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzID0ge1xuICAgICAgZ2V0VXNlck1lZGlhOiBnZXRVc2VyTWVkaWFQcm9taXNlXyxcbiAgICAgIGVudW1lcmF0ZURldmljZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgICAgIHZhciBraW5kcyA9IHthdWRpbzogJ2F1ZGlvaW5wdXQnLCB2aWRlbzogJ3ZpZGVvaW5wdXQnfTtcbiAgICAgICAgICByZXR1cm4gd2luZG93Lk1lZGlhU3RyZWFtVHJhY2suZ2V0U291cmNlcyhmdW5jdGlvbihkZXZpY2VzKSB7XG4gICAgICAgICAgICByZXNvbHZlKGRldmljZXMubWFwKGZ1bmN0aW9uKGRldmljZSkge1xuICAgICAgICAgICAgICByZXR1cm4ge2xhYmVsOiBkZXZpY2UubGFiZWwsXG4gICAgICAgICAgICAgICAga2luZDoga2luZHNbZGV2aWNlLmtpbmRdLFxuICAgICAgICAgICAgICAgIGRldmljZUlkOiBkZXZpY2UuaWQsXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogJyd9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRTdXBwb3J0ZWRDb25zdHJhaW50czogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGV2aWNlSWQ6IHRydWUsIGVjaG9DYW5jZWxsYXRpb246IHRydWUsIGZhY2luZ01vZGU6IHRydWUsXG4gICAgICAgICAgZnJhbWVSYXRlOiB0cnVlLCBoZWlnaHQ6IHRydWUsIHdpZHRoOiB0cnVlXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIEEgc2hpbSBmb3IgZ2V0VXNlck1lZGlhIG1ldGhvZCBvbiB0aGUgbWVkaWFEZXZpY2VzIG9iamVjdC5cbiAgLy8gVE9ETyhLYXB0ZW5KYW5zc29uKSByZW1vdmUgb25jZSBpbXBsZW1lbnRlZCBpbiBDaHJvbWUgc3RhYmxlLlxuICBpZiAoIW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKSB7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cykge1xuICAgICAgcmV0dXJuIGdldFVzZXJNZWRpYVByb21pc2VfKGNvbnN0cmFpbnRzKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIEV2ZW4gdGhvdWdoIENocm9tZSA0NSBoYXMgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyBhbmQgYSBnZXRVc2VyTWVkaWFcbiAgICAvLyBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgUHJvbWlzZSwgaXQgZG9lcyBub3QgYWNjZXB0IHNwZWMtc3R5bGVcbiAgICAvLyBjb25zdHJhaW50cy5cbiAgICB2YXIgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLlxuICAgICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY3MpIHtcbiAgICAgIHJldHVybiBzaGltQ29uc3RyYWludHNfKGNzLCBmdW5jdGlvbihjKSB7XG4gICAgICAgIHJldHVybiBvcmlnR2V0VXNlck1lZGlhKGMpLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgICAgaWYgKGMuYXVkaW8gJiYgIXN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aCB8fFxuICAgICAgICAgICAgICBjLnZpZGVvICYmICFzdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICAgIHRyYWNrLnN0b3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignJywgJ05vdEZvdW5kRXJyb3InKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChzaGltRXJyb3JfKGUpKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG5cbiAgLy8gRHVtbXkgZGV2aWNlY2hhbmdlIGV2ZW50IG1ldGhvZHMuXG4gIC8vIFRPRE8oS2FwdGVuSmFuc3NvbikgcmVtb3ZlIG9uY2UgaW1wbGVtZW50ZWQgaW4gQ2hyb21lIHN0YWJsZS5cbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmFkZEV2ZW50TGlzdGVuZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBsb2dnaW5nKCdEdW1teSBtZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lciBjYWxsZWQuJyk7XG4gICAgfTtcbiAgfVxuICBpZiAodHlwZW9mIG5hdmlnYXRvci5tZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIGxvZ2dpbmcoJ0R1bW15IG1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyIGNhbGxlZC4nKTtcbiAgICB9O1xuICB9XG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY2hyb21lL2dldHVzZXJtZWRpYS5qc1xuLy8gbW9kdWxlIGlkID0gMjU1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2557\n");

/***/ }),

/***/ 2558:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = __webpack_require__(2251);\nvar shimRTCPeerConnection = __webpack_require__(2559);\n\nmodule.exports = {\n  shimGetUserMedia: __webpack_require__(2560),\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (window.RTCIceGatherer) {\n      // ORTC defines an RTCIceCandidate object but no constructor.\n      // Not implemented in Edge.\n      if (!window.RTCIceCandidate) {\n        window.RTCIceCandidate = function(args) {\n          return args;\n        };\n      }\n      // ORTC does not have a session description object but\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\n      // in the future might have this defined already.\n      if (!window.RTCSessionDescription) {\n        window.RTCSessionDescription = function(args) {\n          return args;\n        };\n      }\n      // this adds an additional event listener to MediaStrackTrack that signals\n      // when a tracks enabled property was changed. Workaround for a bug in\n      // addStream, see below. No longer required in 15025+\n      if (browserDetails.version < 15025) {\n        var origMSTEnabled = Object.getOwnPropertyDescriptor(\n            window.MediaStreamTrack.prototype, 'enabled');\n        Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n          set: function(value) {\n            origMSTEnabled.set.call(this, value);\n            var ev = new Event('enabled');\n            ev.enabled = value;\n            this.dispatchEvent(ev);\n          }\n        });\n      }\n    }\n\n    // ORTC defines the DTMF sender a bit different.\n    // https://github.com/w3c/ortc/issues/714\n    if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n        get: function() {\n          if (this._dtmf === undefined) {\n            if (this.track.kind === 'audio') {\n              this._dtmf = new window.RTCDtmfSender(this);\n            } else if (this.track.kind === 'video') {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        }\n      });\n    }\n\n    window.RTCPeerConnection =\n        shimRTCPeerConnection(window, browserDetails.version);\n  },\n  shimReplaceTrack: function(window) {\n    // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n    if (window.RTCRtpSender &&\n        !('replaceTrack' in window.RTCRtpSender.prototype)) {\n      window.RTCRtpSender.prototype.replaceTrack =\n          window.RTCRtpSender.prototype.setTrack;\n    }\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1OC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZWRnZS9lZGdlX3NoaW0uanM/NDhmYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgc2hpbVJUQ1BlZXJDb25uZWN0aW9uID0gcmVxdWlyZSgncnRjcGVlcmNvbm5lY3Rpb24tc2hpbScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2hpbUdldFVzZXJNZWRpYTogcmVxdWlyZSgnLi9nZXR1c2VybWVkaWEnKSxcbiAgc2hpbVBlZXJDb25uZWN0aW9uOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICB2YXIgYnJvd3NlckRldGFpbHMgPSB1dGlscy5kZXRlY3RCcm93c2VyKHdpbmRvdyk7XG5cbiAgICBpZiAod2luZG93LlJUQ0ljZUdhdGhlcmVyKSB7XG4gICAgICAvLyBPUlRDIGRlZmluZXMgYW4gUlRDSWNlQ2FuZGlkYXRlIG9iamVjdCBidXQgbm8gY29uc3RydWN0b3IuXG4gICAgICAvLyBOb3QgaW1wbGVtZW50ZWQgaW4gRWRnZS5cbiAgICAgIGlmICghd2luZG93LlJUQ0ljZUNhbmRpZGF0ZSkge1xuICAgICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgIHJldHVybiBhcmdzO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgLy8gT1JUQyBkb2VzIG5vdCBoYXZlIGEgc2Vzc2lvbiBkZXNjcmlwdGlvbiBvYmplY3QgYnV0XG4gICAgICAvLyBvdGhlciBicm93c2VycyAoaS5lLiBDaHJvbWUpIHRoYXQgd2lsbCBzdXBwb3J0IGJvdGggUEMgYW5kIE9SVENcbiAgICAgIC8vIGluIHRoZSBmdXR1cmUgbWlnaHQgaGF2ZSB0aGlzIGRlZmluZWQgYWxyZWFkeS5cbiAgICAgIGlmICghd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikge1xuICAgICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gZnVuY3Rpb24oYXJncykge1xuICAgICAgICAgIHJldHVybiBhcmdzO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgLy8gdGhpcyBhZGRzIGFuIGFkZGl0aW9uYWwgZXZlbnQgbGlzdGVuZXIgdG8gTWVkaWFTdHJhY2tUcmFjayB0aGF0IHNpZ25hbHNcbiAgICAgIC8vIHdoZW4gYSB0cmFja3MgZW5hYmxlZCBwcm9wZXJ0eSB3YXMgY2hhbmdlZC4gV29ya2Fyb3VuZCBmb3IgYSBidWcgaW5cbiAgICAgIC8vIGFkZFN0cmVhbSwgc2VlIGJlbG93LiBObyBsb25nZXIgcmVxdWlyZWQgaW4gMTUwMjUrXG4gICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDE1MDI1KSB7XG4gICAgICAgIHZhciBvcmlnTVNURW5hYmxlZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXG4gICAgICAgICAgICB3aW5kb3cuTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsICdlbmFibGVkJyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsICdlbmFibGVkJywge1xuICAgICAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIG9yaWdNU1RFbmFibGVkLnNldC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICAgIHZhciBldiA9IG5ldyBFdmVudCgnZW5hYmxlZCcpO1xuICAgICAgICAgICAgZXYuZW5hYmxlZCA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE9SVEMgZGVmaW5lcyB0aGUgRFRNRiBzZW5kZXIgYSBiaXQgZGlmZmVyZW50LlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93M2Mvb3J0Yy9pc3N1ZXMvNzE0XG4gICAgaWYgKHdpbmRvdy5SVENSdHBTZW5kZXIgJiYgISgnZHRtZicgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUsICdkdG1mJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICh0aGlzLl9kdG1mID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYWNrLmtpbmQgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZHRtZiA9IG5ldyB3aW5kb3cuUlRDRHRtZlNlbmRlcih0aGlzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50cmFjay5raW5kID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2R0bWYgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhpcy5fZHRtZjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID1cbiAgICAgICAgc2hpbVJUQ1BlZXJDb25uZWN0aW9uKHdpbmRvdywgYnJvd3NlckRldGFpbHMudmVyc2lvbik7XG4gIH0sXG4gIHNoaW1SZXBsYWNlVHJhY2s6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIC8vIE9SVEMgaGFzIHJlcGxhY2VUcmFjayAtLSBodHRwczovL2dpdGh1Yi5jb20vdzNjL29ydGMvaXNzdWVzLzYxNFxuICAgIGlmICh3aW5kb3cuUlRDUnRwU2VuZGVyICYmXG4gICAgICAgICEoJ3JlcGxhY2VUcmFjaycgaW4gd2luZG93LlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKSB7XG4gICAgICB3aW5kb3cuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5yZXBsYWNlVHJhY2sgPVxuICAgICAgICAgIHdpbmRvdy5SVENSdHBTZW5kZXIucHJvdG90eXBlLnNldFRyYWNrO1xuICAgIH1cbiAgfVxufTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2VkZ2UvZWRnZV9zaGltLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTU4XG4vLyBtb2R1bGUgY2h1bmtzID0gNyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2558\n");

/***/ }),

/***/ 2559:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = __webpack_require__(2283);\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n    return false;\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all field are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  var RTCPeerConnection = function(config) {\n    var self = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          self[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.onicecandidate = null;\n    this.onaddstream = null;\n    this.ontrack = null;\n    this.onremovestream = null;\n    this.onsignalingstatechange = null;\n    this.oniceconnectionstatechange = null;\n    this.onicegatheringstatechange = null;\n    this.onnegotiationneeded = null;\n    this.ondatachannel = null;\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this.localDescription = null;\n    this.remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      var e = new Error('rtcpMuxPolicy \\'negotiate\\' is not supported');\n      e.name = 'NotSupportedError';\n      throw(e);\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers = new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        });\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this.dispatchEvent(event);\n    if (typeof this.onicegatheringstatechange === 'function') {\n      this.onicegatheringstatechange(event);\n    }\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (whih is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    this.transceivers.push(transceiver);\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var self = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        self.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        self.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var idx = this.localStreams.indexOf(stream);\n    if (idx > -1) {\n      this.localStreams.splice(idx, 1);\n      this._maybeFireNegotiationNeeded();\n    }\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var self = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].candidates = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (self.transceivers[sdpMLineIndex].candidates !== null) {\n        self.transceivers[sdpMLineIndex].candidates.push(event.candidate);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var self = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var candidates = this.transceivers[sdpMLineIndex].candidates;\n    this.transceivers[sdpMLineIndex].candidates = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (self.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // dpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        event.candidate.candidate = SDPUtils.writeCandidate(cand);\n      }\n\n      // update local description.\n      var sections = SDPUtils.splitSections(self.localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex + 1] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex + 1] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      self.localDescription.sdp = sections.join('');\n      var complete = self.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (self.iceGatheringState !== 'gathering') {\n        self.iceGatheringState = 'gathering';\n        self._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        self.dispatchEvent(event);\n        if (typeof self.onicecandidate === 'function') {\n          self.onicecandidate(event);\n        }\n      }\n      if (complete) {\n        self.dispatchEvent(new Event('icecandidate'));\n        if (typeof self.onicecandidate === 'function') {\n          self.onicecandidate(new Event('icecandidate'));\n        }\n        self.iceGatheringState = 'complete';\n        self._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      candidates.forEach(function(candidate) {\n        var e = new Event('RTCIceGatherEvent');\n        e.candidate = candidate;\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var self = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      self._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      self._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      self._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      params.encodings = transceiver.recvEncodingParameters;\n      params.rtcp = {\n        cname: transceiver.rtcpParameters.cname,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var self = this;\n    var args = arguments;\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, this.signalingState)) {\n      return new Promise(function(resolve, reject) {\n        var e = new Error('Can not set local ' + description.type +\n            ' in state ' + self.signalingState);\n        e.name = 'InvalidStateError';\n        if (args.length > 2 && typeof args[2] === 'function') {\n          args[2].apply(null, [e]);\n        }\n        reject(e);\n      });\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        self.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      this.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        self._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(self.remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = self.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            !SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 1;\n\n        if (!rejected && !transceiver.isDatachannel) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!self.usingBundle || sdpMLineIndex === 0) {\n            self._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          self._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    this.localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    switch (description.type) {\n      case 'offer':\n        this._updateSignalingState('have-local-offer');\n        break;\n      case 'answer':\n        this._updateSignalingState('stable');\n        break;\n      default:\n        throw new TypeError('unsupported type \"' + description.type +\n            '\"');\n    }\n\n    // If a success callback was provided, emit ICE candidates after it\n    // has been executed. Otherwise, emit callback after the Promise is\n    // resolved.\n    var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n        arguments[1];\n    return new Promise(function(resolve) {\n      if (cb) {\n        cb.apply(null);\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var self = this;\n    var args = arguments;\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, this.signalingState)) {\n      return new Promise(function(resolve, reject) {\n        var e = new Error('Can not set remote ' + description.type +\n            ' in state ' + self.signalingState);\n        e.name = 'InvalidStateError';\n        if (args.length > 2 && typeof args[2] === 'function') {\n          args[2].apply(null, [e]);\n        }\n        reject(e);\n      });\n    }\n\n    var streams = {};\n    this.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    this.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      this.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      this.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          !SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 1;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (kind === 'application' && protocol === 'DTLS/SCTP') {\n        self.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          isDatachannel: true\n        };\n        return;\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          self.transceivers[sdpMLineIndex]) {\n        self._disposeIceAndDtlsTransports(sdpMLineIndex);\n        self.transceivers[sdpMLineIndex].iceGatherer =\n            self.transceivers[0].iceGatherer;\n        self.transceivers[sdpMLineIndex].iceTransport =\n            self.transceivers[0].iceTransport;\n        self.transceivers[sdpMLineIndex].dtlsTransport =\n            self.transceivers[0].dtlsTransport;\n        if (self.transceivers[sdpMLineIndex].rtpSender) {\n          self.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              self.transceivers[0].dtlsTransport);\n        }\n        if (self.transceivers[sdpMLineIndex].rtpReceiver) {\n          self.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              self.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = self.transceivers[sdpMLineIndex] ||\n            self._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = self._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            stream.addTrack(track);\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        self._transceive(self.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = self.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        self.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        self.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        self.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        self._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            streams[remoteMsid.stream].addTrack(track);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            streams.default.addTrack(track);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (this._dtlsRole === undefined) {\n      this._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    this.remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    switch (description.type) {\n      case 'offer':\n        this._updateSignalingState('have-remote-offer');\n        break;\n      case 'answer':\n        this._updateSignalingState('stable');\n        break;\n      default:\n        throw new TypeError('unsupported type \"' + description.type +\n            '\"');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (self.remoteStreams.indexOf(stream) === -1) {\n          self.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            self.dispatchEvent(event);\n            if (typeof self.onaddstream === 'function') {\n              self.onaddstream(event);\n            }\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          var trackEvent = new Event('track');\n          trackEvent.track = track;\n          trackEvent.receiver = receiver;\n          trackEvent.transceiver = {receiver: receiver};\n          trackEvent.streams = [stream];\n          window.setTimeout(function() {\n            self.dispatchEvent(trackEvent);\n            if (typeof self.ontrack === 'function') {\n              self.ontrack(trackEvent);\n            }\n          });\n        });\n      }\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(self && self.transceivers)) {\n        return;\n      }\n      self.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return new Promise(function(resolve) {\n      if (args.length > 1 && typeof args[1] === 'function') {\n        args[1].apply(null);\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this.dispatchEvent(event);\n    if (typeof this.onsignalingstatechange === 'function') {\n      this.onsignalingstatechange(event);\n    }\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var self = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (self.needNegotiation === false) {\n        return;\n      }\n      self.needNegotiation = false;\n      var event = new Event('negotiationneeded');\n      self.dispatchEvent(event);\n      if (typeof self.onnegotiationneeded === 'function') {\n        self.onnegotiationneeded(event);\n      }\n    }, 0);\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      states[transceiver.iceTransport.state]++;\n      states[transceiver.dtlsTransport.state]++;\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0 || states.checking > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0 || states.completed > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this.dispatchEvent(event);\n      if (typeof this.oniceconnectionstatechange === 'function') {\n        this.oniceconnectionstatechange(event);\n      }\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var self = this;\n    var args = arguments;\n\n    var offerOptions;\n    if (arguments.length === 1 && typeof arguments[0] !== 'function') {\n      offerOptions = arguments[0];\n    } else if (arguments.length === 3) {\n      offerOptions = arguments[2];\n    }\n\n    var numAudioTracks = this.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = this.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        this._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        this._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(this._sdpSessionId,\n        this._sdpSessionVersion++);\n    this.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = self._createIceGatherer(sdpMLineIndex,\n            self.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (this._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + this.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    this.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, self._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && self.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !self.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return new Promise(function(resolve) {\n      if (args.length > 0 && typeof args[0] === 'function') {\n        args[0].apply(null, [desc]);\n        resolve();\n        return;\n      }\n      resolve(desc);\n    });\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var self = this;\n    var args = arguments;\n\n    var sdp = SDPUtils.writeSessionBoilerplate(this._sdpSessionId,\n        this._sdpSessionVersion++);\n    if (this.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + this.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    var mediaSectionsInOffer = SDPUtils.splitSections(\n        this.remoteDescription.sdp).length - 1;\n    this.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.isDatachannel) {\n        sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n' +\n            'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, self._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return new Promise(function(resolve) {\n      if (args.length > 0 && typeof args[0] === 'function') {\n        args[0].apply(null, [desc]);\n        resolve();\n        return;\n      }\n      resolve(desc);\n    });\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var err;\n    var sections;\n    if (!candidate || candidate.candidate === '') {\n      for (var j = 0; j < this.transceivers.length; j++) {\n        if (this.transceivers[j].isDatachannel) {\n          continue;\n        }\n        this.transceivers[j].iceTransport.addRemoteCandidate({});\n        sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n        sections[j + 1] += 'a=end-of-candidates\\r\\n';\n        this.remoteDescription.sdp = sections.join('');\n        if (this.usingBundle) {\n          break;\n        }\n      }\n    } else if (!(candidate.sdpMLineIndex !== undefined || candidate.sdpMid)) {\n      throw new TypeError('sdpMLineIndex or sdpMid required');\n    } else if (!this.remoteDescription) {\n      err = new Error('Can not add ICE candidate without ' +\n          'a remote description');\n      err.name = 'InvalidStateError';\n    } else {\n      var sdpMLineIndex = candidate.sdpMLineIndex;\n      if (candidate.sdpMid) {\n        for (var i = 0; i < this.transceivers.length; i++) {\n          if (this.transceivers[i].mid === candidate.sdpMid) {\n            sdpMLineIndex = i;\n            break;\n          }\n        }\n      }\n      var transceiver = this.transceivers[sdpMLineIndex];\n      if (transceiver) {\n        if (transceiver.isDatachannel) {\n          return Promise.resolve();\n        }\n        var cand = Object.keys(candidate.candidate).length > 0 ?\n            SDPUtils.parseCandidate(candidate.candidate) : {};\n        // Ignore Chrome's invalid candidates since Edge does not like them.\n        if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n          return Promise.resolve();\n        }\n        // Ignore RTCP candidates, we assume RTCP-MUX.\n        if (cand.component && cand.component !== 1) {\n          return Promise.resolve();\n        }\n        // when using bundle, avoid adding candidates to the wrong\n        // ice transport. And avoid adding candidates added in the SDP.\n        if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n            transceiver.iceTransport !== this.transceivers[0].iceTransport)) {\n          if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n            err = new Error('Can not add ICE candidate');\n            err.name = 'OperationError';\n          }\n        }\n\n        if (!err) {\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.splitSections(this.remoteDescription.sdp);\n          sections[sdpMLineIndex + 1] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          this.remoteDescription.sdp = sections.join('');\n        }\n      } else {\n        err = new Error('Can not add ICE candidate');\n        err.name = 'OperationError';\n      }\n    }\n    var args = arguments;\n    return new Promise(function(resolve, reject) {\n      if (err) {\n        if (args.length > 2 && typeof args[2] === 'function') {\n          args[2].apply(null, [err]);\n        }\n        reject(err);\n      } else {\n        if (args.length > 1 && typeof args[1] === 'function') {\n          args[1].apply(null);\n        }\n        resolve();\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function() {\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\n        arguments[1];\n    var fixStatsType = function(stat) {\n      return {\n        inboundrtp: 'inbound-rtp',\n        outboundrtp: 'outbound-rtp',\n        candidatepair: 'candidate-pair',\n        localcandidate: 'local-candidate',\n        remotecandidate: 'remote-candidate'\n      }[stat.type] || stat.type;\n    };\n    return new Promise(function(resolve) {\n      // shim getStats with maplike support\n      var results = new Map();\n      Promise.all(promises).then(function(res) {\n        res.forEach(function(result) {\n          Object.keys(result).forEach(function(id) {\n            result[id].type = fixStatsType(result[id]);\n            results.set(id, result[id]);\n          });\n        });\n        if (cb) {\n          cb.apply(null, results);\n        }\n        resolve(results);\n      });\n    });\n  };\n  return RTCPeerConnection;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1OS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9ydGNwZWVyY29ubmVjdGlvbi1zaGltL3J0Y3BlZXJjb25uZWN0aW9uLmpzPzM4YjciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cbi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuIC8qIGVzbGludC1lbnYgbm9kZSAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU0RQVXRpbHMgPSByZXF1aXJlKCdzZHAnKTtcblxuZnVuY3Rpb24gd3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsIGNhcHMsIHR5cGUsIHN0cmVhbSwgZHRsc1JvbGUpIHtcbiAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlUnRwRGVzY3JpcHRpb24odHJhbnNjZWl2ZXIua2luZCwgY2Fwcyk7XG5cbiAgLy8gTWFwIElDRSBwYXJhbWV0ZXJzICh1ZnJhZywgcHdkKSB0byBTRFAuXG4gIHNkcCArPSBTRFBVdGlscy53cml0ZUljZVBhcmFtZXRlcnMoXG4gICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5nZXRMb2NhbFBhcmFtZXRlcnMoKSk7XG5cbiAgLy8gTWFwIERUTFMgcGFyYW1ldGVycyB0byBTRFAuXG4gIHNkcCArPSBTRFBVdGlscy53cml0ZUR0bHNQYXJhbWV0ZXJzKFxuICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5nZXRMb2NhbFBhcmFtZXRlcnMoKSxcbiAgICAgIHR5cGUgPT09ICdvZmZlcicgPyAnYWN0cGFzcycgOiBkdGxzUm9sZSB8fCAnYWN0aXZlJyk7XG5cbiAgc2RwICs9ICdhPW1pZDonICsgdHJhbnNjZWl2ZXIubWlkICsgJ1xcclxcbic7XG5cbiAgaWYgKHRyYW5zY2VpdmVyLmRpcmVjdGlvbikge1xuICAgIHNkcCArPSAnYT0nICsgdHJhbnNjZWl2ZXIuZGlyZWN0aW9uICsgJ1xcclxcbic7XG4gIH0gZWxzZSBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyICYmIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7XG4gICAgc2RwICs9ICdhPXNlbmRyZWN2XFxyXFxuJztcbiAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHtcbiAgICBzZHAgKz0gJ2E9c2VuZG9ubHlcXHJcXG4nO1xuICB9IGVsc2UgaWYgKHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyKSB7XG4gICAgc2RwICs9ICdhPXJlY3Zvbmx5XFxyXFxuJztcbiAgfSBlbHNlIHtcbiAgICBzZHAgKz0gJ2E9aW5hY3RpdmVcXHJcXG4nO1xuICB9XG5cbiAgaWYgKHRyYW5zY2VpdmVyLnJ0cFNlbmRlcikge1xuICAgIC8vIHNwZWMuXG4gICAgdmFyIG1zaWQgPSAnbXNpZDonICsgc3RyZWFtLmlkICsgJyAnICtcbiAgICAgICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnRyYWNrLmlkICsgJ1xcclxcbic7XG4gICAgc2RwICs9ICdhPScgKyBtc2lkO1xuXG4gICAgLy8gZm9yIENocm9tZS5cbiAgICBzZHAgKz0gJ2E9c3NyYzonICsgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjICtcbiAgICAgICAgJyAnICsgbXNpZDtcbiAgICBpZiAodHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHtcbiAgICAgIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjICtcbiAgICAgICAgICAnICcgKyBtc2lkO1xuICAgICAgc2RwICs9ICdhPXNzcmMtZ3JvdXA6RklEICcgK1xuICAgICAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArICcgJyArXG4gICAgICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYyArXG4gICAgICAgICAgJ1xcclxcbic7XG4gICAgfVxuICB9XG4gIC8vIEZJWE1FOiB0aGlzIHNob3VsZCBiZSB3cml0dGVuIGJ5IHdyaXRlUnRwRGVzY3JpcHRpb24uXG4gIHNkcCArPSAnYT1zc3JjOicgKyB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMgK1xuICAgICAgJyBjbmFtZTonICsgU0RQVXRpbHMubG9jYWxDTmFtZSArICdcXHJcXG4nO1xuICBpZiAodHJhbnNjZWl2ZXIucnRwU2VuZGVyICYmIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4KSB7XG4gICAgc2RwICs9ICdhPXNzcmM6JyArIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMgK1xuICAgICAgICAnIGNuYW1lOicgKyBTRFBVdGlscy5sb2NhbENOYW1lICsgJ1xcclxcbic7XG4gIH1cbiAgcmV0dXJuIHNkcDtcbn1cblxuLy8gRWRnZSBkb2VzIG5vdCBsaWtlXG4vLyAxKSBzdHVuOiBmaWx0ZXJlZCBhZnRlciAxNDM5MyB1bmxlc3MgP3RyYW5zcG9ydD11ZHAgaXMgcHJlc2VudFxuLy8gMikgdHVybjogdGhhdCBkb2VzIG5vdCBoYXZlIGFsbCBvZiB0dXJuOmhvc3Q6cG9ydD90cmFuc3BvcnQ9dWRwXG4vLyAzKSB0dXJuOiB3aXRoIGlwdjYgYWRkcmVzc2VzXG4vLyA0KSB0dXJuOiBvY2N1cnJpbmcgbXVsaXBsZSB0aW1lc1xuZnVuY3Rpb24gZmlsdGVySWNlU2VydmVycyhpY2VTZXJ2ZXJzLCBlZGdlVmVyc2lvbikge1xuICB2YXIgaGFzVHVybiA9IGZhbHNlO1xuICBpY2VTZXJ2ZXJzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpY2VTZXJ2ZXJzKSk7XG4gIHJldHVybiBpY2VTZXJ2ZXJzLmZpbHRlcihmdW5jdGlvbihzZXJ2ZXIpIHtcbiAgICBpZiAoc2VydmVyICYmIChzZXJ2ZXIudXJscyB8fCBzZXJ2ZXIudXJsKSkge1xuICAgICAgdmFyIHVybHMgPSBzZXJ2ZXIudXJscyB8fCBzZXJ2ZXIudXJsO1xuICAgICAgaWYgKHNlcnZlci51cmwgJiYgIXNlcnZlci51cmxzKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignUlRDSWNlU2VydmVyLnVybCBpcyBkZXByZWNhdGVkISBVc2UgdXJscyBpbnN0ZWFkLicpO1xuICAgICAgfVxuICAgICAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIHVybHMgPT09ICdzdHJpbmcnO1xuICAgICAgaWYgKGlzU3RyaW5nKSB7XG4gICAgICAgIHVybHMgPSBbdXJsc107XG4gICAgICB9XG4gICAgICB1cmxzID0gdXJscy5maWx0ZXIoZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciB2YWxpZFR1cm4gPSB1cmwuaW5kZXhPZigndHVybjonKSA9PT0gMCAmJlxuICAgICAgICAgICAgdXJsLmluZGV4T2YoJ3RyYW5zcG9ydD11ZHAnKSAhPT0gLTEgJiZcbiAgICAgICAgICAgIHVybC5pbmRleE9mKCd0dXJuOlsnKSA9PT0gLTEgJiZcbiAgICAgICAgICAgICFoYXNUdXJuO1xuXG4gICAgICAgIGlmICh2YWxpZFR1cm4pIHtcbiAgICAgICAgICBoYXNUdXJuID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsLmluZGV4T2YoJ3N0dW46JykgPT09IDAgJiYgZWRnZVZlcnNpb24gPj0gMTQzOTMgJiZcbiAgICAgICAgICAgIHVybC5pbmRleE9mKCc/dHJhbnNwb3J0PXVkcCcpID09PSAtMTtcbiAgICAgIH0pO1xuXG4gICAgICBkZWxldGUgc2VydmVyLnVybDtcbiAgICAgIHNlcnZlci51cmxzID0gaXNTdHJpbmcgPyB1cmxzWzBdIDogdXJscztcbiAgICAgIHJldHVybiAhIXVybHMubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xufVxuXG4vLyBEZXRlcm1pbmVzIHRoZSBpbnRlcnNlY3Rpb24gb2YgbG9jYWwgYW5kIHJlbW90ZSBjYXBhYmlsaXRpZXMuXG5mdW5jdGlvbiBnZXRDb21tb25DYXBhYmlsaXRpZXMobG9jYWxDYXBhYmlsaXRpZXMsIHJlbW90ZUNhcGFiaWxpdGllcykge1xuICB2YXIgY29tbW9uQ2FwYWJpbGl0aWVzID0ge1xuICAgIGNvZGVjczogW10sXG4gICAgaGVhZGVyRXh0ZW5zaW9uczogW10sXG4gICAgZmVjTWVjaGFuaXNtczogW11cbiAgfTtcblxuICB2YXIgZmluZENvZGVjQnlQYXlsb2FkVHlwZSA9IGZ1bmN0aW9uKHB0LCBjb2RlY3MpIHtcbiAgICBwdCA9IHBhcnNlSW50KHB0LCAxMCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2RlY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChjb2RlY3NbaV0ucGF5bG9hZFR5cGUgPT09IHB0IHx8XG4gICAgICAgICAgY29kZWNzW2ldLnByZWZlcnJlZFBheWxvYWRUeXBlID09PSBwdCkge1xuICAgICAgICByZXR1cm4gY29kZWNzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgcnR4Q2FwYWJpbGl0eU1hdGNoZXMgPSBmdW5jdGlvbihsUnR4LCByUnR4LCBsQ29kZWNzLCByQ29kZWNzKSB7XG4gICAgdmFyIGxDb2RlYyA9IGZpbmRDb2RlY0J5UGF5bG9hZFR5cGUobFJ0eC5wYXJhbWV0ZXJzLmFwdCwgbENvZGVjcyk7XG4gICAgdmFyIHJDb2RlYyA9IGZpbmRDb2RlY0J5UGF5bG9hZFR5cGUoclJ0eC5wYXJhbWV0ZXJzLmFwdCwgckNvZGVjcyk7XG4gICAgcmV0dXJuIGxDb2RlYyAmJiByQ29kZWMgJiZcbiAgICAgICAgbENvZGVjLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gckNvZGVjLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgfTtcblxuICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MuZm9yRWFjaChmdW5jdGlvbihsQ29kZWMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByQ29kZWMgPSByZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzW2ldO1xuICAgICAgaWYgKGxDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IHJDb2RlYy5uYW1lLnRvTG93ZXJDYXNlKCkgJiZcbiAgICAgICAgICBsQ29kZWMuY2xvY2tSYXRlID09PSByQ29kZWMuY2xvY2tSYXRlKSB7XG4gICAgICAgIGlmIChsQ29kZWMubmFtZS50b0xvd2VyQ2FzZSgpID09PSAncnR4JyAmJlxuICAgICAgICAgICAgbENvZGVjLnBhcmFtZXRlcnMgJiYgckNvZGVjLnBhcmFtZXRlcnMuYXB0KSB7XG4gICAgICAgICAgLy8gZm9yIFJUWCB3ZSBuZWVkIHRvIGZpbmQgdGhlIGxvY2FsIHJ0eCB0aGF0IGhhcyBhIGFwdFxuICAgICAgICAgIC8vIHdoaWNoIHBvaW50cyB0byB0aGUgc2FtZSBsb2NhbCBjb2RlYyBhcyB0aGUgcmVtb3RlIG9uZS5cbiAgICAgICAgICBpZiAoIXJ0eENhcGFiaWxpdHlNYXRjaGVzKGxDb2RlYywgckNvZGVjLFxuICAgICAgICAgICAgICBsb2NhbENhcGFiaWxpdGllcy5jb2RlY3MsIHJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgckNvZGVjID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyQ29kZWMpKTsgLy8gZGVlcGNvcHlcbiAgICAgICAgLy8gbnVtYmVyIG9mIGNoYW5uZWxzIGlzIHRoZSBoaWdoZXN0IGNvbW1vbiBudW1iZXIgb2YgY2hhbm5lbHNcbiAgICAgICAgckNvZGVjLm51bUNoYW5uZWxzID0gTWF0aC5taW4obENvZGVjLm51bUNoYW5uZWxzLFxuICAgICAgICAgICAgckNvZGVjLm51bUNoYW5uZWxzKTtcbiAgICAgICAgLy8gcHVzaCByQ29kZWMgc28gd2UgcmVwbHkgd2l0aCBvZmZlcmVyIHBheWxvYWQgdHlwZVxuICAgICAgICBjb21tb25DYXBhYmlsaXRpZXMuY29kZWNzLnB1c2gockNvZGVjKTtcblxuICAgICAgICAvLyBkZXRlcm1pbmUgY29tbW9uIGZlZWRiYWNrIG1lY2hhbmlzbXNcbiAgICAgICAgckNvZGVjLnJ0Y3BGZWVkYmFjayA9IHJDb2RlYy5ydGNwRmVlZGJhY2suZmlsdGVyKGZ1bmN0aW9uKGZiKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsQ29kZWMucnRjcEZlZWRiYWNrLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAobENvZGVjLnJ0Y3BGZWVkYmFja1tqXS50eXBlID09PSBmYi50eXBlICYmXG4gICAgICAgICAgICAgICAgbENvZGVjLnJ0Y3BGZWVkYmFja1tqXS5wYXJhbWV0ZXIgPT09IGZiLnBhcmFtZXRlcikge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gRklYTUU6IGFsc28gbmVlZCB0byBkZXRlcm1pbmUgLnBhcmFtZXRlcnNcbiAgICAgICAgLy8gIHNlZSBodHRwczovL2dpdGh1Yi5jb20vb3BlbnBlZXIvb3J0Yy9pc3N1ZXMvNTY5XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgbG9jYWxDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGxIZWFkZXJFeHRlbnNpb24pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbW90ZUNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zLmxlbmd0aDtcbiAgICAgICAgIGkrKykge1xuICAgICAgdmFyIHJIZWFkZXJFeHRlbnNpb24gPSByZW1vdGVDYXBhYmlsaXRpZXMuaGVhZGVyRXh0ZW5zaW9uc1tpXTtcbiAgICAgIGlmIChsSGVhZGVyRXh0ZW5zaW9uLnVyaSA9PT0gckhlYWRlckV4dGVuc2lvbi51cmkpIHtcbiAgICAgICAgY29tbW9uQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnMucHVzaChySGVhZGVyRXh0ZW5zaW9uKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBGSVhNRTogZmVjTWVjaGFuaXNtc1xuICByZXR1cm4gY29tbW9uQ2FwYWJpbGl0aWVzO1xufVxuXG4vLyBpcyBhY3Rpb249c2V0TG9jYWxEZXNjcmlwdGlvbiB3aXRoIHR5cGUgYWxsb3dlZCBpbiBzaWduYWxpbmdTdGF0ZVxuZnVuY3Rpb24gaXNBY3Rpb25BbGxvd2VkSW5TaWduYWxpbmdTdGF0ZShhY3Rpb24sIHR5cGUsIHNpZ25hbGluZ1N0YXRlKSB7XG4gIHJldHVybiB7XG4gICAgb2ZmZXI6IHtcbiAgICAgIHNldExvY2FsRGVzY3JpcHRpb246IFsnc3RhYmxlJywgJ2hhdmUtbG9jYWwtb2ZmZXInXSxcbiAgICAgIHNldFJlbW90ZURlc2NyaXB0aW9uOiBbJ3N0YWJsZScsICdoYXZlLXJlbW90ZS1vZmZlciddXG4gICAgfSxcbiAgICBhbnN3ZXI6IHtcbiAgICAgIHNldExvY2FsRGVzY3JpcHRpb246IFsnaGF2ZS1yZW1vdGUtb2ZmZXInLCAnaGF2ZS1sb2NhbC1wcmFuc3dlciddLFxuICAgICAgc2V0UmVtb3RlRGVzY3JpcHRpb246IFsnaGF2ZS1sb2NhbC1vZmZlcicsICdoYXZlLXJlbW90ZS1wcmFuc3dlciddXG4gICAgfVxuICB9W3R5cGVdW2FjdGlvbl0uaW5kZXhPZihzaWduYWxpbmdTdGF0ZSkgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBtYXliZUFkZENhbmRpZGF0ZShpY2VUcmFuc3BvcnQsIGNhbmRpZGF0ZSkge1xuICAvLyBFZGdlJ3MgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gYWRkcyBzb21lIGZpZWxkcyB0aGVyZWZvcmVcbiAgLy8gbm90IGFsbCBmaWVsZNGVIGFyZSB0YWtlbiBpbnRvIGFjY291bnQuXG4gIHZhciBhbHJlYWR5QWRkZWQgPSBpY2VUcmFuc3BvcnQuZ2V0UmVtb3RlQ2FuZGlkYXRlcygpXG4gICAgICAuZmluZChmdW5jdGlvbihyZW1vdGVDYW5kaWRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGNhbmRpZGF0ZS5mb3VuZGF0aW9uID09PSByZW1vdGVDYW5kaWRhdGUuZm91bmRhdGlvbiAmJlxuICAgICAgICAgICAgY2FuZGlkYXRlLmlwID09PSByZW1vdGVDYW5kaWRhdGUuaXAgJiZcbiAgICAgICAgICAgIGNhbmRpZGF0ZS5wb3J0ID09PSByZW1vdGVDYW5kaWRhdGUucG9ydCAmJlxuICAgICAgICAgICAgY2FuZGlkYXRlLnByaW9yaXR5ID09PSByZW1vdGVDYW5kaWRhdGUucHJpb3JpdHkgJiZcbiAgICAgICAgICAgIGNhbmRpZGF0ZS5wcm90b2NvbCA9PT0gcmVtb3RlQ2FuZGlkYXRlLnByb3RvY29sICYmXG4gICAgICAgICAgICBjYW5kaWRhdGUudHlwZSA9PT0gcmVtb3RlQ2FuZGlkYXRlLnR5cGU7XG4gICAgICB9KTtcbiAgaWYgKCFhbHJlYWR5QWRkZWQpIHtcbiAgICBpY2VUcmFuc3BvcnQuYWRkUmVtb3RlQ2FuZGlkYXRlKGNhbmRpZGF0ZSk7XG4gIH1cbiAgcmV0dXJuICFhbHJlYWR5QWRkZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24od2luZG93LCBlZGdlVmVyc2lvbikge1xuICB2YXIgUlRDUGVlckNvbm5lY3Rpb24gPSBmdW5jdGlvbihjb25maWcpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgX2V2ZW50VGFyZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIFsnYWRkRXZlbnRMaXN0ZW5lcicsICdyZW1vdmVFdmVudExpc3RlbmVyJywgJ2Rpc3BhdGNoRXZlbnQnXVxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICBzZWxmW21ldGhvZF0gPSBfZXZlbnRUYXJnZXRbbWV0aG9kXS5iaW5kKF9ldmVudFRhcmdldCk7XG4gICAgICAgIH0pO1xuXG4gICAgdGhpcy5vbmljZWNhbmRpZGF0ZSA9IG51bGw7XG4gICAgdGhpcy5vbmFkZHN0cmVhbSA9IG51bGw7XG4gICAgdGhpcy5vbnRyYWNrID0gbnVsbDtcbiAgICB0aGlzLm9ucmVtb3Zlc3RyZWFtID0gbnVsbDtcbiAgICB0aGlzLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgIHRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgIHRoaXMub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgdGhpcy5vbm5lZ290aWF0aW9ubmVlZGVkID0gbnVsbDtcbiAgICB0aGlzLm9uZGF0YWNoYW5uZWwgPSBudWxsO1xuICAgIHRoaXMuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXMgPSBudWxsO1xuXG4gICAgdGhpcy5uZWVkTmVnb3RpYXRpb24gPSBmYWxzZTtcblxuICAgIHRoaXMubG9jYWxTdHJlYW1zID0gW107XG4gICAgdGhpcy5yZW1vdGVTdHJlYW1zID0gW107XG5cbiAgICB0aGlzLmxvY2FsRGVzY3JpcHRpb24gPSBudWxsO1xuICAgIHRoaXMucmVtb3RlRGVzY3JpcHRpb24gPSBudWxsO1xuXG4gICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9ICdzdGFibGUnO1xuICAgIHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlID0gJ25ldyc7XG4gICAgdGhpcy5pY2VHYXRoZXJpbmdTdGF0ZSA9ICduZXcnO1xuXG4gICAgY29uZmlnID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjb25maWcgfHwge30pKTtcblxuICAgIHRoaXMudXNpbmdCdW5kbGUgPSBjb25maWcuYnVuZGxlUG9saWN5ID09PSAnbWF4LWJ1bmRsZSc7XG4gICAgaWYgKGNvbmZpZy5ydGNwTXV4UG9saWN5ID09PSAnbmVnb3RpYXRlJykge1xuICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoJ3J0Y3BNdXhQb2xpY3kgXFwnbmVnb3RpYXRlXFwnIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICAgIGUubmFtZSA9ICdOb3RTdXBwb3J0ZWRFcnJvcic7XG4gICAgICB0aHJvdyhlKTtcbiAgICB9IGVsc2UgaWYgKCFjb25maWcucnRjcE11eFBvbGljeSkge1xuICAgICAgY29uZmlnLnJ0Y3BNdXhQb2xpY3kgPSAncmVxdWlyZSc7XG4gICAgfVxuXG4gICAgc3dpdGNoIChjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5KSB7XG4gICAgICBjYXNlICdhbGwnOlxuICAgICAgY2FzZSAncmVsYXknOlxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3kgPSAnYWxsJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgc3dpdGNoIChjb25maWcuYnVuZGxlUG9saWN5KSB7XG4gICAgICBjYXNlICdiYWxhbmNlZCc6XG4gICAgICBjYXNlICdtYXgtY29tcGF0JzpcbiAgICAgIGNhc2UgJ21heC1idW5kbGUnOlxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbmZpZy5idW5kbGVQb2xpY3kgPSAnYmFsYW5jZWQnO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb25maWcuaWNlU2VydmVycyA9IGZpbHRlckljZVNlcnZlcnMoY29uZmlnLmljZVNlcnZlcnMgfHwgW10sIGVkZ2VWZXJzaW9uKTtcblxuICAgIHRoaXMuX2ljZUdhdGhlcmVycyA9IFtdO1xuICAgIGlmIChjb25maWcuaWNlQ2FuZGlkYXRlUG9vbFNpemUpIHtcbiAgICAgIGZvciAodmFyIGkgPSBjb25maWcuaWNlQ2FuZGlkYXRlUG9vbFNpemU7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgdGhpcy5faWNlR2F0aGVyZXJzID0gbmV3IHdpbmRvdy5SVENJY2VHYXRoZXJlcih7XG4gICAgICAgICAgaWNlU2VydmVyczogY29uZmlnLmljZVNlcnZlcnMsXG4gICAgICAgICAgZ2F0aGVyUG9saWN5OiBjb25maWcuaWNlVHJhbnNwb3J0UG9saWN5XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25maWcuaWNlQ2FuZGlkYXRlUG9vbFNpemUgPSAwO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcblxuICAgIC8vIHBlci10cmFjayBpY2VHYXRoZXJzLCBpY2VUcmFuc3BvcnRzLCBkdGxzVHJhbnNwb3J0cywgcnRwU2VuZGVycywgLi4uXG4gICAgLy8gZXZlcnl0aGluZyB0aGF0IGlzIG5lZWRlZCB0byBkZXNjcmliZSBhIFNEUCBtLWxpbmUuXG4gICAgdGhpcy50cmFuc2NlaXZlcnMgPSBbXTtcblxuICAgIHRoaXMuX3NkcFNlc3Npb25JZCA9IFNEUFV0aWxzLmdlbmVyYXRlU2Vzc2lvbklkKCk7XG4gICAgdGhpcy5fc2RwU2Vzc2lvblZlcnNpb24gPSAwO1xuXG4gICAgdGhpcy5fZHRsc1JvbGUgPSB1bmRlZmluZWQ7IC8vIHJvbGUgZm9yIGE9c2V0dXAgdG8gdXNlIGluIGFuc3dlcnMuXG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ2ljZWdhdGhlcmluZ3N0YXRlY2hhbmdlJyk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICBpZiAodHlwZW9mIHRoaXMub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlKGV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5sb2NhbFN0cmVhbXM7XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlbW90ZVN0cmVhbXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdGVTdHJlYW1zO1xuICB9O1xuXG4gIC8vIGludGVybmFsIGhlbHBlciB0byBjcmVhdGUgYSB0cmFuc2NlaXZlciBvYmplY3QuXG4gIC8vICh3aGloIGlzIG5vdCB5ZXQgdGhlIHNhbWUgYXMgdGhlIFdlYlJUQyAxLjAgdHJhbnNjZWl2ZXIpXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fY3JlYXRlVHJhbnNjZWl2ZXIgPSBmdW5jdGlvbihraW5kKSB7XG4gICAgdmFyIGhhc0J1bmRsZVRyYW5zcG9ydCA9IHRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aCA+IDA7XG4gICAgdmFyIHRyYW5zY2VpdmVyID0ge1xuICAgICAgdHJhY2s6IG51bGwsXG4gICAgICBpY2VHYXRoZXJlcjogbnVsbCxcbiAgICAgIGljZVRyYW5zcG9ydDogbnVsbCxcbiAgICAgIGR0bHNUcmFuc3BvcnQ6IG51bGwsXG4gICAgICBsb2NhbENhcGFiaWxpdGllczogbnVsbCxcbiAgICAgIHJlbW90ZUNhcGFiaWxpdGllczogbnVsbCxcbiAgICAgIHJ0cFNlbmRlcjogbnVsbCxcbiAgICAgIHJ0cFJlY2VpdmVyOiBudWxsLFxuICAgICAga2luZDoga2luZCxcbiAgICAgIG1pZDogbnVsbCxcbiAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM6IG51bGwsXG4gICAgICByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOiBudWxsLFxuICAgICAgc3RyZWFtOiBudWxsLFxuICAgICAgd2FudFJlY2VpdmU6IHRydWVcbiAgICB9O1xuICAgIGlmICh0aGlzLnVzaW5nQnVuZGxlICYmIGhhc0J1bmRsZVRyYW5zcG9ydCkge1xuICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0ID0gdGhpcy50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0O1xuICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCA9IHRoaXMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0cmFuc3BvcnRzID0gdGhpcy5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMoKTtcbiAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCA9IHRyYW5zcG9ydHMuaWNlVHJhbnNwb3J0O1xuICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCA9IHRyYW5zcG9ydHMuZHRsc1RyYW5zcG9ydDtcbiAgICB9XG4gICAgdGhpcy50cmFuc2NlaXZlcnMucHVzaCh0cmFuc2NlaXZlcik7XG4gICAgcmV0dXJuIHRyYW5zY2VpdmVyO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayA9IGZ1bmN0aW9uKHRyYWNrLCBzdHJlYW0pIHtcbiAgICB2YXIgdHJhbnNjZWl2ZXI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYW5zY2VpdmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCF0aGlzLnRyYW5zY2VpdmVyc1tpXS50cmFjayAmJlxuICAgICAgICAgIHRoaXMudHJhbnNjZWl2ZXJzW2ldLmtpbmQgPT09IHRyYWNrLmtpbmQpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIgPSB0aGlzLnRyYW5zY2VpdmVyc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0cmFuc2NlaXZlcikge1xuICAgICAgdHJhbnNjZWl2ZXIgPSB0aGlzLl9jcmVhdGVUcmFuc2NlaXZlcih0cmFjay5raW5kKTtcbiAgICB9XG5cbiAgICB0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpO1xuXG4gICAgaWYgKHRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEpIHtcbiAgICAgIHRoaXMubG9jYWxTdHJlYW1zLnB1c2goc3RyZWFtKTtcbiAgICB9XG5cbiAgICB0cmFuc2NlaXZlci50cmFjayA9IHRyYWNrO1xuICAgIHRyYW5zY2VpdmVyLnN0cmVhbSA9IHN0cmVhbTtcbiAgICB0cmFuc2NlaXZlci5ydHBTZW5kZXIgPSBuZXcgd2luZG93LlJUQ1J0cFNlbmRlcih0cmFjayxcbiAgICAgICAgdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCk7XG4gICAgcmV0dXJuIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcjtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGlmIChlZGdlVmVyc2lvbiA+PSAxNTAyNSkge1xuICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgc2VsZi5hZGRUcmFjayh0cmFjaywgc3RyZWFtKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDbG9uZSBpcyBuZWNlc3NhcnkgZm9yIGxvY2FsIGRlbW9zIG1vc3RseSwgYXR0YWNoaW5nIGRpcmVjdGx5XG4gICAgICAvLyB0byB0d28gZGlmZmVyZW50IHNlbmRlcnMgZG9lcyBub3Qgd29yayAoYnVpbGQgMTA1NDcpLlxuICAgICAgLy8gRml4ZWQgaW4gMTUwMjUgKG9yIGVhcmxpZXIpXG4gICAgICB2YXIgY2xvbmVkU3RyZWFtID0gc3RyZWFtLmNsb25lKCk7XG4gICAgICBzdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0cmFjaywgaWR4KSB7XG4gICAgICAgIHZhciBjbG9uZWRUcmFjayA9IGNsb25lZFN0cmVhbS5nZXRUcmFja3MoKVtpZHhdO1xuICAgICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdlbmFibGVkJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBjbG9uZWRUcmFjay5lbmFibGVkID0gZXZlbnQuZW5hYmxlZDtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGNsb25lZFN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgIHNlbGYuYWRkVHJhY2sodHJhY2ssIGNsb25lZFN0cmVhbSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbSA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgIHZhciBpZHggPSB0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHN0cmVhbSk7XG4gICAgaWYgKGlkeCA+IC0xKSB7XG4gICAgICB0aGlzLmxvY2FsU3RyZWFtcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCk7XG4gICAgfVxuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgcmV0dXJuICEhdHJhbnNjZWl2ZXIucnRwU2VuZGVyO1xuICAgIH0pXG4gICAgLm1hcChmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLnJ0cFNlbmRlcjtcbiAgICB9KTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcihmdW5jdGlvbih0cmFuc2NlaXZlcikge1xuICAgICAgcmV0dXJuICEhdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgfSlcbiAgICAubWFwKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICByZXR1cm4gdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgfSk7XG4gIH07XG5cblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX2NyZWF0ZUljZUdhdGhlcmVyID0gZnVuY3Rpb24oc2RwTUxpbmVJbmRleCxcbiAgICAgIHVzaW5nQnVuZGxlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGlmICh1c2luZ0J1bmRsZSAmJiBzZHBNTGluZUluZGV4ID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzWzBdLmljZUdhdGhlcmVyO1xuICAgIH0gZWxzZSBpZiAodGhpcy5faWNlR2F0aGVyZXJzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ljZUdhdGhlcmVycy5zaGlmdCgpO1xuICAgIH1cbiAgICB2YXIgaWNlR2F0aGVyZXIgPSBuZXcgd2luZG93LlJUQ0ljZUdhdGhlcmVyKHtcbiAgICAgIGljZVNlcnZlcnM6IHRoaXMuX2NvbmZpZy5pY2VTZXJ2ZXJzLFxuICAgICAgZ2F0aGVyUG9saWN5OiB0aGlzLl9jb25maWcuaWNlVHJhbnNwb3J0UG9saWN5XG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGljZUdhdGhlcmVyLCAnc3RhdGUnLFxuICAgICAgICB7dmFsdWU6ICduZXcnLCB3cml0YWJsZTogdHJ1ZX1cbiAgICApO1xuXG4gICAgdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uY2FuZGlkYXRlcyA9IFtdO1xuICAgIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmJ1ZmZlckNhbmRpZGF0ZXMgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgdmFyIGVuZCA9ICFldmVudC5jYW5kaWRhdGUgfHwgT2JqZWN0LmtleXMoZXZlbnQuY2FuZGlkYXRlKS5sZW5ndGggPT09IDA7XG4gICAgICAvLyBwb2x5ZmlsbCBzaW5jZSBSVENJY2VHYXRoZXJlci5zdGF0ZSBpcyBub3QgaW1wbGVtZW50ZWQgaW5cbiAgICAgIC8vIEVkZ2UgMTA1NDcgeWV0LlxuICAgICAgaWNlR2F0aGVyZXIuc3RhdGUgPSBlbmQgPyAnY29tcGxldGVkJyA6ICdnYXRoZXJpbmcnO1xuICAgICAgaWYgKHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmNhbmRpZGF0ZXMgIT09IG51bGwpIHtcbiAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uY2FuZGlkYXRlcy5wdXNoKGV2ZW50LmNhbmRpZGF0ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBpY2VHYXRoZXJlci5hZGRFdmVudExpc3RlbmVyKCdsb2NhbGNhbmRpZGF0ZScsXG4gICAgICB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJDYW5kaWRhdGVzKTtcbiAgICByZXR1cm4gaWNlR2F0aGVyZXI7XG4gIH07XG5cbiAgLy8gc3RhcnQgZ2F0aGVyaW5nIGZyb20gYW4gUlRDSWNlR2F0aGVyZXIuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fZ2F0aGVyID0gZnVuY3Rpb24obWlkLCBzZHBNTGluZUluZGV4KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBpY2VHYXRoZXJlciA9IHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZUdhdGhlcmVyO1xuICAgIGlmIChpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBjYW5kaWRhdGVzID0gdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uY2FuZGlkYXRlcztcbiAgICB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5jYW5kaWRhdGVzID0gbnVsbDtcbiAgICBpY2VHYXRoZXJlci5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2NhbGNhbmRpZGF0ZScsXG4gICAgICB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5idWZmZXJDYW5kaWRhdGVzKTtcbiAgICBpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICBpZiAoc2VsZi51c2luZ0J1bmRsZSAmJiBzZHBNTGluZUluZGV4ID4gMCkge1xuICAgICAgICAvLyBpZiB3ZSBrbm93IHRoYXQgd2UgdXNlIGJ1bmRsZSB3ZSBjYW4gZHJvcCBjYW5kaWRhdGVzIHdpdGhcbiAgICAgICAgLy8g0ZVkcE1MaW5lSW5kZXggPiAwLiBJZiB3ZSBkb24ndCBkbyB0aGlzIHRoZW4gb3VyIHN0YXRlIGdldHNcbiAgICAgICAgLy8gY29uZnVzZWQgc2luY2Ugd2UgZGlzcG9zZSB0aGUgZXh0cmEgaWNlIGdhdGhlcmVyLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgZXZlbnQgPSBuZXcgRXZlbnQoJ2ljZWNhbmRpZGF0ZScpO1xuICAgICAgZXZlbnQuY2FuZGlkYXRlID0ge3NkcE1pZDogbWlkLCBzZHBNTGluZUluZGV4OiBzZHBNTGluZUluZGV4fTtcblxuICAgICAgdmFyIGNhbmQgPSBldnQuY2FuZGlkYXRlO1xuICAgICAgLy8gRWRnZSBlbWl0cyBhbiBlbXB0eSBvYmplY3QgZm9yIFJUQ0ljZUNhbmRpZGF0ZUNvbXBsZXRl4oClXG4gICAgICB2YXIgZW5kID0gIWNhbmQgfHwgT2JqZWN0LmtleXMoY2FuZCkubGVuZ3RoID09PSAwO1xuICAgICAgaWYgKGVuZCkge1xuICAgICAgICAvLyBwb2x5ZmlsbCBzaW5jZSBSVENJY2VHYXRoZXJlci5zdGF0ZSBpcyBub3QgaW1wbGVtZW50ZWQgaW5cbiAgICAgICAgLy8gRWRnZSAxMDU0NyB5ZXQuXG4gICAgICAgIGlmIChpY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ25ldycgfHwgaWNlR2F0aGVyZXIuc3RhdGUgPT09ICdnYXRoZXJpbmcnKSB7XG4gICAgICAgICAgaWNlR2F0aGVyZXIuc3RhdGUgPSAnY29tcGxldGVkJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGljZUdhdGhlcmVyLnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgICAgIGljZUdhdGhlcmVyLnN0YXRlID0gJ2dhdGhlcmluZyc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUlRDSWNlQ2FuZGlkYXRlIGRvZXNuJ3QgaGF2ZSBhIGNvbXBvbmVudCwgbmVlZHMgdG8gYmUgYWRkZWRcbiAgICAgICAgY2FuZC5jb21wb25lbnQgPSAxO1xuICAgICAgICBldmVudC5jYW5kaWRhdGUuY2FuZGlkYXRlID0gU0RQVXRpbHMud3JpdGVDYW5kaWRhdGUoY2FuZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHVwZGF0ZSBsb2NhbCBkZXNjcmlwdGlvbi5cbiAgICAgIHZhciBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoc2VsZi5sb2NhbERlc2NyaXB0aW9uLnNkcCk7XG4gICAgICBpZiAoIWVuZCkge1xuICAgICAgICBzZWN0aW9uc1tldmVudC5jYW5kaWRhdGUuc2RwTUxpbmVJbmRleCArIDFdICs9XG4gICAgICAgICAgICAnYT0nICsgZXZlbnQuY2FuZGlkYXRlLmNhbmRpZGF0ZSArICdcXHJcXG4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VjdGlvbnNbZXZlbnQuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXggKyAxXSArPVxuICAgICAgICAgICAgJ2E9ZW5kLW9mLWNhbmRpZGF0ZXNcXHJcXG4nO1xuICAgICAgfVxuICAgICAgc2VsZi5sb2NhbERlc2NyaXB0aW9uLnNkcCA9IHNlY3Rpb25zLmpvaW4oJycpO1xuICAgICAgdmFyIGNvbXBsZXRlID0gc2VsZi50cmFuc2NlaXZlcnMuZXZlcnkoZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmXG4gICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ2NvbXBsZXRlZCc7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHNlbGYuaWNlR2F0aGVyaW5nU3RhdGUgIT09ICdnYXRoZXJpbmcnKSB7XG4gICAgICAgIHNlbGYuaWNlR2F0aGVyaW5nU3RhdGUgPSAnZ2F0aGVyaW5nJztcbiAgICAgICAgc2VsZi5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEVtaXQgY2FuZGlkYXRlLiBBbHNvIGVtaXQgbnVsbCBjYW5kaWRhdGUgd2hlbiBhbGwgZ2F0aGVyZXJzIGFyZVxuICAgICAgLy8gY29tcGxldGUuXG4gICAgICBpZiAoIWVuZCkge1xuICAgICAgICBzZWxmLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICBpZiAodHlwZW9mIHNlbGYub25pY2VjYW5kaWRhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBzZWxmLm9uaWNlY2FuZGlkYXRlKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNvbXBsZXRlKSB7XG4gICAgICAgIHNlbGYuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2ljZWNhbmRpZGF0ZScpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLm9uaWNlY2FuZGlkYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgc2VsZi5vbmljZWNhbmRpZGF0ZShuZXcgRXZlbnQoJ2ljZWNhbmRpZGF0ZScpKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmljZUdhdGhlcmluZ1N0YXRlID0gJ2NvbXBsZXRlJztcbiAgICAgICAgc2VsZi5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIGVtaXQgYWxyZWFkeSBnYXRoZXJlZCBjYW5kaWRhdGVzLlxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgY2FuZGlkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uKGNhbmRpZGF0ZSkge1xuICAgICAgICB2YXIgZSA9IG5ldyBFdmVudCgnUlRDSWNlR2F0aGVyRXZlbnQnKTtcbiAgICAgICAgZS5jYW5kaWRhdGUgPSBjYW5kaWRhdGU7XG4gICAgICAgIGljZUdhdGhlcmVyLm9ubG9jYWxjYW5kaWRhdGUoZSk7XG4gICAgICB9KTtcbiAgICB9LCAwKTtcbiAgfTtcblxuICAvLyBDcmVhdGUgSUNFIHRyYW5zcG9ydCBhbmQgRFRMUyB0cmFuc3BvcnQuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGljZVRyYW5zcG9ydCA9IG5ldyB3aW5kb3cuUlRDSWNlVHJhbnNwb3J0KG51bGwpO1xuICAgIGljZVRyYW5zcG9ydC5vbmljZXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTtcbiAgICB9O1xuXG4gICAgdmFyIGR0bHNUcmFuc3BvcnQgPSBuZXcgd2luZG93LlJUQ0R0bHNUcmFuc3BvcnQoaWNlVHJhbnNwb3J0KTtcbiAgICBkdGxzVHJhbnNwb3J0Lm9uZHRsc3N0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTtcbiAgICB9O1xuICAgIGR0bHNUcmFuc3BvcnQub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gb25lcnJvciBkb2VzIG5vdCBzZXQgc3RhdGUgdG8gZmFpbGVkIGJ5IGl0c2VsZi5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkdGxzVHJhbnNwb3J0LCAnc3RhdGUnLFxuICAgICAgICAgIHt2YWx1ZTogJ2ZhaWxlZCcsIHdyaXRhYmxlOiB0cnVlfSk7XG4gICAgICBzZWxmLl91cGRhdGVDb25uZWN0aW9uU3RhdGUoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGljZVRyYW5zcG9ydDogaWNlVHJhbnNwb3J0LFxuICAgICAgZHRsc1RyYW5zcG9ydDogZHRsc1RyYW5zcG9ydFxuICAgIH07XG4gIH07XG5cbiAgLy8gRGVzdHJveSBJQ0UgZ2F0aGVyZXIsIElDRSB0cmFuc3BvcnQgYW5kIERUTFMgdHJhbnNwb3J0LlxuICAvLyBXaXRob3V0IHRyaWdnZXJpbmcgdGhlIGNhbGxiYWNrcy5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9kaXNwb3NlSWNlQW5kRHRsc1RyYW5zcG9ydHMgPSBmdW5jdGlvbihcbiAgICAgIHNkcE1MaW5lSW5kZXgpIHtcbiAgICB2YXIgaWNlR2F0aGVyZXIgPSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VHYXRoZXJlcjtcbiAgICBpZiAoaWNlR2F0aGVyZXIpIHtcbiAgICAgIGRlbGV0ZSBpY2VHYXRoZXJlci5vbmxvY2FsY2FuZGlkYXRlO1xuICAgICAgZGVsZXRlIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZUdhdGhlcmVyO1xuICAgIH1cbiAgICB2YXIgaWNlVHJhbnNwb3J0ID0gdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uaWNlVHJhbnNwb3J0O1xuICAgIGlmIChpY2VUcmFuc3BvcnQpIHtcbiAgICAgIGRlbGV0ZSBpY2VUcmFuc3BvcnQub25pY2VzdGF0ZWNoYW5nZTtcbiAgICAgIGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VUcmFuc3BvcnQ7XG4gICAgfVxuICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gdGhpcy50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0uZHRsc1RyYW5zcG9ydDtcbiAgICBpZiAoZHRsc1RyYW5zcG9ydCkge1xuICAgICAgZGVsZXRlIGR0bHNUcmFuc3BvcnQub25kdGxzc3RhdGVjaGFuZ2U7XG4gICAgICBkZWxldGUgZHRsc1RyYW5zcG9ydC5vbmVycm9yO1xuICAgICAgZGVsZXRlIHRoaXMudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmR0bHNUcmFuc3BvcnQ7XG4gICAgfVxuICB9O1xuXG4gIC8vIFN0YXJ0IHRoZSBSVFAgU2VuZGVyIGFuZCBSZWNlaXZlciBmb3IgYSB0cmFuc2NlaXZlci5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl90cmFuc2NlaXZlID0gZnVuY3Rpb24odHJhbnNjZWl2ZXIsXG4gICAgICBzZW5kLCByZWN2KSB7XG4gICAgdmFyIHBhcmFtcyA9IGdldENvbW1vbkNhcGFiaWxpdGllcyh0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcyxcbiAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzKTtcbiAgICBpZiAoc2VuZCAmJiB0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHtcbiAgICAgIHBhcmFtcy5lbmNvZGluZ3MgPSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgICAgcGFyYW1zLnJ0Y3AgPSB7XG4gICAgICAgIGNuYW1lOiBTRFBVdGlscy5sb2NhbENOYW1lLFxuICAgICAgICBjb21wb3VuZDogdHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMuY29tcG91bmRcbiAgICAgIH07XG4gICAgICBpZiAodHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgpIHtcbiAgICAgICAgcGFyYW1zLnJ0Y3Auc3NyYyA9IHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYztcbiAgICAgIH1cbiAgICAgIHRyYW5zY2VpdmVyLnJ0cFNlbmRlci5zZW5kKHBhcmFtcyk7XG4gICAgfVxuICAgIGlmIChyZWN2ICYmIHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyICYmIHBhcmFtcy5jb2RlY3MubGVuZ3RoID4gMCkge1xuICAgICAgLy8gcmVtb3ZlIFJUWCBmaWVsZCBpbiBFZGdlIDE0OTQyXG4gICAgICBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ3ZpZGVvJ1xuICAgICAgICAgICYmIHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnNcbiAgICAgICAgICAmJiBlZGdlVmVyc2lvbiA8IDE1MDE5KSB7XG4gICAgICAgIHRyYW5zY2VpdmVyLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMuZm9yRWFjaChmdW5jdGlvbihwKSB7XG4gICAgICAgICAgZGVsZXRlIHAucnR4O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHBhcmFtcy5lbmNvZGluZ3MgPSB0cmFuc2NlaXZlci5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgICAgcGFyYW1zLnJ0Y3AgPSB7XG4gICAgICAgIGNuYW1lOiB0cmFuc2NlaXZlci5ydGNwUGFyYW1ldGVycy5jbmFtZSxcbiAgICAgICAgY29tcG91bmQ6IHRyYW5zY2VpdmVyLnJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kXG4gICAgICB9O1xuICAgICAgaWYgKHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoKSB7XG4gICAgICAgIHBhcmFtcy5ydGNwLnNzcmMgPSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmM7XG4gICAgICB9XG4gICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci5yZWNlaXZlKHBhcmFtcyk7XG4gICAgfVxuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uID0gZnVuY3Rpb24oZGVzY3JpcHRpb24pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICBpZiAoIWlzQWN0aW9uQWxsb3dlZEluU2lnbmFsaW5nU3RhdGUoJ3NldExvY2FsRGVzY3JpcHRpb24nLFxuICAgICAgICBkZXNjcmlwdGlvbi50eXBlLCB0aGlzLnNpZ25hbGluZ1N0YXRlKSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcignQ2FuIG5vdCBzZXQgbG9jYWwgJyArIGRlc2NyaXB0aW9uLnR5cGUgK1xuICAgICAgICAgICAgJyBpbiBzdGF0ZSAnICsgc2VsZi5zaWduYWxpbmdTdGF0ZSk7XG4gICAgICAgIGUubmFtZSA9ICdJbnZhbGlkU3RhdGVFcnJvcic7XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDIgJiYgdHlwZW9mIGFyZ3NbMl0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBhcmdzWzJdLmFwcGx5KG51bGwsIFtlXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHNlY3Rpb25zO1xuICAgIHZhciBzZXNzaW9ucGFydDtcbiAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJykge1xuICAgICAgLy8gVkVSWSBsaW1pdGVkIHN1cHBvcnQgZm9yIFNEUCBtdW5naW5nLiBMaW1pdGVkIHRvOlxuICAgICAgLy8gKiBjaGFuZ2luZyB0aGUgb3JkZXIgb2YgY29kZWNzXG4gICAgICBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoZGVzY3JpcHRpb24uc2RwKTtcbiAgICAgIHNlc3Npb25wYXJ0ID0gc2VjdGlvbnMuc2hpZnQoKTtcbiAgICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZHBNTGluZUluZGV4KSB7XG4gICAgICAgIHZhciBjYXBzID0gU0RQVXRpbHMucGFyc2VSdHBQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7XG4gICAgICAgIHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmxvY2FsQ2FwYWJpbGl0aWVzID0gY2FwcztcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyLCBzZHBNTGluZUluZGV4KSB7XG4gICAgICAgIHNlbGYuX2dhdGhlcih0cmFuc2NlaXZlci5taWQsIHNkcE1MaW5lSW5kZXgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnYW5zd2VyJykge1xuICAgICAgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKHNlbGYucmVtb3RlRGVzY3JpcHRpb24uc2RwKTtcbiAgICAgIHNlc3Npb25wYXJ0ID0gc2VjdGlvbnMuc2hpZnQoKTtcbiAgICAgIHZhciBpc0ljZUxpdGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCxcbiAgICAgICAgICAnYT1pY2UtbGl0ZScpLmxlbmd0aCA+IDA7XG4gICAgICBzZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG1lZGlhU2VjdGlvbiwgc2RwTUxpbmVJbmRleCkge1xuICAgICAgICB2YXIgdHJhbnNjZWl2ZXIgPSBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTtcbiAgICAgICAgdmFyIGljZUdhdGhlcmVyID0gdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXI7XG4gICAgICAgIHZhciBpY2VUcmFuc3BvcnQgPSB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQ7XG4gICAgICAgIHZhciBkdGxzVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydDtcbiAgICAgICAgdmFyIGxvY2FsQ2FwYWJpbGl0aWVzID0gdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXM7XG4gICAgICAgIHZhciByZW1vdGVDYXBhYmlsaXRpZXMgPSB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXM7XG5cbiAgICAgICAgLy8gdHJlYXQgYnVuZGxlLW9ubHkgYXMgbm90LXJlamVjdGVkLlxuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBTRFBVdGlscy5pc1JlamVjdGVkKG1lZGlhU2VjdGlvbikgJiZcbiAgICAgICAgICAgICFTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWJ1bmRsZS1vbmx5JykubGVuZ3RoID09PSAxO1xuXG4gICAgICAgIGlmICghcmVqZWN0ZWQgJiYgIXRyYW5zY2VpdmVyLmlzRGF0YWNoYW5uZWwpIHtcbiAgICAgICAgICB2YXIgcmVtb3RlSWNlUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldEljZVBhcmFtZXRlcnMoXG4gICAgICAgICAgICAgIG1lZGlhU2VjdGlvbiwgc2Vzc2lvbnBhcnQpO1xuICAgICAgICAgIHZhciByZW1vdGVEdGxzUGFyYW1ldGVycyA9IFNEUFV0aWxzLmdldER0bHNQYXJhbWV0ZXJzKFxuICAgICAgICAgICAgICBtZWRpYVNlY3Rpb24sIHNlc3Npb25wYXJ0KTtcbiAgICAgICAgICBpZiAoaXNJY2VMaXRlKSB7XG4gICAgICAgICAgICByZW1vdGVEdGxzUGFyYW1ldGVycy5yb2xlID0gJ3NlcnZlcic7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFzZWxmLnVzaW5nQnVuZGxlIHx8IHNkcE1MaW5lSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHNlbGYuX2dhdGhlcih0cmFuc2NlaXZlci5taWQsIHNkcE1MaW5lSW5kZXgpO1xuICAgICAgICAgICAgaWYgKGljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICAgICAgaWNlVHJhbnNwb3J0LnN0YXJ0KGljZUdhdGhlcmVyLCByZW1vdGVJY2VQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgaXNJY2VMaXRlID8gJ2NvbnRyb2xsaW5nJyA6ICdjb250cm9sbGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHRsc1RyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICAgICAgZHRsc1RyYW5zcG9ydC5zdGFydChyZW1vdGVEdGxzUGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbiBvZiBjYXBhYmlsaXRpZXMuXG4gICAgICAgICAgdmFyIHBhcmFtcyA9IGdldENvbW1vbkNhcGFiaWxpdGllcyhsb2NhbENhcGFiaWxpdGllcyxcbiAgICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzKTtcblxuICAgICAgICAgIC8vIFN0YXJ0IHRoZSBSVENSdHBTZW5kZXIuIFRoZSBSVENSdHBSZWNlaXZlciBmb3IgdGhpc1xuICAgICAgICAgIC8vIHRyYW5zY2VpdmVyIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBpbiBzZXRSZW1vdGVEZXNjcmlwdGlvbi5cbiAgICAgICAgICBzZWxmLl90cmFuc2NlaXZlKHRyYW5zY2VpdmVyLFxuICAgICAgICAgICAgICBwYXJhbXMuY29kZWNzLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICAgIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5sb2NhbERlc2NyaXB0aW9uID0ge1xuICAgICAgdHlwZTogZGVzY3JpcHRpb24udHlwZSxcbiAgICAgIHNkcDogZGVzY3JpcHRpb24uc2RwXG4gICAgfTtcbiAgICBzd2l0Y2ggKGRlc2NyaXB0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ29mZmVyJzpcbiAgICAgICAgdGhpcy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ2hhdmUtbG9jYWwtb2ZmZXInKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdhbnN3ZXInOlxuICAgICAgICB0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZSgnc3RhYmxlJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndW5zdXBwb3J0ZWQgdHlwZSBcIicgKyBkZXNjcmlwdGlvbi50eXBlICtcbiAgICAgICAgICAgICdcIicpO1xuICAgIH1cblxuICAgIC8vIElmIGEgc3VjY2VzcyBjYWxsYmFjayB3YXMgcHJvdmlkZWQsIGVtaXQgSUNFIGNhbmRpZGF0ZXMgYWZ0ZXIgaXRcbiAgICAvLyBoYXMgYmVlbiBleGVjdXRlZC4gT3RoZXJ3aXNlLCBlbWl0IGNhbGxiYWNrIGFmdGVyIHRoZSBQcm9taXNlIGlzXG4gICAgLy8gcmVzb2x2ZWQuXG4gICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICBhcmd1bWVudHNbMV07XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBjYi5hcHBseShudWxsKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb24gPSBmdW5jdGlvbihkZXNjcmlwdGlvbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblxuICAgIGlmICghaXNBY3Rpb25BbGxvd2VkSW5TaWduYWxpbmdTdGF0ZSgnc2V0UmVtb3RlRGVzY3JpcHRpb24nLFxuICAgICAgICBkZXNjcmlwdGlvbi50eXBlLCB0aGlzLnNpZ25hbGluZ1N0YXRlKSkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcignQ2FuIG5vdCBzZXQgcmVtb3RlICcgKyBkZXNjcmlwdGlvbi50eXBlICtcbiAgICAgICAgICAgICcgaW4gc3RhdGUgJyArIHNlbGYuc2lnbmFsaW5nU3RhdGUpO1xuICAgICAgICBlLm5hbWUgPSAnSW52YWxpZFN0YXRlRXJyb3InO1xuICAgICAgICBpZiAoYXJncy5sZW5ndGggPiAyICYmIHR5cGVvZiBhcmdzWzJdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgYXJnc1syXS5hcHBseShudWxsLCBbZV0pO1xuICAgICAgICB9XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBzdHJlYW1zID0ge307XG4gICAgdGhpcy5yZW1vdGVTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICBzdHJlYW1zW3N0cmVhbS5pZF0gPSBzdHJlYW07XG4gICAgfSk7XG4gICAgdmFyIHJlY2VpdmVyTGlzdCA9IFtdO1xuICAgIHZhciBzZWN0aW9ucyA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoZGVzY3JpcHRpb24uc2RwKTtcbiAgICB2YXIgc2Vzc2lvbnBhcnQgPSBzZWN0aW9ucy5zaGlmdCgpO1xuICAgIHZhciBpc0ljZUxpdGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCxcbiAgICAgICAgJ2E9aWNlLWxpdGUnKS5sZW5ndGggPiAwO1xuICAgIHZhciB1c2luZ0J1bmRsZSA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KHNlc3Npb25wYXJ0LFxuICAgICAgICAnYT1ncm91cDpCVU5ETEUgJykubGVuZ3RoID4gMDtcbiAgICB0aGlzLnVzaW5nQnVuZGxlID0gdXNpbmdCdW5kbGU7XG4gICAgdmFyIGljZU9wdGlvbnMgPSBTRFBVdGlscy5tYXRjaFByZWZpeChzZXNzaW9ucGFydCxcbiAgICAgICAgJ2E9aWNlLW9wdGlvbnM6JylbMF07XG4gICAgaWYgKGljZU9wdGlvbnMpIHtcbiAgICAgIHRoaXMuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXMgPSBpY2VPcHRpb25zLnN1YnN0cigxNCkuc3BsaXQoJyAnKVxuICAgICAgICAgIC5pbmRleE9mKCd0cmlja2xlJykgPj0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jYW5Ucmlja2xlSWNlQ2FuZGlkYXRlcyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24obWVkaWFTZWN0aW9uLCBzZHBNTGluZUluZGV4KSB7XG4gICAgICB2YXIgbGluZXMgPSBTRFBVdGlscy5zcGxpdExpbmVzKG1lZGlhU2VjdGlvbik7XG4gICAgICB2YXIga2luZCA9IFNEUFV0aWxzLmdldEtpbmQobWVkaWFTZWN0aW9uKTtcbiAgICAgIC8vIHRyZWF0IGJ1bmRsZS1vbmx5IGFzIG5vdC1yZWplY3RlZC5cbiAgICAgIHZhciByZWplY3RlZCA9IFNEUFV0aWxzLmlzUmVqZWN0ZWQobWVkaWFTZWN0aW9uKSAmJlxuICAgICAgICAgICFTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sICdhPWJ1bmRsZS1vbmx5JykubGVuZ3RoID09PSAxO1xuICAgICAgdmFyIHByb3RvY29sID0gbGluZXNbMF0uc3Vic3RyKDIpLnNwbGl0KCcgJylbMl07XG5cbiAgICAgIHZhciBkaXJlY3Rpb24gPSBTRFBVdGlscy5nZXREaXJlY3Rpb24obWVkaWFTZWN0aW9uLCBzZXNzaW9ucGFydCk7XG4gICAgICB2YXIgcmVtb3RlTXNpZCA9IFNEUFV0aWxzLnBhcnNlTXNpZChtZWRpYVNlY3Rpb24pO1xuXG4gICAgICB2YXIgbWlkID0gU0RQVXRpbHMuZ2V0TWlkKG1lZGlhU2VjdGlvbikgfHwgU0RQVXRpbHMuZ2VuZXJhdGVJZGVudGlmaWVyKCk7XG5cbiAgICAgIC8vIFJlamVjdCBkYXRhY2hhbm5lbHMgd2hpY2ggYXJlIG5vdCBpbXBsZW1lbnRlZCB5ZXQuXG4gICAgICBpZiAoa2luZCA9PT0gJ2FwcGxpY2F0aW9uJyAmJiBwcm90b2NvbCA9PT0gJ0RUTFMvU0NUUCcpIHtcbiAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0gPSB7XG4gICAgICAgICAgbWlkOiBtaWQsXG4gICAgICAgICAgaXNEYXRhY2hhbm5lbDogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciB0cmFuc2NlaXZlcjtcbiAgICAgIHZhciBpY2VHYXRoZXJlcjtcbiAgICAgIHZhciBpY2VUcmFuc3BvcnQ7XG4gICAgICB2YXIgZHRsc1RyYW5zcG9ydDtcbiAgICAgIHZhciBydHBSZWNlaXZlcjtcbiAgICAgIHZhciBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgICAgdmFyIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXM7XG5cbiAgICAgIHZhciB0cmFjaztcbiAgICAgIC8vIEZJWE1FOiBlbnN1cmUgdGhlIG1lZGlhU2VjdGlvbiBoYXMgcnRjcC1tdXggc2V0LlxuICAgICAgdmFyIHJlbW90ZUNhcGFiaWxpdGllcyA9IFNEUFV0aWxzLnBhcnNlUnRwUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24pO1xuICAgICAgdmFyIHJlbW90ZUljZVBhcmFtZXRlcnM7XG4gICAgICB2YXIgcmVtb3RlRHRsc1BhcmFtZXRlcnM7XG4gICAgICBpZiAoIXJlamVjdGVkKSB7XG4gICAgICAgIHJlbW90ZUljZVBhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXRJY2VQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbixcbiAgICAgICAgICAgIHNlc3Npb25wYXJ0KTtcbiAgICAgICAgcmVtb3RlRHRsc1BhcmFtZXRlcnMgPSBTRFBVdGlscy5nZXREdGxzUGFyYW1ldGVycyhtZWRpYVNlY3Rpb24sXG4gICAgICAgICAgICBzZXNzaW9ucGFydCk7XG4gICAgICAgIHJlbW90ZUR0bHNQYXJhbWV0ZXJzLnJvbGUgPSAnY2xpZW50JztcbiAgICAgIH1cbiAgICAgIHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMgPVxuICAgICAgICAgIFNEUFV0aWxzLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzKG1lZGlhU2VjdGlvbik7XG5cbiAgICAgIHZhciBydGNwUGFyYW1ldGVycyA9IFNEUFV0aWxzLnBhcnNlUnRjcFBhcmFtZXRlcnMobWVkaWFTZWN0aW9uKTtcblxuICAgICAgdmFyIGlzQ29tcGxldGUgPSBTRFBVdGlscy5tYXRjaFByZWZpeChtZWRpYVNlY3Rpb24sXG4gICAgICAgICAgJ2E9ZW5kLW9mLWNhbmRpZGF0ZXMnLCBzZXNzaW9ucGFydCkubGVuZ3RoID4gMDtcbiAgICAgIHZhciBjYW5kcyA9IFNEUFV0aWxzLm1hdGNoUHJlZml4KG1lZGlhU2VjdGlvbiwgJ2E9Y2FuZGlkYXRlOicpXG4gICAgICAgICAgLm1hcChmdW5jdGlvbihjYW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoY2FuZCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGNhbmQpIHtcbiAgICAgICAgICAgIHJldHVybiBjYW5kLmNvbXBvbmVudCA9PT0gMTtcbiAgICAgICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgaWYgd2UgY2FuIHVzZSBCVU5ETEUgYW5kIGRpc3Bvc2UgdHJhbnNwb3J0cy5cbiAgICAgIGlmICgoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJyB8fCBkZXNjcmlwdGlvbi50eXBlID09PSAnYW5zd2VyJykgJiZcbiAgICAgICAgICAhcmVqZWN0ZWQgJiYgdXNpbmdCdW5kbGUgJiYgc2RwTUxpbmVJbmRleCA+IDAgJiZcbiAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSkge1xuICAgICAgICBzZWxmLl9kaXNwb3NlSWNlQW5kRHRsc1RyYW5zcG9ydHMoc2RwTUxpbmVJbmRleCk7XG4gICAgICAgIHNlbGYudHJhbnNjZWl2ZXJzW3NkcE1MaW5lSW5kZXhdLmljZUdhdGhlcmVyID1cbiAgICAgICAgICAgIHNlbGYudHJhbnNjZWl2ZXJzWzBdLmljZUdhdGhlcmVyO1xuICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5pY2VUcmFuc3BvcnQgPVxuICAgICAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0O1xuICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5kdGxzVHJhbnNwb3J0ID1cbiAgICAgICAgICAgIHNlbGYudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQ7XG4gICAgICAgIGlmIChzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5ydHBTZW5kZXIpIHtcbiAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5ydHBTZW5kZXIuc2V0VHJhbnNwb3J0KFxuICAgICAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucnRwUmVjZWl2ZXIpIHtcbiAgICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5ydHBSZWNlaXZlci5zZXRUcmFuc3BvcnQoXG4gICAgICAgICAgICAgIHNlbGYudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVzY3JpcHRpb24udHlwZSA9PT0gJ29mZmVyJyAmJiAhcmVqZWN0ZWQpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIgPSBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XSB8fFxuICAgICAgICAgICAgc2VsZi5fY3JlYXRlVHJhbnNjZWl2ZXIoa2luZCk7XG4gICAgICAgIHRyYW5zY2VpdmVyLm1pZCA9IG1pZDtcblxuICAgICAgICBpZiAoIXRyYW5zY2VpdmVyLmljZUdhdGhlcmVyKSB7XG4gICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIgPSBzZWxmLl9jcmVhdGVJY2VHYXRoZXJlcihzZHBNTGluZUluZGV4LFxuICAgICAgICAgICAgICB1c2luZ0J1bmRsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FuZHMubGVuZ3RoICYmIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICBpZiAoaXNDb21wbGV0ZSAmJiAoIXVzaW5nQnVuZGxlIHx8IHNkcE1MaW5lSW5kZXggPT09IDApKSB7XG4gICAgICAgICAgICB0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQuc2V0UmVtb3RlQ2FuZGlkYXRlcyhjYW5kcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbmRzLmZvckVhY2goZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgIG1heWJlQWRkQ2FuZGlkYXRlKHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCwgY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzID0gd2luZG93LlJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcyhraW5kKTtcblxuICAgICAgICAvLyBmaWx0ZXIgUlRYIHVudGlsIGFkZGl0aW9uYWwgc3R1ZmYgbmVlZGVkIGZvciBSVFggaXMgaW1wbGVtZW50ZWRcbiAgICAgICAgLy8gaW4gYWRhcHRlci5qc1xuICAgICAgICBpZiAoZWRnZVZlcnNpb24gPCAxNTAxOSkge1xuICAgICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcyA9IGxvY2FsQ2FwYWJpbGl0aWVzLmNvZGVjcy5maWx0ZXIoXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvZGVjLm5hbWUgIT09ICdydHgnO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzIHx8IFt7XG4gICAgICAgICAgc3NyYzogKDIgKiBzZHBNTGluZUluZGV4ICsgMikgKiAxMDAxXG4gICAgICAgIH1dO1xuXG4gICAgICAgIHZhciBpc05ld1RyYWNrID0gZmFsc2U7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09ICdzZW5kcmVjdicgfHwgZGlyZWN0aW9uID09PSAnc2VuZG9ubHknKSB7XG4gICAgICAgICAgaXNOZXdUcmFjayA9ICF0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjtcbiAgICAgICAgICBydHBSZWNlaXZlciA9IHRyYW5zY2VpdmVyLnJ0cFJlY2VpdmVyIHx8XG4gICAgICAgICAgICAgIG5ldyB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIodHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCwga2luZCk7XG5cbiAgICAgICAgICBpZiAoaXNOZXdUcmFjaykge1xuICAgICAgICAgICAgdmFyIHN0cmVhbTtcbiAgICAgICAgICAgIHRyYWNrID0gcnRwUmVjZWl2ZXIudHJhY2s7XG4gICAgICAgICAgICAvLyBGSVhNRTogZG9lcyBub3Qgd29yayB3aXRoIFBsYW4gQi5cbiAgICAgICAgICAgIGlmIChyZW1vdGVNc2lkKSB7XG4gICAgICAgICAgICAgIGlmICghc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV0pIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1zW3JlbW90ZU1zaWQuc3RyZWFtXSA9IG5ldyB3aW5kb3cuTWVkaWFTdHJlYW0oKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV0sICdpZCcsIHtcbiAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZW1vdGVNc2lkLnN0cmVhbTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHJhY2ssICdpZCcsIHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbW90ZU1zaWQudHJhY2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgc3RyZWFtID0gc3RyZWFtc1tyZW1vdGVNc2lkLnN0cmVhbV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoIXN0cmVhbXMuZGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIHN0cmVhbXMuZGVmYXVsdCA9IG5ldyB3aW5kb3cuTWVkaWFTdHJlYW0oKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzdHJlYW0gPSBzdHJlYW1zLmRlZmF1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHJlYW0uYWRkVHJhY2sodHJhY2spO1xuICAgICAgICAgICAgcmVjZWl2ZXJMaXN0LnB1c2goW3RyYWNrLCBydHBSZWNlaXZlciwgc3RyZWFtXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXMgPSBsb2NhbENhcGFiaWxpdGllcztcbiAgICAgICAgdHJhbnNjZWl2ZXIucmVtb3RlQ2FwYWJpbGl0aWVzID0gcmVtb3RlQ2FwYWJpbGl0aWVzO1xuICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlciA9IHJ0cFJlY2VpdmVyO1xuICAgICAgICB0cmFuc2NlaXZlci5ydGNwUGFyYW1ldGVycyA9IHJ0Y3BQYXJhbWV0ZXJzO1xuICAgICAgICB0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzID0gc2VuZEVuY29kaW5nUGFyYW1ldGVycztcbiAgICAgICAgdHJhbnNjZWl2ZXIucmVjdkVuY29kaW5nUGFyYW1ldGVycyA9IHJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM7XG5cbiAgICAgICAgLy8gU3RhcnQgdGhlIFJUQ1J0cFJlY2VpdmVyIG5vdy4gVGhlIFJUUFNlbmRlciBpcyBzdGFydGVkIGluXG4gICAgICAgIC8vIHNldExvY2FsRGVzY3JpcHRpb24uXG4gICAgICAgIHNlbGYuX3RyYW5zY2VpdmUoc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0sXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIGlzTmV3VHJhY2spO1xuICAgICAgfSBlbHNlIGlmIChkZXNjcmlwdGlvbi50eXBlID09PSAnYW5zd2VyJyAmJiAhcmVqZWN0ZWQpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIgPSBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTtcbiAgICAgICAgaWNlR2F0aGVyZXIgPSB0cmFuc2NlaXZlci5pY2VHYXRoZXJlcjtcbiAgICAgICAgaWNlVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0O1xuICAgICAgICBkdGxzVHJhbnNwb3J0ID0gdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydDtcbiAgICAgICAgcnRwUmVjZWl2ZXIgPSB0cmFuc2NlaXZlci5ydHBSZWNlaXZlcjtcbiAgICAgICAgc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM7XG4gICAgICAgIGxvY2FsQ2FwYWJpbGl0aWVzID0gdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXM7XG5cbiAgICAgICAgc2VsZi50cmFuc2NlaXZlcnNbc2RwTUxpbmVJbmRleF0ucmVjdkVuY29kaW5nUGFyYW1ldGVycyA9XG4gICAgICAgICAgICByZWN2RW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5yZW1vdGVDYXBhYmlsaXRpZXMgPVxuICAgICAgICAgICAgcmVtb3RlQ2FwYWJpbGl0aWVzO1xuICAgICAgICBzZWxmLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XS5ydGNwUGFyYW1ldGVycyA9IHJ0Y3BQYXJhbWV0ZXJzO1xuXG4gICAgICAgIGlmIChjYW5kcy5sZW5ndGggJiYgaWNlVHJhbnNwb3J0LnN0YXRlID09PSAnbmV3Jykge1xuICAgICAgICAgIGlmICgoaXNJY2VMaXRlIHx8IGlzQ29tcGxldGUpICYmXG4gICAgICAgICAgICAgICghdXNpbmdCdW5kbGUgfHwgc2RwTUxpbmVJbmRleCA9PT0gMCkpIHtcbiAgICAgICAgICAgIGljZVRyYW5zcG9ydC5zZXRSZW1vdGVDYW5kaWRhdGVzKGNhbmRzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FuZHMuZm9yRWFjaChmdW5jdGlvbihjYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgbWF5YmVBZGRDYW5kaWRhdGUodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LCBjYW5kaWRhdGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF1c2luZ0J1bmRsZSB8fCBzZHBNTGluZUluZGV4ID09PSAwKSB7XG4gICAgICAgICAgaWYgKGljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycpIHtcbiAgICAgICAgICAgIGljZVRyYW5zcG9ydC5zdGFydChpY2VHYXRoZXJlciwgcmVtb3RlSWNlUGFyYW1ldGVycyxcbiAgICAgICAgICAgICAgICAnY29udHJvbGxpbmcnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGR0bHNUcmFuc3BvcnQuc3RhdGUgPT09ICduZXcnKSB7XG4gICAgICAgICAgICBkdGxzVHJhbnNwb3J0LnN0YXJ0KHJlbW90ZUR0bHNQYXJhbWV0ZXJzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLl90cmFuc2NlaXZlKHRyYW5zY2VpdmVyLFxuICAgICAgICAgICAgZGlyZWN0aW9uID09PSAnc2VuZHJlY3YnIHx8IGRpcmVjdGlvbiA9PT0gJ3JlY3Zvbmx5JyxcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpO1xuXG4gICAgICAgIGlmIChydHBSZWNlaXZlciAmJlxuICAgICAgICAgICAgKGRpcmVjdGlvbiA9PT0gJ3NlbmRyZWN2JyB8fCBkaXJlY3Rpb24gPT09ICdzZW5kb25seScpKSB7XG4gICAgICAgICAgdHJhY2sgPSBydHBSZWNlaXZlci50cmFjaztcbiAgICAgICAgICBpZiAocmVtb3RlTXNpZCkge1xuICAgICAgICAgICAgaWYgKCFzdHJlYW1zW3JlbW90ZU1zaWQuc3RyZWFtXSkge1xuICAgICAgICAgICAgICBzdHJlYW1zW3JlbW90ZU1zaWQuc3RyZWFtXSA9IG5ldyB3aW5kb3cuTWVkaWFTdHJlYW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dLmFkZFRyYWNrKHRyYWNrKTtcbiAgICAgICAgICAgIHJlY2VpdmVyTGlzdC5wdXNoKFt0cmFjaywgcnRwUmVjZWl2ZXIsIHN0cmVhbXNbcmVtb3RlTXNpZC5zdHJlYW1dXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghc3RyZWFtcy5kZWZhdWx0KSB7XG4gICAgICAgICAgICAgIHN0cmVhbXMuZGVmYXVsdCA9IG5ldyB3aW5kb3cuTWVkaWFTdHJlYW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cmVhbXMuZGVmYXVsdC5hZGRUcmFjayh0cmFjayk7XG4gICAgICAgICAgICByZWNlaXZlckxpc3QucHVzaChbdHJhY2ssIHJ0cFJlY2VpdmVyLCBzdHJlYW1zLmRlZmF1bHRdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRklYTUU6IGFjdHVhbGx5IHRoZSByZWNlaXZlciBzaG91bGQgYmUgY3JlYXRlZCBsYXRlci5cbiAgICAgICAgICBkZWxldGUgdHJhbnNjZWl2ZXIucnRwUmVjZWl2ZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLl9kdGxzUm9sZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9kdGxzUm9sZSA9IGRlc2NyaXB0aW9uLnR5cGUgPT09ICdvZmZlcicgPyAnYWN0aXZlJyA6ICdwYXNzaXZlJztcbiAgICB9XG5cbiAgICB0aGlzLnJlbW90ZURlc2NyaXB0aW9uID0ge1xuICAgICAgdHlwZTogZGVzY3JpcHRpb24udHlwZSxcbiAgICAgIHNkcDogZGVzY3JpcHRpb24uc2RwXG4gICAgfTtcbiAgICBzd2l0Y2ggKGRlc2NyaXB0aW9uLnR5cGUpIHtcbiAgICAgIGNhc2UgJ29mZmVyJzpcbiAgICAgICAgdGhpcy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ2hhdmUtcmVtb3RlLW9mZmVyJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYW5zd2VyJzpcbiAgICAgICAgdGhpcy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoJ3N0YWJsZScpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Vuc3VwcG9ydGVkIHR5cGUgXCInICsgZGVzY3JpcHRpb24udHlwZSArXG4gICAgICAgICAgICAnXCInKTtcbiAgICB9XG4gICAgT2JqZWN0LmtleXMoc3RyZWFtcykuZm9yRWFjaChmdW5jdGlvbihzaWQpIHtcbiAgICAgIHZhciBzdHJlYW0gPSBzdHJlYW1zW3NpZF07XG4gICAgICBpZiAoc3RyZWFtLmdldFRyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICBpZiAoc2VsZi5yZW1vdGVTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEpIHtcbiAgICAgICAgICBzZWxmLnJlbW90ZVN0cmVhbXMucHVzaChzdHJlYW0pO1xuICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnYWRkc3RyZWFtJyk7XG4gICAgICAgICAgZXZlbnQuc3RyZWFtID0gc3RyZWFtO1xuICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZi5vbmFkZHN0cmVhbSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBzZWxmLm9uYWRkc3RyZWFtKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlY2VpdmVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICB2YXIgdHJhY2sgPSBpdGVtWzBdO1xuICAgICAgICAgIHZhciByZWNlaXZlciA9IGl0ZW1bMV07XG4gICAgICAgICAgaWYgKHN0cmVhbS5pZCAhPT0gaXRlbVsyXS5pZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgdHJhY2tFdmVudCA9IG5ldyBFdmVudCgndHJhY2snKTtcbiAgICAgICAgICB0cmFja0V2ZW50LnRyYWNrID0gdHJhY2s7XG4gICAgICAgICAgdHJhY2tFdmVudC5yZWNlaXZlciA9IHJlY2VpdmVyO1xuICAgICAgICAgIHRyYWNrRXZlbnQudHJhbnNjZWl2ZXIgPSB7cmVjZWl2ZXI6IHJlY2VpdmVyfTtcbiAgICAgICAgICB0cmFja0V2ZW50LnN0cmVhbXMgPSBbc3RyZWFtXTtcbiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuZGlzcGF0Y2hFdmVudCh0cmFja0V2ZW50KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZi5vbnRyYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHNlbGYub250cmFjayh0cmFja0V2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBjaGVjayB3aGV0aGVyIGFkZEljZUNhbmRpZGF0ZSh7fSkgd2FzIGNhbGxlZCB3aXRoaW4gZm91ciBzZWNvbmRzIGFmdGVyXG4gICAgLy8gc2V0UmVtb3RlRGVzY3JpcHRpb24uXG4gICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIShzZWxmICYmIHNlbGYudHJhbnNjZWl2ZXJzKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWxmLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICAgIGlmICh0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQgJiZcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdGF0ZSA9PT0gJ25ldycgJiZcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5nZXRSZW1vdGVDYW5kaWRhdGVzKCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignVGltZW91dCBmb3IgYWRkUmVtb3RlQ2FuZGlkYXRlLiBDb25zaWRlciBzZW5kaW5nICcgK1xuICAgICAgICAgICAgICAnYW4gZW5kLW9mLWNhbmRpZGF0ZXMgbm90aWZpY2F0aW9uJyk7XG4gICAgICAgICAgdHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sIDQwMDApO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFyZ3NbMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgYXJnc1sxXS5hcHBseShudWxsKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdmUoKTtcbiAgICB9KTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICAvKiBub3QgeWV0XG4gICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIuaWNlR2F0aGVyZXIuY2xvc2UoKTtcbiAgICAgIH1cbiAgICAgICovXG4gICAgICBpZiAodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0KSB7XG4gICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydC5zdG9wKCk7XG4gICAgICB9XG4gICAgICBpZiAodHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydCkge1xuICAgICAgICB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBTZW5kZXIpIHtcbiAgICAgICAgdHJhbnNjZWl2ZXIucnRwU2VuZGVyLnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0cmFuc2NlaXZlci5ydHBSZWNlaXZlcikge1xuICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlci5zdG9wKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gRklYTUU6IGNsZWFuIHVwIHRyYWNrcywgbG9jYWwgc3RyZWFtcywgcmVtb3RlIHN0cmVhbXMsIGV0Y1xuICAgIHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKCdjbG9zZWQnKTtcbiAgfTtcblxuICAvLyBVcGRhdGUgdGhlIHNpZ25hbGluZyBzdGF0ZS5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVTaWduYWxpbmdTdGF0ZSA9IGZ1bmN0aW9uKG5ld1N0YXRlKSB7XG4gICAgdGhpcy5zaWduYWxpbmdTdGF0ZSA9IG5ld1N0YXRlO1xuICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnc2lnbmFsaW5nc3RhdGVjaGFuZ2UnKTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIGlmICh0eXBlb2YgdGhpcy5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UoZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgd2hldGhlciB0byBmaXJlIHRoZSBuZWdvdGlhdGlvbm5lZWRlZCBldmVudC5cbiAgUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBpZiAodGhpcy5zaWduYWxpbmdTdGF0ZSAhPT0gJ3N0YWJsZScgfHwgdGhpcy5uZWVkTmVnb3RpYXRpb24gPT09IHRydWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5uZWVkTmVnb3RpYXRpb24gPSB0cnVlO1xuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHNlbGYubmVlZE5lZ290aWF0aW9uID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWxmLm5lZWROZWdvdGlhdGlvbiA9IGZhbHNlO1xuICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCduZWdvdGlhdGlvbm5lZWRlZCcpO1xuICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIGlmICh0eXBlb2Ygc2VsZi5vbm5lZ290aWF0aW9ubmVlZGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHNlbGYub25uZWdvdGlhdGlvbm5lZWRlZChldmVudCk7XG4gICAgICB9XG4gICAgfSwgMCk7XG4gIH07XG5cbiAgLy8gVXBkYXRlIHRoZSBjb25uZWN0aW9uIHN0YXRlLlxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBuZXdTdGF0ZTtcbiAgICB2YXIgc3RhdGVzID0ge1xuICAgICAgJ25ldyc6IDAsXG4gICAgICBjbG9zZWQ6IDAsXG4gICAgICBjb25uZWN0aW5nOiAwLFxuICAgICAgY2hlY2tpbmc6IDAsXG4gICAgICBjb25uZWN0ZWQ6IDAsXG4gICAgICBjb21wbGV0ZWQ6IDAsXG4gICAgICBkaXNjb25uZWN0ZWQ6IDAsXG4gICAgICBmYWlsZWQ6IDBcbiAgICB9O1xuICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIpIHtcbiAgICAgIHN0YXRlc1t0cmFuc2NlaXZlci5pY2VUcmFuc3BvcnQuc3RhdGVdKys7XG4gICAgICBzdGF0ZXNbdHJhbnNjZWl2ZXIuZHRsc1RyYW5zcG9ydC5zdGF0ZV0rKztcbiAgICB9KTtcbiAgICAvLyBJQ0VUcmFuc3BvcnQuY29tcGxldGVkIGFuZCBjb25uZWN0ZWQgYXJlIHRoZSBzYW1lIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgc3RhdGVzLmNvbm5lY3RlZCArPSBzdGF0ZXMuY29tcGxldGVkO1xuXG4gICAgbmV3U3RhdGUgPSAnbmV3JztcbiAgICBpZiAoc3RhdGVzLmZhaWxlZCA+IDApIHtcbiAgICAgIG5ld1N0YXRlID0gJ2ZhaWxlZCc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZXMuY29ubmVjdGluZyA+IDAgfHwgc3RhdGVzLmNoZWNraW5nID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnY29ubmVjdGluZyc7XG4gICAgfSBlbHNlIGlmIChzdGF0ZXMuZGlzY29ubmVjdGVkID4gMCkge1xuICAgICAgbmV3U3RhdGUgPSAnZGlzY29ubmVjdGVkJztcbiAgICB9IGVsc2UgaWYgKHN0YXRlcy5uZXcgPiAwKSB7XG4gICAgICBuZXdTdGF0ZSA9ICduZXcnO1xuICAgIH0gZWxzZSBpZiAoc3RhdGVzLmNvbm5lY3RlZCA+IDAgfHwgc3RhdGVzLmNvbXBsZXRlZCA+IDApIHtcbiAgICAgIG5ld1N0YXRlID0gJ2Nvbm5lY3RlZCc7XG4gICAgfVxuXG4gICAgaWYgKG5ld1N0YXRlICE9PSB0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZSkge1xuICAgICAgdGhpcy5pY2VDb25uZWN0aW9uU3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgnaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJyk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UoZXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICB2YXIgb2ZmZXJPcHRpb25zO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG9mZmVyT3B0aW9ucyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcbiAgICAgIG9mZmVyT3B0aW9ucyA9IGFyZ3VtZW50c1syXTtcbiAgICB9XG5cbiAgICB2YXIgbnVtQXVkaW9UcmFja3MgPSB0aGlzLnRyYW5zY2VpdmVycy5maWx0ZXIoZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuIHQua2luZCA9PT0gJ2F1ZGlvJztcbiAgICB9KS5sZW5ndGg7XG4gICAgdmFyIG51bVZpZGVvVHJhY2tzID0gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKGZ1bmN0aW9uKHQpIHtcbiAgICAgIHJldHVybiB0LmtpbmQgPT09ICd2aWRlbyc7XG4gICAgfSkubGVuZ3RoO1xuXG4gICAgLy8gRGV0ZXJtaW5lIG51bWJlciBvZiBhdWRpbyBhbmQgdmlkZW8gdHJhY2tzIHdlIG5lZWQgdG8gc2VuZC9yZWN2LlxuICAgIGlmIChvZmZlck9wdGlvbnMpIHtcbiAgICAgIC8vIFJlamVjdCBDaHJvbWUgbGVnYWN5IGNvbnN0cmFpbnRzLlxuICAgICAgaWYgKG9mZmVyT3B0aW9ucy5tYW5kYXRvcnkgfHwgb2ZmZXJPcHRpb25zLm9wdGlvbmFsKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAnTGVnYWN5IG1hbmRhdG9yeS9vcHRpb25hbCBjb25zdHJhaW50cyBub3Qgc3VwcG9ydGVkLicpO1xuICAgICAgfVxuICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvID09PSB0cnVlKSB7XG4gICAgICAgICAgbnVtQXVkaW9UcmFja3MgPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvID09PSBmYWxzZSkge1xuICAgICAgICAgIG51bUF1ZGlvVHJhY2tzID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBudW1BdWRpb1RyYWNrcyA9IG9mZmVyT3B0aW9ucy5vZmZlclRvUmVjZWl2ZUF1ZGlvO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IHRydWUpIHtcbiAgICAgICAgICBudW1WaWRlb1RyYWNrcyA9IDE7XG4gICAgICAgIH0gZWxzZSBpZiAob2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW8gPT09IGZhbHNlKSB7XG4gICAgICAgICAgbnVtVmlkZW9UcmFja3MgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG51bVZpZGVvVHJhY2tzID0gb2ZmZXJPcHRpb25zLm9mZmVyVG9SZWNlaXZlVmlkZW87XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICBudW1BdWRpb1RyYWNrcy0tO1xuICAgICAgICBpZiAobnVtQXVkaW9UcmFja3MgPCAwKSB7XG4gICAgICAgICAgdHJhbnNjZWl2ZXIud2FudFJlY2VpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5raW5kID09PSAndmlkZW8nKSB7XG4gICAgICAgIG51bVZpZGVvVHJhY2tzLS07XG4gICAgICAgIGlmIChudW1WaWRlb1RyYWNrcyA8IDApIHtcbiAgICAgICAgICB0cmFuc2NlaXZlci53YW50UmVjZWl2ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgTS1saW5lcyBmb3IgcmVjdm9ubHkgc3RyZWFtcy5cbiAgICB3aGlsZSAobnVtQXVkaW9UcmFja3MgPiAwIHx8IG51bVZpZGVvVHJhY2tzID4gMCkge1xuICAgICAgaWYgKG51bUF1ZGlvVHJhY2tzID4gMCkge1xuICAgICAgICB0aGlzLl9jcmVhdGVUcmFuc2NlaXZlcignYXVkaW8nKTtcbiAgICAgICAgbnVtQXVkaW9UcmFja3MtLTtcbiAgICAgIH1cbiAgICAgIGlmIChudW1WaWRlb1RyYWNrcyA+IDApIHtcbiAgICAgICAgdGhpcy5fY3JlYXRlVHJhbnNjZWl2ZXIoJ3ZpZGVvJyk7XG4gICAgICAgIG51bVZpZGVvVHJhY2tzLS07XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNkcCA9IFNEUFV0aWxzLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKHRoaXMuX3NkcFNlc3Npb25JZCxcbiAgICAgICAgdGhpcy5fc2RwU2Vzc2lvblZlcnNpb24rKyk7XG4gICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlciwgc2RwTUxpbmVJbmRleCkge1xuICAgICAgLy8gRm9yIGVhY2ggdHJhY2ssIGNyZWF0ZSBhbiBpY2UgZ2F0aGVyZXIsIGljZSB0cmFuc3BvcnQsXG4gICAgICAvLyBkdGxzIHRyYW5zcG9ydCwgcG90ZW50aWFsbHkgcnRwc2VuZGVyIGFuZCBydHByZWNlaXZlci5cbiAgICAgIHZhciB0cmFjayA9IHRyYW5zY2VpdmVyLnRyYWNrO1xuICAgICAgdmFyIGtpbmQgPSB0cmFuc2NlaXZlci5raW5kO1xuICAgICAgdmFyIG1pZCA9IFNEUFV0aWxzLmdlbmVyYXRlSWRlbnRpZmllcigpO1xuICAgICAgdHJhbnNjZWl2ZXIubWlkID0gbWlkO1xuXG4gICAgICBpZiAoIXRyYW5zY2VpdmVyLmljZUdhdGhlcmVyKSB7XG4gICAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyID0gc2VsZi5fY3JlYXRlSWNlR2F0aGVyZXIoc2RwTUxpbmVJbmRleCxcbiAgICAgICAgICAgIHNlbGYudXNpbmdCdW5kbGUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbG9jYWxDYXBhYmlsaXRpZXMgPSB3aW5kb3cuUlRDUnRwU2VuZGVyLmdldENhcGFiaWxpdGllcyhraW5kKTtcbiAgICAgIC8vIGZpbHRlciBSVFggdW50aWwgYWRkaXRpb25hbCBzdHVmZiBuZWVkZWQgZm9yIFJUWCBpcyBpbXBsZW1lbnRlZFxuICAgICAgLy8gaW4gYWRhcHRlci5qc1xuICAgICAgaWYgKGVkZ2VWZXJzaW9uIDwgMTUwMTkpIHtcbiAgICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzID0gbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZpbHRlcihcbiAgICAgICAgICAgIGZ1bmN0aW9uKGNvZGVjKSB7XG4gICAgICAgICAgICAgIHJldHVybiBjb2RlYy5uYW1lICE9PSAncnR4JztcbiAgICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbG9jYWxDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goZnVuY3Rpb24oY29kZWMpIHtcbiAgICAgICAgLy8gd29yayBhcm91bmQgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL3dlYnJ0Yy9pc3N1ZXMvZGV0YWlsP2lkPTY1NTJcbiAgICAgICAgLy8gYnkgYWRkaW5nIGxldmVsLWFzeW1tZXRyeS1hbGxvd2VkPTFcbiAgICAgICAgaWYgKGNvZGVjLm5hbWUgPT09ICdIMjY0JyAmJlxuICAgICAgICAgICAgY29kZWMucGFyYW1ldGVyc1snbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29kZWMucGFyYW1ldGVyc1snbGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWQnXSA9ICcxJztcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGdlbmVyYXRlIGFuIHNzcmMgbm93LCB0byBiZSB1c2VkIGxhdGVyIGluIHJ0cFNlbmRlci5zZW5kXG4gICAgICB2YXIgc2VuZEVuY29kaW5nUGFyYW1ldGVycyA9IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgfHwgW3tcbiAgICAgICAgc3NyYzogKDIgKiBzZHBNTGluZUluZGV4ICsgMSkgKiAxMDAxXG4gICAgICB9XTtcbiAgICAgIGlmICh0cmFjaykge1xuICAgICAgICAvLyBhZGQgUlRYXG4gICAgICAgIGlmIChlZGdlVmVyc2lvbiA+PSAxNTAxOSAmJiBraW5kID09PSAndmlkZW8nICYmXG4gICAgICAgICAgICAhc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHtcbiAgICAgICAgICBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCA9IHtcbiAgICAgICAgICAgIHNzcmM6IHNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArIDFcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0cmFuc2NlaXZlci53YW50UmVjZWl2ZSkge1xuICAgICAgICB0cmFuc2NlaXZlci5ydHBSZWNlaXZlciA9IG5ldyB3aW5kb3cuUlRDUnRwUmVjZWl2ZXIoXG4gICAgICAgICAgICB0cmFuc2NlaXZlci5kdGxzVHJhbnNwb3J0LCBraW5kKTtcbiAgICAgIH1cblxuICAgICAgdHJhbnNjZWl2ZXIubG9jYWxDYXBhYmlsaXRpZXMgPSBsb2NhbENhcGFiaWxpdGllcztcbiAgICAgIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMgPSBzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzO1xuICAgIH0pO1xuXG4gICAgLy8gYWx3YXlzIG9mZmVyIEJVTkRMRSBhbmQgZGlzcG9zZSBvbiByZXR1cm4gaWYgbm90IHN1cHBvcnRlZC5cbiAgICBpZiAodGhpcy5fY29uZmlnLmJ1bmRsZVBvbGljeSAhPT0gJ21heC1jb21wYXQnKSB7XG4gICAgICBzZHAgKz0gJ2E9Z3JvdXA6QlVORExFICcgKyB0aGlzLnRyYW5zY2VpdmVycy5tYXAoZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gdC5taWQ7XG4gICAgICB9KS5qb2luKCcgJykgKyAnXFxyXFxuJztcbiAgICB9XG4gICAgc2RwICs9ICdhPWljZS1vcHRpb25zOnRyaWNrbGVcXHJcXG4nO1xuXG4gICAgdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaChmdW5jdGlvbih0cmFuc2NlaXZlciwgc2RwTUxpbmVJbmRleCkge1xuICAgICAgc2RwICs9IHdyaXRlTWVkaWFTZWN0aW9uKHRyYW5zY2VpdmVyLCB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcyxcbiAgICAgICAgICAnb2ZmZXInLCB0cmFuc2NlaXZlci5zdHJlYW0sIHNlbGYuX2R0bHNSb2xlKTtcbiAgICAgIHNkcCArPSAnYT1ydGNwLXJzaXplXFxyXFxuJztcblxuICAgICAgaWYgKHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyICYmIHNlbGYuaWNlR2F0aGVyaW5nU3RhdGUgIT09ICduZXcnICYmXG4gICAgICAgICAgKHNkcE1MaW5lSW5kZXggPT09IDAgfHwgIXNlbGYudXNpbmdCdW5kbGUpKSB7XG4gICAgICAgIHRyYW5zY2VpdmVyLmljZUdhdGhlcmVyLmdldExvY2FsQ2FuZGlkYXRlcygpLmZvckVhY2goZnVuY3Rpb24oY2FuZCkge1xuICAgICAgICAgIGNhbmQuY29tcG9uZW50ID0gMTtcbiAgICAgICAgICBzZHAgKz0gJ2E9JyArIFNEUFV0aWxzLndyaXRlQ2FuZGlkYXRlKGNhbmQpICsgJ1xcclxcbic7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0cmFuc2NlaXZlci5pY2VHYXRoZXJlci5zdGF0ZSA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgICBzZHAgKz0gJ2E9ZW5kLW9mLWNhbmRpZGF0ZXNcXHJcXG4nO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgZGVzYyA9IG5ldyB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHtcbiAgICAgIHR5cGU6ICdvZmZlcicsXG4gICAgICBzZHA6IHNkcFxuICAgIH0pO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICBpZiAoYXJncy5sZW5ndGggPiAwICYmIHR5cGVvZiBhcmdzWzBdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGFyZ3NbMF0uYXBwbHkobnVsbCwgW2Rlc2NdKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXNvbHZlKGRlc2MpO1xuICAgIH0pO1xuICB9O1xuXG4gIFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICB2YXIgc2RwID0gU0RQVXRpbHMud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUodGhpcy5fc2RwU2Vzc2lvbklkLFxuICAgICAgICB0aGlzLl9zZHBTZXNzaW9uVmVyc2lvbisrKTtcbiAgICBpZiAodGhpcy51c2luZ0J1bmRsZSkge1xuICAgICAgc2RwICs9ICdhPWdyb3VwOkJVTkRMRSAnICsgdGhpcy50cmFuc2NlaXZlcnMubWFwKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHQubWlkO1xuICAgICAgfSkuam9pbignICcpICsgJ1xcclxcbic7XG4gICAgfVxuICAgIHZhciBtZWRpYVNlY3Rpb25zSW5PZmZlciA9IFNEUFV0aWxzLnNwbGl0U2VjdGlvbnMoXG4gICAgICAgIHRoaXMucmVtb3RlRGVzY3JpcHRpb24uc2RwKS5sZW5ndGggLSAxO1xuICAgIHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goZnVuY3Rpb24odHJhbnNjZWl2ZXIsIHNkcE1MaW5lSW5kZXgpIHtcbiAgICAgIGlmIChzZHBNTGluZUluZGV4ICsgMSA+IG1lZGlhU2VjdGlvbnNJbk9mZmVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0cmFuc2NlaXZlci5pc0RhdGFjaGFubmVsKSB7XG4gICAgICAgIHNkcCArPSAnbT1hcHBsaWNhdGlvbiAwIERUTFMvU0NUUCA1MDAwXFxyXFxuJyArXG4gICAgICAgICAgICAnYz1JTiBJUDQgMC4wLjAuMFxcclxcbicgK1xuICAgICAgICAgICAgJ2E9bWlkOicgKyB0cmFuc2NlaXZlci5taWQgKyAnXFxyXFxuJztcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBGSVhNRTogbG9vayBhdCBkaXJlY3Rpb24uXG4gICAgICBpZiAodHJhbnNjZWl2ZXIuc3RyZWFtKSB7XG4gICAgICAgIHZhciBsb2NhbFRyYWNrO1xuICAgICAgICBpZiAodHJhbnNjZWl2ZXIua2luZCA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgIGxvY2FsVHJhY2sgPSB0cmFuc2NlaXZlci5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTtcbiAgICAgICAgfSBlbHNlIGlmICh0cmFuc2NlaXZlci5raW5kID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgbG9jYWxUcmFjayA9IHRyYW5zY2VpdmVyLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2NhbFRyYWNrKSB7XG4gICAgICAgICAgLy8gYWRkIFJUWFxuICAgICAgICAgIGlmIChlZGdlVmVyc2lvbiA+PSAxNTAxOSAmJiB0cmFuc2NlaXZlci5raW5kID09PSAndmlkZW8nICYmXG4gICAgICAgICAgICAgICF0cmFuc2NlaXZlci5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCkge1xuICAgICAgICAgICAgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHggPSB7XG4gICAgICAgICAgICAgIHNzcmM6IHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyArIDFcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb24gb2YgY2FwYWJpbGl0aWVzLlxuICAgICAgdmFyIGNvbW1vbkNhcGFiaWxpdGllcyA9IGdldENvbW1vbkNhcGFiaWxpdGllcyhcbiAgICAgICAgICB0cmFuc2NlaXZlci5sb2NhbENhcGFiaWxpdGllcyxcbiAgICAgICAgICB0cmFuc2NlaXZlci5yZW1vdGVDYXBhYmlsaXRpZXMpO1xuXG4gICAgICB2YXIgaGFzUnR4ID0gY29tbW9uQ2FwYWJpbGl0aWVzLmNvZGVjcy5maWx0ZXIoZnVuY3Rpb24oYykge1xuICAgICAgICByZXR1cm4gYy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdydHgnO1xuICAgICAgfSkubGVuZ3RoO1xuICAgICAgaWYgKCFoYXNSdHggJiYgdHJhbnNjZWl2ZXIuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgpIHtcbiAgICAgICAgZGVsZXRlIHRyYW5zY2VpdmVyLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4O1xuICAgICAgfVxuXG4gICAgICBzZHAgKz0gd3JpdGVNZWRpYVNlY3Rpb24odHJhbnNjZWl2ZXIsIGNvbW1vbkNhcGFiaWxpdGllcyxcbiAgICAgICAgICAnYW5zd2VyJywgdHJhbnNjZWl2ZXIuc3RyZWFtLCBzZWxmLl9kdGxzUm9sZSk7XG4gICAgICBpZiAodHJhbnNjZWl2ZXIucnRjcFBhcmFtZXRlcnMgJiZcbiAgICAgICAgICB0cmFuc2NlaXZlci5ydGNwUGFyYW1ldGVycy5yZWR1Y2VkU2l6ZSkge1xuICAgICAgICBzZHAgKz0gJ2E9cnRjcC1yc2l6ZVxcclxcbic7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgZGVzYyA9IG5ldyB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHtcbiAgICAgIHR5cGU6ICdhbnN3ZXInLFxuICAgICAgc2RwOiBzZHBcbiAgICB9KTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCAmJiB0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBhcmdzWzBdLmFwcGx5KG51bGwsIFtkZXNjXSk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShkZXNjKTtcbiAgICB9KTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oY2FuZGlkYXRlKSB7XG4gICAgdmFyIGVycjtcbiAgICB2YXIgc2VjdGlvbnM7XG4gICAgaWYgKCFjYW5kaWRhdGUgfHwgY2FuZGlkYXRlLmNhbmRpZGF0ZSA9PT0gJycpIHtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNjZWl2ZXJzW2pdLmlzRGF0YWNoYW5uZWwpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYW5zY2VpdmVyc1tqXS5pY2VUcmFuc3BvcnQuYWRkUmVtb3RlQ2FuZGlkYXRlKHt9KTtcbiAgICAgICAgc2VjdGlvbnMgPSBTRFBVdGlscy5zcGxpdFNlY3Rpb25zKHRoaXMucmVtb3RlRGVzY3JpcHRpb24uc2RwKTtcbiAgICAgICAgc2VjdGlvbnNbaiArIDFdICs9ICdhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuJztcbiAgICAgICAgdGhpcy5yZW1vdGVEZXNjcmlwdGlvbi5zZHAgPSBzZWN0aW9ucy5qb2luKCcnKTtcbiAgICAgICAgaWYgKHRoaXMudXNpbmdCdW5kbGUpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIShjYW5kaWRhdGUuc2RwTUxpbmVJbmRleCAhPT0gdW5kZWZpbmVkIHx8IGNhbmRpZGF0ZS5zZHBNaWQpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZHBNTGluZUluZGV4IG9yIHNkcE1pZCByZXF1aXJlZCcpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMucmVtb3RlRGVzY3JpcHRpb24pIHtcbiAgICAgIGVyciA9IG5ldyBFcnJvcignQ2FuIG5vdCBhZGQgSUNFIGNhbmRpZGF0ZSB3aXRob3V0ICcgK1xuICAgICAgICAgICdhIHJlbW90ZSBkZXNjcmlwdGlvbicpO1xuICAgICAgZXJyLm5hbWUgPSAnSW52YWxpZFN0YXRlRXJyb3InO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgc2RwTUxpbmVJbmRleCA9IGNhbmRpZGF0ZS5zZHBNTGluZUluZGV4O1xuICAgICAgaWYgKGNhbmRpZGF0ZS5zZHBNaWQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYW5zY2VpdmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICh0aGlzLnRyYW5zY2VpdmVyc1tpXS5taWQgPT09IGNhbmRpZGF0ZS5zZHBNaWQpIHtcbiAgICAgICAgICAgIHNkcE1MaW5lSW5kZXggPSBpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgdHJhbnNjZWl2ZXIgPSB0aGlzLnRyYW5zY2VpdmVyc1tzZHBNTGluZUluZGV4XTtcbiAgICAgIGlmICh0cmFuc2NlaXZlcikge1xuICAgICAgICBpZiAodHJhbnNjZWl2ZXIuaXNEYXRhY2hhbm5lbCkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2FuZCA9IE9iamVjdC5rZXlzKGNhbmRpZGF0ZS5jYW5kaWRhdGUpLmxlbmd0aCA+IDAgP1xuICAgICAgICAgICAgU0RQVXRpbHMucGFyc2VDYW5kaWRhdGUoY2FuZGlkYXRlLmNhbmRpZGF0ZSkgOiB7fTtcbiAgICAgICAgLy8gSWdub3JlIENocm9tZSdzIGludmFsaWQgY2FuZGlkYXRlcyBzaW5jZSBFZGdlIGRvZXMgbm90IGxpa2UgdGhlbS5cbiAgICAgICAgaWYgKGNhbmQucHJvdG9jb2wgPT09ICd0Y3AnICYmIChjYW5kLnBvcnQgPT09IDAgfHwgY2FuZC5wb3J0ID09PSA5KSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZ25vcmUgUlRDUCBjYW5kaWRhdGVzLCB3ZSBhc3N1bWUgUlRDUC1NVVguXG4gICAgICAgIGlmIChjYW5kLmNvbXBvbmVudCAmJiBjYW5kLmNvbXBvbmVudCAhPT0gMSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB3aGVuIHVzaW5nIGJ1bmRsZSwgYXZvaWQgYWRkaW5nIGNhbmRpZGF0ZXMgdG8gdGhlIHdyb25nXG4gICAgICAgIC8vIGljZSB0cmFuc3BvcnQuIEFuZCBhdm9pZCBhZGRpbmcgY2FuZGlkYXRlcyBhZGRlZCBpbiB0aGUgU0RQLlxuICAgICAgICBpZiAoc2RwTUxpbmVJbmRleCA9PT0gMCB8fCAoc2RwTUxpbmVJbmRleCA+IDAgJiZcbiAgICAgICAgICAgIHRyYW5zY2VpdmVyLmljZVRyYW5zcG9ydCAhPT0gdGhpcy50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0KSkge1xuICAgICAgICAgIGlmICghbWF5YmVBZGRDYW5kaWRhdGUodHJhbnNjZWl2ZXIuaWNlVHJhbnNwb3J0LCBjYW5kKSkge1xuICAgICAgICAgICAgZXJyID0gbmV3IEVycm9yKCdDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlJyk7XG4gICAgICAgICAgICBlcnIubmFtZSA9ICdPcGVyYXRpb25FcnJvcic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICAvLyB1cGRhdGUgdGhlIHJlbW90ZURlc2NyaXB0aW9uLlxuICAgICAgICAgIHZhciBjYW5kaWRhdGVTdHJpbmcgPSBjYW5kaWRhdGUuY2FuZGlkYXRlLnRyaW0oKTtcbiAgICAgICAgICBpZiAoY2FuZGlkYXRlU3RyaW5nLmluZGV4T2YoJ2E9JykgPT09IDApIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZVN0cmluZyA9IGNhbmRpZGF0ZVN0cmluZy5zdWJzdHIoMik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlY3Rpb25zID0gU0RQVXRpbHMuc3BsaXRTZWN0aW9ucyh0aGlzLnJlbW90ZURlc2NyaXB0aW9uLnNkcCk7XG4gICAgICAgICAgc2VjdGlvbnNbc2RwTUxpbmVJbmRleCArIDFdICs9ICdhPScgK1xuICAgICAgICAgICAgICAoY2FuZC50eXBlID8gY2FuZGlkYXRlU3RyaW5nIDogJ2VuZC1vZi1jYW5kaWRhdGVzJylcbiAgICAgICAgICAgICAgKyAnXFxyXFxuJztcbiAgICAgICAgICB0aGlzLnJlbW90ZURlc2NyaXB0aW9uLnNkcCA9IHNlY3Rpb25zLmpvaW4oJycpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcnIgPSBuZXcgRXJyb3IoJ0NhbiBub3QgYWRkIElDRSBjYW5kaWRhdGUnKTtcbiAgICAgICAgZXJyLm5hbWUgPSAnT3BlcmF0aW9uRXJyb3InO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDIgJiYgdHlwZW9mIGFyZ3NbMl0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBhcmdzWzJdLmFwcGx5KG51bGwsIFtlcnJdKTtcbiAgICAgICAgfVxuICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEgJiYgdHlwZW9mIGFyZ3NbMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBhcmdzWzFdLmFwcGx5KG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcHJvbWlzZXMgPSBbXTtcbiAgICB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zY2VpdmVyKSB7XG4gICAgICBbJ3J0cFNlbmRlcicsICdydHBSZWNlaXZlcicsICdpY2VHYXRoZXJlcicsICdpY2VUcmFuc3BvcnQnLFxuICAgICAgICAgICdkdGxzVHJhbnNwb3J0J10uZm9yRWFjaChmdW5jdGlvbihtZXRob2QpIHtcbiAgICAgICAgICAgIGlmICh0cmFuc2NlaXZlclttZXRob2RdKSB7XG4gICAgICAgICAgICAgIHByb21pc2VzLnB1c2godHJhbnNjZWl2ZXJbbWV0aG9kXS5nZXRTdGF0cygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICB9KTtcbiAgICB2YXIgY2IgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgIGFyZ3VtZW50c1sxXTtcbiAgICB2YXIgZml4U3RhdHNUeXBlID0gZnVuY3Rpb24oc3RhdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaW5ib3VuZHJ0cDogJ2luYm91bmQtcnRwJyxcbiAgICAgICAgb3V0Ym91bmRydHA6ICdvdXRib3VuZC1ydHAnLFxuICAgICAgICBjYW5kaWRhdGVwYWlyOiAnY2FuZGlkYXRlLXBhaXInLFxuICAgICAgICBsb2NhbGNhbmRpZGF0ZTogJ2xvY2FsLWNhbmRpZGF0ZScsXG4gICAgICAgIHJlbW90ZWNhbmRpZGF0ZTogJ3JlbW90ZS1jYW5kaWRhdGUnXG4gICAgICB9W3N0YXQudHlwZV0gfHwgc3RhdC50eXBlO1xuICAgIH07XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUpIHtcbiAgICAgIC8vIHNoaW0gZ2V0U3RhdHMgd2l0aCBtYXBsaWtlIHN1cHBvcnRcbiAgICAgIHZhciByZXN1bHRzID0gbmV3IE1hcCgpO1xuICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIHJlcy5mb3JFYWNoKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaChmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgcmVzdWx0W2lkXS50eXBlID0gZml4U3RhdHNUeXBlKHJlc3VsdFtpZF0pO1xuICAgICAgICAgICAgcmVzdWx0cy5zZXQoaWQsIHJlc3VsdFtpZF0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgY2IuYXBwbHkobnVsbCwgcmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4gUlRDUGVlckNvbm5lY3Rpb247XG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9ydGNwZWVyY29ubmVjdGlvbi1zaGltL3J0Y3BlZXJjb25uZWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTU5XG4vLyBtb2R1bGUgY2h1bmtzID0gNyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2559\n");

/***/ }),

/***/ 2560:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var navigator = window && window.navigator;\n\n  var shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(function(e) {\n      return Promise.reject(shimError_(e));\n    });\n  };\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU2MC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZWRnZS9nZXR1c2VybWVkaWEuanM/NTgzNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24od2luZG93KSB7XG4gIHZhciBuYXZpZ2F0b3IgPSB3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvcjtcblxuICB2YXIgc2hpbUVycm9yXyA9IGZ1bmN0aW9uKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZToge1Blcm1pc3Npb25EZW5pZWRFcnJvcjogJ05vdEFsbG93ZWRFcnJvcid9W2UubmFtZV0gfHwgZS5uYW1lLFxuICAgICAgbWVzc2FnZTogZS5tZXNzYWdlLFxuICAgICAgY29uc3RyYWludDogZS5jb25zdHJhaW50LFxuICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgICAgfVxuICAgIH07XG4gIH07XG5cbiAgLy8gZ2V0VXNlck1lZGlhIGVycm9yIHNoaW0uXG4gIHZhciBvcmlnR2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuXG4gICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO1xuICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGMpIHtcbiAgICByZXR1cm4gb3JpZ0dldFVzZXJNZWRpYShjKS5jYXRjaChmdW5jdGlvbihlKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3Qoc2hpbUVycm9yXyhlKSk7XG4gICAgfSk7XG4gIH07XG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZWRnZS9nZXR1c2VybWVkaWEuanNcbi8vIG1vZHVsZSBpZCA9IDI1NjBcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2560\n");

/***/ }),

/***/ 2561:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = __webpack_require__(2251);\n\nvar firefoxShim = {\n  shimOnTrack: function(window) {\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n        window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n        get: function() {\n          return this._ontrack;\n        },\n        set: function(f) {\n          if (this._ontrack) {\n            this.removeEventListener('track', this._ontrack);\n            this.removeEventListener('addstream', this._ontrackpoly);\n          }\n          this.addEventListener('track', this._ontrack = f);\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\n            e.stream.getTracks().forEach(function(track) {\n              var event = new Event('track');\n              event.track = track;\n              event.receiver = {track: track};\n              event.transceiver = {receiver: event.receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            }.bind(this));\n          }.bind(this));\n        }\n      });\n    }\n    if (typeof window === 'object' && window.RTCTrackEvent &&\n        ('receiver' in window.RTCTrackEvent.prototype) &&\n        !('transceiver' in window.RTCTrackEvent.prototype)) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function() {\n          return {receiver: this.receiver};\n        }\n      });\n    }\n  },\n\n  shimSourceObject: function(window) {\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n    if (typeof window === 'object') {\n      if (window.HTMLMediaElement &&\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n          get: function() {\n            return this.mozSrcObject;\n          },\n          set: function(stream) {\n            this.mozSrcObject = stream;\n          }\n        });\n      }\n    }\n  },\n\n  shimPeerConnection: function(window) {\n    var browserDetails = utils.detectBrowser(window);\n\n    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n        window.mozRTCPeerConnection)) {\n      return; // probably media.peerconnection.enabled=false in about:config\n    }\n    // The RTCPeerConnection object.\n    if (!window.RTCPeerConnection) {\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n        if (browserDetails.version < 38) {\n          // .urls is not supported in FF < 38.\n          // create RTCIceServers with a single url.\n          if (pcConfig && pcConfig.iceServers) {\n            var newIceServers = [];\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n              var server = pcConfig.iceServers[i];\n              if (server.hasOwnProperty('urls')) {\n                for (var j = 0; j < server.urls.length; j++) {\n                  var newServer = {\n                    url: server.urls[j]\n                  };\n                  if (server.urls[j].indexOf('turn') === 0) {\n                    newServer.username = server.username;\n                    newServer.credential = server.credential;\n                  }\n                  newIceServers.push(newServer);\n                }\n              } else {\n                newIceServers.push(pcConfig.iceServers[i]);\n              }\n            }\n            pcConfig.iceServers = newIceServers;\n          }\n        }\n        return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n      };\n      window.RTCPeerConnection.prototype =\n          window.mozRTCPeerConnection.prototype;\n\n      // wrap static methods. Currently just generateCertificate.\n      if (window.mozRTCPeerConnection.generateCertificate) {\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n          get: function() {\n            return window.mozRTCPeerConnection.generateCertificate;\n          }\n        });\n      }\n\n      window.RTCSessionDescription = window.mozRTCSessionDescription;\n      window.RTCIceCandidate = window.mozRTCIceCandidate;\n    }\n\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\n          window.RTCPeerConnection.prototype[method] = function() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          };\n        });\n\n    // support for addIceCandidate(null or undefined)\n    var nativeAddIceCandidate =\n        window.RTCPeerConnection.prototype.addIceCandidate;\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n\n    // shim getStats with maplike support\n    var makeMapStats = function(stats) {\n      var map = new Map();\n      Object.keys(stats).forEach(function(key) {\n        map.set(key, stats[key]);\n        map[key] = stats[key];\n      });\n      return map;\n    };\n\n    var modernStatsTypes = {\n      inboundrtp: 'inbound-rtp',\n      outboundrtp: 'outbound-rtp',\n      candidatepair: 'candidate-pair',\n      localcandidate: 'local-candidate',\n      remotecandidate: 'remote-candidate'\n    };\n\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n    window.RTCPeerConnection.prototype.getStats = function(\n      selector,\n      onSucc,\n      onErr\n    ) {\n      return nativeGetStats.apply(this, [selector || null])\n        .then(function(stats) {\n          if (browserDetails.version < 48) {\n            stats = makeMapStats(stats);\n          }\n          if (browserDetails.version < 53 && !onSucc) {\n            // Shim only promise getStats with spec-hyphens in type names\n            // Leave callback version alone; misc old uses of forEach before Map\n            try {\n              stats.forEach(function(stat) {\n                stat.type = modernStatsTypes[stat.type] || stat.type;\n              });\n            } catch (e) {\n              if (e.name !== 'TypeError') {\n                throw e;\n              }\n              // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n              stats.forEach(function(stat, i) {\n                stats.set(i, Object.assign({}, stat, {\n                  type: modernStatsTypes[stat.type] || stat.type\n                }));\n              });\n            }\n          }\n          return stats;\n        })\n        .then(onSucc, onErr);\n    };\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimOnTrack: firefoxShim.shimOnTrack,\n  shimSourceObject: firefoxShim.shimSourceObject,\n  shimPeerConnection: firefoxShim.shimPeerConnection,\n  shimGetUserMedia: __webpack_require__(2562)\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU2MS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9maXJlZm94X3NoaW0uanM/YmU0YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbnZhciBmaXJlZm94U2hpbSA9IHtcbiAgc2hpbU9uVHJhY2s6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gJiYgISgnb250cmFjaycgaW5cbiAgICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLCAnb250cmFjaycsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fb250cmFjaztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbihmKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX29udHJhY2spIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbnRyYWNrKTtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb250cmFja3BvbHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb250cmFjayA9IGYpO1xuICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignYWRkc3RyZWFtJywgdGhpcy5fb250cmFja3BvbHkgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICAgIHZhciBldmVudCA9IG5ldyBFdmVudCgndHJhY2snKTtcbiAgICAgICAgICAgICAgZXZlbnQudHJhY2sgPSB0cmFjaztcbiAgICAgICAgICAgICAgZXZlbnQucmVjZWl2ZXIgPSB7dHJhY2s6IHRyYWNrfTtcbiAgICAgICAgICAgICAgZXZlbnQudHJhbnNjZWl2ZXIgPSB7cmVjZWl2ZXI6IGV2ZW50LnJlY2VpdmVyfTtcbiAgICAgICAgICAgICAgZXZlbnQuc3RyZWFtcyA9IFtlLnN0cmVhbV07XG4gICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LlJUQ1RyYWNrRXZlbnQgJiZcbiAgICAgICAgKCdyZWNlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSAmJlxuICAgICAgICAhKCd0cmFuc2NlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENUcmFja0V2ZW50LnByb3RvdHlwZSwgJ3RyYW5zY2VpdmVyJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB7cmVjZWl2ZXI6IHRoaXMucmVjZWl2ZXJ9O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgc2hpbVNvdXJjZU9iamVjdDogZnVuY3Rpb24od2luZG93KSB7XG4gICAgLy8gRmlyZWZveCBoYXMgc3VwcG9ydGVkIG1velNyY09iamVjdCBzaW5jZSBGRjIyLCB1bnByZWZpeGVkIGluIDQyLlxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0Jykge1xuICAgICAgaWYgKHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50ICYmXG4gICAgICAgICEoJ3NyY09iamVjdCcgaW4gd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlKSkge1xuICAgICAgICAvLyBTaGltIHRoZSBzcmNPYmplY3QgcHJvcGVydHksIG9uY2UsIHdoZW4gSFRNTE1lZGlhRWxlbWVudCBpcyBmb3VuZC5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZSwgJ3NyY09iamVjdCcsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW96U3JjT2JqZWN0O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgICAgIHRoaXMubW96U3JjT2JqZWN0ID0gc3RyZWFtO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHNoaW1QZWVyQ29ubmVjdGlvbjogZnVuY3Rpb24od2luZG93KSB7XG4gICAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpO1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICdvYmplY3QnIHx8ICEod2luZG93LlJUQ1BlZXJDb25uZWN0aW9uIHx8XG4gICAgICAgIHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbikpIHtcbiAgICAgIHJldHVybjsgLy8gcHJvYmFibHkgbWVkaWEucGVlcmNvbm5lY3Rpb24uZW5hYmxlZD1mYWxzZSBpbiBhYm91dDpjb25maWdcbiAgICB9XG4gICAgLy8gVGhlIFJUQ1BlZXJDb25uZWN0aW9uIG9iamVjdC5cbiAgICBpZiAoIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpIHtcbiAgICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCAzOCkge1xuICAgICAgICAgIC8vIC51cmxzIGlzIG5vdCBzdXBwb3J0ZWQgaW4gRkYgPCAzOC5cbiAgICAgICAgICAvLyBjcmVhdGUgUlRDSWNlU2VydmVycyB3aXRoIGEgc2luZ2xlIHVybC5cbiAgICAgICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlU2VydmVycykge1xuICAgICAgICAgICAgdmFyIG5ld0ljZVNlcnZlcnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGNDb25maWcuaWNlU2VydmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICB2YXIgc2VydmVyID0gcGNDb25maWcuaWNlU2VydmVyc1tpXTtcbiAgICAgICAgICAgICAgaWYgKHNlcnZlci5oYXNPd25Qcm9wZXJ0eSgndXJscycpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzZXJ2ZXIudXJscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgdmFyIG5ld1NlcnZlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBzZXJ2ZXIudXJsc1tqXVxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgIGlmIChzZXJ2ZXIudXJsc1tqXS5pbmRleE9mKCd0dXJuJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3U2VydmVyLnVzZXJuYW1lID0gc2VydmVyLnVzZXJuYW1lO1xuICAgICAgICAgICAgICAgICAgICBuZXdTZXJ2ZXIuY3JlZGVudGlhbCA9IHNlcnZlci5jcmVkZW50aWFsO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgbmV3SWNlU2VydmVycy5wdXNoKG5ld1NlcnZlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld0ljZVNlcnZlcnMucHVzaChwY0NvbmZpZy5pY2VTZXJ2ZXJzW2ldKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGNDb25maWcuaWNlU2VydmVycyA9IG5ld0ljZVNlcnZlcnM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTtcbiAgICAgIH07XG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlID1cbiAgICAgICAgICB3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO1xuXG4gICAgICAvLyB3cmFwIHN0YXRpYyBtZXRob2RzLiBDdXJyZW50bHkganVzdCBnZW5lcmF0ZUNlcnRpZmljYXRlLlxuICAgICAgaWYgKHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sICdnZW5lcmF0ZUNlcnRpZmljYXRlJywge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uLmdlbmVyYXRlQ2VydGlmaWNhdGU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgd2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiA9IHdpbmRvdy5tb3pSVENTZXNzaW9uRGVzY3JpcHRpb247XG4gICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gd2luZG93Lm1velJUQ0ljZUNhbmRpZGF0ZTtcbiAgICB9XG5cbiAgICAvLyBzaGltIGF3YXkgbmVlZCBmb3Igb2Jzb2xldGUgUlRDSWNlQ2FuZGlkYXRlL1JUQ1Nlc3Npb25EZXNjcmlwdGlvbi5cbiAgICBbJ3NldExvY2FsRGVzY3JpcHRpb24nLCAnc2V0UmVtb3RlRGVzY3JpcHRpb24nLCAnYWRkSWNlQ2FuZGlkYXRlJ11cbiAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgdmFyIG5hdGl2ZU1ldGhvZCA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXTtcbiAgICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IG5ldyAoKG1ldGhvZCA9PT0gJ2FkZEljZUNhbmRpZGF0ZScpID9cbiAgICAgICAgICAgICAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlIDpcbiAgICAgICAgICAgICAgICB3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKShhcmd1bWVudHNbMF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5hdGl2ZU1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgLy8gc3VwcG9ydCBmb3IgYWRkSWNlQ2FuZGlkYXRlKG51bGwgb3IgdW5kZWZpbmVkKVxuICAgIHZhciBuYXRpdmVBZGRJY2VDYW5kaWRhdGUgPVxuICAgICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZTtcbiAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFhcmd1bWVudHNbMF0pIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50c1sxXSkge1xuICAgICAgICAgIGFyZ3VtZW50c1sxXS5hcHBseShudWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmF0aXZlQWRkSWNlQ2FuZGlkYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIC8vIHNoaW0gZ2V0U3RhdHMgd2l0aCBtYXBsaWtlIHN1cHBvcnRcbiAgICB2YXIgbWFrZU1hcFN0YXRzID0gZnVuY3Rpb24oc3RhdHMpIHtcbiAgICAgIHZhciBtYXAgPSBuZXcgTWFwKCk7XG4gICAgICBPYmplY3Qua2V5cyhzdGF0cykuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgbWFwLnNldChrZXksIHN0YXRzW2tleV0pO1xuICAgICAgICBtYXBba2V5XSA9IHN0YXRzW2tleV07XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBtYXA7XG4gICAgfTtcblxuICAgIHZhciBtb2Rlcm5TdGF0c1R5cGVzID0ge1xuICAgICAgaW5ib3VuZHJ0cDogJ2luYm91bmQtcnRwJyxcbiAgICAgIG91dGJvdW5kcnRwOiAnb3V0Ym91bmQtcnRwJyxcbiAgICAgIGNhbmRpZGF0ZXBhaXI6ICdjYW5kaWRhdGUtcGFpcicsXG4gICAgICBsb2NhbGNhbmRpZGF0ZTogJ2xvY2FsLWNhbmRpZGF0ZScsXG4gICAgICByZW1vdGVjYW5kaWRhdGU6ICdyZW1vdGUtY2FuZGlkYXRlJ1xuICAgIH07XG5cbiAgICB2YXIgbmF0aXZlR2V0U3RhdHMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHMgPSBmdW5jdGlvbihcbiAgICAgIHNlbGVjdG9yLFxuICAgICAgb25TdWNjLFxuICAgICAgb25FcnJcbiAgICApIHtcbiAgICAgIHJldHVybiBuYXRpdmVHZXRTdGF0cy5hcHBseSh0aGlzLCBbc2VsZWN0b3IgfHwgbnVsbF0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHN0YXRzKSB7XG4gICAgICAgICAgaWYgKGJyb3dzZXJEZXRhaWxzLnZlcnNpb24gPCA0OCkge1xuICAgICAgICAgICAgc3RhdHMgPSBtYWtlTWFwU3RhdHMoc3RhdHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDUzICYmICFvblN1Y2MpIHtcbiAgICAgICAgICAgIC8vIFNoaW0gb25seSBwcm9taXNlIGdldFN0YXRzIHdpdGggc3BlYy1oeXBoZW5zIGluIHR5cGUgbmFtZXNcbiAgICAgICAgICAgIC8vIExlYXZlIGNhbGxiYWNrIHZlcnNpb24gYWxvbmU7IG1pc2Mgb2xkIHVzZXMgb2YgZm9yRWFjaCBiZWZvcmUgTWFwXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBzdGF0cy5mb3JFYWNoKGZ1bmN0aW9uKHN0YXQpIHtcbiAgICAgICAgICAgICAgICBzdGF0LnR5cGUgPSBtb2Rlcm5TdGF0c1R5cGVzW3N0YXQudHlwZV0gfHwgc3RhdC50eXBlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgaWYgKGUubmFtZSAhPT0gJ1R5cGVFcnJvcicpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vIEF2b2lkIFR5cGVFcnJvcjogXCJ0eXBlXCIgaXMgcmVhZC1vbmx5LCBpbiBvbGQgdmVyc2lvbnMuIDM0LTQzaXNoXG4gICAgICAgICAgICAgIHN0YXRzLmZvckVhY2goZnVuY3Rpb24oc3RhdCwgaSkge1xuICAgICAgICAgICAgICAgIHN0YXRzLnNldChpLCBPYmplY3QuYXNzaWduKHt9LCBzdGF0LCB7XG4gICAgICAgICAgICAgICAgICB0eXBlOiBtb2Rlcm5TdGF0c1R5cGVzW3N0YXQudHlwZV0gfHwgc3RhdC50eXBlXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHN0YXRzO1xuICAgICAgICB9KVxuICAgICAgICAudGhlbihvblN1Y2MsIG9uRXJyKTtcbiAgICB9O1xuICB9XG59O1xuXG4vLyBFeHBvc2UgcHVibGljIG1ldGhvZHMuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2hpbU9uVHJhY2s6IGZpcmVmb3hTaGltLnNoaW1PblRyYWNrLFxuICBzaGltU291cmNlT2JqZWN0OiBmaXJlZm94U2hpbS5zaGltU291cmNlT2JqZWN0LFxuICBzaGltUGVlckNvbm5lY3Rpb246IGZpcmVmb3hTaGltLnNoaW1QZWVyQ29ubmVjdGlvbixcbiAgc2hpbUdldFVzZXJNZWRpYTogcmVxdWlyZSgnLi9nZXR1c2VybWVkaWEnKVxufTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvd2VicnRjLWFkYXB0ZXIvc3JjL2pzL2ZpcmVmb3gvZmlyZWZveF9zaGltLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTYxXG4vLyBtb2R1bGUgY2h1bmtzID0gNyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2561\n");

/***/ }),

/***/ 2562:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar utils = __webpack_require__(2251);\nvar logging = utils.log;\n\n// Expose public methods.\nmodule.exports = function(window) {\n  var browserDetails = utils.detectBrowser(window);\n  var navigator = window && window.navigator;\n  var MediaStreamTrack = window && window.MediaStreamTrack;\n\n  var shimError_ = function(e) {\n    return {\n      name: {\n        InternalError: 'NotReadableError',\n        NotSupportedError: 'TypeError',\n        PermissionDeniedError: 'NotAllowedError',\n        SecurityError: 'NotAllowedError'\n      }[e.name] || e.name,\n      message: {\n        'The operation is insecure.': 'The request is not allowed by the ' +\n        'user agent or the platform in the current context.'\n      }[e.message] || e.message,\n      constraint: e.constraint,\n      toString: function() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  // getUserMedia constraints shim.\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\n    var constraintsToFF37_ = function(c) {\n      if (typeof c !== 'object' || c.require) {\n        return c;\n      }\n      var require = [];\n      Object.keys(c).forEach(function(key) {\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n          return;\n        }\n        var r = c[key] = (typeof c[key] === 'object') ?\n            c[key] : {ideal: c[key]};\n        if (r.min !== undefined ||\n            r.max !== undefined || r.exact !== undefined) {\n          require.push(key);\n        }\n        if (r.exact !== undefined) {\n          if (typeof r.exact === 'number') {\n            r. min = r.max = r.exact;\n          } else {\n            c[key] = r.exact;\n          }\n          delete r.exact;\n        }\n        if (r.ideal !== undefined) {\n          c.advanced = c.advanced || [];\n          var oc = {};\n          if (typeof r.ideal === 'number') {\n            oc[key] = {min: r.ideal, max: r.ideal};\n          } else {\n            oc[key] = r.ideal;\n          }\n          c.advanced.push(oc);\n          delete r.ideal;\n          if (!Object.keys(r).length) {\n            delete c[key];\n          }\n        }\n      });\n      if (require.length) {\n        c.require = require;\n      }\n      return c;\n    };\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (browserDetails.version < 38) {\n      logging('spec: ' + JSON.stringify(constraints));\n      if (constraints.audio) {\n        constraints.audio = constraintsToFF37_(constraints.audio);\n      }\n      if (constraints.video) {\n        constraints.video = constraintsToFF37_(constraints.video);\n      }\n      logging('ff37: ' + JSON.stringify(constraints));\n    }\n    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n      onError(shimError_(e));\n    });\n  };\n\n  // Returns the result of getUserMedia as a Promise.\n  var getUserMediaPromise_ = function(constraints) {\n    return new Promise(function(resolve, reject) {\n      getUserMedia_(constraints, resolve, reject);\n    });\n  };\n\n  // Shim for mediaDevices on older versions.\n  if (!navigator.mediaDevices) {\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n      addEventListener: function() { },\n      removeEventListener: function() { }\n    };\n  }\n  navigator.mediaDevices.enumerateDevices =\n      navigator.mediaDevices.enumerateDevices || function() {\n        return new Promise(function(resolve) {\n          var infos = [\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n          ];\n          resolve(infos);\n        });\n      };\n\n  if (browserDetails.version < 41) {\n    // Work around http://bugzil.la/1169665\n    var orgEnumerateDevices =\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n    navigator.mediaDevices.enumerateDevices = function() {\n      return orgEnumerateDevices().then(undefined, function(e) {\n        if (e.name === 'NotFoundError') {\n          return [];\n        }\n        throw e;\n      });\n    };\n  }\n  if (browserDetails.version < 49) {\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      return origGetUserMedia(c).then(function(stream) {\n        // Work around https://bugzil.la/802326\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(function(track) {\n            track.stop();\n          });\n          throw new DOMException('The object can not be found here.',\n                                 'NotFoundError');\n        }\n        return stream;\n      }, function(e) {\n        return Promise.reject(shimError_(e));\n      });\n    };\n  }\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    var remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        var obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    if (browserDetails.version < 44) {\n      return getUserMedia_(constraints, onSuccess, onError);\n    }\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU2Mi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvZmlyZWZveC9nZXR1c2VybWVkaWEuanM/MDlhZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG52YXIgbG9nZ2luZyA9IHV0aWxzLmxvZztcblxuLy8gRXhwb3NlIHB1YmxpYyBtZXRob2RzLlxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih3aW5kb3cpIHtcbiAgdmFyIGJyb3dzZXJEZXRhaWxzID0gdXRpbHMuZGV0ZWN0QnJvd3Nlcih3aW5kb3cpO1xuICB2YXIgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG4gIHZhciBNZWRpYVN0cmVhbVRyYWNrID0gd2luZG93ICYmIHdpbmRvdy5NZWRpYVN0cmVhbVRyYWNrO1xuXG4gIHZhciBzaGltRXJyb3JfID0gZnVuY3Rpb24oZSkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIEludGVybmFsRXJyb3I6ICdOb3RSZWFkYWJsZUVycm9yJyxcbiAgICAgICAgTm90U3VwcG9ydGVkRXJyb3I6ICdUeXBlRXJyb3InLFxuICAgICAgICBQZXJtaXNzaW9uRGVuaWVkRXJyb3I6ICdOb3RBbGxvd2VkRXJyb3InLFxuICAgICAgICBTZWN1cml0eUVycm9yOiAnTm90QWxsb3dlZEVycm9yJ1xuICAgICAgfVtlLm5hbWVdIHx8IGUubmFtZSxcbiAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgJ1RoZSBvcGVyYXRpb24gaXMgaW5zZWN1cmUuJzogJ1RoZSByZXF1ZXN0IGlzIG5vdCBhbGxvd2VkIGJ5IHRoZSAnICtcbiAgICAgICAgJ3VzZXIgYWdlbnQgb3IgdGhlIHBsYXRmb3JtIGluIHRoZSBjdXJyZW50IGNvbnRleHQuJ1xuICAgICAgfVtlLm1lc3NhZ2VdIHx8IGUubWVzc2FnZSxcbiAgICAgIGNvbnN0cmFpbnQ6IGUuY29uc3RyYWludCxcbiAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZSArICh0aGlzLm1lc3NhZ2UgJiYgJzogJykgKyB0aGlzLm1lc3NhZ2U7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBnZXRVc2VyTWVkaWEgY29uc3RyYWludHMgc2hpbS5cbiAgdmFyIGdldFVzZXJNZWRpYV8gPSBmdW5jdGlvbihjb25zdHJhaW50cywgb25TdWNjZXNzLCBvbkVycm9yKSB7XG4gICAgdmFyIGNvbnN0cmFpbnRzVG9GRjM3XyA9IGZ1bmN0aW9uKGMpIHtcbiAgICAgIGlmICh0eXBlb2YgYyAhPT0gJ29iamVjdCcgfHwgYy5yZXF1aXJlKSB7XG4gICAgICAgIHJldHVybiBjO1xuICAgICAgfVxuICAgICAgdmFyIHJlcXVpcmUgPSBbXTtcbiAgICAgIE9iamVjdC5rZXlzKGMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIGlmIChrZXkgPT09ICdyZXF1aXJlJyB8fCBrZXkgPT09ICdhZHZhbmNlZCcgfHwga2V5ID09PSAnbWVkaWFTb3VyY2UnKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByID0gY1trZXldID0gKHR5cGVvZiBjW2tleV0gPT09ICdvYmplY3QnKSA/XG4gICAgICAgICAgICBjW2tleV0gOiB7aWRlYWw6IGNba2V5XX07XG4gICAgICAgIGlmIChyLm1pbiAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICByLm1heCAhPT0gdW5kZWZpbmVkIHx8IHIuZXhhY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJlcXVpcmUucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyLmV4YWN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHIuZXhhY3QgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByLiBtaW4gPSByLm1heCA9IHIuZXhhY3Q7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNba2V5XSA9IHIuZXhhY3Q7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlbGV0ZSByLmV4YWN0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChyLmlkZWFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjLmFkdmFuY2VkID0gYy5hZHZhbmNlZCB8fCBbXTtcbiAgICAgICAgICB2YXIgb2MgPSB7fTtcbiAgICAgICAgICBpZiAodHlwZW9mIHIuaWRlYWwgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBvY1trZXldID0ge21pbjogci5pZGVhbCwgbWF4OiByLmlkZWFsfTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb2Nba2V5XSA9IHIuaWRlYWw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGMuYWR2YW5jZWQucHVzaChvYyk7XG4gICAgICAgICAgZGVsZXRlIHIuaWRlYWw7XG4gICAgICAgICAgaWYgKCFPYmplY3Qua2V5cyhyKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBjW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChyZXF1aXJlLmxlbmd0aCkge1xuICAgICAgICBjLnJlcXVpcmUgPSByZXF1aXJlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGM7XG4gICAgfTtcbiAgICBjb25zdHJhaW50cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDM4KSB7XG4gICAgICBsb2dnaW5nKCdzcGVjOiAnICsgSlNPTi5zdHJpbmdpZnkoY29uc3RyYWludHMpKTtcbiAgICAgIGlmIChjb25zdHJhaW50cy5hdWRpbykge1xuICAgICAgICBjb25zdHJhaW50cy5hdWRpbyA9IGNvbnN0cmFpbnRzVG9GRjM3Xyhjb25zdHJhaW50cy5hdWRpbyk7XG4gICAgICB9XG4gICAgICBpZiAoY29uc3RyYWludHMudmlkZW8pIHtcbiAgICAgICAgY29uc3RyYWludHMudmlkZW8gPSBjb25zdHJhaW50c1RvRkYzN18oY29uc3RyYWludHMudmlkZW8pO1xuICAgICAgfVxuICAgICAgbG9nZ2luZygnZmYzNzogJyArIEpTT04uc3RyaW5naWZ5KGNvbnN0cmFpbnRzKSk7XG4gICAgfVxuICAgIHJldHVybiBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIG9uRXJyb3Ioc2hpbUVycm9yXyhlKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGdldFVzZXJNZWRpYSBhcyBhIFByb21pc2UuXG4gIHZhciBnZXRVc2VyTWVkaWFQcm9taXNlXyA9IGZ1bmN0aW9uKGNvbnN0cmFpbnRzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgZ2V0VXNlck1lZGlhXyhjb25zdHJhaW50cywgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBTaGltIGZvciBtZWRpYURldmljZXMgb24gb2xkZXIgdmVyc2lvbnMuXG4gIGlmICghbmF2aWdhdG9yLm1lZGlhRGV2aWNlcykge1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgPSB7Z2V0VXNlck1lZGlhOiBnZXRVc2VyTWVkaWFQcm9taXNlXyxcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uKCkgeyB9LFxuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24oKSB7IH1cbiAgICB9O1xuICB9XG4gIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcyA9XG4gICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgfHwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKSB7XG4gICAgICAgICAgdmFyIGluZm9zID0gW1xuICAgICAgICAgICAge2tpbmQ6ICdhdWRpb2lucHV0JywgZGV2aWNlSWQ6ICdkZWZhdWx0JywgbGFiZWw6ICcnLCBncm91cElkOiAnJ30sXG4gICAgICAgICAgICB7a2luZDogJ3ZpZGVvaW5wdXQnLCBkZXZpY2VJZDogJ2RlZmF1bHQnLCBsYWJlbDogJycsIGdyb3VwSWQ6ICcnfVxuICAgICAgICAgIF07XG4gICAgICAgICAgcmVzb2x2ZShpbmZvcyk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICBpZiAoYnJvd3NlckRldGFpbHMudmVyc2lvbiA8IDQxKSB7XG4gICAgLy8gV29yayBhcm91bmQgaHR0cDovL2J1Z3ppbC5sYS8xMTY5NjY1XG4gICAgdmFyIG9yZ0VudW1lcmF0ZURldmljZXMgPVxuICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMuYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBvcmdFbnVtZXJhdGVEZXZpY2VzKCkudGhlbih1bmRlZmluZWQsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKGUubmFtZSA9PT0gJ05vdEZvdW5kRXJyb3InKSB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG4gIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNDkpIHtcbiAgICB2YXIgb3JpZ0dldFVzZXJNZWRpYSA9IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLlxuICAgICAgICBiaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO1xuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oYykge1xuICAgICAgcmV0dXJuIG9yaWdHZXRVc2VyTWVkaWEoYykudGhlbihmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgLy8gV29yayBhcm91bmQgaHR0cHM6Ly9idWd6aWwubGEvODAyMzI2XG4gICAgICAgIGlmIChjLmF1ZGlvICYmICFzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGggfHxcbiAgICAgICAgICAgIGMudmlkZW8gJiYgIXN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCkge1xuICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKHRyYWNrKSB7XG4gICAgICAgICAgICB0cmFjay5zdG9wKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhyb3cgbmV3IERPTUV4Y2VwdGlvbignVGhlIG9iamVjdCBjYW4gbm90IGJlIGZvdW5kIGhlcmUuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdOb3RGb3VuZEVycm9yJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmVhbTtcbiAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHNoaW1FcnJvcl8oZSkpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuICBpZiAoIShicm93c2VyRGV0YWlscy52ZXJzaW9uID4gNTUgJiZcbiAgICAgICdhdXRvR2FpbkNvbnRyb2wnIGluIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKSkpIHtcbiAgICB2YXIgcmVtYXAgPSBmdW5jdGlvbihvYmosIGEsIGIpIHtcbiAgICAgIGlmIChhIGluIG9iaiAmJiAhKGIgaW4gb2JqKSkge1xuICAgICAgICBvYmpbYl0gPSBvYmpbYV07XG4gICAgICAgIGRlbGV0ZSBvYmpbYV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBuYXRpdmVHZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5cbiAgICAgICAgYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9IGZ1bmN0aW9uKGMpIHtcbiAgICAgIGlmICh0eXBlb2YgYyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGMuYXVkaW8gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGMpKTtcbiAgICAgICAgcmVtYXAoYy5hdWRpbywgJ2F1dG9HYWluQ29udHJvbCcsICdtb3pBdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgICAgcmVtYXAoYy5hdWRpbywgJ25vaXNlU3VwcHJlc3Npb24nLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZUdldFVzZXJNZWRpYShjKTtcbiAgICB9O1xuXG4gICAgaWYgKE1lZGlhU3RyZWFtVHJhY2sgJiYgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3MpIHtcbiAgICAgIHZhciBuYXRpdmVHZXRTZXR0aW5ncyA9IE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmdldFNldHRpbmdzO1xuICAgICAgTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuZ2V0U2V0dGluZ3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9iaiA9IG5hdGl2ZUdldFNldHRpbmdzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJlbWFwKG9iaiwgJ21vekF1dG9HYWluQ29udHJvbCcsICdhdXRvR2FpbkNvbnRyb2wnKTtcbiAgICAgICAgcmVtYXAob2JqLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicsICdub2lzZVN1cHByZXNzaW9uJyk7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChNZWRpYVN0cmVhbVRyYWNrICYmIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHMpIHtcbiAgICAgIHZhciBuYXRpdmVBcHBseUNvbnN0cmFpbnRzID0gTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cztcbiAgICAgIE1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHMgPSBmdW5jdGlvbihjKSB7XG4gICAgICAgIGlmICh0aGlzLmtpbmQgPT09ICdhdWRpbycgJiYgdHlwZW9mIGMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgYyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYykpO1xuICAgICAgICAgIHJlbWFwKGMsICdhdXRvR2FpbkNvbnRyb2wnLCAnbW96QXV0b0dhaW5Db250cm9sJyk7XG4gICAgICAgICAgcmVtYXAoYywgJ25vaXNlU3VwcHJlc3Npb24nLCAnbW96Tm9pc2VTdXBwcmVzc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuYXRpdmVBcHBseUNvbnN0cmFpbnRzLmFwcGx5KHRoaXMsIFtjXSk7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY29uc3RyYWludHMsIG9uU3VjY2Vzcywgb25FcnJvcikge1xuICAgIGlmIChicm93c2VyRGV0YWlscy52ZXJzaW9uIDwgNDQpIHtcbiAgICAgIHJldHVybiBnZXRVc2VyTWVkaWFfKGNvbnN0cmFpbnRzLCBvblN1Y2Nlc3MsIG9uRXJyb3IpO1xuICAgIH1cbiAgICAvLyBSZXBsYWNlIEZpcmVmb3ggNDQrJ3MgZGVwcmVjYXRpb24gd2FybmluZyB3aXRoIHVucHJlZml4ZWQgdmVyc2lvbi5cbiAgICB1dGlscy5kZXByZWNhdGVkKCduYXZpZ2F0b3IuZ2V0VXNlck1lZGlhJyxcbiAgICAgICAgJ25hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhJyk7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpLnRoZW4ob25TdWNjZXNzLCBvbkVycm9yKTtcbiAgfTtcbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9maXJlZm94L2dldHVzZXJtZWRpYS5qc1xuLy8gbW9kdWxlIGlkID0gMjU2MlxuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2562\n");

/***/ }),

/***/ 2563:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nvar utils = __webpack_require__(2251);\n\nvar safariShim = {\n  // TODO: DrAlex, should be here, double check against LayoutTests\n\n  // TODO: once the back-end for the mac port is done, add.\n  // TODO: check for webkitGTK+\n  // shimPeerConnection: function() { },\n\n  shimLocalStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getLocalStreams = function() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n    }\n    if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getStreamById = function(id) {\n        var result = null;\n        if (this._localStreams) {\n          this._localStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        if (this._remoteStreams) {\n          this._remoteStreams.forEach(function(stream) {\n            if (stream.id === id) {\n              result = stream;\n            }\n          });\n        }\n        return result;\n      };\n    }\n    if (!('addStream' in window.RTCPeerConnection.prototype)) {\n      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        if (this._localStreams.indexOf(stream) === -1) {\n          this._localStreams.push(stream);\n        }\n        var self = this;\n        stream.getTracks().forEach(function(track) {\n          _addTrack.call(self, track, stream);\n        });\n      };\n\n      window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n        if (stream) {\n          if (!this._localStreams) {\n            this._localStreams = [stream];\n          } else if (this._localStreams.indexOf(stream) === -1) {\n            this._localStreams.push(stream);\n          }\n        }\n        _addTrack.call(this, track, stream);\n      };\n    }\n    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        var index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        var self = this;\n        var tracks = stream.getTracks();\n        this.getSenders().forEach(function(sender) {\n          if (tracks.indexOf(sender.track) !== -1) {\n            self.removeTrack(sender);\n          }\n        });\n      };\n    }\n  },\n  shimRemoteStreamsAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n      window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n    }\n    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n        get: function() {\n          return this._onaddstream;\n        },\n        set: function(f) {\n          if (this._onaddstream) {\n            this.removeEventListener('addstream', this._onaddstream);\n            this.removeEventListener('track', this._onaddstreampoly);\n          }\n          this.addEventListener('addstream', this._onaddstream = f);\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            var stream = e.streams[0];\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            var event = new Event('addstream');\n            event.stream = e.streams[0];\n            this.dispatchEvent(event);\n          }.bind(this));\n        }\n      });\n    }\n  },\n  shimCallbacksAPI: function(window) {\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\n      return;\n    }\n    var prototype = window.RTCPeerConnection.prototype;\n    var createOffer = prototype.createOffer;\n    var createAnswer = prototype.createAnswer;\n    var setLocalDescription = prototype.setLocalDescription;\n    var setRemoteDescription = prototype.setRemoteDescription;\n    var addIceCandidate = prototype.addIceCandidate;\n\n    prototype.createOffer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    prototype.createAnswer = function(successCallback, failureCallback) {\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      var promise = createAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n    var withCallback = function(description, successCallback, failureCallback) {\n      var promise = setLocalDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setLocalDescription = withCallback;\n\n    withCallback = function(description, successCallback, failureCallback) {\n      var promise = setRemoteDescription.apply(this, [description]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.setRemoteDescription = withCallback;\n\n    withCallback = function(candidate, successCallback, failureCallback) {\n      var promise = addIceCandidate.apply(this, [candidate]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n    prototype.addIceCandidate = withCallback;\n  },\n  shimGetUserMedia: function(window) {\n    var navigator = window && window.navigator;\n\n    if (!navigator.getUserMedia) {\n      if (navigator.webkitGetUserMedia) {\n        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n      } else if (navigator.mediaDevices &&\n          navigator.mediaDevices.getUserMedia) {\n        navigator.getUserMedia = function(constraints, cb, errcb) {\n          navigator.mediaDevices.getUserMedia(constraints)\n          .then(cb, errcb);\n        }.bind(navigator);\n      }\n    }\n  },\n  shimRTCIceServerUrls: function(window) {\n    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n    var OrigPeerConnection = window.RTCPeerConnection;\n    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        var newIceServers = [];\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n          var server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n    // wrap static methods. Currently just generateCertificate.\n    if ('generateCertificate' in window.RTCPeerConnection) {\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n        get: function() {\n          return OrigPeerConnection.generateCertificate;\n        }\n      });\n    }\n  },\n  shimTrackEventTransceiver: function(window) {\n    // Add event.transceiver member over deprecated event.receiver\n    if (typeof window === 'object' && window.RTCPeerConnection &&\n        ('receiver' in window.RTCTrackEvent.prototype) &&\n        // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n        // defined for some reason even when window.RTCTransceiver is not.\n        !window.RTCTransceiver) {\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n        get: function() {\n          return {receiver: this.receiver};\n        }\n      });\n    }\n  }\n};\n\n// Expose public methods.\nmodule.exports = {\n  shimCallbacksAPI: safariShim.shimCallbacksAPI,\n  shimLocalStreamsAPI: safariShim.shimLocalStreamsAPI,\n  shimRemoteStreamsAPI: safariShim.shimRemoteStreamsAPI,\n  shimGetUserMedia: safariShim.shimGetUserMedia,\n  shimRTCIceServerUrls: safariShim.shimRTCIceServerUrls,\n  shimTrackEventTransceiver: safariShim.shimTrackEventTransceiver\n  // TODO\n  // shimPeerConnection: safariShim.shimPeerConnection\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU2My5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvc2FmYXJpL3NhZmFyaV9zaGltLmpzPzE4YmIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xudmFyICQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cbi8qXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2IFRoZSBXZWJSVEMgcHJvamVjdCBhdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqICBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhIEJTRC1zdHlsZSBsaWNlbnNlXG4gKiAgdGhhdCBjYW4gYmUgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgc291cmNlXG4gKiAgdHJlZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxudmFyIHNhZmFyaVNoaW0gPSB7XG4gIC8vIFRPRE86IERyQWxleCwgc2hvdWxkIGJlIGhlcmUsIGRvdWJsZSBjaGVjayBhZ2FpbnN0IExheW91dFRlc3RzXG5cbiAgLy8gVE9ETzogb25jZSB0aGUgYmFjay1lbmQgZm9yIHRoZSBtYWMgcG9ydCBpcyBkb25lLCBhZGQuXG4gIC8vIFRPRE86IGNoZWNrIGZvciB3ZWJraXRHVEsrXG4gIC8vIHNoaW1QZWVyQ29ubmVjdGlvbjogZnVuY3Rpb24oKSB7IH0sXG5cbiAgc2hpbUxvY2FsU3RyZWFtc0FQSTogZnVuY3Rpb24od2luZG93KSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICdvYmplY3QnIHx8ICF3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCEoJ2dldExvY2FsU3RyZWFtcycgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zKSB7XG4gICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvY2FsU3RyZWFtcztcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghKCdnZXRTdHJlYW1CeUlkJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdHJlYW1CeUlkID0gZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLl9sb2NhbFN0cmVhbXMpIHtcbiAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgICAgIGlmIChzdHJlYW0uaWQgPT09IGlkKSB7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IHN0cmVhbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fcmVtb3RlU3RyZWFtcykge1xuICAgICAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbXMuZm9yRWFjaChmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgICAgIGlmIChzdHJlYW0uaWQgPT09IGlkKSB7XG4gICAgICAgICAgICAgIHJlc3VsdCA9IHN0cmVhbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCEoJ2FkZFN0cmVhbScgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgIHZhciBfYWRkVHJhY2sgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW0gPSBmdW5jdGlvbihzdHJlYW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLl9sb2NhbFN0cmVhbXMpIHtcbiAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEpIHtcbiAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMucHVzaChzdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odHJhY2spIHtcbiAgICAgICAgICBfYWRkVHJhY2suY2FsbChzZWxmLCB0cmFjaywgc3RyZWFtKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrID0gZnVuY3Rpb24odHJhY2ssIHN0cmVhbSkge1xuICAgICAgICBpZiAoc3RyZWFtKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLl9sb2NhbFN0cmVhbXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcyA9IFtzdHJlYW1dO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fbG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtcy5wdXNoKHN0cmVhbSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF9hZGRUcmFjay5jYWxsKHRoaXMsIHRyYWNrLCBzdHJlYW0pO1xuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCEoJ3JlbW92ZVN0cmVhbScgaW4gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gICAgICAgIGlmICghdGhpcy5fbG9jYWxTdHJlYW1zKSB7XG4gICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW1zID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fbG9jYWxTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKTtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgdHJhY2tzID0gc3RyZWFtLmdldFRyYWNrcygpO1xuICAgICAgICB0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKHNlbmRlcikge1xuICAgICAgICAgIGlmICh0cmFja3MuaW5kZXhPZihzZW5kZXIudHJhY2spICE9PSAtMSkge1xuICAgICAgICAgICAgc2VsZi5yZW1vdmVUcmFjayhzZW5kZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1cbiAgfSxcbiAgc2hpbVJlbW90ZVN0cmVhbXNBUEk6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAnb2JqZWN0JyB8fCAhd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghKCdnZXRSZW1vdGVTdHJlYW1zJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW1vdGVTdHJlYW1zID8gdGhpcy5fcmVtb3RlU3RyZWFtcyA6IFtdO1xuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCEoJ29uYWRkc3RyZWFtJyBpbiB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsICdvbmFkZHN0cmVhbScsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fb25hZGRzdHJlYW07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24oZikge1xuICAgICAgICAgIGlmICh0aGlzLl9vbmFkZHN0cmVhbSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbmFkZHN0cmVhbSk7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYWNrJywgdGhpcy5fb25hZGRzdHJlYW1wb2x5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdhZGRzdHJlYW0nLCB0aGlzLl9vbmFkZHN0cmVhbSA9IGYpO1xuICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2snLCB0aGlzLl9vbmFkZHN0cmVhbXBvbHkgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgc3RyZWFtID0gZS5zdHJlYW1zWzBdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9yZW1vdGVTdHJlYW1zKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbXMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9yZW1vdGVTdHJlYW1zLmluZGV4T2Yoc3RyZWFtKSA+PSAwKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbXMucHVzaChzdHJlYW0pO1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gbmV3IEV2ZW50KCdhZGRzdHJlYW0nKTtcbiAgICAgICAgICAgIGV2ZW50LnN0cmVhbSA9IGUuc3RyZWFtc1swXTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICBzaGltQ2FsbGJhY2tzQVBJOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ29iamVjdCcgfHwgIXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcHJvdG90eXBlID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtcbiAgICB2YXIgY3JlYXRlT2ZmZXIgPSBwcm90b3R5cGUuY3JlYXRlT2ZmZXI7XG4gICAgdmFyIGNyZWF0ZUFuc3dlciA9IHByb3RvdHlwZS5jcmVhdGVBbnN3ZXI7XG4gICAgdmFyIHNldExvY2FsRGVzY3JpcHRpb24gPSBwcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbjtcbiAgICB2YXIgc2V0UmVtb3RlRGVzY3JpcHRpb24gPSBwcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247XG4gICAgdmFyIGFkZEljZUNhbmRpZGF0ZSA9IHByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU7XG5cbiAgICBwcm90b3R5cGUuY3JlYXRlT2ZmZXIgPSBmdW5jdGlvbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgdmFyIG9wdGlvbnMgPSAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSA/IGFyZ3VtZW50c1syXSA6IGFyZ3VtZW50c1swXTtcbiAgICAgIHZhciBwcm9taXNlID0gY3JlYXRlT2ZmZXIuYXBwbHkodGhpcywgW29wdGlvbnNdKTtcbiAgICAgIGlmICghZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuXG4gICAgcHJvdG90eXBlLmNyZWF0ZUFuc3dlciA9IGZ1bmN0aW9uKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IChhcmd1bWVudHMubGVuZ3RoID49IDIpID8gYXJndW1lbnRzWzJdIDogYXJndW1lbnRzWzBdO1xuICAgICAgdmFyIHByb21pc2UgPSBjcmVhdGVBbnN3ZXIuYXBwbHkodGhpcywgW29wdGlvbnNdKTtcbiAgICAgIGlmICghZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgfVxuICAgICAgcHJvbWlzZS50aGVuKHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9O1xuXG4gICAgdmFyIHdpdGhDYWxsYmFjayA9IGZ1bmN0aW9uKGRlc2NyaXB0aW9uLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgdmFyIHByb21pc2UgPSBzZXRMb2NhbERlc2NyaXB0aW9uLmFwcGx5KHRoaXMsIFtkZXNjcmlwdGlvbl0pO1xuICAgICAgaWYgKCFmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9XG4gICAgICBwcm9taXNlLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH07XG4gICAgcHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb24gPSB3aXRoQ2FsbGJhY2s7XG5cbiAgICB3aXRoQ2FsbGJhY2sgPSBmdW5jdGlvbihkZXNjcmlwdGlvbiwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAgIHZhciBwcm9taXNlID0gc2V0UmVtb3RlRGVzY3JpcHRpb24uYXBwbHkodGhpcywgW2Rlc2NyaXB0aW9uXSk7XG4gICAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH1cbiAgICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcbiAgICBwcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb24gPSB3aXRoQ2FsbGJhY2s7XG5cbiAgICB3aXRoQ2FsbGJhY2sgPSBmdW5jdGlvbihjYW5kaWRhdGUsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IGFkZEljZUNhbmRpZGF0ZS5hcHBseSh0aGlzLCBbY2FuZGlkYXRlXSk7XG4gICAgICBpZiAoIWZhaWx1cmVDYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgIH1cbiAgICAgIHByb21pc2UudGhlbihzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcbiAgICBwcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlID0gd2l0aENhbGxiYWNrO1xuICB9LFxuICBzaGltR2V0VXNlck1lZGlhOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICB2YXIgbmF2aWdhdG9yID0gd2luZG93ICYmIHdpbmRvdy5uYXZpZ2F0b3I7XG5cbiAgICBpZiAoIW5hdmlnYXRvci5nZXRVc2VyTWVkaWEpIHtcbiAgICAgIGlmIChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKSB7XG4gICAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhLmJpbmQobmF2aWdhdG9yKTtcbiAgICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAmJlxuICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKSB7XG4gICAgICAgIG5hdmlnYXRvci5nZXRVc2VyTWVkaWEgPSBmdW5jdGlvbihjb25zdHJhaW50cywgY2IsIGVycmNiKSB7XG4gICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoY29uc3RyYWludHMpXG4gICAgICAgICAgLnRoZW4oY2IsIGVycmNiKTtcbiAgICAgICAgfS5iaW5kKG5hdmlnYXRvcik7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBzaGltUlRDSWNlU2VydmVyVXJsczogZnVuY3Rpb24od2luZG93KSB7XG4gICAgLy8gbWlncmF0ZSBmcm9tIG5vbi1zcGVjIFJUQ0ljZVNlcnZlci51cmwgdG8gUlRDSWNlU2VydmVyLnVybHNcbiAgICB2YXIgT3JpZ1BlZXJDb25uZWN0aW9uID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uO1xuICAgIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKSB7XG4gICAgICBpZiAocGNDb25maWcgJiYgcGNDb25maWcuaWNlU2VydmVycykge1xuICAgICAgICB2YXIgbmV3SWNlU2VydmVycyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBjQ29uZmlnLmljZVNlcnZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgc2VydmVyID0gcGNDb25maWcuaWNlU2VydmVyc1tpXTtcbiAgICAgICAgICBpZiAoIXNlcnZlci5oYXNPd25Qcm9wZXJ0eSgndXJscycpICYmXG4gICAgICAgICAgICAgIHNlcnZlci5oYXNPd25Qcm9wZXJ0eSgndXJsJykpIHtcbiAgICAgICAgICAgIHV0aWxzLmRlcHJlY2F0ZWQoJ1JUQ0ljZVNlcnZlci51cmwnLCAnUlRDSWNlU2VydmVyLnVybHMnKTtcbiAgICAgICAgICAgIHNlcnZlciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc2VydmVyKSk7XG4gICAgICAgICAgICBzZXJ2ZXIudXJscyA9IHNlcnZlci51cmw7XG4gICAgICAgICAgICBkZWxldGUgc2VydmVyLnVybDtcbiAgICAgICAgICAgIG5ld0ljZVNlcnZlcnMucHVzaChzZXJ2ZXIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdJY2VTZXJ2ZXJzLnB1c2gocGNDb25maWcuaWNlU2VydmVyc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBjQ29uZmlnLmljZVNlcnZlcnMgPSBuZXdJY2VTZXJ2ZXJzO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBPcmlnUGVlckNvbm5lY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpO1xuICAgIH07XG4gICAgd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSA9IE9yaWdQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7XG4gICAgLy8gd3JhcCBzdGF0aWMgbWV0aG9kcy4gQ3VycmVudGx5IGp1c3QgZ2VuZXJhdGVDZXJ0aWZpY2F0ZS5cbiAgICBpZiAoJ2dlbmVyYXRlQ2VydGlmaWNhdGUnIGluIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbikge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiwgJ2dlbmVyYXRlQ2VydGlmaWNhdGUnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIE9yaWdQZWVyQ29ubmVjdGlvbi5nZW5lcmF0ZUNlcnRpZmljYXRlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIHNoaW1UcmFja0V2ZW50VHJhbnNjZWl2ZXI6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIC8vIEFkZCBldmVudC50cmFuc2NlaXZlciBtZW1iZXIgb3ZlciBkZXByZWNhdGVkIGV2ZW50LnJlY2VpdmVyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnICYmIHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiAmJlxuICAgICAgICAoJ3JlY2VpdmVyJyBpbiB3aW5kb3cuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUpICYmXG4gICAgICAgIC8vIGNhbid0IGNoZWNrICd0cmFuc2NlaXZlcicgaW4gd2luZG93LlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLCBhcyBpdCBpc1xuICAgICAgICAvLyBkZWZpbmVkIGZvciBzb21lIHJlYXNvbiBldmVuIHdoZW4gd2luZG93LlJUQ1RyYW5zY2VpdmVyIGlzIG5vdC5cbiAgICAgICAgIXdpbmRvdy5SVENUcmFuc2NlaXZlcikge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdy5SVENUcmFja0V2ZW50LnByb3RvdHlwZSwgJ3RyYW5zY2VpdmVyJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB7cmVjZWl2ZXI6IHRoaXMucmVjZWl2ZXJ9O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIEV4cG9zZSBwdWJsaWMgbWV0aG9kcy5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzaGltQ2FsbGJhY2tzQVBJOiBzYWZhcmlTaGltLnNoaW1DYWxsYmFja3NBUEksXG4gIHNoaW1Mb2NhbFN0cmVhbXNBUEk6IHNhZmFyaVNoaW0uc2hpbUxvY2FsU3RyZWFtc0FQSSxcbiAgc2hpbVJlbW90ZVN0cmVhbXNBUEk6IHNhZmFyaVNoaW0uc2hpbVJlbW90ZVN0cmVhbXNBUEksXG4gIHNoaW1HZXRVc2VyTWVkaWE6IHNhZmFyaVNoaW0uc2hpbUdldFVzZXJNZWRpYSxcbiAgc2hpbVJUQ0ljZVNlcnZlclVybHM6IHNhZmFyaVNoaW0uc2hpbVJUQ0ljZVNlcnZlclVybHMsXG4gIHNoaW1UcmFja0V2ZW50VHJhbnNjZWl2ZXI6IHNhZmFyaVNoaW0uc2hpbVRyYWNrRXZlbnRUcmFuc2NlaXZlclxuICAvLyBUT0RPXG4gIC8vIHNoaW1QZWVyQ29ubmVjdGlvbjogc2FmYXJpU2hpbS5zaGltUGVlckNvbm5lY3Rpb25cbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9zYWZhcmkvc2FmYXJpX3NoaW0uanNcbi8vIG1vZHVsZSBpZCA9IDI1NjNcbi8vIG1vZHVsZSBjaHVua3MgPSA3Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2563\n");

/***/ }),

/***/ 2564:
/***/ (function(module, exports, __webpack_require__) {

eval("/*** IMPORTS FROM imports-loader ***/\nvar $ = __webpack_require__(0);\nvar jQuery = __webpack_require__(0);\n\n/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = __webpack_require__(2283);\nvar utils = __webpack_require__(2251);\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object.\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  var proto = window.RTCPeerConnection.prototype;\n  var nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    var wrappedCallback = function(e) {\n      cb(wrapper(e));\n    };\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  var nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    var unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get: function() {\n      return this['_on' + eventNameToWrap];\n    },\n    set: function(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    }\n  });\n}\n\nmodule.exports = {\n  shimRTCIceCandidate: function(window) {\n    // foundation is arbitrarily chosen as an indicator for full support for\n    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n    if (window.RTCIceCandidate && 'foundation' in\n        window.RTCIceCandidate.prototype) {\n      return;\n    }\n\n    var NativeRTCIceCandidate = window.RTCIceCandidate;\n    window.RTCIceCandidate = function(args) {\n      // Remove the a= which shouldn't be part of the candidate string.\n      if (typeof args === 'object' && args.candidate &&\n          args.candidate.indexOf('a=') === 0) {\n        args = JSON.parse(JSON.stringify(args));\n        args.candidate = args.candidate.substr(2);\n      }\n\n      // Augment the native candidate with the parsed fields.\n      var nativeCandidate = new NativeRTCIceCandidate(args);\n      var parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      var augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    };\n\n    // Hook up the augmented candidate in onicecandidate and\n    // addEventListener('icecandidate', ...)\n    wrapPeerConnectionEvent(window, 'icecandidate', function(e) {\n      if (e.candidate) {\n        Object.defineProperty(e, 'candidate', {\n          value: new window.RTCIceCandidate(e.candidate),\n          writable: 'false'\n        });\n      }\n      return e;\n    });\n  },\n\n  // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n  shimCreateObjectURL: function(window) {\n    var URL = window && window.URL;\n\n    if (!(typeof window === 'object' && window.HTMLMediaElement &&\n          'srcObject' in window.HTMLMediaElement.prototype &&\n        URL.createObjectURL && URL.revokeObjectURL)) {\n      // Only shim CreateObjectURL using srcObject if srcObject exists.\n      return undefined;\n    }\n\n    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n    var streams = new Map(), newId = 0;\n\n    URL.createObjectURL = function(stream) {\n      if ('getTracks' in stream) {\n        var url = 'polyblob:' + (++newId);\n        streams.set(url, stream);\n        utils.deprecated('URL.createObjectURL(stream)',\n            'elem.srcObject = stream');\n        return url;\n      }\n      return nativeCreateObjectURL(stream);\n    };\n    URL.revokeObjectURL = function(url) {\n      nativeRevokeObjectURL(url);\n      streams.delete(url);\n    };\n\n    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                                              'src');\n    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n      get: function() {\n        return dsc.get.apply(this);\n      },\n      set: function(url) {\n        this.srcObject = streams.get(url) || null;\n        return dsc.set.apply(this, [url]);\n      }\n    });\n\n    var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n    window.HTMLMediaElement.prototype.setAttribute = function() {\n      if (arguments.length === 2 &&\n          ('' + arguments[0]).toLowerCase() === 'src') {\n        this.srcObject = streams.get(arguments[1]) || null;\n      }\n      return nativeSetAttribute.apply(this, arguments);\n    };\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU2NC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy93ZWJydGMtYWRhcHRlci9zcmMvanMvY29tbW9uX3NoaW0uanM/Nzk2YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG52YXIgJCA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuLypcbiAqICBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFdlYlJUQyBwcm9qZWN0IGF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGEgQlNELXN0eWxlIGxpY2Vuc2VcbiAqICB0aGF0IGNhbiBiZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByb290IG9mIHRoZSBzb3VyY2VcbiAqICB0cmVlLlxuICovXG4gLyogZXNsaW50LWVudiBub2RlICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTRFBVdGlscyA9IHJlcXVpcmUoJ3NkcCcpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuXG4vLyBXcmFwcyB0aGUgcGVlcmNvbm5lY3Rpb24gZXZlbnQgZXZlbnROYW1lVG9XcmFwIGluIGEgZnVuY3Rpb25cbi8vIHdoaWNoIHJldHVybnMgdGhlIG1vZGlmaWVkIGV2ZW50IG9iamVjdC5cbmZ1bmN0aW9uIHdyYXBQZWVyQ29ubmVjdGlvbkV2ZW50KHdpbmRvdywgZXZlbnROYW1lVG9XcmFwLCB3cmFwcGVyKSB7XG4gIGlmICghd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBwcm90byA9IHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU7XG4gIHZhciBuYXRpdmVBZGRFdmVudExpc3RlbmVyID0gcHJvdG8uYWRkRXZlbnRMaXN0ZW5lcjtcbiAgcHJvdG8uYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKG5hdGl2ZUV2ZW50TmFtZSwgY2IpIHtcbiAgICBpZiAobmF0aXZlRXZlbnROYW1lICE9PSBldmVudE5hbWVUb1dyYXApIHtcbiAgICAgIHJldHVybiBuYXRpdmVBZGRFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHZhciB3cmFwcGVkQ2FsbGJhY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICBjYih3cmFwcGVyKGUpKTtcbiAgICB9O1xuICAgIHRoaXMuX2V2ZW50TWFwID0gdGhpcy5fZXZlbnRNYXAgfHwge307XG4gICAgdGhpcy5fZXZlbnRNYXBbY2JdID0gd3JhcHBlZENhbGxiYWNrO1xuICAgIHJldHVybiBuYXRpdmVBZGRFdmVudExpc3RlbmVyLmFwcGx5KHRoaXMsIFtuYXRpdmVFdmVudE5hbWUsXG4gICAgICB3cmFwcGVkQ2FsbGJhY2tdKTtcbiAgfTtcblxuICB2YXIgbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lciA9IHByb3RvLnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gIHByb3RvLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihuYXRpdmVFdmVudE5hbWUsIGNiKSB7XG4gICAgaWYgKG5hdGl2ZUV2ZW50TmFtZSAhPT0gZXZlbnROYW1lVG9XcmFwIHx8ICF0aGlzLl9ldmVudE1hcFxuICAgICAgICB8fCAhdGhpcy5fZXZlbnRNYXBbY2JdKSB7XG4gICAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICB2YXIgdW53cmFwcGVkQ2IgPSB0aGlzLl9ldmVudE1hcFtjYl07XG4gICAgZGVsZXRlIHRoaXMuX2V2ZW50TWFwW2NiXTtcbiAgICByZXR1cm4gbmF0aXZlUmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseSh0aGlzLCBbbmF0aXZlRXZlbnROYW1lLFxuICAgICAgdW53cmFwcGVkQ2JdKTtcbiAgfTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sICdvbicgKyBldmVudE5hbWVUb1dyYXAsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXNbJ19vbicgKyBldmVudE5hbWVUb1dyYXBdO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbihjYikge1xuICAgICAgaWYgKHRoaXNbJ19vbicgKyBldmVudE5hbWVUb1dyYXBdKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWVUb1dyYXAsXG4gICAgICAgICAgICB0aGlzWydfb24nICsgZXZlbnROYW1lVG9XcmFwXSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzWydfb24nICsgZXZlbnROYW1lVG9XcmFwXTtcbiAgICAgIH1cbiAgICAgIGlmIChjYikge1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lVG9XcmFwLFxuICAgICAgICAgICAgdGhpc1snX29uJyArIGV2ZW50TmFtZVRvV3JhcF0gPSBjYik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHNoaW1SVENJY2VDYW5kaWRhdGU6IGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIC8vIGZvdW5kYXRpb24gaXMgYXJiaXRyYXJpbHkgY2hvc2VuIGFzIGFuIGluZGljYXRvciBmb3IgZnVsbCBzdXBwb3J0IGZvclxuICAgIC8vIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJydGMtcGMvI3J0Y2ljZWNhbmRpZGF0ZS1pbnRlcmZhY2VcbiAgICBpZiAod2luZG93LlJUQ0ljZUNhbmRpZGF0ZSAmJiAnZm91bmRhdGlvbicgaW5cbiAgICAgICAgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgTmF0aXZlUlRDSWNlQ2FuZGlkYXRlID0gd2luZG93LlJUQ0ljZUNhbmRpZGF0ZTtcbiAgICB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlID0gZnVuY3Rpb24oYXJncykge1xuICAgICAgLy8gUmVtb3ZlIHRoZSBhPSB3aGljaCBzaG91bGRuJ3QgYmUgcGFydCBvZiB0aGUgY2FuZGlkYXRlIHN0cmluZy5cbiAgICAgIGlmICh0eXBlb2YgYXJncyA9PT0gJ29iamVjdCcgJiYgYXJncy5jYW5kaWRhdGUgJiZcbiAgICAgICAgICBhcmdzLmNhbmRpZGF0ZS5pbmRleE9mKCdhPScpID09PSAwKSB7XG4gICAgICAgIGFyZ3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGFyZ3MpKTtcbiAgICAgICAgYXJncy5jYW5kaWRhdGUgPSBhcmdzLmNhbmRpZGF0ZS5zdWJzdHIoMik7XG4gICAgICB9XG5cbiAgICAgIC8vIEF1Z21lbnQgdGhlIG5hdGl2ZSBjYW5kaWRhdGUgd2l0aCB0aGUgcGFyc2VkIGZpZWxkcy5cbiAgICAgIHZhciBuYXRpdmVDYW5kaWRhdGUgPSBuZXcgTmF0aXZlUlRDSWNlQ2FuZGlkYXRlKGFyZ3MpO1xuICAgICAgdmFyIHBhcnNlZENhbmRpZGF0ZSA9IFNEUFV0aWxzLnBhcnNlQ2FuZGlkYXRlKGFyZ3MuY2FuZGlkYXRlKTtcbiAgICAgIHZhciBhdWdtZW50ZWRDYW5kaWRhdGUgPSBPYmplY3QuYXNzaWduKG5hdGl2ZUNhbmRpZGF0ZSxcbiAgICAgICAgICBwYXJzZWRDYW5kaWRhdGUpO1xuXG4gICAgICAvLyBBZGQgYSBzZXJpYWxpemVyIHRoYXQgZG9lcyBub3Qgc2VyaWFsaXplIHRoZSBleHRyYSBhdHRyaWJ1dGVzLlxuICAgICAgYXVnbWVudGVkQ2FuZGlkYXRlLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNhbmRpZGF0ZTogYXVnbWVudGVkQ2FuZGlkYXRlLmNhbmRpZGF0ZSxcbiAgICAgICAgICBzZHBNaWQ6IGF1Z21lbnRlZENhbmRpZGF0ZS5zZHBNaWQsXG4gICAgICAgICAgc2RwTUxpbmVJbmRleDogYXVnbWVudGVkQ2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgsXG4gICAgICAgICAgdXNlcm5hbWVGcmFnbWVudDogYXVnbWVudGVkQ2FuZGlkYXRlLnVzZXJuYW1lRnJhZ21lbnQsXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgcmV0dXJuIGF1Z21lbnRlZENhbmRpZGF0ZTtcbiAgICB9O1xuXG4gICAgLy8gSG9vayB1cCB0aGUgYXVnbWVudGVkIGNhbmRpZGF0ZSBpbiBvbmljZWNhbmRpZGF0ZSBhbmRcbiAgICAvLyBhZGRFdmVudExpc3RlbmVyKCdpY2VjYW5kaWRhdGUnLCAuLi4pXG4gICAgd3JhcFBlZXJDb25uZWN0aW9uRXZlbnQod2luZG93LCAnaWNlY2FuZGlkYXRlJywgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUuY2FuZGlkYXRlKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCAnY2FuZGlkYXRlJywge1xuICAgICAgICAgIHZhbHVlOiBuZXcgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZShlLmNhbmRpZGF0ZSksXG4gICAgICAgICAgd3JpdGFibGU6ICdmYWxzZSdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBzaGltQ3JlYXRlT2JqZWN0VVJMIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBzaGltU291cmNlT2JqZWN0IHRvIGF2b2lkIGxvb3AuXG5cbiAgc2hpbUNyZWF0ZU9iamVjdFVSTDogZnVuY3Rpb24od2luZG93KSB7XG4gICAgdmFyIFVSTCA9IHdpbmRvdyAmJiB3aW5kb3cuVVJMO1xuXG4gICAgaWYgKCEodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LkhUTUxNZWRpYUVsZW1lbnQgJiZcbiAgICAgICAgICAnc3JjT2JqZWN0JyBpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUgJiZcbiAgICAgICAgVVJMLmNyZWF0ZU9iamVjdFVSTCAmJiBVUkwucmV2b2tlT2JqZWN0VVJMKSkge1xuICAgICAgLy8gT25seSBzaGltIENyZWF0ZU9iamVjdFVSTCB1c2luZyBzcmNPYmplY3QgaWYgc3JjT2JqZWN0IGV4aXN0cy5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdmFyIG5hdGl2ZUNyZWF0ZU9iamVjdFVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwuYmluZChVUkwpO1xuICAgIHZhciBuYXRpdmVSZXZva2VPYmplY3RVUkwgPSBVUkwucmV2b2tlT2JqZWN0VVJMLmJpbmQoVVJMKTtcbiAgICB2YXIgc3RyZWFtcyA9IG5ldyBNYXAoKSwgbmV3SWQgPSAwO1xuXG4gICAgVVJMLmNyZWF0ZU9iamVjdFVSTCA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICAgICAgaWYgKCdnZXRUcmFja3MnIGluIHN0cmVhbSkge1xuICAgICAgICB2YXIgdXJsID0gJ3BvbHlibG9iOicgKyAoKytuZXdJZCk7XG4gICAgICAgIHN0cmVhbXMuc2V0KHVybCwgc3RyZWFtKTtcbiAgICAgICAgdXRpbHMuZGVwcmVjYXRlZCgnVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pJyxcbiAgICAgICAgICAgICdlbGVtLnNyY09iamVjdCA9IHN0cmVhbScpO1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZUNyZWF0ZU9iamVjdFVSTChzdHJlYW0pO1xuICAgIH07XG4gICAgVVJMLnJldm9rZU9iamVjdFVSTCA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgbmF0aXZlUmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICBzdHJlYW1zLmRlbGV0ZSh1cmwpO1xuICAgIH07XG5cbiAgICB2YXIgZHNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NyYycpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGUsICdzcmMnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gZHNjLmdldC5hcHBseSh0aGlzKTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICB0aGlzLnNyY09iamVjdCA9IHN0cmVhbXMuZ2V0KHVybCkgfHwgbnVsbDtcbiAgICAgICAgcmV0dXJuIGRzYy5zZXQuYXBwbHkodGhpcywgW3VybF0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIG5hdGl2ZVNldEF0dHJpYnV0ZSA9IHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGU7XG4gICAgd2luZG93LkhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiZcbiAgICAgICAgICAoJycgKyBhcmd1bWVudHNbMF0pLnRvTG93ZXJDYXNlKCkgPT09ICdzcmMnKSB7XG4gICAgICAgIHRoaXMuc3JjT2JqZWN0ID0gc3RyZWFtcy5nZXQoYXJndW1lbnRzWzFdKSB8fCBudWxsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hdGl2ZVNldEF0dHJpYnV0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3dlYnJ0Yy1hZGFwdGVyL3NyYy9qcy9jb21tb25fc2hpbS5qc1xuLy8gbW9kdWxlIGlkID0gMjU2NFxuLy8gbW9kdWxlIGNodW5rcyA9IDciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2564\n");

/***/ }),

/***/ 2565:
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = WebrtcHeader;\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactBootstrap = __webpack_require__(41);\n\nvar _reactIntl = __webpack_require__(18);\n\nvar _constants = __webpack_require__(10);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction WebrtcHeader(props) {\n    var title = _react2.default.createElement(_reactIntl.FormattedMessage, {\n        id: 'webrtc.header',\n        defaultMessage: 'Call with {username}',\n        values: {\n            username: props.username\n        }\n    });\n\n    var closeSidebarTooltip = _react2.default.createElement(\n        _reactBootstrap.Tooltip,\n        { id: 'closeSidebarTooltip' },\n        _react2.default.createElement(_reactIntl.FormattedMessage, {\n            id: 'rhs_header.closeTooltip',\n            defaultMessage: 'Close Sidebar'\n        })\n    );\n\n    var expandSidebarTooltip = _react2.default.createElement(\n        _reactBootstrap.Tooltip,\n        { id: 'expandSidebarTooltip' },\n        _react2.default.createElement(_reactIntl.FormattedMessage, {\n            id: 'rhs_header.expandTooltip',\n            defaultMessage: 'Expand Sidebar'\n        })\n    );\n\n    var shrinkSidebarTooltip = _react2.default.createElement(\n        _reactBootstrap.Tooltip,\n        { id: 'shrinkSidebarTooltip' },\n        _react2.default.createElement(_reactIntl.FormattedMessage, {\n            id: 'rhs_header.expandTooltip',\n            defaultMessage: 'Shrink Sidebar'\n        })\n    );\n\n    return _react2.default.createElement(\n        'div',\n        { className: 'sidebar--right__header' },\n        _react2.default.createElement(\n            'span',\n            { className: 'sidebar--right__title' },\n            title\n        ),\n        _react2.default.createElement(\n            'div',\n            { className: 'pull-right' },\n            _react2.default.createElement(\n                'button',\n                {\n                    type: 'button',\n                    className: 'sidebar--right__expand',\n                    'aria-label': 'Expand',\n                    onClick: props.toggleSize\n                },\n                _react2.default.createElement(\n                    _reactBootstrap.OverlayTrigger,\n                    {\n                        trigger: ['hover', 'focus'],\n                        delayShow: _constants2.default.OVERLAY_TIME_DELAY,\n                        placement: 'top',\n                        overlay: expandSidebarTooltip\n                    },\n                    _react2.default.createElement('i', { className: 'fa fa-expand' })\n                ),\n                _react2.default.createElement(\n                    _reactBootstrap.OverlayTrigger,\n                    {\n                        trigger: ['hover', 'focus'],\n                        delayShow: _constants2.default.OVERLAY_TIME_DELAY,\n                        placement: 'top',\n                        overlay: shrinkSidebarTooltip\n                    },\n                    _react2.default.createElement('i', { className: 'fa fa-compress' })\n                )\n            ),\n            _react2.default.createElement(\n                'button',\n                {\n                    type: 'button',\n                    className: 'sidebar--right__close',\n                    'aria-label': 'Close',\n                    title: 'Close',\n                    onClick: props.onClose\n                },\n                _react2.default.createElement(\n                    _reactBootstrap.OverlayTrigger,\n                    {\n                        delayShow: _constants2.default.OVERLAY_TIME_DELAY,\n                        placement: 'top',\n                        overlay: closeSidebarTooltip\n                    },\n                    _react2.default.createElement('i', { className: 'fa fa-sign-out' })\n                )\n            )\n        )\n    );\n} // Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nWebrtcHeader.propTypes = {\n    username: _propTypes2.default.string.isRequired,\n    onClose: _propTypes2.default.func.isRequired,\n    toggleSize: _propTypes2.default.func\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU2NS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9jb21wb25lbnRzL3dlYnJ0Yy9jb21wb25lbnRzL3dlYnJ0Y19oZWFkZXIuanN4P2FkNWUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDE2LXByZXNlbnQgTWF0dGVybW9zdCwgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuLy8gU2VlIExpY2Vuc2UudHh0IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7T3ZlcmxheVRyaWdnZXIsIFRvb2x0aXB9IGZyb20gJ3JlYWN0LWJvb3RzdHJhcCc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gJ3V0aWxzL2NvbnN0YW50cy5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBXZWJydGNIZWFkZXIocHJvcHMpIHtcbiAgICBjb25zdCB0aXRsZSA9IChcbiAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2VcbiAgICAgICAgICAgIGlkPSd3ZWJydGMuaGVhZGVyJ1xuICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0NhbGwgd2l0aCB7dXNlcm5hbWV9J1xuICAgICAgICAgICAgdmFsdWVzPXt7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHByb3BzLnVzZXJuYW1lXG4gICAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBjbG9zZVNpZGViYXJUb29sdGlwID0gKFxuICAgICAgICA8VG9vbHRpcCBpZD0nY2xvc2VTaWRlYmFyVG9vbHRpcCc+XG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgIGlkPSdyaHNfaGVhZGVyLmNsb3NlVG9vbHRpcCdcbiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nQ2xvc2UgU2lkZWJhcidcbiAgICAgICAgICAgIC8+XG4gICAgICAgIDwvVG9vbHRpcD5cbiAgICApO1xuXG4gICAgY29uc3QgZXhwYW5kU2lkZWJhclRvb2x0aXAgPSAoXG4gICAgICAgIDxUb29sdGlwIGlkPSdleHBhbmRTaWRlYmFyVG9vbHRpcCc+XG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZVxuICAgICAgICAgICAgICAgIGlkPSdyaHNfaGVhZGVyLmV4cGFuZFRvb2x0aXAnXG4gICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2U9J0V4cGFuZCBTaWRlYmFyJ1xuICAgICAgICAgICAgLz5cbiAgICAgICAgPC9Ub29sdGlwPlxuICAgICk7XG5cbiAgICBjb25zdCBzaHJpbmtTaWRlYmFyVG9vbHRpcCA9IChcbiAgICAgICAgPFRvb2x0aXAgaWQ9J3Nocmlua1NpZGViYXJUb29sdGlwJz5cbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlXG4gICAgICAgICAgICAgICAgaWQ9J3Joc19oZWFkZXIuZXhwYW5kVG9vbHRpcCdcbiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZT0nU2hyaW5rIFNpZGViYXInXG4gICAgICAgICAgICAvPlxuICAgICAgICA8L1Rvb2x0aXA+XG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzaWRlYmFyLS1yaWdodF9faGVhZGVyJz5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nc2lkZWJhci0tcmlnaHRfX3RpdGxlJz57dGl0bGV9PC9zcGFuPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3B1bGwtcmlnaHQnPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgdHlwZT0nYnV0dG9uJ1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9J3NpZGViYXItLXJpZ2h0X19leHBhbmQnXG4gICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9J0V4cGFuZCdcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17cHJvcHMudG9nZ2xlU2l6ZX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxPdmVybGF5VHJpZ2dlclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcj17Wydob3ZlcicsICdmb2N1cyddfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXlTaG93PXtDb25zdGFudHMuT1ZFUkxBWV9USU1FX0RFTEFZfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PSd0b3AnXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5PXtleHBhbmRTaWRlYmFyVG9vbHRpcH1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdmYSBmYS1leHBhbmQnLz5cbiAgICAgICAgICAgICAgICAgICAgPC9PdmVybGF5VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgPE92ZXJsYXlUcmlnZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyPXtbJ2hvdmVyJywgJ2ZvY3VzJ119XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheVNob3c9e0NvbnN0YW50cy5PVkVSTEFZX1RJTUVfREVMQVl9XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9J3RvcCdcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXk9e3Nocmlua1NpZGViYXJUb29sdGlwfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ZhIGZhLWNvbXByZXNzJy8+XG4gICAgICAgICAgICAgICAgICAgIDwvT3ZlcmxheVRyaWdnZXI+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICB0eXBlPSdidXR0b24nXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc2lkZWJhci0tcmlnaHRfX2Nsb3NlJ1xuICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPSdDbG9zZSdcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9J0Nsb3NlJ1xuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5vbkNsb3NlfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPE92ZXJsYXlUcmlnZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxheVNob3c9e0NvbnN0YW50cy5PVkVSTEFZX1RJTUVfREVMQVl9XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9J3RvcCdcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXk9e2Nsb3NlU2lkZWJhclRvb2x0aXB9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0nZmEgZmEtc2lnbi1vdXQnLz5cbiAgICAgICAgICAgICAgICAgICAgPC9PdmVybGF5VHJpZ2dlcj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufVxuXG5XZWJydGNIZWFkZXIucHJvcFR5cGVzID0ge1xuICAgIHVzZXJuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXG4gICAgb25DbG9zZTogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcbiAgICB0b2dnbGVTaXplOiBQcm9wVHlwZXMuZnVuY1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjb21wb25lbnRzL3dlYnJ0Yy9jb21wb25lbnRzL3dlYnJ0Y19oZWFkZXIuanN4Il0sIm1hcHBpbmdzIjoiOzs7OztBQVVBO0FBQ0E7QUFSQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQUNBO0FBUUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBO0FBT0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFOQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQU5BO0FBZEE7QUF1QkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBUEE7QUF4QkE7QUFGQTtBQTRDQTtBQTVGQTtBQUNBO0FBNkZBO0FBQ0E7QUFDQTtBQUNBO0FBSEEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2565\n");

/***/ })

});