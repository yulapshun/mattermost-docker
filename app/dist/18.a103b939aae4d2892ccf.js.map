{"version":3,"sources":["webpack:///18.a103b939aae4d2892ccf.js","webpack:///./components/integrations/components/edit_outgoing_webhook/index.js","webpack:///./components/integrations/components/edit_outgoing_webhook/edit_outgoing_webhook.jsx"],"names":["webpackJsonp","2129","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","mapStateToProps","state","ownProps","hookId","location","query","id","_extends3","hook","entities","integrations","outgoingHooks","updateOutgoingHookRequest","requests","createOutgoingHook","mapDispatchToProps","dispatch","actions","_redux","bindActionCreators","updateOutgoingHook","getOutgoingHook","Object","defineProperty","value","_extends2","_reactRedux","_integrations","_edit_outgoing_webhook","_edit_outgoing_webhook2","connect","2372","_regenerator","_regenerator2","_asyncToGenerator2","_asyncToGenerator3","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_propTypes","_propTypes2","_react","_react2","_reactIntl","_es","_confirm_modal","_confirm_modal2","_abstract_outgoing_webhook","_abstract_outgoing_webhook2","_loading_screen","_loading_screen2","HEADER","defaultMessage","FOOTER","EditOutgoingWebhook","_React$PureComponent","props","_this2","this","_this","__proto__","call","editOutgoingHook","_ref","mark","_callee","triggerWordsSame","callbackUrlsSame","wrap","_context","prev","next","newHook","token","trigger_words","length","every","v","i","callback_urls","content_type","handleConfirmModal","submitHook","stop","_x","apply","arguments","setState","showConfirmModal","confirmModalDismissed","_callee2","_ref3","data","_context2","serverError","sent","browserHistory","push","team","name","abrupt","error","message","renderExtra","confirmButton","createElement","FormattedMessage","confirmTitle","confirmMessage","title","confirmButtonText","show","onConfirm","onCancel","key","window","mm_config","EnableOutgoingWebhooks","header","footer","action","initialHook","PureComponent","propTypes","object","isRequired","string","shape","func"],"mappings":"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","file":"18.a103b939aae4d2892ccf.js","sourcesContent":["webpackJsonp([18],{\n\n/***/ 2129:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends2 = __webpack_require__(19);\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _reactRedux = __webpack_require__(31);\n\nvar _redux = __webpack_require__(20);\n\nvar _integrations = __webpack_require__(735);\n\nvar _edit_outgoing_webhook = __webpack_require__(2372);\n\nvar _edit_outgoing_webhook2 = _interopRequireDefault(_edit_outgoing_webhook);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nfunction mapStateToProps(state, ownProps) {\n    var hookId = ownProps.location.query.id;\n\n    return (0, _extends3.default)({}, ownProps, {\n        hookId: hookId,\n        hook: state.entities.integrations.outgoingHooks[hookId],\n        updateOutgoingHookRequest: state.requests.integrations.createOutgoingHook\n    });\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: (0, _redux.bindActionCreators)({\n            updateOutgoingHook: _integrations.updateOutgoingHook,\n            getOutgoingHook: _integrations.getOutgoingHook\n        }, dispatch)\n    };\n}\n\nexports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(_edit_outgoing_webhook2.default);\n\n/***/ }),\n\n/***/ 2372:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _regenerator = __webpack_require__(76);\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = __webpack_require__(77);\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _getPrototypeOf = __webpack_require__(6);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(4);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(5);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(7);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(8);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(17);\n\nvar _es = __webpack_require__(44);\n\nvar _confirm_modal = __webpack_require__(311);\n\nvar _confirm_modal2 = _interopRequireDefault(_confirm_modal);\n\nvar _abstract_outgoing_webhook = __webpack_require__(2092);\n\nvar _abstract_outgoing_webhook2 = _interopRequireDefault(_abstract_outgoing_webhook);\n\nvar _loading_screen = __webpack_require__(236);\n\nvar _loading_screen2 = _interopRequireDefault(_loading_screen);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar HEADER = { id: 'integrations.edit', defaultMessage: 'Edit' }; // Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar FOOTER = { id: 'update_outgoing_webhook.update', defaultMessage: 'Update' };\n\nvar EditOutgoingWebhook = function (_React$PureComponent) {\n    (0, _inherits3.default)(EditOutgoingWebhook, _React$PureComponent);\n\n    function EditOutgoingWebhook(props) {\n        var _this2 = this;\n\n        (0, _classCallCheck3.default)(this, EditOutgoingWebhook);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (EditOutgoingWebhook.__proto__ || (0, _getPrototypeOf2.default)(EditOutgoingWebhook)).call(this, props));\n\n        _this.editOutgoingHook = function () {\n            var _ref = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(hook) {\n                var triggerWordsSame, callbackUrlsSame;\n                return _regenerator2.default.wrap(function _callee$(_context) {\n                    while (1) {\n                        switch (_context.prev = _context.next) {\n                            case 0:\n                                _this.newHook = hook;\n\n                                if (_this.props.hook.id) {\n                                    hook.id = _this.props.hook.id;\n                                }\n\n                                if (_this.props.hook.token) {\n                                    hook.token = _this.props.hook.token;\n                                }\n\n                                triggerWordsSame = _this.props.hook.trigger_words.length === hook.trigger_words.length && _this.props.hook.trigger_words.every(function (v, i) {\n                                    return v === hook.trigger_words[i];\n                                });\n                                callbackUrlsSame = _this.props.hook.callback_urls.length === hook.callback_urls.length && _this.props.hook.callback_urls.every(function (v, i) {\n                                    return v === hook.callback_urls[i];\n                                });\n\n                                if (!(_this.props.hook.content_type !== hook.content_type || !triggerWordsSame || !callbackUrlsSame)) {\n                                    _context.next = 9;\n                                    break;\n                                }\n\n                                _this.handleConfirmModal();\n                                _context.next = 11;\n                                break;\n\n                            case 9:\n                                _context.next = 11;\n                                return _this.submitHook();\n\n                            case 11:\n                            case 'end':\n                                return _context.stop();\n                        }\n                    }\n                }, _callee, _this2);\n            }));\n\n            return function (_x) {\n                return _ref.apply(this, arguments);\n            };\n        }();\n\n        _this.handleConfirmModal = function () {\n            _this.setState({ showConfirmModal: true });\n        };\n\n        _this.confirmModalDismissed = function () {\n            _this.setState({ showConfirmModal: false });\n        };\n\n        _this.submitHook = (0, _asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2() {\n            var _ref3, data;\n\n            return _regenerator2.default.wrap(function _callee2$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            _this.setState({ serverError: '' });\n\n                            _context2.next = 3;\n                            return _this.props.actions.updateOutgoingHook(_this.newHook);\n\n                        case 3:\n                            _ref3 = _context2.sent;\n                            data = _ref3.data;\n\n                            if (!data) {\n                                _context2.next = 8;\n                                break;\n                            }\n\n                            _es.browserHistory.push('/' + _this.props.team.name + '/integrations/outgoing_webhooks');\n                            return _context2.abrupt('return');\n\n                        case 8:\n\n                            _this.setState({ showConfirmModal: false });\n\n                            if (_this.props.updateOutgoingHookRequest.error) {\n                                _this.setState({ serverError: _this.props.updateOutgoingHookRequest.error.message });\n                            }\n\n                        case 10:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, _callee2, _this2);\n        }));\n\n        _this.renderExtra = function () {\n            var confirmButton = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'update_outgoing_webhook.update',\n                defaultMessage: 'Update'\n            });\n\n            var confirmTitle = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'update_outgoing_webhook.confirm',\n                defaultMessage: 'Edit Outgoing Webhook'\n            });\n\n            var confirmMessage = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                id: 'update_outgoing_webhook.question',\n                defaultMessage: 'Your changes may break the existing outgoing webhook. Are you sure you would like to update it?'\n            });\n\n            return _react2.default.createElement(_confirm_modal2.default, {\n                title: confirmTitle,\n                message: confirmMessage,\n                confirmButtonText: confirmButton,\n                show: _this.state.showConfirmModal,\n                onConfirm: _this.submitHook,\n                onCancel: _this.confirmModalDismissed\n            });\n        };\n\n        _this.state = {\n            showConfirmModal: false,\n            serverError: ''\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(EditOutgoingWebhook, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (window.mm_config.EnableOutgoingWebhooks === 'true') {\n                this.props.actions.getOutgoingHook(this.props.hookId);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            if (!this.props.hook) {\n                return _react2.default.createElement(_loading_screen2.default, null);\n            }\n\n            return _react2.default.createElement(_abstract_outgoing_webhook2.default, {\n                team: this.props.team,\n                header: HEADER,\n                footer: FOOTER,\n                renderExtra: this.renderExtra(),\n                action: this.editOutgoingHook,\n                serverError: this.state.serverError,\n                initialHook: this.props.hook\n            });\n        }\n    }]);\n    return EditOutgoingWebhook;\n}(_react2.default.PureComponent);\n\nEditOutgoingWebhook.propTypes = {\n\n    /**\n     * The current team\n     */\n    team: _propTypes2.default.object.isRequired,\n\n    /**\n     * The outgoing webhook to edit\n     */\n    hook: _propTypes2.default.object,\n\n    /**\n     * The id of the outgoing webhook to edit\n     */\n    hookId: _propTypes2.default.string.isRequired,\n\n    /**\n     * The request state for updateOutgoingHook action. Contains status and error\n     */\n    updateOutgoingHookRequest: _propTypes2.default.object.isRequired,\n\n    actions: _propTypes2.default.shape({\n\n        /**\n         * The function to call to update an outgoing webhook\n         */\n        updateOutgoingHook: _propTypes2.default.func.isRequired,\n\n        /**\n         * The function to call to get an outgoing webhook\n         */\n        getOutgoingHook: _propTypes2.default.func.isRequired\n    }).isRequired\n};\nexports.default = EditOutgoingWebhook;\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 18.a103b939aae4d2892ccf.js","// Copyright (c) 2017 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport {getOutgoingHook, updateOutgoingHook} from 'mattermost-redux/actions/integrations';\n\nimport EditOutgoingWebhook from './edit_outgoing_webhook.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const hookId = ownProps.location.query.id;\n\n    return {\n        ...ownProps,\n        hookId,\n        hook: state.entities.integrations.outgoingHooks[hookId],\n        updateOutgoingHookRequest: state.requests.integrations.createOutgoingHook\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            updateOutgoingHook,\n            getOutgoingHook\n        }, dispatch)\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditOutgoingWebhook);\n\n\n\n// WEBPACK FOOTER //\n// ./components/integrations/components/edit_outgoing_webhook/index.js","// Copyright (c) 2016-present Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {browserHistory} from 'react-router/es6';\n\nimport ConfirmModal from 'components/confirm_modal.jsx';\nimport AbstractOutgoingWebhook from 'components/integrations/components/abstract_outgoing_webhook.jsx';\nimport LoadingScreen from 'components/loading_screen.jsx';\n\nconst HEADER = {id: 'integrations.edit', defaultMessage: 'Edit'};\nconst FOOTER = {id: 'update_outgoing_webhook.update', defaultMessage: 'Update'};\n\nexport default class EditOutgoingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n         * The current team\n         */\n        team: PropTypes.object.isRequired,\n\n        /**\n         * The outgoing webhook to edit\n         */\n        hook: PropTypes.object,\n\n        /**\n         * The id of the outgoing webhook to edit\n         */\n        hookId: PropTypes.string.isRequired,\n\n        /**\n         * The request state for updateOutgoingHook action. Contains status and error\n         */\n        updateOutgoingHookRequest: PropTypes.object.isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n             * The function to call to update an outgoing webhook\n             */\n            updateOutgoingHook: PropTypes.func.isRequired,\n\n            /**\n             * The function to call to get an outgoing webhook\n             */\n            getOutgoingHook: PropTypes.func.isRequired\n        }).isRequired\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showConfirmModal: false,\n            serverError: ''\n        };\n    }\n\n    componentDidMount() {\n        if (window.mm_config.EnableOutgoingWebhooks === 'true') {\n            this.props.actions.getOutgoingHook(this.props.hookId);\n        }\n    }\n\n    editOutgoingHook = async (hook) => {\n        this.newHook = hook;\n\n        if (this.props.hook.id) {\n            hook.id = this.props.hook.id;\n        }\n\n        if (this.props.hook.token) {\n            hook.token = this.props.hook.token;\n        }\n\n        const triggerWordsSame = (this.props.hook.trigger_words.length === hook.trigger_words.length) &&\n            this.props.hook.trigger_words.every((v, i) => v === hook.trigger_words[i]);\n\n        const callbackUrlsSame = (this.props.hook.callback_urls.length === hook.callback_urls.length) &&\n            this.props.hook.callback_urls.every((v, i) => v === hook.callback_urls[i]);\n\n        if (this.props.hook.content_type !== hook.content_type ||\n            !triggerWordsSame || !callbackUrlsSame) {\n            this.handleConfirmModal();\n        } else {\n            await this.submitHook();\n        }\n    }\n\n    handleConfirmModal = () => {\n        this.setState({showConfirmModal: true});\n    }\n\n    confirmModalDismissed = () => {\n        this.setState({showConfirmModal: false});\n    }\n\n    submitHook = async () => {\n        this.setState({serverError: ''});\n\n        const {data} = await this.props.actions.updateOutgoingHook(this.newHook);\n\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/outgoing_webhooks`);\n            return;\n        }\n\n        this.setState({showConfirmModal: false});\n\n        if (this.props.updateOutgoingHookRequest.error) {\n            this.setState({serverError: this.props.updateOutgoingHookRequest.error.message});\n        }\n    }\n\n    renderExtra = () => {\n        const confirmButton = (\n            <FormattedMessage\n                id='update_outgoing_webhook.update'\n                defaultMessage='Update'\n            />\n        );\n\n        const confirmTitle = (\n            <FormattedMessage\n                id='update_outgoing_webhook.confirm'\n                defaultMessage='Edit Outgoing Webhook'\n            />\n        );\n\n        const confirmMessage = (\n            <FormattedMessage\n                id='update_outgoing_webhook.question'\n                defaultMessage='Your changes may break the existing outgoing webhook. Are you sure you would like to update it?'\n            />\n        );\n\n        return (\n            <ConfirmModal\n                title={confirmTitle}\n                message={confirmMessage}\n                confirmButtonText={confirmButton}\n                show={this.state.showConfirmModal}\n                onConfirm={this.submitHook}\n                onCancel={this.confirmModalDismissed}\n            />\n        );\n    }\n\n    render() {\n        if (!this.props.hook) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractOutgoingWebhook\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                renderExtra={this.renderExtra()}\n                action={this.editOutgoingHook}\n                serverError={this.state.serverError}\n                initialHook={this.props.hook}\n            />\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/integrations/components/edit_outgoing_webhook/edit_outgoing_webhook.jsx"],"sourceRoot":""}